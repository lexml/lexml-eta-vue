var q=Object.defineProperty,U=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var O=(o,e,n)=>e in o?q(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,S=(o,e)=>{for(var n in e||(e={}))G.call(e,n)&&O(o,n,e[n]);if(N)for(var n of N(e))J.call(e,n)&&O(o,n,e[n]);return o},w=(o,e)=>U(o,z(e));import{_}from"./index.43e81f85.js";import{a as H,b,s as c,x as K,o as m,c as A,g as t,y as P,f as E,h as f,G as F,H as Q,e as M,p as W,n as X}from"./vendor.d72107b9.js";import{h as Y,p as Z}from"./proposicaoService.8f275e90.js";import{_ as $}from"./plugin-vue_export-helper.21dcd24c.js";var ee={async buscarTextoLexmlAsJson(o,e,n){return(await Y.get("proposicao/texto-lexml/json",{params:{sigla:o,numero:e,ano:n}})).data}},D=(o=>(o.EMENDA="emenda",o.EMENDA_ARTIGO_ONDE_COUBER="emendaArtigoOndeCouber",o))(D||{});const g=o=>(W("data-v-0db1ebf7"),o=o(),X(),o),oe={class:"navbar navbar-expand-sm navbar-light"},ae={class:"container-fluid"},te=g(()=>t("button",{onclick:"history.back()",type:"button",class:"btn btn-back"},[t("span",{class:"btn-label"},[t("svg",{class:"bi"},[t("use",{"xlink:href":"#arrow-left"})])])],-1)),ne=g(()=>t("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[t("span",{class:"navbar-toggler-icon"})],-1)),se={class:"collapse navbar-collapse proposicao-actions",id:"navbarSupportedContent"},ie={class:"container-edicao-emenda"},le={class:"container-fluid mt-3"},de={class:"row"},re={class:"col-md-7 col-sm-12"},ce=g(()=>t("span",{class:"proposicao-actions d-md-none"},[t("button",{type:"button",class:"btn btn-labeled proposicao-action","data-bs-toggle":"modal","data-bs-target":"#mdlVisualizacao"}," Visualiza\xE7\xE3o "),t("button",{type:"button",class:"btn btn-labeled proposicao-action","data-bs-toggle":"modal","data-bs-target":"#mdlAjuda"}," Ajuda ")],-1)),ue={key:2},me=g(()=>t("strong",null,"Carregando...",-1)),pe=[me],ve=["modo","projetoNorma"],_e={class:"col-md-5 col-sm-12 d-none d-md-block"},be=H({props:{sigla:null,numero:null,ano:null,emendaEmDisco:null,titulo:null,ondeCouber:{type:Boolean}},setup(o){const e=o,n=b(()=>_(()=>import("./AcoesPermitidas.35d81be7.js"),["assets/AcoesPermitidas.35d81be7.js","assets/AcoesPermitidas.bd2a98c2.css","assets/vendor.d72107b9.js","assets/index.43e81f85.js","assets/index.68742fa1.css","assets/plugin-vue_export-helper.21dcd24c.js"])),C=b(()=>_(()=>import("./CardProposicao.ce618155.js"),["assets/CardProposicao.ce618155.js","assets/CardProposicao.050bb2d7.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/vendor.d72107b9.js"])),V=b(()=>_(()=>import("./EditorEmendaPainelLateral.2f5c7572.js"),["assets/EditorEmendaPainelLateral.2f5c7572.js","assets/index.43e81f85.js","assets/index.68742fa1.css","assets/vendor.d72107b9.js"])),R=b(()=>_(()=>import("./EditorEmendaPainelModal.e29dab18.js"),["assets/EditorEmendaPainelModal.e29dab18.js","assets/index.43e81f85.js","assets/index.68742fa1.css","assets/vendor.d72107b9.js"])),p=c(!0),j=c(),x=c([]),h=c(""),r=c(),a=c(),y=c("emenda");K(async()=>{p.value=!0,e.emendaEmDisco?setTimeout(()=>{a.value=e.emendaEmDisco,y.value=a.value.emenda.tipo,r.value.dispositivosEmenda={},setTimeout(()=>{var s;r.value.dispositivosEmenda=((s=a.value)==null?void 0:s.emenda.dispositivos)||{}},0),p.value=!1},400):Promise.all([Z.buscarProposicao(e.sigla,e.numero,e.ano),ee.buscarTextoLexmlAsJson(e.sigla,e.numero,e.ano)]).then(s=>{var i,l;a.value={metadados:{titulo:"",datAlteracao:new Date,datUltimoAcesso:new Date},projetoNorma:s[1]||{},emenda:{tipo:e.ondeCouber?D.EMENDA_ARTIGO_ONDE_COUBER:D.EMENDA,proposicao:w(S({},s[0]),{urn:(l=(i=s[1].value.metadado)==null?void 0:i.identificacao)==null?void 0:l.urn,identificacao:s[0].descricaoIdentificacao})}},y.value=a.value.emenda.tipo,r.value.dispositivosEmenda={},setTimeout(()=>{var d;r.value.dispositivosEmenda=((d=a.value)==null?void 0:d.emenda.dispositivos)||{}},0)}).finally(()=>p.value=!1)});function B(){a.value&&(a.value.emenda.dispositivos=r.value.getDispositivosEmenda(),a.value.emenda.comandoEmenda=r.value.getComandoEmenda())}let k=0;function T(){clearInterval(k),k=window.setTimeout(()=>{var i,l,d,u,v;const s=document.querySelectorAll(".lx-eta-dropdown-content-item");x.value=Array.from(s).map(L=>{var I;return(I=L.textContent)!=null?I:""}),h.value=(v=(u=(d=(l=(i=document.querySelector(".lx-eta-dropdown"))==null?void 0:i.closest(".container__menu"))==null?void 0:l.previousElementSibling)==null?void 0:d.querySelector("label"))==null?void 0:u.getAttribute("data-rotulo"))!=null?v:""},300)}return(s,i)=>{var l,d,u;return m(),A("div",{ref_key:"root",ref:j,onClick:T,onKeyup:T},[t("nav",oe,[t("div",ae,[te,ne,t("div",se,[a.value?(m(),P(E(n),{key:0,item:a.value,"acoes-permitidas":["salvar"]},null,8,["item"])):f("",!0)])])]),t("div",ie,[t("div",le,[t("div",de,[t("section",re,[a.value?F((m(),A("input",{key:0,type:"input",class:"form-control",placeholder:"T\xEDtulo da emenda","aria-label":"T\xEDtulo da emenda",required:"","onUpdate:modelValue":i[0]||(i[0]=v=>a.value.metadados.titulo=v)},null,512)),[[Q,a.value.metadados.titulo]]):f("",!0),a.value?(m(),P(E(C),{key:1,class:"editar-emenda-dados",proposicao:a.value.emenda.proposicao},null,8,["proposicao"])):f("",!0),ce,p.value?(m(),A("div",ue,pe)):f("",!0),t("lexml-eta",{ref_key:"lexmlEta",ref:r,modo:y.value,projetoNorma:((l=a.value)==null?void 0:l.projetoNorma)||{},onOnchange:B},null,40,ve)]),t("aside",_e,[M(E(V),{"itens-menu":x.value,"texto-rotulo-dispositivo":h.value,"comando-emenda":(d=a.value)==null?void 0:d.emenda.comandoEmenda},null,8,["itens-menu","texto-rotulo-dispositivo","comando-emenda"])])])])]),M(E(R),{"itens-menu":x.value,"texto-rotulo-dispositivo":h.value,"comando-emenda":(u=a.value)==null?void 0:u.emenda.comandoEmenda},null,8,["itens-menu","texto-rotulo-dispositivo","comando-emenda"])],544)}}});var ye=$(be,[["__scopeId","data-v-0db1ebf7"]]);export{ye as default};
