import{_ as v}from"./index.9f9557c7.js";import{a as R,b as _,s as d,x as j,o as u,c as A,g as o,y as N,f as b,h as E,G as B,H as L,e as O,p as q,n as U}from"./vendor.d72107b9.js";import{h as z,p as G}from"./proposicaoService.8f275e90.js";import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";var H={async buscarTextoLexmlAsJson(t,n,f){return(await z.get("proposicao/texto-lexml/json",{params:{sigla:t,numero:n,ano:f}})).data}},D=(t=>(t.EMENDA="emenda",t.EMENDA_ARTIGO_ONDE_COUBER="emendaArtigoOndeCouber",t))(D||{});const g=t=>(q("data-v-7b0f4050"),t=t(),U(),t),K={class:"navbar navbar-expand-sm navbar-light"},F={class:"container-fluid"},Q=g(()=>o("button",{onclick:"history.back()",type:"button",class:"btn btn-back"},[o("span",{class:"btn-label"},[o("svg",{class:"bi"},[o("use",{"xlink:href":"#arrow-left"})])])],-1)),W=g(()=>o("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[o("span",{class:"navbar-toggler-icon"})],-1)),X={class:"collapse navbar-collapse proposicao-actions",id:"navbarSupportedContent"},Y={class:"container-edicao-emenda"},Z={class:"container-fluid mt-3"},$={class:"row"},ee={class:"col-md-7 col-sm-12"},oe=g(()=>o("span",{class:"proposicao-actions d-md-none"},[o("button",{type:"button",class:"btn btn-labeled proposicao-action","data-bs-toggle":"modal","data-bs-target":"#mdlVisualizacao"}," Visualiza\xE7\xE3o "),o("button",{type:"button",class:"btn btn-labeled proposicao-action","data-bs-toggle":"modal","data-bs-target":"#mdlAjuda"}," Ajuda ")],-1)),ae={key:2},te=g(()=>o("strong",null,"Carregando...",-1)),ne=[te],se=["modo","projetoNorma"],ie={class:"col-md-5 col-sm-12 d-none d-md-block"},le=R({props:{sigla:null,numero:null,ano:null,emendaEmDisco:null,titulo:null,ondeCouber:{type:Boolean}},setup(t){const n=t,f=_(()=>v(()=>import("./AcoesPermitidas.74c47825.js"),["assets/AcoesPermitidas.74c47825.js","assets/AcoesPermitidas.bd995759.css","assets/vendor.d72107b9.js","assets/index.9f9557c7.js","assets/index.68742fa1.css","assets/plugin-vue_export-helper.21dcd24c.js"])),C=_(()=>v(()=>import("./CardProposicao.4639bdb0.js"),["assets/CardProposicao.4639bdb0.js","assets/CardProposicao.456bf671.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/vendor.d72107b9.js"])),S=_(()=>v(()=>import("./EditorEmendaPainelLateral.cd988e45.js"),["assets/EditorEmendaPainelLateral.cd988e45.js","assets/index.9f9557c7.js","assets/index.68742fa1.css","assets/vendor.d72107b9.js"])),w=_(()=>v(()=>import("./EditorEmendaPainelModal.5f46b3cf.js"),["assets/EditorEmendaPainelModal.5f46b3cf.js","assets/index.9f9557c7.js","assets/index.68742fa1.css","assets/vendor.d72107b9.js"])),m=d(!0),M=d(),x=d([]),h=d(""),r=d(),e=d(),y=d("emenda");j(async()=>{m.value=!0,n.emendaEmDisco?setTimeout(()=>{e.value=n.emendaEmDisco,y.value=e.value.emenda.tipo,r.value.dispositivosEmenda={},setTimeout(()=>{var a;r.value.dispositivosEmenda=((a=e.value)==null?void 0:a.emenda.dispositivos)||{}},0),m.value=!1},400):Promise.all([G.buscarProposicao(n.sigla,n.numero,n.ano),H.buscarTextoLexmlAsJson(n.sigla,n.numero,n.ano)]).then(a=>{var s,i,l;e.value={metadados:{versao:"1",titulo:"",datAlteracao:new Date,datUltimoAcesso:new Date},projetoNorma:a[1]||{},emenda:{tipo:n.ondeCouber?D.EMENDA_ARTIGO_ONDE_COUBER:D.EMENDA,proposicao:{urn:(i=(s=a[1].value.metadado)==null?void 0:s.identificacao)==null?void 0:i.urn,sigla:a[0].sigla,numero:a[0].numero,ano:a[0].ano,ementa:a[0].ementa,genero:"M",substitutivo:!1,identificacaoTexto:a[0].descricaoIdentificacaoExtensa}}},y.value=e.value.emenda.tipo,r.value.dispositivosEmenda=(l=e.value)==null?void 0:l.emenda.dispositivos}).finally(()=>m.value=!1)});function P(){e.value&&(e.value.emenda.dispositivos=r.value.getDispositivosEmenda(),e.value.emenda.comandoEmenda=r.value.getComandoEmenda())}let k=0;function T(){clearInterval(k),k=window.setTimeout(()=>{var s,i,l,c,p;const a=document.querySelectorAll(".lx-eta-dropdown-content-item");x.value=Array.from(a).map(V=>{var I;return(I=V.textContent)!=null?I:""}),h.value=(p=(c=(l=(i=(s=document.querySelector(".lx-eta-dropdown"))==null?void 0:s.closest(".container__menu"))==null?void 0:i.previousElementSibling)==null?void 0:l.querySelector("label"))==null?void 0:c.getAttribute("data-rotulo"))!=null?p:""},300)}return(a,s)=>{var i,l,c;return u(),A("div",{ref_key:"root",ref:M,onClick:T,onKeyup:T},[o("nav",K,[o("div",F,[Q,W,o("div",X,[e.value?(u(),N(b(f),{key:0,item:e.value,"acoes-permitidas":["salvar"]},null,8,["item"])):E("",!0)])])]),o("div",Y,[o("div",Z,[o("div",$,[o("section",ee,[e.value?B((u(),A("input",{key:0,type:"input",class:"form-control",placeholder:"T\xEDtulo da emenda","aria-label":"T\xEDtulo da emenda",required:"","onUpdate:modelValue":s[0]||(s[0]=p=>e.value.metadados.titulo=p)},null,512)),[[L,e.value.metadados.titulo]]):E("",!0),e.value?(u(),N(b(C),{key:1,class:"editar-emenda-dados",proposicao:e.value.emenda.proposicao},null,8,["proposicao"])):E("",!0),oe,m.value?(u(),A("div",ae,ne)):E("",!0),o("lexml-eta",{ref_key:"lexmlEta",ref:r,modo:y.value,projetoNorma:((i=e.value)==null?void 0:i.projetoNorma)||{},onOnchange:P},null,40,se)]),o("aside",ie,[O(b(S),{"itens-menu":x.value,"texto-rotulo-dispositivo":h.value,"comando-emenda":(l=e.value)==null?void 0:l.emenda.comandoEmenda},null,8,["itens-menu","texto-rotulo-dispositivo","comando-emenda"])])])])]),O(b(w),{"itens-menu":x.value,"texto-rotulo-dispositivo":h.value,"comando-emenda":(c=e.value)==null?void 0:c.emenda.comandoEmenda},null,8,["itens-menu","texto-rotulo-dispositivo","comando-emenda"])],544)}}});var me=J(le,[["__scopeId","data-v-7b0f4050"]]);export{me as default};
