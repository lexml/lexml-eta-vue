import{d as C,q as S,t as I,o as l,c as r,f as m,p as U,l as B,k as _,e as s}from"./vendor.447b1bdc.js";import{g as h}from"./typeUtils.6cf80cd1.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";const b=n=>(U("data-v-26f2e98e"),n=n(),B(),n),P={class:"proposicao-actions"},q=b(()=>s("span",{class:"btn-label"},[s("svg",{class:"bi proposicao-action-icon"},[s("use",{"xlink:href":"#journal-code"})])],-1)),w=_(" Emendar "),A=[q,w],E=b(()=>s("span",{class:"btn-label"},[s("svg",{class:"bi proposicao-action-icon"},[s("use",{"xlink:href":"#save"})])],-1)),J=_(" Salvar "),L=[E,J],V=b(()=>s("span",{class:"btn-label"},[s("svg",{class:"bi proposicao-action-icon"},[s("use",{"xlink:href":"#folder2-open"})])],-1)),R=_(" Abrir "),$=[V,R],F=C({props:{item:null,acoesPermitidas:null},setup(n){const i=n,p=S(i.acoesPermitidas),f=I();function y(){if(i.item){const{sigla:e,numero:o,ano:t}=h(i.item);f.push({path:"/edicao",query:{sigla:e,numero:o,ano:t}})}}function v(){const e=i.item;if(i.item){const{sigla:o,numero:t,ano:c}=h(e),{titulo:d}=e,a=JSON.stringify({titulo:d,sigla:o,numero:t,ano:c,projetoNorma:e.projetoNorma,emenda:e.emendaLexml},null,4),x=new Blob([a],{type:"application/json"}),j=`${o} ${t}/${c}.json`,N=URL.createObjectURL(x),u=document.createElement("a");u.href=N,u.download=j,document.body.appendChild(u),u.click()}}function g(){let e=document.getElementById("fileUpload");e!=null&&e.click()}function k(e){const o=e.target;if(o&&o.files){var t=new FileReader;t.readAsText(o.files[0]),t.onloadend=c=>{var d;if((d=c.target)!=null&&d.result){const a=JSON.parse(c.target.result);f.push({name:"edicao",query:{sigla:a.sigla,numero:a.numero,ano:a.ano},params:{emendaLexml:JSON.stringify(a.emenda),titulo:a.titulo}})}}}}return(e,o)=>(l(),r("span",P,[p.value.includes("emendar")?(l(),r("button",{key:0,type:"button",class:"btn btn-labeled proposicao-action",onClick:y},A)):m("",!0),p.value.includes("salvar")?(l(),r("button",{key:1,type:"button",class:"btn btn-labeled proposicao-action",onClick:v},L)):m("",!0),p.value.includes("abrir")?(l(),r("button",{key:2,type:"button",class:"btn btn-labeled proposicao-action",onClick:g},$)):m("",!0),p.value.includes("abrir")?(l(),r("input",{key:3,type:"file",id:"fileUpload",accept:"application/json",onChange:o[0]||(o[0]=t=>k(t)),style:{display:"none"}},null,32)):m("",!0)]))}});var G=O(F,[["__scopeId","data-v-26f2e98e"]]);export{G as default};
