var I=Object.defineProperty,N=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var k=(e,o,t)=>o in e?I(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,x=(e,o)=>{for(var t in o||(o={}))B.call(o,t)&&k(e,t,o[t]);if(v)for(var t of v(o))D.call(o,t)&&k(e,t,o[t]);return e},A=(e,o)=>N(e,E(o));import{a as O,q as P,t as q,o as d,c as p,g as f,p as J,m as L,l as h,f as i}from"./vendor.7a07ef18.js";import{g as M}from"./typeUtils.6cf80cd1.js";import{u as V}from"./index.633d349e.js";import{_ as R}from"./plugin-vue_export-helper.21dcd24c.js";const a=[];for(let e=0;e<256;e++)a[e]=(e<16?"0":"")+e.toString(16);const $=()=>{const e=Math.random()*4294967295|0,o=Math.random()*4294967295|0,t=Math.random()*4294967295|0,l=Math.random()*4294967295|0;return a[e&255]+a[e>>8&255]+a[e>>16&255]+a[e>>24&255]+"-"+a[o&255]+a[o>>8&255]+"-"+a[o>>16&15|64]+a[o>>24&255]+"-"+a[t&63|128]+a[t>>8&255]+"-"+a[t>>16&255]+a[t>>24&255]+a[l&255]+a[l>>8&255]+a[l>>16&255]+a[l>>24&255]};const g=e=>(J("data-v-695dad16"),e=e(),L(),e),F={class:"proposicao-actions"},T=g(()=>i("span",{class:"btn-label"},[i("svg",{class:"bi proposicao-action-icon"},[i("use",{"xlink:href":"#journal-code"})])],-1)),z=h(" Emendar "),G=[T,z],H=g(()=>i("span",{class:"btn-label"},[i("svg",{class:"bi proposicao-action-icon"},[i("use",{"xlink:href":"#save"})])],-1)),K=h(" Salvar "),Q=[H,K],W=g(()=>i("span",{class:"btn-label"},[i("svg",{class:"bi proposicao-action-icon"},[i("use",{"xlink:href":"#folder2-open"})])],-1)),X=h(" Abrir "),Y=[W,X],Z=O({props:{item:null,acoesPermitidas:null},setup(e){const o=e,t=P(o.acoesPermitidas),l=q(),y=V();function S(){if(o.item){const{sigla:s,numero:n,ano:c}=M(o.item);l.push({path:"/edicao",query:{sigla:s,numero:n,ano:c}})}}function U(){const s=o.item;if(s.id=s.id||$(),s.datAlteracao=new Date,s.datUltimoAcesso=new Date,o.item){const n=JSON.stringify(s,null,4),c=new Blob([n],{type:"application/json"}),{sigla:u,numero:m,ano:_}=s.proposicao,r=`${u} ${m}/${_}.emenda.json`,C=URL.createObjectURL(c),b=document.createElement("a");b.href=C,b.download=r,document.body.appendChild(b),b.click(),y.adicionarEmenda(s)}}function j(){let s=document.getElementById("fileUpload");s!=null&&s.click()}function w(s){const n=s.target;if(n&&n.files){var c=new FileReader;c.readAsText(n.files[0]),c.onloadend=u=>{var m;if((m=u.target)!=null&&m.result){const _=JSON.parse(u.target.result),r=A(x({},_),{datAlteracao:new Date(_.datAlteracao),datUltimoAcesso:new Date});l.push({name:"edicao",query:{sigla:r.proposicao.sigla,numero:r.proposicao.numero,ano:r.proposicao.ano},params:{emendaLexml:JSON.stringify(r.emendaLexml),titulo:r.titulo}}),y.adicionarEmenda(r)}}}}return(s,n)=>(d(),p("span",F,[t.value.includes("emendar")?(d(),p("button",{key:0,type:"button",class:"btn btn-labeled proposicao-action",onClick:S},G)):f("",!0),t.value.includes("salvar")?(d(),p("button",{key:1,type:"button",class:"btn btn-labeled proposicao-action",onClick:U},Q)):f("",!0),t.value.includes("abrir")?(d(),p("button",{key:2,type:"button",class:"btn btn-labeled proposicao-action",onClick:j},Y)):f("",!0),t.value.includes("abrir")?(d(),p("input",{key:3,type:"file",id:"fileUpload",accept:"application/json",onChange:n[0]||(n[0]=c=>w(c)),style:{display:"none"}},null,32)):f("",!0)]))}});var ne=R(Z,[["__scopeId","data-v-695dad16"]]);export{ne as default};
