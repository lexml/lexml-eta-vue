const t=Symbol("defaultState"),e=Symbol("delegatesFocus"),o=Symbol("firstRender"),i=Symbol("focusTarget"),n=Symbol("hasDynamicTemplate"),r=Symbol("ids"),s=Symbol("nativeInternals"),a=Symbol("raiseChangeEvents"),l=Symbol("render"),u=Symbol("renderChanges"),c=Symbol("rendered"),d=Symbol("rendering"),p=Symbol("setState"),h=Symbol("shadowRoot"),f=Symbol("shadowRootMode"),m=Symbol("state"),v=Symbol("stateEffects"),g=Symbol("template");function b(t,e){return"boolean"==typeof e?e:"string"==typeof e&&(""===e||t.toLowerCase()===e.toLowerCase())}function y(t,e){let o=e;for(;o;){const e=o.assignedSlot||o.parentNode||o.host;if(e===t)return!0;o=e}return!1}function x(t){const e=A(t,(t=>t instanceof HTMLElement&&t.matches('a[href],area[href],button:not([disabled]),details,iframe,input:not([disabled]),select:not([disabled]),textarea:not([disabled]),[contentEditable="true"],[tabindex]')&&t.tabIndex>=0)),{value:o}=e.next();return o instanceof HTMLElement?o:null}function w(t,e){return Array.prototype.findIndex.call(t,(t=>t===e||y(t,e)))}function E(t,e){const o=e.composedPath()[0];return t===o||y(t,o)}function*O(t){t&&(yield t,yield*function*(t){let e=t;for(;e=e instanceof HTMLElement&&e.assignedSlot?e.assignedSlot:e instanceof ShadowRoot?e.host:e.parentNode,e;)yield e}(t))}function q(t,e,o){t.toggleAttribute(e,o),t[s]&&t[s].states&&t[s].states.toggle(e,o)}const _={checked:!0,defer:!0,disabled:!0,hidden:!0,ismap:!0,multiple:!0,noresize:!0,readonly:!0,selected:!0};function*A(t,e){let o;if(e(t)&&(yield t),t instanceof HTMLElement&&t.shadowRoot)o=t.shadowRoot.children;else{const e=t instanceof HTMLSlotElement?t.assignedNodes({flatten:!0}):[];o=e.length>0?e:t.childNodes}if(o)for(let t=0;t<o.length;t++)yield*A(o[t],e)}const S={html:(t,...e)=>I.html(t,...e).content},I={html(t,...e){const o=document.createElement("template");return o.innerHTML=String.raw(t,...e),o}},N=new Map;function k(t){if("function"==typeof t){let e;try{e=new t}catch(o){if("TypeError"!==o.name)throw o;!function(t){let e;const o=/^[A-Za-z][A-Za-z0-9_$]*$/,i=t.name&&t.name.match(o);if(i){const t=/([A-Z])/g;e=i[0].replace(t,((t,e,o)=>o>0?`-${e}`:e)).toLowerCase()}else e="custom-element";let n,r=N.get(e)||0;for(;n=`${e}-${r}`,customElements.get(n);r++);customElements.define(n,t),N.set(e,r+1)}(t),e=new t}return e}return document.createElement(t)}function P(t,e){const o=t.parentNode;if(!o)throw"An element must have a parent before it can be substituted.";return(t instanceof HTMLElement||t instanceof SVGElement)&&(e instanceof HTMLElement||e instanceof SVGElement)&&(Array.prototype.forEach.call(t.attributes,(t=>{e.getAttribute(t.name)||"class"===t.name||"style"===t.name||e.setAttribute(t.name,t.value)})),Array.prototype.forEach.call(t.classList,(t=>{e.classList.add(t)})),Array.prototype.forEach.call(t.style,(o=>{e.style[o]||(e.style[o]=t.style[o])}))),e.append(...t.childNodes),o.replaceChild(e,t),e}function T(t,e){if("function"==typeof e&&t.constructor===e||"string"==typeof e&&t instanceof Element&&t.localName===e)return t;{const o=k(e);return P(t,o),o}}const C={tabindex:"tabIndex"},R={tabIndex:"tabindex"};function D(t){if(t===HTMLElement)return[];const e=Object.getPrototypeOf(t.prototype).constructor;let o=e.observedAttributes;o||(o=D(e));const i=Object.getOwnPropertyNames(t.prototype).filter((e=>{const o=Object.getOwnPropertyDescriptor(t.prototype,e);return o&&"function"==typeof o.set})).map((t=>function(t){let e=R[t];if(!e){const o=/([A-Z])/g;e=t.replace(o,"-$1").toLowerCase(),R[t]=e}return e}(t))).filter((t=>o.indexOf(t)<0));return o.concat(i)}const L=Symbol("state"),j=Symbol("raiseChangeEventsInNextRender"),M=Symbol("changedSinceLastRender");function F(t,e){const o={};for(const r in e)i=e[r],n=t[r],(i instanceof Date&&n instanceof Date?i.getTime()===n.getTime():i===n)||(o[r]=!0);var i,n;return o}const U=new Map,B=Symbol("shadowIdProxy"),z=Symbol("proxyElement"),V={get(t,e){const o=t[z][h];return o&&"string"==typeof e?o.getElementById(e):null}};const H=function(t){return class extends t{attributeChangedCallback(t,e,o){if(super.attributeChangedCallback&&super.attributeChangedCallback(t,e,o),o!==e&&!this[d]){const e=function(t){let e=C[t];if(!e){const o=/-([a-z])/g;e=t.replace(o,(t=>t[1].toUpperCase())),C[t]=e}return e}(t);if(e in this){const i=_[t]?b(t,o):o;this[e]=i}}}static get observedAttributes(){return D(this)}}}(function(e){class i extends e{constructor(){super(),this[o]=void 0,this[a]=!1,this[M]=null,this[p](this[t])}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this[u]()}get[t](){return super[t]||{}}[l](t){super[l]&&super[l](t)}[u](){void 0===this[o]&&(this[o]=!0);const t=this[M];if(this[o]||t){const e=this[a];this[a]=this[j],this[d]=!0,this[l](t),this[d]=!1,this[M]=null,this[c](t),this[o]=!1,this[a]=e,this[j]=e}}[c](t){super[c]&&super[c](t)}async[p](t){this[d]&&console.warn(`${this.constructor.name} called [setState] during rendering, which you should avoid.\nSee https://elix.org/documentation/ReactiveMixin.`);const{state:e,changed:i}=function(t,e){const o=Object.assign({},t[L]),i={};let n=e;for(;;){const e=F(o,n);if(0===Object.keys(e).length)break;Object.assign(o,n),Object.assign(i,e),n=t[v](o,e)}return{state:o,changed:i}}(this,t);if(this[L]&&0===Object.keys(i).length)return;Object.freeze(e),this[L]=e,this[a]&&(this[j]=!0);const n=void 0===this[o]||null!==this[M];this[M]=Object.assign(this[M]||{},i);this.isConnected&&!n&&(await Promise.resolve(),this[u]())}get[m](){return this[L]}[v](t,e){return super[v]?super[v](t,e):{}}}return"true"===new URLSearchParams(location.search).get("elixdebug")&&Object.defineProperty(i.prototype,"state",{get(){return this[m]}}),i}(function(t){return class extends t{get[r](){if(!this[B]){const t={[z]:this};this[B]=new Proxy(t,V)}return this[B]}[l](t){if(super[l]&&super[l](t),!this[h]){const t=function(t){let e=t[n]?void 0:U.get(t.constructor);if(void 0===e){if(e=t[g],e&&!(e instanceof HTMLTemplateElement))throw`Warning: the [template] property for ${t.constructor.name} must return an HTMLTemplateElement.`;t[n]||U.set(t.constructor,e||null)}return e}(this);if(t){const o=this.attachShadow({delegatesFocus:this[e],mode:this[f]}),i=document.importNode(t.content,!0);o.append(i),this[h]=o}else this[h]=null}}get[f](){return"open"}}}(HTMLElement))),$=Symbol("checkSize"),K=Symbol("closestAvailableItemIndex"),Q=Symbol("contentSlot"),G=t,W=Symbol("defaultTabIndex"),Z=e,X=Symbol("effectEndTarget"),Y=o,J=i,tt=Symbol("getItemText"),et=Symbol("goDown"),ot=Symbol("goEnd"),it=Symbol("goFirst"),nt=Symbol("goLast"),rt=Symbol("goLeft"),st=Symbol("goNext"),at=Symbol("goPrevious"),lt=Symbol("goRight"),ut=Symbol("goStart"),ct=Symbol("goToItemWithPrefix"),dt=Symbol("goUp"),pt=n,ht=r,ft=Symbol("inputDelegate"),mt=Symbol("itemsDelegate"),vt=Symbol("keydown"),gt=Symbol("mouseenter"),bt=Symbol("mouseleave"),yt=s,xt=a,wt=l,Et=u,Ot=Symbol("renderDataToElement"),qt=c,_t=d,At=Symbol("scrollTarget"),St=p,It=h,Nt=f,kt=Symbol("startEffect"),Pt=m,Tt=v,Ct=Symbol("swipeDown"),Rt=Symbol("swipeDownComplete"),Dt=Symbol("swipeLeft"),Lt=Symbol("swipeLeftTransitionEnd"),jt=Symbol("swipeRight"),Mt=Symbol("swipeRightTransitionEnd"),Ft=Symbol("swipeUp"),Ut=Symbol("swipeUpComplete"),Bt=Symbol("swipeStart"),zt=Symbol("swipeTarget"),Vt=Symbol("tap"),Ht=g,$t=Symbol("toggleSelectedFlag");"true"===new URLSearchParams(location.search).get("elixdebug")&&(window.elix={internal:{checkSize:$,closestAvailableItemIndex:K,contentSlot:Q,defaultState:G,defaultTabIndex:W,delegatesFocus:Z,effectEndTarget:X,firstRender:Y,focusTarget:J,getItemText:tt,goDown:et,goEnd:ot,goFirst:it,goLast:nt,goLeft:rt,goNext:st,goPrevious:at,goRight:lt,goStart:ut,goToItemWithPrefix:ct,goUp:dt,hasDynamicTemplate:pt,ids:ht,inputDelegate:ft,itemsDelegate:mt,keydown:vt,mouseenter:gt,mouseleave:bt,nativeInternals:yt,event:event,raiseChangeEvents:xt,render:wt,renderChanges:Et,renderDataToElement:Ot,rendered:qt,rendering:_t,scrollTarget:At,setState:St,shadowRoot:It,shadowRootMode:Nt,startEffect:kt,state:Pt,stateEffects:Tt,swipeDown:Ct,swipeDownComplete:Rt,swipeLeft:Dt,swipeLeftTransitionEnd:Lt,swipeRight:jt,swipeRightTransitionEnd:Mt,swipeUp:Ft,swipeUpComplete:Ut,swipeStart:Bt,swipeTarget:zt,tap:Vt,template:Ht,toggleSelectedFlag:$t}});const Kt=Symbol("previousBodyStyleOverflow"),Qt=Symbol("previousDocumentMarginRight");const Gt=Symbol("wrap"),Wt=Symbol("wrappingFocus");function Zt(t){return class extends t{[vt](t){const e=x(this[It]);if(e){const o=document.activeElement&&(document.activeElement===e||document.activeElement.contains(e)),i=this[It].activeElement,n=i&&(i===e||y(i,e));(o||n)&&"Tab"===t.key&&t.shiftKey&&(this[Wt]=!0,this[ht].focusCatcher.focus(),this[Wt]=!1)}return super[vt]&&super[vt](t)||!1}[wt](t){super[wt]&&super[wt](t),this[Y]&&this[ht].focusCatcher.addEventListener("focus",(()=>{if(!this[Wt]){const t=x(this[It]);t&&t.focus()}}))}[Gt](t){const e=S.html`
        <style>
          #focusCapture {
            display: flex;
            height: 100%;
            overflow: hidden;
            width: 100%;
          }

          #focusCaptureContainer {
            align-items: center;
            display: flex;
            flex: 1;
            flex-direction: column;
            justify-content: center;
            position: relative;
          }
        </style>
        <div id="focusCapture">
          <div id="focusCaptureContainer"></div>
          <div id="focusCatcher" tabindex="0"></div>
        </div>
      `,o=e.getElementById("focusCaptureContainer");o&&(t.replaceWith(e),o.append(t))}}}function Xt(t){return class extends t{constructor(){super(),this.addEventListener("keydown",(async t=>{this[xt]=!0,this[Pt].focusVisible||this[St]({focusVisible:!0});this[vt](t)&&(t.preventDefault(),t.stopImmediatePropagation()),await Promise.resolve(),this[xt]=!1}))}attributeChangedCallback(t,e,o){if("tabindex"===t){let t;null===o?t=-1:(t=Number(o),isNaN(t)&&(t=this[W]?this[W]:0)),this.tabIndex=t}else super.attributeChangedCallback(t,e,o)}get[G](){const t=this[Z]?-1:0;return Object.assign(super[G]||{},{tabIndex:t})}[vt](t){return!!super[vt]&&super[vt](t)}[wt](t){super[wt]&&super[wt](t),t.tabIndex&&(this.tabIndex=this[Pt].tabIndex)}get tabIndex(){return super.tabIndex}set tabIndex(t){super.tabIndex!==t&&(super.tabIndex=t),this[_t]||this[St]({tabIndex:t})}}}Zt.wrap=Gt;const Yt=function(t){return class extends t{get[G](){return Object.assign(super[G]||{},{role:null})}[wt](t){if(super[wt]&&super[wt](t),t.role){const{role:t}=this[Pt];t?this.setAttribute("role",t):this.removeAttribute("role")}}get role(){return super.role}set role(t){const e=String(t);super.role=e,this[_t]||this[St]({s:e})}}}(H);class Jt extends Yt{get[G](){return Object.assign(super[G],{role:"none"})}get[Ht](){return I.html`
      <style>
        :host {
          display: inline-block;
          height: 100%;
          left: 0;
          position: fixed;
          top: 0;
          touch-action: manipulation;
          width: 100%;
        }
      </style>
      <slot></slot>
    `}}class te extends Jt{constructor(){super(),"PointerEvent"in window||this.addEventListener("touchmove",(t=>{1===t.touches.length&&t.preventDefault()}))}}const ee=Symbol("closePromise"),oe=Symbol("closeResolve");function ie(t){return class extends t{attributeChangedCallback(t,e,o){if("opened"===t){const e=b(t,o);this.opened!==e&&(this.opened=e)}else super.attributeChangedCallback(t,e,o)}async close(t){super.close&&await super.close(),this[St]({closeResult:t}),await this.toggle(!1)}get closed(){return this[Pt]&&!this[Pt].opened}get closeFinished(){return this[Pt].closeFinished}get closeResult(){return this[Pt].closeResult}get[G](){const t={closeResult:null,opened:!1};return this[kt]&&Object.assign(t,{closeFinished:!0,effect:"close",effectPhase:"after",openCloseEffects:!0}),Object.assign(super[G]||{},t)}async open(){super.open&&await super.open(),this[St]({closeResult:void 0}),await this.toggle(!0)}get opened(){return this[Pt]&&this[Pt].opened}set opened(t){this[St]({closeResult:void 0}),this.toggle(t)}[wt](t){if(super[wt](t),t.opened){const{opened:t}=this[Pt];q(this,"opened",t)}if(t.closeFinished){const{closeFinished:t}=this[Pt];q(this,"closed",t)}}[qt](t){if(super[qt]&&super[qt](t),t.opened&&this[xt]){const t=new CustomEvent("opened-changed",{bubbles:!0,detail:{closeResult:this[Pt].closeResult,opened:this[Pt].opened}});this.dispatchEvent(t);const e=new CustomEvent("openedchange",{bubbles:!0,detail:{closeResult:this[Pt].closeResult,opened:this[Pt].opened}});if(this.dispatchEvent(e),this[Pt].opened){const t=new CustomEvent("opened",{bubbles:!0});this.dispatchEvent(t);const e=new CustomEvent("open",{bubbles:!0});this.dispatchEvent(e)}else{const t=new CustomEvent("closed",{bubbles:!0,detail:{closeResult:this[Pt].closeResult}});this.dispatchEvent(t);const e=new CustomEvent("close",{bubbles:!0,detail:{closeResult:this[Pt].closeResult}});this.dispatchEvent(e)}}const e=this[oe];this.closeFinished&&e&&(this[oe]=null,this[ee]=null,e(this[Pt].closeResult))}[Tt](t,e){const o=super[Tt]?super[Tt](t,e):{};if(e.openCloseEffects||e.effect||e.effectPhase||e.opened){const{effect:e,effectPhase:i,openCloseEffects:n,opened:r}=t,s=n?"close"===e&&"after"===i:!r;Object.assign(o,{closeFinished:s})}return o}async toggle(t=!this.opened){super.toggle&&await super.toggle(t);if(t!==this[Pt].opened){const e={opened:t};this[Pt].openCloseEffects&&(e.effect=t?"open":"close","after"===this[Pt].effectPhase&&(e.effectPhase="before")),await this[St](e)}}whenClosed(){return this[ee]||(this[ee]=new Promise((t=>{this[oe]=t}))),this[ee]}}}class ne extends H{get[Ht](){return I.html`
      <style>
        :host {
          display: inline-block;
          position: relative;
        }
      </style>
      <slot></slot>
    `}}const re=Symbol("appendedToDocument"),se=Symbol("assignedZIndex"),ae=Symbol("restoreFocusToElement");function le(t){const e=function(){const t=document.body.querySelectorAll("*"),e=Array.from(t,(t=>{const e=getComputedStyle(t);let o=0;if("static"!==e.position&&"auto"!==e.zIndex){const t=e.zIndex?parseInt(e.zIndex):0;o=isNaN(t)?0:t}return o}));return Math.max(...e)}()+1;t[se]=e,t.style.zIndex=e.toString()}function ue(t){const e=getComputedStyle(t).zIndex,o=t.style.zIndex,i=!isNaN(parseInt(o));if("auto"===e)return i;if("0"===e&&!i){const e=t.assignedSlot||(t instanceof ShadowRoot?t.host:t.parentNode);if(!(e instanceof HTMLElement))return!0;if(!ue(e))return!1}return!0}function ce(t){return class extends t{get[Q](){const t=this[It]&&this[It].querySelector("slot:not([name])");return this[It]&&t||console.warn(`SlotContentMixin expects ${this.constructor.name} to define a shadow tree that includes a default (unnamed) slot.\nSee https://elix.org/documentation/SlotContentMixin.`),t}get[G](){return Object.assign(super[G]||{},{content:null})}[qt](t){if(super[qt]&&super[qt](t),this[Y]){const t=this[Q];t&&t.addEventListener("slotchange",(async()=>{this[xt]=!0;const e=t.assignedNodes({flatten:!0});Object.freeze(e),this[St]({content:e}),await Promise.resolve(),this[xt]=!1}))}}}}const de=ie(function(t){return class extends t{get autoFocus(){return this[Pt].autoFocus}set autoFocus(t){this[St]({autoFocus:t})}get[G](){return Object.assign(super[G]||{},{autoFocus:!0,persistent:!1})}async open(){this[Pt].persistent||this.isConnected||(this[re]=!0,document.body.append(this)),super.open&&await super.open()}[wt](t){if(super[wt]&&super[wt](t),this[Y]&&this.addEventListener("blur",(t=>{const e=t.relatedTarget||document.activeElement;if(e instanceof HTMLElement){y(this,e)||(this.opened?this[ae]=e:(e.focus(),this[ae]=null))}})),(t.effectPhase||t.opened||t.persistent)&&!this[Pt].persistent){(void 0===this.closeFinished?this.closed:this.closeFinished)?this[se]&&(this.style.zIndex="",this[se]=null):this[se]?this.style.zIndex=this[se]:ue(this)||le(this)}}[qt](t){if(super[qt]&&super[qt](t),this[Y]&&this[Pt].persistent&&!ue(this)&&le(this),t.opened&&this[Pt].autoFocus)if(this[Pt].opened){this[ae]||document.activeElement===document.body||(this[ae]=document.activeElement);const t=x(this);t&&t.focus()}else this[ae]&&(this[ae].focus(),this[ae]=null);!this[Y]&&!this[Pt].persistent&&this.closeFinished&&this[re]&&(this[re]=!1,this.parentNode&&this.parentNode.removeChild(this))}get[Ht](){const t=super[Ht]||I.html``;return t.content.append(S.html`
        <style>
          :host([closed]) {
            display: none;
          }
        </style>
      `),t}}}(ce(H)));class pe extends de{get backdrop(){return this[ht]&&this[ht].backdrop}get backdropPartType(){return this[Pt].backdropPartType}set backdropPartType(t){this[St]({backdropPartType:t})}get[G](){return Object.assign(super[G],{backdropPartType:Jt,framePartType:ne})}get frame(){return this[ht].frame}get framePartType(){return this[Pt].framePartType}set framePartType(t){this[St]({framePartType:t})}[wt](t){super[wt](t),he(this[It],this[Pt],t)}[qt](t){super[qt](t),t.opened&&this[Pt].content&&this[Pt].content.forEach((t=>{t[$]&&t[$]()}))}get[Ht](){const t=super[Ht];return t.content.append(S.html`
      <style>
        :host {
          display: inline-grid;
          /* Constrain content if overlay's height is constrained. */
          grid-template: minmax(0, 1fr) / minmax(0, 1fr);
          max-height: 100vh;
          max-width: 100vw;
          outline: none;
          position: fixed;
          -webkit-tap-highlight-color: transparent;
        }

        [part~="frame"] {
          box-sizing: border-box;
          display: grid;
          overscroll-behavior: contain;
          pointer-events: initial;
          position: relative;
        }

        #frameContent {
          display: grid;
          grid-template: minmax(0, 1fr) / minmax(0, 1fr);
          overflow: hidden;
        }
      </style>
      <div id="backdrop" part="backdrop" tabindex="-1"></div>
      <div id="frame" part="frame" role="none">
        <div id="frameContent">
          <slot></slot>
        </div>
      </div>
    `),he(t.content,this[Pt]),t}}function he(t,e,o){if(!o||o.backdropPartType){const{backdropPartType:o}=e,i=t.getElementById("backdrop");i&&T(i,o)}if(!o||o.framePartType){const{framePartType:o}=e,i=t.getElementById("frame");i&&T(i,o)}}const fe=function(t){return class extends t{get[G](){return Object.assign(super[G]||{},{role:"dialog"})}[vt](t){let e=!1;if("Escape"===t.key)this.close({canceled:"Escape"}),e=!0;return e||super[vt]&&super[vt](t)||!1}[wt](t){if(super[wt]&&super[wt](t),t.opened)if(this[Pt].opened&&document.documentElement){const t=document.documentElement.clientWidth,e=window.innerWidth-t;this[Kt]=document.body.style.overflow,this[Qt]=e>0?document.documentElement.style.marginRight:null,document.body.style.overflow="hidden",e>0&&(document.documentElement.style.marginRight=`${e}px`)}else null!=this[Kt]&&(document.body.style.overflow=this[Kt],this[Kt]=null),null!=this[Qt]&&(document.documentElement.style.marginRight=this[Qt],this[Qt]=null);if(t.role){const{role:t}=this[Pt];this.setAttribute("role",t)}}get role(){return super.role}set role(t){super.role=t,this[_t]||this[St]({role:t})}}}(Zt(Xt(pe)));class me extends fe{get[G](){return Object.assign(super[G],{backdropPartType:te,tabIndex:-1})}get[Ht](){const t=super[Ht],e=t.content.querySelector("#frame");return this[Zt.wrap](e),t.content.append(S.html`
        <style>
          :host {
            height: 100%;
            left: 0;
            pointer-events: initial;
            top: 0;
            width: 100%;
          }
        </style>
      `),t}}class ve extends me{get choiceButtons(){return this[Pt].choiceButtons}get choiceButtonPartType(){return this[Pt].choiceButtonPartType}set choiceButtonPartType(t){this[St]({choiceButtonPartType:t})}get choices(){return this[Pt].choices}set choices(t){this[St]({choices:t})}get[G](){return Object.assign(super[G],{choiceButtonPartType:"button",choiceButtons:[],choices:["OK"]})}[vt](t){let e=!1;const o=1===t.key.length&&t.key.toLowerCase();if(o){const t=this.choices.find((t=>t[0].toLowerCase()===o));t&&(this.close({choice:t}),e=!0)}return e||super[vt]&&super[vt](t)||!1}[wt](t){super[wt](t),this[Y]&&this[ht].choiceButtonContainer.addEventListener("click",(async t=>{const e=t.target;if(e instanceof HTMLElement){const t=e.textContent;this[xt]=!0,await this.close({choice:t}),this[xt]=!1}})),t.choiceButtons&&function(t,e){const o=[...e],i=t.childNodes.length,n=o.length,r=Math.max(i,n);for(let e=0;e<r;e++){const r=t.childNodes[e],s=o[e];e>=i?t.append(s):e>=n?t.removeChild(t.childNodes[n]):r!==s&&(o.indexOf(r,e)>=e?t.insertBefore(s,r):t.replaceChild(s,r))}}(this[ht].choiceButtonContainer,this[Pt].choiceButtons)}[Tt](t,e){const o=super[Tt](t,e);if(e.choiceButtonPartType||e.choices){const e=t.choices.map((e=>{const o=k(t.choiceButtonPartType);return"part"in o&&(o.part="choice-button"),o.textContent=e,o}));Object.freeze(e),Object.assign(o,{choiceButtons:e})}return o}get[Ht](){const t=super[Ht],e=t.content.querySelector("slot:not([name])");return e&&e.replaceWith(S.html`
        <div id="alertDialogContent">
          <slot></slot>
          <div id="choiceButtonContainer" part="choice-button-container"></div>
        </div>
      `),t}}const ge=document.createElement("div");ge.attachShadow({mode:"open",delegatesFocus:!0});const be=ge.shadowRoot.delegatesFocus;function ye(t){if("selectedText"in t)return t.selectedText;if("value"in t&&"options"in t){const e=t.value,o=t.options.find((t=>t.value===e));return o?o.innerText:""}return"value"in t?t.value:t.innerText}function xe(t,e){const{ariaLabel:o,ariaLabelledby:i}=e,n=t.isConnected?t.getRootNode():null;let r=null;if(i&&n){r=i.split(" ").map((o=>{const i=n.getElementById(o);return i?i===t&&null!==e.value?e.selectedText:ye(i):""})).join(" ")}else if(o)r=o;else if(n){const e=t.id;if(e){const t=n.querySelector(`[for="${e}"]`);t instanceof HTMLElement&&(r=ye(t))}if(null===r){const e=t.closest("label");e&&(r=ye(e))}}return r&&(r=r.trim()),r}let we=!1;const Ee=Symbol("focusVisibleChangedListener");function Oe(t){return class extends t{constructor(){super(),this.addEventListener("focusout",(t=>{Promise.resolve().then((()=>{const e=t.relatedTarget||document.activeElement,o=this===e,i=y(this,e);!o&&!i&&(this[St]({focusVisible:!1}),document.removeEventListener("focusvisiblechange",this[Ee]),this[Ee]=null)}))})),this.addEventListener("focusin",(()=>{Promise.resolve().then((()=>{this[Pt].focusVisible!==we&&this[St]({focusVisible:we}),this[Ee]||(this[Ee]=()=>{this[St]({focusVisible:we})},document.addEventListener("focusvisiblechange",this[Ee]))}))}))}get[G](){return Object.assign(super[G]||{},{focusVisible:!1})}[wt](t){if(super[wt]&&super[wt](t),t.focusVisible){const{focusVisible:t}=this[Pt];this.toggleAttribute("focus-visible",t)}}get[Ht](){const t=super[Ht]||I.html``;return t.content.append(S.html`
        <style>
          :host {
            outline: none;
          }

          :host([focus-visible]:focus-within) {
            outline-color: Highlight; /* Firefox */
            outline-color: -webkit-focus-ring-color; /* All other browsers */
            outline-style: auto;
          }
        </style>
      `),t}}}function qe(t){if(we!==t){we=t;const e=new CustomEvent("focus-visible-changed",{detail:{focusVisible:we}});document.dispatchEvent(e);const o=new CustomEvent("focusvisiblechange",{detail:{focusVisible:we}});document.dispatchEvent(o)}}function _e(t){return class extends t{get[Z](){return!0}focus(t){const e=this[J];e&&e.focus(t)}get[J](){return x(this[It])}}}window.addEventListener("keydown",(()=>{qe(!0)}),{capture:!0}),window.addEventListener("mousedown",(()=>{qe(!1)}),{capture:!0});const Ae=Symbol("extends"),Se=Symbol("delegatedPropertySetters"),Ie={a:!0,area:!0,button:!0,details:!0,iframe:!0,input:!0,select:!0,textarea:!0},Ne={address:["scroll"],blockquote:["scroll"],caption:["scroll"],center:["scroll"],dd:["scroll"],dir:["scroll"],div:["scroll"],dl:["scroll"],dt:["scroll"],fieldset:["scroll"],form:["reset","scroll"],frame:["load"],h1:["scroll"],h2:["scroll"],h3:["scroll"],h4:["scroll"],h5:["scroll"],h6:["scroll"],iframe:["load"],img:["abort","error","load"],input:["abort","change","error","select","load"],li:["scroll"],link:["load"],menu:["scroll"],object:["error","scroll"],ol:["scroll"],p:["scroll"],script:["error","load"],select:["change","scroll"],tbody:["scroll"],tfoot:["scroll"],thead:["scroll"],textarea:["change","select","scroll"]},ke=["click","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","wheel"],Pe={abort:!0,change:!0,reset:!0},Te=["address","article","aside","blockquote","canvas","dd","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tfoot","ul","video"],Ce=["accept-charset","autoplay","buffered","challenge","codebase","colspan","contenteditable","controls","crossorigin","datetime","dirname","for","formaction","http-equiv","icon","ismap","itemprop","keytype","language","loop","manifest","maxlength","minlength","muted","novalidate","preload","radiogroup","readonly","referrerpolicy","rowspan","scoped","usemap"],Re=_e(H);class De extends Re{constructor(){super();const t=this;!this[yt]&&t.attachInternals&&(this[yt]=t.attachInternals())}attributeChangedCallback(t,e,o){if(Ce.indexOf(t)>=0){const e=Object.assign({},this[Pt].innerAttributes,{[t]:o});this[St]({innerAttributes:e})}else super.attributeChangedCallback(t,e,o)}blur(){this.inner.blur()}get[G](){return Object.assign(super[G],{innerAttributes:{}})}get[W](){return Ie[this.extends]?0:-1}get extends(){return this.constructor[Ae]}get inner(){const t=this[ht]&&this[ht].inner;return t||console.warn("Attempted to get an inner standard element before it was instantiated."),t}static get observedAttributes(){return[...super.observedAttributes,...Ce]}[wt](t){super[wt](t);const e=this.inner;if(this[Y]){(Ne[this.extends]||[]).forEach((t=>{e.addEventListener(t,(()=>{const e=new Event(t,{bubbles:Pe[t]||!1});this.dispatchEvent(e)}))})),"disabled"in e&&ke.forEach((t=>{this.addEventListener(t,(t=>{e.disabled&&t.stopImmediatePropagation()}))}))}if(t.tabIndex&&(e.tabIndex=this[Pt].tabIndex),t.innerAttributes){const{innerAttributes:t}=this[Pt];for(const o in t)Le(e,o,t[o])}this.constructor[Se].forEach((o=>{if(t[o]){const t=this[Pt][o];("selectionEnd"===o||"selectionStart"===o)&&null===t||(e[o]=t)}}))}[qt](t){if(super[qt](t),t.disabled){const{disabled:t}=this[Pt];void 0!==t&&q(this,"disabled",t)}}get[Ht](){const t=Te.includes(this.extends)?"block":"inline-block",e=this.extends;return I.html`
      <style>
        :host {
          display: ${t}
        }
        
        [part~="inner"] {
          box-sizing: border-box;
          height: 100%;
          width: 100%;
        }
      </style>
      <${e} id="inner" part="inner ${e}">
        <slot></slot>
      </${e}>
    `}static wrap(t){class e extends De{}e[Ae]=t;const o=document.createElement(t);return function(t,e){const o=Object.getOwnPropertyNames(e);t[Se]=[],o.forEach((o=>{const i=Object.getOwnPropertyDescriptor(e,o);if(!i)return;const n=function(t,e){if("function"==typeof e.value){if("constructor"!==t)return function(t,e){const o=function(...e){this.inner[t](...e)};return{configurable:e.configurable,enumerable:e.enumerable,value:o,writable:e.writable}}(t,e)}else if("function"==typeof e.get||"function"==typeof e.set)return function(t,e){const o={configurable:e.configurable,enumerable:e.enumerable};e.get&&(o.get=function(){return function(t,e){return t[Pt][e]||t[It]&&t.inner[e]}(this,t)});e.set&&(o.set=function(e){!function(t,e,o){t[Pt][e]!==o&&t[St]({[e]:o})}(this,t,e)});e.writable&&(o.writable=e.writable);return o}(t,e);return null}(o,i);n&&(Object.defineProperty(t.prototype,o,n),n.set&&t[Se].push(o))}))}(e,Object.getPrototypeOf(o)),e}}function Le(t,e,o){_[e]?"string"==typeof o?t.setAttribute(e,""):null===o&&t.removeAttribute(e):null!=o?t.setAttribute(e,o.toString()):t.removeAttribute(e)}const je=function(t){return class extends t{get[G](){return Object.assign(super[G]||{},{composeFocus:!be})}[wt](t){super[wt]&&super[wt](t),this[Y]&&this.addEventListener("mousedown",(t=>{if(this[Pt].composeFocus&&0===t.button&&t.target instanceof Element){const e=function(t){for(const e of O(t)){const t=e[i]||e,o=t;if(t instanceof HTMLElement&&t.tabIndex>=0&&!o.disabled&&!(t instanceof HTMLSlotElement))return t}return null}(t.target);e&&(e.focus(),t.preventDefault())}}))}}}(function(t){return class extends t{get ariaLabel(){return this[Pt].ariaLabel}set ariaLabel(t){this[Pt].removingAriaAttribute||this[St]({ariaLabel:String(t)})}get ariaLabelledby(){return this[Pt].ariaLabelledby}set ariaLabelledby(t){this[Pt].removingAriaAttribute||this[St]({ariaLabelledby:String(t)})}get[G](){return Object.assign(super[G]||{},{ariaLabel:null,ariaLabelledby:null,inputLabel:null,removingAriaAttribute:!1})}[wt](t){if(super[wt]&&super[wt](t),this[Y]&&this.addEventListener("focus",(()=>{this[xt]=!0;const t=xe(this,this[Pt]);this[St]({inputLabel:t}),this[xt]=!1})),t.inputLabel){const{inputLabel:t}=this[Pt];t?this[ft].setAttribute("aria-label",t):this[ft].removeAttribute("aria-label")}}[qt](t){if(super[qt]&&super[qt](t),this[Y]){(window.requestIdleCallback||setTimeout)((()=>{const t=xe(this,this[Pt]);this[St]({inputLabel:t})}))}const{ariaLabel:e,ariaLabelledby:o}=this[Pt];t.ariaLabel&&!this[Pt].removingAriaAttribute&&this.getAttribute("aria-label")&&(this.setAttribute("delegated-label",e),this[St]({removingAriaAttribute:!0}),this.removeAttribute("aria-label")),t.ariaLabelledby&&!this[Pt].removingAriaAttribute&&this.getAttribute("aria-labelledby")&&(this.setAttribute("delegated-labelledby",o),this[St]({removingAriaAttribute:!0}),this.removeAttribute("aria-labelledby")),t.removingAriaAttribute&&this[Pt].removingAriaAttribute&&this[St]({removingAriaAttribute:!1})}[Tt](t,e){const o=super[Tt]?super[Tt](t,e):{};if(e.ariaLabel&&t.ariaLabel||e.selectedText&&t.ariaLabelledby&&this.matches(":focus-within")){const e=xe(this,t);Object.assign(o,{inputLabel:e})}return o}}}(Oe(De.wrap("button"))));class Me extends je{get[G](){return Object.assign(super[G],{role:"button"})}get[ft](){return this[ht].inner}[Vt](){const t=new MouseEvent("click",{bubbles:!0,cancelable:!0});this.dispatchEvent(t)}get[Ht](){const t=super[Ht];return t.content.append(S.html`
        <style>
          :host {
            display: inline-flex;
            outline: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
          }

          [part~="button"] {
            align-items: center;
            background: none;
            border: none;
            color: inherit;
            flex: 1;
            font: inherit;
            outline: none;
            padding: 0;
          }
        </style>
      `),t}}class Fe extends(function(t){return class extends t{get[Ht](){const t=super[Ht];return t.content.append(S.html`
        <style>
          :host([disabled]) ::slotted(*) {
            opacity: 0.5;
          }

          [part~="button"] {
            display: inline-flex;
            justify-content: center;
            margin: 0;
            position: relative;
          }
        </style>
      `),t}}}(Me)){}class Ue extends Fe{get[Ht](){const t=super[Ht];return t.content.append(S.html`
        <style>
          [part~="button"] {
            background: #eee;
            border: 1px solid #ccc;
            padding: 0.25em 0.5em;
          }
        </style>
      `),t}}class Be extends te{get[Ht](){const t=super[Ht];return t.content.append(S.html`
        <style>
          :host {
            background: rgba(0, 0, 0, 0.2);
          }
        </style>
      `),t}}class ze extends ne{get[Ht](){const t=super[Ht];return t.content.append(S.html`
        <style>
          :host {
            background: white;
            border: 1px solid rgba(0, 0, 0, 0.2);
            box-shadow: 0 0px 10px rgba(0, 0, 0, 0.5);
            box-sizing: border-box;
          }
        </style>
      `),t}}function Ve(t){return class extends t{get[G](){return Object.assign(super[G]||{},{backdropPartType:Be,framePartType:ze})}}}class He extends(Ve(ve)){get[G](){return Object.assign(super[G],{choiceButtonPartType:Ue})}get[Ht](){const t=super[Ht];return t.content.append(S.html`
        <style>
          [part~="frame"] {
            padding: 1em;
          }

          [part~="choice-button-container"] {
            margin-top: 1em;
          }

          [part~="choice-button"]:not(:first-child) {
            margin-left: 0.5em;
          }
        </style>
      `),t}}customElements.define("elix-alert-dialog",class extends He{});class $e extends(Ve(me)){}customElements.define("elix-dialog",class extends $e{});const Ke={a:"link",article:"region",button:"button",h1:"sectionhead",h2:"sectionhead",h3:"sectionhead",h4:"sectionhead",h5:"sectionhead",h6:"sectionhead",hr:"sectionhead",iframe:"region",link:"link",menu:"menu",ol:"list",option:"option",output:"liveregion",progress:"progressbar",select:"select",table:"table",td:"td",textarea:"textbox",th:"th",ul:"list"};function Qe(t){const e=t[It],o=e&&e.querySelector("slot:not([name])");return o&&o.parentNode instanceof Element&&function(t){for(const e of O(t))if(e instanceof HTMLElement&&Ge(e))return e;return null}(o.parentNode)||t}function Ge(t){const e=getComputedStyle(t),o=e.overflowX,i=e.overflowY;return"scroll"===o||"auto"===o||"scroll"===i||"auto"===i}function We(t,e,o){const i=t[K](t[Pt],{direction:o,index:e});if(i<0)return!1;const n=t[Pt].currentIndex!==i;return n&&t[St]({currentIndex:i}),n}const Ze=["applet","basefont","embed","font","frame","frameset","isindex","keygen","link","multicol","nextid","noscript","object","param","script","style","template","noembed"];function Xe(t,e,o){const i=t[Pt].items,n=o?0:i.length-1,r=o?i.length:0,s=o?1:-1;let a,l,u=null;const{availableItemFlags:c}=t[Pt];for(a=n;a!==r;a+=s){if((!c||c[a])&&(l=i[a].getBoundingClientRect(),l.top<=e&&e<=l.bottom)){u=i[a];break}}if(!u||!l)return null;const d=getComputedStyle(u),p=d.paddingTop?parseFloat(d.paddingTop):0,h=d.paddingBottom?parseFloat(d.paddingBottom):0,f=l.top+p,m=f+u.clientHeight-p-h;return o&&f<=e||!o&&m>=e?a:a-s}function Ye(t,e){const o=t[Pt].items,i=t[Pt].currentIndex,n=t[At].getBoundingClientRect(),r=Xe(t,e?n.bottom:n.top,e);let s;if(r&&i===r){const n=o[i].getBoundingClientRect(),r=t[At].clientHeight;s=Xe(t,e?n.bottom+r:n.top-r,e)}else s=r;if(!s){const i=e?o.length-1:0;s=t[K]?t[K](t[Pt],{direction:e?-1:1,index:i}):i}const a=s!==i;if(a){const e=t[xt];t[xt]=!0,t[St]({currentIndex:s}),t[xt]=e}return a}const Je=Symbol("typedPrefix"),to=Symbol("prefixTimeout");function eo(t){const e=t;e[to]&&(clearTimeout(e[to]),e[to]=!1)}function oo(t){t[Je]="",eo(t)}function io(t){eo(t),t[to]=setTimeout((()=>{oo(t)}),1e3)}function no(t){return class extends t{connectedCallback(){const t="rtl"===getComputedStyle(this).direction;this[St]({rightToLeft:t}),super.connectedCallback()}}}function ro(t){return class extends t{get[G](){return Object.assign(super[G]||{},{items:null})}[Tt](t,e){const o=super[Tt]?super[Tt](t,e):{};if(e.content){const e=t.content,i=e?Array.prototype.filter.call(e,(t=>{return(e=t)instanceof Element&&(!e.localName||Ze.indexOf(e.localName)<0);var e})):null;i&&Object.freeze(i),Object.assign(o,{items:i})}return o}}}const so=function(t){return class extends t{get[G](){const t=super[G];return Object.assign(t,{itemRole:t.itemRole||"menuitem",role:t.role||"menu"})}get itemRole(){return this[Pt].itemRole}set itemRole(t){this[St]({itemRole:t})}[wt](t){super[wt]&&super[wt](t);const e=this[Pt].items;if((t.items||t.itemRole)&&e){const{itemRole:t}=this[Pt];e.forEach((e=>{t===Ke[e.localName]?e.removeAttribute("role"):e.setAttribute("role",t)}))}if(t.role){const{role:t}=this[Pt];this.setAttribute("role",t)}}get role(){return super.role}set role(t){super.role=t,this[_t]||this[St]({role:t})}}}(function(t){return class extends t{attributeChangedCallback(t,e,o){if("current-index"===t)this.currentIndex=Number(o);else if("current-item-required"===t){const e=b(t,o);this.currentItemRequired!==e&&(this.currentItemRequired=e)}else if("cursor-operations-wrap"===t){const e=b(t,o);this.cursorOperationsWrap!==e&&(this.cursorOperationsWrap=e)}else super.attributeChangedCallback(t,e,o)}get currentIndex(){const{items:t,currentIndex:e}=this[Pt];return t&&t.length>0?e:-1}set currentIndex(t){isNaN(t)||this[St]({currentIndex:t})}get currentItem(){const{items:t,currentIndex:e}=this[Pt];return t&&t[e]}set currentItem(t){const{items:e}=this[Pt];if(!e)return;const o=e.indexOf(t);this[St]({currentIndex:o})}get currentItemRequired(){return this[Pt].currentItemRequired}set currentItemRequired(t){this[St]({currentItemRequired:t})}get cursorOperationsWrap(){return this[Pt].cursorOperationsWrap}set cursorOperationsWrap(t){this[St]({cursorOperationsWrap:t})}goFirst(){return super.goFirst&&super.goFirst(),this[it]()}goLast(){return super.goLast&&super.goLast(),this[nt]()}goNext(){return super.goNext&&super.goNext(),this[st]()}goPrevious(){return super.goPrevious&&super.goPrevious(),this[at]()}[qt](t){if(super[qt]&&super[qt](t),t.currentIndex&&this[xt]){const{currentIndex:t}=this[Pt],e=new CustomEvent("current-index-changed",{bubbles:!0,detail:{currentIndex:t}});this.dispatchEvent(e);const o=new CustomEvent("currentindexchange",{bubbles:!0,detail:{currentIndex:t}});this.dispatchEvent(o)}}}}(function(t){return class extends t{[qt](t){super[qt]&&super[qt](t),t.currentItem&&this.scrollCurrentItemIntoView()}scrollCurrentItemIntoView(){super.scrollCurrentItemIntoView&&super.scrollCurrentItemIntoView();const{currentItem:t,items:e}=this[Pt];if(!t||!e)return;const o=this[At].getBoundingClientRect(),i=t.getBoundingClientRect(),n=i.bottom-o.bottom,r=i.left-o.left,s=i.right-o.right,a=i.top-o.top,l=this[Pt].orientation||"both";"horizontal"!==l&&"both"!==l||(s>0?this[At].scrollLeft+=s:r<0&&(this[At].scrollLeft+=Math.ceil(r))),"vertical"!==l&&"both"!==l||(n>0?this[At].scrollTop+=n:a<0&&(this[At].scrollTop+=Math.ceil(a)))}get[At](){return super[At]||Qe(this)}}}(_e(function(t){return class extends t{get[G](){return Object.assign(super[G]||{},{canGoDown:null,canGoLeft:null,canGoRight:null,canGoUp:null})}[et](){return super[et]&&super[et](),this[st]()}[ot](){return super[ot]&&super[ot](),this[nt]()}[rt](){return super[rt]&&super[rt](),this[Pt]&&this[Pt].rightToLeft?this[st]():this[at]()}[lt](){return super[lt]&&super[lt](),this[Pt]&&this[Pt].rightToLeft?this[at]():this[st]()}[ut](){return super[ut]&&super[ut](),this[it]()}[dt](){return super[dt]&&super[dt](),this[at]()}[Tt](t,e){const o=super[Tt]?super[Tt](t,e):{};if(e.canGoNext||e.canGoPrevious||e.languageDirection||e.orientation||e.rightToLeft){const{canGoNext:e,canGoPrevious:i,orientation:n,rightToLeft:r}=t,s="horizontal"===n||"both"===n,a="vertical"===n||"both"===n,l=a&&e,u=!!s&&(r?e:i),c=!!s&&(r?i:e),d=a&&i;Object.assign(o,{canGoDown:l,canGoLeft:u,canGoRight:c,canGoUp:d})}return o}}}(function(t){return class extends t{get items(){return this[Pt]?this[Pt].items:null}[qt](t){if(super[qt]&&super[qt](t),!this[Y]&&t.items&&this[xt]){const t=new CustomEvent("items-changed",{bubbles:!0});this.dispatchEvent(t);const e=new CustomEvent("itemschange",{bubbles:!0});this.dispatchEvent(e)}}}}(function(t){return class extends t{[K](t,e={}){const o=void 0!==e.direction?e.direction:1,i=void 0!==e.index?e.index:t.currentIndex,n=void 0!==e.wrap?e.wrap:t.cursorOperationsWrap,{items:r}=t,s=r?r.length:0;if(0===s)return-1;if(n){let e=(i%s+s)%s;const n=((e-o)%s+s)%s;for(;e!==n;){if(!t.availableItemFlags||t.availableItemFlags[e])return e;e=((e+o)%s+s)%s}}else for(let e=i;e>=0&&e<s;e+=o){if(!t.availableItemFlags||t.availableItemFlags[e])return e}return-1}get[G](){return Object.assign(super[G]||{},{currentIndex:-1,desiredCurrentIndex:null,currentItem:null,currentItemRequired:!1,cursorOperationsWrap:!1})}[it](){return super[it]&&super[it](),We(this,0,1)}[nt](){return super[nt]&&super[nt](),We(this,this[Pt].items.length-1,-1)}[st](){super[st]&&super[st]();const{currentIndex:t,items:e}=this[Pt];return We(this,t<0&&e?0:t+1,1)}[at](){super[at]&&super[at]();const{currentIndex:t,items:e}=this[Pt];return We(this,t<0&&e?e.length-1:t-1,-1)}[Tt](t,e){const o=super[Tt]?super[Tt](t,e):{};if(e.availableItemFlags||e.items||e.currentIndex||e.currentItemRequired){const{currentIndex:i,desiredCurrentIndex:n,currentItem:r,currentItemRequired:s,items:a}=t,l=a?a.length:0;let u,c=n;if(e.items&&!e.currentIndex&&r&&l>0&&a[i]!==r){const t=a.indexOf(r);t>=0&&(c=t)}else e.currentIndex&&(i<0&&null!==r||i>=0&&(0===l||a[i]!==r)||null===n)&&(c=i);s&&c<0&&(c=0),c<0?(c=-1,u=-1):0===l?u=-1:(u=Math.max(Math.min(l-1,c),0),u=this[K](t,{direction:1,index:u,wrap:!1}),u<0&&(u=this[K](t,{direction:-1,index:u-1,wrap:!1})));const d=a&&a[u]||null;Object.assign(o,{currentIndex:u,desiredCurrentIndex:c,currentItem:d})}return o}}}(function(t){return class extends t{get[G](){return Object.assign(super[G]||{},{texts:null})}[tt](t){return super[tt]?super[tt](t):(e=t).getAttribute("aria-label")||e.getAttribute("alt")||e.innerText||e.textContent||"";var e}[Tt](t,e){const o=super[Tt]?super[Tt](t,e):{};if(e.items){const{items:e}=t,i=function(t,e){return t?Array.from(t,(t=>e(t))):null}(e,this[tt]);i&&(Object.freeze(i),Object.assign(o,{texts:i}))}return o}}}(function(t){return class extends t{[et](){if(super[et])return super[et]()}[ot](){if(super[ot])return super[ot]()}[rt](){if(super[rt])return super[rt]()}[lt](){if(super[lt])return super[lt]()}[ut](){if(super[ut])return super[ut]()}[dt](){if(super[dt])return super[dt]()}[vt](t){let e=!1;if(t.target===this){const o=this[Pt].orientation||"both",i="horizontal"===o||"both"===o,n="vertical"===o||"both"===o;switch(t.key){case"ArrowDown":n&&(e=t.altKey?this[ot]():this[et]());break;case"ArrowLeft":!i||t.metaKey||t.altKey||(e=this[rt]());break;case"ArrowRight":!i||t.metaKey||t.altKey||(e=this[lt]());break;case"ArrowUp":n&&(e=t.altKey?this[ut]():this[dt]());break;case"End":e=this[ot]();break;case"Home":e=this[ut]()}}return e||super[vt]&&super[vt](t)||!1}}}(Xt(function(t){return class extends t{[vt](t){let e=!1;if("horizontal"!==this.orientation)switch(t.key){case"PageDown":e=this.pageDown();break;case"PageUp":e=this.pageUp()}return e||super[vt]&&super[vt](t)}get orientation(){return super.orientation||this[Pt]&&this[Pt].orientation||"both"}pageDown(){return super.pageDown&&super.pageDown(),Ye(this,!0)}pageUp(){return super.pageUp&&super.pageUp(),Ye(this,!1)}get[At](){return super[At]||Qe(this)}}}(function(t){return class extends t{constructor(){super(),oo(this)}[ct](t){if(super[ct]&&super[ct](t),null==t||0===t.length)return!1;const e=t.toLowerCase(),o=this[Pt].texts.findIndex((o=>o.substr(0,t.length).toLowerCase()===e));if(o>=0){const t=this[Pt].currentIndex;return this[St]({currentIndex:o}),this[Pt].currentIndex!==t}return!1}[vt](t){let e;switch(t.key){case"Backspace":!function(t){const e=t,o=e[Je]?e[Je].length:0;o>0&&(e[Je]=e[Je].substr(0,o-1));t[ct](e[Je]),io(t)}(this),e=!0;break;case"Escape":oo(this);break;default:t.ctrlKey||t.metaKey||t.altKey||1!==t.key.length||function(t,e){const o=t,i=o[Je]||"";o[Je]=i+e,t[ct](o[Je]),io(t)}(this,t.key)}return e||super[vt]&&super[vt](t)}}}(no(function(t){return ro(ce(t))}(function(t){return class extends t{constructor(){super(),this.addEventListener("mousedown",(t=>{0===t.button&&(this[xt]=!0,this[Vt](t),this[xt]=!1)}))}[wt](t){super[wt]&&super[wt](t),this[Y]&&Object.assign(this.style,{touchAction:"manipulation",mozUserSelect:"none",msUserSelect:"none",webkitUserSelect:"none",userSelect:"none"})}[Vt](t){const e=t.composedPath?t.composedPath()[0]:t.target,{items:o,currentItemRequired:i}=this[Pt];if(o&&e instanceof Node){const n=w(o,e),r=n>=0?o[n]:null;(r&&!r.disabled||!r&&!i)&&(this[St]({currentIndex:n}),t.stopPropagation())}}}}(H)))))))))))))));class ao extends so{get[G](){return Object.assign(super[G],{availableItemFlags:null,highlightCurrentItem:!0,orientation:"vertical",currentItemFocused:!1})}async flashCurrentItem(){const t=this[Pt].focusVisible,e=matchMedia("(pointer: fine)").matches;if(t||e){const t=75;this[St]({highlightCurrentItem:!1}),await new Promise((e=>setTimeout(e,t))),this[St]({highlightCurrentItem:!0}),await new Promise((e=>setTimeout(e,t)))}}[wt](t){super[wt](t),this[Y]&&(this.addEventListener("disabledchange",(t=>{this[xt]=!0;const e=t.target,{items:o}=this[Pt],i=null===o?-1:o.indexOf(e);if(i>=0){const t=this[Pt].availableItemFlags.slice();t[i]=!e.disabled,this[St]({availableItemFlags:t})}this[xt]=!1})),"PointerEvent"in window?this.addEventListener("pointerdown",(t=>this[Vt](t))):this.addEventListener("touchstart",(t=>this[Vt](t))),this.removeAttribute("tabindex"));const{currentIndex:e,items:o}=this[Pt];if((t.items||t.currentIndex||t.highlightCurrentItem)&&o){const{highlightCurrentItem:t}=this[Pt];o.forEach(((o,i)=>{o.toggleAttribute("current",t&&i===e)}))}(t.items||t.currentIndex||t.currentItemFocused||t.focusVisible)&&o&&o.forEach(((t,o)=>{const i=o===e,n=e<0&&0===o;this[Pt].currentItemFocused?i||n||t.removeAttribute("tabindex"):(i||n)&&(t.tabIndex=0)}))}[qt](t){if(super[qt](t),!this[Y]&&t.currentIndex&&!this[Pt].currentItemFocused){const{currentItem:t}=this[Pt];(t instanceof HTMLElement?t:this).focus(),this[St]({currentItemFocused:!0})}}get[At](){return this[ht].content}[Tt](t,e){const o=super[Tt](t,e);if(e.currentIndex&&Object.assign(o,{currentItemFocused:!1}),e.items){const{items:e}=t,i=null===e?null:e.map((t=>!t.disabled));Object.assign(o,{availableItemFlags:i})}return o}get[Ht](){return I.html`
      <style>
        :host {
          box-sizing: border-box;
          cursor: default;
          display: inline-flex;
          -webkit-tap-highlight-color: transparent;
          touch-action: manipulation;
        }

        #content {
          display: flex;
          flex: 1;
          flex-direction: column;
          max-height: 100%;
          overflow-x: hidden;
          overflow-y: auto;
          -webkit-overflow-scrolling: touch; /* for momentum scrolling */
        }
        
        ::slotted(*) {
          flex-shrink: 0;
          outline: none;
          touch-action: manipulation;
        }

        ::slotted(option) {
          font: inherit;
          min-height: inherit;
        }
      </style>
      <div id="content" role="none">
        <slot></slot>
      </div>
    `}}const lo=Symbol("documentMouseupListener");async function uo(t){const e=this,o=e[It].elementsFromPoint(t.clientX,t.clientY);if(e.opened){const t=o.indexOf(e[ht].source)>=0,i=e[ht].popup,n=o.indexOf(i)>=0,r=i.frame&&o.indexOf(i.frame)>=0;t?e[Pt].dragSelect&&(e[xt]=!0,e[St]({dragSelect:!1}),e[xt]=!1):n||r||(e[xt]=!0,await e.close(),e[xt]=!1)}}function co(t){t[Pt].opened&&t.isConnected?t[lo]||(t[lo]=uo.bind(t),document.addEventListener("mouseup",t[lo])):t[lo]&&(document.removeEventListener("mouseup",t[lo]),t[lo]=null)}function po(t){return class extends t{get[G](){return Object.assign(super[G]||{},{disabled:!1})}get disabled(){return this[Pt].disabled}set disabled(t){this[St]({disabled:t})}[qt](t){if(super[qt]&&super[qt](t),t.disabled&&(this.toggleAttribute("disabled",this.disabled),this[xt])){const t=new CustomEvent("disabled-changed",{bubbles:!0});this.dispatchEvent(t);const e=new CustomEvent("disabledchange",{bubbles:!0});this.dispatchEvent(e)}}}}function ho(t,e,o,i){const n=fo(t,o,i);let r=0,s=0;const a="above"===o||"below"===o;switch(o){case"above":r=n.y-e.top;break;case"below":r=e.bottom-n.y;break;case"left":s=n.x-e.left;break;case"right":s=e.right-n.x}switch(i){case"bottom":r=n.y-e.top;break;case"center":a?s=e.width:r=e.height;break;case"stretch":a?s=t.width:r=t.height;break;case"left":s=e.right-n.x;break;case"right":s=n.x-e.left;break;case"top":r=e.bottom-n.y}return r=Math.max(0,r),s=Math.max(0,s),{height:r,width:s}}function fo(t,e,o){let i=0,n=0;const r="above"===e||"below"===e;switch(e){case"above":n=t.top;break;case"below":n=t.bottom;break;case"left":case"right":i=t[e]}switch(o){case"bottom":case"top":n=t[o];break;case"left":case"right":i=t[o];break;case"center":r?i=t.left+t.width/2:n=t.top+t.height/2;break;case"stretch":r?i=t.left:n=t.top}return{x:i,y:n}}function mo(t,e,o,i){const n=function(t){const{align:e,direction:o,rightToLeft:i}=t,n="below",r={above:"above",below:"below",column:"below","column-reverse":"above",left:"left",right:"right",row:i?"left":"right","row-reverse":i?"right":"left"}[o]||n,s={above:"horizontal",below:"horizontal",left:"vertical",right:"vertical"}[r],a={horizontal:"left",vertical:"top"}[s];return{align:{horizontal:{center:"center",end:i?"left":"right",left:"left",right:"right",start:i?"right":"left",stretch:"stretch"},vertical:{bottom:"bottom",center:"center",end:"bottom",start:"top",stretch:"stretch",top:"top"}}[s][e]||a,direction:r,rightToLeft:i}}(i),r=function(t,e){const o={above:"below",below:"above",left:"right",right:"left"},i={top:"bottom",bottom:"top",left:"right",right:"left"},n=[{align:e,direction:t}];"center"===e||"stretch"===e?n.push({align:e,direction:o[t]}):(n.push({align:i[e],direction:t}),n.push({align:e,direction:o[t]}),n.push({align:i[e],direction:o[t]}));return n}(n.direction,n.align);r.sort(((i,n)=>function(t,e,o,i,n){const r=ho(o,n,t.direction,t.align),s=ho(o,n,e.direction,e.align),a=i.width<=r.width,l=i.height<=r.height,u=a||l,c=a&&l,d=i.width<=s.width,p=i.height<=s.height,h=d||p,f=d&&p,m=r.width*r.height,v=s.width*s.height;return c&&f?0:c?-1:f?1:u&&!h?-1:h&&!u?1:u&&m>v?-1:h&&v>m?1:m>v?-1:v>m?1:0}(i,n,t,e,o)));const s=r[0];return s.rect=function(t,e,o,i,n){const r=fo(t,i,n);let{x:s,y:a,bottom:l,right:u}=o,c=0,d=0,p=e.height,h=e.width;const f="above"===i||"below"===i;switch(i){case"above":d=r.y-e.height,l=r.y;break;case"below":d=r.y,a=r.y;break;case"left":c=r.x-e.width,u=r.x;break;case"right":c=r.x,s=r.x}switch(n){case"bottom":d=r.y-e.height,l=r.y;break;case"left":c=r.x,s=r.x;break;case"center":f?c=r.x-e.width/2:d=r.y-e.height/2;break;case"right":c=r.x-e.width,u=r.x;break;case"stretch":f?(c=r.x,h=t.width):(d=r.y,p=t.height);break;case"top":d=r.y,a=r.y}return c=Math.max(c,s),d=Math.max(d,a),h=Math.min(h,u-c),p=Math.min(p,l-d),new DOMRect(c,d,h,p)}(t,e,o,s.direction,s.align),s}const vo=Symbol("implicitCloseListener");async function go(t){const e=this,o=t.relatedTarget||document.activeElement;o instanceof Element&&!y(e,o)&&(e[xt]=!0,await e.close({canceled:"window blur"}),e[xt]=!1)}async function bo(t){const e=this,o="resize"!==t.type||e[Pt].closeOnWindowResize;!E(e,t)&&o&&(e[xt]=!0,await e.close({canceled:`window ${t.type}`}),e[xt]=!1)}const yo=Xt(function(t){return class extends t{get closeOnWindowResize(){return this[Pt].closeOnWindowResize}set closeOnWindowResize(t){this[St]({closeOnWindowResize:t})}get[G](){return Object.assign(super[G]||{},{closeOnWindowResize:!0,role:"alert"})}[vt](t){let e=!1;if("Escape"===t.key)this.close({canceled:"Escape"}),e=!0;return e||super.keydown&&super.keydown(t)||!1}[wt](t){if(super[wt]&&super[wt](t),this[Y]&&this.addEventListener("blur",go.bind(this)),t.role){const{role:t}=this[Pt];this.setAttribute("role",t)}}[qt](t){if(super[qt]&&super[qt](t),t.opened)if(this.opened){("requestIdleCallback"in window?window.requestIdleCallback:setTimeout)((()=>{var t;this.opened&&((t=this)[vo]=bo.bind(t),window.addEventListener("blur",t[vo]),window.addEventListener("resize",t[vo]),window.addEventListener("scroll",t[vo]))}))}else(e=this)[vo]&&(window.removeEventListener("blur",e[vo]),window.removeEventListener("resize",e[vo]),window.removeEventListener("scroll",e[vo]),e[vo]=null);var e}get role(){return super.role}set role(t){super.role=t,this[_t]||this[St]({role:t})}}}(pe));class xo extends yo{[wt](t){super[wt](t),t.backdropPartType&&(this[ht].backdrop.addEventListener("mousedown",wo.bind(this)),"PointerEvent"in window||this[ht].backdrop.addEventListener("touchend",wo))}}async function wo(t){const e=this;e[xt]=!0,await e.close({canceled:"mousedown outside"}),e[xt]=!1,t.preventDefault(),t.stopPropagation()}const Eo=Symbol("resizeListener"),Oo=po(Oe(no(ie(H))));function qo(t){const{popupAlign:e,popupDirection:o,rightToLeft:i}=t[Pt],n=mo(t[ht].source.getBoundingClientRect(),t[ht].popup.getBoundingClientRect(),Ao(),{align:e,direction:o,rightToLeft:i});t[St]({popupLayout:n})}function _o(t,e,o){if(!o||o.popupPartType){const{popupPartType:o}=e,i=t.getElementById("popup");i&&T(i,o)}if(!o||o.sourcePartType){const{sourcePartType:o}=e,i=t.getElementById("source");i&&T(i,o)}}function Ao(){const t=window.visualViewport;return t?new DOMRect(t.offsetLeft,t.offsetTop,t.width,t.height):new DOMRect(0,0,window.innerWidth,window.innerHeight)}const So=_e(Xt(function(t){return class extends t{connectedCallback(){super.connectedCallback(),co(this)}get[G](){return Object.assign(super[G]||{},{dragSelect:!0})}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),co(this)}[qt](t){super[qt](t),t.opened&&co(this)}[Tt](t,e){const o=super[Tt](t,e);return e.opened&&t.opened&&Object.assign(o,{dragSelect:!0}),o}}}(class extends Oo{get[G](){return Object.assign(super[G],{ariaHasPopup:"true",popupAlign:"start",popupDirection:"column",popupLayout:null,popupPartType:xo,sourcePartType:"div"})}get[ft](){return this[ht].source}get frame(){return this[ht].popup.frame}get horizontalAlign(){return this[Pt].popupAlign}set horizontalAlign(t){console.warn('The "horizontalAlign" property has been renamed to "popupAlign"; the "horizontal-align" attribute is now "popup-align".'),this[St]({popupAlign:t})}get popupAlign(){return this[Pt].popupAlign}set popupAlign(t){this[St]({popupAlign:t})}get popupDirection(){return this[Pt].popupDirection}set popupDirection(t){this[St]({popupDirection:t})}get popupPosition(){return this[Pt].popupPosition}set popupPosition(t){console.warn('The "popupPosition" property has been renamed to "popupDirection"; the "popup-position" attribute is now "popup-direction".'),this[St]({popupPosition:t})}get popupPartType(){return this[Pt].popupPartType}set popupPartType(t){this[St]({popupPartType:t})}[wt](t){if(super[wt](t),_o(this[It],this[Pt],t),this[Y]||t.ariaHasPopup){const{ariaHasPopup:t}=this[Pt];null===t?this[ft].removeAttribute("aria-haspopup"):this[ft].setAttribute("aria-haspopup",this[Pt].ariaHasPopup)}if(t.popupPartType&&(this[ht].popup.addEventListener("open",(()=>{this.opened||(this[xt]=!0,this.open(),this[xt]=!1)})),this[ht].popup.addEventListener("close",(t=>{if(!this.closed){this[xt]=!0;const e=t.detail.closeResult;this.close(e),this[xt]=!1}}))),t.opened||t.popupLayout){const{opened:t,popupLayout:e}=this[Pt];if(t)if(e){const t=this[ht].popup,o=function(t){const{align:e,direction:o,rect:i}=t,n=Ao(),r={},s="above"===o||"below"===o;switch(o){case"above":r.bottom=n.bottom-i.bottom+"px";break;case"below":r.top=`${i.top}px`;break;case"left":r.right=n.right-i.right+"px";break;case"right":r.left=`${i.left}px`}switch(e){case"bottom":r.bottom=n.bottom-i.bottom+"px";break;case"center":case"stretch":s?(r.left=`${i.left}px`,r.right=n.right-i.right+"px"):(r.bottom=n.bottom-i.bottom+"px",r.top=`${i.top}px`);break;case"left":r.left=`${i.left}px`;break;case"right":r.right=n.right-i.right+"px";break;case"top":r.top=`${i.top}px`}return r}(e);Object.assign(t.style,o,{opacity:""})}else Object.assign(this[ht].popup.style,{bottom:"",left:"",opacity:0,right:"",top:""});else Object.assign(this[ht].popup.style,{bottom:"",left:"",opacity:"",right:"",top:""})}if(t.opened){const{opened:t}=this[Pt];this[ht].popup.opened=t}if(t.disabled&&"disabled"in this[ht].source){const{disabled:t}=this[Pt];this[ht].source.disabled=t}if(t.popupLayout){const{popupLayout:t}=this[Pt];if(t){const{align:e,direction:o}=t,i=this[ht].popup;"position"in i&&(i.position=o),"align"in i&&(i.align=e)}}}[qt](t){super[qt](t);const{opened:e}=this[Pt];var o;t.opened?e?(o=this,setTimeout((()=>{o[Pt].opened&&(qo(o),function(t){const e=t;e[Eo]=()=>{qo(t)},(window.visualViewport||window).addEventListener("resize",e[Eo])}(o))}))):function(t){const e=t;if(e[Eo]){(window.visualViewport||window).removeEventListener("resize",e[Eo]),e[Eo]=null}}(this):t.popupLayout&&this[Pt].opened&&!this[Pt].popupLayout&&qo(this)}get sourcePartType(){return this[Pt].sourcePartType}set sourcePartType(t){this[St]({sourcePartType:t})}[Tt](t,e){const o=super[Tt](t,e);return(e.opened&&!t.opened||t.opened&&(e.popupAlign||e.popupDirection||e.rightToLeft))&&Object.assign(o,{popupLayout:null}),o}get[Ht](){const t=super[Ht];return t.content.append(S.html`
      <style>
        :host {
          display: inline-block;
          position: relative;
        }

        [part~="source"] {
          height: 100%;
          -webkit-tap-highlight-color: transparent;
          touch-action: manipulation;
          width: 100%;
        }

        [part~="popup"] {
          max-height: 100%;
          max-width: 100%;
          outline: none;
          position: fixed;
        }
      </style>
      <div id="source" part="source">
        <slot name="source"></slot>
      </div>
      <div id="popup" part="popup" exportparts="backdrop, frame" role="none">
        <slot></slot>
      </div>
    `),_o(t.content,this[Pt]),t}})));async function Io(t){const e=this,o=t.relatedTarget||document.activeElement;o instanceof Element&&!y(e,o)&&(e[xt]=!0,await e.close({canceled:"blur"}),e[xt]=!1)}const No=Symbol("documentMousemoveListener");function ko(t){const e=this,{hasHoveredOverItemSinceOpened:o,opened:i}=e[Pt];if(i){const i=t.composedPath?t.composedPath()[0]:t.target,n=e.items;if(i&&i instanceof Node&&n){const t=w(n,i),r=n[t],s=r&&!r.disabled?t:-1;(o||s>=0)&&s!==e[Pt].currentIndex&&(e[xt]=!0,e[St]({currentIndex:s}),s>=0&&!o&&e[St]({hasHoveredOverItemSinceOpened:!0}),e[xt]=!1)}}}function Po(t){t[Pt].opened&&t.isConnected?t[No]||(t[No]=ko.bind(t),document.addEventListener("mousemove",t[No])):t[No]&&(document.removeEventListener("mousemove",t[No]),t[No]=null)}async function To(t){const e=t[xt],o=t[Pt].currentIndex>=0,i=t.items;if(i){const n=o?i[t[Pt].currentIndex]:void 0,r=t[Pt].popupList;o&&"flashCurrentItem"in r&&await r.flashCurrentItem();const s=t[xt];t[xt]=e,await t.close(n),t[xt]=s}}const Co=function(t){return class extends t{connectedCallback(){super.connectedCallback(),Po(this)}get[G](){return Object.assign(super[G]||{},{currentIndex:-1,hasHoveredOverItemSinceOpened:!1,popupList:null})}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),Po(this)}[vt](t){let e=!1;if("Enter"===t.key)this.opened&&(To(this),e=!0);return e||super[vt]&&super[vt](t)||!1}[wt](t){if(super[wt]&&super[wt](t),t.popupList){const{popupList:t}=this[Pt];t&&(t.addEventListener("mouseup",(async t=>{const e=this[Pt].currentIndex;this[Pt].dragSelect||e>=0?(t.stopPropagation(),this[xt]=!0,await To(this),this[xt]=!1):t.stopPropagation()})),t.addEventListener("currentindexchange",(t=>{this[xt]=!0;const e=t;this[St]({currentIndex:e.detail.currentIndex}),this[xt]=!1})))}if(t.currentIndex||t.popupList){const{currentIndex:t,popupList:e}=this[Pt];e&&"currentIndex"in e&&(e.currentIndex=t)}}[qt](t){if(super[qt]&&super[qt](t),t.opened){if(this[Pt].opened){const{popupList:t}=this[Pt];t.scrollCurrentItemIntoView&&setTimeout((()=>{t.scrollCurrentItemIntoView()}))}Po(this)}}[Tt](t,e){const o=super[Tt]?super[Tt](t,e):{};return e.opened&&t.opened&&Object.assign(o,{hasHoveredOverItemSinceOpened:!1}),o}}}(class extends So{get[G](){return Object.assign(super[G],{sourcePartType:"button"})}[vt](t){let e;switch(t.key){case" ":case"ArrowDown":case"ArrowUp":this.closed&&(this.open(),e=!0);break;case"Enter":this.opened||(this.open(),e=!0);break;case"Escape":this.opened&&(this.close({canceled:"Escape"}),e=!0)}if(e=super[vt]&&super[vt](t),!e&&this.opened&&!t.metaKey&&!t.altKey)switch(t.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":case"PageDown":case"PageUp":case" ":e=!0}return e}[wt](t){if(super[wt](t),this[Y]&&(this.addEventListener("blur",Io.bind(this)),this[ht].source.addEventListener("focus",(async t=>{const e=E(this[ht].popup,t),o=null!==this[Pt].popupHeight;!e&&this.opened&&o&&(this[xt]=!0,await this.close(),this[xt]=!1)}))),t.opened){const{opened:t}=this[Pt];this.toggleAttribute("opened",t)}if(t.sourcePartType){this[ht].source.addEventListener("mousedown",(t=>{if(this.disabled)return void t.preventDefault();const e=t;e.button&&0!==e.button||(setTimeout((()=>{this.opened||(this[xt]=!0,this.open(),this[xt]=!1)})),t.stopPropagation())}))}t.popupPartType&&this[ht].popup.removeAttribute("tabindex")}get[Ht](){const t=super[Ht];return t.content.append(S.html`
        <style>
          [part~="source"] {
            cursor: default;
            outline: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            -moz-user-select: none;
            -ms-user-select: none;
            -webkit-user-select: none;
            user-select: none;
          }

          :host([opened][focus-visible]) {
            outline: none;
          }
        </style>
      `),t}});class Ro extends Co{get[G](){return Object.assign(super[G],{menuPartType:ao})}get items(){const t=this[ht]&&this[ht].menu;return t?t.items:null}get menuPartType(){return this[Pt].menuPartType}set menuPartType(t){this[St]({menuPartType:t})}[wt](t){if(super[wt](t),Do(this[It],this[Pt],t),t.menuPartType&&(this[ht].menu.addEventListener("blur",(async t=>{const e=t.relatedTarget||document.activeElement;this.opened&&!y(this[ht].menu,e)&&(this[xt]=!0,await this.close(),this[xt]=!1)})),this[ht].menu.addEventListener("mousedown",(t=>{0===t.button&&this.opened&&(t.stopPropagation(),t.preventDefault())}))),t.opened){const{opened:t}=this[Pt];this[ht].source.setAttribute("aria-expanded",t.toString())}}[qt](t){super[qt](t),t.menuPartType&&this[St]({popupList:this[ht].menu})}[Tt](t,e){const o=super[Tt](t,e);return e.opened&&!t.opened&&Object.assign(o,{currentIndex:-1}),o}get[Ht](){const t=super[Ht],e=t.content.querySelector("slot:not([name])");return e&&e.replaceWith(S.html`
        <div id="menu" part="menu">
          <slot></slot>
        </div>
      `),Do(t.content,this[Pt]),t.content.append(S.html`
      <style>
        [part~="menu"] {
          max-height: 100%;
        }
      </style>
    `),t}}function Do(t,e,o){if(!o||o.menuPartType){const{menuPartType:o}=e,i=t.getElementById("menu");i&&T(i,o)}}const Lo=po(H);class jo extends Lo{get[G](){return Object.assign(super[G],{direction:"down"})}get direction(){return this[Pt].direction}set direction(t){this[St]({direction:t})}[wt](t){if(super[wt](t),t.direction){const{direction:t}=this[Pt];this[ht].downIcon.style.display="down"===t?"block":"none",this[ht].upIcon.style.display="up"===t?"block":"none"}}get[Ht](){return I.html`
      <style>
        :host {
          display: inline-block;
        }
      </style>
      <div id="downIcon" part="toggle-icon down-icon">
        <slot name="down-icon"></slot>
      </div>
      <div id="upIcon" part="toggle-icon up-icon">
        <slot name="up-icon"></slot>
      </div>
    `}}function Mo(t,e,o){if(!o||o.popupTogglePartType){const{popupTogglePartType:o}=e,i=t.getElementById("popupToggle");i&&T(i,o)}}class Fo extends ao{get[Ht](){const t=super[Ht];return t.content.append(S.html`
        <style>
          :host ::slotted(*) {
            padding: 0.25em 1em;
          }
          
          :host ::slotted([current]) {
            background: highlight;
            color: highlighttext;
          }

          @media (pointer: coarse) {
            ::slotted(*) {
              padding: 1em;
            }
          }
        </style>
      `),t}}class Uo extends jo{get[Ht](){const t=super[Ht],e=t.content.getElementById("downIcon"),o=S.html`
      <svg
        id="downIcon"
        part="toggle-icon down-icon"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 10 5"
      >
        <path d="M 0 0 l5 5 5 -5 z" />
      </svg>
    `.firstElementChild;e&&o&&P(e,o);const i=t.content.getElementById("upIcon"),n=S.html`
      <svg
        id="upIcon"
        part="toggle-icon up-icon"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 10 5"
      >
        <path d="M 0 5 l5 -5 5 5 z" />
      </svg>
    `.firstElementChild;return i&&n&&P(i,n),t.content.append(S.html`
        <style>
          :host {
            align-items: center;
            display: inline-flex;
            padding: 2px;
          }

          :host(:not([disabled])):hover {
            background: #eee;
          }

          [part~="toggle-icon"] {
            fill: currentColor;
            height: 10px;
            margin: 0.25em;
            width: 10px;
          }
        </style>
      `),t}}class Bo extends Jt{}class zo extends xo{get[G](){return Object.assign(super[G],{backdropPartType:Bo,framePartType:ze})}}class Vo extends(function(t){return class extends t{get[G](){return Object.assign(super[G]||{},{popupTogglePartType:jo})}get popupTogglePartType(){return this[Pt].popupTogglePartType}set popupTogglePartType(t){this[St]({popupTogglePartType:t})}[wt](t){if(super[wt](t),Mo(this[It],this[Pt],t),t.popupDirection||t.popupTogglePartType){const{popupDirection:t}=this[Pt],e="above"===t||"column-reverse"===t?"up":"down",o=this[ht].popupToggle;"direction"in o&&(o.direction=e)}if(t.disabled){const{disabled:t}=this[Pt];this[ht].popupToggle.disabled=t}}get[Ht](){const t=super[Ht],e=t.content.querySelector('[part~="source"]');return e&&e.append(S.html`
          <div
            id="popupToggle"
            part="popup-toggle"
            exportparts="toggle-icon, down-icon, up-icon"
            tabindex="-1"
          ></div>
      `),Mo(t.content,this[Pt]),t.content.append(S.html`
      <style>
        [part~="popup-toggle"] {
          outline: none;
        }

        [part~="source"] {
          align-items: center;
          display: flex;
        }
      </style>
    `),t}}}(Ro)){get[G](){return Object.assign(super[G],{menuPartType:Fo,popupPartType:zo,popupTogglePartType:Uo,sourcePartType:Ue})}get[Ht](){const t=super[Ht];return t.content.append(S.html`
        <style>
          [part~="menu"] {
            background: window;
            border: none;
            padding: 0.5em 0;
          }
        </style>
      `),t}}customElements.define("elix-menu-button",class extends Vo{});class Ho extends(function(t){return class extends t{constructor(){super();const t=this;!this[yt]&&t.attachInternals&&(this[yt]=t.attachInternals())}attributeChangedCallback(t,e,o){if("current"===t){const e=b(t,o);this.current!==e&&(this.current=e)}else super.attributeChangedCallback(t,e,o)}get[G](){return Object.assign(super[G]||{},{current:!1})}[wt](t){if(super[wt](t),t.current){const{current:t}=this[Pt];q(this,"current",t)}}[qt](t){if(super[qt]&&super[qt](t),t.current){const{current:t}=this[Pt],e=new CustomEvent("current-changed",{bubbles:!0,detail:{current:t}});this.dispatchEvent(e);const o=new CustomEvent("currentchange",{bubbles:!0,detail:{current:t}});this.dispatchEvent(o)}}get current(){return this[Pt].current}set current(t){this[St]({current:t})}}}(po(function(t){return class extends t{constructor(){super();const t=this;!this[yt]&&t.attachInternals&&(this[yt]=t.attachInternals())}get[G](){return Object.assign(super[G]||{},{selected:!1})}[wt](t){if(super[wt](t),t.selected){const{selected:t}=this[Pt];q(this,"selected",t)}}[qt](t){if(super[qt]&&super[qt](t),t.selected){const{selected:t}=this[Pt],e=new CustomEvent("selected-changed",{bubbles:!0,detail:{selected:t}});this.dispatchEvent(e);const o=new CustomEvent("selectedchange",{bubbles:!0,detail:{selected:t}});this.dispatchEvent(o)}}get selected(){return this[Pt].selected}set selected(t){this[St]({selected:t})}}}(H)))){}class $o extends Ho{get[Ht](){return I.html`
      <style>
        :host {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
          font-size: 10pt;
          white-space: nowrap;
        }

        :host([disabled]) {
          opacity: 0.5;
        }

        #checkmark {
          height: 1em;
          visibility: hidden;
          width: 1em;
        }

        :host([selected]) #checkmark {
          visibility: visible;
        }
      </style>
      <svg id="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="4 6 18 12">
        <path d="M0 0h24v24H0V0z" fill="none"/>
        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
      </svg>
      <slot></slot>
    `}}customElements.define("elix-menu-item",class extends $o{});class Ko extends H{get disabled(){return!0}[wt](t){super[wt](t),this[Y]&&this.setAttribute("aria-hidden","true")}}class Qo extends Ko{get[Ht](){return I.html`
      <style>
        :host {
          padding: 0 !important;
        }

        hr {
          border-bottom-width: 0px;
          border-color: #fff; /* Ends up as light gray */
          border-top-width: 1px;
          margin: 0.25em 0;
        }
      </style>
      <hr>
    `}}customElements.define("elix-menu-separator",class extends Qo{});const Go=Symbol("timeout"),Wo=no(function(t){return class extends t{get[X](){return super[X]||this}[wt](t){if(super[wt]&&super[wt](t),this[Y]){(this[X]===this?this:this[It]).addEventListener("transitionend",(t=>{const e=this[Pt].effectEndTarget||this[X];t.target===e&&this[St]({effectPhase:"after"})}))}}[qt](t){if(super[qt]&&super[qt](t),t.effect||t.effectPhase){const{effect:t,effectPhase:e}=this[Pt],o=new CustomEvent("effect-phase-changed",{bubbles:!0,detail:{effect:t,effectPhase:e}});this.dispatchEvent(o);const i=new CustomEvent("effectphasechange",{bubbles:!0,detail:{effect:t,effectPhase:e}});this.dispatchEvent(i),t&&("after"!==e&&this.offsetHeight,"before"===e&&this[St]({effectPhase:"during"}))}}async[kt](t){await this[St]({effect:t,effectPhase:"before"})}}}(xo));class Zo extends Wo{constructor(){super(),this.addEventListener("mouseout",(()=>{Yo(this)})),this.addEventListener("mouseover",(()=>{Xo(this)}))}attributeChangedCallback(t,e,o){"duration"===t?this.duration=Number(o):super.attributeChangedCallback(t,e,o)}get[G](){return Object.assign(super[G],{duration:null,fromEdge:"bottom"})}get duration(){return this[Pt].duration}set duration(t){isNaN(t)||this[St]({duration:t})}get[X](){return this[ht].frame}get fromEdge(){return this[Pt].fromEdge}set fromEdge(t){this[St]({fromEdge:t})}[wt](t){if(super[wt](t),t.fromEdge){const t={bottom:{alignItems:"center",justifyContent:"flex-end"},"bottom-left":{alignItems:"flex-start",justifyContent:"flex-end"},"bottom-right":{alignItems:"flex-end",justifyContent:"flex-end"},top:{alignItems:"center",justifyContent:null},"top-left":{alignItems:"flex-start",justifyContent:null},"top-right":{alignItems:"flex-end",justifyContent:null}};Object.assign(this.style,t[this[Pt].fromEdge])}if(t.effect||t.effectPhase||t.fromEdge||t.rightToLeft){const{effect:t,effectPhase:e,fromEdge:o,rightToLeft:i}=this[Pt],n={"bottom-left":"bottom-right","bottom-right":"bottom-left","top-left":"top-right","top-right":"top-left"},r=i&&n[o]||o,s={bottom:"translateY(100%)","bottom-left":"translateX(-100%)","bottom-right":"translateX(100%)",top:"translateY(-100%)","top-left":"translateX(-100%)","top-right":"translateX(100%)"},a={bottom:"translateY(0)","bottom-left":"translateX(0)","bottom-right":"translateX(0)",top:"translateY(0)","top-left":"translateX(0)","top-right":"translateX(0)"},l="open"===t&&"before"!==e||"close"===t&&"before"===e,u=l?1:0,c=l?a[r]:s[r];Object.assign(this[ht].frame.style,{opacity:u,transform:c})}}[qt](t){super[qt](t),Yo(this)}}function Xo(t){const e=t;e[Go]&&(clearTimeout(e[Go]),e[Go]=null)}function Yo(t){t.opened&&function(t){Xo(t);const e=t[Pt].duration;null!==e&&e>0&&(t[Go]=setTimeout((()=>{t.close()}),e))}(t)}class Jo extends Zo{get[G](){return Object.assign(super[G],{framePartType:ze})}get[Ht](){const t=super[Ht];return t.content.append(S.html`
        <style>
          :host {
            align-items: initial;
            display: flex;
            flex-direction: column;
            height: 100%;
            justify-content: initial;
            left: 0;
            outline: none;
            pointer-events: none;
            top: 0;
            -webkit-tap-highlight-color: transparent;
            width: 100%;
          }

          [part~="frame"] {
            margin: 1em;
            transition-duration: 0.25s;
            transition-property: opacity, transform;
            will-change: opacity, transform;
          }
        </style>
      `),t}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function ti(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */}customElements.define("elix-toast",class extends Jo{}),
/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */
function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Quill=e():t.Quill=e()}("undefined"!=typeof self?self:void 0,(function(){return function(t){var e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=109)}([function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=o(17),n=o(18),r=o(19),s=o(45),a=o(46),l=o(47),u=o(48),c=o(49),d=o(12),p=o(32),h=o(33),f=o(31),m=o(1),v={Scope:m.Scope,create:m.create,find:m.find,query:m.query,register:m.register,Container:i.default,Format:n.default,Leaf:r.default,Embed:u.default,Scroll:s.default,Block:l.default,Inline:a.default,Text:c.default,Attributor:{Attribute:d.default,Class:p.default,Style:h.default,Store:f.default}};e.default=v},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var o=this;return e="[Parchment] "+e,(o=t.call(this,e)||this).message=e,o.name=o.constructor.name,o}return n(e,t),e}(Error);e.ParchmentError=r;var s,a={},l={},u={},c={};function d(t,e){var o;if(void 0===e&&(e=s.ANY),"string"==typeof t)o=c[t]||a[t];else if(t instanceof Text||t.nodeType===Node.TEXT_NODE)o=c.text;else if("number"==typeof t)t&s.LEVEL&s.BLOCK?o=c.block:t&s.LEVEL&s.INLINE&&(o=c.inline);else if(t instanceof HTMLElement){var i=(t.getAttribute("class")||"").split(/\s+/);for(var n in i)if(o=l[i[n]])break;o=o||u[t.tagName]}return null==o?null:e&s.LEVEL&o.scope&&e&s.TYPE&o.scope?o:null}e.DATA_KEY="__blot",function(t){t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY"}(s=e.Scope||(e.Scope={})),e.create=function(t,e){var o=d(t);if(null==o)throw new r("Unable to create "+t+" blot");var i=o,n=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:i.create(e);return new i(n,e)},e.find=function t(o,i){return void 0===i&&(i=!1),null==o?null:null!=o[e.DATA_KEY]?o[e.DATA_KEY].blot:i?t(o.parentNode,i):null},e.query=d,e.register=function t(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];if(e.length>1)return e.map((function(e){return t(e)}));var i=e[0];if("string"!=typeof i.blotName&&"string"!=typeof i.attrName)throw new r("Invalid definition");if("abstract"===i.blotName)throw new r("Cannot register abstract class");if(c[i.blotName||i.attrName]=i,"string"==typeof i.keyName)a[i.keyName]=i;else if(null!=i.className&&(l[i.className]=i),null!=i.tagName){Array.isArray(i.tagName)?i.tagName=i.tagName.map((function(t){return t.toUpperCase()})):i.tagName=i.tagName.toUpperCase();var n=Array.isArray(i.tagName)?i.tagName:[i.tagName];n.forEach((function(t){null!=u[t]&&null!=i.className||(u[t]=i)}))}return i}},function(t,e,o){var i=o(51),n=o(11),r=o(3),s=o(20),a=String.fromCharCode(0),l=function(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]};l.prototype.insert=function(t,e){var o={};return 0===t.length?this:(o.insert=t,null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(o.attributes=e),this.push(o))},l.prototype.delete=function(t){return t<=0?this:this.push({delete:t})},l.prototype.retain=function(t,e){if(t<=0)return this;var o={retain:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(o.attributes=e),this.push(o)},l.prototype.push=function(t){var e=this.ops.length,o=this.ops[e-1];if(t=r(!0,{},t),"object"==typeof o){if("number"==typeof t.delete&&"number"==typeof o.delete)return this.ops[e-1]={delete:o.delete+t.delete},this;if("number"==typeof o.delete&&null!=t.insert&&(e-=1,"object"!=typeof(o=this.ops[e-1])))return this.ops.unshift(t),this;if(n(t.attributes,o.attributes)){if("string"==typeof t.insert&&"string"==typeof o.insert)return this.ops[e-1]={insert:o.insert+t.insert},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof o.retain)return this.ops[e-1]={retain:o.retain+t.retain},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this},l.prototype.chop=function(){var t=this.ops[this.ops.length-1];return t&&t.retain&&!t.attributes&&this.ops.pop(),this},l.prototype.filter=function(t){return this.ops.filter(t)},l.prototype.forEach=function(t){this.ops.forEach(t)},l.prototype.map=function(t){return this.ops.map(t)},l.prototype.partition=function(t){var e=[],o=[];return this.forEach((function(i){(t(i)?e:o).push(i)})),[e,o]},l.prototype.reduce=function(t,e){return this.ops.reduce(t,e)},l.prototype.changeLength=function(){return this.reduce((function(t,e){return e.insert?t+s.length(e):e.delete?t-e.delete:t}),0)},l.prototype.length=function(){return this.reduce((function(t,e){return t+s.length(e)}),0)},l.prototype.slice=function(t,e){t=t||0,"number"!=typeof e&&(e=1/0);for(var o=[],i=s.iterator(this.ops),n=0;n<e&&i.hasNext();){var r;n<t?r=i.next(t-n):(r=i.next(e-n),o.push(r)),n+=s.length(r)}return new l(o)},l.prototype.compose=function(t){var e=s.iterator(this.ops),o=s.iterator(t.ops),i=[],r=o.peek();if(null!=r&&"number"==typeof r.retain&&null==r.attributes){for(var a=r.retain;"insert"===e.peekType()&&e.peekLength()<=a;)a-=e.peekLength(),i.push(e.next());r.retain-a>0&&o.next(r.retain-a)}for(var u=new l(i);e.hasNext()||o.hasNext();)if("insert"===o.peekType())u.push(o.next());else if("delete"===e.peekType())u.push(e.next());else{var c=Math.min(e.peekLength(),o.peekLength()),d=e.next(c),p=o.next(c);if("number"==typeof p.retain){var h={};"number"==typeof d.retain?h.retain=c:h.insert=d.insert;var f=s.attributes.compose(d.attributes,p.attributes,"number"==typeof d.retain);if(f&&(h.attributes=f),u.push(h),!o.hasNext()&&n(u.ops[u.ops.length-1],h)){var m=new l(e.rest());return u.concat(m).chop()}}else"number"==typeof p.delete&&"number"==typeof d.retain&&u.push(p)}return u.chop()},l.prototype.concat=function(t){var e=new l(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e},l.prototype.diff=function(t,e){if(this.ops===t.ops)return new l;var o=[this,t].map((function(e){return e.map((function(o){if(null!=o.insert)return"string"==typeof o.insert?o.insert:a;throw new Error("diff() called "+(e===t?"on":"with")+" non-document")})).join("")})),r=new l,u=i(o[0],o[1],e),c=s.iterator(this.ops),d=s.iterator(t.ops);return u.forEach((function(t){for(var e=t[1].length;e>0;){var o=0;switch(t[0]){case i.INSERT:o=Math.min(d.peekLength(),e),r.push(d.next(o));break;case i.DELETE:o=Math.min(e,c.peekLength()),c.next(o),r.delete(o);break;case i.EQUAL:o=Math.min(c.peekLength(),d.peekLength(),e);var a=c.next(o),l=d.next(o);n(a.insert,l.insert)?r.retain(o,s.attributes.diff(a.attributes,l.attributes)):r.push(l).delete(o)}e-=o}})),r.chop()},l.prototype.eachLine=function(t,e){e=e||"\n";for(var o=s.iterator(this.ops),i=new l,n=0;o.hasNext();){if("insert"!==o.peekType())return;var r=o.peek(),a=s.length(r)-o.peekLength(),u="string"==typeof r.insert?r.insert.indexOf(e,a)-a:-1;if(u<0)i.push(o.next());else if(u>0)i.push(o.next(u));else{if(!1===t(i,o.next(1).attributes||{},n))return;n+=1,i=new l}}i.length()>0&&t(i,{},n)},l.prototype.transform=function(t,e){if(e=!!e,"number"==typeof t)return this.transformPosition(t,e);for(var o=s.iterator(this.ops),i=s.iterator(t.ops),n=new l;o.hasNext()||i.hasNext();)if("insert"!==o.peekType()||!e&&"insert"===i.peekType())if("insert"===i.peekType())n.push(i.next());else{var r=Math.min(o.peekLength(),i.peekLength()),a=o.next(r),u=i.next(r);if(a.delete)continue;u.delete?n.push(u):n.retain(r,s.attributes.transform(a.attributes,u.attributes,e))}else n.retain(s.length(o.next()));return n.chop()},l.prototype.transformPosition=function(t,e){e=!!e;for(var o=s.iterator(this.ops),i=0;o.hasNext()&&i<=t;){var n=o.peekLength(),r=o.peekType();o.next(),"delete"!==r?("insert"===r&&(i<t||!e)&&(t+=n),i+=n):t-=Math.min(n,t-i)}return t},t.exports=l},function(t,e){var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===i.call(t)},a=function(t){if(!t||"[object Object]"!==i.call(t))return!1;var e,n=o.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&o.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;for(e in t);return void 0===e||o.call(t,e)},l=function(t,e){n&&"__proto__"===e.name?n(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},u=function(t,e){if("__proto__"===e){if(!o.call(t,e))return;if(r)return r(t,e).value}return t[e]};t.exports=function t(){var e,o,i,n,r,c,d=arguments[0],p=1,h=arguments.length,f=!1;for("boolean"==typeof d&&(f=d,d=arguments[1]||{},p=2),(null==d||"object"!=typeof d&&"function"!=typeof d)&&(d={});p<h;++p)if(null!=(e=arguments[p]))for(o in e)i=u(d,o),d!==(n=u(e,o))&&(f&&n&&(a(n)||(r=s(n)))?(r?(r=!1,c=i&&s(i)?i:[]):c=i&&a(i)?i:{},l(d,{name:o,newValue:t(f,c,n)})):void 0!==n&&l(d,{name:o,newValue:n}));return d}},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BlockEmbed=e.bubbleFormats=void 0;var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),n=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},r=d(o(3)),s=d(o(2)),a=d(o(0)),l=d(o(16)),u=d(o(6)),c=d(o(7));function d(t){return t&&t.__esModule?t:{default:t}}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var m=function(t){function e(){return p(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return f(e,t),i(e,[{key:"attach",value:function(){n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attach",this).call(this),this.attributes=new a.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new s.default).insert(this.value(),(0,r.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(t,e){var o=a.default.query(t,a.default.Scope.BLOCK_ATTRIBUTE);null!=o&&this.attributes.attribute(o,e)}},{key:"formatAt",value:function(t,e,o,i){this.format(o,i)}},{key:"insertAt",value:function(t,o,i){if("string"==typeof o&&o.endsWith("\n")){var r=a.default.create(v.blotName);this.parent.insertBefore(r,0===t?this:this.next),r.insertAt(0,o.slice(0,-1))}else n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,o,i)}}]),e}(a.default.Embed);m.scope=a.default.Scope.BLOCK_BLOT;var v=function(t){function e(t){p(this,e);var o=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o.cache={},o}return f(e,t),i(e,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(a.default.Leaf).reduce((function(t,e){return 0===e.length()?t:t.insert(e.value(),g(e))}),new s.default).insert("\n",g(this))),this.cache.delta}},{key:"deleteAt",value:function(t,o){n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deleteAt",this).call(this,t,o),this.cache={}}},{key:"formatAt",value:function(t,o,i,r){o<=0||(a.default.query(i,a.default.Scope.BLOCK)?t+o===this.length()&&this.format(i,r):n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,Math.min(o,this.length()-t-1),i,r),this.cache={})}},{key:"insertAt",value:function(t,o,i){if(null!=i)return n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,o,i);if(0!==o.length){var r=o.split("\n"),s=r.shift();s.length>0&&(t<this.length()-1||null==this.children.tail?n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,Math.min(t,this.length()-1),s):this.children.tail.insertAt(this.children.tail.length(),s),this.cache={});var a=this;r.reduce((function(t,e){return(a=a.split(t,!0)).insertAt(0,e),e.length}),t+s.length)}}},{key:"insertBefore",value:function(t,o){var i=this.children.head;n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,o),i instanceof l.default&&i.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(t,o){n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveChildren",this).call(this,t,o),this.cache={}}},{key:"optimize",value:function(t){n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.cache={}}},{key:"path",value:function(t){return n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"path",this).call(this,t,!0)}},{key:"removeChild",value:function(t){n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeChild",this).call(this,t),this.cache={}}},{key:"split",value:function(t){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(o&&(0===t||t>=this.length()-1)){var i=this.clone();return 0===t?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}var r=n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"split",this).call(this,t,o);return this.cache={},r}}]),e}(a.default.Block);function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==t?e:("function"==typeof t.formats&&(e=(0,r.default)(e,t.formats())),null==t.parent||"scroll"==t.parent.blotName||t.parent.statics.scope!==t.statics.scope?e:g(t.parent,e))}v.blotName="block",v.tagName="P",v.defaultChild="break",v.allowedChildren=[u.default,a.default.Embed,c.default],e.bubbleFormats=g,e.BlockEmbed=m,e.default=v},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.overload=e.expandConfig=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}();o(50);var s=v(o(2)),a=v(o(14)),l=v(o(8)),u=v(o(9)),c=v(o(0)),d=o(15),p=v(d),h=v(o(3)),f=v(o(10)),m=v(o(34));function v(t){return t&&t.__esModule?t:{default:t}}function g(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var y=(0,f.default)("quill"),x=function(){function t(e){var o=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(b(this,t),this.options=w(e,i),this.container=this.options.container,null==this.container)return y.error("Invalid Quill container",e);this.options.debug&&t.debug(this.options.debug);var n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new l.default,this.scroll=c.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new a.default(this.scroll),this.selection=new p.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(l.default.events.EDITOR_CHANGE,(function(t){t===l.default.events.TEXT_CHANGE&&o.root.classList.toggle("ql-blank",o.editor.isBlank())})),this.emitter.on(l.default.events.SCROLL_UPDATE,(function(t,e){var i=o.selection.lastRange,n=i&&0===i.length?i.index:void 0;E.call(o,(function(){return o.editor.update(null,e,n)}),t)}));var r=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+n+"<p><br></p></div>");this.setContents(r),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return r(t,null,[{key:"debug",value:function(t){!0===t&&(t="log"),f.default.level(t)}},{key:"find",value:function(t){return t.__quill||c.default.find(t)}},{key:"import",value:function(t){return null==this.imports[t]&&y.error("Cannot import "+t+". Are you sure it was registered?"),this.imports[t]}},{key:"register",value:function(t,e){var o=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof t){var n=t.attrName||t.blotName;"string"==typeof n?this.register("formats/"+n,t,e):Object.keys(t).forEach((function(i){o.register(i,t[i],e)}))}else null==this.imports[t]||i||y.warn("Overwriting "+t+" with",e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&"abstract"!==e.blotName?c.default.register(e):t.startsWith("modules")&&"function"==typeof e.register&&e.register()}}]),r(t,[{key:"addContainer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){var o=t;(t=document.createElement("div")).classList.add(o)}return this.container.insertBefore(t,e),t}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(t,e,o){var i=this,r=O(t,e,o),s=n(r,4);return t=s[0],e=s[1],o=s[3],E.call(this,(function(){return i.editor.deleteText(t,e)}),o,t,-1*e)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}},{key:"focus",value:function(){var t=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=t,this.scrollIntoView()}},{key:"format",value:function(t,e){var o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;return E.call(this,(function(){var i=o.getSelection(!0),n=new s.default;if(null==i)return n;if(c.default.query(t,c.default.Scope.BLOCK))n=o.editor.formatLine(i.index,i.length,g({},t,e));else{if(0===i.length)return o.selection.format(t,e),n;n=o.editor.formatText(i.index,i.length,g({},t,e))}return o.setSelection(i,l.default.sources.SILENT),n}),i)}},{key:"formatLine",value:function(t,e,o,i,r){var s,a=this,l=O(t,e,o,i,r),u=n(l,4);return t=u[0],e=u[1],s=u[2],r=u[3],E.call(this,(function(){return a.editor.formatLine(t,e,s)}),r,t,0)}},{key:"formatText",value:function(t,e,o,i,r){var s,a=this,l=O(t,e,o,i,r),u=n(l,4);return t=u[0],e=u[1],s=u[2],r=u[3],E.call(this,(function(){return a.editor.formatText(t,e,s)}),r,t,0)}},{key:"getBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=void 0;o="number"==typeof t?this.selection.getBounds(t,e):this.selection.getBounds(t.index,t.length);var i=this.container.getBoundingClientRect();return{bottom:o.bottom-i.top,height:o.height,left:o.left-i.left,right:o.right-i.left,top:o.top-i.top,width:o.width}}},{key:"getContents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,o=O(t,e),i=n(o,2);return t=i[0],e=i[1],this.editor.getContents(t,e)}},{key:"getFormat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof t?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}},{key:"getIndex",value:function(t){return t.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(t){return this.scroll.leaf(t)}},{key:"getLine",value:function(t){return this.scroll.line(t)}},{key:"getLines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}},{key:"getModule",value:function(t){return this.theme.modules[t]}},{key:"getSelection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,o=O(t,e),i=n(o,2);return t=i[0],e=i[1],this.editor.getText(t,e)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(e,o,i){var n=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.sources.API;return E.call(this,(function(){return n.editor.insertEmbed(e,o,i)}),r,e)}},{key:"insertText",value:function(t,e,o,i,r){var s,a=this,l=O(t,0,o,i,r),u=n(l,4);return t=u[0],s=u[2],r=u[3],E.call(this,(function(){return a.editor.insertText(t,e,s)}),r,t,e.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(t,e,o){this.clipboard.dangerouslyPasteHTML(t,e,o)}},{key:"removeFormat",value:function(t,e,o){var i=this,r=O(t,e,o),s=n(r,4);return t=s[0],e=s[1],o=s[3],E.call(this,(function(){return i.editor.removeFormat(t,e)}),o,t)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return E.call(this,(function(){t=new s.default(t);var o=e.getLength(),i=e.editor.deleteText(0,o),n=e.editor.applyDelta(t),r=n.ops[n.ops.length-1];return null!=r&&"string"==typeof r.insert&&"\n"===r.insert[r.insert.length-1]&&(e.editor.deleteText(e.getLength()-1,1),n.delete(1)),i.compose(n)}),o)}},{key:"setSelection",value:function(e,o,i){if(null==e)this.selection.setRange(null,o||t.sources.API);else{var r=O(e,o,i),s=n(r,4);e=s[0],o=s[1],i=s[3],this.selection.setRange(new d.Range(e,o),i),i!==l.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API,o=(new s.default).insert(t);return this.setContents(o,e)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,e=this.scroll.update(t);return this.selection.update(t),e}},{key:"updateContents",value:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return E.call(this,(function(){return t=new s.default(t),e.editor.applyDelta(t,o)}),o,!0)}}]),t}();function w(t,e){if((e=(0,h.default)(!0,{container:t,modules:{clipboard:!0,keyboard:!0,history:!0}},e)).theme&&e.theme!==x.DEFAULTS.theme){if(e.theme=x.import("themes/"+e.theme),null==e.theme)throw new Error("Invalid theme "+e.theme+". Did you register it?")}else e.theme=m.default;var o=(0,h.default)(!0,{},e.theme.DEFAULTS);[o,e].forEach((function(t){t.modules=t.modules||{},Object.keys(t.modules).forEach((function(e){!0===t.modules[e]&&(t.modules[e]={})}))}));var i=Object.keys(o.modules).concat(Object.keys(e.modules)).reduce((function(t,e){var o=x.import("modules/"+e);return null==o?y.error("Cannot load "+e+" module. Are you sure you registered it?"):t[e]=o.DEFAULTS||{},t}),{});return null!=e.modules&&e.modules.toolbar&&e.modules.toolbar.constructor!==Object&&(e.modules.toolbar={container:e.modules.toolbar}),e=(0,h.default)(!0,{},x.DEFAULTS,{modules:i},o,e),["bounds","container","scrollingContainer"].forEach((function(t){"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))})),e.modules=Object.keys(e.modules).reduce((function(t,o){return e.modules[o]&&(t[o]=e.modules[o]),t}),{}),e}function E(t,e,o,i){if(this.options.strict&&!this.isEnabled()&&e===l.default.sources.USER)return new s.default;var n=null==o?null:this.getSelection(),r=this.editor.delta,a=t();if(null!=n&&(!0===o&&(o=n.index),null==i?n=q(n,a,e):0!==i&&(n=q(n,o,i,e)),this.setSelection(n,l.default.sources.SILENT)),a.length()>0){var u,c,d=[l.default.events.TEXT_CHANGE,a,r,e];if((u=this.emitter).emit.apply(u,[l.default.events.EDITOR_CHANGE].concat(d)),e!==l.default.sources.SILENT)(c=this.emitter).emit.apply(c,d)}return a}function O(t,e,o,n,r){var s={};return"number"==typeof t.index&&"number"==typeof t.length?"number"!=typeof e?(r=n,n=o,o=e,e=t.length,t=t.index):(e=t.length,t=t.index):"number"!=typeof e&&(r=n,n=o,o=e,e=0),"object"===(void 0===o?"undefined":i(o))?(s=o,r=n):"string"==typeof o&&(null!=n?s[o]=n:r=o),[t,e,s,r=r||l.default.sources.API]}function q(t,e,o,i){if(null==t)return null;var r=void 0,a=void 0;if(e instanceof s.default){var u=[t.index,t.index+t.length].map((function(t){return e.transformPosition(t,i!==l.default.sources.USER)})),c=n(u,2);r=c[0],a=c[1]}else{var p=[t.index,t.index+t.length].map((function(t){return t<e||t===e&&i===l.default.sources.USER?t:o>=0?t+o:Math.max(e,t+o)})),h=n(p,2);r=h[0],a=h[1]}return new d.Range(r,a-r)}x.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},x.events=l.default.events,x.sources=l.default.sources,x.version="1.3.7",x.imports={delta:s.default,parchment:c.default,"core/module":u.default,"core/theme":m.default},e.expandConfig=w,e.overload=O,e.default=x},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),n=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},r=a(o(7)),s=a(o(0));function a(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c=function(t){function e(){return l(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"formatAt",value:function(t,o,i,r){if(e.compare(this.statics.blotName,i)<0&&s.default.query(i,s.default.Scope.BLOT)){var a=this.isolate(t,o);r&&a.wrap(i,r)}else n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,o,i,r)}},{key:"optimize",value:function(t){if(n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.parent instanceof e&&e.compare(this.statics.blotName,this.parent.statics.blotName)>0){var o=this.parent.isolate(this.offset(),this.length());this.moveChildren(o),o.wrap(this)}}}],[{key:"compare",value:function(t,o){var i=e.order.indexOf(t),n=e.order.indexOf(o);return i>=0||n>=0?i-n:t===o?0:t<o?-1:1}}]),e}(s.default.Inline);c.allowedChildren=[c,s.default.Embed,r.default],c.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],e.default=c},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=o(0);function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=function(t){function e(){return r(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((i=n)&&i.__esModule?i:{default:i}).default.Text);e.default=a},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),n=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},r=s(o(54));function s(t){return t&&t.__esModule?t:{default:t}}var a=(0,s(o(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((function(t){document.addEventListener(t,(function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];[].slice.call(document.querySelectorAll(".ql-container")).forEach((function(t){var o;t.__quill&&t.__quill.emitter&&(o=t.__quill.emitter).handleDOM.apply(o,e)}))}))}));var l=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.listeners={},t.on("error",a.error),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"emit",value:function(){a.log.apply(a,arguments),n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(t){for(var e=arguments.length,o=Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];(this.listeners[t.type]||[]).forEach((function(e){var i=e.node,n=e.handler;(t.target===i||i.contains(t.target))&&n.apply(void 0,[t].concat(o))}))}},{key:"listenDOM",value:function(t,e,o){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({node:e,handler:o})}}]),e}(r.default);l.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},l.sources={API:"api",SILENT:"silent",USER:"user"},e.default=l},function(t,e,o){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.quill=e,this.options=o};n.DEFAULTS={},e.default=n},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=["error","warn","log","info"],n="warn";function r(t){if(i.indexOf(t)<=i.indexOf(n)){for(var e,o=arguments.length,r=Array(o>1?o-1:0),s=1;s<o;s++)r[s-1]=arguments[s];(e=console)[t].apply(e,r)}}function s(t){return i.reduce((function(e,o){return e[o]=r.bind(console,o,t),e}),{})}r.level=s.level=function(t){n=t},e.default=s},function(t,e,o){var i=Array.prototype.slice,n=o(52),r=o(53),s=t.exports=function(t,e,o){return o||(o={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?o.strict?t===e:t==e:function(t,e,o){var u,c;if(a(t)||a(e))return!1;if(t.prototype!==e.prototype)return!1;if(r(t))return!!r(e)&&(t=i.call(t),e=i.call(e),s(t,e,o));if(l(t)){if(!l(e))return!1;if(t.length!==e.length)return!1;for(u=0;u<t.length;u++)if(t[u]!==e[u])return!1;return!0}try{var d=n(t),p=n(e)}catch(t){return!1}if(d.length!=p.length)return!1;for(d.sort(),p.sort(),u=d.length-1;u>=0;u--)if(d[u]!=p[u])return!1;for(u=d.length-1;u>=0;u--)if(c=d[u],!s(t[c],e[c],o))return!1;return typeof t==typeof e}(t,e,o))};function a(t){return null==t}function l(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),n=function(){function t(t,e,o){void 0===o&&(o={}),this.attrName=t,this.keyName=e;var n=i.Scope.TYPE&i.Scope.ATTRIBUTE;null!=o.scope?this.scope=o.scope&i.Scope.LEVEL|n:this.scope=i.Scope.ATTRIBUTE,null!=o.whitelist&&(this.whitelist=o.whitelist)}return t.keys=function(t){return[].map.call(t.attributes,(function(t){return t.name}))},t.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)},t.prototype.canAdd=function(t,e){return null!=i.query(t,i.Scope.BLOT&(this.scope|i.Scope.TYPE))&&(null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1))},t.prototype.remove=function(t){t.removeAttribute(this.keyName)},t.prototype.value=function(t){var e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""},t}();e.default=n},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Code=void 0;var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=d(o(2)),a=d(o(0)),l=d(o(4)),u=d(o(6)),c=d(o(7));function d(t){return t&&t.__esModule?t:{default:t}}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var m=function(t){function e(){return p(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return f(e,t),e}(u.default);m.blotName="code",m.tagName="CODE";var v=function(t){function e(){return p(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return f(e,t),n(e,[{key:"delta",value:function(){var t=this,e=this.domNode.textContent;return e.endsWith("\n")&&(e=e.slice(0,-1)),e.split("\n").reduce((function(e,o){return e.insert(o).insert("\n",t.formats())}),new s.default)}},{key:"format",value:function(t,o){if(t!==this.statics.blotName||!o){var n=this.descendant(c.default,this.length()-1),s=i(n,1)[0];null!=s&&s.deleteAt(s.length()-1,1),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,o)}}},{key:"formatAt",value:function(t,o,i,n){if(0!==o&&null!=a.default.query(i,a.default.Scope.BLOCK)&&(i!==this.statics.blotName||n!==this.statics.formats(this.domNode))){var r=this.newlineIndex(t);if(!(r<0||r>=t+o)){var s=this.newlineIndex(t,!0)+1,l=r-s+1,u=this.isolate(s,l),c=u.next;u.format(i,n),c instanceof e&&c.formatAt(0,t-s+o-l,i,n)}}}},{key:"insertAt",value:function(t,e,o){if(null==o){var n=this.descendant(c.default,t),r=i(n,2),s=r[0],a=r[1];s.insertAt(a,e)}}},{key:"length",value:function(){var t=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?t:t+1}},{key:"newlineIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return this.domNode.textContent.slice(0,t).lastIndexOf("\n");var o=this.domNode.textContent.slice(t).indexOf("\n");return o>-1?t+o:-1}},{key:"optimize",value:function(t){this.domNode.textContent.endsWith("\n")||this.appendChild(a.default.create("text","\n")),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t);var o=this.next;null!=o&&o.prev===this&&o.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===o.statics.formats(o.domNode)&&(o.optimize(t),o.moveChildren(this),o.remove())}},{key:"replace",value:function(t){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replace",this).call(this,t),[].slice.call(this.domNode.querySelectorAll("*")).forEach((function(t){var e=a.default.find(t);null==e?t.parentNode.removeChild(t):e instanceof a.default.Embed?e.remove():e.unwrap()}))}}],[{key:"create",value:function(t){var o=r(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return o.setAttribute("spellcheck",!1),o}},{key:"formats",value:function(){return!0}}]),e}(l.default);v.blotName="code-block",v.tagName="PRE",v.TAB="  ",e.Code=m,e.default=v},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),s=g(o(2)),a=g(o(20)),l=g(o(0)),u=g(o(13)),c=g(o(24)),d=o(4),p=g(d),h=g(o(16)),f=g(o(21)),m=g(o(11)),v=g(o(3));function g(t){return t&&t.__esModule?t:{default:t}}var b=/^[ -~]*$/,y=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scroll=e,this.delta=this.getDelta()}return r(t,[{key:"applyDelta",value:function(t){var e=this,o=!1;this.scroll.update();var r=this.scroll.length();return this.scroll.batchStart(),(t=function(t){return t.reduce((function(t,e){if(1===e.insert){var o=(0,f.default)(e.attributes);return delete o.image,t.insert({image:e.attributes.image},o)}if(null==e.attributes||!0!==e.attributes.list&&!0!==e.attributes.bullet||((e=(0,f.default)(e)).attributes.list?e.attributes.list="ordered":(e.attributes.list="bullet",delete e.attributes.bullet)),"string"==typeof e.insert){var i=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(i,e.attributes)}return t.push(e)}),new s.default)}(t)).reduce((function(t,s){var u=s.retain||s.delete||s.insert.length||1,c=s.attributes||{};if(null!=s.insert){if("string"==typeof s.insert){var h=s.insert;h.endsWith("\n")&&o&&(o=!1,h=h.slice(0,-1)),t>=r&&!h.endsWith("\n")&&(o=!0),e.scroll.insertAt(t,h);var f=e.scroll.line(t),m=n(f,2),g=m[0],b=m[1],y=(0,v.default)({},(0,d.bubbleFormats)(g));if(g instanceof p.default){var x=g.descendant(l.default.Leaf,b),w=n(x,1)[0];y=(0,v.default)(y,(0,d.bubbleFormats)(w))}c=a.default.attributes.diff(y,c)||{}}else if("object"===i(s.insert)){var E=Object.keys(s.insert)[0];if(null==E)return t;e.scroll.insertAt(t,E,s.insert[E])}r+=u}return Object.keys(c).forEach((function(o){e.scroll.formatAt(t,u,o,c[o])})),t+u}),0),t.reduce((function(t,o){return"number"==typeof o.delete?(e.scroll.deleteAt(t,o.delete),t):t+(o.retain||o.insert.length||1)}),0),this.scroll.batchEnd(),this.update(t)}},{key:"deleteText",value:function(t,e){return this.scroll.deleteAt(t,e),this.update((new s.default).retain(t).delete(e))}},{key:"formatLine",value:function(t,e){var o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(i).forEach((function(n){if(null==o.scroll.whitelist||o.scroll.whitelist[n]){var r=o.scroll.lines(t,Math.max(e,1)),s=e;r.forEach((function(e){var r=e.length();if(e instanceof u.default){var a=t-e.offset(o.scroll),l=e.newlineIndex(a+s)-a+1;e.formatAt(a,l,n,i[n])}else e.format(n,i[n]);s-=r}))}})),this.scroll.optimize(),this.update((new s.default).retain(t).retain(e,(0,f.default)(i)))}},{key:"formatText",value:function(t,e){var o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(i).forEach((function(n){o.scroll.formatAt(t,e,n,i[n])})),this.update((new s.default).retain(t).retain(e,(0,f.default)(i)))}},{key:"getContents",value:function(t,e){return this.delta.slice(t,t+e)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce((function(t,e){return t.concat(e.delta())}),new s.default)}},{key:"getFormat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=[],i=[];0===e?this.scroll.path(t).forEach((function(t){var e=n(t,1)[0];e instanceof p.default?o.push(e):e instanceof l.default.Leaf&&i.push(e)})):(o=this.scroll.lines(t,e),i=this.scroll.descendants(l.default.Leaf,t,e));var r=[o,i].map((function(t){if(0===t.length)return{};for(var e=(0,d.bubbleFormats)(t.shift());Object.keys(e).length>0;){var o=t.shift();if(null==o)return e;e=x((0,d.bubbleFormats)(o),e)}return e}));return v.default.apply(v.default,r)}},{key:"getText",value:function(t,e){return this.getContents(t,e).filter((function(t){return"string"==typeof t.insert})).map((function(t){return t.insert})).join("")}},{key:"insertEmbed",value:function(t,e,o){return this.scroll.insertAt(t,e,o),this.update((new s.default).retain(t).insert(function(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}({},e,o)))}},{key:"insertText",value:function(t,e){var o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(i).forEach((function(n){o.scroll.formatAt(t,e.length,n,i[n])})),this.update((new s.default).retain(t).insert(e,(0,f.default)(i)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var t=this.scroll.children.head;return t.statics.blotName===p.default.blotName&&(!(t.children.length>1)&&t.children.head instanceof h.default)}},{key:"removeFormat",value:function(t,e){var o=this.getText(t,e),i=this.scroll.line(t+e),r=n(i,2),a=r[0],l=r[1],c=0,d=new s.default;null!=a&&(c=a instanceof u.default?a.newlineIndex(l)-l+1:a.length()-l,d=a.delta().slice(l,l+c-1).insert("\n"));var p=this.getContents(t,e+c).diff((new s.default).insert(o).concat(d)),h=(new s.default).retain(t).concat(p);return this.applyDelta(h)}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(b)&&l.default.find(e[0].target)){var n=l.default.find(e[0].target),r=(0,d.bubbleFormats)(n),a=n.offset(this.scroll),u=e[0].oldValue.replace(c.default.CONTENTS,""),p=(new s.default).insert(u),h=(new s.default).insert(n.value()),f=(new s.default).retain(a).concat(p.diff(h,o));t=f.reduce((function(t,e){return e.insert?t.insert(e.insert,r):t.push(e)}),new s.default),this.delta=i.compose(t)}else this.delta=this.getDelta(),t&&(0,m.default)(i.compose(t),this.delta)||(t=i.diff(this.delta,o));return t}}]),t}();function x(t,e){return Object.keys(e).reduce((function(o,i){return null==t[i]||(e[i]===t[i]?o[i]=e[i]:Array.isArray(e[i])?e[i].indexOf(t[i])<0&&(o[i]=e[i].concat([t[i]])):o[i]=[e[i],t[i]]),o}),{})}e.default=y},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Range=void 0;var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=u(o(0)),s=u(o(21)),a=u(o(11)),l=u(o(8));function u(t){return t&&t.__esModule?t:{default:t}}function c(t){if(Array.isArray(t)){for(var e=0,o=Array(t.length);e<t.length;e++)o[e]=t[e];return o}return Array.from(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var p=(0,u(o(10)).default)("quill:selection"),h=function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d(this,t),this.index=e,this.length=o},f=function(){function t(e,o){var i=this;d(this,t),this.emitter=o,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=r.default.create("cursor",this),this.lastRange=this.savedRange=new h(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){i.mouseDown||setTimeout(i.update.bind(i,l.default.sources.USER),1)})),this.emitter.on(l.default.events.EDITOR_CHANGE,(function(t,e){t===l.default.events.TEXT_CHANGE&&e.length()>0&&i.update(l.default.sources.SILENT)})),this.emitter.on(l.default.events.SCROLL_BEFORE_UPDATE,(function(){if(i.hasFocus()){var t=i.getNativeRange();null!=t&&t.start.node!==i.cursor.textNode&&i.emitter.once(l.default.events.SCROLL_UPDATE,(function(){try{i.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset)}catch(t){}}))}})),this.emitter.on(l.default.events.SCROLL_OPTIMIZE,(function(t,e){if(e.range){var o=e.range,n=o.startNode,r=o.startOffset,s=o.endNode,a=o.endOffset;i.setNativeRange(n,r,s,a)}})),this.update(l.default.sources.SILENT)}return n(t,[{key:"handleComposition",value:function(){var t=this;this.root.addEventListener("compositionstart",(function(){t.composing=!0})),this.root.addEventListener("compositionend",(function(){if(t.composing=!1,t.cursor.parent){var e=t.cursor.restore();if(!e)return;setTimeout((function(){t.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)}),1)}}))}},{key:"handleDragging",value:function(){var t=this;this.emitter.listenDOM("mousedown",document.body,(function(){t.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){t.mouseDown=!1,t.update(l.default.sources.USER)}))}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(t,e){if(null==this.scroll.whitelist||this.scroll.whitelist[t]){this.scroll.update();var o=this.getNativeRange();if(null!=o&&o.native.collapsed&&!r.default.query(t,r.default.Scope.BLOCK)){if(o.start.node!==this.cursor.textNode){var i=r.default.find(o.start.node,!1);if(null==i)return;if(i instanceof r.default.Leaf){var n=i.split(o.start.offset);i.parent.insertBefore(this.cursor,n)}else i.insertBefore(this.cursor,o.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this.scroll.length();t=Math.min(t,o-1),e=Math.min(t+e,o-1)-t;var n=void 0,r=this.scroll.leaf(t),s=i(r,2),a=s[0],l=s[1];if(null==a)return null;var u=a.position(l,!0),c=i(u,2);n=c[0],l=c[1];var d=document.createRange();if(e>0){d.setStart(n,l);var p=this.scroll.leaf(t+e),h=i(p,2);if(a=h[0],l=h[1],null==a)return null;var f=a.position(l,!0),m=i(f,2);return n=m[0],l=m[1],d.setEnd(n,l),d.getBoundingClientRect()}var v="left",g=void 0;return n instanceof Text?(l<n.data.length?(d.setStart(n,l),d.setEnd(n,l+1)):(d.setStart(n,l-1),d.setEnd(n,l),v="right"),g=d.getBoundingClientRect()):(g=a.domNode.getBoundingClientRect(),l>0&&(v="right")),{bottom:g.top+g.height,height:g.height,left:g[v],right:g[v],top:g.top,width:0}}},{key:"getNativeRange",value:function(){var t=document.getSelection();if(null==t||t.rangeCount<=0)return null;var e=t.getRangeAt(0);if(null==e)return null;var o=this.normalizeNative(e);return p.info("getNativeRange",o),o}},{key:"getRange",value:function(){var t=this.getNativeRange();return null==t?[null,null]:[this.normalizedToRange(t),t]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(t){var e=this,o=[[t.start.node,t.start.offset]];t.native.collapsed||o.push([t.end.node,t.end.offset]);var n=o.map((function(t){var o=i(t,2),n=o[0],s=o[1],a=r.default.find(n,!0),l=a.offset(e.scroll);return 0===s?l:a instanceof r.default.Container?l+a.length():l+a.index(n,s)})),s=Math.min(Math.max.apply(Math,c(n)),this.scroll.length()-1),a=Math.min.apply(Math,[s].concat(c(n)));return new h(a,s-a)}},{key:"normalizeNative",value:function(t){if(!m(this.root,t.startContainer)||!t.collapsed&&!m(this.root,t.endContainer))return null;var e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach((function(t){for(var e=t.node,o=t.offset;!(e instanceof Text)&&e.childNodes.length>0;)if(e.childNodes.length>o)e=e.childNodes[o],o=0;else{if(e.childNodes.length!==o)break;o=(e=e.lastChild)instanceof Text?e.data.length:e.childNodes.length+1}t.node=e,t.offset=o})),e}},{key:"rangeToNative",value:function(t){var e=this,o=t.collapsed?[t.index]:[t.index,t.index+t.length],n=[],r=this.scroll.length();return o.forEach((function(t,o){t=Math.min(r-1,t);var s,a=e.scroll.leaf(t),l=i(a,2),u=l[0],c=l[1],d=u.position(c,0!==o),p=i(d,2);s=p[0],c=p[1],n.push(s,c)})),n.length<2&&(n=n.concat(n)),n}},{key:"scrollIntoView",value:function(t){var e=this.lastRange;if(null!=e){var o=this.getBounds(e.index,e.length);if(null!=o){var n=this.scroll.length()-1,r=this.scroll.line(Math.min(e.index,n)),s=i(r,1)[0],a=s;if(e.length>0){var l=this.scroll.line(Math.min(e.index+e.length,n));a=i(l,1)[0]}if(null!=s&&null!=a){var u=t.getBoundingClientRect();o.top<u.top?t.scrollTop-=u.top-o.top:o.bottom>u.bottom&&(t.scrollTop+=o.bottom-u.bottom)}}}}},{key:"setNativeRange",value:function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(p.info("setNativeRange",t,e,o,i),null==t||null!=this.root.parentNode&&null!=t.parentNode&&null!=o.parentNode){var r=document.getSelection();if(null!=r)if(null!=t){this.hasFocus()||this.root.focus();var s=(this.getNativeRange()||{}).native;if(null==s||n||t!==s.startContainer||e!==s.startOffset||o!==s.endContainer||i!==s.endOffset){"BR"==t.tagName&&(e=[].indexOf.call(t.parentNode.childNodes,t),t=t.parentNode),"BR"==o.tagName&&(i=[].indexOf.call(o.parentNode.childNodes,o),o=o.parentNode);var a=document.createRange();a.setStart(t,e),a.setEnd(o,i),r.removeAllRanges(),r.addRange(a)}}else r.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;if("string"==typeof e&&(o=e,e=!1),p.info("setRange",t),null!=t){var i=this.rangeToNative(t);this.setNativeRange.apply(this,c(i).concat([e]))}else this.setNativeRange(null);this.update(o)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,e=this.lastRange,o=this.getRange(),n=i(o,2),r=n[0],u=n[1];if(this.lastRange=r,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,a.default)(e,this.lastRange)){var c;!this.composing&&null!=u&&u.native.collapsed&&u.start.node!==this.cursor.textNode&&this.cursor.restore();var d,p=[l.default.events.SELECTION_CHANGE,(0,s.default)(this.lastRange),(0,s.default)(e),t];if((c=this.emitter).emit.apply(c,[l.default.events.EDITOR_CHANGE].concat(p)),t!==l.default.sources.SILENT)(d=this.emitter).emit.apply(d,p)}}}]),t}();function m(t,e){try{e.parentNode}catch(t){return!1}return e instanceof Text&&(e=e.parentNode),t.contains(e)}e.Range=h,e.default=f},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(0);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u=function(t){function e(){return a(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"insertInto",value:function(t,o){0===t.children.length?r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertInto",this).call(this,t,o):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),e}(((i=s)&&i.__esModule?i:{default:i}).default.Embed);u.blotName="break",u.tagName="BR",e.default=u},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o(44),s=o(30),a=o(1),l=function(t){function e(e){var o=t.call(this,e)||this;return o.build(),o}return n(e,t),e.prototype.appendChild=function(t){this.insertBefore(t)},e.prototype.attach=function(){t.prototype.attach.call(this),this.children.forEach((function(t){t.attach()}))},e.prototype.build=function(){var t=this;this.children=new r.default,[].slice.call(this.domNode.childNodes).reverse().forEach((function(e){try{var o=u(e);t.insertBefore(o,t.children.head||void 0)}catch(t){if(t instanceof a.ParchmentError)return;throw t}}))},e.prototype.deleteAt=function(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,(function(t,e,o){t.deleteAt(e,o)}))},e.prototype.descendant=function(t,o){var i=this.children.find(o),n=i[0],r=i[1];return null==t.blotName&&t(n)||null!=t.blotName&&n instanceof t?[n,r]:n instanceof e?n.descendant(t,r):[null,-1]},e.prototype.descendants=function(t,o,i){void 0===o&&(o=0),void 0===i&&(i=Number.MAX_VALUE);var n=[],r=i;return this.children.forEachAt(o,i,(function(o,i,s){(null==t.blotName&&t(o)||null!=t.blotName&&o instanceof t)&&n.push(o),o instanceof e&&(n=n.concat(o.descendants(t,i,r))),r-=s})),n},e.prototype.detach=function(){this.children.forEach((function(t){t.detach()})),t.prototype.detach.call(this)},e.prototype.formatAt=function(t,e,o,i){this.children.forEachAt(t,e,(function(t,e,n){t.formatAt(e,n,o,i)}))},e.prototype.insertAt=function(t,e,o){var i=this.children.find(t),n=i[0],r=i[1];if(n)n.insertAt(r,e,o);else{var s=null==o?a.create("text",e):a.create(e,o);this.appendChild(s)}},e.prototype.insertBefore=function(t,e){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some((function(e){return t instanceof e})))throw new a.ParchmentError("Cannot insert "+t.statics.blotName+" into "+this.statics.blotName);t.insertInto(this,e)},e.prototype.length=function(){return this.children.reduce((function(t,e){return t+e.length()}),0)},e.prototype.moveChildren=function(t,e){this.children.forEach((function(o){t.insertBefore(o,e)}))},e.prototype.optimize=function(e){if(t.prototype.optimize.call(this,e),0===this.children.length)if(null!=this.statics.defaultChild){var o=a.create(this.statics.defaultChild);this.appendChild(o),o.optimize(e)}else this.remove()},e.prototype.path=function(t,o){void 0===o&&(o=!1);var i=this.children.find(t,o),n=i[0],r=i[1],s=[[this,t]];return n instanceof e?s.concat(n.path(r,o)):(null!=n&&s.push([n,r]),s)},e.prototype.removeChild=function(t){this.children.remove(t)},e.prototype.replace=function(o){o instanceof e&&o.moveChildren(this),t.prototype.replace.call(this,o)},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var o=this.clone();return this.parent.insertBefore(o,this.next),this.children.forEachAt(t,this.length(),(function(t,i,n){t=t.split(i,e),o.appendChild(t)})),o},e.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},e.prototype.update=function(t,e){var o=this,i=[],n=[];t.forEach((function(t){t.target===o.domNode&&"childList"===t.type&&(i.push.apply(i,t.addedNodes),n.push.apply(n,t.removedNodes))})),n.forEach((function(t){if(!(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var e=a.find(t);null!=e&&(null!=e.domNode.parentNode&&e.domNode.parentNode!==o.domNode||e.detach())}})),i.filter((function(t){return t.parentNode==o.domNode})).sort((function(t,e){return t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(t){var e=null;null!=t.nextSibling&&(e=a.find(t.nextSibling));var i=u(t);i.next==e&&null!=i.next||(null!=i.parent&&i.parent.removeChild(o),o.insertBefore(i,e||void 0))}))},e}(s.default);function u(t){var e=a.find(t);if(null==e)try{e=a.create(t)}catch(o){e=a.create(a.Scope.INLINE),[].slice.call(t.childNodes).forEach((function(t){e.domNode.appendChild(t)})),t.parentNode&&t.parentNode.replaceChild(e.domNode,t),e.attach()}return e}e.default=l},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o(12),s=o(31),a=o(17),l=o(1),u=function(t){function e(e){var o=t.call(this,e)||this;return o.attributes=new s.default(o.domNode),o}return n(e,t),e.formats=function(t){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)},e.prototype.format=function(t,e){var o=l.query(t);o instanceof r.default?this.attributes.attribute(o,e):e&&(null==o||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e))},e.prototype.formats=function(){var t=this.attributes.values(),e=this.statics.formats(this.domNode);return null!=e&&(t[this.statics.blotName]=e),t},e.prototype.replaceWith=function(e,o){var i=t.prototype.replaceWith.call(this,e,o);return this.attributes.copy(i),i},e.prototype.update=function(e,o){var i=this;t.prototype.update.call(this,e,o),e.some((function(t){return t.target===i.domNode&&"attributes"===t.type}))&&this.attributes.build()},e.prototype.wrap=function(o,i){var n=t.prototype.wrap.call(this,o,i);return n instanceof e&&n.statics.scope===this.statics.scope&&this.attributes.move(n),n},e}(a.default);e.default=u},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o(30),s=o(1),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.value=function(t){return!0},e.prototype.index=function(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1},e.prototype.position=function(t,e){var o=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return t>0&&(o+=1),[this.parent.domNode,o]},e.prototype.value=function(){var t;return(t={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,t},e.scope=s.Scope.INLINE_BLOT,e}(r.default);e.default=a},function(t,e,o){var i=o(11),n=o(3),r={attributes:{compose:function(t,e,o){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var i=n(!0,{},e);for(var r in o||(i=Object.keys(i).reduce((function(t,e){return null!=i[e]&&(t[e]=i[e]),t}),{})),t)void 0!==t[r]&&void 0===e[r]&&(i[r]=t[r]);return Object.keys(i).length>0?i:void 0},diff:function(t,e){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var o=Object.keys(t).concat(Object.keys(e)).reduce((function(o,n){return i(t[n],e[n])||(o[n]=void 0===e[n]?null:e[n]),o}),{});return Object.keys(o).length>0?o:void 0},transform:function(t,e,o){if("object"!=typeof t)return e;if("object"==typeof e){if(!o)return e;var i=Object.keys(e).reduce((function(o,i){return void 0===t[i]&&(o[i]=e[i]),o}),{});return Object.keys(i).length>0?i:void 0}}},iterator:function(t){return new s(t)},length:function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"string"==typeof t.insert?t.insert.length:1}};function s(t){this.ops=t,this.index=0,this.offset=0}s.prototype.hasNext=function(){return this.peekLength()<1/0},s.prototype.next=function(t){t||(t=1/0);var e=this.ops[this.index];if(e){var o=this.offset,i=r.length(e);if(t>=i-o?(t=i-o,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e.delete)return{delete:t};var n={};return e.attributes&&(n.attributes=e.attributes),"number"==typeof e.retain?n.retain=t:"string"==typeof e.insert?n.insert=e.insert.substr(o,t):n.insert=e.insert,n}return{retain:1/0}},s.prototype.peek=function(){return this.ops[this.index]},s.prototype.peekLength=function(){return this.ops[this.index]?r.length(this.ops[this.index])-this.offset:1/0},s.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},s.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var t=this.offset,e=this.index,o=this.next(),i=this.ops.slice(this.index);return this.offset=t,this.index=e,[o].concat(i)}return[]},t.exports=r},function(t,e){var o=function(){function t(t,e){return null!=e&&t instanceof e}var e,o,i;try{e=Map}catch(t){e=function(){}}try{o=Set}catch(t){o=function(){}}try{i=Promise}catch(t){i=function(){}}function n(r,a,l,u,c){"object"==typeof a&&(l=a.depth,u=a.prototype,c=a.includeNonEnumerable,a=a.circular);var d=[],p=[],h="undefined"!=typeof Buffer;return void 0===a&&(a=!0),void 0===l&&(l=1/0),function r(l,f){if(null===l)return null;if(0===f)return l;var m,v;if("object"!=typeof l)return l;if(t(l,e))m=new e;else if(t(l,o))m=new o;else if(t(l,i))m=new i((function(t,e){l.then((function(e){t(r(e,f-1))}),(function(t){e(r(t,f-1))}))}));else if(n.__isArray(l))m=[];else if(n.__isRegExp(l))m=new RegExp(l.source,s(l)),l.lastIndex&&(m.lastIndex=l.lastIndex);else if(n.__isDate(l))m=new Date(l.getTime());else{if(h&&Buffer.isBuffer(l))return m=Buffer.allocUnsafe?Buffer.allocUnsafe(l.length):new Buffer(l.length),l.copy(m),m;t(l,Error)?m=Object.create(l):void 0===u?(v=Object.getPrototypeOf(l),m=Object.create(v)):(m=Object.create(u),v=u)}if(a){var g=d.indexOf(l);if(-1!=g)return p[g];d.push(l),p.push(m)}for(var b in t(l,e)&&l.forEach((function(t,e){var o=r(e,f-1),i=r(t,f-1);m.set(o,i)})),t(l,o)&&l.forEach((function(t){var e=r(t,f-1);m.add(e)})),l){var y;v&&(y=Object.getOwnPropertyDescriptor(v,b)),y&&null==y.set||(m[b]=r(l[b],f-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(l);for(b=0;b<x.length;b++){var w=x[b];(!(O=Object.getOwnPropertyDescriptor(l,w))||O.enumerable||c)&&(m[w]=r(l[w],f-1),O.enumerable||Object.defineProperty(m,w,{enumerable:!1}))}}if(c){var E=Object.getOwnPropertyNames(l);for(b=0;b<E.length;b++){var O,q=E[b];(O=Object.getOwnPropertyDescriptor(l,q))&&O.enumerable||(m[q]=r(l[q],f-1),Object.defineProperty(m,q,{enumerable:!1}))}}return m}(r,l)}function r(t){return Object.prototype.toString.call(t)}function s(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return n.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},n.__objToStr=r,n.__isDate=function(t){return"object"==typeof t&&"[object Date]"===r(t)},n.__isArray=function(t){return"object"==typeof t&&"[object Array]"===r(t)},n.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===r(t)},n.__getRegExpFlags=s,n}();"object"==typeof t&&t.exports&&(t.exports=o)},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=h(o(0)),a=h(o(8)),l=o(4),u=h(l),c=h(o(16)),d=h(o(13)),p=h(o(25));function h(t){return t&&t.__esModule?t:{default:t}}function f(t){return t instanceof u.default||t instanceof l.BlockEmbed}var m=function(t){function e(t,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.emitter=o.emitter,Array.isArray(o.whitelist)&&(i.whitelist=o.whitelist.reduce((function(t,e){return t[e]=!0,t}),{})),i.domNode.addEventListener("DOMNodeInserted",(function(){})),i.optimize(),i.enable(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(t,o){var n=this.line(t),s=i(n,2),a=s[0],u=s[1],p=this.line(t+o),h=i(p,1)[0];if(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deleteAt",this).call(this,t,o),null!=h&&a!==h&&u>0){if(a instanceof l.BlockEmbed||h instanceof l.BlockEmbed)return void this.optimize();if(a instanceof d.default){var f=a.newlineIndex(a.length(),!0);if(f>-1&&(a=a.split(f+1))===h)return void this.optimize()}else if(h instanceof d.default){var m=h.newlineIndex(0);m>-1&&h.split(m+1)}var v=h.children.head instanceof c.default?null:h.children.head;a.moveChildren(h,v),a.remove()}this.optimize()}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",t)}},{key:"formatAt",value:function(t,o,i,n){(null==this.whitelist||this.whitelist[i])&&(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,o,i,n),this.optimize())}},{key:"insertAt",value:function(t,o,i){if(null==i||null==this.whitelist||this.whitelist[o]){if(t>=this.length())if(null==i||null==s.default.query(o,s.default.Scope.BLOCK)){var n=s.default.create(this.statics.defaultChild);this.appendChild(n),null==i&&o.endsWith("\n")&&(o=o.slice(0,-1)),n.insertAt(0,o,i)}else{var a=s.default.create(o,i);this.appendChild(a)}else r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,o,i);this.optimize()}}},{key:"insertBefore",value:function(t,o){if(t.statics.scope===s.default.Scope.INLINE_BLOT){var i=s.default.create(this.statics.defaultChild);i.appendChild(t),t=i}r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,o)}},{key:"leaf",value:function(t){return this.path(t).pop()||[null,-1]}},{key:"line",value:function(t){return t===this.length()?this.line(t-1):this.descendant(f,t)}},{key:"lines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,o=function t(e,o,i){var n=[],r=i;return e.children.forEachAt(o,i,(function(e,o,i){f(e)?n.push(e):e instanceof s.default.Container&&(n=n.concat(t(e,o,r))),r-=i})),n};return o(this,t,e)}},{key:"optimize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t,o),t.length>0&&this.emitter.emit(a.default.events.SCROLL_OPTIMIZE,t,o))}},{key:"path",value:function(t){return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"path",this).call(this,t).slice(1)}},{key:"update",value:function(t){if(!0!==this.batch){var o=a.default.sources.USER;"string"==typeof t&&(o=t),Array.isArray(t)||(t=this.observer.takeRecords()),t.length>0&&this.emitter.emit(a.default.events.SCROLL_BEFORE_UPDATE,o,t),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t.concat([])),t.length>0&&this.emitter.emit(a.default.events.SCROLL_UPDATE,o,t)}}}]),e}(s.default.Scroll);m.blotName="scroll",m.className="ql-editor",m.tagName="DIV",m.defaultChild="block",m.allowedChildren=[u.default,l.BlockEmbed,p.default],e.default=m},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.SHORTKEY=e.default=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),s=m(o(21)),a=m(o(11)),l=m(o(3)),u=m(o(2)),c=m(o(20)),d=m(o(0)),p=m(o(5)),h=m(o(10)),f=m(o(9));function m(t){return t&&t.__esModule?t:{default:t}}function v(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var g=(0,h.default)("quill:keyboard"),b=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",y=function(t){function e(t,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));return i.bindings={},Object.keys(i.options.bindings).forEach((function(e){("list autofill"!==e||null==t.scroll.whitelist||t.scroll.whitelist.list)&&i.options.bindings[e]&&i.addBinding(i.options.bindings[e])})),i.addBinding({key:e.keys.ENTER,shiftKey:null},q),i.addBinding({key:e.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},(function(){})),/Firefox/i.test(navigator.userAgent)?(i.addBinding({key:e.keys.BACKSPACE},{collapsed:!0},w),i.addBinding({key:e.keys.DELETE},{collapsed:!0},E)):(i.addBinding({key:e.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},w),i.addBinding({key:e.keys.DELETE},{collapsed:!0,suffix:/^.?$/},E)),i.addBinding({key:e.keys.BACKSPACE},{collapsed:!1},O),i.addBinding({key:e.keys.DELETE},{collapsed:!1},O),i.addBinding({key:e.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},w),i.listen(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,null,[{key:"match",value:function(t,e){return e=S(e),!["altKey","ctrlKey","metaKey","shiftKey"].some((function(o){return!!e[o]!==t[o]&&null!==e[o]}))&&e.key===(t.which||t.keyCode)}}]),r(e,[{key:"addBinding",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=S(t);if(null==i||null==i.key)return g.warn("Attempted to add invalid keyboard binding",i);"function"==typeof e&&(e={handler:e}),"function"==typeof o&&(o={handler:o}),i=(0,l.default)(i,e,o),this.bindings[i.key]=this.bindings[i.key]||[],this.bindings[i.key].push(i)}},{key:"listen",value:function(){var t=this;this.quill.root.addEventListener("keydown",(function(o){if(!o.defaultPrevented){var r=o.which||o.keyCode,s=(t.bindings[r]||[]).filter((function(t){return e.match(o,t)}));if(0!==s.length){var l=t.quill.getSelection();if(null!=l&&t.quill.hasFocus()){var u=t.quill.getLine(l.index),c=n(u,2),p=c[0],h=c[1],f=t.quill.getLeaf(l.index),m=n(f,2),v=m[0],g=m[1],b=0===l.length?[v,g]:t.quill.getLeaf(l.index+l.length),y=n(b,2),x=y[0],w=y[1],E=v instanceof d.default.Text?v.value().slice(0,g):"",O=x instanceof d.default.Text?x.value().slice(w):"",q={collapsed:0===l.length,empty:0===l.length&&p.length()<=1,format:t.quill.getFormat(l),offset:h,prefix:E,suffix:O};s.some((function(e){if(null!=e.collapsed&&e.collapsed!==q.collapsed)return!1;if(null!=e.empty&&e.empty!==q.empty)return!1;if(null!=e.offset&&e.offset!==q.offset)return!1;if(Array.isArray(e.format)){if(e.format.every((function(t){return null==q.format[t]})))return!1}else if("object"===i(e.format)&&!Object.keys(e.format).every((function(t){return!0===e.format[t]?null!=q.format[t]:!1===e.format[t]?null==q.format[t]:(0,a.default)(e.format[t],q.format[t])})))return!1;return!(null!=e.prefix&&!e.prefix.test(q.prefix))&&(!(null!=e.suffix&&!e.suffix.test(q.suffix))&&!0!==e.handler.call(t,l,q))}))&&o.preventDefault()}}}}))}}]),e}(f.default);function x(t,e){var o,i=t===y.keys.LEFT?"prefix":"suffix";return v(o={key:t,shiftKey:e,altKey:null},i,/^$/),v(o,"handler",(function(o){var i=o.index;t===y.keys.RIGHT&&(i+=o.length+1);var r=this.quill.getLeaf(i);return!(n(r,1)[0]instanceof d.default.Embed)||(t===y.keys.LEFT?e?this.quill.setSelection(o.index-1,o.length+1,p.default.sources.USER):this.quill.setSelection(o.index-1,p.default.sources.USER):e?this.quill.setSelection(o.index,o.length+1,p.default.sources.USER):this.quill.setSelection(o.index+o.length+1,p.default.sources.USER),!1)})),o}function w(t,e){if(!(0===t.index||this.quill.getLength()<=1)){var o=this.quill.getLine(t.index),i=n(o,1)[0],r={};if(0===e.offset){var s=this.quill.getLine(t.index-1),a=n(s,1)[0];if(null!=a&&a.length()>1){var l=i.formats(),u=this.quill.getFormat(t.index-1,1);r=c.default.attributes.diff(l,u)||{}}}var d=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;this.quill.deleteText(t.index-d,d,p.default.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(t.index-d,d,r,p.default.sources.USER),this.quill.focus()}}function E(t,e){var o=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(!(t.index>=this.quill.getLength()-o)){var i={},r=0,s=this.quill.getLine(t.index),a=n(s,1)[0];if(e.offset>=a.length()-1){var l=this.quill.getLine(t.index+1),u=n(l,1)[0];if(u){var d=a.formats(),h=this.quill.getFormat(t.index,1);i=c.default.attributes.diff(d,h)||{},r=u.length()}}this.quill.deleteText(t.index,o,p.default.sources.USER),Object.keys(i).length>0&&this.quill.formatLine(t.index+r-1,o,i,p.default.sources.USER)}}function O(t){var e=this.quill.getLines(t),o={};if(e.length>1){var i=e[0].formats(),n=e[e.length-1].formats();o=c.default.attributes.diff(n,i)||{}}this.quill.deleteText(t,p.default.sources.USER),Object.keys(o).length>0&&this.quill.formatLine(t.index,1,o,p.default.sources.USER),this.quill.setSelection(t.index,p.default.sources.SILENT),this.quill.focus()}function q(t,e){var o=this;t.length>0&&this.quill.scroll.deleteAt(t.index,t.length);var i=Object.keys(e.format).reduce((function(t,o){return d.default.query(o,d.default.Scope.BLOCK)&&!Array.isArray(e.format[o])&&(t[o]=e.format[o]),t}),{});this.quill.insertText(t.index,"\n",i,p.default.sources.USER),this.quill.setSelection(t.index+1,p.default.sources.SILENT),this.quill.focus(),Object.keys(e.format).forEach((function(t){null==i[t]&&(Array.isArray(e.format[t])||"link"!==t&&o.quill.format(t,e.format[t],p.default.sources.USER))}))}function _(t){return{key:y.keys.TAB,shiftKey:!t,format:{"code-block":!0},handler:function(e){var o=d.default.query("code-block"),i=e.index,r=e.length,s=this.quill.scroll.descendant(o,i),a=n(s,2),l=a[0],u=a[1];if(null!=l){var c=this.quill.getIndex(l),h=l.newlineIndex(u,!0)+1,f=l.newlineIndex(c+u+r),m=l.domNode.textContent.slice(h,f).split("\n");u=0,m.forEach((function(e,n){t?(l.insertAt(h+u,o.TAB),u+=o.TAB.length,0===n?i+=o.TAB.length:r+=o.TAB.length):e.startsWith(o.TAB)&&(l.deleteAt(h+u,o.TAB.length),u-=o.TAB.length,0===n?i-=o.TAB.length:r-=o.TAB.length),u+=e.length+1})),this.quill.update(p.default.sources.USER),this.quill.setSelection(i,r,p.default.sources.SILENT)}}}}function A(t){return{key:t[0].toUpperCase(),shortKey:!0,handler:function(e,o){this.quill.format(t,!o.format[t],p.default.sources.USER)}}}function S(t){if("string"==typeof t||"number"==typeof t)return S({key:t});if("object"===(void 0===t?"undefined":i(t))&&(t=(0,s.default)(t,!1)),"string"==typeof t.key)if(null!=y.keys[t.key.toUpperCase()])t.key=y.keys[t.key.toUpperCase()];else{if(1!==t.key.length)return null;t.key=t.key.toUpperCase().charCodeAt(0)}return t.shortKey&&(t[b]=t.shortKey,delete t.shortKey),t}y.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},y.DEFAULTS={bindings:{bold:A("bold"),italic:A("italic"),underline:A("underline"),indent:{key:y.keys.TAB,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","+1",p.default.sources.USER)}},outdent:{key:y.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","-1",p.default.sources.USER)}},"outdent backspace":{key:y.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(t,e){null!=e.format.indent?this.quill.format("indent","-1",p.default.sources.USER):null!=e.format.list&&this.quill.format("list",!1,p.default.sources.USER)}},"indent code-block":_(!0),"outdent code-block":_(!1),"remove tab":{key:y.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(t){this.quill.deleteText(t.index-1,1,p.default.sources.USER)}},tab:{key:y.keys.TAB,handler:function(t){this.quill.history.cutoff();var e=(new u.default).retain(t.index).delete(t.length).insert("\t");this.quill.updateContents(e,p.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,p.default.sources.SILENT)}},"list empty enter":{key:y.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(t,e){this.quill.format("list",!1,p.default.sources.USER),e.format.indent&&this.quill.format("indent",!1,p.default.sources.USER)}},"checklist enter":{key:y.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(t){var e=this.quill.getLine(t.index),o=n(e,2),i=o[0],r=o[1],s=(0,l.default)({},i.formats(),{list:"checked"}),a=(new u.default).retain(t.index).insert("\n",s).retain(i.length()-r-1).retain(1,{list:"unchecked"});this.quill.updateContents(a,p.default.sources.USER),this.quill.setSelection(t.index+1,p.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:y.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(t,e){var o=this.quill.getLine(t.index),i=n(o,2),r=i[0],s=i[1],a=(new u.default).retain(t.index).insert("\n",e.format).retain(r.length()-s-1).retain(1,{header:null});this.quill.updateContents(a,p.default.sources.USER),this.quill.setSelection(t.index+1,p.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(t,e){var o=e.prefix.length,i=this.quill.getLine(t.index),r=n(i,2),s=r[0],a=r[1];if(a>o)return!0;var l=void 0;switch(e.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(t.index," ",p.default.sources.USER),this.quill.history.cutoff();var c=(new u.default).retain(t.index-a).delete(o+1).retain(s.length()-2-a).retain(1,{list:l});this.quill.updateContents(c,p.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-o,p.default.sources.SILENT)}},"code exit":{key:y.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(t){var e=this.quill.getLine(t.index),o=n(e,2),i=o[0],r=o[1],s=(new u.default).retain(t.index+i.length()-r-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(s,p.default.sources.USER)}},"embed left":x(y.keys.LEFT,!1),"embed left shift":x(y.keys.LEFT,!0),"embed right":x(y.keys.RIGHT,!1),"embed right shift":x(y.keys.RIGHT,!0)}},e.default=y,e.SHORTKEY=b},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},r=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),s=l(o(0)),a=l(o(7));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.selection=o,i.textNode=document.createTextNode(e.CONTENTS),i.domNode.appendChild(i.textNode),i._length=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,null,[{key:"value",value:function(){}}]),r(e,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(t,o){if(0!==this._length)return n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,o);for(var i=this,r=0;null!=i&&i.statics.scope!==s.default.Scope.BLOCK_BLOT;)r+=i.offset(i.parent),i=i.parent;null!=i&&(this._length=e.CONTENTS.length,i.optimize(),i.formatAt(r,e.CONTENTS.length,t,o),this._length=0)}},{key:"index",value:function(t,o){return t===this.textNode?0:n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"index",this).call(this,t,o)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var t=this.textNode,o=this.selection.getNativeRange(),n=void 0,r=void 0,l=void 0;if(null!=o&&o.start.node===t&&o.end.node===t){var u=[t,o.start.offset,o.end.offset];n=u[0],r=u[1],l=u[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==e.CONTENTS){var c=this.textNode.data.split(e.CONTENTS).join("");this.next instanceof a.default?(n=this.next.domNode,this.next.insertAt(0,c),this.textNode.data=e.CONTENTS):(this.textNode.data=c,this.parent.insertBefore(s.default.create(this.textNode),this),this.textNode=document.createTextNode(e.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=r){var d=[r,l].map((function(t){return Math.max(0,Math.min(n.data.length,t-1))})),p=i(d,2);return r=p[0],l=p[1],{startNode:n,startOffset:r,endNode:n,endOffset:l}}}}},{key:"update",value:function(t,e){var o=this;if(t.some((function(t){return"characterData"===t.type&&t.target===o.textNode}))){var i=this.restore();i&&(e.range=i)}}},{key:"value",value:function(){return""}}]),e}(s.default.Embed);u.blotName="cursor",u.className="ql-cursor",u.tagName="span",u.CONTENTS="\ufeff",e.default=u},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=s(o(0)),n=o(4),r=s(n);function s(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u=function(t){function e(){return a(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(i.default.Container);u.allowedChildren=[r.default,n.BlockEmbed,u],e.default=u},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.ColorStyle=e.ColorClass=e.ColorAttributor=void 0;var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(0),a=(i=s)&&i.__esModule?i:{default:i};function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c=function(t){function e(){return l(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"value",value:function(t){var o=r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t);return o.startsWith("rgb(")?(o=o.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+o.split(",").map((function(t){return("00"+parseInt(t).toString(16)).slice(-2)})).join("")):o}}]),e}(a.default.Attributor.Style),d=new a.default.Attributor.Class("color","ql-color",{scope:a.default.Scope.INLINE}),p=new c("color","color",{scope:a.default.Scope.INLINE});e.ColorAttributor=c,e.ColorClass=d,e.ColorStyle=p},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.sanitize=e.default=void 0;var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(6);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u=function(t){function e(){return a(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"format",value:function(t,o){if(t!==this.statics.blotName||!o)return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,o);o=this.constructor.sanitize(o),this.domNode.setAttribute("href",o)}}],[{key:"create",value:function(t){var o=r(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return t=this.sanitize(t),o.setAttribute("href",t),o.setAttribute("rel","noopener noreferrer"),o.setAttribute("target","_blank"),o}},{key:"formats",value:function(t){return t.getAttribute("href")}},{key:"sanitize",value:function(t){return c(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}}]),e}(((i=s)&&i.__esModule?i:{default:i}).default);function c(t,e){var o=document.createElement("a");o.href=t;var i=o.href.slice(0,o.href.indexOf(":"));return e.indexOf(i)>-1}u.blotName="link",u.tagName="A",u.SANITIZED_URL="about:blank",u.PROTOCOL_WHITELIST=["http","https","mailto","tel"],e.default=u,e.sanitize=c},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=a(o(23)),s=a(o(107));function a(t){return t&&t.__esModule?t:{default:t}}var l=0;function u(t,e){t.setAttribute(e,!("true"===t.getAttribute(e)))}var c=function(){function t(e){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(function(){o.togglePicker()})),this.label.addEventListener("keydown",(function(t){switch(t.keyCode){case r.default.keys.ENTER:o.togglePicker();break;case r.default.keys.ESCAPE:o.escape(),t.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}return n(t,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),u(this.label,"aria-expanded"),u(this.options,"aria-hidden")}},{key:"buildItem",value:function(t){var e=this,o=document.createElement("span");return o.tabIndex="0",o.setAttribute("role","button"),o.classList.add("ql-picker-item"),t.hasAttribute("value")&&o.setAttribute("data-value",t.getAttribute("value")),t.textContent&&o.setAttribute("data-label",t.textContent),o.addEventListener("click",(function(){e.selectItem(o,!0)})),o.addEventListener("keydown",(function(t){switch(t.keyCode){case r.default.keys.ENTER:e.selectItem(o,!0),t.preventDefault();break;case r.default.keys.ESCAPE:e.escape(),t.preventDefault()}})),o}},{key:"buildLabel",value:function(){var t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=s.default,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}},{key:"buildOptions",value:function(){var t=this,e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id="ql-picker-options-"+l,l+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,[].slice.call(this.select.options).forEach((function(o){var i=t.buildItem(o);e.appendChild(i),!0===o.selected&&t.selectItem(i)})),this.container.appendChild(e)}},{key:"buildPicker",value:function(){var t=this;[].slice.call(this.select.attributes).forEach((function(e){t.container.setAttribute(e.name,e.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var t=this;this.close(),setTimeout((function(){return t.label.focus()}),1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this.container.querySelector(".ql-selected");if(t!==o&&(null!=o&&o.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(t.parentNode.children,t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":i(Event))){var n=document.createEvent("Event");n.initEvent("change",!0,!0),this.select.dispatchEvent(n)}this.close()}}},{key:"update",value:function(){var t=void 0;if(this.select.selectedIndex>-1){var e=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(e)}else this.selectItem(null);var o=null!=t&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",o)}}]),t}();e.default=c},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=g(o(0)),n=g(o(5)),r=o(4),s=g(r),a=g(o(16)),l=g(o(25)),u=g(o(24)),c=g(o(35)),d=g(o(6)),p=g(o(22)),h=g(o(7)),f=g(o(55)),m=g(o(42)),v=g(o(23));function g(t){return t&&t.__esModule?t:{default:t}}n.default.register({"blots/block":s.default,"blots/block/embed":r.BlockEmbed,"blots/break":a.default,"blots/container":l.default,"blots/cursor":u.default,"blots/embed":c.default,"blots/inline":d.default,"blots/scroll":p.default,"blots/text":h.default,"modules/clipboard":f.default,"modules/history":m.default,"modules/keyboard":v.default}),i.default.register(s.default,a.default,u.default,d.default,p.default,h.default),e.default=n.default},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),n=function(){function t(t){this.domNode=t,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(t.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),t.create=function(t){if(null==this.tagName)throw new i.ParchmentError("Blot definition missing tagName");var e;return Array.isArray(this.tagName)?("string"==typeof t&&(t=t.toUpperCase(),parseInt(t).toString()===t&&(t=parseInt(t))),e="number"==typeof t?document.createElement(this.tagName[t-1]):this.tagName.indexOf(t)>-1?document.createElement(t):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e},t.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},t.prototype.clone=function(){var t=this.domNode.cloneNode(!1);return i.create(t)},t.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},t.prototype.deleteAt=function(t,e){this.isolate(t,e).remove()},t.prototype.formatAt=function(t,e,o,n){var r=this.isolate(t,e);if(null!=i.query(o,i.Scope.BLOT)&&n)r.wrap(o,n);else if(null!=i.query(o,i.Scope.ATTRIBUTE)){var s=i.create(this.statics.scope);r.wrap(s),s.format(o,n)}},t.prototype.insertAt=function(t,e,o){var n=null==o?i.create("text",e):i.create(e,o),r=this.split(t);this.parent.insertBefore(n,r)},t.prototype.insertInto=function(t,e){void 0===e&&(e=null),null!=this.parent&&this.parent.children.remove(this);var o=null;t.children.insertBefore(this,e),null!=e&&(o=e.domNode),this.domNode.parentNode==t.domNode&&this.domNode.nextSibling==o||t.domNode.insertBefore(this.domNode,o),this.parent=t,this.attach()},t.prototype.isolate=function(t,e){var o=this.split(t);return o.split(e),o},t.prototype.length=function(){return 1},t.prototype.offset=function(t){return void 0===t&&(t=this.parent),null==this.parent||this==t?0:this.parent.children.offset(this)+this.parent.offset(t)},t.prototype.optimize=function(t){null!=this.domNode[i.DATA_KEY]&&delete this.domNode[i.DATA_KEY].mutations},t.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},t.prototype.replace=function(t){null!=t.parent&&(t.parent.insertBefore(this,t.next),t.remove())},t.prototype.replaceWith=function(t,e){var o="string"==typeof t?i.create(t,e):t;return o.replace(this),o},t.prototype.split=function(t,e){return 0===t?this:this.next},t.prototype.update=function(t,e){},t.prototype.wrap=function(t,e){var o="string"==typeof t?i.create(t,e):t;return null!=this.parent&&this.parent.insertBefore(o,this.next),o.appendChild(this),o},t.blotName="abstract",t}();e.default=n},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=o(12),n=o(32),r=o(33),s=o(1),a=function(){function t(t){this.attributes={},this.domNode=t,this.build()}return t.prototype.attribute=function(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])},t.prototype.build=function(){var t=this;this.attributes={};var e=i.default.keys(this.domNode),o=n.default.keys(this.domNode),a=r.default.keys(this.domNode);e.concat(o).concat(a).forEach((function(e){var o=s.query(e,s.Scope.ATTRIBUTE);o instanceof i.default&&(t.attributes[o.attrName]=o)}))},t.prototype.copy=function(t){var e=this;Object.keys(this.attributes).forEach((function(o){var i=e.attributes[o].value(e.domNode);t.format(o,i)}))},t.prototype.move=function(t){var e=this;this.copy(t),Object.keys(this.attributes).forEach((function(t){e.attributes[t].remove(e.domNode)})),this.attributes={}},t.prototype.values=function(){var t=this;return Object.keys(this.attributes).reduce((function(e,o){return e[o]=t.attributes[o].value(t.domNode),e}),{})},t}();e.default=a},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});function r(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter((function(t){return 0===t.indexOf(e+"-")}))}Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.keys=function(t){return(t.getAttribute("class")||"").split(/\s+/).map((function(t){return t.split("-").slice(0,-1).join("-")}))},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(this.keyName+"-"+e),!0)},e.prototype.remove=function(t){r(t,this.keyName).forEach((function(e){t.classList.remove(e)})),0===t.classList.length&&t.removeAttribute("class")},e.prototype.value=function(t){var e=(r(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""},e}(o(12).default);e.default=s},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});function r(t){var e=t.split("-"),o=e.slice(1).map((function(t){return t[0].toUpperCase()+t.slice(1)})).join("");return e[0]+o}Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.keys=function(t){return(t.getAttribute("style")||"").split(";").map((function(t){return t.split(":")[0].trim()}))},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.style[r(this.keyName)]=e,!0)},e.prototype.remove=function(t){t.style[r(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")},e.prototype.value=function(t){var e=t.style[r(this.keyName)];return this.canAdd(t,e)?e:""},e}(o(12).default);e.default=s},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}();var n=function(){function t(e,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.quill=e,this.options=o,this.modules={}}return i(t,[{key:"init",value:function(){var t=this;Object.keys(this.options.modules).forEach((function(e){null==t.modules[e]&&t.addModule(e)}))}},{key:"addModule",value:function(t){var e=this.quill.constructor.import("modules/"+t);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}]),t}();n.DEFAULTS={modules:{}},n.themes={default:n},e.default=n},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),n=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},r=a(o(0)),s=a(o(7));function a(t){return t&&t.__esModule?t:{default:t}}var l="\ufeff",u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o.contentNode=document.createElement("span"),o.contentNode.setAttribute("contenteditable",!1),[].slice.call(o.domNode.childNodes).forEach((function(t){o.contentNode.appendChild(t)})),o.leftGuard=document.createTextNode(l),o.rightGuard=document.createTextNode(l),o.domNode.appendChild(o.leftGuard),o.domNode.appendChild(o.contentNode),o.domNode.appendChild(o.rightGuard),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"index",value:function(t,o){return t===this.leftGuard?0:t===this.rightGuard?1:n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"index",this).call(this,t,o)}},{key:"restore",value:function(t){var e=void 0,o=void 0,i=t.data.split(l).join("");if(t===this.leftGuard)if(this.prev instanceof s.default){var n=this.prev.length();this.prev.insertAt(n,i),e={startNode:this.prev.domNode,startOffset:n+i.length}}else o=document.createTextNode(i),this.parent.insertBefore(r.default.create(o),this),e={startNode:o,startOffset:i.length};else t===this.rightGuard&&(this.next instanceof s.default?(this.next.insertAt(0,i),e={startNode:this.next.domNode,startOffset:i.length}):(o=document.createTextNode(i),this.parent.insertBefore(r.default.create(o),this.next),e={startNode:o,startOffset:i.length}));return t.data=l,e}},{key:"update",value:function(t,e){var o=this;t.forEach((function(t){if("characterData"===t.type&&(t.target===o.leftGuard||t.target===o.rightGuard)){var i=o.restore(t.target);i&&(e.range=i)}}))}}]),e}(r.default.Embed);e.default=u},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.AlignStyle=e.AlignClass=e.AlignAttribute=void 0;var i,n=o(0),r=(i=n)&&i.__esModule?i:{default:i};var s={scope:r.default.Scope.BLOCK,whitelist:["right","center","justify"]},a=new r.default.Attributor.Attribute("align","align",s),l=new r.default.Attributor.Class("align","ql-align",s),u=new r.default.Attributor.Style("align","text-align",s);e.AlignAttribute=a,e.AlignClass=l,e.AlignStyle=u},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.BackgroundStyle=e.BackgroundClass=void 0;var i,n=o(0),r=(i=n)&&i.__esModule?i:{default:i},s=o(26);var a=new r.default.Attributor.Class("background","ql-bg",{scope:r.default.Scope.INLINE}),l=new s.ColorAttributor("background","background-color",{scope:r.default.Scope.INLINE});e.BackgroundClass=a,e.BackgroundStyle=l},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.DirectionStyle=e.DirectionClass=e.DirectionAttribute=void 0;var i,n=o(0),r=(i=n)&&i.__esModule?i:{default:i};var s={scope:r.default.Scope.BLOCK,whitelist:["rtl"]},a=new r.default.Attributor.Attribute("direction","dir",s),l=new r.default.Attributor.Class("direction","ql-direction",s),u=new r.default.Attributor.Style("direction","direction",s);e.DirectionAttribute=a,e.DirectionClass=l,e.DirectionStyle=u},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.FontClass=e.FontStyle=void 0;var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(0),a=(i=s)&&i.__esModule?i:{default:i};function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c={scope:a.default.Scope.INLINE,whitelist:["serif","monospace"]},d=new a.default.Attributor.Class("font","ql-font",c),p=function(t){function e(){return l(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"value",value:function(t){return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t).replace(/["']/g,"")}}]),e}(a.default.Attributor.Style),h=new p("font","font-family",c);e.FontStyle=h,e.FontClass=d},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.SizeStyle=e.SizeClass=void 0;var i,n=o(0),r=(i=n)&&i.__esModule?i:{default:i};var s=new r.default.Attributor.Class("size","ql-size",{scope:r.default.Scope.INLINE,whitelist:["small","large","huge"]}),a=new r.default.Attributor.Style("size","font-size",{scope:r.default.Scope.INLINE,whitelist:["10px","18px","32px"]});e.SizeClass=s,e.SizeStyle=a},function(t,e,o){t.exports={align:{"":o(76),center:o(77),right:o(78),justify:o(79)},background:o(80),blockquote:o(81),bold:o(82),clean:o(83),code:o(58),"code-block":o(58),color:o(84),direction:{"":o(85),rtl:o(86)},float:{center:o(87),full:o(88),left:o(89),right:o(90)},formula:o(91),header:{1:o(92),2:o(93)},italic:o(94),image:o(95),indent:{"+1":o(96),"-1":o(97)},link:o(98),list:{ordered:o(99),bullet:o(100),check:o(101)},script:{sub:o(102),super:o(103)},strike:o(104),underline:o(105),video:o(106)}},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.getLastChangeIndex=e.default=void 0;var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),n=s(o(0)),r=s(o(5));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(t,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));return i.lastRecorded=0,i.ignoreChange=!1,i.clear(),i.quill.on(r.default.events.EDITOR_CHANGE,(function(t,e,o,n){t!==r.default.events.TEXT_CHANGE||i.ignoreChange||(i.options.userOnly&&n!==r.default.sources.USER?i.transform(e):i.record(e,o))})),i.quill.keyboard.addBinding({key:"Z",shortKey:!0},i.undo.bind(i)),i.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},i.redo.bind(i)),/Win/i.test(navigator.platform)&&i.quill.keyboard.addBinding({key:"Y",shortKey:!0},i.redo.bind(i)),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"change",value:function(t,e){if(0!==this.stack[t].length){var o=this.stack[t].pop();this.stack[e].push(o),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(o[t],r.default.sources.USER),this.ignoreChange=!1;var i=l(o[t]);this.quill.setSelection(i)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(t,e){if(0!==t.ops.length){this.stack.redo=[];var o=this.quill.getContents().diff(e),i=Date.now();if(this.lastRecorded+this.options.delay>i&&this.stack.undo.length>0){var n=this.stack.undo.pop();o=o.compose(n.undo),t=n.redo.compose(t)}else this.lastRecorded=i;this.stack.undo.push({redo:t,undo:o}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(t){this.stack.undo.forEach((function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)})),this.stack.redo.forEach((function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)}))}},{key:"undo",value:function(){this.change("undo","redo")}}]),e}(s(o(9)).default);function l(t){var e=t.reduce((function(t,e){return t+=e.delete||0}),0),o=t.length()-e;return function(t){var e=t.ops[t.ops.length-1];return null!=e&&(null!=e.insert?"string"==typeof e.insert&&e.insert.endsWith("\n"):null!=e.attributes&&Object.keys(e.attributes).some((function(t){return null!=n.default.query(t,n.default.Scope.BLOCK)})))}(t)&&(o-=1),o}a.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},e.default=a,e.getLastChangeIndex=l},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BaseTooltip=void 0;var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),n=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},r=f(o(3)),s=f(o(2)),a=f(o(8)),l=f(o(23)),u=f(o(34)),c=f(o(59)),d=f(o(60)),p=f(o(28)),h=f(o(61));function f(t){return t&&t.__esModule?t:{default:t}}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var b=[!1,"center","right","justify"],y=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],x=[!1,"serif","monospace"],w=["1","2","3",!1],E=["small",!1,"large","huge"],O=function(t){function e(t,o){m(this,e);var i=v(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));return t.emitter.listenDOM("click",document.body,(function e(o){if(!document.body.contains(t.root))return document.body.removeEventListener("click",e);null==i.tooltip||i.tooltip.root.contains(o.target)||document.activeElement===i.tooltip.textbox||i.quill.hasFocus()||i.tooltip.hide(),null!=i.pickers&&i.pickers.forEach((function(t){t.container.contains(o.target)||t.close()}))})),i}return g(e,t),i(e,[{key:"addModule",value:function(t){var o=n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addModule",this).call(this,t);return"toolbar"===t&&this.extendToolbar(o),o}},{key:"buildButtons",value:function(t,e){t.forEach((function(t){(t.getAttribute("class")||"").split(/\s+/).forEach((function(o){if(o.startsWith("ql-")&&(o=o.slice("ql-".length),null!=e[o]))if("direction"===o)t.innerHTML=e[o][""]+e[o].rtl;else if("string"==typeof e[o])t.innerHTML=e[o];else{var i=t.value||"";null!=i&&e[o][i]&&(t.innerHTML=e[o][i])}}))}))}},{key:"buildPickers",value:function(t,e){var o=this;this.pickers=t.map((function(t){if(t.classList.contains("ql-align"))return null==t.querySelector("option")&&_(t,b),new d.default(t,e.align);if(t.classList.contains("ql-background")||t.classList.contains("ql-color")){var o=t.classList.contains("ql-background")?"background":"color";return null==t.querySelector("option")&&_(t,y,"background"===o?"#ffffff":"#000000"),new c.default(t,e[o])}return null==t.querySelector("option")&&(t.classList.contains("ql-font")?_(t,x):t.classList.contains("ql-header")?_(t,w):t.classList.contains("ql-size")&&_(t,E)),new p.default(t)}));this.quill.on(a.default.events.EDITOR_CHANGE,(function(){o.pickers.forEach((function(t){t.update()}))}))}}]),e}(u.default);O.DEFAULTS=(0,r.default)(!0,{},u.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var t=this,e=this.container.querySelector("input.ql-image[type=file]");null==e&&((e=document.createElement("input")).setAttribute("type","file"),e.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),e.classList.add("ql-image"),e.addEventListener("change",(function(){if(null!=e.files&&null!=e.files[0]){var o=new FileReader;o.onload=function(o){var i=t.quill.getSelection(!0);t.quill.updateContents((new s.default).retain(i.index).delete(i.length).insert({image:o.target.result}),a.default.sources.USER),t.quill.setSelection(i.index+1,a.default.sources.SILENT),e.value=""},o.readAsDataURL(e.files[0])}})),this.container.appendChild(e)),e.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var q=function(t){function e(t,o){m(this,e);var i=v(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));return i.textbox=i.root.querySelector('input[type="text"]'),i.listen(),i}return g(e,t),i(e,[{key:"listen",value:function(){var t=this;this.textbox.addEventListener("keydown",(function(e){l.default.match(e,"enter")?(t.save(),e.preventDefault()):l.default.match(e,"escape")&&(t.cancel(),e.preventDefault())}))}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+t)||""),this.root.setAttribute("data-mode",t)}},{key:"restoreFocus",value:function(){var t=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=t}},{key:"save",value:function(){var t=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var e=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,a.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,a.default.sources.USER)),this.quill.root.scrollTop=e;break;case"video":t=function(t){var e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);if(e)return(e[1]||"https")+"://www.youtube.com/embed/"+e[2]+"?showinfo=0";if(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))return(e[1]||"https")+"://player.vimeo.com/video/"+e[2]+"/";return t}(t);case"formula":if(!t)break;var o=this.quill.getSelection(!0);if(null!=o){var i=o.index+o.length;this.quill.insertEmbed(i,this.root.getAttribute("data-mode"),t,a.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(i+1," ",a.default.sources.USER),this.quill.setSelection(i+2,a.default.sources.USER)}}this.textbox.value="",this.hide()}}]),e}(h.default);function _(t,e){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.forEach((function(e){var i=document.createElement("option");e===o?i.setAttribute("selected","selected"):i.setAttribute("value",e),t.appendChild(i)}))}e.BaseTooltip=q,e.default=O},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.head=this.tail=null,this.length=0}return t.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.insertBefore(t[0],null),t.length>1&&this.append.apply(this,t.slice(1))},t.prototype.contains=function(t){for(var e,o=this.iterator();e=o();)if(e===t)return!0;return!1},t.prototype.insertBefore=function(t,e){t&&(t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)},t.prototype.offset=function(t){for(var e=0,o=this.head;null!=o;){if(o===t)return e;e+=o.length(),o=o.next}return-1},t.prototype.remove=function(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)},t.prototype.iterator=function(t){return void 0===t&&(t=this.head),function(){var e=t;return null!=t&&(t=t.next),e}},t.prototype.find=function(t,e){void 0===e&&(e=!1);for(var o,i=this.iterator();o=i();){var n=o.length();if(t<n||e&&t===n&&(null==o.next||0!==o.next.length()))return[o,t];t-=n}return[null,0]},t.prototype.forEach=function(t){for(var e,o=this.iterator();e=o();)t(e)},t.prototype.forEachAt=function(t,e,o){if(!(e<=0))for(var i,n=this.find(t),r=n[0],s=t-n[1],a=this.iterator(r);(i=a())&&s<t+e;){var l=i.length();t>s?o(i,t-s,Math.min(e,s+l-t)):o(i,0,Math.min(l,t+e-s)),s+=l}},t.prototype.map=function(t){return this.reduce((function(e,o){return e.push(t(o)),e}),[])},t.prototype.reduce=function(t,e){for(var o,i=this.iterator();o=i();)e=t(e,o);return e},t}();e.default=i},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o(17),s=o(1),a={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},l=function(t){function e(e){var o=t.call(this,e)||this;return o.scroll=o,o.observer=new MutationObserver((function(t){o.update(t)})),o.observer.observe(o.domNode,a),o.attach(),o}return n(e,t),e.prototype.detach=function(){t.prototype.detach.call(this),this.observer.disconnect()},e.prototype.deleteAt=function(e,o){this.update(),0===e&&o===this.length()?this.children.forEach((function(t){t.remove()})):t.prototype.deleteAt.call(this,e,o)},e.prototype.formatAt=function(e,o,i,n){this.update(),t.prototype.formatAt.call(this,e,o,i,n)},e.prototype.insertAt=function(e,o,i){this.update(),t.prototype.insertAt.call(this,e,o,i)},e.prototype.optimize=function(e,o){var i=this;void 0===e&&(e=[]),void 0===o&&(o={}),t.prototype.optimize.call(this,o);for(var n=[].slice.call(this.observer.takeRecords());n.length>0;)e.push(n.pop());for(var a=function(t,e){void 0===e&&(e=!0),null!=t&&t!==i&&null!=t.domNode.parentNode&&(null==t.domNode[s.DATA_KEY].mutations&&(t.domNode[s.DATA_KEY].mutations=[]),e&&a(t.parent))},l=function(t){null!=t.domNode[s.DATA_KEY]&&null!=t.domNode[s.DATA_KEY].mutations&&(t instanceof r.default&&t.children.forEach(l),t.optimize(o))},u=e,c=0;u.length>0;c+=1){if(c>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(u.forEach((function(t){var e=s.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(a(s.find(t.previousSibling,!1)),[].forEach.call(t.addedNodes,(function(t){var e=s.find(t,!1);a(e,!1),e instanceof r.default&&e.children.forEach((function(t){a(t,!1)}))}))):"attributes"===t.type&&a(e.prev)),a(e))})),this.children.forEach(l),n=(u=[].slice.call(this.observer.takeRecords())).slice();n.length>0;)e.push(n.pop())}},e.prototype.update=function(e,o){var i=this;void 0===o&&(o={}),(e=e||this.observer.takeRecords()).map((function(t){var e=s.find(t.target,!0);return null==e?null:null==e.domNode[s.DATA_KEY].mutations?(e.domNode[s.DATA_KEY].mutations=[t],e):(e.domNode[s.DATA_KEY].mutations.push(t),null)})).forEach((function(t){null!=t&&t!==i&&null!=t.domNode[s.DATA_KEY]&&t.update(t.domNode[s.DATA_KEY].mutations||[],o)})),null!=this.domNode[s.DATA_KEY].mutations&&t.prototype.update.call(this,this.domNode[s.DATA_KEY].mutations,o),this.optimize(e,o)},e.blotName="scroll",e.defaultChild="block",e.scope=s.Scope.BLOCK_BLOT,e.tagName="DIV",e}(r.default);e.default=l},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o(18),s=o(1);var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.formats=function(o){if(o.tagName!==e.tagName)return t.formats.call(this,o)},e.prototype.format=function(o,i){var n=this;o!==this.statics.blotName||i?t.prototype.format.call(this,o,i):(this.children.forEach((function(t){t instanceof r.default||(t=t.wrap(e.blotName,!0)),n.attributes.copy(t)})),this.unwrap())},e.prototype.formatAt=function(e,o,i,n){null!=this.formats()[i]||s.query(i,s.Scope.ATTRIBUTE)?this.isolate(e,o).format(i,n):t.prototype.formatAt.call(this,e,o,i,n)},e.prototype.optimize=function(o){t.prototype.optimize.call(this,o);var i=this.formats();if(0===Object.keys(i).length)return this.unwrap();var n=this.next;n instanceof e&&n.prev===this&&function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var o in t)if(t[o]!==e[o])return!1;return!0}(i,n.formats())&&(n.moveChildren(this),n.remove())},e.blotName="inline",e.scope=s.Scope.INLINE_BLOT,e.tagName="SPAN",e}(r.default);e.default=a},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o(18),s=o(1),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.formats=function(o){var i=s.query(e.blotName).tagName;if(o.tagName!==i)return t.formats.call(this,o)},e.prototype.format=function(o,i){null!=s.query(o,s.Scope.BLOCK)&&(o!==this.statics.blotName||i?t.prototype.format.call(this,o,i):this.replaceWith(e.blotName))},e.prototype.formatAt=function(e,o,i,n){null!=s.query(i,s.Scope.BLOCK)?this.format(i,n):t.prototype.formatAt.call(this,e,o,i,n)},e.prototype.insertAt=function(e,o,i){if(null==i||null!=s.query(o,s.Scope.INLINE))t.prototype.insertAt.call(this,e,o,i);else{var n=this.split(e),r=s.create(o,i);n.parent.insertBefore(r,n)}},e.prototype.update=function(e,o){navigator.userAgent.match(/Trident/)?this.build():t.prototype.update.call(this,e,o)},e.blotName="block",e.scope=s.Scope.BLOCK_BLOT,e.tagName="P",e}(r.default);e.default=a},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.formats=function(t){},e.prototype.format=function(e,o){t.prototype.formatAt.call(this,0,this.length(),e,o)},e.prototype.formatAt=function(e,o,i,n){0===e&&o===this.length()?this.format(i,n):t.prototype.formatAt.call(this,e,o,i,n)},e.prototype.formats=function(){return this.statics.formats(this.domNode)},e}(o(19).default);e.default=r},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o(19),s=o(1),a=function(t){function e(e){var o=t.call(this,e)||this;return o.text=o.statics.value(o.domNode),o}return n(e,t),e.create=function(t){return document.createTextNode(t)},e.value=function(t){var e=t.data;return e.normalize&&(e=e.normalize()),e},e.prototype.deleteAt=function(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)},e.prototype.index=function(t,e){return this.domNode===t?e:-1},e.prototype.insertAt=function(e,o,i){null==i?(this.text=this.text.slice(0,e)+o+this.text.slice(e),this.domNode.data=this.text):t.prototype.insertAt.call(this,e,o,i)},e.prototype.length=function(){return this.text.length},e.prototype.optimize=function(o){t.prototype.optimize.call(this,o),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof e&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},e.prototype.position=function(t,e){return[this.domNode,t]},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var o=s.create(this.domNode.splitText(t));return this.parent.insertBefore(o,this.next),this.text=this.statics.value(this.domNode),o},e.prototype.update=function(t,e){var o=this;t.some((function(t){return"characterData"===t.type&&t.target===o.domNode}))&&(this.text=this.statics.value(this.domNode))},e.prototype.value=function(){return this.text},e.blotName="text",e.scope=s.Scope.INLINE_BLOT,e}(r.default);e.default=a},function(t,e,o){var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return arguments.length>1&&!this.contains(t)==!e?e:n.call(this,t)}}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var o=this.toString();("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>o.length)&&(e=o.length),e-=t.length;var i=o.indexOf(t,e);return-1!==i&&i===e}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,o=Object(this),i=o.length>>>0,n=arguments[1],r=0;r<i;r++)if(e=o[r],t.call(n,e,r,o))return e}}),document.addEventListener("DOMContentLoaded",(function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)}))},function(t,e){var o=-1;function i(t,e,l){if(t==e)return t?[[0,t]]:[];(l<0||t.length<l)&&(l=null);var c=r(t,e),d=t.substring(0,c);c=s(t=t.substring(c),e=e.substring(c));var p=t.substring(t.length-c),h=function(t,e){var a;if(!t)return[[1,e]];if(!e)return[[o,t]];var l=t.length>e.length?t:e,u=t.length>e.length?e:t,c=l.indexOf(u);if(-1!=c)return a=[[1,l.substring(0,c)],[0,u],[1,l.substring(c+u.length)]],t.length>e.length&&(a[0][0]=a[2][0]=o),a;if(1==u.length)return[[o,t],[1,e]];var d=function(t,e){var o=t.length>e.length?t:e,i=t.length>e.length?e:t;if(o.length<4||2*i.length<o.length)return null;function n(t,e,o){for(var i,n,a,l,u=t.substring(o,o+Math.floor(t.length/4)),c=-1,d="";-1!=(c=e.indexOf(u,c+1));){var p=r(t.substring(o),e.substring(c)),h=s(t.substring(0,o),e.substring(0,c));d.length<h+p&&(d=e.substring(c-h,c)+e.substring(c,c+p),i=t.substring(0,o-h),n=t.substring(o+p),a=e.substring(0,c-h),l=e.substring(c+p))}return 2*d.length>=t.length?[i,n,a,l,d]:null}var a,l,u,c,d,p=n(o,i,Math.ceil(o.length/4)),h=n(o,i,Math.ceil(o.length/2));if(!p&&!h)return null;a=h?p&&p[4].length>h[4].length?p:h:p;t.length>e.length?(l=a[0],u=a[1],c=a[2],d=a[3]):(c=a[0],d=a[1],l=a[2],u=a[3]);var f=a[4];return[l,u,c,d,f]}(t,e);if(d){var p=d[0],h=d[1],f=d[2],m=d[3],v=d[4],g=i(p,f),b=i(h,m);return g.concat([[0,v]],b)}return function(t,e){for(var i=t.length,r=e.length,s=Math.ceil((i+r)/2),a=s,l=2*s,u=new Array(l),c=new Array(l),d=0;d<l;d++)u[d]=-1,c[d]=-1;u[a+1]=0,c[a+1]=0;for(var p=i-r,h=p%2!=0,f=0,m=0,v=0,g=0,b=0;b<s;b++){for(var y=-b+f;y<=b-m;y+=2){for(var x=a+y,w=(A=y==-b||y!=b&&u[x-1]<u[x+1]?u[x+1]:u[x-1]+1)-y;A<i&&w<r&&t.charAt(A)==e.charAt(w);)A++,w++;if(u[x]=A,A>i)m+=2;else if(w>r)f+=2;else if(h){if((q=a+p-y)>=0&&q<l&&-1!=c[q])if(A>=(O=i-c[q]))return n(t,e,A,w)}}for(var E=-b+v;E<=b-g;E+=2){for(var O,q=a+E,_=(O=E==-b||E!=b&&c[q-1]<c[q+1]?c[q+1]:c[q-1]+1)-E;O<i&&_<r&&t.charAt(i-O-1)==e.charAt(r-_-1);)O++,_++;if(c[q]=O,O>i)g+=2;else if(_>r)v+=2;else if(!h){if((x=a+p-E)>=0&&x<l&&-1!=u[x]){var A;w=a+(A=u[x])-x;if(A>=(O=i-O))return n(t,e,A,w)}}}}return[[o,t],[1,e]]}(t,e)}(t=t.substring(0,t.length-c),e=e.substring(0,e.length-c));return d&&h.unshift([0,d]),p&&h.push([0,p]),a(h),null!=l&&(h=function(t,e){var i=function(t,e){if(0===e)return[0,t];for(var i=0,n=0;n<t.length;n++){var r=t[n];if(r[0]===o||0===r[0]){var s=i+r[1].length;if(e===s)return[n+1,t];if(e<s){t=t.slice();var a=e-i,l=[r[0],r[1].slice(0,a)],u=[r[0],r[1].slice(a)];return t.splice(n,1,l,u),[n+1,t]}i=s}}throw new Error("cursor_pos is out of bounds!")}(t,e),n=i[1],r=i[0],s=n[r],a=n[r+1];if(null==s)return t;if(0!==s[0])return t;if(null!=a&&s[1]+a[1]===a[1]+s[1])return n.splice(r,2,a,s),u(n,r,2);if(null!=a&&0===a[1].indexOf(s[1])){n.splice(r,2,[a[0],s[1]],[0,s[1]]);var l=a[1].slice(s[1].length);return l.length>0&&n.splice(r+2,0,[a[0],l]),u(n,r,3)}return t}(h,l)),h=function(t){for(var e=!1,i=function(t){return t.charCodeAt(0)>=56320&&t.charCodeAt(0)<=57343},n=function(t){return t.charCodeAt(t.length-1)>=55296&&t.charCodeAt(t.length-1)<=56319},r=2;r<t.length;r+=1)0===t[r-2][0]&&n(t[r-2][1])&&t[r-1][0]===o&&i(t[r-1][1])&&1===t[r][0]&&i(t[r][1])&&(e=!0,t[r-1][1]=t[r-2][1].slice(-1)+t[r-1][1],t[r][1]=t[r-2][1].slice(-1)+t[r][1],t[r-2][1]=t[r-2][1].slice(0,-1));if(!e)return t;var s=[];for(r=0;r<t.length;r+=1)t[r][1].length>0&&s.push(t[r]);return s}(h)}function n(t,e,o,n){var r=t.substring(0,o),s=e.substring(0,n),a=t.substring(o),l=e.substring(n),u=i(r,s),c=i(a,l);return u.concat(c)}function r(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var o=0,i=Math.min(t.length,e.length),n=i,r=0;o<n;)t.substring(r,n)==e.substring(r,n)?r=o=n:i=n,n=Math.floor((i-o)/2+o);return n}function s(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var o=0,i=Math.min(t.length,e.length),n=i,r=0;o<n;)t.substring(t.length-n,t.length-r)==e.substring(e.length-n,e.length-r)?r=o=n:i=n,n=Math.floor((i-o)/2+o);return n}function a(t){t.push([0,""]);for(var e,i=0,n=0,l=0,u="",c="";i<t.length;)switch(t[i][0]){case 1:l++,c+=t[i][1],i++;break;case o:n++,u+=t[i][1],i++;break;case 0:n+l>1?(0!==n&&0!==l&&(0!==(e=r(c,u))&&(i-n-l>0&&0==t[i-n-l-1][0]?t[i-n-l-1][1]+=c.substring(0,e):(t.splice(0,0,[0,c.substring(0,e)]),i++),c=c.substring(e),u=u.substring(e)),0!==(e=s(c,u))&&(t[i][1]=c.substring(c.length-e)+t[i][1],c=c.substring(0,c.length-e),u=u.substring(0,u.length-e))),0===n?t.splice(i-l,n+l,[1,c]):0===l?t.splice(i-n,n+l,[o,u]):t.splice(i-n-l,n+l,[o,u],[1,c]),i=i-n-l+(n?1:0)+(l?1:0)+1):0!==i&&0==t[i-1][0]?(t[i-1][1]+=t[i][1],t.splice(i,1)):i++,l=0,n=0,u="",c=""}""===t[t.length-1][1]&&t.pop();var d=!1;for(i=1;i<t.length-1;)0==t[i-1][0]&&0==t[i+1][0]&&(t[i][1].substring(t[i][1].length-t[i-1][1].length)==t[i-1][1]?(t[i][1]=t[i-1][1]+t[i][1].substring(0,t[i][1].length-t[i-1][1].length),t[i+1][1]=t[i-1][1]+t[i+1][1],t.splice(i-1,1),d=!0):t[i][1].substring(0,t[i+1][1].length)==t[i+1][1]&&(t[i-1][1]+=t[i+1][1],t[i][1]=t[i][1].substring(t[i+1][1].length)+t[i+1][1],t.splice(i+1,1),d=!0)),i++;d&&a(t)}var l=i;function u(t,e,o){for(var i=e+o-1;i>=0&&i>=e-1;i--)if(i+1<t.length){var n=t[i],r=t[i+1];n[0]===r[1]&&t.splice(i,2,[n[0],n[1]+r[1]])}return t}l.INSERT=1,l.DELETE=o,l.EQUAL=0,t.exports=l},function(t,e){function o(t){var e=[];for(var o in t)e.push(o);return e}(t.exports="function"==typeof Object.keys?Object.keys:o).shim=o},function(t,e){var o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function i(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function n(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=o?i:n).supported=i,e.unsupported=n},function(t,e){var o=Object.prototype.hasOwnProperty,i="~";function n(){}function r(t,e,o){this.fn=t,this.context=e,this.once=o||!1}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),s.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)o.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},s.prototype.listeners=function(t,e){var o=i?i+t:t,n=this._events[o];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var r=0,s=n.length,a=new Array(s);r<s;r++)a[r]=n[r].fn;return a},s.prototype.emit=function(t,e,o,n,r,s){var a=i?i+t:t;if(!this._events[a])return!1;var l,u,c=this._events[a],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,o),!0;case 4:return c.fn.call(c.context,e,o,n),!0;case 5:return c.fn.call(c.context,e,o,n,r),!0;case 6:return c.fn.call(c.context,e,o,n,r,s),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var p,h=c.length;for(u=0;u<h;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,o);break;case 4:c[u].fn.call(c[u].context,e,o,n);break;default:if(!l)for(p=1,l=new Array(d-1);p<d;p++)l[p-1]=arguments[p];c[u].fn.apply(c[u].context,l)}}return!0},s.prototype.on=function(t,e,o){var n=new r(e,o||this),s=i?i+t:t;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],n]:this._events[s].push(n):(this._events[s]=n,this._eventsCount++),this},s.prototype.once=function(t,e,o){var n=new r(e,o||this,!0),s=i?i+t:t;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],n]:this._events[s].push(n):(this._events[s]=n,this._eventsCount++),this},s.prototype.removeListener=function(t,e,o,r){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return 0==--this._eventsCount?this._events=new n:delete this._events[s],this;var a=this._events[s];if(a.fn)a.fn!==e||r&&!a.once||o&&a.context!==o||(0==--this._eventsCount?this._events=new n:delete this._events[s]);else{for(var l=0,u=[],c=a.length;l<c;l++)(a[l].fn!==e||r&&!a[l].once||o&&a[l].context!==o)&&u.push(a[l]);u.length?this._events[s]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new n:delete this._events[s]}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new n:delete this._events[e])):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prototype.setMaxListeners=function(){return this},s.prefixed=i,s.EventEmitter=s,void 0!==t&&(t.exports=s)},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.matchText=e.matchSpacing=e.matchNewline=e.matchBlot=e.matchAttributor=e.default=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),s=y(o(3)),a=y(o(2)),l=y(o(0)),u=y(o(5)),c=y(o(10)),d=y(o(9)),p=o(36),h=o(37),f=y(o(13)),m=o(26),v=o(38),g=o(39),b=o(40);function y(t){return t&&t.__esModule?t:{default:t}}function x(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var w=(0,c.default)("quill:clipboard"),E="__ql-matcher",O=[[Node.TEXT_NODE,j],[Node.TEXT_NODE,D],["br",function(t,e){N(e,"\n")||e.insert("\n");return e}],[Node.ELEMENT_NODE,D],[Node.ELEMENT_NODE,R],[Node.ELEMENT_NODE,L],[Node.ELEMENT_NODE,C],[Node.ELEMENT_NODE,function(t,e){var o={},i=t.style||{};i.fontStyle&&"italic"===I(t).fontStyle&&(o.italic=!0);i.fontWeight&&(I(t).fontWeight.startsWith("bold")||parseInt(I(t).fontWeight)>=700)&&(o.bold=!0);Object.keys(o).length>0&&(e=S(e,o));parseFloat(i.textIndent||0)>0&&(e=(new a.default).insert("\t").concat(e));return e}],["li",function(t,e){var o=l.default.query(t);if(null==o||"list-item"!==o.blotName||!N(e,"\n"))return e;var i=-1,n=t.parentNode;for(;!n.classList.contains("ql-clipboard");)"list"===(l.default.query(n)||{}).blotName&&(i+=1),n=n.parentNode;return i<=0?e:e.compose((new a.default).retain(e.length()-1).retain(1,{indent:i}))}],["b",T.bind(T,"bold")],["i",T.bind(T,"italic")],["style",function(){return new a.default}]],q=[p.AlignAttribute,v.DirectionAttribute].reduce((function(t,e){return t[e.keyName]=e,t}),{}),_=[p.AlignStyle,h.BackgroundStyle,m.ColorStyle,v.DirectionStyle,g.FontStyle,b.SizeStyle].reduce((function(t,e){return t[e.keyName]=e,t}),{}),A=function(t){function e(t,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));return i.quill.root.addEventListener("paste",i.onPaste.bind(i)),i.container=i.quill.addContainer("ql-clipboard"),i.container.setAttribute("contenteditable",!0),i.container.setAttribute("tabindex",-1),i.matchers=[],O.concat(i.options.matchers).forEach((function(t){var e=n(t,2),r=e[0],s=e[1];(o.matchVisual||s!==L)&&i.addMatcher(r,s)})),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"addMatcher",value:function(t,e){this.matchers.push([t,e])}},{key:"convert",value:function(t){if("string"==typeof t)return this.container.innerHTML=t.replace(/\>\r?\n +\</g,"><"),this.convert();var e=this.quill.getFormat(this.quill.selection.savedRange.index);if(e[f.default.blotName]){var o=this.container.innerText;return this.container.innerHTML="",(new a.default).insert(o,x({},f.default.blotName,e[f.default.blotName]))}var i=this.prepareMatching(),r=n(i,2),s=r[0],l=r[1],u=P(this.container,s,l);return N(u,"\n")&&null==u.ops[u.ops.length-1].attributes&&(u=u.compose((new a.default).retain(u.length()-1).delete(1))),w.log("convert",this.container.innerHTML,u),this.container.innerHTML="",u}},{key:"dangerouslyPasteHTML",value:function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.default.sources.API;if("string"==typeof t)this.quill.setContents(this.convert(t),e),this.quill.setSelection(0,u.default.sources.SILENT);else{var i=this.convert(e);this.quill.updateContents((new a.default).retain(t).concat(i),o),this.quill.setSelection(t+i.length(),u.default.sources.SILENT)}}},{key:"onPaste",value:function(t){var e=this;if(!t.defaultPrevented&&this.quill.isEnabled()){var o=this.quill.getSelection(),i=(new a.default).retain(o.index),n=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(u.default.sources.SILENT),setTimeout((function(){i=i.concat(e.convert()).delete(o.length),e.quill.updateContents(i,u.default.sources.USER),e.quill.setSelection(i.length()-o.length,u.default.sources.SILENT),e.quill.scrollingContainer.scrollTop=n,e.quill.focus()}),1)}}},{key:"prepareMatching",value:function(){var t=this,e=[],o=[];return this.matchers.forEach((function(i){var r=n(i,2),s=r[0],a=r[1];switch(s){case Node.TEXT_NODE:o.push(a);break;case Node.ELEMENT_NODE:e.push(a);break;default:[].forEach.call(t.container.querySelectorAll(s),(function(t){t[E]=t[E]||[],t[E].push(a)}))}})),[e,o]}}]),e}(d.default);function S(t,e,o){return"object"===(void 0===e?"undefined":i(e))?Object.keys(e).reduce((function(t,o){return S(t,o,e[o])}),t):t.reduce((function(t,i){return i.attributes&&i.attributes[e]?t.push(i):t.insert(i.insert,(0,s.default)({},x({},e,o),i.attributes))}),new a.default)}function I(t){if(t.nodeType!==Node.ELEMENT_NODE)return{};var e="__ql-computed-style";return t[e]||(t[e]=window.getComputedStyle(t))}function N(t,e){for(var o="",i=t.ops.length-1;i>=0&&o.length<e.length;--i){var n=t.ops[i];if("string"!=typeof n.insert)break;o=n.insert+o}return o.slice(-1*e.length)===e}function k(t){if(0===t.childNodes.length)return!1;var e=I(t);return["block","list-item"].indexOf(e.display)>-1}function P(t,e,o){return t.nodeType===t.TEXT_NODE?o.reduce((function(e,o){return o(t,e)}),new a.default):t.nodeType===t.ELEMENT_NODE?[].reduce.call(t.childNodes||[],(function(i,n){var r=P(n,e,o);return n.nodeType===t.ELEMENT_NODE&&(r=e.reduce((function(t,e){return e(n,t)}),r),r=(n[E]||[]).reduce((function(t,e){return e(n,t)}),r)),i.concat(r)}),new a.default):new a.default}function T(t,e,o){return S(o,t,!0)}function C(t,e){var o=l.default.Attributor.Attribute.keys(t),i=l.default.Attributor.Class.keys(t),n=l.default.Attributor.Style.keys(t),r={};return o.concat(i).concat(n).forEach((function(e){var o=l.default.query(e,l.default.Scope.ATTRIBUTE);null!=o&&(r[o.attrName]=o.value(t),r[o.attrName])||(null==(o=q[e])||o.attrName!==e&&o.keyName!==e||(r[o.attrName]=o.value(t)||void 0),null==(o=_[e])||o.attrName!==e&&o.keyName!==e||(o=_[e],r[o.attrName]=o.value(t)||void 0))})),Object.keys(r).length>0&&(e=S(e,r)),e}function R(t,e){var o=l.default.query(t);if(null==o)return e;if(o.prototype instanceof l.default.Embed){var i={},n=o.value(t);null!=n&&(i[o.blotName]=n,e=(new a.default).insert(i,o.formats(t)))}else"function"==typeof o.formats&&(e=S(e,o.blotName,o.formats(t)));return e}function D(t,e){return N(e,"\n")||(k(t)||e.length()>0&&t.nextSibling&&k(t.nextSibling))&&e.insert("\n"),e}function L(t,e){if(k(t)&&null!=t.nextElementSibling&&!N(e,"\n\n")){var o=t.offsetHeight+parseFloat(I(t).marginTop)+parseFloat(I(t).marginBottom);t.nextElementSibling.offsetTop>t.offsetTop+1.5*o&&e.insert("\n")}return e}function j(t,e){var o=t.data;if("O:P"===t.parentNode.tagName)return e.insert(o.trim());if(0===o.trim().length&&t.parentNode.classList.contains("ql-clipboard"))return e;if(!I(t.parentNode).whiteSpace.startsWith("pre")){var i=function(t,e){return(e=e.replace(/[^\u00a0]/g,"")).length<1&&t?" ":e};o=(o=o.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,i.bind(i,!0)),(null==t.previousSibling&&k(t.parentNode)||null!=t.previousSibling&&k(t.previousSibling))&&(o=o.replace(/^\s+/,i.bind(i,!1))),(null==t.nextSibling&&k(t.parentNode)||null!=t.nextSibling&&k(t.nextSibling))&&(o=o.replace(/\s+$/,i.bind(i,!1)))}return e.insert(o)}A.DEFAULTS={matchers:[],matchVisual:!0},e.default=A,e.matchAttributor=C,e.matchBlot=R,e.matchNewline=D,e.matchSpacing=L,e.matchText=j},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(6);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u=function(t){function e(){return a(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"optimize",value:function(t){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return r(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),e}(((i=s)&&i.__esModule?i:{default:i}).default);u.blotName="bold",u.tagName=["STRONG","B"],e.default=u},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.addControls=e.default=void 0;var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=c(o(2)),s=c(o(0)),a=c(o(5)),l=c(o(10)),u=c(o(9));function c(t){return t&&t.__esModule?t:{default:t}}function d(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var p=(0,l.default)("quill:toolbar"),h=function(t){function e(t,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n,r=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));if(Array.isArray(r.options.container)){var s=document.createElement("div");m(s,r.options.container),t.container.parentNode.insertBefore(s,t.container),r.container=s}else"string"==typeof r.options.container?r.container=document.querySelector(r.options.container):r.container=r.options.container;return r.container instanceof HTMLElement?(r.container.classList.add("ql-toolbar"),r.controls=[],r.handlers={},Object.keys(r.options.handlers).forEach((function(t){r.addHandler(t,r.options.handlers[t])})),[].forEach.call(r.container.querySelectorAll("button, select"),(function(t){r.attach(t)})),r.quill.on(a.default.events.EDITOR_CHANGE,(function(t,e){t===a.default.events.SELECTION_CHANGE&&r.update(e)})),r.quill.on(a.default.events.SCROLL_OPTIMIZE,(function(){var t=r.quill.selection.getRange(),e=i(t,1)[0];r.update(e)})),r):(n=p.error("Container required for toolbar",r.options),d(r,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"addHandler",value:function(t,e){this.handlers[t]=e}},{key:"attach",value:function(t){var e=this,o=[].find.call(t.classList,(function(t){return 0===t.indexOf("ql-")}));if(o){if(o=o.slice("ql-".length),"BUTTON"===t.tagName&&t.setAttribute("type","button"),null==this.handlers[o]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[o])return void p.warn("ignoring attaching to disabled format",o,t);if(null==s.default.query(o))return void p.warn("ignoring attaching to nonexistent format",o,t)}var n="SELECT"===t.tagName?"change":"click";t.addEventListener(n,(function(n){var l=void 0;if("SELECT"===t.tagName){if(t.selectedIndex<0)return;var u=t.options[t.selectedIndex];l=!u.hasAttribute("selected")&&(u.value||!1)}else l=!t.classList.contains("ql-active")&&(t.value||!t.hasAttribute("value")),n.preventDefault();e.quill.focus();var c=e.quill.selection.getRange(),d=i(c,1)[0];if(null!=e.handlers[o])e.handlers[o].call(e,l);else if(s.default.query(o).prototype instanceof s.default.Embed){if(!(l=prompt("Enter "+o)))return;e.quill.updateContents((new r.default).retain(d.index).delete(d.length).insert(function(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}({},o,l)),a.default.sources.USER)}else e.quill.format(o,l,a.default.sources.USER);e.update(d)})),this.controls.push([o,t])}}},{key:"update",value:function(t){var e=null==t?{}:this.quill.getFormat(t);this.controls.forEach((function(o){var n=i(o,2),r=n[0],s=n[1];if("SELECT"===s.tagName){var a=void 0;if(null==t)a=null;else if(null==e[r])a=s.querySelector("option[selected]");else if(!Array.isArray(e[r])){var l=e[r];"string"==typeof l&&(l=l.replace(/\"/g,'\\"')),a=s.querySelector('option[value="'+l+'"]')}null==a?(s.value="",s.selectedIndex=-1):a.selected=!0}else if(null==t)s.classList.remove("ql-active");else if(s.hasAttribute("value")){var u=e[r]===s.getAttribute("value")||null!=e[r]&&e[r].toString()===s.getAttribute("value")||null==e[r]&&!s.getAttribute("value");s.classList.toggle("ql-active",u)}else s.classList.toggle("ql-active",null!=e[r])}))}}]),e}(u.default);function f(t,e,o){var i=document.createElement("button");i.setAttribute("type","button"),i.classList.add("ql-"+e),null!=o&&(i.value=o),t.appendChild(i)}function m(t,e){Array.isArray(e[0])||(e=[e]),e.forEach((function(e){var o=document.createElement("span");o.classList.add("ql-formats"),e.forEach((function(t){if("string"==typeof t)f(o,t);else{var e=Object.keys(t)[0],i=t[e];Array.isArray(i)?function(t,e,o){var i=document.createElement("select");i.classList.add("ql-"+e),o.forEach((function(t){var e=document.createElement("option");!1!==t?e.setAttribute("value",t):e.setAttribute("selected","selected"),i.appendChild(e)})),t.appendChild(i)}(o,e,i):f(o,e,i)}})),t.appendChild(o)}))}h.DEFAULTS={},h.DEFAULTS={container:null,handlers:{clean:function(){var t=this,e=this.quill.getSelection();if(null!=e)if(0==e.length){var o=this.quill.getFormat();Object.keys(o).forEach((function(e){null!=s.default.query(e,s.default.Scope.INLINE)&&t.quill.format(e,!1)}))}else this.quill.removeFormat(e,a.default.sources.USER)},direction:function(t){var e=this.quill.getFormat().align;"rtl"===t&&null==e?this.quill.format("align","right",a.default.sources.USER):t||"right"!==e||this.quill.format("align",!1,a.default.sources.USER),this.quill.format("direction",t,a.default.sources.USER)},indent:function(t){var e=this.quill.getSelection(),o=this.quill.getFormat(e),i=parseInt(o.indent||0);if("+1"===t||"-1"===t){var n="+1"===t?1:-1;"rtl"===o.direction&&(n*=-1),this.quill.format("indent",i+n,a.default.sources.USER)}},link:function(t){!0===t&&(t=prompt("Enter link URL:")),this.quill.format("link",t,a.default.sources.USER)},list:function(t){var e=this.quill.getSelection(),o=this.quill.getFormat(e);"check"===t?"checked"===o.list||"unchecked"===o.list?this.quill.format("list",!1,a.default.sources.USER):this.quill.format("list","unchecked",a.default.sources.USER):this.quill.format("list",t,a.default.sources.USER)}}},e.default=h,e.addControls=m},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(28);var a=function(t){function e(t,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.label.innerHTML=o,i.container.classList.add("ql-color-picker"),[].slice.call(i.container.querySelectorAll(".ql-picker-item"),0,7).forEach((function(t){t.classList.add("ql-primary")})),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"buildItem",value:function(t){var o=r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"buildItem",this).call(this,t);return o.style.backgroundColor=t.getAttribute("value")||"",o}},{key:"selectItem",value:function(t,o){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"selectItem",this).call(this,t,o);var i=this.label.querySelector(".ql-color-label"),n=t&&t.getAttribute("data-value")||"";i&&("line"===i.tagName?i.style.stroke=n:i.style.fill=n)}}]),e}(((i=s)&&i.__esModule?i:{default:i}).default);e.default=a},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(28);var a=function(t){function e(t,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.container.classList.add("ql-icon-picker"),[].forEach.call(i.container.querySelectorAll(".ql-picker-item"),(function(t){t.innerHTML=o[t.getAttribute("data-value")||""]})),i.defaultItem=i.container.querySelector(".ql-selected"),i.selectItem(i.defaultItem),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"selectItem",value:function(t,o){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"selectItem",this).call(this,t,o),t=t||this.defaultItem,this.label.innerHTML=t.innerHTML}}]),e}(((i=s)&&i.__esModule?i:{default:i}).default);e.default=a},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}();var n=function(){function t(e,o){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.quill=e,this.boundsContainer=o||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",(function(){i.root.style.marginTop=-1*i.quill.root.scrollTop+"px"})),this.hide()}return i(t,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(t){var e=t.left+t.width/2-this.root.offsetWidth/2,o=t.bottom+this.quill.root.scrollTop;this.root.style.left=e+"px",this.root.style.top=o+"px",this.root.classList.remove("ql-flip");var i=this.boundsContainer.getBoundingClientRect(),n=this.root.getBoundingClientRect(),r=0;if(n.right>i.right&&(r=i.right-n.right,this.root.style.left=e+r+"px"),n.left<i.left&&(r=i.left-n.left,this.root.style.left=e+r+"px"),n.bottom>i.bottom){var s=n.bottom-n.top,a=t.bottom-t.top+s;this.root.style.top=o-a+"px",this.root.classList.add("ql-flip")}return r}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),t}();e.default=n},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},r=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),s=h(o(3)),a=h(o(8)),l=o(43),u=h(l),c=h(o(27)),d=o(15),p=h(o(41));function h(t){return t&&t.__esModule?t:{default:t}}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var g=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],b=function(t){function e(t,o){f(this,e),null!=o.modules.toolbar&&null==o.modules.toolbar.container&&(o.modules.toolbar.container=g);var i=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));return i.quill.container.classList.add("ql-snow"),i}return v(e,t),r(e,[{key:"extendToolbar",value:function(t){t.container.classList.add("ql-snow"),this.buildButtons([].slice.call(t.container.querySelectorAll("button")),p.default),this.buildPickers([].slice.call(t.container.querySelectorAll("select")),p.default),this.tooltip=new y(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},(function(e,o){t.handlers.link.call(t,!o.format.link)}))}}]),e}(u.default);b.DEFAULTS=(0,s.default)(!0,{},u.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){if(t){var e=this.quill.getSelection();if(null==e||0==e.length)return;var o=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(o)&&0!==o.indexOf("mailto:")&&(o="mailto:"+o),this.quill.theme.tooltip.edit("link",o)}else this.quill.format("link",!1)}}}}});var y=function(t){function e(t,o){f(this,e);var i=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));return i.preview=i.root.querySelector("a.ql-preview"),i}return v(e,t),r(e,[{key:"listen",value:function(){var t=this;n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",(function(e){t.root.classList.contains("ql-editing")?t.save():t.edit("link",t.preview.textContent),e.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(function(e){if(null!=t.linkRange){var o=t.linkRange;t.restoreFocus(),t.quill.formatText(o,"link",!1,a.default.sources.USER),delete t.linkRange}e.preventDefault(),t.hide()})),this.quill.on(a.default.events.SELECTION_CHANGE,(function(e,o,n){if(null!=e){if(0===e.length&&n===a.default.sources.USER){var r=t.quill.scroll.descendant(c.default,e.index),s=i(r,2),l=s[0],u=s[1];if(null!=l){t.linkRange=new d.Range(e.index-u,l.length());var p=c.default.formats(l.domNode);return t.preview.textContent=p,t.preview.setAttribute("href",p),t.show(),void t.position(t.quill.getBounds(t.linkRange))}}else delete t.linkRange;t.hide()}}))}},{key:"show",value:function(){n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),e}(l.BaseTooltip);y.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),e.default=b},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=D(o(29)),n=o(36),r=o(38),s=o(64),a=D(o(65)),l=D(o(66)),u=o(67),c=D(u),d=o(37),p=o(26),h=o(39),f=o(40),m=D(o(56)),v=D(o(68)),g=D(o(27)),b=D(o(69)),y=D(o(70)),x=D(o(71)),w=D(o(72)),E=D(o(73)),O=o(13),q=D(O),_=D(o(74)),A=D(o(75)),S=D(o(57)),I=D(o(41)),N=D(o(28)),k=D(o(59)),P=D(o(60)),T=D(o(61)),C=D(o(108)),R=D(o(62));function D(t){return t&&t.__esModule?t:{default:t}}i.default.register({"attributors/attribute/direction":r.DirectionAttribute,"attributors/class/align":n.AlignClass,"attributors/class/background":d.BackgroundClass,"attributors/class/color":p.ColorClass,"attributors/class/direction":r.DirectionClass,"attributors/class/font":h.FontClass,"attributors/class/size":f.SizeClass,"attributors/style/align":n.AlignStyle,"attributors/style/background":d.BackgroundStyle,"attributors/style/color":p.ColorStyle,"attributors/style/direction":r.DirectionStyle,"attributors/style/font":h.FontStyle,"attributors/style/size":f.SizeStyle},!0),i.default.register({"formats/align":n.AlignClass,"formats/direction":r.DirectionClass,"formats/indent":s.IndentClass,"formats/background":d.BackgroundStyle,"formats/color":p.ColorStyle,"formats/font":h.FontClass,"formats/size":f.SizeClass,"formats/blockquote":a.default,"formats/code-block":q.default,"formats/header":l.default,"formats/list":c.default,"formats/bold":m.default,"formats/code":O.Code,"formats/italic":v.default,"formats/link":g.default,"formats/script":b.default,"formats/strike":y.default,"formats/underline":x.default,"formats/image":w.default,"formats/video":E.default,"formats/list/item":u.ListItem,"modules/formula":_.default,"modules/syntax":A.default,"modules/toolbar":S.default,"themes/bubble":C.default,"themes/snow":R.default,"ui/icons":I.default,"ui/picker":N.default,"ui/icon-picker":P.default,"ui/color-picker":k.default,"ui/tooltip":T.default},!0),e.default=i.default},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.IndentClass=void 0;var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(0),a=(i=s)&&i.__esModule?i:{default:i};function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c=function(t){function e(){return l(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"add",value:function(t,o){if("+1"===o||"-1"===o){var i=this.value(t)||0;o="+1"===o?i+1:i-1}return 0===o?(this.remove(t),!0):r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"add",this).call(this,t,o)}},{key:"canAdd",value:function(t,o){return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canAdd",this).call(this,t,o)||r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canAdd",this).call(this,t,parseInt(o))}},{key:"value",value:function(t){return parseInt(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t))||void 0}}]),e}(a.default.Attributor.Class),d=new c("indent","ql-indent",{scope:a.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});e.IndentClass=d},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=o(4);function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=function(t){function e(){return r(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((i=n)&&i.__esModule?i:{default:i}).default);a.blotName="blockquote",a.tagName="blockquote",e.default=a},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=o(4);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var l=function(t){function e(){return s(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,null,[{key:"formats",value:function(t){return this.tagName.indexOf(t.tagName)+1}}]),e}(((i=r)&&i.__esModule?i:{default:i}).default);l.blotName="header",l.tagName=["H1","H2","H3","H4","H5","H6"],e.default=l},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ListItem=void 0;var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),n=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},r=l(o(0)),s=l(o(4)),a=l(o(25));function l(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var p=function(t){function e(){return u(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return d(e,t),i(e,[{key:"format",value:function(t,o){t!==h.blotName||o?n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,o):this.replaceWith(r.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(t,o){return this.parent.isolate(this.offset(this.parent),this.length()),t===this.parent.statics.blotName?(this.parent.replaceWith(t,o),this):(this.parent.unwrap(),n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replaceWith",this).call(this,t,o))}}],[{key:"formats",value:function(t){return t.tagName===this.tagName?void 0:n(e.__proto__||Object.getPrototypeOf(e),"formats",this).call(this,t)}}]),e}(s.default);p.blotName="list-item",p.tagName="LI";var h=function(t){function e(t){u(this,e);var o=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),i=function(e){if(e.target.parentNode===t){var i=o.statics.formats(t),n=r.default.find(e.target);"checked"===i?n.format("list","unchecked"):"unchecked"===i&&n.format("list","checked")}};return t.addEventListener("touchstart",i),t.addEventListener("mousedown",i),o}return d(e,t),i(e,null,[{key:"create",value:function(t){var o="ordered"===t?"OL":"UL",i=n(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,o);return"checked"!==t&&"unchecked"!==t||i.setAttribute("data-checked","checked"===t),i}},{key:"formats",value:function(t){return"OL"===t.tagName?"ordered":"UL"===t.tagName?t.hasAttribute("data-checked")?"true"===t.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),i(e,[{key:"format",value:function(t,e){this.children.length>0&&this.children.tail.format(t,e)}},{key:"formats",value:function(){return t={},e=this.statics.blotName,o=this.statics.formats(this.domNode),e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t;var t,e,o}},{key:"insertBefore",value:function(t,o){if(t instanceof p)n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,o);else{var i=null==o?this.length():o.offset(this),r=this.split(i);r.parent.insertBefore(t,r)}}},{key:"optimize",value:function(t){n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t);var o=this.next;null!=o&&o.prev===this&&o.statics.blotName===this.statics.blotName&&o.domNode.tagName===this.domNode.tagName&&o.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(o.moveChildren(this),o.remove())}},{key:"replace",value:function(t){if(t.statics.blotName!==this.statics.blotName){var o=r.default.create(this.statics.defaultChild);t.moveChildren(o),this.appendChild(o)}n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replace",this).call(this,t)}}]),e}(a.default);h.blotName="list",h.scope=r.default.Scope.BLOCK_BLOT,h.tagName=["OL","UL"],h.defaultChild="list-item",h.allowedChildren=[p],e.ListItem=p,e.default=h},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=o(56);function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=function(t){function e(){return r(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((i=n)&&i.__esModule?i:{default:i}).default);a.blotName="italic",a.tagName=["EM","I"],e.default=a},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(6);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u=function(t){function e(){return a(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,null,[{key:"create",value:function(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):r(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t)}},{key:"formats",value:function(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}}]),e}(((i=s)&&i.__esModule?i:{default:i}).default);u.blotName="script",u.tagName=["SUB","SUP"],e.default=u},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=o(6);function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=function(t){function e(){return r(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((i=n)&&i.__esModule?i:{default:i}).default);a.blotName="strike",a.tagName="S",e.default=a},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=o(6);function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=function(t){function e(){return r(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((i=n)&&i.__esModule?i:{default:i}).default);a.blotName="underline",a.tagName="U",e.default=a},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(0),a=(i=s)&&i.__esModule?i:{default:i},l=o(27);function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var d=["alt","height","width"],p=function(t){function e(){return u(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"format",value:function(t,o){d.indexOf(t)>-1?o?this.domNode.setAttribute(t,o):this.domNode.removeAttribute(t):r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,o)}}],[{key:"create",value:function(t){var o=r(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return"string"==typeof t&&o.setAttribute("src",this.sanitize(t)),o}},{key:"formats",value:function(t){return d.reduce((function(e,o){return t.hasAttribute(o)&&(e[o]=t.getAttribute(o)),e}),{})}},{key:"match",value:function(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}},{key:"sanitize",value:function(t){return(0,l.sanitize)(t,["http","https","data"])?t:"//:0"}},{key:"value",value:function(t){return t.getAttribute("src")}}]),e}(a.default.Embed);p.blotName="image",p.tagName="IMG",e.default=p},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(4),a=o(27),l=(i=a)&&i.__esModule?i:{default:i};function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var d=["height","width"],p=function(t){function e(){return u(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"format",value:function(t,o){d.indexOf(t)>-1?o?this.domNode.setAttribute(t,o):this.domNode.removeAttribute(t):r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,o)}}],[{key:"create",value:function(t){var o=r(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return o.setAttribute("frameborder","0"),o.setAttribute("allowfullscreen",!0),o.setAttribute("src",this.sanitize(t)),o}},{key:"formats",value:function(t){return d.reduce((function(e,o){return t.hasAttribute(o)&&(e[o]=t.getAttribute(o)),e}),{})}},{key:"sanitize",value:function(t){return l.default.sanitize(t)}},{key:"value",value:function(t){return t.getAttribute("src")}}]),e}(s.BlockEmbed);p.blotName="video",p.className="ql-video",p.tagName="IFRAME",e.default=p},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.FormulaBlot=void 0;var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),n=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},r=l(o(35)),s=l(o(5)),a=l(o(9));function l(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var p=function(t){function e(){return u(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return d(e,t),i(e,null,[{key:"create",value:function(t){var o=n(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return"string"==typeof t&&(window.katex.render(t,o,{throwOnError:!1,errorColor:"#f00"}),o.setAttribute("data-value",t)),o}},{key:"value",value:function(t){return t.getAttribute("data-value")}}]),e}(r.default);p.blotName="formula",p.className="ql-formula",p.tagName="SPAN";var h=function(t){function e(){u(this,e);var t=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return t}return d(e,t),i(e,null,[{key:"register",value:function(){s.default.register(p,!0)}}]),e}(a.default);e.FormulaBlot=p,e.default=h},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.CodeToken=e.CodeBlock=void 0;var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),n=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},r=l(o(0)),s=l(o(5)),a=l(o(9));function l(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var p=function(t){function e(){return u(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return d(e,t),i(e,[{key:"replaceWith",value:function(t){this.domNode.textContent=this.domNode.textContent,this.attach(),n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replaceWith",this).call(this,t)}},{key:"highlight",value:function(t){var e=this.domNode.textContent;this.cachedText!==e&&((e.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=t(e),this.domNode.normalize(),this.attach()),this.cachedText=e)}}]),e}(l(o(13)).default);p.className="ql-syntax";var h=new r.default.Attributor.Class("token","hljs",{scope:r.default.Scope.INLINE}),f=function(t){function e(t,o){u(this,e);var i=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));if("function"!=typeof i.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var n=null;return i.quill.on(s.default.events.SCROLL_OPTIMIZE,(function(){clearTimeout(n),n=setTimeout((function(){i.highlight(),n=null}),i.options.interval)})),i.highlight(),i}return d(e,t),i(e,null,[{key:"register",value:function(){s.default.register(h,!0),s.default.register(p,!0)}}]),i(e,[{key:"highlight",value:function(){var t=this;if(!this.quill.selection.composing){this.quill.update(s.default.sources.USER);var e=this.quill.getSelection();this.quill.scroll.descendants(p).forEach((function(e){e.highlight(t.options.highlight)})),this.quill.update(s.default.sources.SILENT),null!=e&&this.quill.setSelection(e,s.default.sources.SILENT)}}}]),e}(a.default);f.DEFAULTS={highlight:null==window.hljs?null:function(t){return window.hljs.highlightAuto(t).value},interval:1e3},e.CodeBlock=p,e.CodeToken=h,e.default=f},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,e){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,e){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BubbleTooltip=void 0;var i=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=d(o(3)),s=d(o(8)),a=o(43),l=d(a),u=o(15),c=d(o(41));function d(t){return t&&t.__esModule?t:{default:t}}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var m=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],v=function(t){function e(t,o){p(this,e),null!=o.modules.toolbar&&null==o.modules.toolbar.container&&(o.modules.toolbar.container=m);var i=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));return i.quill.container.classList.add("ql-bubble"),i}return f(e,t),n(e,[{key:"extendToolbar",value:function(t){this.tooltip=new g(this.quill,this.options.bounds),this.tooltip.root.appendChild(t.container),this.buildButtons([].slice.call(t.container.querySelectorAll("button")),c.default),this.buildPickers([].slice.call(t.container.querySelectorAll("select")),c.default)}}]),e}(l.default);v.DEFAULTS=(0,r.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var g=function(t){function e(t,o){p(this,e);var i=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));return i.quill.on(s.default.events.EDITOR_CHANGE,(function(t,e,o,n){if(t===s.default.events.SELECTION_CHANGE)if(null!=e&&e.length>0&&n===s.default.sources.USER){i.show(),i.root.style.left="0px",i.root.style.width="",i.root.style.width=i.root.offsetWidth+"px";var r=i.quill.getLines(e.index,e.length);if(1===r.length)i.position(i.quill.getBounds(e));else{var a=r[r.length-1],l=i.quill.getIndex(a),c=Math.min(a.length()-1,e.index+e.length-l),d=i.quill.getBounds(new u.Range(l,c));i.position(d)}}else document.activeElement!==i.textbox&&i.quill.hasFocus()&&i.hide()})),i}return f(e,t),n(e,[{key:"listen",value:function(){var t=this;i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",(function(){t.root.classList.remove("ql-editing")})),this.quill.on(s.default.events.SCROLL_OPTIMIZE,(function(){setTimeout((function(){if(!t.root.classList.contains("ql-hidden")){var e=t.quill.getSelection();null!=e&&t.position(t.quill.getBounds(e))}}),1)}))}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(t){var o=i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"position",this).call(this,t),n=this.root.querySelector(".ql-tooltip-arrow");if(n.style.marginLeft="",0===o)return o;n.style.marginLeft=-1*o-n.offsetWidth/2+"px"}}]),e}(a.BaseTooltip);g.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),e.BubbleTooltip=g,e.default=v},function(t,e,o){t.exports=o(63)}]).default}));const ei="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,oi=(t,e,o=null)=>{for(;e!==o;){const o=e.nextSibling;t.removeChild(e),e=o}},ii=`{{lit-${String(Math.random()).slice(2)}}}`,ni=`\x3c!--${ii}--\x3e`,ri=new RegExp(`${ii}|${ni}`);class si{constructor(t,e){this.parts=[],this.element=e;const o=[],i=[],n=document.createTreeWalker(e.content,133,null,!1);let r=0,s=-1,a=0;const{strings:l,values:{length:u}}=t;for(;a<u;){const t=n.nextNode();if(null!==t){if(s++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:o}=e;let i=0;for(let t=0;t<o;t++)ai(e[t].name,"$lit$")&&i++;for(;i-- >0;){const e=l[a],o=ci.exec(e)[2],i=o.toLowerCase()+"$lit$",n=t.getAttribute(i);t.removeAttribute(i);const r=n.split(ri);this.parts.push({type:"attribute",index:s,name:o,strings:r}),a+=r.length-1}}"TEMPLATE"===t.tagName&&(i.push(t),n.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(ii)>=0){const i=t.parentNode,n=e.split(ri),r=n.length-1;for(let e=0;e<r;e++){let o,r=n[e];if(""===r)o=ui();else{const t=ci.exec(r);null!==t&&ai(t[2],"$lit$")&&(r=r.slice(0,t.index)+t[1]+t[2].slice(0,-"$lit$".length)+t[3]),o=document.createTextNode(r)}i.insertBefore(o,t),this.parts.push({type:"node",index:++s})}""===n[r]?(i.insertBefore(ui(),t),o.push(t)):t.data=n[r],a+=r}}else if(8===t.nodeType)if(t.data===ii){const e=t.parentNode;null!==t.previousSibling&&s!==r||(s++,e.insertBefore(ui(),t)),r=s,this.parts.push({type:"node",index:s}),null===t.nextSibling?t.data="":(o.push(t),s--),a++}else{let e=-1;for(;-1!==(e=t.data.indexOf(ii,e+1));)this.parts.push({type:"node",index:-1}),a++}}else n.currentNode=i.pop()}for(const t of o)t.parentNode.removeChild(t)}}const ai=(t,e)=>{const o=t.length-e.length;return o>=0&&t.slice(o)===e},li=t=>-1!==t.index,ui=()=>document.createComment(""),ci=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function di(t,e){const{element:{content:o},parts:i}=t,n=document.createTreeWalker(o,133,null,!1);let r=hi(i),s=i[r],a=-1,l=0;const u=[];let c=null;for(;n.nextNode();){a++;const t=n.currentNode;for(t.previousSibling===c&&(c=null),e.has(t)&&(u.push(t),null===c&&(c=t)),null!==c&&l++;void 0!==s&&s.index===a;)s.index=null!==c?-1:s.index-l,r=hi(i,r),s=i[r]}u.forEach((t=>t.parentNode.removeChild(t)))}const pi=t=>{let e=11===t.nodeType?0:1;const o=document.createTreeWalker(t,133,null,!1);for(;o.nextNode();)e++;return e},hi=(t,e=-1)=>{for(let o=e+1;o<t.length;o++){const e=t[o];if(li(e))return o}return-1};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const fi=new WeakMap,mi=t=>"function"==typeof t&&fi.has(t),vi={},gi={};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class bi{constructor(t,e,o){this.__parts=[],this.template=t,this.processor=e,this.options=o}update(t){let e=0;for(const o of this.__parts)void 0!==o&&o.setValue(t[e]),e++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const t=ei?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],o=this.template.parts,i=document.createTreeWalker(t,133,null,!1);let n,r=0,s=0,a=i.nextNode();for(;r<o.length;)if(n=o[r],li(n)){for(;s<n.index;)s++,"TEMPLATE"===a.nodeName&&(e.push(a),i.currentNode=a.content),null===(a=i.nextNode())&&(i.currentNode=e.pop(),a=i.nextNode());if("node"===n.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(a.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(a,n.name,n.strings,this.options));r++}else this.__parts.push(void 0),r++;return ei&&(document.adoptNode(t),customElements.upgrade(t)),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const yi=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:t=>t}),xi=` ${ii} `;class wi{constructor(t,e,o,i){this.strings=t,this.values=e,this.type=o,this.processor=i}getHTML(){const t=this.strings.length-1;let e="",o=!1;for(let i=0;i<t;i++){const t=this.strings[i],n=t.lastIndexOf("\x3c!--");o=(n>-1||o)&&-1===t.indexOf("--\x3e",n+1);const r=ci.exec(t);e+=null===r?t+(o?xi:ni):t.substr(0,r.index)+r[1]+r[2]+"$lit$"+r[3]+ii}return e+=this.strings[t],e}getTemplateElement(){const t=document.createElement("template");let e=this.getHTML();return void 0!==yi&&(e=yi.createHTML(e)),t.innerHTML=e,t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Ei=t=>null===t||!("object"==typeof t||"function"==typeof t),Oi=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]);class qi{constructor(t,e,o){this.dirty=!0,this.element=t,this.name=e,this.strings=o,this.parts=[];for(let t=0;t<o.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new _i(this)}_getValue(){const t=this.strings,e=t.length-1,o=this.parts;if(1===e&&""===t[0]&&""===t[1]){const t=o[0].value;if("symbol"==typeof t)return String(t);if("string"==typeof t||!Oi(t))return t}let i="";for(let n=0;n<e;n++){i+=t[n];const e=o[n];if(void 0!==e){const t=e.value;if(Ei(t)||!Oi(t))i+="string"==typeof t?t:String(t);else for(const e of t)i+="string"==typeof e?e:String(e)}}return i+=t[e],i}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class _i{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===vi||Ei(t)&&t===this.value||(this.value=t,mi(t)||(this.committer.dirty=!0))}commit(){for(;mi(this.value);){const t=this.value;this.value=vi,t(this)}this.value!==vi&&this.committer.commit()}}class Ai{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(ui()),this.endNode=t.appendChild(ui())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=ui()),t.__insert(this.endNode=ui())}insertAfterPart(t){t.__insert(this.startNode=ui()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(null===this.startNode.parentNode)return;for(;mi(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=vi,t(this)}const t=this.__pendingValue;t!==vi&&(Ei(t)?t!==this.value&&this.__commitText(t):t instanceof wi?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):Oi(t)?this.__commitIterable(t):t===gi?(this.value=gi,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,o="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=o:this.__commitNode(document.createTextNode(o)),this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof bi&&this.value.template===e)this.value.update(t.values);else{const o=new bi(e,t.processor,this.options),i=o._clone();o.update(t.values),this.__commitNode(i),this.value=o}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let o,i=0;for(const n of t)o=e[i],void 0===o&&(o=new Ai(this.options),e.push(o),0===i?o.appendIntoPart(this):o.insertAfterPart(e[i-1])),o.setValue(n),o.commit(),i++;i<e.length&&(e.length=i,this.clear(o&&o.endNode))}clear(t=this.startNode){oi(this.startNode.parentNode,t.nextSibling,this.endNode)}}class Si{constructor(t,e,o){if(this.value=void 0,this.__pendingValue=void 0,2!==o.length||""!==o[0]||""!==o[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=o}setValue(t){this.__pendingValue=t}commit(){for(;mi(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=vi,t(this)}if(this.__pendingValue===vi)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=vi}}class Ii extends qi{constructor(t,e,o){super(t,e,o),this.single=2===o.length&&""===o[0]&&""===o[1]}_createPart(){return new Ni(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class Ni extends _i{}let ki=!1;(()=>{try{const t={get capture(){return ki=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();class Pi{constructor(t,e,o){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=o,this.__boundHandleEvent=t=>this.handleEvent(t)}setValue(t){this.__pendingValue=t}commit(){for(;mi(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=vi,t(this)}if(this.__pendingValue===vi)return;const t=this.__pendingValue,e=this.value,o=null==t||null!=e&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),i=null!=t&&(null==e||o);o&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),i&&(this.__options=Ti(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=vi}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const Ti=t=>t&&(ki?{capture:t.capture,passive:t.passive,once:t.once}:t.capture)
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */;function Ci(t){let e=Ri.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},Ri.set(t.type,e));let o=e.stringsArray.get(t.strings);if(void 0!==o)return o;const i=t.strings.join(ii);return o=e.keyString.get(i),void 0===o&&(o=new si(t,t.getTemplateElement()),e.keyString.set(i,o)),e.stringsArray.set(t.strings,o),o}const Ri=new Map,Di=new WeakMap;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Li=new
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class{handleAttributeExpressions(t,e,o,i){const n=e[0];if("."===n){return new Ii(t,e.slice(1),o).parts}if("@"===n)return[new Pi(t,e.slice(1),i.eventContext)];if("?"===n)return[new Si(t,e.slice(1),o)];return new qi(t,e,o).parts}handleTextExpression(t){return new Ai(t)}};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");const ji=(t,...e)=>new wi(t,e,"html",Li)
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */,Mi=(t,e)=>`${t}--${e}`;let Fi=!0;void 0===window.ShadyCSS?Fi=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),Fi=!1);const Ui=t=>e=>{const o=Mi(e.type,t);let i=Ri.get(o);void 0===i&&(i={stringsArray:new WeakMap,keyString:new Map},Ri.set(o,i));let n=i.stringsArray.get(e.strings);if(void 0!==n)return n;const r=e.strings.join(ii);if(n=i.keyString.get(r),void 0===n){const o=e.getTemplateElement();Fi&&window.ShadyCSS.prepareTemplateDom(o,t),n=new si(e,o),i.keyString.set(r,n)}return i.stringsArray.set(e.strings,n),n},Bi=["html","svg"],zi=new Set,Vi=(t,e,o)=>{zi.add(t);const i=o?o.element:document.createElement("template"),n=e.querySelectorAll("style"),{length:r}=n;if(0===r)return void window.ShadyCSS.prepareTemplateStyles(i,t);const s=document.createElement("style");for(let t=0;t<r;t++){const e=n[t];e.parentNode.removeChild(e),s.textContent+=e.textContent}(t=>{Bi.forEach((e=>{const o=Ri.get(Mi(e,t));void 0!==o&&o.keyString.forEach((t=>{const{element:{content:e}}=t,o=new Set;Array.from(e.querySelectorAll("style")).forEach((t=>{o.add(t)})),di(t,o)}))}))})(t);const a=i.content;o?function(t,e,o=null){const{element:{content:i},parts:n}=t;if(null==o)return void i.appendChild(e);const r=document.createTreeWalker(i,133,null,!1);let s=hi(n),a=0,l=-1;for(;r.nextNode();)for(l++,r.currentNode===o&&(a=pi(e),o.parentNode.insertBefore(e,o));-1!==s&&n[s].index===l;){if(a>0){for(;-1!==s;)n[s].index+=a,s=hi(n,s);return}s=hi(n,s)}}(o,s,a.firstChild):a.insertBefore(s,a.firstChild),window.ShadyCSS.prepareTemplateStyles(i,t);const l=a.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==l)e.insertBefore(l.cloneNode(!0),e.firstChild);else if(o){a.insertBefore(s,a.firstChild);const t=new Set;t.add(s),di(o,t)}};window.JSCompiler_renameProperty=(t,e)=>t;const Hi={toAttribute(t,e){switch(e){case Boolean:return t?"":null;case Object:case Array:return null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){switch(e){case Boolean:return null!==t;case Number:return null===t?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}},$i=(t,e)=>e!==t&&(e==e||t==t),Ki={attribute:!0,type:String,converter:Hi,reflect:!1,hasChanged:$i};class Qi extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach(((e,o)=>{const i=this._attributeNameForProperty(o,e);void 0!==i&&(this._attributeToPropertyMap.set(i,o),t.push(i))})),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;void 0!==t&&t.forEach(((t,e)=>this._classProperties.set(e,t)))}}static createProperty(t,e=Ki){if(this._ensureClassProperties(),this._classProperties.set(t,e),e.noAccessor||this.prototype.hasOwnProperty(t))return;const o="symbol"==typeof t?Symbol():`__${t}`,i=this.getPropertyDescriptor(t,o,e);void 0!==i&&Object.defineProperty(this.prototype,t,i)}static getPropertyDescriptor(t,e,o){return{get(){return this[e]},set(i){const n=this[t];this[e]=i,this.requestUpdateInternal(t,n,o)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this._classProperties&&this._classProperties.get(t)||Ki}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty("finalized")||t.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const t=this.properties,e=[...Object.getOwnPropertyNames(t),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]];for(const o of e)this.createProperty(o,t[o])}}static _attributeNameForProperty(t,e){const o=e.attribute;return!1===o?void 0:"string"==typeof o?o:"string"==typeof t?t.toLowerCase():void 0}static _valueHasChanged(t,e,o=$i){return o(t,e)}static _propertyValueFromAttribute(t,e){const o=e.type,i=e.converter||Hi,n="function"==typeof i?i:i.fromAttribute;return n?n(t,o):t}static _propertyValueToAttribute(t,e){if(void 0===e.reflect)return;const o=e.type,i=e.converter;return(i&&i.toAttribute||Hi.toAttribute)(t,o)}initialize(){this._updateState=0,this._updatePromise=new Promise((t=>this._enableUpdatingResolver=t)),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach(((t,e)=>{if(this.hasOwnProperty(e)){const t=this[e];delete this[e],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(e,t)}}))}_applyInstanceProperties(){this._instanceProperties.forEach(((t,e)=>this[e]=t)),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,e,o){e!==o&&this._attributeToProperty(t,o)}_propertyToAttribute(t,e,o=Ki){const i=this.constructor,n=i._attributeNameForProperty(t,o);if(void 0!==n){const t=i._propertyValueToAttribute(e,o);if(void 0===t)return;this._updateState=8|this._updateState,null==t?this.removeAttribute(n):this.setAttribute(n,t),this._updateState=-9&this._updateState}}_attributeToProperty(t,e){if(8&this._updateState)return;const o=this.constructor,i=o._attributeToPropertyMap.get(t);if(void 0!==i){const t=o.getPropertyOptions(i);this._updateState=16|this._updateState,this[i]=o._propertyValueFromAttribute(e,t),this._updateState=-17&this._updateState}}requestUpdateInternal(t,e,o){let i=!0;if(void 0!==t){const n=this.constructor;o=o||n.getPropertyOptions(t),n._valueHasChanged(this[t],e,o.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,e),!0!==o.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,o))):i=!1}!this._hasRequestedUpdate&&i&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(t,e){return this.requestUpdateInternal(t,e),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(t){}const t=this.performUpdate();return null!=t&&await t,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let t=!1;const e=this._changedProperties;try{t=this.shouldUpdate(e),t?this.update(e):this._markUpdated()}catch(e){throw t=!1,this._markUpdated(),e}t&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(e)),this.updated(e))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach(((t,e)=>this._propertyToAttribute(e,this[e],t))),this._reflectingProperties=void 0),this._markUpdated()}updated(t){}firstUpdated(t){}}Qi.finalized=!0;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const Gi=t=>e=>"function"==typeof e?((t,e)=>(window.customElements.define(t,e),e))(t,e):((t,e)=>{const{kind:o,elements:i}=e;return{kind:o,elements:i,finisher(e){window.customElements.define(t,e)}}})(t,e),Wi=(t,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?Object.assign(Object.assign({},e),{finisher(o){o.createProperty(e.key,t)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(o){o.createProperty(e.key,t)}};function Zi(t){return(e,o)=>void 0!==o?((t,e,o)=>{e.constructor.createProperty(o,t)})(t,e,o):Wi(t,e)}
/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/const Xi=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Yi=Symbol();class Ji{constructor(t,e){if(e!==Yi)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return void 0===this._styleSheet&&(Xi?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const tn=(t,...e)=>{const o=e.reduce(((e,o,i)=>e+(t=>{if(t instanceof Ji)return t.cssText;if("number"==typeof t)return t;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${t}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)})(o)+t[i+1]),t[0]);return new Ji(o,Yi)};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
(window.litElementVersions||(window.litElementVersions=[])).push("2.4.0");const en={};class on extends Qi{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const t=this.getStyles();if(Array.isArray(t)){const e=(t,o)=>t.reduceRight(((t,o)=>Array.isArray(o)?e(o,t):(t.add(o),t)),o),o=e(t,new Set),i=[];o.forEach((t=>i.unshift(t))),this._styles=i}else this._styles=void 0===t?[]:[t];this._styles=this._styles.map((t=>{if(t instanceof CSSStyleSheet&&!Xi){const e=Array.prototype.slice.call(t.cssRules).reduce(((t,e)=>t+e.cssText),"");return new Ji(String(e),Yi)}return t}))}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const t=this.constructor._styles;0!==t.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?Xi?this.renderRoot.adoptedStyleSheets=t.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map((t=>t.cssText)),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(t){const e=this.render();super.update(t),e!==en&&this.constructor.render(e,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach((t=>{const e=document.createElement("style");e.textContent=t.cssText,this.renderRoot.appendChild(e)})))}render(){return en}}on.finalized=!0,on.render=(t,e,o)=>{if(!o||"object"!=typeof o||!o.scopeName)throw new Error("The `scopeName` option is required.");const i=o.scopeName,n=Di.has(e),r=Fi&&11===e.nodeType&&!!e.host,s=r&&!zi.has(i),a=s?document.createDocumentFragment():e;if(((t,e,o)=>{let i=Di.get(e);void 0===i&&(oi(e,e.firstChild),Di.set(e,i=new Ai(Object.assign({templateFactory:Ci},o))),i.appendInto(e)),i.setValue(t),i.commit()})(t,a,Object.assign({templateFactory:Ui(i)},o)),s){const t=Di.get(a);Di.delete(a);const o=t.value instanceof bi?t.value.template:void 0;Vi(i,a,o),oi(e,e.firstChild),e.appendChild(a),Di.set(e,t)}!n&&r&&window.ShadyCSS.styleElement(e.host)};
/**
@license
Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const nn=t=>e=>class extends e{connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._storeUnsubscribe=t.subscribe((()=>this.stateChanged(t.getState()))),this.stateChanged(t.getState())}disconnectedCallback(){this._storeUnsubscribe(),super.disconnectedCallback&&super.disconnectedCallback()}stateChanged(t){}};var rn=function(t){var e,o=t.Symbol;return"function"==typeof o?o.observable?e=o.observable:(e=o("observable"),o.observable=e):e="@@observable",e}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()),sn=function(){return Math.random().toString(36).substring(7).split("").join(".")},an={INIT:"@@redux/INIT"+sn(),REPLACE:"@@redux/REPLACE"+sn(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+sn()}};function ln(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function un(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t);try{throw new Error(t)}catch(t){}}function cn(t,e){var o=e&&e.type;return"Given "+(o&&'action "'+String(o)+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function dn(){}"production"!==process.env.NODE_ENV&&"string"==typeof dn.name&&"isCrushed"!==dn.name&&un('You are currently using minified code outside of NODE_ENV === "production". This means that you are running a slower development build of Redux. You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) to ensure you have the correct code for your production build.');const pn={agrupadorGenerico:{tipo:"DispositivoAgrupadorGenerico",name:void 0,tagId:"dg",descricao:void 0,descricaoPlural:void 0,tiposPermitidosPai:["Articulacao","Parte","Livro","Titulo","Capitulo","Secao"],tiposPermitidosFilhos:["Parte","Livro","Titulo","Capitulo","Secao","Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:[""],INDICADOR_DESDOBRAMENTO:["NA"]},alinea:{tipo:"Alinea",name:"Alinea",tagId:"ali",descricao:"Alnea",descricaoPlural:"Alneas",tiposPermitidosPai:["Inciso"],tiposPermitidosFilhos:["Item"],tipoProvavelFilho:"Item",INDICADOR_SEQUENCIA:[";","; e","; ou"],INDICADOR_FIM_SEQUENCIA:["."],INDICADOR_DESDOBRAMENTO:[":"]},articulacao:{tipo:"Articulacao",name:"Articulacao",tagId:"",descricao:"Articulao",descricaoPlural:"Articulaes",tiposPermitidosPai:[],tiposPermitidosFilhos:["Parte","Livro","Titulo","Capitulo","Secao","Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["."],INDICADOR_FIM_SEQUENCIA:["NA"],INDICADOR_DESDOBRAMENTO:[":"]},artigo:{tipo:"Artigo",name:"Artigo",tagId:"art",descricao:"Artigo",descricaoPlural:"Artigos",tiposPermitidosPai:["Articulacao","Parte","Livro","Titulo","Capitulo","Secao","Subsecao"],tiposPermitidosFilhos:["Paragrafo","Inciso"],tipoProvavelFilho:"Inciso",INDICADOR_SEQUENCIA:["."],INDICADOR_FIM_SEQUENCIA:["NA"],INDICADOR_DESDOBRAMENTO:[":"]},capitulo:{tipo:"Capitulo",name:"Capitulo",tagId:"cap",descricao:"Captulo",descricaoPlural:"Captulos",tiposPermitidosPai:["Articulacao","Parte","Livro","Titulo"],tiposPermitidosFilhos:["Secao","Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:[""],INDICADOR_DESDOBRAMENTO:["NA"]},caput:{tipo:"Caput",name:"Caput",tagId:"cpt",descricao:"Caput",descricaoPlural:"Capita",tiposPermitidosPai:["Artigo"],tiposPermitidosFilhos:["Inciso"],tipoProvavelFilho:"Inciso",INDICADOR_SEQUENCIA:["."],INDICADOR_FIM_SEQUENCIA:["NA"],INDICADOR_DESDOBRAMENTO:[":"]},generico:{tipo:"DispositivoGenerico",name:void 0,tagId:"gen",descricao:"Dispositivo genrico",descricaoPlural:"Dispositivos genricos",tiposPermitidosPai:["Articulacao","Parte","Livro","Titulo","Capitulo","Secao","Subsecao"],tiposPermitidosFilhos:["Paragrafo","Inciso","Alinea","Item"],tipoProvavelFilho:"DispositivoGenerico",INDICADOR_SEQUENCIA:[";","; e","; ou"],INDICADOR_FIM_SEQUENCIA:["."],INDICADOR_DESDOBRAMENTO:[":"]},inciso:{tipo:"Inciso",name:"Inciso",tagId:"inc",descricao:"Inciso",descricaoPlural:"Incisos",tiposPermitidosPai:["Artigo","Caput","Paragrafo"],tiposPermitidosFilhos:["Alinea"],tipoProvavelFilho:"Alinea",INDICADOR_SEQUENCIA:[";","; e","; ou"],INDICADOR_FIM_SEQUENCIA:["."],INDICADOR_DESDOBRAMENTO:[":"]},item:{tipo:"Item",name:"Item",tagId:"ite",descricao:"Item",descricaoPlural:"Itens",tiposPermitidosPai:["Alinea"],tiposPermitidosFilhos:[],tipoProvavelFilho:"DispositivoGenerico",INDICADOR_SEQUENCIA:[";","; e","; ou"],INDICADOR_FIM_SEQUENCIA:["."],INDICADOR_DESDOBRAMENTO:[":"]},livro:{tipo:"Livro",name:"Livro",tagId:"liv",descricao:"Livro",descricaoPlural:"Livros",tiposPermitidosPai:["Articulacao","Parte"],tiposPermitidosFilhos:["Titulo","Capitulo","Secao","Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:[""],INDICADOR_DESDOBRAMENTO:["NA"]},omissis:{tipo:"Omissis",name:"Omissis",tagId:"omi",descricao:"Omissis",descricaoPlural:"Linhas pontilhadas (omissis)",tiposPermitidosPai:["Articulacao","Parte","Livro","Titulo","Capitulo","Secao","Subsecao","Artigo","Caput","Paragrafo","Alinea","Inciso"],tiposPermitidosFilhos:["Parte","Livro","Titulo","Capitulo","Secao","Subsecao","Artigo","Paragrafo","Alinea","Inciso","Item"],tipoProvavelFilho:void 0,INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:["NA"],INDICADOR_DESDOBRAMENTO:["NA"]},paragrafo:{tipo:"Paragrafo",name:"Paragrafo",tagId:"par",descricao:"Pargrafo",descricaoPlural:"Pargrafos",tiposPermitidosPai:["Artigo"],tiposPermitidosFilhos:["Inciso"],tipoProvavelFilho:"Inciso",INDICADOR_SEQUENCIA:["."],INDICADOR_FIM_SEQUENCIA:["NA"],INDICADOR_DESDOBRAMENTO:[":"]},parte:{tipo:"Parte",name:"Parte",tagId:"prt",descricao:"Parte",descricaoPlural:"Partes",tiposPermitidosPai:["Articulacao"],tiposPermitidosFilhos:["Livro","Titulo","Capitulo","Secao","Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:[""],INDICADOR_DESDOBRAMENTO:["NA"]},secao:{tipo:"Secao",name:"Secao",tagId:"sec",descricao:"Seo",descricaoPlural:"Sees",tiposPermitidosPai:["Articulacao","Parte","Livro","Titulo","Capitulo"],tiposPermitidosFilhos:["Subsecao","Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:[""],INDICADOR_DESDOBRAMENTO:["NA"]},subsecao:{tipo:"Subsecao",name:"Subsecao",tagId:"sub",descricao:"Subseo",descricaoPlural:"Subsees",tiposPermitidosPai:["Secao"],tiposPermitidosFilhos:["Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:[""],INDICADOR_DESDOBRAMENTO:["NA"]},titulo:{tipo:"Titulo",name:"Titulo",tagId:"tit",descricao:"Ttulo",descricaoPlural:"Ttulos",tiposPermitidosPai:["Articulacao","Parte","Livro"],tiposPermitidosFilhos:["Capitulo","Secao","Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:[""],INDICADOR_DESDOBRAMENTO:["NA"]}};class hn{constructor(t){var e;this.isDispositivoAlteracao=!1,this.descricao=`Adicionar ${null!==(e=null==t?void 0:t.descricao)&&void 0!==e?e:""}`,this.tipo=null==t?void 0:t.tipo}execute(t,e,o,i=!1){return{type:"ADICIONAR_ELEMENTO",atual:t,novo:{tipo:o,isDispositivoAlteracao:this.isDispositivoAlteracao,conteudo:{texto:e}},hasDesmembramento:i}}}const fn=new hn,mn=new hn(pn.artigo),vn=new hn(pn.alinea),gn=new hn(pn.inciso),bn=new hn(pn.item),yn=new hn(pn.omissis),xn=new hn(pn.paragrafo);class wn{constructor(t){this.descricao="Adicionar "+t.descricao,this.tipo=t.tipo}execute(t){return{type:"AGRUPAR_ELEMENTO",atual:t,novo:{tipo:this.tipo}}}}const En=new wn(pn.parte),On=new wn(pn.livro),qn=new wn(pn.titulo),_n=new wn(pn.capitulo),An=new wn(pn.secao),Sn=new wn(pn.subsecao);const In=new class{constructor(){this.descricao="Atualizar dispositivo"}execute(t){return{type:"APLICAR_ALTERACOES_EMENDA",alteracoesEmenda:t}}};const Nn=new class{constructor(){this.descricao="Atualizar dispositivo"}execute(t){return this.tipo=t.tipo,{type:"ATUALIZAR_ELEMENTO",atual:t}}};const kn=new class{constructor(){this.descricao="Atualizar Norma Referenciada"}execute(t){return this.tipo=t.tipo,{type:"ATUALIZAR_REFERENCIA_ELEMENTO",atual:t}}};const Pn=new class{constructor(){this.descricao="Atualizar dispositivo"}execute(t){return this.tipo=t.tipo,{type:"ATUALIZAR_TEXTO_ELEMENTO",atual:t}}};const Tn=new class{constructor(){this.descricao="Elemento selecionado"}execute(t){return{type:"ELEMENTO_SELECIONADO",atual:t}}};const Cn=new class{constructor(){this.descricao="Informar norma alterada"}execute(t){return{type:"INFORMAR_NORMA",atual:t}}};class Rn{constructor(){this.descricao="Mover para baixo"}execute(t){return{type:"Mover para baixo",atual:t}}}const Dn=new Rn;class Ln{constructor(){this.descricao="Mover para cima"}execute(t){return{type:"Mover para cima",atual:t}}}const jn=new Ln;class Mn{constructor(){this.descricao="Remover dispositivo"}execute(t){return{type:"REMOVER_ELEMENTO",atual:t}}}const Fn=new Mn;class Un{constructor(){this.descricao="Numerar e criar rtulo para o dispositivo "}execute(t,e){return this.tipo=t.tipo,{type:"RENUMERAR_ELEMENTO",atual:t,novo:{numero:e}}}}const Bn=new Un;const zn=new class{constructor(){this.descricao="Abandonar modificaes do dispositivo"}execute(t){return{type:"RESTAURAR_ELEMENTO",atual:t}}};const Vn=new class{constructor(){this.descricao="Suprimir dispositivo"}execute(t){return{type:"SUPRIMIR_ELEMENTO",atual:t}}};class Hn{constructor(t,e,o){this.descricao=e,this.tipo=t.tipo,this.nomeAcao=o}execute(t){return{type:"TRANSFORMAR_TIPO_ELEMENTO",subType:this.nomeAcao,atual:t,novo:{tipo:this.tipo}}}}const $n=new Hn(pn.omissis,"Transformar em Omissis de Alnea","transformarAlineaEmOmissisAlinea"),Kn=new Hn(pn.omissis,"Transformar em Omissis de Inciso de Caput","transformarIncisoCaputEmOmissisIncisoCaput"),Qn=new Hn(pn.omissis,"Transformar em Omissis de Item","transformarItemEmOmissisItem"),Gn=new Hn(pn.omissis,"Transformar em Omissis de Pargrafo","transformarParagrafoEmOmissisParagrafo"),Wn=new Hn(pn.omissis,"Transformar em Omissis de Inciso de Pargrafo","transformarIncisoParagrafoEmOmissisIncisoParagrafo"),Zn=new Hn(pn.inciso,"Transformar Alnea em Inciso","transformarAlineaEmIncisoCaput"),Xn=new Hn(pn.inciso,"Transformar Alnea em Inciso","transformarAlineaEmIncisoParagrafo"),Yn=new Hn(pn.item,"Transformar Alnea em Item","transformarAlineaEmItem"),Jn=new Hn(pn.paragrafo,"Transformar Artigo em Pargrafo","transformarArtigoEmParagrafo"),tr=new Hn(pn.inciso,"Transformar em Inciso","transformarDispositivoGenericoEmInciso"),er=new Hn(pn.alinea,"Transformar em Alnea","transformarDispositivoGenericoEmAlinea"),or=new Hn(pn.item,"Transformar em Item","transformarDispositivoGenericoEmItem"),ir=new Hn(pn.paragrafo,"Transformar Inciso em Pargrafo","transformarIncisoParagrafoEmParagrafo"),nr=new Hn(pn.paragrafo,"Transformar Inciso Caput em Pargrafo","transformarIncisoCaputEmParagrafo"),rr=new Hn(pn.alinea,"Transformar Inciso de Caput em Alnea","transformarIncisoCaputEmAlinea"),sr=new Hn(pn.alinea,"Transformar Inciso de Caput em Alnea","transformarIncisoParagrafoEmAlinea"),ar=new Hn(pn.alinea,"Transformar Omissis em Alnea","transformarOmissisEmAlinea"),lr=new Hn(pn.artigo,"Transformar Omissis em Artigo","transformarOmissisEmArtigo"),ur=new Hn(pn.inciso,"Transformar Omissis em Inciso de Caput","transformarOmissisEmIncisoCaput"),cr=new Hn(pn.inciso,"Transformar Omissis em Inciso de Pargrafo","transformarOmissisEmIncisoParagrafo"),dr=new Hn(pn.item,"Transformar Omissis em Item","transformarOmissisEmItem"),pr=new Hn(pn.paragrafo,"Transformar Omissis em Pargrafo","transformarOmissisEmParagrafo"),hr=new Hn(pn.alinea,"Transformar Item em Alnea","transformarItemEmAlinea"),fr=new Hn(pn.artigo,"Transformar Pargrafo em Artigo","transformarParagrafoEmArtigo"),mr=new Hn(pn.inciso,"Transformar Pargrafo em Inciso de Pargrafo","transformarParagrafoEmIncisoParagrafo"),vr=new Hn(pn.inciso,"Transformar Pargrafo em Inciso de Caput","transformarParagrafoEmIncisoCaput");const gr=new class{constructor(){this.descricao="Articulao validada"}execute(){return{type:"VALIDAR_ARTICULACAO"}}};const br=new class{constructor(){this.descricao="Elemento validado"}execute(t){return{type:"VALIDAR_ELEMENTO",atual:t}}},yr=t=>t.tipo===pn.articulacao.tipo,xr=t=>t.tipo===pn.generico.tipo,wr=t=>t.tipo===pn.artigo.tipo,Er=t=>t.tipo===pn.caput.tipo,Or=t=>t.tipo===pn.paragrafo.tipo,qr=t=>t.tipo===pn.inciso.tipo,_r=t=>qr(t)&&Er(t.pai),Ar=t=>qr(t)&&Or(t.pai),Sr=t=>t.tipo===pn.alinea.tipo,Ir=t=>t.tipo===pn.item.tipo,Nr=t=>t.tipo===pn.omissis.tipo,kr=t=>[pn.articulacao.tipo,pn.agrupadorGenerico.tipo,pn.capitulo.tipo,pn.livro.tipo,pn.parte.tipo,pn.secao.tipo,pn.subsecao.tipo,pn.titulo.tipo].includes(t.tipo),Pr=t=>t.tipo===pn.agrupadorGenerico.tipo,Tr=t=>[pn.paragrafo.tipo,pn.inciso.tipo,pn.alinea.tipo,pn.item.tipo].includes(t.tipo);function Cr(t,e){return!0===e.map((e=>new RegExp(Lr(Dr(e))+"\\s*$").test(t))).filter((t=>t))[0]}function Rr(t){switch(t[0].trim()){case".":return"ponto";case":":return"dois pontos";case";":return"ponto e vrgula";case",":return"vrgula";default:return t[0].trim()}}function Dr(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function Lr(t){return t.replace(/\s+/g,"\\s+")}function jr(t){return t.replace(/\s{2,}/g," ")}class Mr{constructor(t){this.strs=new Array,t&&this.append(t)}append(t){t&&this.strs.push(t)}toString(){return function(t){let e="";return t.forEach((t=>{e+=t})),e}(this.strs)}}var Fr;!function(t){t.DISPOSITIVO_ADICIONADO="Dispositivo Adicionado",t.DISPOSITIVO_NOVO="Dispositivo Novo",t.DISPOSITIVO_MODIFICADO="Dispositivo Modificado",t.DISPOSITIVO_ORIGINAL="Dispositivo Original",t.DISPOSITIVO_SUPRIMIDO="Dispositivo Suprimido"}(Fr||(Fr={}));const Ur=t=>[Fr.DISPOSITIVO_ADICIONADO.toString(),Fr.DISPOSITIVO_MODIFICADO.toString(),Fr.DISPOSITIVO_SUPRIMIDO.toString()].includes(t.situacao.descricaoSituacao),Br=t=>!!Ur(t)||void 0!==t.pai&&Br(t.pai);function zr(t){if(!t)return t;if(yr(t))return t;if(void 0===t.pai)throw new Error("No foi encontrada a articulao");return zr(t.pai)}function Vr(t,e){if(e.uuid===t)return e;if(null!==e.filhos){let o=null;const i=e.hasAlteracao()?e.alteracoes.filhos:e.filhos;for(let e=0;null===o&&e<i.length;e++)o=Vr(t,i[e]);return o}return null}const Hr=(t,e)=>{if(void 0===e)throw new Error("uuid no foi informado");return Vr(e,t)},$r=t=>{var e;return ns(t)?$r(t.filhos[t.filhos.length-1]):(null==t?void 0:t.hasAlteracao())&&(null===(e=t.alteracoes)||void 0===e?void 0:e.filhos.length)?$r(t.alteracoes.filhos[t.alteracoes.filhos.length-1]):t},Kr=t=>wr(t)?zr(t).artigos.filter((e=>e.tipo===t.tipo)):t.pai?t.pai.filhos.filter((e=>e.tipo===t.tipo)):[t],Qr=(t,e,o)=>{if(null==t?void 0:t.filhos){for(let i=null==t?void 0:t.indexOf(e);i>=0;i--){const e=null==t?void 0:t.filhos[i];kr(e)&&o.push(e)}if(null==t?void 0:t.pai)return Qr(t.pai,e.pai,o)}return o},Gr=(t,e)=>{if(t&&t.pai)return t.pai&&t.pai.tipo===e?t.pai:Gr(t.pai,e)},Wr=t=>wr(t.pai)?t.pai:Wr(t.pai),Zr=(t,e)=>{if(null==t?void 0:t.filhos){for(let o=(null==t?void 0:t.indexOf(e))-1;o>=0;o--){const e=null==t?void 0:t.filhos[o];if(wr(e))return e;if(kr(e))return Xr(e)}if(null==t?void 0:t.pai)return Zr(t.pai,e.pai)}},Xr=t=>{if(void 0!==t&&t.filhos)for(let e=t.filhos.length-1;e>=0;e--){const o=t.filhos[e];if(wr(o))return o;if(kr(o))return Xr(o)}},Yr=t=>{const e=t.pai.indexOf(t);return t.pai.filhos.filter(((t,o)=>o>e&&kr(t)))[0]},Jr=t=>{var e;return(null===(e=t.filhos)||void 0===e?void 0:e.filter((t=>xr(t))).length)>0},ts=t=>1===Kr(t).length,es=t=>{const e=Kr(t);return e[e.length-1]===t},os=t=>{const e=Kr(t);return e.length>1&&e[e.length-2]===t},is=t=>Kr(t)[0]===t,ns=t=>t.filhos&&t.filhos.length>0,rs=t=>{const e=t.pai.indexOf(t);return e>0?t.pai.filhos[e-1]:void 0},ss=t=>{const e=Kr(t),o=e.indexOf(t);return o>0?e[o-1]:void 0},as=t=>{const e=t.pai.indexOf(t);if(0===e)return;return t.pai.filhos.filter(((o,i)=>i<e&&(o.tipo===t.tipo||o.tipo===yn.tipo))).pop()},ls=t=>{const e=t.pai.indexOf(t);return e<t.pai.filhos.length-1?t.pai.filhos[e+1]:void 0},us=t=>{var e,o,i;const n=null===(e=t.pai)||void 0===e?void 0:e.indexOf(t);return null!==(i=null===(o=t.pai)||void 0===o?void 0:o.filhos.filter(((e,o)=>o<n&&e.tipo===t.tipo&&e.pai===t.pai)))&&void 0!==i?i:[]},cs=t=>{var e,o,i;const n=null===(e=t.pai)||void 0===e?void 0:e.indexOf(t);return null!==(i=null===(o=t.pai)||void 0===o?void 0:o.filhos.filter(((e,o)=>o>n&&e.tipo===t.tipo)))&&void 0!==i?i:[]},ds=t=>{const e=t.pai.indexOf(t);if(e===t.pai.filhos.length-1)return;return t.pai.filhos.filter(((o,i)=>i>e&&(o.tipo===t.tipo||o.tipo===yn.tipo)))[0]},ps=(t,e=!1)=>{if(wr(t)){const e=zr(t),o=zr(t).indexOfArtigo(t);return e.artigos.filter(((t,e)=>e>o))}const o=t.pai.indexOf(t);return t.pai.filhos.filter(((t,i)=>e?i>o:i>=o)).filter((e=>t.tipo===e.tipo))},hs=t=>wr(t)&&ts(t),fs=t=>Or(t)&&ts(t),ms=t=>t.cabecaAlteracao||vs(t)?t:ms(t.pai),vs=t=>xs(t)&&yr(t.pai)&&void 0!==t.pai.pai,gs=t=>{const e=ms(t),o=Os(e);return o.length>0&&o[o.length-1]===t},bs=t=>{const e=zr(t).pai;if(!e)return!1;const o=zr(e);return ts(e)||o.indexOfArtigo(e)<o.artigos.length-1},ys=t=>yr(t)&&void 0!==t.pai,xs=t=>{if(!!t.isDispositivoAlteracao)return!0;try{return void 0!==zr(t).pai}catch(t){return!1}},ws=t=>t.situacao.descricaoSituacao===Fr.DISPOSITIVO_ORIGINAL,Es=t=>t.situacao.descricaoSituacao===Fr.DISPOSITIVO_MODIFICADO||t.situacao.descricaoSituacao===Fr.DISPOSITIVO_SUPRIMIDO,Os=t=>qs(t,[]),qs=(t,e)=>{e.push(t);const o=t.hasAlteracao()?t.alteracoes.filhos:t.filhos;return o.length&&o.forEach((t=>qs(t,e))),e},_s=(t,e)=>{if(t)if(e(t),t.tipo===pn.artigo.tipo){const o=t;o.caput&&(_s(o.caput,e),t.alteracoes&&_s(t.alteracoes,e),t.filhos.filter((t=>Or(t))).forEach((t=>{_s(t,e)})))}else t.alteracoes&&_s(t.alteracoes,e),t.filhos.forEach((t=>{_s(t,e)}))},As=(t,e)=>{if(!t)return;let o=e(t);if(o)return o;if(t.tipo===pn.artigo.tipo){const i=t;if(i.caput){if(o=As(i.caput,e),o)return o;if(t.alteracoes&&(o=As(t.alteracoes,e),o))return o;for(const i of t.filhos.filter((t=>Or(t))))if(o=As(i,e),o)return o}}else{if(t.alteracoes&&(o=As(t.alteracoes,e),o))return o;for(const i of t.filhos)if(o=As(i,e),o)return o}},Ss=t=>t&&!t.pai&&t.tipo===pn.articulacao.tipo,Is=(t,e)=>{const o=Ns(e);let i=t;if(o){const n=t.artigos.find((t=>o===t.id));if(n){if(e===o||e===o+"_cpt")return n;i=n}}return As(i,(t=>e===t.id?t:void 0))},Ns=t=>{const e=/^art\d+(-\d+)*/.exec(t);return(null==e?void 0:e.length)?e[0]:void 0};var ks;!function(t){t[t.INFO=0]="INFO",t[t.WARNING=1]="WARNING",t[t.ERROR=2]="ERROR"}(ks||(ks={}));const Ps="...........................................................................................",Ts=t=>{var e;const o=wr(t)?t.caput:t;return Cr(o.texto,null!==(e=o.INDICADOR_DESDOBRAMENTO)&&void 0!==e?e:[])},Cs=t=>{var e;const o=wr(t)?t.caput:t;return Cr(o.texto,null!==(e=o.INDICADOR_FIM_SEQUENCIA)&&void 0!==e?e:[])},Rs=t=>{var e;const o=wr(t)?t.caput:t;return Cr(o.texto,null!==(e=o.INDICADOR_SEQUENCIA)&&void 0!==e?e:[])},Ds=Ps+". (NR)",Ls=t=>new RegExp(Lr(Dr("o seguinte acrscimo:"))+"\\s*$").test(t)||new RegExp(Lr(Dr("os seguintes acrscimos:"))+"\\s*$").test(t)||new RegExp(Lr(Dr("passa a vigorar com a seguinte alterao:"))+"\\s*$").test(t)||new RegExp(Lr(Dr("passa a vigorar com as seguintes alteraes:"))+"\\s*$").test(t),js=t=>/^[.]*(?:\s*)["]?(\s*)?\(NR\)\s*$/.test(t)?Ds:/["]?(\s*)?\(NR\)?\s*$/.test(t)?t.replace(/["](?!.*["])/,""):t!==Ps&&t!==Ds&&new RegExp("^[.]+$").test(t)?Ps:t,Ms=t=>/\.["](?:\s*\(NR\))\s*$/.test(t),Fs=t=>void 0!==t&&/.*:[\s]{1,2}["].*[.]["]$/.test(t),Us=t=>{var e;const o=[];return(yr(t)||t.texto)&&0!==t.texto.trim().length||o.push({tipo:ks.ERROR,descricao:"No foi informado um texto para "+(t.artigoDefinido+" "+t.descricao)}),yr(t)||!t.texto||function(t){const e=document.createElement("div");return e.innerHTML=t,e.innerHTML===t}(t.texto)||o.push({tipo:ks.ERROR,descricao:"O contedo do dispositivo no  um HTML vlido"}),!yr(t)&&t.texto&&t.texto.trim().length>300&&o.push({tipo:ks.WARNING,descricao:"Pelo princpio da conciso, o texto dos dispositivos no deve ser extenso, devendo ser utilizadas frases curtas e concisas"}),Tr(t)&&!Or(t)&&t.texto&&/^[A-Z-]/.test(t.texto)&&o.push({tipo:ks.WARNING,descricao:`${t.descricao} deveria iniciar com letra minscula, a no ser que se trate de uma situao especial, como nome prprio`}),!Tr(t)||Or(t)||Nr(t)||!t.texto||ts(t)||es(t)||os(t)||ns(t)||void 0===t.INDICADOR_SEQUENCIA||function(t){const e=t.replace(/(<([^>]+)>)/gi,"").trim();return e.length>0?e.charAt(e.length-1):""}(t.texto)===t.INDICADOR_SEQUENCIA[0]||o.push({tipo:ks.ERROR,descricao:`${t.descricao} deveria terminar com ${Rr(t.INDICADOR_SEQUENCIA)}. ${Rs(t)?"A variao informada s  permitida para o penltimo elemento":""}`}),!wr(t)&&!Or(t)||!t.texto||/^[...]{3,}/.test(t.texto)||/^[A-Z-]/.test(t.texto)||o.push({tipo:ks.ERROR,descricao:`${t.descricao} deveria iniciar com letra maiscula`}),xs(t)||kr(t)||Nr(t)||!t.texto||!(!wr(t)&&ns(t)||wr(t)&&ns(t.caput))||Ts(t)||o.push({tipo:ks.ERROR,descricao:`${t.descricao} deveria terminar com ${Rr(t.INDICADOR_DESDOBRAMENTO)}`}),xs(t)||!Tr(t)||Or(t)||!t.texto||!ts(t)&&!es(t)||Jr(t.pai)||ns(t)||Cs(t)||o.push({tipo:ks.ERROR,descricao:`ltimo dispositivo de uma sequncia deveria terminar com ${Rr(t.INDICADOR_FIM_SEQUENCIA)}`}),xs(t)||!Tr(t)||Or(t)||!t.texto||ts(t)||!os(t)||ns(t)||Rs(t)||o.push({tipo:ks.ERROR,descricao:`${t.descricao} deveria terminar com uma das seguintes possibilidades: ${t.INDICADOR_SEQUENCIA.join("     ")}`}),xs(t)||!wr(t)&&!Or(t)||!t.texto||ns(t)||t.hasAlteracao()||ts(t)||Rs(t)||Fs(t.texto)||o.push({tipo:ks.ERROR,descricao:`${t.descricao} deveria terminar com ${Rr(t.INDICADOR_SEQUENCIA)}`}),!xs(t)&&wr(t)&&t.texto&&t.hasAlteracao()&&!Ts(t)&&!Ls(t.texto)&&o.push({tipo:ks.ERROR,descricao:`${t.descricao} deveria terminar com ${Rr(t.INDICADOR_DESDOBRAMENTO)}`}),xs(t)||!wr(t)||!t.texto||t.hasAlteracao()||ns(t)&&ns(t.caput)||!Ts(t)||o.push({tipo:ks.ERROR,descricao:`${t.descricao} deveria terminar com ${Rr(t.INDICADOR_SEQUENCIA)}`}),!xs(t)&&wr(t)&&t.hasAlteracao()&&!(null===(e=t.alteracoes)||void 0===e?void 0:e.base)&&o.push({tipo:ks.ERROR,descricao:" necessrio informar a norma a ser alterada"}),xs(t)&&!kr(t)&&t.texto!==Ps&&t.texto&&(!wr(t)&&ns(t)||wr(t)&&ns(t.caput))&&!Ts(t)&&o.push({tipo:ks.ERROR,descricao:`${t.descricao} deveria terminar com ${Rr(t.INDICADOR_DESDOBRAMENTO)}`}),!(xs(t)&&Or(t)&&t.texto)||ns(t)||ts(t)||es(t)||Rs(t)||o.push({tipo:ks.ERROR,descricao:`${t.descricao} deveria terminar com ${Rr(t.INDICADOR_SEQUENCIA)}`}),!xs(t)||!gs(t)||t.texto&&Ms(t.texto)||o.push({tipo:ks.ERROR,descricao:"O ltimo dispositivo do bloco de alterao deve terminar com: <b>.&#8221; (NR)</b>"}),xs(t)&&t.texto&&!gs(t)&&/.*["]$/.test(t.texto)&&!Fs(t.texto)&&!/.*(NR)/.test(t.texto)&&o.push({tipo:ks.ERROR,descricao:"Somente o ltimo dispositivo do bloco de alterao poderia ser finalizado com aspas"}),xs(t)&&t.texto&&!gs(t)&&/.*(NR)/.test(t.texto)&&o.push({tipo:ks.ERROR,descricao:"Somente o ltimo dispositivo do bloco de alterao poderia terminar com &#8221; (NR)"}),xs(t)&&t.texto&&t===ms(t)&&0===t.filhos.length&&(t.texto===Ds||t.texto===Ps)&&o.push({tipo:ks.ERROR,descricao:"No foi informada nenhuma alterao"}),!(xs(t)&&t.texto&&Tr(t))||Or(t)||Nr(t)||0!==t.pai.filhos.filter((t=>Nr(t))).length||!ts(t)||Jr(t.pai)||ns(t)||Cs(t)||gs(t)||o.push({tipo:ks.ERROR,descricao:`ltimo dispositivo de uma sequncia deveria terminar com ${Rr(t.INDICADOR_FIM_SEQUENCIA)}`}),o},Bs=t=>kr(t)?(t=>{const e=[];var o,i;return yr(t)||t.texto&&0!==t.texto.trim().length||e.push({tipo:ks.ERROR,descricao:`No foi informado um texto para ${t.artigoDefinido} ${t.descricao}`}),!yr(t)&&t.texto&&(o=t.texto,/[.,:]\s*$/.test(o))&&e.push({tipo:ks.ERROR,descricao:`No pode haver sinal de pontuao ao final do texto d${t.artigoDefinido} ${t.descricao}`}),!yr(t)&&(i=t.texto,/<.+>/g.test(null==i?void 0:i.trim()))&&e.push({tipo:ks.ERROR,descricao:`Texto d${t.artigoDefinido} ${t.descricao} no pode possuir formatao`}),e})(t):Us(t);var zs;function Vs(t){return class extends t{constructor(){super(...arguments),this.tipoGenero="feminino",this.artigoDefinido="a",this.pronomePossessivoSingular=" da ",this.pronomePossessivoPlural=" das ",this.artigoDefinidoSingular=" a ",this.artigoDefinidoPlural=" as ",this.artigoIndefinidoSingular=" uma ",this.artigoDefinidoPrecedidoPreposicaoASingular="  ",this.artigoDefinidoPrecedidoPreposicaoAPlural=" s ",this.contracaoEmArtigoDefinidoSingular=" na "}}}function Hs(t){return class extends t{constructor(){super(...arguments),this.tipoGenero="indefinido",this.artigoDefinido="",this.pronomePossessivoSingular="",this.pronomePossessivoPlural="",this.artigoDefinidoSingular="",this.artigoDefinidoPlural="",this.artigoIndefinidoSingular="",this.artigoDefinidoPrecedidoPreposicaoASingular="",this.artigoDefinidoPrecedidoPreposicaoAPlural="",this.contracaoEmArtigoDefinidoSingular=""}}}function $s(t){return class extends t{constructor(){super(...arguments),this.tipoGenero="masculino",this.artigoDefinido="o",this.pronomePossessivoSingular=" do ",this.pronomePossessivoPlural=" dos ",this.artigoDefinidoSingular=" o ",this.artigoDefinidoPlural=" os ",this.artigoIndefinidoSingular=" um ",this.artigoDefinidoPrecedidoPreposicaoASingular=" ao ",this.artigoDefinidoPrecedidoPreposicaoAPlural=" aos ",this.contracaoEmArtigoDefinidoSingular=" no "}}}!function(t){t.MASCULINO="masculino",t.FEMININO="feminino",t.INDEFINIDO="indefinido"}(zs||(zs={}));const Ks=new(Vs(Object)),Qs=new($s(Object)),Gs=new(Hs(Object)),Ws=t=>"F"===t?Ks:"M"===t?Qs:Gs;class Zs{constructor(t,e){this.nome=t,this.genero="string"==typeof e?Ws(e):e}}const Xs={autoridades:[{urn:"federal",descricao:"Federal"},{urn:"senado.federal",descricao:"Senado Federal"},{urn:"congresso.nacional",descricao:"Congresso Nacional"}],tiposDocumento:[{urn:"lei",descricao:"Lei",genero:"F"},{urn:"lei.complementar",descricao:"Lei Complementar",genero:"F"},{urn:"lei.delegada",descricao:"Lei Delegada",genero:"F"},{urn:"decreto.legislativo",descricao:"Decreto Legislativo",genero:"M"},{urn:"decreto.lei",descricao:"Decreto-Lei",genero:"M"},{urn:"decreto",descricao:"Decreto",genero:"M"},{urn:"consolidacao.leis.trabalho",descricao:"Consolidao das Leis do Trabalho",genero:"F"},{urn:"resolucao",descricao:"Resoluo",genero:"F"},{urn:"regimento.interno",descricao:"Regimento Interno",genero:"M"},{urn:"constituicao",descricao:"Constituio",genero:"F"},{urn:"ato.disposicoes.constitucionais.transitorias",descricao:"Ato das Disposies Constitucionais Transitrias",genero:"M"},{urn:"medida.provisoria",descricao:"Medida Provisria",genero:"F"},{urn:"medida.provisoria;mpv",descricao:"Medida Provisria",genero:"F"},{urn:"emenda.constitucional",descricao:"Emenda Constitucional",genero:"F"},{urn:"emenda.constitucional.revisao",descricao:"Emenda Constitucional de Reviso",genero:"F"},{urn:"proposta.emenda.constitucional;pec",descricao:"Proposta de Emenda Constitucional",genero:"F"},{urn:"projeto.lei;pl",descricao:"Projeto de Lei",genero:"M"},{urn:"projeto.lei;pls",descricao:"Projeto de Lei do Senado",genero:"M"},{urn:"projeto.lei.complementar;plp",descricao:"Projeto de Lei Complementar",genero:"M"},{urn:"projeto.lei.complementar;pls",descricao:"Projeto de Lei Complementar do Senado",genero:"M"},{urn:"projeto.lei;plc",descricao:"Projeto de Lei da Cmara",genero:"M"},{urn:"projeto.lei.complementar;plc",descricao:"Projeto de Lei Complementar da Cmara",genero:"M"},{urn:"projeto.lei.conversao;plv",descricao:"Projeto de Lei de Converso",genero:"M"},{urn:"projeto.resolucao;prs",descricao:"Projeto de Resoluo do Senado",genero:"M"},{urn:"projeto.decreto.legislativo;pds",descricao:"Projeto de Decreto Legislativo",genero:"M"},{urn:"projeto.decreto.legislativo;pdl",descricao:"Projeto de Decreto Legislativo",genero:"M"},{urn:"substitutivo.projeto.lei.senado;scd",descricao:"Substitutivo da Cmara dos Deputados",genero:"M"},{urn:"emenda.projeto.lei.senado;ecd",descricao:"Emenda(s) da Cmara dos Deputados",genero:"F"}],fakeUrns:[{sigla:"PEC",urnAutoridade:"senado.federal",urnTipoDocumento:"proposta.emenda.constitucional;pec"},{sigla:"PL",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.lei;pl"},{sigla:"PLS",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.lei;pls"},{sigla:"PLP",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.lei.complementar;plp"},{sigla:"PLC",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.lei;plc"},{sigla:"PLV",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.lei.conversao;plv"},{sigla:"PRS",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.resolucao;prs"},{sigla:"PDS",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.decreto.legislativo;pds"},{sigla:"PDL",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.decreto.legislativo;pdl"},{sigla:"SCD",urnAutoridade:"senado.federal",urnTipoDocumento:"substitutivo.projeto.lei.senado;scd"},{sigla:"ECD",urnAutoridade:"senado.federal",urnTipoDocumento:"emenda.projeto.lei.senado;ecd"},{sigla:"MPV",urnAutoridade:"senado.federal",urnTipoDocumento:"medida.provisoria;mpv"}],siglas:[{urnAutoridade:"federal",urnTipoDocumento:"medida.provisoria",sigla:"MPV"},{urnAutoridade:"congresso.nacional",urnTipoDocumento:"projeto.lei",sigla:"PLN"},{urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.lei",sigla:"PLS"},{urnAutoridade:"congresso.nacional",urnTipoDocumento:"medida.provisoria",sigla:"MPV"},{urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.lei.senado.federal",sigla:"PLS"},{urnAutoridade:"camara.deputados",urnTipoDocumento:"projeto.lei",sigla:"PLC"}],atalhosUrn:[{urnTipoDocumento:"constituicao",urnAutoridade:"federal",urn:"urn:lex:br:federal:constituicao:1988-10-05;1988",nome:"Constituio Federal"},{urnTipoDocumento:"ato.disposicoes.constitucionais.transitorias",urnAutoridade:"federal",urn:"urn:lex:br:federal:ato.disposicoes.constitucionais.transitorias:1988-10-05;1988",nome:"Ato das Disposies Constitucionais Transitrias - ADCT"},{urnTipoDocumento:"consolidacao.leis.trabalho",urnAutoridade:"federal",urn:"urn:lex:br:federal:decreto.lei:1943-05-01;5452",nome:"Consolidao das Leis do Trabalho - CLT, aprovada pelo Decreto-Lei n 5.452, de 1 de maio de 1943",genero:"F"},{urnTipoDocumento:"regimento.interno",urnAutoridade:"senado.federal",urn:"urn:lex:br:senado.federal:resolucao:1970-11-27;93",nome:"Regimento Interno do Senado Federal",genero:"M"},{urnTipoDocumento:"regimento.interno",urnAutoridade:"congresso.nacional",urn:"urn:lex:br:congresso.nacional:resolucao:1970-08-11;1",nome:"Regimento Comum do Congresso Nacional",genero:"M"}],eventos:[{urn:"leitura",tipoTextoProcessoLegislativo:"Texto inicial",genero:"M"},{urn:"aprovacao.substitutivo.decisao.terminativa",tipoTextoProcessoLegislativo:"Redao do vencido em turno suplementar na Comisso",substitutivo:"s",genero:"F"},{urn:"aprovacao.substitutivo",tipoTextoProcessoLegislativo:"Redao do vencido em turno suplementar no Plenrio",substitutivo:"s",genero:"F"},{urn:"apresentacao.substitutivo",tipoTextoProcessoLegislativo:"Texto do substitutivo",substitutivo:"s",genero:"M"}]},Ys=t=>{var e;const o=null===(e=t.replace("urn:lex:br:",""))||void 0===e?void 0:e.split(":");return Xs.tiposDocumento.filter((t=>t.urn===o[1]))[0]},Js=t=>{var e,o,i;const n=null===(e=t.replace("urn:lex:br:",""))||void 0===e?void 0:e.split(":");return(null===(o=n[2])||void 0===o?void 0:o.indexOf(";"))>-1?null===(i=n[2])||void 0===i?void 0:i.substring(n[2].indexOf(";")+1):""},ta=t=>{var e,o,i,n,r;const s=null===(e=t.replace("urn:lex:br:",""))||void 0===e?void 0:e.split(":"),a=null===(o=s[2])||void 0===o?void 0:o.substring(0,s[2].indexOf(";"));if(/\d{4}$/.test(a))return a;const l=null===(r=null===(n=null===(i=s[2])||void 0===i?void 0:i.substring(0,s[2].indexOf(";")))||void 0===n?void 0:n.split("-"))||void 0===r?void 0:r.reverse();return l?l.join("/"):""},ea=t=>{const e=t.indexOf("!");return-1!==e?t.substring(0,e):t},oa=t=>{const e=t.match(/^(0[1-9]|[12][0-9]|3[01])[-/](0[1-9]|1[012])[-/](\d{4})$/);return e?`${e[3]}-${e[2]}-${e[1]}`:""},ia=t=>{var e,o;const i=null===(e=(t=>{var e;const o=null===(e=t.replace("urn:lex:br:",""))||void 0===e?void 0:e.split(":");return Xs.autoridades.filter((t=>t.urn===o[0]))[0]})(t))||void 0===e?void 0:e.urn,n=null===(o=Ys(t))||void 0===o?void 0:o.urn,r=/^\d{1,5}$/.test(Js(t)),s=/\d{4}$/.test(ta(t))?ta(t):oa(ta(t));return(null==t?void 0:t.startsWith("urn:lex:br:"))&&i&&n&&r&&s},na=t=>{var e;const o=ea(t),i=Js(o),n=null===(e=Ys(o))||void 0===e?void 0:e.descricao,r=ta(o),[s,a,l]=r.split("/").map((t=>parseInt(t))),u=r.length>7?ra(new Date(l,a-1,s)):void 0;return(n||"")+(i?" n "+parseInt(i).toLocaleString("pt-BR"):"")+(u?", de "+u:"")},ra=t=>t?t.getDate()+" de "+t.toLocaleDateString("pt-BR",{month:"long"})+" de "+t.getFullYear():void 0,sa={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XV:40,X:10,IX:9,V:5,IV:4,I:1},aa=t=>/^\d{1,}([-]?[a-zA-Z]+)?$/.test(t),la=t=>/^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$/i.test(t),ua=t=>{if(!/[a-zA-Z]+/.test(t))throw new Error(`O valor ${t} no  uma sequncia de letras vlida.`);t=t.toLowerCase();let e=0;return[...t].forEach((t=>e=t.toLowerCase().charCodeAt(0)-97+1+26*e)),e.toString()},ca=t=>{const e=parseInt(t);return e?da(e):t},da=t=>{let e="",o=0;for(;t>0;)o=(t-1)%26,t=(t-o-1)/26,e=e.replace(/^/,String.fromCharCode(97+o));return e},pa=t=>{if(!la(t))throw new Error("O valor '"+t+"' no  um nmero em algarismo romano vlido.");let e=0,o=1;for(let i=(t=t.toLowerCase()).length-1;i>=0;i--){const n=ha(t.charAt(i));n>o&&(o=n),n<o?e-=n:e+=n}return e.toString()},ha=t=>{switch(t.toLowerCase()){case"i":return 1;case"v":return 5;case"x":return 10;case"l":return 50;case"c":return 100;case"d":return 500;case"m":return 1e3;default:return 0}},fa=t=>{let e,o="",i=-1===t.search(/[a-zA-Z-]/)?parseInt(t):parseInt(t.substring(0,t.search(/[a-zA-Z-]/)));const n=-1===t.search(/[a-zA-Z-]/)?"":t.substring(t.search(/[a-zA-Z-]/));for(const t in sa){if(e=Math.floor(i/sa[t]),e>=0)for(let i=0;i<e;i++)o+=t;i%=sa[t]}return o+n},ma=(t,e)=>{const o=-1===t.search(/-[a-zA-Z-]/)?t:t.substring(0,t.search(/-[a-zA-Z-]/)),i=-1===t.search(/-[a-zA-Z-]/)?"":t.substring(t.search(/-[a-zA-Z-]/));return(e?e(o):o)+(null==i?void 0:i.toUpperCase())},va=(t,e)=>!t||e&&t<e?1:!e||t&&t>e?-1:0,ga=t=>{var e;return(wr(t)?null!==(e=(t=>{const e=zr(t).indexOfArtigo(t);return-1===e||zr(t).artigos.length===e+1?[]:zr(t).artigos.filter(((t,o)=>o>e))})(t))&&void 0!==e?e:[]:cs(t)).filter((t=>ws(t))).length>0},ba=t=>{let e=0;const o=t.tipo;do{(ws(t)||Es(t))&&t.tipo===o&&e++,t=wr(t)?Zr(t.pai,t):rs(t)}while(void 0!==t);return e},ya=t=>{let e=0;const o=t.tipo;for(;void 0!==t&&!ws(t)&&!Es(t)&&t.tipo===o;)e++,t=wr(t)?Zr(t.pai,t):rs(t);return e},xa=t=>(t=>{const e=ba(t);if(ws(t))return new wa(e);const o=ya(t),i=e>0,n=ga(t);if(!i&&!n)return new wa(o);if(!i&&n){const t=new wa(0);return t.addNovoSeqOrdem(o),t}if(i&&n){const t=new wa(e);return t.addNovoSeqOrdem(o),t}return new wa(e+o)})(t).getNumeracao(Br(t));class wa{constructor(t){this.seq=t}addNovoSeqOrdem(t){this.seq>0?this.letras=da(t).toUpperCase():t>1&&(this.letras=da(t-1).toUpperCase())}getNumeracao(t){var e;return this.seq+(t&&this.letras?"-":"")+(null!==(e=this.letras)&&void 0!==e?e:"")}}const Ea=t=>xs(t)?(t=>{var e,o,i,n,r,s,a;const l=[];var u;return null===t&&l.push({tipo:ks.ERROR,descricao:"O dispositivo no foi informado"}),null!==t&&void 0!==t.numero&&0===t.numero.trim().length&&l.push({tipo:ks.ERROR,descricao:"O dispositivo no contm numerao"}),null!==t&&0===(null===(e=t.rotulo)||void 0===e?void 0:e.trim().length)&&l.push({tipo:ks.ERROR,descricao:"O dispositivo no contm rtulo"}),null!==t&&!xr(t)&&(null===(o=t.rotulo)||void 0===o?void 0:o.endsWith(t.tipo))&&l.push({tipo:ks.ERROR,descricao:"O rtulo informado no  vlido. Numere o dispositivo"}),null!==t&&xs(t)&&Or(t)&&!ts(t)&&(null===(i=t.rotulo)||void 0===i?void 0:i.endsWith("nico."))&&l.push({tipo:ks.ERROR,descricao:`Quando houver mais de um ${t.descricao}, no pode se tratar de '${t.descricao} nico'`}),null===t||vs(t)||void 0===t.numero||0!==(null===(n=t.pai)||void 0===n?void 0:n.indexOf(t))||"1"===t.numero||l.push({tipo:ks.ERROR,descricao:" necessrio um omissis antes deste dispositivo"}),null===t||!Nr(t)||(null===(r=rs(t))||void 0===r?void 0:r.tipo)!==pn.omissis.name&&(null===(s=ls(t))||void 0===s?void 0:s.tipo)!==pn.omissis.name||l.push({tipo:ks.ERROR,descricao:"No pode haver mais de um omissis sequencialmente"}),null!==t&&void 0!==t.numero&&t.pai.indexOf(t)>0&&us(t).filter((t=>void 0!==t.numero)).filter((e=>-1===va(e.numero,t.numero))).length>0&&l.push({tipo:ks.ERROR,descricao:"O dispositivo tem nmero menor do que algum dispositivo anterior"}),null!==t&&void 0!==t.numero&&!t.pai.isLastFilho(t)&&ps(t).filter((e=>t.pai===e.pai&&void 0!==e.numero)).filter((e=>1===va(e.numero,t.numero))).length>0&&l.push({tipo:ks.ERROR,descricao:"O dispositivo tem nmero maior do que algum dispositivo posterior"}),null!==t&&!vs(t)&&void 0!==t.numero&&Kr(t).filter((e=>e.numero&&e.numero===t.numero)).length>1&&l.push({tipo:ks.ERROR,descricao:"O dispositivo tem nmero igual a de outro dispositivo"}),null!==t&&!vs(t)&&void 0!==t.numero&&(u=t.numero,/^\d+$/.test(u))&&parseInt(t.numero)>2&&t.pai.indexOf(t)>0&&ss(t)&&t.tipo!==(null===(a=ss(t))||void 0===a?void 0:a.rotulo)&&0===Kr(t).filter((e=>e.numero&&e.numero===t.numero)).length&&parseInt(t.numero)!==parseInt(ss(t).numero)+1&&l.push({tipo:ks.ERROR,descricao:" necessrio um omissis antes deste dispositivo"}),l})(t):(t=>{const e=[];return null===t&&e.push({tipo:ks.ERROR,descricao:"O dispositivo no foi informado"}),null!==t&&t.numero&&0===t.numero.trim().length&&e.push({tipo:ks.ERROR,descricao:"O dispositivo no contm numerao"}),null!==t&&t.rotulo&&0===t.rotulo.trim().length&&e.push({tipo:ks.ERROR,descricao:"O dispositivo no contm rtulo"}),e})(t),Oa=t=>ws(t)?[]:(t=>{const e=[];if(null===t&&e.push({tipo:ks.ERROR,descricao:"O dispositivo no foi informado"}),null!==t&&t.filhos.length>0&&0===t.tiposPermitidosFilhos.length&&e.push({tipo:ks.ERROR,descricao:`Segundo a Legislao vigente, ${t.descricao} no poderia possuir filhos`}),null!==t&&(xr(t)||Pr(t))&&e.push({tipo:ks.ERROR,descricao:"No foi possvel validar a natureza deste dispositivo com base na legislao vigente"}),null===t||!t.pai||Pr(t.pai)||xr(t)||t.tiposPermitidosPai.includes(t.pai.tipo)||e.push({tipo:ks.ERROR,descricao:`Segundo a Legislao vigente, ${t.descricao} somente poderia pertencer a ${t.tiposPermitidosPai.join(", ")}`}),null!==t&&!xr&&t.filhos.length>0&&(0===t.tiposPermitidosFilhos.length||t.filhos.filter((e=>!t.tiposPermitidosFilhos.includes(e.tipo))).length>0)){const o=0===t.tiposPermitidosFilhos.length?"no poderia possuir filhos":`somente poderia possuir ${t.tiposPermitidosFilhos.join(", ")}`;e.push({tipo:ks.ERROR,descricao:`Segundo a Legislao vigente, ${t.descricao} ${o}`})}return e})(t).concat(Bs(t),Ea(t),(t=>{const e=[];return t.alteracoes&&t.alteracoes.base?(ia(t.alteracoes.base)||e.push({tipo:ks.ERROR,descricao:"No foi informada uma norma alterada vlida"}),e):[]})(t));class qa{constructor(t){this.descricaoSituacao=Fr.DISPOSITIVO_SUPRIMIDO,this.dispositivoOriginal=t}getAcoesPermitidas(t,e){const o=[];return(_r(t)?t.pai.pai:t.pai).situacao.descricaoSituacao!==Fr.DISPOSITIVO_SUPRIMIDO&&o.push(zn),o}}const _a=t=>yr(t)?"cpt_alt1":t.tagId?t.tagId+(Er(t)?"":Nr(t)?us(t).length+1:t.numero?(wr(t)||Or(t))&&"1"===t.numero&&ts(t)?"1u":(t=>{const e=null==t?void 0:t.split("-"),[o,...i]=e,n=i.map((t=>ua(t)));return(null==n?void 0:n.length)>0?o+"-"+(null==n?void 0:n.join("-").toUpperCase()):o})(t.numero):`[urn:${t.uuid}]`):void 0,Aa=(t,e=[])=>{if(yr(t)&&void 0===t.pai)return;const o=_a(t);if(o&&e.unshift(o),wr(t)){if(xs(t)){const o=zr(t);Aa(o,e)}}else Aa(t.pai,e)},Sa=t=>{const e=[];return Aa(t,e),e.join("_")},Ia=t=>{var e,o;return void 0!==(null===(o=null===(e=t.hierarquia)||void 0===e?void 0:e.pai)||void 0===o?void 0:o.uuidAlteracao)||void 0!==t.uuidAlteracao},Na=(t,e=0)=>void 0===(null==t?void 0:t.pai)||kr(t)?e:wr(t)?xs(t)?++e:e:(e=vs(null==t?void 0:t.pai)?e+2:++e,wr(null==t?void 0:t.pai)?e:Na(t.pai,e)),ka=t=>{var e;const o=t.pai?Er(t.pai)?t.pai.pai:t.pai:void 0;return{tipo:null==o?void 0:o.tipo,uuid:null==o?void 0:o.uuid,uuidAlteracao:o&&xs(t)?null===(e=zr(t).pai)||void 0===e?void 0:e.uuid:void 0}},Pa=(t,e=!0)=>{var o,i,n;const r=t.pai;return{tipo:t.tipo,nivel:Na(t),agrupador:kr(t),hierarquia:{pai:r?ka(t):void 0,posicao:r?r.indexOf(t):void 0,numero:t.numero},editavel:!(yr(t)||t.situacao instanceof qa),sendoEditado:!1,uuid:t.uuid,lexmlId:t.id&&t.numero&&_a(t),numero:t.numero,rotulo:null!==(o=t.rotulo)&&void 0!==o?o:"",conteudo:{texto:t.texto},norma:null===(i=t.alteracoes)||void 0===i?void 0:i.base,index:0,acoesPossiveis:e?t.getAcoesPossiveis(t):[],descricaoSituacao:null===(n=t.situacao)||void 0===n?void 0:n.descricaoSituacao,mensagens:ws(t)?[]:t.mensagens}},Ta=(t,e)=>{void 0!==e.filhos&&e.filhos.forEach((e=>{var o;const i=Pa(e);wr(e)&&(i.conteudo.texto=e.caput.texto),t.push(i),wr(e)&&e.hasAlteracao()&&(null===(o=e.alteracoes)||void 0===o||o.filhos.forEach((e=>{t.push(Pa(e)),Ta(t,e)}))),Ta(t,e)}))},Ca=t=>{var e;const o=[];return o.push(Pa(t,!0)),wr(t)&&t.hasAlteracao()&&wr(t)&&t.hasAlteracao()&&(null===(e=t.alteracoes)||void 0===e||e.filhos.forEach((t=>{o.push(Pa(t)),Ta(o,t)}))),Ta(o,t),o},Ra=(t,e,o=!1)=>{var i;const n=((t,e)=>{var o,i;return!Ia(e)||ys(t)?t:null!==(i=null===(o=Ra(t,{uuid:e.hierarquia?e.hierarquia.pai.uuidAlteracao:e.uuidAlteracao}))||void 0===o?void 0:o.alteracoes)&&void 0!==i?i:t})(t,e);if(!o&&Ia(e)){const t=Ra(n,{uuid:e.hierarquia?e.hierarquia.pai.uuidAlteracao:e.uuidAlteracao});if(!(null==t?void 0:t.alteracoes))return;return null===(i=t.alteracoes)||void 0===i?void 0:i.filhos.flatMap((t=>{const e=[];return qs(t,e),e})).filter((t=>t.uuid===e.uuid))[0]}if((null==e?void 0:e.tipo)===pn.artigo.tipo){const t=n.filhos.find((t=>t.uuid===e.uuid));if(t)return t}const r=(null==e?void 0:e.tipo)===pn.articulacao.tipo||void 0===(null==e?void 0:e.uuid)?n:Hr(n,e.uuid);if(null!==r)return r},Da=(t,e,o)=>{var i;const n=Oa(e);if(n.length>0||e.mensagens&&(null===(i=e.mensagens)||void 0===i?void 0:i.length)>0){e.mensagens=n;const i=Pa(e,o);i.mensagens=Oa(e),t.push(i)}},La=(t,e=!0)=>{const o=[];if(!t)return[];if(xs(t)&&ns(t)&&t.filhos.filter((t=>t.tipo===pn.omissis.tipo)).length>0&&(Da(o,t),t.filhos.filter((t=>t.tipo===pn.omissis.tipo)).forEach((t=>Da(o,t)))),Tr(t)||xr(t)){const i=_r(t)?t.pai.pai:t.pai;Da(o,i),kr(i)&&Da(o,_r(t)?t.pai.pai:t.pai),Kr(t).forEach((i=>{(e||i!==t)&&Da(o,i,!0)}))}else!e||yr(t)||kr(t)||Da(o,t,!0);return o},ja=t=>(wr(t)||Or(t))&&2===Kr(t).length?Kr(t).filter((e=>t.uuid!==e.uuid)):ps(t,!0).filter((e=>e.tipo===t.tipo)),Ma=t=>ja(t).map((t=>{t.mensagens=Oa(t);return Pa(t)}));var Fa;!function(t){t.ArticulacaoAtualizada="ArticulacaoAtualizada",t.ComandoEmendaGerado="ComandoEmendaGerado",t.DocumentoCarregado="DocumentoCarregado",t.InformarNorma="InformarNorma",t.ElementoModificado="ElementoModificado",t.ElementoIncluido="ElementoIncluido",t.ElementoRemovido="ElementoRemovido",t.ElementoRenumerado="ElementoRenumerado",t.ElementoRestaurado="ElementoRestaurado",t.ElementoSuprimido="ElementoSuprimido",t.ElementoValidado="ElementoValidado",t.ElementoSelecionado="ElementoSelecionado",t.ElementoMarcado="ElementoMarcado",t.SituacaoElementoModificada="SituacaoElementoModificada"}(Fa||(Fa={}));const Ua=(t,e)=>((t,e)=>{const o=Ca(t);return{articulacao:t,modo:e,past:[],present:[],future:[],ui:{events:[{stateType:Fa.DocumentoCarregado,elementos:o}]}}})(e.articulacao,e.classificacao);const Ba=function(t=0){return{next:()=>++t}}();function za(t){return class extends t{constructor(){super(...arguments),this.mensagens=[]}}}class Va{constructor(t){this.tipoAcao=t,this.isDispositivoAlteracao=!0,this.descricao="INICIAR_BLOCO"===t?"Inserir bloco de alterao":"Finalizar bloco de alterao"}execute(t,e,o,i=!1){return{type:"ADICIONAR_ELEMENTO",subType:this.tipoAcao,atual:t,novo:{tipo:o,isDispositivoAlteracao:this.isDispositivoAlteracao,conteudo:{texto:e}},hasDesmembramento:i}}}const Ha=new Va("INICIAR_BLOCO"),$a=new Va("FINALIZAR_BLOCO");function Ka(t){return class extends t{get alteracoes(){}hasAlteracao(){return!1}}}var Qa,Ga;function Wa(t){return class extends t{constructor(){super(...arguments),this.tipoConteudo=Qa.ConteudoTexto,this.texto=""}}}function Za(t){return class extends t{addFilho(t,e){if(e&&this.filhos.indexOf(e)>=0){const o=this.filhos.indexOf(e)+1;this.isLastFilho(e)?this.filhos.push(t):this.filhos.splice(o,0,t)}else this.filhos.push(t);wr(t)&&zr(t).addArtigo(t,e)}addFilhoOnPosition(t,e){var o;if(this.filhos.splice(e,0,t),wr(t)){const e=null!==(o=rs(t))&&void 0!==o?o:Zr(t.pai.pai,t.pai),i=zr(t),n=e?i.indexOfArtigo(e)+1:0;i.addArtigoOnPosition(t,n)}}hasArtigos(){return this.filhos.filter((t=>wr(t))).length>0}isLastFilho(t){return this.filhos.indexOf(t)===this.filhos.length-1}get filhos(){var t;return this._filhos=null!==(t=this._filhos)&&void 0!==t?t:[],this._filhos}indexOf(t){return this.filhos.indexOf(t)}removeFilho(t){this._filhos=this.filhos.filter((e=>e.uuid!==t.uuid)),wr(t)&&zr(t).removeArtigo(t)}renumeraFilhos(){var t;this.filhos.filter((t=>!wr(t))).forEach((t=>{t.numero=xa(t),t.createRotulo(t),t.id=Sa(t)})),null===(t=zr(this.filhos[0]))||void 0===t||t.renumeraArtigos()}}}function Xa(t){return class extends t{addFilho(t,e){if(e){const o=this.filhos.indexOf(e)+1;this.isLastFilho(e)?this.filhos.push(t):this.filhos.splice(o,0,t)}else this.filhos.push(t)}addFilhoOnPosition(t,e){this.filhos.splice(e,0,t)}hasArtigos(){return this.filhos.filter((t=>wr(t))).length>0}isLastFilho(t){return this.filhos.indexOf(t)===this.filhos.length-1}get filhos(){var t;return this._filhos=null!==(t=this._filhos)&&void 0!==t?t:[],this._filhos}indexOf(t){return this.filhos.indexOf(t)}removeFilho(t){this._filhos=this.filhos.filter((e=>e.uuid!==t.uuid))}renumeraFilhos(){this.filhos.filter((t=>!xs(t)&&(t.situacao.descricaoSituacao===Fr.DISPOSITIVO_NOVO||t.situacao.descricaoSituacao===Fr.DISPOSITIVO_ADICIONADO))).forEach((t=>{t.numero=xa(t),t.createRotulo(t),t.id=Sa(t)}))}}}function Ya(t){return class extends t{constructor(){super(...arguments),this.type="NumeracaoAgrupadorLcp95",this.informouAgrupadorUnico=!1}getNomeAgrupadorUnico(t){return`${t.descricao} nic${t.artigoDefinido}`.toLocaleUpperCase()}normalizaNumeracao(t){const e=t.trim().split(/\s+/);if(2!==e.length)return"";const o=e[1].split("-");return la(o[0])?(o[0]=pa(o[0]),o.join("-")):""}createNumeroFromRotulo(t){if(this.informouAgrupadorUnico=/.*[u]nic[ao]/i.test(t),this.informouAgrupadorUnico)this.numero="1";else{const e=this.normalizaNumeracao(t);this.numero=this.informouAgrupadorUnico?"1":aa(e)?e:void 0}}createRotulo(t){var e;const o=void 0===t.descricao?null!==(e=t.name)&&void 0!==e?e:"":t.descricao.toLocaleUpperCase();void 0===this.numero?this.rotulo=vs(t)?""+t.tipo:t.tipo:void 0===this.numero||aa(this.numero)?t.isDispositivoAlteracao&&vs(t)?this.rotulo=""+(this.informouAgrupadorUnico?this.getNomeAgrupadorUnico(t):o+" "+ma(this.numero,fa)):1===Kr(t).length?this.rotulo=this.getNomeAgrupadorUnico(t):this.rotulo=o+" "+ma(this.numero,fa):this.rotulo=o+" "+this.numero}getNumeracaoParaComandoEmenda(){const t=new Mr,e=this.numero?ma(this.numero,fa):"???";t.append(this.descricao+" "+e);const o=this.pai;return o&&!Ss(o)&&(t.append(o.pronomePossessivoSingular),t.append(" "),t.append(o.getNumeracaoParaComandoEmenda())),t.toString()}getNumeracaoComRotuloParaComandoEmenda(){return this.getNumeracaoParaComandoEmenda()}}}!function(t){t.ConteudoTexto="Contedo de Texto"}(Qa||(Qa={})),function(t){t.EMENDA="emenda",t.EMENDA_ARTIGO_ONDE_COUBER="emendaArtigoOndeCouber",t.NORMA="norma",t.PROJETO="projeto"}(Ga||(Ga={}));const Ja=[];Ja.push(Cn),Ja.push(Dn),Ja.push(jn),Ja.push(Bn),Ja.push(Ha),Ja.push($a),Ja.push($n),Ja.push(Kn),Ja.push(Qn),Ja.push(Gn),Ja.push(Wn),Ja.push(Zn),Ja.push(Xn),Ja.push(Yn),Ja.push(Jn),Ja.push(tr),Ja.push(er),Ja.push(or),Ja.push(ir),Ja.push(hr),Ja.push(nr),Ja.push(ar),Ja.push(lr),Ja.push(ur),Ja.push(cr),Ja.push(dr),Ja.push(pr),Ja.push(fr),Ja.push(mr),Ja.push(vr),Ja.push(Fn),Ja.push(zn),Ja.push(Vn),Ja.push(br),Ja.push(En),Ja.push(On),Ja.push(qn),Ja.push(_n),Ja.push(An),Ja.push(Sn);const tl=[];tl.push(fn),tl.push(mn),tl.push(vn),tl.push(gn),tl.push(bn),tl.push(xn);const el=t=>Ja.includes(t),ol=[...Ja,...tl,gr],il=t=>ol.filter((e=>e instanceof wn&&e.tipo===t))[0];function nl(t){return class extends t{getAcoesPossiveis(t){var e,o,i,n;const r=[];if(!kr(t))return[];if(0===us(t).length&&cs(t).length>0&&t.filhos.filter((t=>kr(t))).length>0||r.push(Fn),t.pai&&yr(t.pai)&&kr(t.pai)&&void 0===ss(t)){const i=null===(e=t.tiposPermitidosPai)||void 0===e?void 0:e.indexOf(t.pai.tipo);null===(o=t.tiposPermitidosPai)||void 0===o||o.filter(((t,e)=>e>i)).forEach((t=>r.push(il(t))))}if(t.pai&&!yr(t.pai)&&kr(t.pai)&&0===t.pai.indexOf(t)){const e=null===(i=t.tiposPermitidosPai)||void 0===i?void 0:i.indexOf(t.pai.tipo);null===(n=t.tiposPermitidosPai)||void 0===n||n.filter(((t,o)=>o>e)).forEach((t=>r.push(il(t))))}return t.pai&&t.pai.indexOf(t)>0&&kr(t.pai)&&!yr(t.pai)&&r.push(il(t.pai.tipo)),xs(t)&&r.push(Bn),t.getAcoesPermitidas(t,r)}getAcaoPossivelTab(t){}getAcaoPossivelShiftTab(t){}}}const rl=t=>{var e,o;return xs(t.pai)&&0===t.filhos.length&&t.tipo!==pn.omissis.name&&(null===(e=rs(t))||void 0===e?void 0:e.tipo)!==pn.omissis.name&&(null===(o=ls(t))||void 0===o?void 0:o.tipo)!==pn.omissis.name};class sl{constructor(){this.descricaoSituacao=Fr.DISPOSITIVO_NOVO}getAcoesPermitidas(t,e){return[...new Set(e)].filter((t=>void 0!==t)).filter((t=>"Adicionar"!==t.descricao&&"Atualizar dispositivo"!==t.descricao)).sort(((t,e)=>t.descricao.localeCompare(e.descricao)))}}function al(t){return class extends t{constructor(){super(...arguments),this.situacao=new sl}getAcoesPermitidas(t,e){var o;return null===(o=this.situacao)||void 0===o?void 0:o.getAcoesPermitidas(t,e)}}}class ll{constructor(t){this.tipo=pn[t].tipo,this.tagId=pn[t].tagId,this.name=pn[t].name,this.descricao=pn[t].descricao,this.descricaoPlural=pn[t].descricaoPlural,this.tiposPermitidosPai=pn[t].tiposPermitidosPai,this.tiposPermitidosFilhos=pn[t].tiposPermitidosFilhos,this.tipoProvavelFilho=pn[t].tipoProvavelFilho,this.INDICADOR_SEQUENCIA=pn[t].INDICADOR_SEQUENCIA,this.INDICADOR_FIM_SEQUENCIA=pn[t].INDICADOR_FIM_SEQUENCIA,this.INDICADOR_DESDOBRAMENTO=pn[t].INDICADOR_DESDOBRAMENTO}}const ul=(t,e)=>{void 0!==e.tipoProvavelFilho&&t.filhos.forEach(((o,i)=>{var n;const r=Sl(wr(e)&&pn.inciso.name===e.tipoProvavelFilho?e.caput:e,e.tipoProvavelFilho);r.texto=null!==(n=o.texto)&&void 0!==n?n:"",r.situacao=o.situacao,r.mensagens=Oa(o),o.filhos&&ul(o,r),i===t.filhos.length-1&&e.renumeraFilhos()}))},cl=(t,e)=>{t.tipo===e.tipo&&t.filhos.forEach((o=>{var i;const n=Sl(wr(e)&&Er(o.pai)?e.caput:e,o.tipo);o.rotulo?n.rotulo=o.rotulo:n.createRotulo(n),n.texto=null!==(i=o.texto)&&void 0!==i?i:"",n.situacao=o.situacao,t.removeFilho(o),n.mensagens=Oa(o),o.filhos&&(t.tipo===e.tipo?cl(o,n):ul(o,n)),0===t.filhos.length&&e.renumeraFilhos()}))},dl=al(function(t){return class extends t{getAcoesPossiveis(t){const e=[];return Sr(t)?(e.push(Fn),void 0!==ds(t)&&e.push(Dn),void 0!==as(t)&&e.push(jn),xs(t)&&e.push(Bn),xs(t)&&gs(t)&&(e.push(Ha),bs(t)&&e.push($a)),(0===t.texto.length||Rs(t))&&e.push(vn),(0===t.texto.length||Ts(t))&&e.push(bn),(ts(t)||es(t))&&e.push(Or(t.pai.pai)?Xn:Zn),(!is(t)||void 0!==rs(t)&&Nr(rs(t)))&&e.push(Yn),rl(t)&&e.push($n),t.getAcoesPermitidas(t,e)):[]}getAcaoPossivelTab(t){var e;if(Sr(t))return null===(e=t.tiposPermitidosFilhos)||void 0===e?void 0:e.map((e=>{const o="transformar"+t.tipo+"Em"+e;return t.getAcoesPossiveis(t).filter((t=>t instanceof Hn)).filter((t=>t instanceof Hn&&t.nomeAcao&&o&&t.nomeAcao===o))[0]}))[0]}getAcaoPossivelShiftTab(t){var e;if(Sr(t))return ts(t)||es(t)?Or(t.pai.pai)?Xn:Zn:null===(e=t.tiposPermitidosPai)||void 0===e?void 0:e.map((e=>{const o="transformar"+t.tipo+"Em"+e;return t.getAcoesPossiveis(t).filter((t=>t instanceof Hn)).filter((t=>t instanceof Hn&&t.nomeAcao&&o&&t.nomeAcao===o))[0]}))[0]}}}(za(Vs(Ka(Wa(function(t){return class extends t{constructor(){super(...arguments),this.type="NumeracaoAlineaLcp95",this.SUFIXO=")"}normalizaNumeracao(t){const e=/[a-z]+(-[a-zA-Z]+)*/.exec(t.trim());return e?e[0]:Lr(t).trim().replace(/\)$/,"").trim()}createNumeroFromRotulo(t){this.numero=ma(this.normalizaNumeracao(t),ua)}createRotulo(){this.rotulo=void 0===this.numero?pn.alinea.name:ma(this.numero,ca)+this.SUFIXO}getNumeracaoParaComandoEmenda(){var t;return void 0===this.numero?(null===(t=pn.alinea.descricao)||void 0===t?void 0:t.toLocaleLowerCase())+"":""+ma(this.numero,ca)+""}getNumeracaoComRotuloParaComandoEmenda(){var t,e;return void 0===this.numero?(null===(t=pn.alinea.descricao)||void 0===t?void 0:t.toLocaleLowerCase())+"":(null===(e=pn.alinea.descricao)||void 0===e?void 0:e.toLocaleLowerCase())+" "+this.getNumeracaoParaComandoEmenda()}}}(Xa(ll)))))))),pl=al(function(t){return class extends t{getAcoesPossiveis(t){var e,o,i,n,r,s;const a=[];if(!wr(t))return[];if(a.push(fn),a.push(Fn),void 0!==ds(t)&&a.push(Dn),void 0!==as(t)&&a.push(jn),xs(t)&&!xr(t)&&a.push(Bn),xs(t)&&gs(t)&&(a.push(Ha),bs(t)&&a.push($a)),t.alteracoes&&a.push(Cn),t.hasAlteracao()||xs(t)||0!==t.texto.length&&Ts(t)||a.push(mn),t.hasAlteracao()||xs(t)||0!==t.texto.length&&!Ts(t)||a.push(gn),t.hasAlteracao()||xs(t)||ns(t)||a.push(Ha),t.pai.indexOf(t)>0&&a.push(Jn),t.pai&&!xs(t)&&yr(t.pai)&&0===t.pai.filhos.filter((t=>kr(t))).length&&a.push(_n),!xs(t)&&t.pai&&(t=>{const e=t.pai.indexOf(t);return t.pai.filhos.filter(((t,o)=>o>e&&kr(t))).length>0})(t)&&a.push(il(Yr(t).tipo)),!xs(t)&&kr(t.pai)){const n=null!==(o=null===(e=t.tiposPermitidosPai)||void 0===e?void 0:e.indexOf(t.pai.tipo))&&void 0!==o?o:0;null===(i=t.tiposPermitidosPai)||void 0===i||i.filter((()=>n>0)).filter(((e,o)=>t.pai.indexOf(t)>0?o>=n:o>n)).forEach((t=>a.push(il(t))))}if(!xs(t)&&kr(t.pai)&&!yr(t.pai)&&t.pai.indexOf(t)>0&&(t=>{var e;return void 0!==(null===(e=t.pai)||void 0===e?void 0:e.pai)&&Qr(t.pai.pai,t.pai,[]).length>0})(t)){const e=null!==(r=null===(n=t.tiposPermitidosPai)||void 0===n?void 0:n.indexOf(t.pai.tipo))&&void 0!==r?r:0,o=Qr(t.pai.pai,t.pai,[]).reduce(((t,e)=>t.includes(e.tipo)&&void 0!==Yr(e)?t:t.concat(e.tipo)),[]);null===(s=t.tiposPermitidosPai)||void 0===s||s.filter((()=>e>0)).filter((t=>o.includes(t))).forEach((t=>a.push(il(t))))}return t.getAcoesPermitidas(t,a)}getAcaoPossivelTab(t){var e;if(wr(t))return null===(e=t.tiposPermitidosFilhos)||void 0===e?void 0:e.map((e=>{const o="transformar"+t.tipo+"Em"+e;return t.getAcoesPossiveis(t).filter((t=>t instanceof Hn)).filter((t=>t instanceof Hn&&t.nomeAcao&&o&&t.nomeAcao===o))[0]}))[0]}getAcaoPossivelShiftTab(t){var e;if(t.tiposPermitidosFilhos)return _r(t)&&(ts(t)||es(t))?nr:Ar(t)&&(ts(t)||es(t))?ir:Sr(t)&&(ts(t)||es(t))?Or(t.pai.pai)?Xn:Zn:null===(e=t.tiposPermitidosPai)||void 0===e?void 0:e.map((e=>{const o="transformar"+t.tipo+"Em"+e;return t.getAcoesPossiveis(t).filter((t=>t instanceof Hn)).filter((t=>t instanceof Hn&&t.nomeAcao&&o&&t.nomeAcao===o))[0]}))[0]}}}(za($s(function(t){return class extends t{hasAlteracao(){var t;return!!this.alteracoes&&(null===(t=this.alteracoes.filhos)||void 0===t?void 0:t.length)>0}}}(function(t){return class extends t{constructor(){super(...arguments),this.type="NumeracaoArtigoLcp95",this.PREFIXO="Art. ",this.SUFIXO="",this.ARTIGO_UNICO="Artigo nico.",this.informouArtigoUnico=!1}normalizaNumeracao(t){return t.replace(/["]/g,"").replace(/\./g,"").replace(/artigo [u]nico/i,"1").replace(/(art[.]{0,1})/i,"").replace(/[]/i,"").trim()}createNumeroFromRotulo(t){const e=this.normalizaNumeracao(t);this.informouArtigoUnico=/.[u]nico/i.test(t),this.numero=this.informouArtigoUnico?"1":aa(e)?e:void 0}createRotulo(t){void 0===t?this.rotulo=pn.artigo.descricao:t.situacao.descricaoSituacao===Fr.DISPOSITIVO_ADICIONADO&&t.situacao.tipoEmenda===Ga.EMENDA_ARTIGO_ONDE_COUBER?this.rotulo="Art.":void 0===this.numero?this.rotulo=vs(t)?""+t.tipo:t.tipo:void 0===this.numero||aa(this.numero)?vs(t)?this.rotulo=""+(this.informouArtigoUnico?this.ARTIGO_UNICO:this.PREFIXO+this.getNumeroAndSufixoNumeracao()):1===zr(t).artigos.length?this.rotulo=this.ARTIGO_UNICO:this.rotulo=this.PREFIXO+this.numero===void 0?void 0:this.PREFIXO+this.getNumeroAndSufixoNumeracao():this.rotulo=this.PREFIXO+this.numero+this.SUFIXO}getNumeroAndSufixoNumeracao(t=!1){var e;const o=null===(e=this.numero)||void 0===e?void 0:e.split("-"),[i,...n]=o;return(parseInt(null!=i?i:"1",10)<10?i+this.SUFIXO:i)+(n.length>0?"-"+(null==n?void 0:n.map(ca).join("-").toUpperCase()):"")+(!t&&parseInt(null!=i?i:"1",10)>9?".":"")}getNumeracaoParaComandoEmenda(){var t;return void 0===this.numero?(null===(t=pn.artigo.descricao)||void 0===t?void 0:t.toLowerCase())+"":this.informouArtigoUnico?"artigo nico":this.getNumeroAndSufixoNumeracao(!0)}getNumeracaoComRotuloParaComandoEmenda(){var t;return void 0===this.numero?(null===(t=pn.artigo.descricao)||void 0===t?void 0:t.toLowerCase())+"":this.informouArtigoUnico?"artigo nico":"art. "+this.getNumeroAndSufixoNumeracao()}}}(function(t){return class extends t{get filhos(){const t=this.getIncisosCaput(),e=this.paragrafos;return t.concat(e)}getIncisosCaput(){var t,e;return null!==(e=null===(t=this.caput)||void 0===t?void 0:t.filhos)&&void 0!==e?e:[]}get paragrafos(){var t;return this._paragrafos=null!==(t=this._paragrafos)&&void 0!==t?t:[],this._paragrafos}addFilhoOnPosition(t,e){qr(t)?this.caput.addFilhoOnPosition(t,e):this.paragrafos.splice(e-this.getIncisosCaput().length,0,t)}addFilho(t,e){Er(t)?this.caput=t:qr(t)?this.addIncisoCaput(t,e):this.addParagrafo(t,e)}removeFilho(t){var e;qr(t)?null===(e=this.caput)||void 0===e||e.removeFilho(t):this.removeParagrafo(t)}addIncisoCaput(t,e){this.caput.addFilho(t,e)}addParagrafo(t,e){if(e){const o=this.paragrafos.indexOf(e)+1;this.isLastFilho(e)?this.paragrafos.push(t):this.paragrafos.splice(o,0,t)}else this.paragrafos.push(t)}removeParagrafo(t){var e;this._paragrafos=null===(e=this._paragrafos)||void 0===e?void 0:e.filter((e=>e.uuid!==t.uuid?e:e.pai=void 0))}isLastFilho(t){return this.paragrafos.indexOf(t)===this.paragrafos.length-1}indexOf(t){return qr(t)?this.caput.indexOf(t):this.filhos.indexOf(t)}renumeraIncisos(){var t;null===(t=this.caput)||void 0===t||t.renumeraFilhos()}renumeraParagrafos(){this.paragrafos.filter((t=>!xs(t)&&!ws(t))).forEach((t=>{t.numero=xa(t),t.createRotulo(t),t.id=Sa(t)}))}isParagrafoUnico(){return 1===this.paragrafos.length}renumeraFilhos(){this.renumeraIncisos(),this.renumeraParagrafos()}}}(class extends ll{constructor(){super("artigo")}get texto(){var t,e;return null!==(e=null===(t=this.caput)||void 0===t?void 0:t.texto)&&void 0!==e?e:""}set texto(t){this.caput.texto=t}}))))))),hl=al(function(t){return class extends t{getAcoesPossiveis(t){return[]}getAcaoPossivelTab(t){}getAcaoPossivelShiftTab(t){}}}(za($s(Ka(Wa(function(t){return class extends t{constructor(){super(...arguments),this.type="NumeracaoIndisponivel"}createRotulo(){this.rotulo=void 0}createNumeroFromRotulo(){}getNumeracaoParaComandoEmenda(){return""}getNumeracaoComRotuloParaComandoEmenda(){return"caput"}}}(Xa(ll)))))))),fl=al(function(t){return class extends t{getAcoesPossiveis(t){const e=[];return xr(t)?(e.push(Fn),xs(t)&&gs(t)&&(e.push(Ha),bs(t)&&e.push($a)),(Or(t.pai)||Er(t.pai)||qr(t.pai)||Sr(t.pai))&&t.pai.tipoProvavelFilho.length>0&&e.push(ol.filter((e=>e instanceof Hn&&e.nomeAcao==="transformarDispositivoGenericoEm"+t.pai.tipoProvavelFilho))[0]),t.getAcoesPermitidas(t,e)):[]}getAcaoPossivelTab(t){}getAcaoPossivelShiftTab(t){}}}(za(Hs(Ka(Wa(function(t){return class extends t{constructor(){super(...arguments),this.type="NumeracaoDispositivoGenericoLcp95",this.SUFIXO=" -"}createNumeroFromRotulo(){}createRotulo(){this.rotulo=void 0===this.numero?"dg":this.numero+this.SUFIXO}getNumeracaoParaComandoEmenda(){return void 0===this.numero?"dg":this.numero}getNumeracaoComRotuloParaComandoEmenda(){return this.getNumeracaoParaComandoEmenda()}}}(Xa(ll)))))))),ml=al(function(t){return class extends t{getAcoesPossiveis(t){const e=[];return qr(t)?(e.push(Fn),void 0!==ds(t)&&e.push(Dn),void 0!==as(t)&&e.push(jn),xs(t)&&!xr(t)&&e.push(Bn),xs(t)&&gs(t)&&(e.push(Ha),bs(t)&&e.push($a)),xs(t)&&!xr(t)&&e.push(Bn),Ts(t)&&e.push(vn),Rs(t)&&e.push(gn),Cs(t)&&es(t)&&e.push(xn),_r(t)&&(!is(t)||void 0!==rs(t)&&Nr(rs(t)))&&e.push(rr),_r(t)&&(ts(t)||es(t))&&e.push(nr),_r(t)&&rl(t)&&e.push(Kn),Ar(t)&&(ts(t)||is(t))&&e.push(Wn),Ar(t)&&(!is(t)||void 0!==rs(t)&&Nr(rs(t)))&&e.push(sr),Ar(t)&&rl(t)&&e.push(Wn),Ar(t)&&(ts(t)||es(t))&&e.push(ir),t.getAcoesPermitidas(t,e)):[]}getAcaoPossivelTab(t){var e;if(qr(t))return!_r(t)||ts(t)&&is(t)?Ar(t)&&(ts(t)||es(t))?sr:null===(e=t.tiposPermitidosFilhos)||void 0===e?void 0:e.map((e=>{const o=qr(t)?t.pai.tipo:"",i=e.endsWith(pn.inciso.name)?!Or(t)||ts(t)&&is(t)?"IncisoCaput":"IncisoParagrafo":e,n="transformar"+t.tipo+o+"Em"+i;return t.getAcoesPossiveis(t).filter((t=>t instanceof Hn)).filter((t=>t instanceof Hn&&t.nomeAcao&&n&&t.nomeAcao===n))[0]}))[0]:rr}getAcaoPossivelShiftTab(t){var e;if(qr(t))return _r(t)&&(ts(t)||es(t))?nr:Ar(t)&&(ts(t)||es(t))?ir:null===(e=t.tiposPermitidosPai)||void 0===e?void 0:e.map((e=>{const o="transformar"+t.tipo+"Em"+e;return t.getAcoesPossiveis(t).filter((t=>t instanceof Hn)).filter((t=>t instanceof Hn&&t.nomeAcao&&o&&t.nomeAcao===o))[0]}))[0]}}}(za($s(Ka(Wa(function(t){return class extends t{constructor(){super(...arguments),this.type="NumeracaoIncisoLcp95",this.SUFIXO=" "}normalizaNumeracao(t){const e=/[CDILMVX]+(-[a-zA-Z]+)*/.exec(t);return e?e[0]:Lr(t).trim().replace(/-$/,"").trim()}createNumeroFromRotulo(t){const e=ma(this.normalizaNumeracao(t),pa);this.numero=aa(e)?e:void 0}createRotulo(){this.rotulo=void 0===this.numero?pn.inciso.name:ma(this.numero,fa)+this.SUFIXO}getNumeracaoParaComandoEmenda(){var t;return void 0===this.numero?(null===(t=pn.inciso.descricao)||void 0===t?void 0:t.toLocaleLowerCase())+"":ma(this.numero,fa)}getNumeracaoComRotuloParaComandoEmenda(){var t,e;return void 0===this.numero?(null===(t=pn.inciso.descricao)||void 0===t?void 0:t.toLocaleLowerCase())+"":(null===(e=pn.inciso.descricao)||void 0===e?void 0:e.toLocaleLowerCase())+" "+this.getNumeracaoParaComandoEmenda()}}}(Xa(ll)))))))),vl=al(function(t){return class extends t{getAcoesPossiveis(t){const e=[];return Ir(t)?(e.push(Fn),void 0!==ds(t)&&e.push(Dn),void 0!==as(t)&&e.push(jn),xs(t)&&!xr(t)&&e.push(Bn),xs(t)&&gs(t)&&(e.push(Ha),bs(t)&&e.push($a)),(ts(t)||es(t))&&e.push(hr),rl(t)&&e.push(Qn),t.getAcoesPermitidas(t,e)):[]}getAcaoPossivelTab(t){var e;if(Ir)return null===(e=t.tiposPermitidosFilhos)||void 0===e?void 0:e.map((e=>{const o="transformar"+t.tipo+"Em"+e;return t.getAcoesPossiveis(t).filter((t=>t instanceof Hn)).filter((t=>t instanceof Hn&&t.nomeAcao&&o&&t.nomeAcao===o))[0]}))[0]}getAcaoPossivelShiftTab(t){var e;if(t.tiposPermitidosFilhos)return null===(e=t.tiposPermitidosPai)||void 0===e?void 0:e.map((e=>{const o="transformar"+t.tipo+"Em"+e;return t.getAcoesPossiveis(t).filter((t=>t instanceof Hn)).filter((t=>t instanceof Hn&&t.nomeAcao&&o&&t.nomeAcao===o))[0]}))[0]}}}(za($s(Ka(Wa(function(t){return class extends t{constructor(){super(...arguments),this.type="NumeracaoItemLcp95",this.SUFIXO="."}normalizaNumeracao(t){const e=/\d+(-[a-zA-Z]+)*/.exec(t.trim());return e?e[0]:Lr(t).trim().replace(/\.$/,"").trim()}createNumeroFromRotulo(t){const e=this.normalizaNumeracao(t);this.numero=aa(e)?e:void 0}createRotulo(){this.rotulo=void 0===this.numero?pn.item.name:ma(this.numero)+this.SUFIXO}getNumeracaoParaComandoEmenda(){var t;return void 0===this.numero?(null===(t=pn.item.descricao)||void 0===t?void 0:t.toLowerCase())+"":ma(this.numero)}getNumeracaoComRotuloParaComandoEmenda(){var t,e;return void 0===this.numero?(null===(t=pn.item.descricao)||void 0===t?void 0:t.toLocaleLowerCase())+"":(null===(e=pn.item.descricao)||void 0===e?void 0:e.toLocaleLowerCase())+" "+this.getNumeracaoParaComandoEmenda()}}}(Xa(ll)))))))),gl=al(function(t){return class extends t{getAcoesPossiveis(t){const e=[];return Or(t)?(e.push(Fn),void 0!==ds(t)&&e.push(Dn),void 0!==as(t)&&e.push(jn),xs(t)&&e.push(Bn),t.texto&&Ts(t)&&e.push(gn),(is(t)||ts(t))&&e.push(vr),ts(t)||e.push(mr),(es(t)||ts(t))&&e.push(fr),rl(t)&&e.push(Gn),xs(t)&&gs(t)&&(e.push(Ha),bs(t)&&e.push($a)),t.getAcoesPermitidas(t,e)):[]}getAcaoPossivelTab(t){var e;if(Or(t))return null===(e=t.tiposPermitidosFilhos)||void 0===e?void 0:e.map((e=>{const o=e.endsWith(pn.inciso.name)?!Or(t)||ts(t)&&is(t)?"IncisoCaput":"IncisoParagrafo":e,i="transformar"+t.tipo+"Em"+o;return t.getAcoesPossiveis(t).filter((t=>t instanceof Hn)).filter((t=>t instanceof Hn&&t.nomeAcao&&i&&t.nomeAcao===i))[0]}))[0]}getAcaoPossivelShiftTab(t){var e;if(t.tiposPermitidosFilhos)return _r(t)&&(ts(t)||es(t))?nr:Ar(t)&&(ts(t)||es(t))?ir:Sr(t)&&(ts(t)||es(t))?Or(t.pai.pai)?Xn:Zn:null===(e=t.tiposPermitidosPai)||void 0===e?void 0:e.map((e=>{const o="transformar"+t.tipo+"Em"+e;return t.getAcoesPossiveis(t).filter((t=>t instanceof Hn)).filter((t=>t instanceof Hn&&t.nomeAcao&&o&&t.nomeAcao===o))[0]}))[0]}}}(za($s(Ka(Wa(function(t){return class extends t{constructor(){super(...arguments),this.type="NumeracaoParagrafoLcp95",this.PREFIXO=" ",this.SUFIXO="",this.PARAGRAFO_UNICO="Pargrafo nico.",this.informouParagrafoUnico=!1}normalizaNumeracao(t){return t.trim().replace(/\./g,"").replace(//i,"").replace(/par[a]grafo [u]nico/i,"1").replace(/[]/i,"").trim()}createNumeroFromRotulo(t){const e=this.normalizaNumeracao(t);this.informouParagrafoUnico=/.[u]nico/i.test(t),this.numero=this.informouParagrafoUnico?"1":aa(e)?e:void 0}createRotulo(t){var e;void 0!==this.numero&&t?aa(this.numero)?t.isDispositivoAlteracao?this.rotulo=this.informouParagrafoUnico?this.PARAGRAFO_UNICO:this.PREFIXO+this.getNumeroAndSufixoNumeracao():1===(null===(e=t.pai)||void 0===e?void 0:e.filhos.filter((t=>Or(t))).length)?this.rotulo=this.PARAGRAFO_UNICO:this.rotulo=this.PREFIXO+this.numero===void 0?void 0:this.PREFIXO+this.getNumeroAndSufixoNumeracao():this.rotulo=this.getNumeroAndSufixoNumeracao():this.rotulo=pn.paragrafo.name}getNumeroAndSufixoNumeracao(){if(!this.numero)return"";const t=-1===this.numero.search(/[a-zA-Z-]/)?parseInt(this.numero):parseInt(this.numero.substring(0,this.numero.search(/[a-zA-Z-]/))),e=-1===this.numero.search(/[a-zA-Z-]/)?"":this.numero.substring(this.numero.search(/[a-zA-Z-]/));return(t<10?t+this.SUFIXO:t)+((null==e?void 0:e.length)>0?e:"")+(t>9?".":"")}getNumeracaoParaComandoEmenda(){var t;return void 0===this.numero?(null===(t=pn.paragrafo.descricao)||void 0===t?void 0:t.toLocaleLowerCase())+"":this.isParagrafoUnico()?"pargrafo nico":this.getNumeroAndSufixoNumeracao()}getNumeracaoComRotuloParaComandoEmenda(){var t;return void 0===this.numero?(null===(t=pn.paragrafo.descricao)||void 0===t?void 0:t.toLocaleLowerCase())+"":this.isParagrafoUnico()?"pargrafo nico":" "+this.getNumeroAndSufixoNumeracao()}isParagrafoUnico(){var t;return this.isDispositivoAlteracao&&this.informouParagrafoUnico||1===(null===(t=this.pai)||void 0===t?void 0:t.filhos.filter((t=>Or(t))).length)}}}(Xa(ll)))))))),bl=al(nl(za(Hs(Ka(Wa(Ya(Za(class extends ll{constructor(){super("articulacao")}get artigos(){var t;return null!==(t=this._artigos)&&void 0!==t?t:[]}addArtigo(t,e){var o;this._artigos=null!==(o=this._artigos)&&void 0!==o?o:[],void 0!==e?this._artigos.splice(this._artigos.indexOf(e)+1,0,t):this._artigos.push(t)}addArtigoOnPosition(t,e){var o;this._artigos=null!==(o=this._artigos)&&void 0!==o?o:[],this._artigos.splice(e,0,t)}removeArtigo(t){var e;this._artigos=null!==(e=this._artigos)&&void 0!==e?e:[],this._artigos=this._artigos.filter((e=>e.uuid!==t.uuid))}renumeraArtigos(){this.artigos.filter((t=>t.situacao.descricaoSituacao===Fr.DISPOSITIVO_NOVO||t.situacao.descricaoSituacao===Fr.DISPOSITIVO_ADICIONADO)).forEach((t=>{t.numero=xa(t),t.createRotulo(t),t.id=Sa(t);const e=t.caput;e&&(e.id=Sa(e))}))}indexOfArtigo(t){return this.artigos.indexOf(t)}})))))))),yl=al(nl(za($s(Ka(Wa(Ya(Za(ll)))))))),xl=al(nl(za(Hs(Ka(Wa(Ya(Za(ll)))))))),wl=al(nl(za($s(Ka(Wa(Ya(Za(ll)))))))),El=al(nl(za(Vs(Ka(Wa(Ya(Za(ll)))))))),Ol=al(nl(za(Vs(Ka(Wa(Ya(Za(ll)))))))),ql=al(nl(za(Vs(Ka(Wa(Ya(Za(ll)))))))),_l=al(nl(za($s(Ka(Wa(Ya(Za(ll)))))))),Al=al(function(t){return class extends t{getAcoesPossiveis(t){const e=[];return Nr(t)?(e.push(Fn),void 0!==ds(t)&&e.push(Dn),void 0!==as(t)&&e.push(jn),xs(t)&&!xr(t)&&e.push(Bn),xs(t)&&gs(t)&&(e.push(Ha),bs(t)&&e.push($a)),yr(t.pai)&&void 0!==rs(t)&&e.push(lr),Er(t.pai)&&e.push(ur),wr(t.pai)&&e.push(pr),Or(t.pai)&&e.push(cr),qr(t.pai)&&e.push(ar),Sr(t.pai)&&e.push(dr),t.getAcoesPermitidas(t,e)):[]}getAcaoPossivelTab(t){}getAcaoPossivelShiftTab(t){}}}($s(Ka(function(t){return class extends t{constructor(){super(...arguments),this.tipoConteudo=Qa.ConteudoTexto,this._texto=Ps}get texto(){return this._texto}set texto(t){const e=js(t);this._texto=e===Ds?Ds:Ps}}}(function(t){return class extends t{constructor(){super(...arguments),this.type="NumeracaoIndisponivel"}createRotulo(){this.rotulo=void 0}createNumeroFromRotulo(){}getNumeracaoParaComandoEmenda(){return""}getNumeracaoComRotuloParaComandoEmenda(){return""}}}(Xa(ll))))))),Sl=(t,e,o,i)=>{const n=Il(e,t);return void 0!==i&&i>=0?t.addFilhoOnPosition(n,i):o?t.addFilho(n,o):t.addFilho(n),n},Il=(t,e)=>{let o;switch(t.toLowerCase()){case"alinea":o=new dl(t.toLowerCase());break;case"artigo":o=new pl,o.caput=Il(pn.caput.tipo,o);break;case"capitulo":o=new yl(t.toLowerCase());break;case"caput":o=new hl(t.toLowerCase());break;case"inciso":o=new ml(t.toLowerCase());break;case"item":o=new vl(t.toLowerCase());break;case"livro":o=new wl(t.toLowerCase());break;case"omissis":o=new Al(t.toLowerCase());break;case"paragrafo":o=new gl(t.toLowerCase());break;case"parte":o=new El(t.toLowerCase());break;case"secao":o=new ql(t.toLowerCase());break;case"subsecao":o=new Ol(t.toLowerCase());break;case"titulo":o=new _l(t.toLowerCase());break;default:o=e&&kr(e)?new xl("agrupadorGenerico"):new fl("generico"),o.mensagens=[],o.mensagens.push({tipo:ks.WARNING,descricao:"No foi possvel validar a natureza deste dispositivo com base na legislao vigente"})}return o.uuid=Ba.next(),o.name=t,o.pai=e,(t=>{t.isDispositivoAlteracao=xs(t),xs(t)&&(t.renumeraFilhos=()=>{},wr(t)&&(t.caput.renumeraFilhos=()=>{}),zr(t).renumeraFilhos=()=>{},zr(t).renumeraArtigos=()=>{})})(o),o},Nl=()=>{const t=new bl;return t.uuid=Ba.next(),t},kl=t=>{t.alteracoes=Nl(),t.alteracoes.pai=t},Pl=(t,e)=>{var o,i,n,r,s,a,l,u,c,d,p,h,f,m,v,g,b,y,x,w,E,O,q,_,A,S,I,N;let k;if(xs(t))if("INICIAR_BLOCO"===e.subType)k=jl(pn.artigo.tipo,zr(t)),k.texto=(null===(n=null===(i=null===(o=e.novo)||void 0===o?void 0:o.conteudo)||void 0===i?void 0:i.texto)||void 0===n?void 0:n.length)>0?null===(s=null===(r=e.novo)||void 0===r?void 0:r.conteudo)||void 0===s?void 0:s.texto:"";else if("FINALIZAR_BLOCO"===e.subType){const o=zr(t);k=Tl(o.pai),k.texto=js(null!==(u=null===(l=null===(a=e.novo)||void 0===a?void 0:a.conteudo)||void 0===l?void 0:l.texto)&&void 0!==u?u:"")}else if(((t,e)=>{var o,i,n;if(!xs(t))return!1;const r=Wr(t);return es(r)&&Ms(js(null!==(n=null===(i=null===(o=e.atual)||void 0===o?void 0:o.conteudo)||void 0===i?void 0:i.texto)&&void 0!==n?n:""))&&gs(t)})(t,e)){const o=zr(t);k="INICIAR_BLOCO"===e.subType?jl(pn.artigo.tipo,o):Tl(o.pai),k.texto="INICIAR_BLOCO"===e.subType?"":js(null!==(p=null===(d=null===(c=e.novo)||void 0===c?void 0:c.conteudo)||void 0===d?void 0:d.texto)&&void 0!==p?p:"")}else k=Tl(t),k.createRotulo(),k.texto=(null===(m=null===(f=null===(h=e.novo)||void 0===h?void 0:h.conteudo)||void 0===f?void 0:f.texto)||void 0===m?void 0:m.length)>0?js(null!==(b=null===(g=null===(v=e.novo)||void 0===v?void 0:v.conteudo)||void 0===g?void 0:g.texto)&&void 0!==b?b:""):"";else t.alteracoes||Ls(null===(x=null===(y=e.atual)||void 0===y?void 0:y.conteudo)||void 0===x?void 0:x.texto)||(null===(w=e.novo)||void 0===w?void 0:w.isDispositivoAlteracao)?(t.hasAlteracao()||kl(t),k=jl(t.tipo,t.alteracoes),k.texto=(null===(q=null===(O=null===(E=e.novo)||void 0===E?void 0:E.conteudo)||void 0===O?void 0:O.texto)||void 0===q?void 0:q.length)>0?null===(A=null===(_=e.novo)||void 0===_?void 0:_.conteudo)||void 0===A?void 0:A.texto:""):(k=Tl(t),k.texto=null!==(N=null===(I=null===(S=e.novo)||void 0===S?void 0:S.conteudo)||void 0===I?void 0:I.texto)&&void 0!==N?N:"");return k},Tl=t=>t.hasAlteracao()?Cl(t):wr(t)?xs(t)?Sl(t.caput,pn.inciso.tipo,void 0,0):Dl(t):kr(t)?Ll(t):xs(t)?ns(t)||Ts(t)?Sl(t,t.tipoProvavelFilho,t):Sl(t.pai,t.tipo===pn.omissis.tipo?t.pai.tipoProvavelFilho:t.tipo,t):Rl(t),Cl=t=>{var e;return t.pai.isLastFilho(t)&&(null===(e=null==t?void 0:t.pai)||void 0===e?void 0:e.pai)?Sl(t.pai.pai,t.pai.tipo,t.pai):Sl(t.pai,t.tipo,t)},Rl=t=>{if(Ts(t)){const e=t.tipoProvavelFilho;return t.pai.filhos.length>0?Sl(t,e,void 0,0):Sl(t,e)}if(t.situacao.descricaoSituacao!==Fr.DISPOSITIVO_ORIGINAL&&Cs(t)&&t.pai.isLastFilho(t)){if(_r(t)){const e=t.pai.pai;return e.filhos.filter((t=>Or(t))).length>0?Sl(e,pn.paragrafo.tipo,void 0,0):Sl(e,pn.paragrafo.tipo)}return Sl(t.pai.pai,t.pai.tipo,t.pai)}return Sl(t.pai,t.tipo,t)},Dl=t=>{if(Ts(t)){const e=t.tipoProvavelFilho;if(e===pn.inciso.tipo){const o=t.caput;return o.filhos.length>0?Sl(o,e,void 0,0):Sl(o,e)}return t.pai.filhos.length>0?Sl(t,e,void 0,0):Sl(t,e)}return Cs(t)&&t.pai.isLastFilho(t)?Sl(t.pai.pai,t.pai.tipo,t.pai):Sl(t.pai,t.tipo,t)},Ll=t=>Sl(t,pn.artigo.tipo,void 0,0),jl=(t,e)=>{const o=Sl(e,t);return o.createRotulo(o),o};class Ml extends sl{constructor(){super(...arguments),this.descricaoSituacao=Fr.DISPOSITIVO_ADICIONADO,this.tipoEmenda=Ga.EMENDA}getAcoesPermitidas(t,e){return[...new Set(e)].filter((t=>void 0!==t)).filter((t=>"Adicionar"!==t.descricao&&"Atualizar dispositivo"!==t.descricao)).filter((t=>!(t instanceof wn))).filter((e=>{var o;return!(null===(o=e.descricao)||void 0===o?void 0:o.startsWith("Mover"))||(t=>{var e;return 0===(null===(e=t.pai.filhos)||void 0===e?void 0:e.filter((t=>t.situacao.descricaoSituacao!==Fr.DISPOSITIVO_ADICIONADO)).length)})(t)})).sort(((t,e)=>t.descricao.localeCompare(e.descricao)))}}class Fl{constructor(){this.descricaoSituacao=Fr.DISPOSITIVO_ORIGINAL}getAcoesPermitidas(t,e){const o=e.filter((t=>!(t instanceof wn))).filter((t=>!(t instanceof Mn))).filter((t=>{var e;return!(null===(e=t.descricao)||void 0===e?void 0:e.startsWith("Mover"))})).filter((t=>!(t instanceof Hn))).filter((t=>!(t instanceof Un)));return Os(t).filter((t=>Ur(t))).length>0?o.push(zn):o.push(Vn),o}}const Ul=(t,e)=>{var o;let i;if(e.endsWith("EmOmissis")){const t=e.replace("transformar","").replace("EmOmissis","");i="transformar"+t+"EmOmissis"+t}else i=e;return null===(o=t.getAcoesPossiveis(t).filter((t=>t instanceof Hn)).filter((t=>t.nomeAcao===e||t.nomeAcao.replaceAll("IncisoCaput","Inciso").replaceAll("IncisoParagrafo","Inciso")===i))[0])||void 0===o?void 0:o.nomeAcao},Bl=(t,e)=>t.getAcoesPossiveis(t).filter((t=>t instanceof e)).length>0,zl=(t,e,o)=>{var i,n,r,s,a,l,u,c,d;if(o&&(null===(i=o.ui)||void 0===i?void 0:i.events)){const e=Yl(o.ui.events,Fa.ElementoModificado);if(e&&e.elementos&&(null===(r=null===(n=e.elementos[0])||void 0===n?void 0:n.conteudo)||void 0===r?void 0:r.texto)===t.texto)return!0}return""!==t.texto&&""===(null===(a=null===(s=e.atual)||void 0===s?void 0:s.conteudo)||void 0===a?void 0:a.texto)||(null===(u=null===(l=e.atual)||void 0===l?void 0:l.conteudo)||void 0===u?void 0:u.texto)&&0!==t.texto.localeCompare(null===(d=null===(c=e.atual)||void 0===c?void 0:c.conteudo)||void 0===d?void 0:d.texto)},Vl=t=>{const e=Pa(t);return e.mensagens=Oa(t),e},Hl=t=>{var e;t.uuid=Ba.next(),null===(e=t.filhos)||void 0===e||e.forEach((t=>Hl(t)))},$l=(t,e)=>yr(t)||(t=>wr(t)&&0===zr(t).indexOfArtigo(t))(e)||0===e.pai.indexOf(e)?t:$r(t),Kl=t=>void 0!==t&&""!==t,Ql=(t,e=!1)=>{const o=[];return Os(t).forEach((t=>{if(e){const e=Oa(t);e&&(t.mensagens=e,o.push(Pa(t)))}else o.push(Pa(t))})),o};class Gl{constructor(){this.eventos=[],this.eventos=tu()}add(t,e){const o=this.get(t);e.forEach((t=>{var e;return Jl(o,t)||null===(e=o.elementos)||void 0===e?void 0:e.push(t)}))}build(){return this.eventos.filter((t=>t.elementos&&t.elementos.length>0))}get(t){return this.eventos.filter((e=>e.stateType===t))[0]}setReferencia(t){this.get(Fa.ElementoIncluido).referencia=t}}const Wl=t=>{const e=new Gl,o=Pa(t);return o.mensagens=Oa(t),e.add(Fa.ElementoModificado,[o]),e.add(Fa.ElementoValidado,La(t)),e},Zl=(t,e)=>{t.mensagens=Oa(t);const o=Pa(t),i=e?[e]:[];return i.push(o),[{stateType:Fa.ElementoModificado,elementos:i},{stateType:Fa.ElementoValidado,elementos:La(t,!0)}]},Xl=(t,e)=>{const o=Ca(e),i=ja(e),n=rs(e),r=e.pai;r.removeFilho(e),r.renumeraFilhos(),ys(r)&&0===r.filhos.length&&(r.pai.alteracoes=void 0);const s=n&&(hs(n)||fs(n))?n:Er(r)?r.pai:r;1===t.artigos.length&&i.push(t.artigos[0]);const a=((t,e,o)=>{const i=new Gl;return i.add(Fa.ElementoRemovido,t),i.add(Fa.ElementoRenumerado,e.map((t=>Pa(t)))),i.add(Fa.ElementoValidado,o),i})(o,i,La(s,!1));return a.build()},Yl=(t,e)=>null==t?void 0:t.filter((t=>t.stateType===e))[0],Jl=(t,e)=>(null==t?void 0:t.elementos.map((t=>{var o,i;return t.uuid===e.uuid&&t.rotulo===e.rotulo&&(null===(o=t.conteudo)||void 0===o?void 0:o.texto)===(null===(i=e.conteudo)||void 0===i?void 0:i.texto)})).filter((t=>t)).length)>0,tu=()=>[{stateType:Fa.ElementoIncluido,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]},{stateType:Fa.ElementoRemovido,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]},{stateType:Fa.ElementoModificado,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]},{stateType:Fa.ElementoRenumerado,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]},{stateType:Fa.ElementoRestaurado,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]},{stateType:Fa.ElementoSuprimido,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]},{stateType:Fa.ElementoValidado,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]},{stateType:Fa.ElementoSelecionado,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]},{stateType:Fa.ElementoMarcado,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]},{stateType:Fa.SituacaoElementoModificada,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]}],eu=(t,e)=>{const o=t.past?t.past:[];return o.push(JSON.parse(JSON.stringify(e))),o},ou=(t,e)=>{const o=t.future?t.future:[];return o.push(JSON.parse(JSON.stringify(e))),o},iu=(t,e)=>{var o;return{articulacao:t.articulacao,modo:t.modo,past:t.past,present:t.present,future:t.future,ui:{events:null===(o=t.ui)||void 0===o?void 0:o.events,message:e}}},nu=(t,e)=>{var o,i,n,r,s,a,l,u,c,d,p,h,f,m,v,g,b;let y=!1;const x=Ra(t.articulacao,e.atual,!0);if(void 0===x)return t;(null===(o=x.situacao)||void 0===o?void 0:o.descricaoSituacao)===Fr.DISPOSITIVO_ORIGINAL&&Kl(null===(n=null===(i=e.novo)||void 0===i?void 0:i.conteudo)||void 0===n?void 0:n.texto)&&(e.atual.conteudo.texto=x.texto,e.novo.conteudo.texto=void 0);const w=hs(x)||fs(x),E=Vl(x),O=[];if(Ta(O,x),zl(x,e,t)&&(x.texto=xs(x)?js(null!==(a=null===(s=e.atual.conteudo)||void 0===s?void 0:s.texto)&&void 0!==a?a:""):null===(r=e.atual.conteudo)||void 0===r?void 0:r.texto,y=!0),((t,e)=>{var o,i,n;return!(!kr(t)||!t.pai||t.situacao.descricaoSituacao===Fr.DISPOSITIVO_NOVO||Zr(t.pai,t))||!(t.situacao.descricaoSituacao!==Fr.DISPOSITIVO_ORIGINAL||!Ts(t)||!ns(t))||xr(t)||Ts(t)&&!Bl(t,hn)||(null===(o=t.situacao)||void 0===o?void 0:o.descricaoSituacao)===Fr.DISPOSITIVO_ORIGINAL&&Kl(null===(n=null===(i=e.novo)||void 0===i?void 0:i.conteudo)||void 0===n?void 0:n.texto)})(x,e))return iu(t,{tipo:ks.INFO,descricao:"No  possvel criar dispositivos nessa situao"});const q=Pl(x,e);if((null===(l=x.situacao)||void 0===l?void 0:l.descricaoSituacao)===Fr.DISPOSITIVO_ORIGINAL||(null===(u=x.situacao)||void 0===u?void 0:u.descricaoSituacao)===Fr.DISPOSITIVO_MODIFICADO||x.situacao instanceof Ml){q.situacao=new Ml,q.situacao.tipoEmenda=t.modo;const e=q.pai;ys(e)&&1===e.filhos.length&&(e.situacao=new Ml)}Kl(null===(d=null===(c=e.novo)||void 0===c?void 0:c.conteudo)||void 0===d?void 0:d.texto)&&x.tipo===q.tipo&&ns(x)&&cl(x,q),xs(q)&&(null===(p=q.mensagens)||void 0===p||p.push({tipo:ks.WARNING,descricao:" necessrio informar o rtulo do dispositivo"})),q.pai.renumeraFilhos();const _=((t,e)=>{const o=new Gl;return o.setReferencia(Pa($l(t,e))),o.add(Fa.ElementoIncluido,Ql(e)),o.add(Fa.ElementoRenumerado,Ma(e)),o.add(Fa.ElementoValidado,La(e,!1)),o})(x,q),A=Vl(x);if(Kl(null===(f=null===(h=e.novo)||void 0===h?void 0:h.conteudo)||void 0===f?void 0:f.texto)&&x.tipo===q.tipo&&O&&O.length>0&&_.add(Fa.ElementoRemovido,O),kr(q)&&2===Kr(q).length){const t=Kr(q).filter((t=>t!==q));_.add(Fa.ElementoModificado,[Pa(t[0])])}return(y||Kl(null===(v=null===(m=e.novo)||void 0===m?void 0:m.conteudo)||void 0===v?void 0:v.texto))&&_.add(Fa.ElementoModificado,[E,A]),(y||Kl(null===(b=null===(g=e.novo)||void 0===g?void 0:g.conteudo)||void 0===b?void 0:b.texto)||Nr(x))&&_.add(Fa.ElementoValidado,[A]),(hs(x)||w)&&(_.add(Fa.ElementoValidado,[A]),_.add(Fa.ElementoRenumerado,[A])),{articulacao:t.articulacao,modo:t.modo,past:eu(t,_.build()),present:_.build(),future:[],ui:{events:_.build()}}},ru=(t,e)=>{var o,i,n,r,s;const a=Ra(t.articulacao,e.atual,!0);if(void 0===a)return t;const l=rs(a),u=a.pai.indexOf(a),c=a.pai.filhos.filter(((t,o)=>o>=u&&t.tipo!==e.novo.tipo)).map((t=>Ca(t))).flat();let d,p;var h,f;zl(a,e)&&(a.texto=xs(a)?js(null!==(n=null===(i=e.atual.conteudo)||void 0===i?void 0:i.texto)&&void 0!==n?n:""):null===(o=e.atual.conteudo)||void 0===o?void 0:o.texto),h=a,f=e.novo.tipo,h.pai.tipo===f?(d=Sl(a.pai.pai,e.novo.tipo,void 0,a.pai.pai.indexOf(a.pai)+1),p=ss(d)):!xs(a)&&((t,e)=>void 0!==Gr(t,e))(a,e.novo.tipo)||((t,e)=>Qr(t.pai.pai,t.pai,[]).filter((t=>t.tipo===e)).length>0)(a,e.novo.tipo)?(p=null!==(r=Gr(a,e.novo.tipo))&&void 0!==r?r:((t,e)=>[...new Set(Qr(t.pai,t,[]))].filter((t=>t.tipo===e)).reverse()[0])(a,e.novo.tipo),d=Sl(p.pai,e.novo.tipo,p)):(d=Sl(a.pai,e.novo.tipo,void 0,a.pai.indexOf(a)),p=null!=l?l:a.pai),d.texto=null===(s=e.novo.conteudo)||void 0===s?void 0:s.texto;((t,e)=>{e.map((e=>{const o=e.pai;Hl(e);const i=wr(e)?ss(e):void 0;return null==o||o.removeFilho(e),e.pai=t,t.addFilho(e,i),e}))})(d,a.pai.filhos.filter(((t,o)=>o>=u&&t.tipo!==e.novo.tipo))),d.renumeraFilhos(),d.pai.renumeraFilhos();const m=[...Ma(d)].concat(d.filhos.filter(((t,e)=>e>=u&&t.tipo!==a.tipo)).map((t=>Ca(t))).flat()),v=ss(d);v&&2===Kr(d).length&&m.unshift(Pa(v));const g=new Gl;return g.setReferencia(Pa($l(p.pai&&yr(p)&&ys(p)?p.pai:p,d))),g.add(Fa.ElementoIncluido,Ca(d)),g.add(Fa.ElementoRemovido,c),g.add(Fa.ElementoRenumerado,m),{articulacao:t.articulacao,modo:t.modo,past:eu(t,g.build()),present:g.build(),future:[],ui:{events:g.build()}}};class su{constructor(t){this.descricaoSituacao=Fr.DISPOSITIVO_MODIFICADO,this.dispositivoOriginal=t}getAcoesPermitidas(t,e){const o=e.filter((t=>!(t instanceof wn))).filter((t=>!(t instanceof Mn))).filter((t=>!(t instanceof Un))).filter((t=>{var e;return!(null===(e=t.descricao)||void 0===e?void 0:e.startsWith("Mover"))})).filter((t=>"Adicionar"!==t.descricao&&"Atualizar dispositivo"!==t.descricao)).filter((t=>!(t instanceof Hn)));return o.push(zn),o.filter((t=>void 0!==t)).sort(((t,e)=>t.descricao.localeCompare(e.descricao)))}}const au=(t,e)=>{const o=[],i=cu(e);for(const e of i.values())o.push(lu(t,e));return o},lu=(t,e)=>{const o={stateType:Fa.ElementoIncluido,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]};return e.forEach((e=>{var i;let n;if(e.idIrmaoAnterior){const i=Is(t.articulacao,e.idIrmaoAnterior);i&&(n=Sl(i.pai,i.tipo,i),o.referencia=Pa(i))}if(e.idPai){const i=Is(t.articulacao,e.idPai);i&&(n=Sl(i,e.tipo,void 0,0),o.referencia=Pa(n.pai))}n&&(n.situacao=new Ml,n.rotulo=e.rotulo,n.texto=e.texto,n.lexmlId=Sa(n),null===(i=o.elementos)||void 0===i||i.push(Pa(n)))})),o},uu=(t,e)=>{t.set(e.id,[e])},cu=t=>{var e;const o=new Map;return null===(e=t.dispositivosAdicionados)||void 0===e||e.forEach(((e,i)=>{if(0===i)uu(o,e);else{const r=t.dispositivosAdicionados[i-1];n=e.id,r.id===n.substring(0,n.lastIndexOf("_"))||((t,e)=>e.substring(0,e.lastIndexOf("_"))===t.substring(0,t.lastIndexOf("_")))(e.id,r.id)?o.get(r).push(e):uu(o,e)}var n})),o},du=(t,e)=>{var o;const i=Ra(t.articulacao,e.atual,!0),n=e.atual.norma,r=(null==i?void 0:i.alteracoes.base)||"",s=new RegExp(`<a.+href=.${r}.*?>.*?</a>`,"ig"),a=na(n);if(void 0===i||!i.alteracoes||r===n&&i.texto.match(s))return t.ui=[],t;const l=`<a href="${u=n}"> ${na(u)} </a>`;var u;const c=i.texto;if(i.texto.match(s))i.texto=c.replace(s,l);else if(i.texto.includes(a))i.texto=c.replace(a,l);else{const t=parseInt(localStorage.indexCursor);i.texto=[c.slice(0,t),l,c.slice(t)].join(" "),localStorage.removeItem("indexCursor")}const d=Pa(i);i.alteracoes.base=n,(null===(o=i.situacao)||void 0===o?void 0:o.descricaoSituacao)===Fr.DISPOSITIVO_ORIGINAL&&(i.situacao=new su(d));const p=new Gl,h=Pa(i,!0);h.mensagens=Oa(i),p.add(Fa.ElementoValidado,[h]),p.add(Fa.ElementoModificado,[h]),p.add(Fa.SituacaoElementoModificada,[h]);const f=Wl(i);return{articulacao:t.articulacao,modo:t.modo,past:eu(t,Zl(i,d)),present:f.build(),future:t.future,ui:{events:p.build()}}},pu=(t,e)=>{const o=Ra(t.articulacao,e.atual,!0);if(void 0===o)return t.ui=[],t;if(!((t,e)=>{const o=Ul(t,e.subType);return t.getAcoesPossiveis(t).filter((t=>t instanceof Hn&&t.nomeAcao&&t.nomeAcao===o)).length>0})(o,e))return t;e.subType=Ul(o,e.subType);const i=[...Ca(o)],n=ja(o),r=((t,e)=>{var o,i;const n=t.pai;let r,s;switch(e.subType){case"transformarAlineaEmItem":case"transformarIncisoCaputEmAlinea":case"transformarIncisoParagrafoEmAlinea":case"transformarParagrafoEmIncisoParagrafo":case"transformarArtigoEmParagrafo":s=rs(t),r=Sl(s,e.novo.tipo);break;case"transformarDispositivoGenericoEmInciso":case"transformarDispositivoGenericoEmAlinea":case"transformarDispositivoGenericoEmItem":case"transformarOmissisEmAlinea":case"transformarOmissisEmArtigo":case"transformarOmissisEmIncisoCaput":case"transformarOmissisEmIncisoParagrafo":case"transformarOmissisEmItem":case"transformarOmissisEmParagrafo":case"transformarAlineaEmOmissisAlinea":case"transformarItemEmOmissisItem":case"transformarParagrafoEmOmissisParagrafo":case"transformarIncisoCaputEmOmissisIncisoCaput":case"transformarIncisoParagrafoEmOmissisIncisoParagrafo":s=n,r=Sl(n,e.novo.tipo,void 0,null==n?void 0:n.indexOf(t));break;case"transformarParagrafoEmInciso":if(Or(t)&&(is(t)||ts(t))){s=n,r=Sl(s.caput,e.novo.tipo);break}s=rs(t),r=Sl(s,e.novo.tipo);break;case"transformarParagrafoEmIncisoCaput":s=n,r=Sl(s.caput,e.novo.tipo);break;default:s=t.pai.pai,r=Sl(s,e.novo.tipo,t.pai)}return r.texto=null!==(i=null===(o=e.atual.conteudo)||void 0===o?void 0:o.texto)&&void 0!==i?i:t.texto,r.createRotulo(r),r.situacao=t.situacao,r.mensagens=Oa(r),null==n||n.removeFilho(t),null==n||n.renumeraFilhos(),null==s||s.renumeraFilhos(),ul(t,r),r})(o,e),s=ja(r).concat(n),a=Ql(r,!0),l=_r(r)?r.pai.pai:r.pai,u=rs(r);if(u){const t=Oa(u);u.mensagens!==t&&a.unshift(Pa(u))}const c=a.filter((t=>t.uuid===l.uuid)).length>0?o.pai:l;c.mensagens=Oa(c),a.unshift(Pa(c));const d=null!=u?u:r.pai,p=((t,e,o,i,n)=>{const r=new Gl;return r.setReferencia(Pa($l(t,e))),r.add(Fa.ElementoIncluido,Ca(e)),r.add(Fa.ElementoRemovido,o),r.add(Fa.ElementoRenumerado,i),r.add(Fa.ElementoValidado,n.filter((t=>t.mensagens.length>0))),r})(Er(d)?d.pai:d,r,i,s.map((t=>{t.mensagens=Oa(t);return Pa(t)})),a);return{articulacao:t.articulacao,modo:t.modo,past:eu(t,p.build()),present:p.build(),future:[],ui:{events:p.build()}}},hu=(t,e)=>{if(Ia(e)){const o=ys(t)?t.pai:Hr(t,e.hierarquia.pai.uuidAlteracao);if(o)return o.alteracoes||(o.alteracoes=Nl(),o.alteracoes.pai=o),e.hierarquia.pai.tipo===pn.articulacao.tipo?o.alteracoes:Hr(o.alteracoes,e.hierarquia.pai.uuid)}return Hr(t,e.hierarquia.pai.uuid)},fu=(t,e)=>{var o,i,n;const r=Sl(wr(e)&&(t.tipo===pn.inciso.name||(t=>{var e,o;const i=null!==(o=null===(e=t.lexmlId)||void 0===e?void 0:e.split("_"))&&void 0!==o?o:[];return t.tipo===pn.omissis.tipo&&i.length>1&&"cpt"===i[i.length-2]})(t))?e.caput:e,t.tipo,void 0,t.hierarquia.posicao);return r.uuid=t.uuid,r.id=t.lexmlId,r.texto=null!==(i=null===(o=null==t?void 0:t.conteudo)||void 0===o?void 0:o.texto)&&void 0!==i?i:"",r.numero=null===(n=null==t?void 0:t.hierarquia)||void 0===n?void 0:n.numero,r.rotulo=null==t?void 0:t.rotulo,r.mensagens=null==t?void 0:t.mensagens,r.situacao=(t=>{switch(t){case Fr.DISPOSITIVO_ADICIONADO:return new Ml;case Fr.DISPOSITIVO_NOVO:return new sl;default:return new Fl}})(t.descricaoSituacao),r},mu=(t,e,o)=>{if(void 0!==e&&void 0!==e.elementos&&void 0!==e.elementos[0]){const i=e.elementos[0],n=hu(t.articulacao,i),r=((t,e)=>{const o=e.shift(),i=hu(t,o),n=fu(o,i),r=[n];return null==e||e.forEach((e=>{var i,s;const a=(null===(i=e.hierarquia)||void 0===i?void 0:i.pai)===(null===(s=null==o?void 0:o.hierarquia)||void 0===s?void 0:s.pai)?n.pai:hu(t,e),l=fu(e,a);r.push(l)})),r})(t.articulacao,e.elementos);if(null==n||n.renumeraFilhos(),o){const e=0===i.hierarquia.posicao?yr(n)&&ys(n)?n.pai:n:$r(rs(r[0]));if(e){const i=Ra(t.articulacao,e);i?o.referencia=Pa(i):iu(t,{tipo:ks.ERROR,descricao:"Erro inesperado"})}}return e.stateType===Fa.ElementoIncluido&&(o.referencia=e.referencia),r.map((t=>Pa(t)))}return[]},vu=(t,e)=>void 0!==e&&void 0!==e.elementos&&void 0!==e.elementos[0]?(e.elementos.forEach((e=>{const o=Ra(t.articulacao,e,!0);if(o){const t=o.pai;t.removeFilho(o),t.renumeraFilhos()}})),e.elementos):[],gu=(t,e,o,i)=>void 0!==e&&void 0!==e.elementos&&void 0!==e.elementos[0]?(e.elementos.forEach((e=>{var n,r,s,a,l,u,c;const d=Ra(t.articulacao,e,!0);i instanceof Fl?(d.numero=null!==(r=null===(n=d.situacao.dispositivoOriginal)||void 0===n?void 0:n.numero)&&void 0!==r?r:"",d.rotulo=null!==(a=null===(s=d.situacao.dispositivoOriginal)||void 0===s?void 0:s.rotulo)&&void 0!==a?a:"",d.texto=null!==(c=null===(u=null===(l=d.situacao.dispositivoOriginal)||void 0===l?void 0:l.conteudo)||void 0===u?void 0:u.texto)&&void 0!==c?c:"",d.situacao=new Fl):d.situacao=new i(Pa(d)),o.elementos.push(Pa(d))})),o.elementos):[],bu=(t,e,o=!1)=>{if(void 0!==e&&void 0!==e.elementos&&void 0!==e.elementos[0]){const i=[];let n=0;return e.elementos.forEach((e=>{var r,s,a,l;const u=Ra(t.articulacao,e,!0);u&&(o&&n===u.uuid||n!==u.uuid)&&(u.situacao.descricaoSituacao===Fr.DISPOSITIVO_MODIFICADO?(u.texto=null!==(s=null===(r=u.situacao.dispositivoOriginal.conteudo)||void 0===r?void 0:r.texto)&&void 0!==s?s:"",u.situacao=new Fl):(e.descricaoSituacao===Fr.DISPOSITIVO_MODIFICADO&&(u.situacao=new su(Pa(u))),u.texto=null!==(l=null===(a=e.conteudo)||void 0===a?void 0:a.texto)&&void 0!==l?l:""),u.alteracoes&&(u.alteracoes.base=e.norma),u.mensagens=Oa(u),i.push(Pa(u)),n=u.uuid)})),i}return[]},yu=(t,e)=>{if(void 0!==e&&void 0!==e.elementos&&void 0!==e.elementos[0]){const o=[];return e.elementos.forEach((e=>{const i=Ra(t.articulacao,e,!0);i&&o.push(Pa(i))})),o}return[]},xu=(t,e)=>{const o=Yl(e,Fa.ElementoValidado);if(void 0!==o&&void 0!==o.elementos&&void 0!==o.elementos[0]){const e=[];return o.elementos.forEach((o=>{const i=Ra(t.articulacao,o,!0);i&&(i.mensagens=Oa(i),i.mensagens.length>0&&e.push(Pa(i)))})),e}return[]},wu=(t,e)=>{const o=Ra(t.articulacao,e.atual,!0);if(void 0===o)return t.ui=[],t;if(!Bl(o,Mn))return iu(t,{tipo:ks.ERROR,descricao:"No  possvel excluir um dispositivo original mas apenas suprimi-lo."});if(!xs(o)&&(hs(o)||1===t.articulacao.filhos.length&&t.articulacao.filhos[0]===o&&!ns(o)))return iu(t,{tipo:ks.ERROR,descricao:"No  possvel excluir o nico dispositivo disponvel."});const i=kr(o)?((t,e)=>{let o=e.pai.indexOf(e);const i=e.pai.filhos.filter(((t,e)=>e<o&&kr(t))),n=e.pai,r=[...Ca(e)],s=ss(e),a=(null==i?void 0:i.length)>0&&!xs(e)?i.reverse()[0]:e.pai,l=(null==i?void 0:i.length)>0&&!xs(e)?i.reverse()[0]:o>0?$r(a.filhos[o-1]):a,u=yr(l)?a:$r(l),c=e.filhos.map((t=>(t.pai=a,n.removeFilho(t),Hl(t),(null==i?void 0:i.length)>0?a.addFilho(t):a.addFilhoOnPosition(t,o++),t)));e.pai.removeFilho(e),null==a||a.renumeraFilhos(),n.renumeraFilhos();const d=c.map((t=>Ca(t))).flat(),p=a.filhos.filter(((t,e)=>e>=o&&(kr(t)||vs(t)))).map((t=>Pa(t))).flat();s&&1===Kr(s).length&&p.unshift(Pa(s));const h=new Gl;return h.setReferencia(yr(u)&&ys(u)?Pa(u.pai):Pa(u)),h.add(Fa.ElementoIncluido,d),h.add(Fa.ElementoRemovido,r),h.add(Fa.ElementoRenumerado,p),h.build()})(t.articulacao,o):Xl(t.articulacao,o);return{articulacao:t.articulacao,modo:t.modo,past:eu(t,i),present:i,future:[],ui:{events:i}}},Eu=(t,e)=>{var o,i;const n=Ra(t.articulacao,e.atual,!0);if(void 0===n)return t.ui=[],t;if(!(Os(n).filter((t=>Ur(t))).length>0)&&(null===(o=n.situacao)||void 0===o?void 0:o.descricaoSituacao)!==Fr.DISPOSITIVO_MODIFICADO&&(null===(i=n.situacao)||void 0===i?void 0:i.descricaoSituacao)!==Fr.DISPOSITIVO_SUPRIMIDO)return t;const r=((t,e)=>{const o=Os(e).filter((t=>t.situacao.descricaoSituacao!==Fr.DISPOSITIVO_ORIGINAL));o.forEach((t=>{var e,o,i,n,r,s,a,l,u;t.numero=null!==(o=null===(e=t.situacao.dispositivoOriginal)||void 0===e?void 0:e.numero)&&void 0!==o?o:"",t.rotulo=null!==(n=null===(i=t.situacao.dispositivoOriginal)||void 0===i?void 0:i.rotulo)&&void 0!==n?n:"",t.id=null!==(s=null===(r=t.situacao.dispositivoOriginal)||void 0===r?void 0:r.lexmlId)&&void 0!==s?s:"",t.texto=t.situacao.descricaoSituacao===Fr.DISPOSITIVO_MODIFICADO?null!==(u=null===(l=null===(a=t.situacao.dispositivoOriginal)||void 0===a?void 0:a.conteudo)||void 0===l?void 0:l.texto)&&void 0!==u?u:"":t.texto,t.situacao=new Fl}));const i=new Gl;return i.add(Fa.ElementoRestaurado,o.map((t=>Pa(t)))),i.build()})(t.articulacao,n);return{articulacao:t.articulacao,modo:t.modo,past:eu(t,r),present:r,future:[],ui:{events:r}}},Ou=(t,e)=>{0!==t.length&&(null==t||t.forEach((t=>{e.add(t.situacao.descricaoSituacao),Ou(t.filhos,e)})))},qu=(t,e)=>{var o;const i=Ra(t.articulacao,e.atual,!0);if(void 0===i||(null===(o=i.situacao)||void 0===o?void 0:o.descricaoSituacao)!==Fr.DISPOSITIVO_ORIGINAL)return t.ui=[],t;if(!(t=>{var e;const o=new Set;return o.add(t.situacao.descricaoSituacao),Ou(t.filhos,o),t.alteracoes&&Ou(null===(e=t.alteracoes)||void 0===e?void 0:e.filhos,o),1===o.size&&[...o][0]===Fr.DISPOSITIVO_ORIGINAL})(i))return iu(t,{tipo:ks.ERROR,descricao:"S  possvel suprimir dispositivos que no tenham sofrido modificao."});const n=((t,e)=>{Os(e).forEach((t=>t.situacao=new qa(Pa(t)))),e.alteracoes&&e.alteracoes.filhos.length>0&&e.alteracoes.filhos.forEach((t=>Os(t).forEach((t=>t.situacao=new qa(Pa(t))))));const o=new Gl;return o.add(Fa.ElementoSuprimido,Ca(e)),o.build()})(t.articulacao,i);return{articulacao:t.articulacao,modo:t.modo,past:eu(t,n),present:n,future:[],ui:{events:n}}},_u=function(t){for(var e=Object.keys(t),o={},i=0;i<e.length;i++){var n=e[i];"production"!==process.env.NODE_ENV&&void 0===t[n]&&un('No reducer provided for key "'+n+'"'),"function"==typeof t[n]&&(o[n]=t[n])}var r,s,a=Object.keys(o);"production"!==process.env.NODE_ENV&&(r={});try{!function(t){Object.keys(t).forEach((function(e){var o=t[e];if(void 0===o(void 0,{type:an.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===o(void 0,{type:an.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+an.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(o)}catch(t){s=t}return function(t,e){if(void 0===t&&(t={}),s)throw s;if("production"!==process.env.NODE_ENV){var i=function(t,e,o,i){var n=Object.keys(e),r=o&&o.type===an.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(0===n.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!ln(t))return"The "+r+' has unexpected type of "'+{}.toString.call(t).match(/\s([a-z|A-Z]+)/)[1]+'". Expected argument to be an object with the following keys: "'+n.join('", "')+'"';var s=Object.keys(t).filter((function(t){return!e.hasOwnProperty(t)&&!i[t]}));return s.forEach((function(t){i[t]=!0})),o&&o.type===an.REPLACE?void 0:s.length>0?"Unexpected "+(s.length>1?"keys":"key")+' "'+s.join('", "')+'" found in '+r+'. Expected to find one of the known reducer keys instead: "'+n.join('", "')+'". Unexpected keys will be ignored.':void 0}(t,o,e,r);i&&un(i)}for(var n=!1,l={},u=0;u<a.length;u++){var c=a[u],d=o[c],p=t[c],h=d(p,e);if(void 0===h){var f=cn(c,e);throw new Error(f)}l[c]=h,n=n||h!==p}return(n=n||a.length!==Object.keys(t).length)?l:t}}({appReducer:(t={},e)=>(e.type,t),elementoReducer:(t={},e)=>{switch(e.type){case"APLICAR_ALTERACOES_EMENDA":return((t,e)=>{const o={articulacao:t.articulacao,modo:t.modo,past:[],present:[],future:[],ui:{events:[]}},i=new Gl;return e.alteracoesEmenda.dispositivosSuprimidos&&(i.add(Fa.ElementoSuprimido,[]),e.alteracoesEmenda.dispositivosSuprimidos.forEach((e=>{var o;const n=Is(t.articulacao,e.id);n&&(n.situacao=new qa(Pa(n)),null===(o=i.get(Fa.ElementoSuprimido).elementos)||void 0===o||o.push(Pa(n)))}))),e.alteracoesEmenda.dispositivosModificados&&(i.add(Fa.ElementoModificado,[]),e.alteracoesEmenda.dispositivosModificados.forEach((e=>{var o;const n=Is(t.articulacao,e.id);n&&(n.situacao=new su(Pa(n)),n.texto=e.texto,null===(o=i.get(Fa.ElementoModificado).elementos)||void 0===o||o.push(Pa(n)))}))),e.alteracoesEmenda.dispositivosAdicionados&&au(t,e.alteracoesEmenda).forEach((t=>i.eventos.push(t))),o.ui.events=i.build(),o})(t,e);case"ATUALIZAR_ELEMENTO":return((t,e)=>{var o,i,n,r;const s=Ra(t.articulacao,e.atual,!0);if(void 0===s||s.texto===e.atual.conteudo.texto)return t.ui=[],t;const a=Pa(s);s.texto=xs(s)?js(null!==(n=null===(i=e.atual.conteudo)||void 0===i?void 0:i.texto)&&void 0!==n?n:""):null===(o=e.atual.conteudo)||void 0===o?void 0:o.texto,(null===(r=s.situacao)||void 0===r?void 0:r.descricaoSituacao)===Fr.DISPOSITIVO_ORIGINAL&&(s.situacao=new su(a));const l=Wl(s);return{articulacao:t.articulacao,modo:t.modo,past:eu(t,Zl(s,a)),present:l.build(),future:t.future,ui:{events:l.build()}}})(t,e);case"ATUALIZAR_REFERENCIA_ELEMENTO":return du(t,e);case"ATUALIZAR_TEXTO_ELEMENTO":return((t,e)=>{var o,i,n,r;const s=Ra(t.articulacao,e.atual,!0);if(void 0===s||s.texto===e.atual.conteudo.texto)return t.ui=[],t;const a=Pa(s);s.texto=xs(s)?js(null!==(n=null===(i=e.atual.conteudo)||void 0===i?void 0:i.texto)&&void 0!==n?n:""):null===(o=e.atual.conteudo)||void 0===o?void 0:o.texto,(null===(r=s.situacao)||void 0===r?void 0:r.descricaoSituacao)===Fr.DISPOSITIVO_ORIGINAL&&(s.situacao=new su(a));const l=new Gl,u=Pa(s,!0);u.mensagens=Oa(s),((t,e)=>{var o,i;return(null===(i=null===(o=e.atual)||void 0===o?void 0:o.conteudo)||void 0===i?void 0:i.texto)!==t})(s.texto,e)&&l.add(Fa.ElementoModificado,[u]),l.add(Fa.SituacaoElementoModificada,[u]),l.add(Fa.ElementoValidado,La(s));const c=Wl(s);return{articulacao:t.articulacao,modo:t.modo,past:eu(t,Zl(s,a)),present:c.build(),future:[],ui:{events:l.build()}}})(t,e);case"ADICIONAR_ELEMENTO":return nu(t,e);case"AGRUPAR_ELEMENTO":return ru(t,e);case"TRANSFORMAR_TIPO_ELEMENTO":return pu(t,e);case"ELEMENTO_SELECIONADO":return((t,e)=>{const o=Ra(t.articulacao,e.atual,!0);if(void 0===o)return t.ui.events=[],t;o.mensagens=Oa(o);const i=Pa(o,!0),n=[{stateType:Fa.ElementoSelecionado,elementos:[i]}];return{articulacao:t.articulacao,modo:t.modo,past:t.past,present:t.present,future:t.future,ui:{events:n}}})(t,e);case"INFORMAR_NORMA":return((t,e)=>{const o=Ra(t.articulacao,e.atual,!0);if(void 0===o)return t.ui.events=[],t;o.mensagens=Oa(o);const i=Pa(o,!0),n=[{stateType:Fa.InformarNorma,elementos:[i]}];return{articulacao:t.articulacao,modo:t.modo,past:t.past,present:t.present,future:[],ui:{events:n}}})(t,e);case"Mover para baixo":return((t,e)=>{const o=Ra(t.articulacao,e.atual,!0);if(void 0===o)return t.ui=[],t;if(!Bl(o,Rn))return iu(t,{tipo:ks.ERROR,descricao:"No  possvel excluir um dispositivo original mas apenas suprimi-lo."});const i=ds(o);if(void 0===i)return t;const n=[...Ca(o),...Ca(i)],r=ja(o),s=o.pai,a=s.indexOf(o);Hl(o),Hl(i),s.removeFilho(o),s.removeFilho(i),s.addFilhoOnPosition(i,a),s.addFilhoOnPosition(o,a+1),o.pai=s,i.pai=s,s.renumeraFilhos();const l=0===a?_r(i)||xs(o)&&"Artigo"===o.tipo?s.pai:s:rs(i),u=new Gl;return u.setReferencia(Pa($l(l,i))),u.add(Fa.ElementoIncluido,qs(i,[]).concat(qs(o,[])).map((t=>(t.mensagens=Oa(t),Pa(t))))),u.add(Fa.ElementoRemovido,n),u.add(Fa.ElementoRenumerado,r.map((t=>Pa(t)))),u.add(Fa.ElementoMarcado,[Pa(o),e.atual]),u.add(Fa.ElementoSelecionado,[Pa(o)]),{articulacao:t.articulacao,modo:t.modo,past:eu(t,u.build()),present:u.build(),future:[],ui:{events:u.build()}}})(t,e);case"Mover para cima":return((t,e)=>{var o;const i=Ra(t.articulacao,e.atual,!0);if(void 0===i)return t.ui=[],t;if(!Bl(i,Ln))return iu(t,{tipo:ks.ERROR,descricao:"No  possvel excluir um dispositivo original mas apenas suprimi-lo."});const n=as(i);if(void 0===n)return t;const r=[...Ca(n),...Ca(i)],s=ja(i),a=i.pai,l=a.indexOf(n);Hl(n),Hl(i),a.removeFilho(n),a.removeFilho(i),a.addFilhoOnPosition(i,l),a.addFilhoOnPosition(n,l+1),i.pai=a,n.pai=a,a.renumeraFilhos();const u=0===l?(null===(o=i.pai)||void 0===o?void 0:o.tipo)===pn.caput.tipo||xs(i)&&"Artigo"===i.tipo?a.pai:a:rs(i),c=new Gl;return c.setReferencia(Pa($l(u,i))),c.add(Fa.ElementoIncluido,qs(i,[]).concat(qs(n,[])).map((t=>(t.mensagens=Oa(t),Pa(t))))),c.add(Fa.ElementoRemovido,r),c.add(Fa.ElementoRenumerado,s.map((t=>Pa(t)))),c.add(Fa.ElementoMarcado,[Pa(i),e.atual]),c.add(Fa.ElementoSelecionado,[Pa(i)]),{articulacao:t.articulacao,modo:t.modo,past:eu(t,c.build()),present:c.build(),future:[],ui:{events:c.build()}}})(t,e);case"RENUMERAR_ELEMENTO":return((t,e)=>{var o;const i=Ra(t.articulacao,e.atual,!0);if(void 0===i)return t.ui=[],t;if(!Bl(i,Un))return iu(t,{tipo:ks.INFO,descricao:"Nessa situao, no  possvel renumerar o dispositivo"});const n=eu(t,Zl(i));try{i.createNumeroFromRotulo(null===(o=e.novo)||void 0===o?void 0:o.numero)}catch(e){return iu(t,{tipo:ks.ERROR,descricao:"O rtulo informado  invlido",detalhe:e})}i.createRotulo(i);const r=Wl(i);return{articulacao:t.articulacao,modo:t.modo,past:n,present:r.build(),future:t.future,ui:{events:r.build()}}})(t,e);case"RESTAURAR_ELEMENTO":return Eu(t,e);case"SUPRIMIR_ELEMENTO":return qu(t,e);case"ABRIR_ARTICULACAO":return Ua(0,e);case"REDO":return(t=>{var e;if(void 0===t.future||0===t.future.length)return t.ui=[],t;const o=t.future.pop(),i={articulacao:t.articulacao,modo:t.modo,past:eu(t,o),present:[],future:t.future,ui:{events:[]}},n=new Gl;n.add(Fa.ElementoRemovido,vu(t,Yl(o,Fa.ElementoRemovido))),n.add(Fa.ElementoIncluido,mu(t,Yl(o,Fa.ElementoIncluido),Yl(n.eventos,Fa.ElementoIncluido))),n.add(Fa.ElementoModificado,bu(t,Yl(o,Fa.ElementoModificado),!0)),n.add(Fa.ElementoSuprimido,gu(t,Yl(o,Fa.ElementoSuprimido),Yl(n.eventos,Fa.ElementoSuprimido),qa)),n.add(Fa.ElementoRenumerado,yu(t,Yl(o,Fa.ElementoRenumerado))),n.add(Fa.ElementoValidado,xu(t,o));const r=null===(e=Yl(o,Fa.ElementoMarcado))||void 0===e?void 0:e.elementos;return r&&(n.add(Fa.ElementoMarcado,r),n.add(Fa.ElementoSelecionado,[r[0]])),i.ui.events=n.build(),i.present=n.build(),i})(t);case"REMOVER_ELEMENTO":return wu(t,e);case"SHIFT_TAB":case"TAB":return((t,e)=>{const o=Ra(t.articulacao,e.atual,!0);if(void 0===o)return t.ui=[],t;const i="TAB"===e.type?o.getAcaoPossivelTab(o):o.getAcaoPossivelShiftTab(o);if(!i)return t.ui=[],t;const n={type:"TRANSFORMAR_TIPO_ELEMENTO",subType:i.nomeAcao,atual:e.atual,novo:{tipo:i.tipo}};return pu(t,n)})(t,e);case"UNDO":return(t=>{var e;if(void 0===t.past||0===t.past.length)return t.ui=[],t;const o=t.past.pop(),i={articulacao:t.articulacao,modo:t.modo,past:t.past,present:[],future:ou(t,o),ui:{events:[]}},n=new Gl;n.add(Fa.ElementoRemovido,vu(t,Yl(o,Fa.ElementoIncluido))),n.add(Fa.ElementoIncluido,mu(t,Yl(o,Fa.ElementoRemovido),Yl(n.eventos,Fa.ElementoIncluido))),n.add(Fa.ElementoRestaurado,gu(t,Yl(o,Fa.ElementoSuprimido),Yl(n.eventos,Fa.ElementoRestaurado),Fl)),n.add(Fa.ElementoModificado,bu(t,Yl(o,Fa.ElementoModificado))),n.add(Fa.ElementoRenumerado,yu(t,Yl(o,Fa.ElementoRenumerado))),n.add(Fa.ElementoValidado,xu(t,o));const r=null===(e=Yl(o,Fa.ElementoMarcado))||void 0===e?void 0:e.elementos;return r&&(n.add(Fa.ElementoMarcado,[r[1],r[0]]),n.add(Fa.ElementoSelecionado,[r[1]])),i.ui.events=n.build(),i.present=n.build(),i})(t);case"VALIDAR_ELEMENTO":return((t,e)=>{const o=Ra(t.articulacao,e.atual,!0);if(void 0===o)return t.ui=[],t;o.mensagens=Oa(o);const i=Pa(o,!0),n=[{stateType:Fa.ElementoValidado,elementos:[i]}];return{articulacao:t.articulacao,modo:t.modo,past:t.past,present:t.present,future:t.future,ui:{events:n}}})(t,e);case"VALIDAR_ARTICULACAO":return(t=>{const e=[];qs(t.articulacao,[]).forEach((t=>{const o=Oa(t);(null==o?void 0:o.length)>0&&(t.mensagens=o,e.push(Pa(t)))}));const o=[{stateType:Fa.ElementoValidado,elementos:e}];return{articulacao:t.articulacao,modo:t.modo,past:t.past,present:t.present,future:t.future,ui:{events:o}}})(t);default:return t}}}),Au=function t(e,o,i){var n;if("function"==typeof o&&"function"==typeof i||"function"==typeof i&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof o&&void 0===i&&(i=o,o=void 0),void 0!==i){if("function"!=typeof i)throw new Error("Expected the enhancer to be a function.");return i(t)(e,o)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var r=e,s=o,a=[],l=a,u=!1;function c(){l===a&&(l=a.slice())}function d(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return s}function p(t){if("function"!=typeof t)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var e=!0;return c(),l.push(t),function(){if(e){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");e=!1,c();var o=l.indexOf(t);l.splice(o,1),a=null}}}function h(t){if(!ln(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,s=r(s,t)}finally{u=!1}for(var e=a=l,o=0;o<e.length;o++){(0,e[o])()}return t}function f(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");r=t,h({type:an.REPLACE})}function m(){var t,e=p;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new TypeError("Expected the observer to be an object.");function o(){t.next&&t.next(d())}return o(),{unsubscribe:e(o)}}})[rn]=function(){return this},t}return h({type:an.INIT}),(n={dispatch:h,subscribe:p,getState:d,replaceReducer:f})[rn]=m,n}(_u,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());let Su=class extends(nn(Au)(on)){constructor(){super(),this.elementos=[],this.tabIndex=-1}createRenderRoot(){return this}render(){return ji`
      <style>
        lexml-eta-editor {
          display: block;
          height: 100%;
        }

        lexml-eta-editor:focus {
          outline: 0;
          border: 0px solid #f1f1f1;
          -webkit-box-shadow: 0px;
          box-shadow: none;
        }
      </style>
      <lexml-eta-editor></lexml-eta-editor>
    `}};ti([Zi({type:Array})],Su.prototype,"elementos",void 0),Su=ti([Gi("lexml-eta-articulacao")],Su);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const Iu=new WeakMap,Nu=(ku=t=>e=>{if(!(e instanceof Ai))throw new Error("unsafeHTML can only be used in text bindings");const o=Iu.get(e);if(void 0!==o&&Ei(t)&&t===o.value&&e.value===o.fragment)return;const i=document.createElement("template");i.innerHTML=t;const n=document.importNode(i.content,!0);e.setValue(n),Iu.set(e,{value:t,fragment:n})},(...t)=>{const e=ku(...t);return fi.set(e,!0),e});var ku;let Pu=class extends on{update(t){super.update(t)}buildTemplateComando(t){const e=null==t?void 0:t.reduce(((t,e)=>t+`<p> ${e.cabecalho} </p>`),"");return ji`${e}`}buildTemplateCitacao(t){return t.replaceAll("<Rotulo>","<b>").replaceAll("</Rotulo>","</b> ").replaceAll("<Omissis/>"," ..........................................................")}render(){var t,e,o;const i=null===(t=this.emenda)||void 0===t?void 0:t.comandos;return ji`
      <style>
        .lexml-emenda-comando {
          display: block;
          border: 1px solid #ccc;
          height: 100%;
          padding: 0 10px;
          margin: 0px 5px;
          font-size: 14px;
        }

        .lexml-emenda-comando:focus {
          outline: 0;
          border: 0px solid #f1f1f1;
          -webkit-box-shadow: 0px;
          box-shadow: none;
        }

        .lexml-emenda-tituloComando {
          margin: 3px 10px;
          text-align: center;
          font-weight: bold;
        }

        .lexml-emenda-cabecalhoComando {
          display: block;
          margin-top: 1em;
          text-align: justify;
          text-indent: 3em;
        }

        .lexml-emenda-citacaoComando {
          display: block;
          margin-top: 1em;
        }

        .lexml-emenda-citacaoComando p {
          text-align: justify;
          text-indent: 3em;
          margin: 0;
        }
      </style>

      <div class="lexml-emenda-comando">
        <p class="lexml-emenda-tituloComando">Comando de emenda</p>
        <p>${null===(o=null===(e=this.emenda)||void 0===e?void 0:e.comandoEmenda)||void 0===o?void 0:o.cabecalhoComum}</p>

        ${null==i?void 0:i.map((t=>ji`
            ${Nu('<div class="lexml-emenda-cabecalhoComando">'+t.cabecalho+'</div><div class="lexml-emenda-citacaoComando">'+this.buildTemplateCitacao(t.citacao)+"</div>")}
          `))}
      </div>
    `}};ti([Zi({type:Object})],Pu.prototype,"emenda",void 0),Pu=ti([Gi("lexml-emenda-comando")],Pu);class Tu extends class{}{constructor(){super(...arguments),this.nivel=0,this.rotulo="",this.agrupador=!1,this.editavel=!0,this.sendoEditado=!1,this.index=0}}const Cu=(t,e)=>new Hn(pn[e.toLowerCase()],"Transformar "+t.tipo+"em "+pn[e.toLowerCase()].name,"transformar"+t.tipo+"Em"+pn[e.toLowerCase()].name).execute(t),Ru=Quill.import("blots/block");class Du extends Ru{get linha(){return this.parent.parent.parent}get tamanho(){return this.length()-1}get tagName(){return this.domNode.tagName}get html(){return"<br>"!==this.domNode.innerHTML?this.domNode.innerHTML.replace("&nbsp;",""):""}set html(t){this.domNode.innerHTML=t}constructor(t){super(t)}}var Lu;!function(t){t[t.Esquerda=0]="Esquerda",t[t.Direita=1]="Direita"}(Lu||(Lu={}));class ju extends Du{constructor(){super(ju.create())}static create(){const t=super.create();return t.setAttribute("contenteditable","false"),t.setAttribute("class",ju.className),t}}ju.blotName="blotMenu",ju.tagName="DIV",ju.className="lx-eta-dropdown";class Mu extends Du{constructor(){super(Mu.create())}static create(){const t=super.create();return t.setAttribute("contenteditable","false"),t.setAttribute("class",Mu.className),t.innerHTML="&vellip;",t}}Mu.blotName="blotMenuBotao",Mu.tagName="DIV",Mu.className="lx-eta-dropbtn";class Fu extends Du{constructor(t){super(Fu.create(t))}static create(t){const e=super.create(),o=t===Lu.Esquerda?"":" lx-eta-dropdown-content-right";return e.setAttribute("contenteditable","false"),e.setAttribute("class",Fu.className+o),e}}Fu.blotName="blotMenuConteudo",Fu.tagName="DIV",Fu.className="lx-eta-dropdown-content";class Uu extends Du{constructor(t,e){super(Uu.create(t,e))}static create(t,e){var o;const i=super.create();return i.setAttribute("contenteditable","false"),i.setAttribute("class",Uu.className),i.innerHTML=null!==(o=t.descricao)&&void 0!==o?o:"",i.addEventListener("mousedown",(()=>{var o;if(t.descricao==Cn.descricao){const t=null===(o=document.getSelection())||void 0===o?void 0:o.focusOffset;localStorage.setItem("indexCursor",JSON.stringify(t))}e(t.descricao)})),i}}Uu.blotName="blotMenuItem",Uu.tagName="DIV",Uu.className="lx-eta-dropdown-content-item";class Bu extends Du{constructor(t){super(Bu.create(t))}static create(t){const e=super.create();return e.setAttribute("contenteditable","false"),e.setAttribute("class",Bu.getClasseCSS(t.agrupador)),e.setAttribute("data-rotulo",t.rotulo),e.innerHTML="",e}get rotulo(){return this.domNode.getAttribute("data-rotulo")}format(t,e){t===Bu.blotName?this.domNode.setAttribute("data-rotulo",e):t===Bu.formatoStyle?this.domNode.setAttribute("style",Bu.criarAtributoStyle(e)):super.format(t,e)}static criarAtributoStyle(t){let e="Articulacao"===t.tipo?"color: #373634; font-weight: 600; line-height: 0.42;":"color: #373634; font-weight: 600; line-height: 1.42;";return e=t.agrupador?`${e} display: block; font-size: 1rem; text-align: center;`:`${e} float: left; margin-right: 10px;`,e}static getClasseCSS(t){return"texto__rotulo"+(t?" texto__rotulo--agrupador":" texto__rotulo--padrao")}}Bu.blotName="rotulo",Bu.tagName="LABEL",Bu.formatoStyle="STYLE";class zu extends Du{constructor(){super(zu.create())}static create(){const t=super.create();return t.setAttribute("contenteditable","false"),t.innerHTML="&nbsp;",t}}zu.blotName="espaco",zu.tagName="ESPACO",zu.className="espaco";const Vu=Quill.import("blots/container");class Hu extends Vu{constructor(t){var e,o,i,n,r;super(Hu.create(t)),this._lexmlId=null!==(e=t.lexmlId)&&void 0!==e?e:"",this._editavel=t.editavel,this._nivel=t.nivel,this._numero=null!==(o=t.numero)&&void 0!==o?o:"",this._tipo=null!==(i=t.tipo)&&void 0!==i?i:"",this._agrupador=t.agrupador,this._hierarquia=(null===(r=null===(n=t.hierarquia)||void 0===n?void 0:n.pai)||void 0===r?void 0:r.uuidAlteracao)?t.hierarquia:void 0,this._descricaoSituacao=t.descricaoSituacao?t.descricaoSituacao:void 0}static criarId(t){return`lxEtaId${null!=t?t:0}`}static create(t){const e=super.create();return e.setAttribute("contenteditable",(null==t?void 0:t.editavel)?"true":"false"),e.setAttribute("class",Hu.className+" "+Hu.getClasseCSS(t)),e.setAttribute("id",Hu.criarId(t.uuid)),e.setAttribute("cellpadding","0"),e.setAttribute("cellspacing","0"),e.setAttribute("border","0"),e}get blotRotulo(){var t,e;return null===(e=null===(t=this.children.head)||void 0===t?void 0:t.children)||void 0===e?void 0:e.head.children.head}get blotConteudo(){var t;return null===(t=this.blotRotulo)||void 0===t?void 0:t.next}get containerDireito(){return this.children.head.children.tail}get blotContainerDireito(){return this.containerDireito.children.head}get tamanho(){return this.length()-1}get id(){var t;return null!==(t=this.domNode.getAttribute("id"))&&void 0!==t?t:""}set agrupador(t){this._agrupador=t}get agrupador(){return this._agrupador}set editavel(t){this._editavel=t,this.blotConteudo.domNode.contentEditable=this._editavel}get editavel(){return this._editavel}set hierarquia(t){this._hierarquia=t}get hierarquia(){return this._hierarquia}set nivel(t){this._nivel=t}get nivel(){return this._nivel}set numero(t){this._numero=t}get numero(){return this._numero}set tipo(t){this._tipo=t}get tipo(){return this._tipo}set descricaoSituacao(t){this._descricaoSituacao=t}get descricaoSituacao(){return this._descricaoSituacao}get uuid(){return parseInt(this.id.substr(7),0)}set lexmlId(t){this._lexmlId=t}get lexmlId(){var t;return null!==(t=this._lexmlId)&&void 0!==t?t:""}get html(){return"<br>"!==this.domNode.innerHTML?this.domNode.innerHTML:""}set html(t){this.domNode.innerHTML=t}setEstilo(t){let e="",o="texto__dispositivo";switch(t){case Fr.DISPOSITIVO_ADICIONADO:e="dispositivo--adicionado";break;case Fr.DISPOSITIVO_MODIFICADO:e="dispositivo--modificado";break;case Fr.DISPOSITIVO_SUPRIMIDO:e="dispositivo--suprimido",o="texto--suprimido"}this.blotRotulo.domNode.setAttribute("class",`${Bu.getClasseCSS(this._agrupador)} ${e}`),this.blotConteudo.domNode.setAttribute("class",`${e} ${o}`)}format(t,e){t===Hu.blotName?this.domNode.setAttribute("style",Hu.criarAtributoStyle(e)):super.format(t,e)}ativarBorda(){this.domNode.classList.add("container__elemento--ativo")}desativarBorda(){this.domNode.classList.remove("container__elemento--ativo"),this.limparContainerDireito()}limparContainerDireito(){this.blotContainerDireito.tagName!==zu.tagName&&(this.blotContainerDireito.remove(),(new zu).insertInto(this.containerDireito))}static criarAtributoStyle(t){let e="Articulacao"===t.tipo?"width: 100%; min-height: 1px; line-height: 0.42; margin: 1px":"width: 100%; min-height: 26px; border: 1px solid #ffffff; line-height: 1.42; margin: 0px 2px 0px 5px !important;";return t.agrupador&&(e=`${e} text-align: center;`),e}static getClasseCSS(t){let e="Articulacao"===t.tipo?"container__elemento--articulacao":"container__elemento--padrao";return t.agrupador&&(e=`${e} agrupador`),e}}function $u(t){t.stopPropagation(),t.preventDefault()}Hu.blotName="containerTable",Hu.tagName="DIV",Hu.className="container__elemento";class Ku{constructor(t,e){this.callback=t,this.canceled=e}isCanceled(){var t;return null!==(t=this.canceled)&&void 0!==t&&t}cancel(){this.canceled=!0}}class Qu{constructor(){this.subscriptions=[]}subscribe(t){const e=new Ku(t);return this.subscriptions.push(e),e}notify(t){this.subscriptions.forEach((e=>{e.isCanceled()||setTimeout((()=>{e.callback(t)}),1)}))}clean(){this.subscriptions=[]}}const Gu=/([a-zA-Z0-9 '!@#$%&*()_\-+=`'{[^~}\]<,>.:;?/|\\])/i,Wu=/([^a-zA-Z0-9 '!@#$%&*()_\-+=`'{[^~}\]<,>.:;?/|\\])/gi,Zu=Quill.import("modules/keyboard");class Xu extends Zu{constructor(t,e){super(t,e),this.operacaoTecladoInvalida=new Qu,this.adicionaElementoTeclaEnter=new Qu,this.removeElemento=new Qu,this.renumeraElemento=new Qu,this.transformaElemento=new Qu,this.moveElemento=new Qu,this.onChange=new Qu,this.altGraphPressionado=!1}listen(){this.quill.root.addEventListener("keyup",(t=>{"AltGraph"===t.key&&(this.altGraphPressionado=!1),!t.ctrlKey||t.altKey||t.shiftKey||!"biBI".includes(t.key)?this.quill.cursorDeTextoEstaSobreLink()||"Backspace"===t.key&&this.quill.cursorDeTextoEstaSobreLink(-1)||!this.isTeclaQueAlteraTexto(t)||this.onChange.notify("keyboard"):this.onHotKeyToolbar()})),this.quill.root.addEventListener("keypress",(t=>{this.quill.cursorDeTextoEstaSobreLink()&&1===t.key.length&&$u(t)})),this.quill.root.addEventListener("keydown",(t=>{if("AltGraph"===t.key&&(this.altGraphPressionado=!0),this.quill.cursorDeTextoEstaSobreLink()||"Backspace"===t.key&&this.quill.cursorDeTextoEstaSobreLink(-1)){if(["Delete","Backspace"].includes(t.key)||!t.ctrlKey&&1===t.key.length||t.ctrlKey&&"xvXV".includes(t.key)||t.altKey&&"0123456789".includes(t.key))return void $u(t)}else t.ctrlKey?(t.altKey||t.metaKey||("Home"===t.key?this.onTeclaHome(t):"End"===t.key?this.onTeclaEnd(t):"ArrowUp"===t.key||"ArrowDown"===t.key?this.onHotKeyMover(t):"a"!==t.key.toLowerCase()||t.shiftKey?"d"===t.key.toLowerCase()?this.onTeclaCtrlD(t):"z"===t.key.toLowerCase()?this.onTeclaCtrlZ(t):"y"===t.key.toLowerCase()?this.onTeclaCtrlY(t):t.ctrlKey&&t.shiftKey&&"a"===t.key.toLowerCase()?this.onTeclaCtrlShiftA(t):"b"!==t.key&&"i"!==t.key&&"x"!==t.key&&"v"!==t.key||this.onValidarTecla(t):this.onTeclaCtrlA(t)),(t.altKey||t.metaKey)&&(["a","l","n","o","p","t"].includes(t.key.toLowerCase())?this.onHotKeyTransformacaoTipo(t):"r"===t.key.toLowerCase()&&this.onHotKeyRenumeraDispositivo(t))):"ArrowRight"===t.key?this.onTeclaArrowRight(t):"ArrowLeft"===t.key?this.onTeclaArrowLeft(t):"ArrowDown"===t.key||"ArrowUp"===t.key?this.onTeclaArrowDownOuUp(t):"Enter"===t.key?this.onTeclaEnter(t):"Escape"===t.key?this.onTeclaEscape(t):"Delete"===t.key?this.onTeclaDelete(t):"Backspace"===t.key?this.onTeclaBackspace(t):"Tab"===t.key?this.onTeclaTab(t):1===t.key.length&&Gu.test(t.key)&&this.onValidarTecla(t)})),super.listen()}isTeclaComCaracterGrafico(t){return 3!==t.location&&"123456=[]/".includes(t.key)}isTeclaQueAlteraTexto(t){return!(t.ctrlKey||t.altKey||t.metaKey)&&(!(this.altGraphPressionado&&!this.isTeclaComCaracterGrafico(t))&&!(!["Delete","Backspace"].includes(t.key)&&1!==t.key.length))}verificarOperacaoTecladoPermitida(){const t=this.quill.textoSelecionado;if(t.conteudo&&t.quantidadeCR>0){if(1===t.quantidadeCR&&/\n$/gi.test(t.conteudo)){const t=this.quill.getSelection(!0);return this.quill.setSelection(t.index,t.length-1,Quill.sources.API),!0}return this.operacaoTecladoInvalida.notify(),!1}return!0}onTeclaArrowRight(t){const e=this.quill.getSelection(!0),[o,i]=this.quill.getLine(e.index);i===o.tamanho&&(o.linha.next&&this.quill.setIndex(this.quill.getIndex(o.linha.next.blotConteudo),Quill.sources.USER),$u(t))}onTeclaArrowLeft(t){const e=this.quill.getSelection(!0),[o,i]=this.quill.getLine(e.index);if(0===i){if(o.linha.prev){const t=o.linha.prev,e=this.quill.getIndex(t.blotConteudo)+t.blotConteudo.tamanho;this.quill.setIndex(e,Quill.sources.USER)}$u(t)}}onTeclaArrowDownOuUp(t){this.quill.isProcessandoMudancaLinha&&$u(t)}onTeclaEnter(t){if(this.verificarOperacaoTecladoPermitida()){const t=this.quill.getSelection(!0);this.quill.setSelection(t.index,0,Quill.sources.SILENT),this.adicionaElementoTeclaEnter.notify(t)}$u(t)}onTeclaEscape(t){const e=this.quill.getSelection(!0);this.quill.setIndex(e.index,Quill.sources.SILENT),this.quill.setSelection(this.quill.inicioConteudoAtual,0,Quill.sources.SILENT),$u(t)}onTeclaDelete(t){const e=this.quill.getSelection(!0);this.verificarOperacaoTecladoPermitida()&&e.index!==this.quill.fimConteudoAtual||$u(t)}onTeclaBackspace(t){const e=this.quill.getSelection(!0);(!this.verificarOperacaoTecladoPermitida()||e.index===this.quill.inicioConteudoAtual&&0===e.length)&&$u(t)}onValidarTecla(t){this.verificarOperacaoTecladoPermitida()||$u(t)}onTeclaHome(t){const e=this.quill.getIndex(this.quill.getPrimeiraLinha().blotConteudo);this.quill.setIndex(e,Quill.sources.USER),this.quill.scroll.domNode.scrollTo(0,0),$u(t)}onTeclaEnd(t){var e,o;const i=null!==(o=this.quill.getIndex(this.quill.getUltimaLinha().blotConteudo)+(null===(e=this.quill.getUltimaLinha().blotConteudo)||void 0===e?void 0:e.tamanho))&&void 0!==o?o:0;this.quill.setIndex(i,Quill.sources.USER),this.quill.scroll.domNode.scrollTo(0,this.quill.scroll.domNode.scrollHeight),$u(t)}onTeclaCtrlD(t){this.removeElemento.notify(),$u(t)}onTeclaTab(t){this.transformaElemento.notify(t),$u(t)}onTeclaCtrlZ(t){this.quill.undo(),$u(t)}onTeclaCtrlY(t){this.quill.redo(),$u(t)}onTeclaCtrlA(t){const e=this.quill.getIndex(this.quill.scroll.children.head.blotConteudo);this.quill.setSelection(e,this.quill.getLength(),Quill.sources.SILENT),$u(t)}onTeclaCtrlShiftA(t){this.quill.setSelection(this.quill.inicioConteudoAtual,this.quill.linhaAtual.blotConteudo.tamanho,Quill.sources.SILENT),$u(t)}onHotKeyRenumeraDispositivo(t){this.renumeraElemento.notify(t),$u(t)}onHotKeyMover(t){this.moveElemento.notify(t),$u(t)}onHotKeyTransformacaoTipo(t){this.transformaElemento.notify(t),$u(t)}onHotKeyToolbar(){var t;(null===(t=document.getSelection())||void 0===t?void 0:t.toString())&&this.onChange.notify("toolbar(hotkey)")}}class Yu extends Du{constructor(t){super(Yu.create(t)),this._htmlAnt=""}static create(t){var e,o;const i=super.create(),n=(null!==(o=null===(e=t.conteudo)||void 0===e?void 0:e.texto)&&void 0!==o?o:"").trim();return i.setAttribute("contenteditable",(null==t?void 0:t.editavel)?"true":"false"),i.innerHTML=""!==n?n:"<br>",i}set htmlAnt(t){this._htmlAnt=t}get htmlAnt(){return this._htmlAnt}get alterado(){return this._htmlAnt!==this.html}}Yu.blotName="texto",Yu.tagName="P",Yu.className="texto__dispositivo";class Ju extends Du{constructor(t){super(Ju.create(t))}static create(t){const e=super.create();let o="";return o=t.tipo===ks.INFO?"mensagem--info":t.tipo===ks.WARNING?"mensagem--warning":"mensagem--danger",e.setAttribute("contenteditable","false"),e.classList.add(o),e.innerHTML=t.descricao?"- "+t.descricao:"",e}}Ju.blotName="mensagem",Ju.tagName="div",Ju.className="mensagem";class tc extends Du{constructor(){super(tc.create())}static create(){const t=super.create();return t.setAttribute("contenteditable","false"),t.setAttribute("style","font-size: 0.8em;"),t}}tc.blotName="mensagens",tc.tagName="MENSAGENS";const ec=Quill.import("modules/clipboard");class oc extends ec{constructor(t,e){super(t,e),this.onChange=new Qu,this.quill.root.addEventListener("cut",(t=>{var e;if(this.quill.cursorDeTextoEstaSobreLink())return void $u(t);(null===(e=document.getSelection())||void 0===e?void 0:e.toString())&&this.onChange.notify("clipboard")})),this.quill.root.addEventListener("paste",(t=>{var e;if(this.quill.cursorDeTextoEstaSobreLink())return void $u(t);(null===(e=t.clipboardData)||void 0===e?void 0:e.getData("text/plain"))&&this.onChange.notify("clipboard")}))}convert(t){if("string"==typeof t)return this.container.innerHTML=t,super.convert();this.container.innerHTML=this.container.innerHTML.replace(Wu,""),this.container.innerHTML=this.container.innerHTML.replace(/(<p\s*)/gi," <p"),this.container.innerHTML=this.container.innerHTML.replace(/(<br\s*\/>)/gi," "),this.container.innerHTML=this.container.innerHTML.replace(/<(?!strong)(?!\/strong)(?!em)(?!\/em)(?!sub)(?!\/sub)(?!sup)(?!\/sup)(.*?)>/gi,""),this.container.innerHTML=this.container.innerHTML.replace(/<([a-z]+) .*?=".*?( *\/?>)/gi,"<$1$2");const e=super.convert();return this.container.innerHTML="",e}}const ic=Quill.import("blots/container");class nc extends ic{constructor(t){super(nc.create()),this.alinhamentoMenu=t}static create(){const t=super.create();return t.setAttribute("contenteditable","false"),t.setAttribute("class",nc.className),t}}nc.blotName="containerTdDireito",nc.tagName="DIV",nc.className="container__menu";const rc=Quill.import("blots/container");class sc extends rc{constructor(t){super(sc.create(t))}static create(t){const e=super.create();e.setAttribute("contenteditable",t.editavel?"true":"false"),e.setAttribute("class",sc.className+" container__texto--nivel"+t.nivel);const o=Number(getComputedStyle(document.documentElement).getPropertyValue("--elemento-padding-factor"));if(o){const i=(t.agrupador?0:t.nivel)*o+5;e.setAttribute("style",`padding-left: ${i}px;`)}return e}}sc.blotName="containerTdEsquerdo",sc.tagName="DIV",sc.className="container__texto",sc.classLevel="level";const ac=Quill.import("blots/container");class lc extends ac{constructor(t,e){super(lc.create(t,e))}static create(t,e){const o=super.create(),i=e===Lu.Esquerda?" container__linha--reverse":"";return o.setAttribute("contenteditable",t?"true":"false"),o.setAttribute("class",lc.className+i),o}}lc.blotName="containerTr",lc.tagName="DIV",lc.className="container__linha";class uc extends Quill{constructor(t,e){super(t,e)}getConteudoHtml(t,e,o){const i=this.scroll.children.head;return this.setConteudo(this.converterHtmlParaDelta(t),Quill.sources.SILENT),this.deleteText(e+o,i.length()-o-1,Quill.sources.SILENT),e>0&&this.deleteText(0,e,Quill.sources.SILENT),i.domNode.innerHTML}converterHtmlParaDelta(t){return this.clipboard.convert(null!=t?t:"")}converterDeltaParaHtml(t){return this.setConteudo(t,Quill.sources.SILENT),this.scroll.children.head.domNode.innerHTML}setConteudo(t,e){var o;const i=this.scroll.children.head;let n=0;i.length()>1&&this.deleteText(n,i.length()-1,null!=e?e:Quill.sources.SILENT),this.insertText(n," ",Quill.sources.SILENT),null===(o=t.ops)||void 0===o||o.forEach((t=>{t.attributes?this.insertText(n,t.insert,t.attributes,null!=e?e:Quill.sources.SILENT):this.insertText(n,t.insert,null!=e?e:Quill.sources.SILENT),n+=t.insert.length})),this.deleteText(n,1,Quill.sources.SILENT)}}class cc extends Quill{constructor(t,e,o){super(t,o),this._undoEstruturaVazio=!0,this._redoEstruturaVazio=!0,this._processandoMudancaLinha=!1,this.undoRedoEstrutura=new Qu,this.elementoSelecionado=new Qu,this.aspasAberta=!1,this.observableSelectionChange=new Qu,this.onSelectionChange=(t,e)=>{const o=this.linhaAtual;this._mudouDeLinha=this.verificarMudouLinha(t,e),this._mudouDeLinha&&(this.observableSelectionChange.notify(o),this.aspasAberta=!1,this.limparHistory())},this.onTextChange=()=>{this._linhaAtual&&setTimeout((()=>{this.acertarAspas()}),0)},this.on("text-change",this.onTextChange),this.on("selection-change",this.onSelectionChange),this.buffer=new uc(e,{}),this.root.addEventListener("dragstart",(t=>{t.preventDefault()})),this.root.addEventListener("drop",(t=>{t.preventDefault()}))}get mudouDeLinha(){var t;return null!==(t=this._mudouDeLinha)&&void 0!==t&&t}get linhaAnterior(){return this._linhaAnterior}get linhaAtual(){return this._linhaAtual}get inicioConteudoAtual(){return this.getIndex(this.linhaAtual.blotConteudo)}get fimConteudoAtual(){return this.inicioConteudoAtual+this.linhaAtual.blotConteudo.tamanho}get textoSelecionado(){var t,e,o;const i=null!==(t=this.getSelection(!0))&&void 0!==t?t:{index:0,length:0},n=this.getText().substr(i.index,i.length);return{conteudo:n,quantidadeCR:null!==(o=null===(e=n.match(/(\n)/gi))||void 0===e?void 0:e.length)&&void 0!==o?o:0}}get isUndoEstruturaVazio(){return this._undoEstruturaVazio}set undoEstruturaVazio(t){this._undoEstruturaVazio=t}get isRedoEstruturaVazio(){return this._redoEstruturaVazio}set redoEstruturaVazio(t){this._redoEstruturaVazio=t}get isProcessandoMudancaLinha(){return this._processandoMudancaLinha}set processandoMudancaLinha(t){this._processandoMudancaLinha=t}static configurar(){const t=cc.import("parchment"),e=new t.Attributor.Attribute("id","id",{scope:t.Scope.BLOCK}),o=new t.Attributor.Style("paddingLeft","padding-left",{scope:t.Scope.BLOCK}),i=new t.Attributor.Style("border","border",{scope:t.Scope.BLOCK}),n=new t.Attributor.Style("borderColor","border-color",{scope:t.Scope.BLOCK}),r=new t.Attributor.Style("display","display",{scope:t.Scope.BLOCK}),s=new t.Attributor.Style("aria-label","aria-label",{scope:t.Scope.BLOCK}),a=new t.Attributor.Attribute("dataRotulo","data-rotulo",{scope:t.Scope.BLOCK});cc.register("modules/clipboard",oc,!0),cc.register("modules/keyboard",Xu,!0),cc.register(Yu,!0),cc.register(zu,!0),cc.register(Ju,!0),cc.register(tc,!0),cc.register(Mu,!0),cc.register(Fu,!0),cc.register(Uu,!0),cc.register(ju,!0),cc.register(Bu,!0),cc.register(Hu,!0),cc.register(sc,!0),cc.register(nc,!0),cc.register(lc,!0),cc.register(e,!0),cc.register(o,!0),cc.register(i,!0),cc.register(n,!0),cc.register(r,!0),cc.register(s,!0),cc.register(a,!0)}destroi(){var t,e;this.off("text-change",this.onTextChange),this.off("selection-change",this.onSelectionChange),null===(t=this.keyboard)||void 0===t||t.operacaoTecladoInvalida.clean(),null===(e=this.keyboard)||void 0===e||e.adicionaElementoTeclaEnter.clean()}getConteudoHtmlParteLinha(t,e,o){return this.buffer.getConteudoHtml(t.html,e,o)}getPrimeiraLinha(){return this.scroll.children.head}getUltimaLinha(){return this.scroll.children.tail}getLinha(t,e=this.getPrimeiraLinha()){return e.uuid===t?e:e.next?this.getLinha(t,e.next):void 0}getLinhaPorId(t){return Quill.find(this.getHtmlElement(Hu.criarId(t)),!1)}setIndex(t,e=Quill.sources.USER){var o;const i=null!==(o=this.getSelection(!0))&&void 0!==o?o:{index:0,length:0};t===i.index&&0===i.length||this.setSelection(t,0,e)}setConteudoLinha(t,e,o){var i;let n=this.getIndex(t);t.length()>1&&this.deleteText(n,t.length()-1,null!=o?o:Quill.sources.SILENT),this.insertText(n," ",Quill.sources.SILENT),null===(i=e.ops)||void 0===i||i.forEach((t=>{t.attributes?this.insertText(n,t.insert,t.attributes,null!=o?o:Quill.sources.SILENT):this.insertText(n,t.insert,null!=o?o:Quill.sources.SILENT),n+=t.insert.length})),this.deleteText(n,1,Quill.sources.SILENT)}converterHtmlParaDelta(t){return this.buffer.converterHtmlParaDelta(t)}converterDeltaParaHtml(t){return this.buffer.converterDeltaParaHtml(t)}irProximaLinha(){var t;const e=this.getIndex(null===(t=this._linhaAtual)||void 0===t?void 0:t.next.blotConteudo);this.setSelection(e,0)}desmarcarLinhaAtual(t){this._linhaAnterior=t,null==t||t.desativarBorda()}marcarLinhaAtual(t){"Articulacao"!==t.tipo&&(this.atualizarLinhaCorrente(t),this.elementoSelecionado.notify(t.uuid))}undo(){0===this.history.stack.undo.length?this.isUndoEstruturaVazio||this.undoRedoEstrutura.notify(cc.UNDO):(this.history.undo(),this.focus())}redo(){0===this.history.stack.redo.length?this.isRedoEstruturaVazio||this.undoRedoEstrutura.notify(cc.REDO):(this.history.redo(),this.focus())}limparHistory(){setTimeout((()=>{this.history.clear()}),0)}verificarMudouLinha(t,e){if(e&&0===(null==t?void 0:t.index)&&0===(null==t?void 0:t.length))return this.setSelection(e.index,0),!1;if(t){const o=this.getLine(t.index)[0],i=o.linha;if(o.tagName!==Bu.tagName&&o.tagName!==zu.tagName&&o.tagName!==ju.tagName&&o.tagName!==tc.tagName||this.setSelection(this.getIndex(o.linha.blotConteudo),0,Quill.sources.SILENT),e){const t=this.getLine(e.index)[0];if(t){const e=t.linha;if(i===e)return!1;this.desmarcarLinhaAtual(e)}}return this.marcarLinhaAtual(i),!0}return!1}getHtmlElement(t){return this.root.querySelector(`#${t}`)}acertarAspas(){var t,e;if(this._linhaAtual){const o=this.inicioConteudoAtual,i=null!==(e=this.getText(o,null===(t=this.linhaAtual)||void 0===t?void 0:t.blotConteudo.tamanho))&&void 0!==e?e:"";let n=o;if(i.indexOf('"')>-1)for(let t=0;t<i.length;t++)'"'===i[t]&&(n+=t,this.deleteText(n,1,Quill.sources.SILENT),this.insertText(n,this.aspasAberta?"":"",Quill.sources.SILENT),this.aspasAberta=!this.aspasAberta,n=o)}}atualizarLinhaCorrente(t){this.processandoMudancaLinha=!0,this._linhaAtual=t,this._linhaAtual.blotConteudo.htmlAnt=this._linhaAtual.blotConteudo.html,t.ativarBorda(),this.scrollToElemento(t.uuid)}scrollToElemento(t){const e=this.getHtmlElement(Hu.criarId(t));setTimeout((()=>{this.isInEtaBoxViewport(e)||this.scrollIntoEtaBox(e)}),0)}scrollIntoEtaBox(t){var e;const o=t.offsetTop;null===(e=t.closest(".ql-editor"))||void 0===e||e.scrollTo(0,o)}isInEtaBoxViewport(t){const e=t.getBoundingClientRect(),o=t.closest("#lx-eta-box").getBoundingClientRect().bottom;return e.top>=0&&e.bottom<=o}cursorDeTextoEstaSobreLink(t=0){var e;const o=this.getSelection(!0),i=this.getContents(o.index+t,1).ops;return!!i&&(null===(e=i[0].attributes)||void 0===e?void 0:e.link)}}cc.UNDO="undo",cc.REDO="redo";class dc{static criarContainerLinha(t){const e=new Hu(t),o=new lc(t.editavel,this.alinhamentoMenu),i=new sc(t),n=new nc(this.alinhamentoMenu);return new Bu(t).insertInto(i),new Yu(t).insertInto(i),(new zu).insertInto(n),i.insertInto(o),n.insertInto(o),o.insertInto(e),e}static criarContainerMensagens(t){const e=new lc(!1,this.alinhamentoMenu),o=new sc(t),i=new nc(this.alinhamentoMenu);return t.mensagens&&t.mensagens.length>0&&t.mensagens.forEach((t=>{new Ju(t).insertInto(o)})),(new zu).insertInto(i),o.insertInto(e),i.insertInto(e),e}}async function pc(t,e,o,i){var n;const r=document.createElement("elix-dialog"),s=document.createRange().createContextualFragment('\n    <style>\n    h1.normaDiv {\n      font-size: 1em;\n      padding: 0.5em;\n      font-weight: bold;\n    }\n    .normaDiv {\n      display: grid;\n      grid-template-columns: [labels] auto [controls] 1fr;\n      grid-auto-flow: row;\n      grid-gap: .8em;\n      padding: 0.5em;\n    }\n    .normaDiv > label  {\n      grid-column: labels;\n      grid-row: auto;\n    }\n    .normaDiv > input,\n    .normaDiv > select {\n      grid-column: controls;\n      grid-row: auto;\n      padding: 0.5em;\n    }\n  </style>\n  <h1 class="normaDiv">Dados da norma vigente</h1>\n  <div name="normaDiv" class="normaDiv">\n    <label for="tipoNorma">Tipo </label>\n      <select name="tipos" name="tipoNorma" id="tipoNorma">      \n      <option value="decreto">Decreto</option>\n      <option value="decreto-lei">Decreto-Lei</option>\n      <option value="lei" selected>Lei</option>\n      <option value="lei.complementar">Lei Complementar</option>\n      <option value="lei.delegada">Lei Delegada</option>\n      <option value="medida.provisoria">Medida Provisria</option>\n    </select>    \n    <label for="numeroNorma">Nmero </label>\n    <input type="text" name="numeroNorma" id="numeroNorma" placeholder="8666 (nmero sem ponto)">\n    <label for="dataNorma">Data</label>\n    <input type="text" name="dataNorma" id="dataNorma" placeholder="21/06/1993">\n\n    <div style="margin-top: 10px;">\n      <button>Ok</button>\n      <button>Cancelar</button>\n    </div>\n    <div class="erro" style="margin-top: 10px; color: red; display: none;"></div>\n\n  </div>\n\n\n  '),a=t.norma?null===(n=Ys(t.norma))||void 0===n?void 0:n.urn:void 0,l=t.norma?Js(t.norma):void 0,u=t.norma?ta(t.norma):void 0,c=s.querySelector("#tipoNorma"),d=s.querySelector("#numeroNorma"),p=s.querySelector("#dataNorma");a&&(c.value=a),l&&(d.value=l),u&&(p.value=u);const h=s.querySelectorAll("button"),f=h[0],m=h[1],v=s.querySelector(".erro");f.onclick=()=>{var n,s;const a=((t,e,o,i)=>{var n;return`urn:lex:br:${t}:${e}:${null!==(n=oa(i))&&void 0!==n?n:i};${o}`})("federal",c.value,null===(n=d)||void 0===n?void 0:n.value,null===(s=p)||void 0===s?void 0:s.value);ia(a)?(e.focus(),r.close(),v.style.display="none",t.norma=a,o.dispatch(i.execute(t))):(v.innerText="Dados invlidos",v.style.display="block")},m.onclick=()=>{e.focus(),r.close()},r.appendChild(s),await r.open()}dc.alinhamentoMenu=Lu.Esquerda;const hc=tn`
  /*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */
  .ql-container {
    box-sizing: border-box;
    font-family: Helvetica, Arial, sans-serif;
    font-size: 13px;
    height: 100%;
    margin: 0px;
    position: relative;
  }
  .ql-container.ql-disabled .ql-tooltip {
    visibility: hidden;
  }
  .ql-container.ql-disabled .ql-editor ul[data-checked] > li::before {
    pointer-events: none;
  }
  .ql-clipboard {
    left: -100000px;
    height: 1px;
    overflow-y: hidden;
    position: absolute;
    top: 50%;
  }
  .ql-clipboard p {
    margin: 0;
    padding: 0;
  }
  .ql-editor {
    box-sizing: border-box;
    line-height: 1.42;
    height: 100%;
    outline: none;
    overflow-y: auto;
    padding: 12px 15px;
    tab-size: 4;
    -moz-tab-size: 4;
    text-align: left;
    white-space: pre-wrap;
    word-wrap: break-word;
  }
  .ql-editor > * {
    cursor: text;
  }
  .ql-editor p,
  .ql-editor ol,
  .ql-editor ul,
  .ql-editor pre,
  .ql-editor blockquote,
  .ql-editor h1,
  .ql-editor h2,
  .ql-editor h3,
  .ql-editor h4,
  .ql-editor h5,
  .ql-editor h6 {
    margin: 0;
    padding: 0;
    counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;
  }
  .ql-editor ol,
  .ql-editor ul {
    padding-left: 1.5em;
  }
  .ql-editor ol > li,
  .ql-editor ul > li {
    list-style-type: none;
  }
  .ql-editor ul > li::before {
    content: '\\2022';
  }
  .ql-editor ul[data-checked='true'],
  .ql-editor ul[data-checked='false'] {
    pointer-events: none;
  }
  .ql-editor ul[data-checked='true'] > li *,
  .ql-editor ul[data-checked='false'] > li * {
    pointer-events: all;
  }
  .ql-editor ul[data-checked='true'] > li::before,
  .ql-editor ul[data-checked='false'] > li::before {
    color: #777;
    cursor: pointer;
    pointer-events: all;
  }
  .ql-editor ul[data-checked='true'] > li::before {
    content: '\\2611';
  }
  .ql-editor ul[data-checked='false'] > li::before {
    content: '\\2610';
  }
  .ql-editor li::before {
    display: inline-block;
    white-space: nowrap;
    width: 1.2em;
  }
  .ql-editor li:not(.ql-direction-rtl)::before {
    margin-left: -1.5em;
    margin-right: 0.3em;
    text-align: right;
  }
  .ql-editor li.ql-direction-rtl::before {
    margin-left: 0.3em;
    margin-right: -1.5em;
  }
  .ql-editor ol li:not(.ql-direction-rtl),
  .ql-editor ul li:not(.ql-direction-rtl) {
    padding-left: 1.5em;
  }
  .ql-editor ol li.ql-direction-rtl,
  .ql-editor ul li.ql-direction-rtl {
    padding-right: 1.5em;
  }
  .ql-editor ol li {
    counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;
    counter-increment: list-0;
  }
  .ql-editor ol li:before {
    content: counter(list-0, decimal) '. ';
  }
  .ql-editor ol li.ql-indent-1 {
    counter-increment: list-1;
  }
  .ql-editor ol li.ql-indent-1:before {
    content: counter(list-1, lower-alpha) '. ';
  }
  .ql-editor ol li.ql-indent-1 {
    counter-reset: list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;
  }
  .ql-editor ol li.ql-indent-2 {
    counter-increment: list-2;
  }
  .ql-editor ol li.ql-indent-2:before {
    content: counter(list-2, lower-roman) '. ';
  }
  .ql-editor ol li.ql-indent-2 {
    counter-reset: list-3 list-4 list-5 list-6 list-7 list-8 list-9;
  }
  .ql-editor ol li.ql-indent-3 {
    counter-increment: list-3;
  }
  .ql-editor ol li.ql-indent-3:before {
    content: counter(list-3, decimal) '. ';
  }
  .ql-editor ol li.ql-indent-3 {
    counter-reset: list-4 list-5 list-6 list-7 list-8 list-9;
  }
  .ql-editor ol li.ql-indent-4 {
    counter-increment: list-4;
  }
  .ql-editor ol li.ql-indent-4:before {
    content: counter(list-4, lower-alpha) '. ';
  }
  .ql-editor ol li.ql-indent-4 {
    counter-reset: list-5 list-6 list-7 list-8 list-9;
  }
  .ql-editor ol li.ql-indent-5 {
    counter-increment: list-5;
  }
  .ql-editor ol li.ql-indent-5:before {
    content: counter(list-5, lower-roman) '. ';
  }
  .ql-editor ol li.ql-indent-5 {
    counter-reset: list-6 list-7 list-8 list-9;
  }
  .ql-editor ol li.ql-indent-6 {
    counter-increment: list-6;
  }
  .ql-editor ol li.ql-indent-6:before {
    content: counter(list-6, decimal) '. ';
  }
  .ql-editor ol li.ql-indent-6 {
    counter-reset: list-7 list-8 list-9;
  }
  .ql-editor ol li.ql-indent-7 {
    counter-increment: list-7;
  }
  .ql-editor ol li.ql-indent-7:before {
    content: counter(list-7, lower-alpha) '. ';
  }
  .ql-editor ol li.ql-indent-7 {
    counter-reset: list-8 list-9;
  }
  .ql-editor ol li.ql-indent-8 {
    counter-increment: list-8;
  }
  .ql-editor ol li.ql-indent-8:before {
    content: counter(list-8, lower-roman) '. ';
  }
  .ql-editor ol li.ql-indent-8 {
    counter-reset: list-9;
  }
  .ql-editor ol li.ql-indent-9 {
    counter-increment: list-9;
  }
  .ql-editor ol li.ql-indent-9:before {
    content: counter(list-9, decimal) '. ';
  }
  .ql-editor .ql-indent-1:not(.ql-direction-rtl) {
    padding-left: 3em;
  }
  .ql-editor li.ql-indent-1:not(.ql-direction-rtl) {
    padding-left: 4.5em;
  }
  .ql-editor .ql-indent-1.ql-direction-rtl.ql-align-right {
    padding-right: 3em;
  }
  .ql-editor li.ql-indent-1.ql-direction-rtl.ql-align-right {
    padding-right: 4.5em;
  }
  .ql-editor .ql-indent-2:not(.ql-direction-rtl) {
    padding-left: 6em;
  }
  .ql-editor li.ql-indent-2:not(.ql-direction-rtl) {
    padding-left: 7.5em;
  }
  .ql-editor .ql-indent-2.ql-direction-rtl.ql-align-right {
    padding-right: 6em;
  }
  .ql-editor li.ql-indent-2.ql-direction-rtl.ql-align-right {
    padding-right: 7.5em;
  }
  .ql-editor .ql-indent-3:not(.ql-direction-rtl) {
    padding-left: 9em;
  }
  .ql-editor li.ql-indent-3:not(.ql-direction-rtl) {
    padding-left: 10.5em;
  }
  .ql-editor .ql-indent-3.ql-direction-rtl.ql-align-right {
    padding-right: 9em;
  }
  .ql-editor li.ql-indent-3.ql-direction-rtl.ql-align-right {
    padding-right: 10.5em;
  }
  .ql-editor .ql-indent-4:not(.ql-direction-rtl) {
    padding-left: 12em;
  }
  .ql-editor li.ql-indent-4:not(.ql-direction-rtl) {
    padding-left: 13.5em;
  }
  .ql-editor .ql-indent-4.ql-direction-rtl.ql-align-right {
    padding-right: 12em;
  }
  .ql-editor li.ql-indent-4.ql-direction-rtl.ql-align-right {
    padding-right: 13.5em;
  }
  .ql-editor .ql-indent-5:not(.ql-direction-rtl) {
    padding-left: 15em;
  }
  .ql-editor li.ql-indent-5:not(.ql-direction-rtl) {
    padding-left: 16.5em;
  }
  .ql-editor .ql-indent-5.ql-direction-rtl.ql-align-right {
    padding-right: 15em;
  }
  .ql-editor li.ql-indent-5.ql-direction-rtl.ql-align-right {
    padding-right: 16.5em;
  }
  .ql-editor .ql-indent-6:not(.ql-direction-rtl) {
    padding-left: 18em;
  }
  .ql-editor li.ql-indent-6:not(.ql-direction-rtl) {
    padding-left: 19.5em;
  }
  .ql-editor .ql-indent-6.ql-direction-rtl.ql-align-right {
    padding-right: 18em;
  }
  .ql-editor li.ql-indent-6.ql-direction-rtl.ql-align-right {
    padding-right: 19.5em;
  }
  .ql-editor .ql-indent-7:not(.ql-direction-rtl) {
    padding-left: 21em;
  }
  .ql-editor li.ql-indent-7:not(.ql-direction-rtl) {
    padding-left: 22.5em;
  }
  .ql-editor .ql-indent-7.ql-direction-rtl.ql-align-right {
    padding-right: 21em;
  }
  .ql-editor li.ql-indent-7.ql-direction-rtl.ql-align-right {
    padding-right: 22.5em;
  }
  .ql-editor .ql-indent-8:not(.ql-direction-rtl) {
    padding-left: 24em;
  }
  .ql-editor li.ql-indent-8:not(.ql-direction-rtl) {
    padding-left: 25.5em;
  }
  .ql-editor .ql-indent-8.ql-direction-rtl.ql-align-right {
    padding-right: 24em;
  }
  .ql-editor li.ql-indent-8.ql-direction-rtl.ql-align-right {
    padding-right: 25.5em;
  }
  .ql-editor .ql-indent-9:not(.ql-direction-rtl) {
    padding-left: 27em;
  }
  .ql-editor li.ql-indent-9:not(.ql-direction-rtl) {
    padding-left: 28.5em;
  }
  .ql-editor .ql-indent-9.ql-direction-rtl.ql-align-right {
    padding-right: 27em;
  }
  .ql-editor li.ql-indent-9.ql-direction-rtl.ql-align-right {
    padding-right: 28.5em;
  }
  .ql-editor .ql-video {
    display: block;
    max-width: 100%;
  }
  .ql-editor .ql-video.ql-align-center {
    margin: 0 auto;
  }
  .ql-editor .ql-video.ql-align-right {
    margin: 0 0 0 auto;
  }
  .ql-editor .ql-bg-black {
    background-color: #000;
  }
  .ql-editor .ql-bg-red {
    background-color: #e60000;
  }
  .ql-editor .ql-bg-orange {
    background-color: #f90;
  }
  .ql-editor .ql-bg-yellow {
    background-color: #ff0;
  }
  .ql-editor .ql-bg-green {
    background-color: #008a00;
  }
  .ql-editor .ql-bg-blue {
    background-color: #06c;
  }
  .ql-editor .ql-bg-purple {
    background-color: #93f;
  }
  .ql-editor .ql-color-white {
    color: #fff;
  }
  .ql-editor .ql-color-red {
    color: #e60000;
  }
  .ql-editor .ql-color-orange {
    color: #f90;
  }
  .ql-editor .ql-color-yellow {
    color: #ff0;
  }
  .ql-editor .ql-color-green {
    color: #008a00;
  }
  .ql-editor .ql-color-blue {
    color: #06c;
  }
  .ql-editor .ql-color-purple {
    color: #93f;
  }
  .ql-editor .ql-font-serif {
    font-family: Georgia, Times New Roman, serif;
  }
  .ql-editor .ql-font-monospace {
    font-family: Monaco, Courier New, monospace;
  }
  .ql-editor .ql-size-small {
    font-size: 0.75em;
  }
  .ql-editor .ql-size-large {
    font-size: 1.5em;
  }
  .ql-editor .ql-size-huge {
    font-size: 2.5em;
  }
  .ql-editor .ql-direction-rtl {
    direction: rtl;
    text-align: inherit;
  }
  .ql-editor .ql-align-center {
    text-align: center;
  }
  .ql-editor .ql-align-justify {
    text-align: justify;
  }
  .ql-editor .ql-align-right {
    text-align: right;
  }
  .ql-editor.ql-blank::before {
    color: rgba(0, 0, 0, 0.6);
    content: attr(data-placeholder);
    font-style: italic;
    left: 15px;
    pointer-events: none;
    position: absolute;
    right: 15px;
  }
  .ql-snow.ql-toolbar:after,
  .ql-snow .ql-toolbar:after {
    clear: both;
    content: '';
    display: table;
  }
  .ql-snow.ql-toolbar button,
  .ql-snow .ql-toolbar button {
    background: none;
    border: none;
    cursor: pointer;
    display: inline-block;
    float: left;
    height: 24px;
    padding: 3px 5px;
    width: 28px;
  }
  .ql-snow.ql-toolbar button svg,
  .ql-snow .ql-toolbar button svg {
    float: left;
    height: 100%;
  }
  .ql-snow.ql-toolbar button:active:hover,
  .ql-snow .ql-toolbar button:active:hover {
    outline: none;
  }
  .ql-snow.ql-toolbar input.ql-image[type='file'],
  .ql-snow .ql-toolbar input.ql-image[type='file'] {
    display: none;
  }
  .ql-snow.ql-toolbar button:hover,
  .ql-snow .ql-toolbar button:hover,
  .ql-snow.ql-toolbar button:focus,
  .ql-snow .ql-toolbar button:focus,
  .ql-snow.ql-toolbar button.ql-active,
  .ql-snow .ql-toolbar button.ql-active,
  .ql-snow.ql-toolbar .ql-picker-label:hover,
  .ql-snow .ql-toolbar .ql-picker-label:hover,
  .ql-snow.ql-toolbar .ql-picker-label.ql-active,
  .ql-snow .ql-toolbar .ql-picker-label.ql-active,
  .ql-snow.ql-toolbar .ql-picker-item:hover,
  .ql-snow .ql-toolbar .ql-picker-item:hover,
  .ql-snow.ql-toolbar .ql-picker-item.ql-selected,
  .ql-snow .ql-toolbar .ql-picker-item.ql-selected {
    color: #06c;
  }
  .ql-snow.ql-toolbar button:hover .ql-fill,
  .ql-snow .ql-toolbar button:hover .ql-fill,
  .ql-snow.ql-toolbar button:focus .ql-fill,
  .ql-snow .ql-toolbar button:focus .ql-fill,
  .ql-snow.ql-toolbar button.ql-active .ql-fill,
  .ql-snow .ql-toolbar button.ql-active .ql-fill,
  .ql-snow.ql-toolbar .ql-picker-label:hover .ql-fill,
  .ql-snow .ql-toolbar .ql-picker-label:hover .ql-fill,
  .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-fill,
  .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-fill,
  .ql-snow.ql-toolbar .ql-picker-item:hover .ql-fill,
  .ql-snow .ql-toolbar .ql-picker-item:hover .ql-fill,
  .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-fill,
  .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-fill,
  .ql-snow.ql-toolbar button:hover .ql-stroke.ql-fill,
  .ql-snow .ql-toolbar button:hover .ql-stroke.ql-fill,
  .ql-snow.ql-toolbar button:focus .ql-stroke.ql-fill,
  .ql-snow .ql-toolbar button:focus .ql-stroke.ql-fill,
  .ql-snow.ql-toolbar button.ql-active .ql-stroke.ql-fill,
  .ql-snow .ql-toolbar button.ql-active .ql-stroke.ql-fill,
  .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,
  .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,
  .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,
  .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,
  .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,
  .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,
  .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,
  .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill {
    fill: #06c;
  }
  .ql-snow.ql-toolbar button:hover .ql-stroke,
  .ql-snow .ql-toolbar button:hover .ql-stroke,
  .ql-snow.ql-toolbar button:focus .ql-stroke,
  .ql-snow .ql-toolbar button:focus .ql-stroke,
  .ql-snow.ql-toolbar button.ql-active .ql-stroke,
  .ql-snow .ql-toolbar button.ql-active .ql-stroke,
  .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke,
  .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke,
  .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke,
  .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke,
  .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke,
  .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke,
  .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,
  .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,
  .ql-snow.ql-toolbar button:hover .ql-stroke-miter,
  .ql-snow .ql-toolbar button:hover .ql-stroke-miter,
  .ql-snow.ql-toolbar button:focus .ql-stroke-miter,
  .ql-snow .ql-toolbar button:focus .ql-stroke-miter,
  .ql-snow.ql-toolbar button.ql-active .ql-stroke-miter,
  .ql-snow .ql-toolbar button.ql-active .ql-stroke-miter,
  .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,
  .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,
  .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,
  .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,
  .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,
  .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,
  .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,
  .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter {
    stroke: #06c;
  }
  @media (pointer: coarse) {
    .ql-snow.ql-toolbar button:hover:not(.ql-active),
    .ql-snow .ql-toolbar button:hover:not(.ql-active) {
      color: #444;
    }
    .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-fill,
    .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-fill,
    .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill,
    .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill {
      fill: #444;
    }
    .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke,
    .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke,
    .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter,
    .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter {
      stroke: #444;
    }
  }
  .ql-snow {
    box-sizing: border-box;
  }
  .ql-snow * {
    box-sizing: border-box;
  }
  .ql-snow .ql-hidden {
    display: none;
  }
  .ql-snow .ql-out-bottom,
  .ql-snow .ql-out-top {
    visibility: hidden;
  }
  .ql-snow .ql-tooltip {
    position: absolute;
    transform: translateY(10px);
  }
  .ql-snow .ql-tooltip a {
    cursor: pointer;
    text-decoration: none;
  }
  .ql-snow .ql-tooltip.ql-flip {
    transform: translateY(-10px);
  }
  .ql-snow .ql-formats {
    display: inline-block;
    vertical-align: middle;
  }
  .ql-snow .ql-formats:after {
    clear: both;
    content: '';
    display: table;
  }
  .ql-snow .ql-stroke {
    fill: none;
    stroke: #444;
    stroke-linecap: round;
    stroke-linejoin: round;
    stroke-width: 2;
  }
  .ql-snow .ql-stroke-miter {
    fill: none;
    stroke: #444;
    stroke-miterlimit: 10;
    stroke-width: 2;
  }
  .ql-snow .ql-fill,
  .ql-snow .ql-stroke.ql-fill {
    fill: #444;
  }
  .ql-snow .ql-empty {
    fill: none;
  }
  .ql-snow .ql-even {
    fill-rule: evenodd;
  }
  .ql-snow .ql-thin,
  .ql-snow .ql-stroke.ql-thin {
    stroke-width: 1;
  }
  .ql-snow .ql-transparent {
    opacity: 0.4;
  }
  .ql-snow .ql-direction svg:last-child {
    display: none;
  }
  .ql-snow .ql-direction.ql-active svg:last-child {
    display: inline;
  }
  .ql-snow .ql-direction.ql-active svg:first-child {
    display: none;
  }
  .ql-snow .ql-editor h1 {
    font-size: 2em;
  }
  .ql-snow .ql-editor h2 {
    font-size: 1.5em;
  }
  .ql-snow .ql-editor h3 {
    font-size: 1.17em;
  }
  .ql-snow .ql-editor h4 {
    font-size: 1em;
  }
  .ql-snow .ql-editor h5 {
    font-size: 0.83em;
  }
  .ql-snow .ql-editor h6 {
    font-size: 0.67em;
  }
  .ql-snow .ql-editor a {
    text-decoration: underline;
  }
  .ql-snow .ql-editor blockquote {
    border-left: 4px solid #ccc;
    margin-bottom: 5px;
    margin-top: 5px;
    padding-left: 16px;
  }
  .ql-snow .ql-editor code,
  .ql-snow .ql-editor pre {
    background-color: #f0f0f0;
    border-radius: 3px;
  }
  .ql-snow .ql-editor pre {
    white-space: pre-wrap;
    margin-bottom: 5px;
    margin-top: 5px;
    padding: 5px 10px;
  }
  .ql-snow .ql-editor code {
    font-size: 85%;
    padding: 2px 4px;
  }
  .ql-snow .ql-editor pre.ql-syntax {
    background-color: #23241f;
    color: #f8f8f2;
    overflow: visible;
  }
  .ql-snow .ql-editor img {
    max-width: 100%;
  }
  .ql-snow .ql-picker {
    color: #444;
    display: inline-block;
    float: left;
    font-size: 14px;
    font-weight: 500;
    height: 24px;
    position: relative;
    vertical-align: middle;
  }
  .ql-snow .ql-picker-label {
    cursor: pointer;
    display: inline-block;
    height: 100%;
    padding-left: 8px;
    padding-right: 2px;
    position: relative;
    width: 100%;
  }
  .ql-snow .ql-picker-label::before {
    display: inline-block;
    line-height: 22px;
  }
  .ql-snow .ql-picker-options {
    background-color: #fff;
    display: none;
    min-width: 100%;
    padding: 4px 8px;
    position: absolute;
    white-space: nowrap;
  }
  .ql-snow .ql-picker-options .ql-picker-item {
    cursor: pointer;
    display: block;
    padding-bottom: 5px;
    padding-top: 5px;
  }
  .ql-snow .ql-picker.ql-expanded .ql-picker-label {
    color: #ccc;
    z-index: 2;
  }
  .ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-fill {
    fill: #ccc;
  }
  .ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-stroke {
    stroke: #ccc;
  }
  .ql-snow .ql-picker.ql-expanded .ql-picker-options {
    display: block;
    margin-top: -1px;
    top: 100%;
    z-index: 1;
  }
  .ql-snow .ql-color-picker,
  .ql-snow .ql-icon-picker {
    width: 28px;
  }
  .ql-snow .ql-color-picker .ql-picker-label,
  .ql-snow .ql-icon-picker .ql-picker-label {
    padding: 2px 4px;
  }
  .ql-snow .ql-color-picker .ql-picker-label svg,
  .ql-snow .ql-icon-picker .ql-picker-label svg {
    right: 4px;
  }
  .ql-snow .ql-icon-picker .ql-picker-options {
    padding: 4px 0px;
  }
  .ql-snow .ql-icon-picker .ql-picker-item {
    height: 24px;
    width: 24px;
    padding: 2px 4px;
  }
  .ql-snow .ql-color-picker .ql-picker-options {
    padding: 3px 5px;
    width: 152px;
  }
  .ql-snow .ql-color-picker .ql-picker-item {
    border: 1px solid transparent;
    float: left;
    height: 16px;
    margin: 2px;
    padding: 0px;
    width: 16px;
  }
  .ql-snow .ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg {
    position: absolute;
    margin-top: -9px;
    right: 0;
    top: 50%;
    width: 18px;
  }
  .ql-snow .ql-picker.ql-header .ql-picker-label[data-label]:not([data-label=''])::before,
  .ql-snow .ql-picker.ql-font .ql-picker-label[data-label]:not([data-label=''])::before,
  .ql-snow .ql-picker.ql-size .ql-picker-label[data-label]:not([data-label=''])::before,
  .ql-snow .ql-picker.ql-header .ql-picker-item[data-label]:not([data-label=''])::before,
  .ql-snow .ql-picker.ql-font .ql-picker-item[data-label]:not([data-label=''])::before,
  .ql-snow .ql-picker.ql-size .ql-picker-item[data-label]:not([data-label=''])::before {
    content: attr(data-label);
  }
  .ql-snow .ql-picker.ql-header {
    width: 98px;
  }
  .ql-snow .ql-picker.ql-header .ql-picker-label::before,
  .ql-snow .ql-picker.ql-header .ql-picker-item::before {
    content: 'Normal';
  }
  .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='1']::before,
  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='1']::before {
    content: 'Heading 1';
  }
  .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='2']::before,
  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='2']::before {
    content: 'Heading 2';
  }
  .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='3']::before,
  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='3']::before {
    content: 'Heading 3';
  }
  .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='4']::before,
  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='4']::before {
    content: 'Heading 4';
  }
  .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='5']::before,
  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='5']::before {
    content: 'Heading 5';
  }
  .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='6']::before,
  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='6']::before {
    content: 'Heading 6';
  }
  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='1']::before {
    font-size: 2em;
  }
  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='2']::before {
    font-size: 1.5em;
  }
  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='3']::before {
    font-size: 1.17em;
  }
  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='4']::before {
    font-size: 1em;
  }
  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='5']::before {
    font-size: 0.83em;
  }
  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='6']::before {
    font-size: 0.67em;
  }
  .ql-snow .ql-picker.ql-font {
    width: 108px;
  }
  .ql-snow .ql-picker.ql-font .ql-picker-label::before,
  .ql-snow .ql-picker.ql-font .ql-picker-item::before {
    content: 'Sans Serif';
  }
  .ql-snow .ql-picker.ql-font .ql-picker-label[data-value='serif']::before,
  .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='serif']::before {
    content: 'Serif';
  }
  .ql-snow .ql-picker.ql-font .ql-picker-label[data-value='monospace']::before,
  .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='monospace']::before {
    content: 'Monospace';
  }
  .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='serif']::before {
    font-family: Georgia, Times New Roman, serif;
  }
  .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='monospace']::before {
    font-family: Monaco, Courier New, monospace;
  }
  .ql-snow .ql-picker.ql-size {
    width: 98px;
  }
  .ql-snow .ql-picker.ql-size .ql-picker-label::before,
  .ql-snow .ql-picker.ql-size .ql-picker-item::before {
    content: 'Normal';
  }
  .ql-snow .ql-picker.ql-size .ql-picker-label[data-value='small']::before,
  .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='small']::before {
    content: 'Small';
  }
  .ql-snow .ql-picker.ql-size .ql-picker-label[data-value='large']::before,
  .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='large']::before {
    content: 'Large';
  }
  .ql-snow .ql-picker.ql-size .ql-picker-label[data-value='huge']::before,
  .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='huge']::before {
    content: 'Huge';
  }
  .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='small']::before {
    font-size: 10px;
  }
  .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='large']::before {
    font-size: 18px;
  }
  .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='huge']::before {
    font-size: 32px;
  }
  .ql-snow .ql-color-picker.ql-background .ql-picker-item {
    background-color: #fff;
  }
  .ql-snow .ql-color-picker.ql-color .ql-picker-item {
    background-color: #000;
  }
  .ql-toolbar.ql-snow {
    border: 1px solid #ccc;
    box-sizing: border-box;
    font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
    padding: 8px;
  }
  .ql-toolbar.ql-snow .ql-formats {
    margin-right: 15px;
  }
  .ql-toolbar.ql-snow .ql-picker-label {
    border: 1px solid transparent;
  }
  .ql-toolbar.ql-snow .ql-picker-options {
    border: 1px solid transparent;
    box-shadow: rgba(0, 0, 0, 0.2) 0 2px 8px;
  }
  .ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-label {
    border-color: #ccc;
  }
  .ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options {
    border-color: #ccc;
  }
  .ql-toolbar.ql-snow .ql-color-picker .ql-picker-item.ql-selected,
  .ql-toolbar.ql-snow .ql-color-picker .ql-picker-item:hover {
    border-color: #000;
  }
  .ql-toolbar.ql-snow + .ql-container.ql-snow {
    border-top: 0px;
  }
  .ql-snow .ql-tooltip {
    background-color: #fff;
    border: 1px solid #ccc;
    box-shadow: 0px 0px 5px #ddd;
    color: #444;
    padding: 5px 12px;
    white-space: nowrap;
  }
  .ql-snow .ql-tooltip::before {
    content: 'Visit URL:';
    line-height: 26px;
    margin-right: 8px;
  }
  .ql-snow .ql-tooltip input[type='text'] {
    display: none;
    border: 1px solid #ccc;
    font-size: 13px;
    height: 26px;
    margin: 0px;
    padding: 3px 5px;
    width: 170px;
  }
  .ql-snow .ql-tooltip a.ql-preview {
    display: inline-block;
    max-width: 200px;
    overflow-x: hidden;
    text-overflow: ellipsis;
    vertical-align: top;
  }
  .ql-snow .ql-tooltip a.ql-action::after {
    border-right: 1px solid #ccc;
    content: 'Edit';
    margin-left: 16px;
    padding-right: 8px;
  }
  .ql-snow .ql-tooltip a.ql-remove::before {
    content: 'Remove';
    margin-left: 8px;
  }
  .ql-snow .ql-tooltip a {
    line-height: 26px;
  }
  .ql-snow .ql-tooltip.ql-editing a.ql-preview,
  .ql-snow .ql-tooltip.ql-editing a.ql-remove {
    display: none;
  }
  .ql-snow .ql-tooltip.ql-editing input[type='text'] {
    display: inline-block;
  }
  .ql-snow .ql-tooltip.ql-editing a.ql-action::after {
    border-right: 0px;
    content: 'Save';
    padding-right: 0px;
  }
  .ql-snow .ql-tooltip[data-mode='link']::before {
    content: 'Enter link:';
  }
  .ql-snow .ql-tooltip[data-mode='formula']::before {
    content: 'Enter formula:';
  }
  .ql-snow .ql-tooltip[data-mode='video']::before {
    content: 'Enter video:';
  }
  .ql-snow a {
    color: #06c;
  }
  .ql-container.ql-snow {
    border: 1px solid #ccc;
  }
`,fc=tn`
  :root {
    --elemento-padding-factor: 20;
  }

  #lx-eta-box {
    display: grid;
    grid-template-columns: 1fr;
    grid-template-rows: 30px calc(100% - 30px);
    height: 100%;
  }

  #lx-eta-box .ql-toolbar.ql-snow {
    border: 1px solid #ccc;
    box-sizing: border-box;
    padding: 3px 10px 3px 10px;
  }

  #lx-eta-box .ql-snow.ql-toolbar button,
  .ql-snow .ql-toolbar button {
    height: 20px !important;
    padding: 0px !important;
    width: 24px !important;
    margin: 0px !important;
  }

  #lx-eta-barra-ferramenta button:focus {
    outline: 0;
    border: 0px solid #f1f1f1;
    -webkit-box-shadow: 0px;
    box-shadow: none;
  }

  #lx-eta-barra-ferramenta .lx-eta-ql-button {
    font-size: 1.1em;
    color: #444444;
  }

  .lx-eta-rebate-180-graus {
    -moz-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    transform: scaleX(-1);
  }

  #lx-eta-editor {
    overflow-y: auto;
  }

  #lx-eta-editor .ql-editor {
    font-family: sans-serif, 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
      'Noto Color Emoji';
    font-size: 1rem;
    line-height: 1.42;
    color: #646260;
    text-transform: none !important;
    padding: 5px;
  }

  #lx-eta-editor .ql-editor *:focus {
    outline: 0;
    border: 0px solid #f1f1f1;
    -webkit-box-shadow: 0px;
    box-shadow: none;
  }

  #lx-eta-editor .ql-editor label:before {
    content: attr(data-rotulo) ' ';
  }

  #toast-msg {
    padding: 1em;
    font-size: 1.1em;
  }

  .lx-eta-dropbtn {
    background-color: #ffffff;
    color: #444444;
    width: 26px;
    font-weight: bold;
    vertical-align: middle;
    border: none;
    cursor: pointer;
    text-align: center;
  }

  .lx-eta-dropdown {
    position: relative;
    display: inline-block;
  }

  .lx-eta-dropdown-content {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 160px;
    box-shadow: 0px 4px 4px 4px rgba(0, 0, 0, 0.25);
    z-index: 1;
  }

  .lx-eta-dropdown-content div {
    color: black;
    padding: 5px 16px;
    text-decoration: none;
    display: block;
    white-space: nowrap;
    font-weight: normal !important;
    text-align: left;
    cursor: pointer;
  }

  .lx-eta-dropdown-content div:hover {
    background-color: #e5e5e5;
  }

  .lx-eta-dropdown:hover .lx-eta-dropdown-content {
    display: block;
  }

  .lx-eta-dropdown:hover .lx-eta-dropbtn {
    background-color: #e1e1e1;
  }

  .lx-eta-btn-disp-atual {
    margin-left: 10px !important;
    text-decoration: underline;
  }

  .lx-eta-btn-desfazer {
    margin-left: 10px !important;
  }

  .icon-undo-redo {
    width: 19px;
    height: 16px !important;
  }

  .icon-undo-redo:hover {
    fill: #0066cc;
  }

  .lx-eta-dropdown-content-right {
    right: 0;
  }

  .ql-snow .ql-hidden {
    display: none;
  }

  .ql-snow .ql-tooltip::before {
    content: 'Acesse a norma:';
  }

  .ql-snow .ql-tooltip a.ql-action::after {
    display: none;
  }

  .ql-snow .ql-tooltip a.ql-remove::before {
    display: none;
  }

  .ql-snow .ql-tooltip a.ql-preview {
    max-width: 300px;
  }

  .btn--artigoOndeCouber {
  }

  .container__linha {
    display: flex;
    width: 100%;
  }

  .container__linha--reverse {
    flex-direction: row-reverse;
  }

  .container__texto {
    flex: 1;
  }

  .container__menu {
    width: 30px;
    vertical-align: top;
    text-align: center;
  }

  .container__elemento--padrao {
    width: 100%;
    min-height: 26px;
    border: 1px solid #ffffff;
    line-height: 1.42;
    margin: 0px 2px 0px 5px !important;
  }

  .container__elemento--articulacao {
    width: 100%;
    min-height: 1px;
    line-height: 0.42;
    margin: 1px;
  }

  .agrupador {
    text-align: center;
  }

  .texto__rotulo {
    color: black;
    font-weight: 600;
    font-size: 1rem;
  }

  .texto__rotulo--agrupador {
    display: block;
  }

  .texto__rotulo--padrao {
    float: left;
    margin-right: 10px;
  }

  .dispositivo--adicionado {
    color: green;
  }

  .dispositivo--modificado {
    color: blue;
  }

  .dispositivo--suprimido {
    color: red;
  }

  .texto--suprimido {
    text-decoration: line-through;
  }

  .container__elemento--ativo {
    border-color: #24d421;
  }

  .mensagem {
    font-size: 0.8em;
    font-weight: 600;
  }

  .mensagem--info {
    color: green;
  }

  .mensagem--warning {
    color: #ff5733;
  }

  .mensagem--danger {
    color: red;
  }

  lexml-eta-help {
    float: right;
  }

  #lx-eta-buffer {
    display: none;
    height: 0px;
  }
`;let mc=class extends(nn(Au)(on)){constructor(){super(),this.inscricoes=[],this.onSelectionChange=(t,e,o)=>{0===(null==t?void 0:t.length)&&o===Quill.sources.USER&&this.ajustarLinkParaNorma()},this.tabIndex=-1}get quill(){return this._quill}createRenderRoot(){return this}async firstUpdated(){this.inicializar(this.configEditor())}stateChanged(t){var e,o;this.quill?(this.quill.undoEstruturaVazio=0===(null!==(e=t.elementoReducer.past)&&void 0!==e?e:[]).length,this.quill.redoEstruturaVazio=0===(null!==(o=t.elementoReducer.future)&&void 0!==o?o:[]).length,t.elementoReducer.ui&&(t.elementoReducer.ui.message?this.alertar(t.elementoReducer.ui.message.descricao):this.processarStateEvents(t.elementoReducer.ui.events))):this.quillNaoInicializado(t)}disconnectedCallback(){this.inscricoes.forEach((t=>t.cancel())),this.removeEventListener("ontextchange",(t=>console.log(t))),this.destroiQuill(),super.disconnectedCallback()}buildCss(){return`\n      <style>\n        ${hc.cssText}\n      </style>\n      <style>\n        ${fc.cssText}\n      </style>\n    `}render(){return ji`
      ${Nu(this.buildCss())}
      <div id="lx-eta-box">
        <div id="lx-eta-barra-ferramenta">
          <button class="ql-bold" title="Negrito (Ctrl+b)"></button>
          <button class="ql-italic" title="Itlico (Ctrl+i)"></button>
          <button class="ql-script" value="sub" title="Subscrito"></button>
          <button class="ql-script" value="super" title="Sobrescrito"></button>

          <button @click=${this.onClickUndo} class="lx-eta-ql-button lx-eta-btn-desfazer" title="Desfazer (Ctrl+Z)">
            <svg class="icon-undo-redo" id="undo" viewBox="0 0 512 512">
              <path
                d="M488,256c0,123.4-100.5,223.9-223.9,223.9c-48.8,0-95.2-15.6-134.2-44.9c-14.1-10.6-17-30.7-6.4-44.8 c10.6-14.1,30.6-16.9,44.8-6.4c27.8,20.9,61,31.9,95.9,31.9c88.1,0,159.8-71.7,159.8-159.8S352.3,96.2,264.2,96.2 c-37.5,0-73.1,13.5-101.3,36.6L208,178c17,17,5,46.1-19.1,46.1H43.2c-10.6,0-19.2-8.6-19.2-19.2V59C24,35,53.1,23,70.1,40l47.6,47.6 c40.2-34.9,91.8-55.5,146.4-55.5C387.5,32.1,488,132.6,488,256z"
              />
            </svg>
          </button>
          <button @click=${this.onClickRedo} class="lx-eta-ql-button" title="Refazer (Ctrl+y)">
            <svg class="icon-undo-redo lx-eta-rebate-180-graus" id="redo" viewBox="0 0 512 512">
              <path
                d="M488,256c0,123.4-100.5,223.9-223.9,223.9c-48.8,0-95.2-15.6-134.2-44.9c-14.1-10.6-17-30.7-6.4-44.8 c10.6-14.1,30.6-16.9,44.8-6.4c27.8,20.9,61,31.9,95.9,31.9c88.1,0,159.8-71.7,159.8-159.8S352.3,96.2,264.2,96.2 c-37.5,0-73.1,13.5-101.3,36.6L208,178c17,17,5,46.1-19.1,46.1H43.2c-10.6,0-19.2-8.6-19.2-19.2V59C24,35,53.1,23,70.1,40l47.6,47.6 c40.2-34.9,91.8-55.5,146.4-55.5C387.5,32.1,488,132.6,488,256z"
              />
            </svg>
          </button>

          <button @click=${this.onClickDispositivoAtual} class="lx-eta-ql-button lx-eta-btn-disp-atual" title="Localizar dispositivo atual">D</button>
          <input type="button" @click=${this.artigoOndeCouber} class="${"ql-hidden"} btn--artigoOndeCouber" value="Propor artigo onde couber" title="Artigo onde couber"></input>
          <lexml-eta-help></lexml-eta-help>
        </div>
        <div id="lx-eta-editor"></div>
      </div>
      <elix-toast id="toast-alerta" duration="3000">
        <div id="toast-msg"></div>
      </elix-toast>
      <div id="lx-eta-buffer"><p></p></div>
    `}formatacaoAlterada(){var t;(null===(t=document.getSelection())||void 0===t?void 0:t.toString())&&this.agendarEmissaoEventoOnChange("toolbar")}onClickUndo(){this.quill.undo()}onClickRedo(){this.quill.redo()}onClickDispositivoAtual(){this.quill.setSelection(this.quill.getIndex(this.quill.linhaAtual.blotConteudo),0,Quill.sources.SILENT),this.quill.focus()}artigoOndeCouber(){}ajustarLinkParaNorma(){const t=document.querySelector("a.ql-preview"),e=null==t?void 0:t.getAttribute("href");if(null==e?void 0:e.startsWith("urn")){const o="https://normas.leg.br/?urn="+e;t.setAttribute("href",o),t.innerHTML=(t=>{var e;const o=ea(t),i=Js(o),n=null===(e=Ys(o))||void 0===e?void 0:e.descricao,r=ta(o);return(n||"")+(i?" n "+i:"")+(r.length>7?" de "+r:"")})(e)}}onBold(t){this.quill.keyboard.verificarOperacaoTecladoPermitida()&&(this.quill.format("bold",t),this.formatacaoAlterada())}onItalic(t){this.quill.keyboard.verificarOperacaoTecladoPermitida()&&(this.quill.format("italic",t),this.formatacaoAlterada())}onScript(t){this.quill.keyboard.verificarOperacaoTecladoPermitida()&&(this.quill.format("script",t),this.formatacaoAlterada())}onOperacaoInvalida(){this.alertar("Operao no permitida.")}isDesmembramento(t,e,o){return 0!==(e+o).localeCompare(t)}adicionarElemento(t){var e,o;const i=this.quill.linhaAtual,n=i.blotConteudo,r=null!==(e=this.quill.inicioConteudoAtual)&&void 0!==e?e:0,s=null!==(o=r+n.tamanho)&&void 0!==o?o:0;let a="",l="";if(t.index===r)a="",l=n.html;else if(t.index===s)a=n.html,l="";else{const e=s-t.index;a=this.quill.getConteudoHtmlParteLinha(n,0,n.tamanho-e),l=this.quill.getConteudoHtmlParteLinha(n,t.index-r,e)}const u=this.criarElemento(i.uuid,i.lexmlId,i.tipo,a,i.numero,i.hierarquia);if(this.isDesmembramento(n.htmlAnt,a,l)){const t=this.criarElemento(i.uuid,i.lexmlId,i.tipo,a+l,i.numero,i.hierarquia);Au.dispatch(Pn.execute(t))}Au.dispatch(fn.execute(u,l))}async renumerarElemento(){var t,e;const o=this.quill.linhaAtual,i=o.blotConteudo.html,n=this.criarElemento(null!==(t=o.uuid)&&void 0!==t?t:0,o.lexmlId,null!==(e=o.tipo)&&void 0!==e?e:"","",o.numero,o.hierarquia,o.descricaoSituacao);if(!(t=>{var e,o;return void 0!==(null===(o=null===(e=t.hierarquia)||void 0===e?void 0:e.pai)||void 0===o?void 0:o.uuidAlteracao)&&t.descricaoSituacao!==Fr.DISPOSITIVO_ORIGINAL})(n))return;const r=document.createElement("elix-dialog"),s=document.createRange().createContextualFragment('\n      <div style="padding: 15px; text-align: center">\n        <div>\n          Numerao do dispositivo:\n          <input type="text" style="width: 60px">\n        </div>\n        <div class="erro" style="margin-top: 10px; color: red; display: none;"></div>\n        <div style="margin-top: 10px;">\n          <button>Ok</button>\n          <button>Cancelar</button>\n        </div>\n      </div>\n    '),a=s.querySelector("input");var l;a.value=`${l=o.blotRotulo.rotulo,l.replace(/\./g,"").replace(/["]/g,"").replace(/^Parte$/i,"").replace(/^Livro$/i,"").replace(/^Titulo$/i,"").replace(/^Capitulo$/i,"").replace(/^Secao$/i,"").replace(/^Subsecao$/i,"").replace(/^Artigo$/i,"").replace(/^Paragrafo$/i,"").replace(/^Inciso$/i,"").replace(/^Alinea$/i,"").replace(/^Item$/i,"").replace(/Art/i,"").replace(//i,"").replace(//i,"").replace(/[]/i,"").replace(/[-][/s]*$/,"").replace(/[)][/s]*$/,"").trim()}`;const u=s.querySelectorAll("button"),c=u[0],d=u[1],p=s.querySelector(".erro");c.onclick=()=>{var t;this.quill.focus(),r.close(),(null===(t=n.conteudo)||void 0===t?void 0:t.texto)!==i&&(n.conteudo.texto=i,Au.dispatch(Nn.execute(n))),Au.dispatch(Bn.execute(n,a.value.trim()))},d.onclick=()=>{this.quill.focus(),r.close()};const h=()=>{const t=a.value;return/^\s*$/.test(t)?"A numerao no pode ser vazia.":""};a.onkeyup=t=>{const e=h();p.innerText=e,p.style.display=e?"block":"none",c.disabled=Boolean(e),c.disabled||"Enter"===t.key&&c.click()},r.appendChild(s),c.disabled=Boolean(h()),await r.open()}removerElemento(){const t=this.quill.linhaAtual,e=`Voc realmente deseja remover o dispositivo ${t.blotRotulo.rotulo}`;this.confirmar(e,["Sim","No"],(e=>{var o,i;const n=e.detail.closeResult;if("Sim"===(n&&n.choice)){const e=this.criarElemento(null!==(o=t.uuid)&&void 0!==o?o:0,t.lexmlId,null!==(i=t.tipo)&&void 0!==i?i:"","",t.numero,t.hierarquia);Au.dispatch(Fn.execute(e))}this.quill.focus()}))}moverElemento(t){const e=this.quill.linhaAtual,o=e.blotConteudo.html,i=this.criarElemento(e.uuid,e.lexmlId,e.tipo,o,e.numero,e.hierarquia);"ArrowUp"===t.key?Au.dispatch(jn.execute(i)):"ArrowDown"===t.key&&Au.dispatch(Dn.execute(i))}transformarElemento(t){const e=this.quill.linhaAtual,o=e.blotConteudo.html,i=this.criarElemento(e.uuid,e.lexmlId,e.tipo,o,e.numero,e.hierarquia);"a"===t.key.toLowerCase()?Au.dispatch(Cu(i,pn.artigo.name)):"l"===t.key.toLowerCase()?Au.dispatch(Cu(i,pn.alinea.name)):"n"===t.key.toLowerCase()?Au.dispatch(Cu(i,pn.inciso.name)):"o"===t.key.toLowerCase()?Au.dispatch(Cu(i,pn.omissis.name)):"p"===t.key.toLowerCase()?Au.dispatch(Cu(i,pn.paragrafo.name)):"t"===t.key.toLowerCase()?Au.dispatch(Cu(i,pn.item.name)):Zu.keys.TAB&&Au.dispatch(t.shiftKey?{type:"SHIFT_TAB",atual:i}:(t=>({type:"TAB",atual:t}))(i))}elementoSelecionado(t){var e;const o=this.quill.linhaAtual,i=this.criarElemento(t,o.lexmlId,null!==(e=o.tipo)&&void 0!==e?e:"","",o.numero,o.hierarquia);Au.dispatch(Tn.execute(i)),this.quill.processandoMudancaLinha=!1}undoRedoEstrutura(t){"undo"===t?Au.dispatch({type:"UNDO"}):Au.dispatch({type:"REDO"})}processarStateEvents(t){null==t||t.forEach((t=>{var e;switch(t.stateType){case Fa.DocumentoCarregado:this.destroiQuill(),this.inicializar(this.configEditor()),this.carregarArticulacao(null!==(e=t.elementos)&&void 0!==e?e:[]);break;case Fa.InformarNorma:pc(t.elementos[0],this.quill,Au,kn);break;case Fa.ElementoIncluido:this.inserirNovoElementoNoQuill(t.elementos[0],t.referencia,!0),this.inserirNovosElementosNoQuill(t);break;case Fa.ElementoModificado:case Fa.ElementoRestaurado:this.atualizarQuill(t),this.montarMenuContexto(t);break;case Fa.ElementoSuprimido:this.atualizarSituacao(t),this.montarMenuContexto(t);break;case Fa.ElementoRemovido:this.removerLinhaQuill(t);break;case Fa.ElementoRenumerado:this.renumerarQuill(t);break;case Fa.ElementoValidado:this.atualizarMensagemQuill(t);break;case Fa.ElementoSelecionado:this.montarMenuContexto(t),this.atualizarMensagemQuill(t);break;case Fa.ElementoMarcado:this.marcarLinha(t);break;case Fa.SituacaoElementoModificada:this.atualizarSituacao(t),this.montarMenuContexto(t)}this.quill.limparHistory()}));const e=[Fa.ElementoModificado,Fa.ElementoSuprimido,Fa.ElementoRestaurado,Fa.ElementoIncluido,Fa.ElementoRemovido,Fa.ElementoRenumerado],o=null==t?void 0:t.filter((t=>e.includes(t.stateType))).map((t=>t.stateType));(null==o?void 0:o.length)&&this.agendarEmissaoEventoOnChange("stateEvents")}marcarLinha(t){this.quill.desmarcarLinhaAtual(this.quill.linhaAtual);const e=t.elementos[0],o=this.quill.getLinha(e.uuid),i=this.quill.getIndex(o.blotConteudo);this.quill.setIndex(i,Quill.sources.SILENT),this.quill.atualizarLinhaCorrente(o),this.elementoSelecionado(o.uuid)}processarEscolhaMenu(t){var e,o,i,n;if("Remover dispositivo"===t)this.removerElemento();else if(t===Bn.descricao)this.renumerarElemento();else{const r=this.quill.linhaAtual,s=this.criarElemento(null!==(e=r.uuid)&&void 0!==e?e:0,r.lexmlId,null!==(o=r.tipo)&&void 0!==o?o:"","",r.numero,r.hierarquia);s.conteudo.texto=null!==(i=r.blotConteudo.html)&&void 0!==i?i:"",Au.dispatch((n=t,ol.filter((t=>t.descricao===n.trim()))[0]).execute(s))}}inserirNovoElementoNoQuill(t,e,o){const i=this.quill.getLinha(e.uuid);if(i){const e=dc.criarContainerLinha(t);if(i.next?e.insertInto(this.quill.scroll,i.next):e.insertInto(this.quill.scroll),""!==this.quill.linhaAtual.blotConteudo.html||""===e.blotConteudo.html){if(o){this.quill.desmarcarLinhaAtual(this.quill.linhaAtual),this.quill.marcarLinhaAtual(e);try{this.quill.setIndex(this.quill.getIndex(e.blotConteudo),Quill.sources.SILENT)}catch(t){console.log(t)}}}else this.quill.linhaAtual.blotConteudo.htmlAnt=this.quill.linhaAtual.blotConteudo.html;this.quill.linhaAtual.descricaoSituacao=t.descricaoSituacao,this.quill.linhaAtual.setEstilo(t.descricaoSituacao)}}inserirNovosElementosNoQuill(t,e){var o;const i=null!==(o=t.elementos)&&void 0!==o?o:[];for(let t=1;t<i.length;t++)this.inserirNovoElementoNoQuill(i[t],i[t-1],e)}atualizarSituacao(t){var e;let o;(null!==(e=t.elementos)&&void 0!==e?e:[]).map((t=>{var e;o=this.quill.getLinha(null!==(e=t.uuid)&&void 0!==e?e:0,o),o&&t.descricaoSituacao!==o.descricaoSituacao&&(o.descricaoSituacao=t.descricaoSituacao,o.setEstilo(t.descricaoSituacao))}))}atualizarQuill(t){var e;let o;(null!==(e=t.elementos)&&void 0!==e?e:[]).map((t=>{var e,i,n,r,s;if(o=this.quill.getLinha(null!==(e=t.uuid)&&void 0!==e?e:0,o),o){let e=!1;t.editavel!==o.editavel&&(o.editavel=t.editavel),t.rotulo!==o.blotRotulo.html&&(o.numero=null!==(i=t.numero)&&void 0!==i?i:"",o.blotRotulo.format(Bu.blotName,t.rotulo)),t.nivel!==o.nivel&&(o.nivel=t.nivel,o.format(Hu.blotName,t),e=!0),t.agrupador!==o.agrupador&&(o.agrupador=t.agrupador,o.blotRotulo.format(Bu.formatoStyle,t),e||o.format(Hu.blotName,t)),(null===(n=t.conteudo)||void 0===n?void 0:n.texto)!==o.blotConteudo.html&&(o.blotConteudo.html=null!==(s=null===(r=t.conteudo)||void 0===r?void 0:r.texto)&&void 0!==s?s:""),t.descricaoSituacao!==o.descricaoSituacao&&(o.descricaoSituacao=t.descricaoSituacao,o.setEstilo(t.descricaoSituacao)),2===o.children.length&&o.children.tail.remove(),t.mensagens&&t.mensagens.length>0&&dc.criarContainerMensagens(t).insertInto(o)}}))}removerLinhaQuill(t){var e;let o;(null!==(e=t.elementos)&&void 0!==e?e:[]).forEach((t=>{var e;o=this.quill.getLinha(null!==(e=t.uuid)&&void 0!==e?e:0,o),o&&o.remove()}));const i=this.quill.getLine(this.quill.getSelection(!0).index)[0].linha,n=this.quill.getIndex(i.blotConteudo);this.quill.setSelection(n,0,Quill.sources.SILENT),this.quill.marcarLinhaAtual(i)}renumerarQuill(t){var e;let o;(null!==(e=t.elementos)&&void 0!==e?e:[]).map((t=>{var e;o=this.quill.getLinha(null!==(e=t.uuid)&&void 0!==e?e:0,o),o&&o.blotRotulo.format(Bu.blotName,t.rotulo)}))}atualizarMensagemQuill(t){var e;let o;(null!==(e=t.elementos)&&void 0!==e?e:[]).map((t=>{var e;o=this.quill.getLinha(null!==(e=t.uuid)&&void 0!==e?e:0,o),o&&(2===(null==o?void 0:o.children.length)&&o.children.tail.remove(),t.mensagens&&t.mensagens.length>0&&dc.criarContainerMensagens(t).insertInto(o))}))}montarMenuContexto(t){var e;const o=t.elementos?t.elementos[0]:new Tu,i=(null!==(e=null==o?void 0:o.acoesPossiveis)&&void 0!==e?e:[]).filter((t=>el(t)));if(i.length>0){this.quill.linhaAtual||this.marcarLinha(t);const e=new ju,o=new Fu(this.quill.linhaAtual.containerDireito.alinhamentoMenu),n=t=>{this.processarEscolhaMenu(t),this.quill.focus()};(new Mu).insertInto(e),i.forEach((t=>{new Uu(t,n).insertInto(o)})),o.insertInto(e),this.quill.linhaAtual.blotContainerDireito.remove(),e.insertInto(this.quill.linhaAtual.containerDireito)}}criarElemento(t,e,o,i,n,r,s){const a=new Tu;return a.uuid=t,a.lexmlId=e,a.tipo=o,a.numero=n,a.conteudo={texto:i},a.hierarquia=r,a.descricaoSituacao=s,a}inicializar(t){const e=this.getHtmlElement("lx-eta-editor"),o=this.getHtmlElement("lx-eta-buffer");cc.configurar(),this._quill=new cc(e,o,t),this.quill.on("selection-change",this.onSelectionChange),this.inscricoes.push(this.quill.keyboard.operacaoTecladoInvalida.subscribe(this.onOperacaoInvalida.bind(this))),this.inscricoes.push(this.quill.keyboard.adicionaElementoTeclaEnter.subscribe(this.adicionarElemento.bind(this))),this.inscricoes.push(this.quill.keyboard.moveElemento.subscribe(this.moverElemento.bind(this))),this.inscricoes.push(this.quill.keyboard.removeElemento.subscribe(this.removerElemento.bind(this))),this.inscricoes.push(this.quill.keyboard.renumeraElemento.subscribe(this.renumerarElemento.bind(this))),this.inscricoes.push(this.quill.keyboard.transformaElemento.subscribe(this.transformarElemento.bind(this))),this.inscricoes.push(this.quill.undoRedoEstrutura.subscribe(this.undoRedoEstrutura.bind(this))),this.inscricoes.push(this.quill.elementoSelecionado.subscribe(this.elementoSelecionado.bind(this))),this.inscricoes.push(this.quill.observableSelectionChange.subscribe(this.atualizarTextoElemento.bind(this))),this.inscricoes.push(this.quill.keyboard.onChange.subscribe(this.agendarEmissaoEventoOnChange.bind(this))),this.inscricoes.push(this.quill.clipboard.onChange.subscribe(this.agendarEmissaoEventoOnChange.bind(this)))}agendarEmissaoEventoOnChange(t){clearTimeout(this.timerOnChange),this.timerOnChange=setTimeout((()=>this.emitirEventoOnChange(t)),1e3)}atualizarTextoElemento(t){var e,o,i;if(null===(e=null==t?void 0:t.blotConteudo)||void 0===e?void 0:e.alterado){const e=this.criarElemento(t.uuid,t.lexmlId,t.tipo,null!==(i=null===(o=t.blotConteudo)||void 0===o?void 0:o.html)&&void 0!==i?i:"",t.numero,t.hierarquia);Au.dispatch(Pn.execute(e))}}emitirEventoOnChange(t){this.atualizarTextoElemento(this.quill.linhaAtual),this.dispatchEvent(new CustomEvent("onchange",{bubbles:!0,composed:!0,detail:{origemEvento:t}}))}carregarArticulacao(t){setTimeout((()=>{this.quill.getLine(0)[0].remove(),t.map((t=>{const e=dc.criarContainerLinha(t);e.insertInto(this.quill.scroll),t.tipo===pn.generico.tipo&&Au.dispatch(br.execute(t)),t.descricaoSituacao===Fr.DISPOSITIVO_ADICIONADO&&e.setEstilo(Fr.DISPOSITIVO_ADICIONADO)})),this.quill.limparHistory(),setTimeout((()=>{const e=this.quill.getLinha(t[1].uuid);this.quill.setSelection(this.quill.getIndex(null==e?void 0:e.blotConteudo),0,Quill.sources.USER)}),0),Au.dispatch(gr.execute())}),0)}configEditor(){return{modules:{toolbar:{container:"#lx-eta-barra-ferramenta",handlers:{bold:this.onBold.bind(this),italic:this.onItalic.bind(this),script:this.onScript.bind(this)}},history:{delay:0,maxStack:500,userOnly:!0}},theme:"snow"}}async confirmar(t,e,o){const i=document.createElement("elix-alert-dialog");i.textContent=t,i.choices=e,i.addEventListener("close",o),await i.open()}alertar(t){const e=this.querySelector("#toast-alerta");this.querySelector("#toast-msg").innerHTML=t,e.fromEdge="top",e.open()}quillNaoInicializado(t){var e;let o=[];const i=t=>{setTimeout((()=>{this.quill?t.length>0&&this.carregarArticulacao(t):i(t)}),70)};if(t.elementoReducer.ui){o=null!==(e=t.elementoReducer.ui.events.find((t=>t.stateType===Fa.DocumentoCarregado)).elementos)&&void 0!==e?e:[]}i(o)}getHtmlElement(t){return this.querySelector(`#${t}`)}destroiQuill(){this.getHtmlElement("lx-eta-editor").innerHTML="",this.getHtmlElement("lx-eta-buffer").innerHTML="",this.quill&&(this.quill.off("selection-change",this.onSelectionChange),this.quill.destroi()),this._quill=void 0}};mc=ti([Gi("lexml-eta-editor")],mc);let vc=class extends on{constructor(){super(...arguments),this.htmlAgrupador=()=>{var t,e,o;return ji`<p class="rotulo">${this.elemento.rotulo}</p>
      <p class="texto-agrupador">${Nu(null!==(o=null===(e=null===(t=this.elemento)||void 0===t?void 0:t.conteudo)||void 0===e?void 0:e.texto)&&void 0!==o?o:"")}</p>`},this.htmlDispositivo=()=>{var t,e,o;return ji`
      <p class="texto" style="${`padding-left: ${20*this.elemento.nivel}px;`}">
        <span class="rotulo">${this.elemento.rotulo}</span>
        ${Nu(null!==(o=null===(e=null===(t=this.elemento)||void 0===t?void 0:t.conteudo)||void 0===e?void 0:e.texto)&&void 0!==o?o:"")}
      </p>
    `}}render(){return ji`
      <div class="box">
        <div class="conteudo">${this.elemento.agrupador?this.htmlAgrupador():this.htmlDispositivo()}</div>
      </div>
    `}};vc.styles=tn`
    :host {
      display: block;
      padding: 0px;
      margin: 0px;
      font-family: sans-serif, 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
        'Noto Color Emoji';
      font-size: 1.1em;
      line-height: 1.2;
      color: #646260;
      text-transform: none !important;
    }

    p.rotulo {
      margin: 5px !important;
      color: #373634;
      font-weight: 600;
      text-align: center;
    }

    p.texto {
      margin: 5px !important;
    }

    p.texto-agrupador {
      margin: 5px !important;
      text-align: center;
    }

    span.rotulo {
      color: #373634;
      font-weight: 600;
    }
  `,ti([Zi({type:Object})],vc.prototype,"elemento",void 0),vc=ti([Gi("lexml-eta-elemento")],vc);let gc=class extends on{render(){return ji`
      <div class="lx-eta-help">
        <button class="lx-eta-helpbtn">&quest;</button>
        <div class="lx-eta-help-content">
          <div><b>ctrl-shift-a</b>&nbsp;-&nbsp;Seleciona o texto do dispositivo atual</div>
          <div><b>ctrl-a</b>&nbsp;-&nbsp;Seleciona todos os dispositivos da articulao</div>
          <div><b>ctrl-home</b>&nbsp;-&nbsp;Vai para o primeiro dispositivo</div>
          <div><b>ctrl-end</b>&nbsp;-&nbsp;Vai para o ltimo dispositivo</div>
          <div><b>ctrl-&uarr;</b>&nbsp;-&nbsp;Move o dispositivo acima</div>
          <div><b>ctrl-&darr;</b>&nbsp;-&nbsp;Move o dispositivo abaixo</div>
          <hr></hr>
          <div><b>enter</b>&nbsp;-&nbsp;Finaliza a edio do dispositivo atual e cria um novo</div>
          <div><b>ctrl-d</b>&nbsp;-&nbsp;Remove dispositivo atual</div>
          <div><b>ctrl-z</b>&nbsp;-&nbsp;Desfaz ultima alterao</div>
          <div><b>ctrl-y</b>&nbsp;-&nbsp;Refaz alterao</div>
          <hr></hr>
          <div><b>ctrl-alt-A</b>&nbsp;-&nbsp;Transforma o dispositivo em artigo</div>
          <div><b>ctrl-alt-L</b>&nbsp;-&nbsp;Transforma o dispositivo em alnea</div>
          <div><b>ctrl-alt-N</b>&nbsp;-&nbsp;Transforma o dispositivo em inciso</div>
          <div><b>ctrl-alt-O</b>&nbsp;-&nbsp;Transforma o dispositivo em omissis</div>
          <div><b>ctrl-alt-P</b>&nbsp;-&nbsp;Transforma o dispositivo em pargrafo</div>
          <div><b>ctrl-alt-T</b>&nbsp;-&nbsp;Transforma o dispositivo em item</div>
          <div><b>tab</b>&nbsp;-&nbsp;Indenta para a direita o dispositivo, transformando-o no tipo mais provvel</div>
          <div><b>shift-tab</b>&nbsp;-&nbsp;Recua o dispositivo para a esquerda, transformando-o no tipo mais provvel</div>
          <hr></hr>
          <div><b>ctrl-alt-R</b>&nbsp;-&nbsp;Renumera o dispositivo</div>
        </div>
      </div>
    `}};gc.styles=tn`
    :host {
      position: relative;
      display: inline-block;
    }

    .lx-eta-helpbtn {
      background-color: #ffffff;
      color: black;
      width: 26px;
      height: 22px;
      font-size: 1.1em;
      font-weight: bold;
      vertical-align: middle;
      border: none;
      cursor: pointer;
      text-align: center;
    }

    .lx-eta-help-content {
      display: none;
      position: absolute;
      right: 0;
      background-color: #f9f9f9;
      box-shadow: 0px 4px 4px 4px rgba(0, 0, 0, 0.25);
      z-index: 1;
      width: calc(100vw - 30px);
      max-width: 400px;
    }

    .lx-eta-help-content div {
      color: black;
      padding: 2px 5px;
      text-decoration: none;
      display: block;
      white-space: wrap;
      font-size: 0.8em;
      font-weight: normal !important;
      text-align: left;
    }

    .lx-eta-help:hover .lx-eta-help-content {
      display: block;
    }
  `,gc=ti([Gi("lexml-eta-help")],gc);class bc{static getDispositivosNaoOriginais(t){const e=[];return _s(t,(t=>{t.pai&&t.situacao.descricaoSituacao!==Fr.DISPOSITIVO_ORIGINAL&&e.push(t)})),e}static getDispositivosComando(t){const e=new Array;for(const o of t){if(o.situacao.descricaoSituacao===Fr.DISPOSITIVO_ORIGINAL||xs(o)||ys(o))continue;const t=bc.getDispositivoAfetado(o);t&&!e.includes(t)&&e.push(t)}return e}static getDispositivoAfetado(t){if(kr(t)||wr(t))return t;const e=t.pai;return Er(e)&&e.pai.situacao.descricaoSituacao!==Fr.DISPOSITIVO_ORIGINAL?e.filhos.find((t=>t.situacao.descricaoSituacao===Fr.DISPOSITIVO_ORIGINAL))?t:e.pai:bc.isAlteracaoIntegral(e)?bc.getDispositivoAfetado(e):t}static isTextoOmitido(t){var e;return Nr(t)||t.texto.startsWith(Ps)||kr(t)&&!!(null===(e=t.caput)||void 0===e?void 0:e.texto.startsWith(Ps))}static isAlteracaoIntegral(t){if(t.situacao.descricaoSituacao===Fr.DISPOSITIVO_ORIGINAL)return!1;if(t.situacao.descricaoSituacao===Fr.DISPOSITIVO_SUPRIMIDO||t.situacao.descricaoSituacao===Fr.DISPOSITIVO_ADICIONADO)return!0;if(!t.filhos.length)return!wr(t)||t.situacao.descricaoSituacao!==Fr.DISPOSITIVO_ORIGINAL;for(const e of t.filhos)if(!bc.isAlteracaoIntegral(e))return!1;return!0}static isSequenciasPlural(t){const e=t.length;return 0!==e&&(e>1||bc.isSequenciaPlural(t[0]))}static isSequenciaPlural(t){const e=t.getQuantidadeRanges();return 0!==e&&(e>1||t.getPrimeiroRange().getQuantidadeDispositivos()>1)}static getProximoAgrupador(t){let e=t;do{e=ls(e)}while(e&&!kr(e));return e}static getDispositivoIrmaoPosterior(t){if(wr(t)||kr(t))return this.getArtigoPosterior(t);if(!this.isUltimoDispositivoDoMesmoTipo(t)){const e=t.pai,o=e.filhos.indexOf(t)+1;return e.filhos[o]}}static getArtigoPosterior(t){const e=t.pai;if(e.filhos.length){for(let o=e.filhos.indexOf(t)+1;o<e.filhos.length;o++){const t=e.filhos[o];if(wr(t))return t;if(kr(t)){const e=this.buscaProximoArtigo(t);if(e)return e}}if(e.pai)return this.getArtigoPosterior(e)}}static buscaProximoArtigo(t){const e=t.filhos;for(const t of e){if(wr(t))return t;if(kr(t))return this.buscaProximoArtigo(t)}}static isUltimoDispositivoDoMesmoTipo(t){if(!t.pai)return!0;const e=t.pai,o=e.filhos.indexOf(t);return e.filhos.length===o+1||e.filhos[o+1].tipo!==t.tipo}static getFilhosEstiloLexML(t){if(wr(t)){const e=t;return[e.caput,...e.filhos.filter((t=>Or(t)))]}return t.filhos}static getDispositivoAnteriorDireto(t){const e=t.pai,o=this.getFilhosEstiloLexML(e),i=o.indexOf(t);if(!(i>0))return e;for(t=o[i-1];t.filhos.length;)t=t.filhos[t.filhos.length-1];return t}static getDispositivoPosteriorDireto(t){const e=this.getFilhosEstiloLexML(t);return e.length?e[0]:this.getProximoIrmaoRecursivo(t)}static getProximoIrmaoRecursivo(t){if(!t)return;const e=ls(t);if(e)return e;{const e=t.pai;return e?void 0:this.getProximoIrmaoRecursivo(e)}}static isMesmoTipoParaComandoEmenda(t,e){return t.tipo===e.tipo&&(!wr(t)||bc.isAlteracaoIntegral(t)===bc.isAlteracaoIntegral(e))}static getTextoParaCitacao(t){return t.texto.replace(/^\s*<p>\s*/i,"").replace(/\s*<\/p>\s*$/i,"")}}const yc=(t,e)=>{t.splice(t.indexOf(e),1)};class xc{constructor(t){this.dispositivos=[],t&&this.add(t)}isSituacao(t){return!!this.dispositivos.length&&this.dispositivos[0].situacao.descricaoSituacao===t}isTipo(t){return!!this.dispositivos.length&&this.dispositivos[0].tipo===t}add(t){return!!this.podeAdicionarAoRange(t)&&(this.dispositivos.push(t),!0)}addInicio(t){this.dispositivos.splice(0,0,t)}isUltimo(t){return this.dispositivos.indexOf(t)===this.dispositivos.length-1}getPrimeiro(){return this.dispositivos[0]}getUltimo(){return this.dispositivos[this.dispositivos.length-1]}getQuantidadeDispositivos(){return this.dispositivos.length}getAnterior(t){if(!(t<1))return this.dispositivos[t-1]}getNumeracaoParaComandoEmenda(){let t=this.dispositivos[0].getNumeracaoParaComandoEmenda();return this.dispositivos.length>1&&(t+=" a "+this.getUltimo().getNumeracaoParaComandoEmenda()),t}print(t,e){this.isRotuloNecessario(e)?this.printRotuloInicio(t,e):t.append(this.dispositivos[0].getNumeracaoParaComandoEmenda()),this.printSeparadorProximoDispositivo(t,e),this.printRotuloFimSeExistir(t)}printRotuloFimSeExistir(t){this.dispositivos.length>=2&&t.append(this.dispositivos[this.dispositivos.length-1].getNumeracaoParaComandoEmenda())}printSeparadorProximoDispositivo(t,e){const o=this.getRangeDispositivosPosterior(e);this.dispositivos.length>=3?t.append(" a "):2!==this.dispositivos.length||o?this.dispositivos.length>1&&this.dispositivos.length<3&&o&&t.append(", "):t.append(" e ")}printRotuloInicio(t,e){const o=this.getRangeDispositivosPosterior(e);this.hasApenasUmDispositivo()&&!o||o&&!this.isMesmoTipoSituacao(o)?t.append(this.getRotuloCompletoSingular(this.dispositivos[0])):t.append(this.getRotuloCompletoPlural(this.dispositivos[0]))}isMesmoTipoSituacao(t){return t.isTipo(this.dispositivos[0].tipo)&&t.isSituacao(this.dispositivos[0].situacao.descricaoSituacao)}hasApenasUmDispositivo(){return 1===this.dispositivos.length}isRotuloNecessario(t){const e=this.getRangeDispositivosAnterior(t);return!e||!e.isMesmoTipoSituacao(this)||!(!this.isSituacao(Fr.DISPOSITIVO_ADICIONADO)||this.isMesmoPai(e))}isMesmoPai(t){return this.getPrimeiro().pai===t.getPrimeiro().pai}getRotuloCompletoSingular(t){const e=new Mr;t.situacao.descricaoSituacao!==Fr.DISPOSITIVO_ADICIONADO?e.append(t.artigoDefinidoSingular):e.append(" ");const o=t.getNumeracaoComRotuloParaComandoEmenda();return o.endsWith(".")?e.append(o.substring(0,o.indexOf("."))):e.append(o),e.toString()}getRotuloCompletoPlural(t){const e=new Mr;return t.situacao.descricaoSituacao!==Fr.DISPOSITIVO_ADICIONADO?e.append(t.artigoDefinidoPlural):e.append(" "),e.append(this.getTipoDispositivoPlural(t)),e.append(" "),e.append(t.getNumeracaoParaComandoEmenda()),e.toString()}getRangeDispositivosAnterior(t){const e=t.indexOf(this);if(e>0)return t[e-1]}getRangeDispositivosPosterior(t){if(1===t.length)return;const e=t.indexOf(this);return e>=0&&e<t.length-1?t[e+1]:void 0}getTipoDispositivoPlural(t){var e;return t.tipo===pn.artigo.tipo?"arts.":t.tipo===pn.paragrafo.tipo?"":(null===(e=t.descricaoPlural)||void 0===e?void 0:e.toLocaleLowerCase())+""}podeAdicionarAoRange(t){if(this.isVazio())return!0;const e=this.getUltimo();return e.tipo===t.tipo&&(e.situacao.descricaoSituacao===t.situacao.descricaoSituacao&&(!(!wr(t)&&t.pai!==e.pai)&&((t=>{const e=Kr(t),o=e.indexOf(t);return o<e.length-1?e[o+1]:void 0})(e)===t&&bc.isAlteracaoIntegral(e)===bc.isAlteracaoIntegral(t))))}isVazio(){return 0===this.dispositivos.length}toString(){const t=new Mr;return this.dispositivos.forEach((e=>{t.append(" "),t.append(""+e.rotulo)})),t.toString()}getDispositivos(){return this.dispositivos}getDispositivo(t){return this.dispositivos[t]}}class wc{constructor(){this.ranges=new Array,this.localizarArtigoEmAgrupador=!1,this.informarCaputDoDispositivo=!1}isVazio(){return 0===this.ranges.length}add(t){this.ranges.push(t)}addInicio(t){this.ranges.unshift(t)}getQuantidadeRanges(){return this.ranges.length}getPrimeiroRange(){return this.ranges[0]}getPrimeiroDispositivo(){return this.ranges[0].getPrimeiro()}getUltimoDispositivo(){return this.ranges[this.ranges.length-1].getUltimo()}getRanges(){return this.ranges}setRanges(t){this.ranges=t}getRange(t){return this.ranges[t]}getTextoListaDeDispositivos(){const t=new Mr,e=this.ranges.length;let o=1;for(const i of this.ranges)o>1&&(o===e?t.append(" e "):t.append(", ")),t.append(i.getNumeracaoParaComandoEmenda()),o++;return t.toString()}static debug(t){const e=new Mr;for(const o of t)e.append("seq: "+o);console.log(e)}toString(){return this.ranges.toString()}remove(t){yc(this.ranges,t)}}class Ec{getSequencias(t){const e=this.getRanges(t);return this.agrupaRanges(e)}getRanges(t){let e=new Array,o=new xc;for(const i of t)o.add(i)||(e.push(o),o=new xc,o.add(i));return o.isVazio()||e.push(o),e=Ec.separaRangesDeDoisDispositivos(e),e}static separaRangesDeDoisDispositivos(t){const e=new Array;for(const o of t)2===o.getQuantidadeDispositivos()?(e.push(new xc(o.getPrimeiro())),e.push(new xc(o.getUltimo()))):e.push(o);return e}separaRangesDeDoisDispositivosEmSequencias(t){for(const e of t)e.setRanges(Ec.separaRangesDeDoisDispositivos(e.getRanges()))}agrupaRanges(t){const e=new Array;let o=new wc;for(const i of t)o.isVazio()?(o.add(i),e.push(o)):this.isMesmaSequencia(o,i)?o.add(i):(o=new wc,o.add(i),e.push(o));return e}isMesmaSequencia(t,e){const o=t.getPrimeiroDispositivo(),i=e.getUltimo();return bc.isMesmoTipoParaComandoEmenda(o,i)&&o.situacao.descricaoSituacao===i.situacao.descricaoSituacao&&(o.tipo===pn.artigo.tipo||o.pai===i.pai)&&o.tipo!==pn.omissis.tipo}separaDispositivosSeguidosDeOmissis(t){const e=new Array;for(const o of t)e.push(...this.separaDispositivosSeguidosDeOmissis2(o));return e}separaDispositivosSeguidosDeOmissis2(t){const e=new Array;let o=new wc;e.push(o);let i=new xc;o.add(i);for(const n of t.getRanges()){i.getQuantidadeDispositivos()>0&&(i=new xc,o.add(i));for(const t of n.getDispositivos()){const n=ls(t);n&&n.tipo===pn.omissis.tipo?(this.adicionaouDispositivos(o,i)&&(0===i.getQuantidadeDispositivos()&&o.remove(i),o=new wc,e.push(o),i=new xc,o.add(i)),o.informarCaputDoDispositivo=!0,i.add(t),o=new wc,e.push(o),i=new xc,o.add(i)):i.add(t)}}return 0===i.getQuantidadeDispositivos()&&o.remove(i),0===o.getQuantidadeRanges()&&yc(e,o),this.separaRangesDeDoisDispositivosEmSequencias(e),e}adicionaouDispositivos(t,e){return t.getQuantidadeRanges()>1||e.getQuantidadeDispositivos()>0}}class Oc{static compare(t,e){if(!t||!e)throw new Error("Tentativa de comparao de dispositivo nulo.");if(!t.pai)return-1;if(!e.pai)return 1;const o=Oc.getIndices(t),i=Oc.getIndices(e);return Oc.comparaIndices(o,i)}static getIndices(t){const e=[];let o=this.getPaiParaComparacao(t);for(;o;)e.push(this.getIndexDoFilho(o,t)),t=o,o=this.getPaiParaComparacao(t);return e.reverse(),e}static getPaiParaComparacao(t){if(t.pai)return wr(t.pai)&&ys(t)?t.pai.caput:t.pai}static getIndexDoFilho(t,e){return Er(e)?0:Or(e)?t.filhos.indexOf(e)+1:ys(e)?-1:t.filhos.indexOf(e)}static comparaIndices(t,e){let o=0;const i=t.length,n=e.length;for(let r=0;r<i&&r<n&&0===o;r++)o=t[r]-e[r];return 0===o&&(o=i-n),o}}class qc{constructor(t){this.dispositivos=t}static compare(t,e){var o,i;return(null===(o=t.dispositivos)||void 0===o?void 0:o.length)?(null===(i=e.dispositivos)||void 0===i?void 0:i.length)?Oc.compare(t.dispositivos[0],e.dispositivos[0]):-1:1}}var _c;!function(t){t[t.NENHUM=0]="NENHUM",t[t.DEFINIDO=1]="DEFINIDO",t[t.DEFINIDO_COM_PREPOSICAO_A=2]="DEFINIDO_COM_PREPOSICAO_A"}(_c||(_c={}));class Ac{constructor(){this.artigoAntesDispositivo=_c.NENHUM}getTexto(t){const e=new Mr,o=t.length;let i=1;for(const n of t)i>1&&(i===o?e.append(" e "):e.append(", ")),n.informarCaputDoDispositivo?e.append(this.getReferenciaCaputDoDispositivo(n)):e.append(this.getTextoArtigoAntesSequencia(n)),e.append(this.getRotuloTipoDispositivo(n)),e.append(" "),e.append(n.getTextoListaDeDispositivos()),e.append(this.getRotuloPaisSequencia(n)),i++;return e.toString()}getReferenciaCaputDoDispositivo(t){const e=new Mr,o=t.getPrimeiroDispositivo();if(o.tipo===pn.caput.tipo)return this.getTextoArtigoAntesSequencia(t);const i=bc.isSequenciaPlural(t);return e.append(this.getTextoArtigoAntesDispositivo(this.artigoAntesDispositivo,Qs,i)),e.append(" caput "),1===t.getRange(0).getQuantidadeDispositivos()?e.append(o.pronomePossessivoSingular):e.append(o.pronomePossessivoPlural),e.toString()}getTextoArtigoAntesSequencia(t){const e=t.getPrimeiroDispositivo(),o=bc.isSequenciaPlural(t);return this.getTextoArtigoAntesDispositivo(this.artigoAntesDispositivo,e,o)}getTextoArtigoAntesDispositivo(t,e,o){switch(t){case _c.DEFINIDO:return o?e.artigoDefinidoPlural:e.artigoDefinidoSingular;case _c.DEFINIDO_COM_PREPOSICAO_A:return o?e.artigoDefinidoPrecedidoPreposicaoAPlural:e.artigoDefinidoPrecedidoPreposicaoASingular;default:return""}}getRotuloTipoDispositivo(t){const e=t.getPrimeiroDispositivo();return Ac.getRotuloTipoDispositivo(e,bc.isSequenciaPlural(t))}static getRotuloTipoDispositivo(t,e){return t.getNumeracaoParaComandoEmenda().indexOf("nico")>=0?"":e?wr(t)?"arts.":Or(t)?"":String(t.descricaoPlural).toLocaleLowerCase():wr(t)?t.situacao.descricaoSituacao!==Fr.DISPOSITIVO_MODIFICADO||bc.isAlteracaoIntegral(t)?"art.":"caput do art.":Or(t)?"":String(t.descricao).toLowerCase()}getRotuloPaisSequencia(t){const e=t.getPrimeiroDispositivo(),o=t.localizarArtigoEmAgrupador;return this.getRotuloPais(e,o)}getRotuloPais(t,e){var o;const i=new Mr;let n;for(;!Ss(t);){if(n=t.pai,n&&ys(n)){if(t.tipo===pn.omissis.tipo){const o=bc.getDispositivoAnteriorDireto(t);if(o.tipo!==pn.alteracao.tipo)return i.append("aps "),i.append(o.artigoDefinidoSingular),i.append(o.getNumeracaoComRotuloParaComandoEmenda()),i.append(this.getRotuloPais(o,e)),i.toString()}break}if(n&&!Ss(n)&&(!kr(n)||wr(t)&&e)){const r=xs(t),s=!r&&t.situacao.descricaoSituacao===Fr.DISPOSITIVO_ADICIONADO,a=r&&!bc.isTextoOmitido(t)&&t.situacao.descricaoSituacao===Fr.DISPOSITIVO_ADICIONADO;if(s||a)i.append(n.artigoDefinidoPrecedidoPreposicaoASingular);else if(Nr(t)){const r=bc.getDispositivoAnteriorDireto(t),s=bc.getDispositivoPosteriorDireto(t);if(r===n&&s&&s.pai===n){const t=s.pronomePossessivoSingular+" "+(null===(o=s.descricao)||void 0===o?void 0:o.toLowerCase())+" "+s.getNumeracaoParaComandoEmenda();i.append("antes "+t),i.append(n.pronomePossessivoSingular)}else if(!yr(r)||!r.pai)return i.append("aps "),i.append(r.artigoDefinidoSingular),i.append(r.getNumeracaoComRotuloParaComandoEmenda()),i.append(this.getRotuloPais(r,e)),i.toString()}else i.append(n.pronomePossessivoSingular);i.append(n.getNumeracaoComRotuloParaComandoEmenda())}else if(wr(t)&&Ss(n)&&e){const e=bc.getProximoAgrupador(t);e&&(i.append(" antes "),i.append(e.pronomePossessivoSingular),i.append(e.getNumeracaoComRotuloParaComandoEmenda()))}if(!n)break;t=n}return i.toString()}setArtigoAntesDispositivo(t){this.artigoAntesDispositivo=t}}class Sc extends qc{constructor(t){super(t),this.dispositivos=t}getTexto(t,e,o){const i=new Mr,n=(new Ec).getSequencias(this.dispositivos);e?(i.append("D-se "),o||i.append("nova redao ")):(i.append(o?"; e ":"; "),i.append("d-se nova redao "));const r=new Ac;return r.setArtigoAntesDispositivo(_c.DEFINIDO_COM_PREPOSICAO_A),i.append(r.getTexto(n)),o&&(i.append(" "+t.genero.pronomePossessivoSingular+" "+t.nome),i.append(e?" a seguinte redao:":", nos termos a seguir:")),jr(i.toString())}}class Ic extends qc{constructor(t){super(t),this.dispositivos=t}getTexto(t,e,o){const i=new Mr;let n=(new Ec).getSequencias(this.dispositivos);n=this.trataLocalizacaoArtigoEmAgrupador(n);const r=bc.isSequenciasPlural(n);e?i.append(r?"Acrescentem-se ":"Acrescente-se "):(i.append(o?"; e ":"; "),i.append(r?"acrescentem-se ":"acrescente-se "));const s=new Ac;if(i.append(s.getTexto(n)),o){const o=n[n.length-1];!wr(o.getPrimeiroDispositivo())||o.localizarArtigoEmAgrupador?i.append(t.genero.pronomePossessivoSingular):i.append(t.genero.artigoDefinidoPrecedidoPreposicaoASingular),i.append(t.nome),i.append(e?", com a seguinte redao:":", nos termos a seguir:")}return jr(i.toString())}trataLocalizacaoArtigoEmAgrupador(t){const e=new Array;for(const o of t)wr(o.getPrimeiroDispositivo())?e.push(...this.trataLocalizacaoArtigoAgrupadorSequencia(o)):e.push(o);return e}trataLocalizacaoArtigoAgrupadorSequencia(t){const e=new Array,o=new Array;for(const e of t.getRanges())o.push(...e.getDispositivos());let i=!1;for(const t of o)if(this.isInclusaoArtigoProximoAgrupador(t)){i=!0;break}if(!i)return e.push(t),e;let n=new wc;n.localizarArtigoEmAgrupador=!0,e.push(n);let r,s=new xc;n.add(s);for(const t of o)s.isVazio()||(t.pai!==r.pai?(n=new wc,n.localizarArtigoEmAgrupador=!0,e.push(n),s=new xc,n.add(s)):bc.getDispositivoIrmaoPosterior(r)!==t&&(s=new xc,n.add(s))),s.add(t),r=t;for(const t of e)t.setRanges(Ec.separaRangesDeDoisDispositivos(t.getRanges()));return e}isInclusaoArtigoProximoAgrupador(t){return this.isInclusaoArtigoInicioAgrupador(t)||this.isInclusaoArtigoAntesAgrupador(t)}isInclusaoArtigoInicioAgrupador(t){const e=t.pai;return!(Ss(e)||!kr(e))&&0===e.filhos.indexOf(t)}isInclusaoArtigoAntesAgrupador(t){const e=t.pai,o=bc.getDispositivoIrmaoPosterior(t);return!!o&&e!==o.pai}}class Nc extends qc{constructor(t){super(t),this.dispositivos=t}getTexto(t,e,o){const i=new Mr,n=(new Ec).getSequencias(this.dispositivos),r=bc.isSequenciasPlural(n);e?i.append(r?"Suprimam-se ":"Suprima-se "):(i.append(o?"; e ":"; "),i.append(r?"suprimam-se ":"suprima-se "));const s=new Ac;return s.setArtigoAntesDispositivo(_c.DEFINIDO),i.append(s.getTexto(n)),o&&(i.append(" "+t.genero.pronomePossessivoSingular+" "+t.nome),i.append(e?".":", nos termos a seguir:")),jr(i.toString())}}class kc{constructor(){this.classificacao=Ga.EMENDA,this.proposicao=new Pc,this.dispositivosSuprimidos=[],this.dispositivosModificados=[],this.dispositivosAdicionados=[],this.comandoEmenda=new Lc,this.justificativa=""}}class Pc{constructor(){this.urn="",this.identificacao=""}}class Tc{constructor(){this.id=""}}class Cc extends Tc{}class Rc extends Tc{constructor(){super(...arguments),this.texto=""}}class Dc extends Tc{}class Lc{constructor(){this.comandos=[]}}class jc{constructor(t,e){this.cabecalho=t,this.citacao=e}}class Mc{constructor(t){this.dispositivos=t}getTexto(t){if(!this.dispositivos.length)return"";let e;const o=t.genero.contracaoEmArtigoDefinidoSingular+" "+t.nome;return e=this.dispositivos.length>1?"Acrescentem-se, onde couber, "+o+" os seguintes artigos:":"Acrescente-se, onde couber, "+o+" o seguinte artigo:",jr(e)}}class Fc{constructor(t){this.nome=t,this.valores=new Array,this.atributos=new Mr}toString(){if(!this.valores.length)return"<"+this.nome+this.atributos+"/>";const t=new Mr("<"+this.nome+this.atributos+">");return this.valores.forEach((e=>{t.append(e)})),t.append("</"+this.nome+">"),t.toString()}addValor(t){return t&&this.valores.push(t),this}addAtributo(t,e){return this.atributos.append(" "),this.atributos.append(t),e&&(this.atributos.append("='"),this.atributos.append(e),this.atributos.append("'")),this}add(t){return t&&this.valores.push(t),this}}class Uc{getTexto(t){const e=new Mr,o=Er(t)?t.pai.rotulo:t.rotulo,i=new Fc("Rotulo").addValor(null==o?void 0:o.trim()),n=new Fc("p").addValor("").add(i).addValor(bc.getTextoParaCitacao(t));if(this.necessitaOmissis(t)){const t=new Fc("p").add(new Fc("Omissis")).addValor("");e.append(n.toString()),e.append(t.toString())}else n.addValor(""),e.append(n.toString());return e.toString()}necessitaOmissis(t){return this.temFilhoNaoSuprimido(t)&&!xs(t)}temFilhoNaoSuprimido(t){for(const e of t.filhos)if(e.situacao.descricaoSituacao!==Fr.DISPOSITIVO_SUPRIMIDO)return!0;return!1}}class Bc{constructor(t){this.articulacao=t}getTexto(){const t=new Mr,e=this.getDispositivosParaCitacao();if(e.length-e.filter((t=>t.situacao.descricaoSituacao===Fr.DISPOSITIVO_SUPRIMIDO)).length>0){const o=e[0];1!==e.length||wr(o)?t.append("<p>Citao mltipla no implementada.</p>"):t.append((new Uc).getTexto(o))}return t.toString()}getDispositivosParaCitacao(){const t=bc.getDispositivosNaoOriginais(this.articulacao);t.sort(Oc.compare);const e=new Array;return t.forEach((t=>{ys(t)?t.pai.situacao.descricaoSituacao===Fr.DISPOSITIVO_ADICIONADO&&e.push(t):xs(t)?e.indexOf(t.pai)>=0&&e.push(t):e.push(t)})),e}}class zc{constructor(t,e){this.urn=t,this.articulacao=e}getComandoEmenda(){const t=new Lc,e=bc.getDispositivosNaoOriginais(this.articulacao),o=this.getDispositivosRepresentativosDeCadaComando(e);if(o.sort(Oc.compare),!o.length)return t;const i=(t=>{const e=Ys(t);let o=Ws(e.genero),i="Projeto";return o===Ks&&(i=e.urn.startsWith("medida.provisoria")?"Medida Provisria":"Proposta"),new Zs(i,o)})(this.urn);return o.forEach((o=>{let n,r;if(yr(o))n="no implementado",r="";else{n=new Vc(e).getTexto(i);r=new Bc(this.articulacao).getTexto()}t.comandos.push(new jc(n,r))})),t}getDispositivosRepresentativosDeCadaComando(t){const e=[];let o=!1;return t.forEach((t=>{const i=zr(t);i&&i.pai&&i.situacao.descricaoSituacao!==Fr.DISPOSITIVO_SUPRIMIDO?-1===e.indexOf(i)&&i.pai.situacao.descricaoSituacao!==Fr.DISPOSITIVO_ADICIONADO&&e.push(i):o||(o=!0,e.push(t))})),e}}class Vc{constructor(t){this.dispositivosEmenda=t}getTexto(t){let e="";const o=bc.getDispositivosComando(this.dispositivosEmenda),i=o.filter((t=>t.situacao instanceof Ml&&t.situacao.tipoEmenda===Ga.EMENDA_ARTIGO_ONDE_COUBER));if(i.length){if(i.length<o.length)throw new Error("Adio de artigos onde couber e outras alteraes na mesma emenda.");return new Mc(i).getTexto(t)}const n=[],r=o.filter((t=>t.situacao.descricaoSituacao===Fr.DISPOSITIVO_SUPRIMIDO));r.length&&n.push(new Nc(r));const s=o.filter((t=>t.situacao.descricaoSituacao===Fr.DISPOSITIVO_MODIFICADO));s.length&&n.push(new Sc(s));const a=o.filter((t=>t.situacao.descricaoSituacao===Fr.DISPOSITIVO_ADICIONADO));a.length&&n.push(new Ic(a)),n.sort(qc.compare);let l=0;const u=n.length-1;return n.forEach((o=>{e+=o.getTexto(t,0===l,l===u),l++})),e}}class Hc{constructor(t,e,o){this.classificacao=t,this.urn=e,this.articulacao=o}getEmenda(){const t=new kc;return t.classificacao=this.classificacao,this.preencheDispositivos(t),t.comandoEmenda=new zc(this.urn,this.articulacao).getComandoEmenda(),t}preencheDispositivos(t){const e=bc.getDispositivosNaoOriginais(this.articulacao),o=e.filter((t=>t.situacao.descricaoSituacao===Fr.DISPOSITIVO_SUPRIMIDO));if(o.length)for(const e of o){const o=new Cc;o.id=e.id,o.rotulo=e.rotulo,t.dispositivosSuprimidos.push(o)}const i=e.filter((t=>t.situacao.descricaoSituacao===Fr.DISPOSITIVO_MODIFICADO));if(i.length)for(const e of i){const o=new Rc;if(wr(e)){const t=e.caput;o.id=t.id,o.texto=t.texto}else o.id=e.id,o.texto=e.texto;o.rotulo=e.rotulo,t.dispositivosModificados.push(o)}const n=e.filter((t=>t.situacao.descricaoSituacao===Fr.DISPOSITIVO_ADICIONADO));if(n.length)for(const e of n){const o=this.criaDispositivoEmendaAdicionado(e);if(t.dispositivosAdicionados.push(o),wr(e)){const o=this.criaDispositivoEmendaAdicionado(e.caput);t.dispositivosAdicionados.push(o)}}}criaDispositivoEmendaAdicionado(t){var e,o;const i=new Dc;if(t.id||(t.id=Sa(t)),i.id=t.id,Er(t)||ys(t)||Nr(t)||(i.rotulo=t.rotulo),wr(t)||ys(t)||(i.texto=t.texto),Er(t)||ys(t))i.idPai=null===(e=t.pai)||void 0===e?void 0:e.id;else{const e=bc.getFilhosEstiloLexML(t.pai);t!==e[0]?i.idIrmaoAnterior=e[e.indexOf(t)-1].id:Ss(t.pai)||(i.idPai=null===(o=t.pai)||void 0===o?void 0:o.id)}if(ys(t)){const e=t.base;e&&(i.urnNormaAlterada=e)}return!Nr(t)&&i.texto&&i.texto.indexOf(Ps)>=0&&(i.textoOmitido=!0),i.rotulo&&i.rotulo.indexOf("")>=0&&(i.abreAspas=!0),i.texto&&i.texto.indexOf(" (NR)")>=0&&(i.fechaAspas=!0),i}}const $c=(t,e)=>{var o;let i;if(i=kr(t)?e.lXhier=[]:e.lXcontainersOmissis=[],wr(t)){const e=Gc(t.caput);Kc(t,e.value),i.push(e),Qc(null===(o=t.filhos)||void 0===o?void 0:o.filter((t=>!Er(t.pai))),i),$c(t.caput,e.value)}else Qc(t.filhos,i);return i},Kc=(t,e)=>{var o,i,n;t.hasAlteracao()&&(e.alteracao={TYPE_NAME:"br_gov_lexml__1.Alteracao",base:"",id:"",content:[]},e.alteracao.base=null!==(i=null===(o=t.alteracoes)||void 0===o?void 0:o.base)&&void 0!==i?i:"",e.alteracao.id=(t=>{const e=[];return Aa(t,e),e.join("_")+"_alt1"})(t.caput),null===(n=t.alteracoes.filhos)||void 0===n||n.forEach((t=>{const o=Gc(t);e.alteracao.content.push(o),$c(t,o.value)})))},Qc=(t,e)=>{null==t||t.forEach((t=>{const o=Gc(t);e.push(o),$c(t,o.value)}))},Gc=t=>{const e={name:{namespaceURI:"http://www.lexml.gov.br/1.0",localPart:t.tipo,prefix:"",key:`{http://www.lexml.gov.br/1.0}${t.tipo}`,string:`{http://www.lexml.gov.br/1.0}${t.tipo}`},value:{TYPE_NAME:"br_gov_lexml__1.DispositivoType"}};return Wc(t,e.value),e},Wc=(t,e)=>{e.href=Er(t)?_a(t.pai)+"_"+_a(t):_a(t),e.id=Sa(t),t.rotulo&&/^["].*/.test(t.rotulo)?(e.abreAspas="s",e.rotulo=t.rotulo.substring(1)):Er(t)||Nr(t)||(e.rotulo=t.rotulo),Er(t)&&/.*(NR)/.test(t.texto)&&(e.fechaAspas="s",e.notaAlteracao="NR"),kr(t)?e.nomeAgrupador={TYPE_NAME:"br_gov_lexml__1.GenInline",content:Zc(t)}:wr(t)||(t.texto===Ps?e.textoOmitido="s":e.p=[{TYPE_NAME:"br_gov_lexml__1.GenInline",content:Zc(t)}])},Zc=t=>{const e=/<a[^>]+href="(.*?)"[^>]*>(.*?)<\/a>/gi,o=[],i=t.texto.match(e);if(i)t.texto.startsWith(i[0])||o.push(t.texto.substring(0,t.texto.indexOf(i[0])));else{const e=t.texto.indexOf(" (NR)");o.push(t.texto.substring(0,-1===e?void 0:e))}return null==i||i.forEach(((n,r)=>{var s,a;const l=n.match(e)?n:"";o.push(Xc(null!=l?l:""));const u=(null===(s=t.texto)||void 0===s?void 0:s.indexOf(n))+n.length;if(u<t.texto.length-1){const e=i[r+1]?t.texto.indexOf(i[r+1]):t.texto.length;o.push(null===(a=t.texto.substring(u,e))||void 0===a?void 0:a.replace(/strong>/gi,"b>").replace(/em>/gi,"i>"))}})),o},Xc=t=>{var e;const o=t.match(/href="(.*?)"*>/i),i=o&&o[1]?o[1]:"",n=t.match(/<a[^>]+href=".*?"[^>]*>(.*?)<\/a>/);return{name:{namespaceURI:"http://www.lexml.gov.br/1.0",localPart:"span",prefix:"",key:"{http://www.lexml.gov.br/1.0}span",string:"{http://www.lexml.gov.br/1.0}span"},value:{TYPE_NAME:"br_gov_lexml__1.GenInline",href:i,content:n&&n[1]?[null===(e=n[1])||void 0===e?void 0:e.trim()]:[""]}}};let Yc=!1;const Jc=(t,e=!1)=>{var o,i;if(Yc=e,!(null===(o=null==t?void 0:t.value)||void 0===o?void 0:o.projetoNorma))throw new Error("No se trata de um documento lexml vlido");return{classificacao:(null===(i=t.value)||void 0===i?void 0:i.projetoNorma.norma)?Ga.NORMA:Ga.PROJETO,tipo:Ys(ed(t)),...od(t),...id(t),...nd(t.value.projetoNorma.norma?t.value.projetoNorma.norma:t.value.projetoNorma.projeto)}},td=t=>null==t?void 0:t.replace(/[\n]/g,"").trim(),ed=t=>{var e,o,i;return null===(i=null===(o=null===(e=null==t?void 0:t.value)||void 0===e?void 0:e.metadado)||void 0===o?void 0:o.identificacao)||void 0===i?void 0:i.urn},od=t=>({urn:ed(t)}),id=t=>{var e,o,i,n,r,s,a,l,u,c,d,p,h,f,m,v;const g=null!==(s=null===(r=null===(n=null===(i=null===(o=null===(e=null==t?void 0:t.value)||void 0===e?void 0:e.projetoNorma)||void 0===o?void 0:o.norma)||void 0===i?void 0:i.parteInicial)||void 0===n?void 0:n.epigrafe)||void 0===r?void 0:r.content[0])&&void 0!==s?s:"",b=cd(null===(c=null===(u=null===(l=null===(a=null==t?void 0:t.value)||void 0===a?void 0:a.projetoNorma)||void 0===l?void 0:l.norma)||void 0===u?void 0:u.parteInicial)||void 0===c?void 0:c.ementa.content),y=null!==(v=null===(m=null===(f=null===(h=null===(p=null===(d=null==t?void 0:t.value)||void 0===d?void 0:d.projetoNorma)||void 0===p?void 0:p.norma)||void 0===h?void 0:h.parteInicial)||void 0===f?void 0:f.preambulo)||void 0===m?void 0:m.p[0].content[0])&&void 0!==v?v:"";return{epigrafe:td(g),ementa:td(b),preambulo:td(y)}},nd=t=>({articulacao:rd(t.articulacao)}),rd=t=>{const e=Nl();return sd(e,t.lXhier),e},sd=(t,e)=>{t&&e&&(null==e||e.forEach((e=>{var o,i,n,r,s,a,l,u,c,d,p,h,f,m,v,g;let b;const y=null===(o=e.value)||void 0===o?void 0:o.notaAlteracao,x=void 0!==(null===(i=e.value)||void 0===i?void 0:i.fechaAspas)?y?` (${y})`:" (NR)":"";"Caput"===(null===(n=e.name)||void 0===n?void 0:n.localPart)?("s"===(null===(r=e.value)||void 0===r?void 0:r.abreAspas)?(b.rotulo=""+(null===(s=e.value)||void 0===s?void 0:s.rotulo),b.cabecaAlteracao=!0,b.notaAlteracao=y):(null===(a=e.value)||void 0===a?void 0:a.rotulo)&&(b.rotulo=e.value.rotulo,b.createNumeroFromRotulo(b.rotulo)),t.texto=(null===(l=e.value)||void 0===l?void 0:l.textoOmitido)?Ps:td(ud(e))+x,t.caput.href=null===(u=e.value)||void 0===u?void 0:u.href,t.caput.id=null===(c=e.value)||void 0===c?void 0:c.id,ad(t,null===(d=e.value)||void 0===d?void 0:d.alteracao),sd(t.caput,null===(p=e.value)||void 0===p?void 0:p.lXcontainersOmissis)):"alteracao"===(null===(h=e.name)||void 0===h?void 0:h.localPart)?(ad(t,e),sd(t.caput,null===(f=e.value)||void 0===f?void 0:f.lXcontainersOmissis)):(b=ld(t,e),sd(b,null!==(v=null===(m=e.value)||void 0===m?void 0:m.lXhier)&&void 0!==v?v:null===(g=e.value)||void 0===g?void 0:g.lXcontainersOmissis))})))},ad=(t,e)=>{var o;e&&(kl(t),t.alteracoes.id=e.id,t.alteracoes.base=e.base,Yc&&(t.alteracoes.situacao=new Fl),null===(o=e.content)||void 0===o||o.forEach((e=>{var o,i,n,r;const s=ld(t.alteracoes,e);s.isDispositivoAlteracao=!0,s.rotulo=""+(null===(o=e.value)||void 0===o?void 0:o.rotulo),sd(s,null!==(n=null===(i=e.value)||void 0===i?void 0:i.lXhier)&&void 0!==n?n:null===(r=e.value)||void 0===r?void 0:r.lXcontainersOmissis)})))},ld=(t,e)=>{var o,i,n,r,s,a,l,u,c;const d=Sl(t,null===(o=e.name)||void 0===o?void 0:o.localPart),p=null===(i=e.value)||void 0===i?void 0:i.notaAlteracao,h=void 0!==(null===(n=e.value)||void 0===n?void 0:n.fechaAspas)?p?` (${p})`:" (NR)":"";return Nr(d)||("s"===(null===(r=e.value)||void 0===r?void 0:r.abreAspas)?(d.rotulo=""+(null===(s=e.value)||void 0===s?void 0:s.rotulo),d.cabecaAlteracao=!0,d.notaAlteracao=p):d.rotulo=null===(a=e.value)||void 0===a?void 0:a.rotulo,d.createNumeroFromRotulo(d.rotulo)),d.href=null===(l=e.value)||void 0===l?void 0:l.href,d.id=null===(u=e.value)||void 0===u?void 0:u.id,Yc&&(d.situacao=new Fl,wr(d)&&(d.caput.situacao=new Fl)),d.texto=(null===(c=e.value)||void 0===c?void 0:c.textoOmitido)?Ps:td(ud(e))+h,d},ud=t=>{var e,o,i,n,r;let s="";return(null===(e=t.value)||void 0===e?void 0:e.nomeAgrupador)?null!==(o=t.value.nomeAgrupador.content[0])&&void 0!==o?o:"":(null===(r=null===(n=null===(i=t.value)||void 0===i?void 0:i.p)||void 0===n?void 0:n.map((t=>t)))||void 0===r||r.map((t=>t.content)).forEach((t=>s+=cd(t))),s.replace(/b>/gi,"strong>").replace(/i>/gi,"em>"))},cd=t=>{let e="";return null==t||t.forEach((t=>{var o;t.value?e+=`<a href="${(o=t.value).href}"> ${o.content[0]} </a>`:e+=t})),e},dd={name:{namespaceURI:"http://www.lexml.gov.br/1.0",localPart:"LexML",prefix:"",key:"{http://www.lexml.gov.br/1.0}LexML",string:"{http://www.lexml.gov.br/1.0}LexML"},value:{TYPE_NAME:"br_gov_lexml__1.LexML",metadado:{TYPE_NAME:"br_gov_lexml__1.Metadado",identificacao:{TYPE_NAME:"br_gov_lexml__1.Identificacao",urn:""}},projetoNorma:{TYPE_NAME:"br_gov_lexml__1.ProjetoNorma",norma:{TYPE_NAME:"br_gov_lexml__1.HierarchicalStructure",parteInicial:{TYPE_NAME:"br_gov_lexml__1.ParteInicial",epigrafe:{TYPE_NAME:"br_gov_lexml__1.GenInline",id:"epigrafe",content:[""]},ementa:{TYPE_NAME:"br_gov_lexml__1.GenInline",id:"ementa",content:[""]},preambulo:{TYPE_NAME:"br_gov_lexml__1.TextoType",id:"preambulo",p:[{TYPE_NAME:"br_gov_lexml__1.GenInline",content:[""]}]}},articulacao:{TYPE_NAME:"br_gov_lexml__1.Articulacao",lXhier:[{name:{namespaceURI:"http://www.lexml.gov.br/1.0",localPart:"Artigo",prefix:"",key:"{http://www.lexml.gov.br/1.0}Artigo",string:"{http://www.lexml.gov.br/1.0}Artigo"},value:{TYPE_NAME:"br_gov_lexml__1.DispositivoType",id:"art1",rotulo:"Art. 1",lXcontainersOmissis:[{name:{namespaceURI:"http://www.lexml.gov.br/1.0",localPart:"Caput",prefix:"",key:"{http://www.lexml.gov.br/1.0}Caput",string:"{http://www.lexml.gov.br/1.0}Caput"},value:{TYPE_NAME:"br_gov_lexml__1.DispositivoType",id:"art1_cpt",p:[{TYPE_NAME:"br_gov_lexml__1.GenInline",content:[""]}]}}]}}]}}}}};let pd=class extends(nn(Au)(on)){constructor(){super(...arguments),this.modo="",this.projetoNorma={},this.emenda={}}createRenderRoot(){return this}getEmenda(){const t=this.modo;if(t!==Ga.EMENDA&&t!==Ga.EMENDA_ARTIGO_ONDE_COUBER)return;const e=this.projetoNorma.value.metadado.identificacao.urn,o=Au.getState().elementoReducer.articulacao;return new Hc(t,e,o).getEmenda()}getComandoEmenda(){const t=this.projetoNorma.value.metadado.identificacao.urn,e=Au.getState().elementoReducer.articulacao;return new zc(t,e).getComandoEmenda()}getProjetoAtualizado(){const t={...this.projetoNorma},e=(o=Au.getState().elementoReducer.articulacao,{TYPE_NAME:"br_gov_lexml__1.Articulacao",lXhier:$c(o,{articulacao:{}})});var o;return t.value.projetoNorma[t.value.projetoNorma.norma?"norma":"projeto"].articulacao.lXhier=e.lXhier,t}update(t){(this.hasChangedProjetoNorma(t)||this.hasChangedModo(t))&&this.loadProjetoNorma(),this.hasChangedEmenda(t)&&Object.keys(this.emenda).length>0&&this.loadEmenda(),super.update(t)}hasChangedProjetoNorma(t){return t.has("projetoNorma")&&void 0!==t.get("projetoNorma")}hasChangedModo(t){return t.has("modo")&&void 0!==t.get("modo")}hasChangedEmenda(t){return t.has("emenda")&&void 0!==t.get("emenda")}loadProjetoNorma(){var t;let e;if(this.projetoNorma&&this.projetoNorma.value||(this.projetoNorma=dd),this.modo===Ga.EMENDA_ARTIGO_ONDE_COUBER){const o=null!==(t=ed(this.projetoNorma))&&void 0!==t?t:"";e=Jc(dd,!0),e.urn=o;const i=e.articulacao.artigos[0];i.rotulo="Art.",i.numero="1",i.id="art1";const n=new Ml;n.tipoEmenda=Ga.EMENDA_ARTIGO_ONDE_COUBER,i.situacao=n}else e=Jc(this.projetoNorma,this.modo===Ga.EMENDA);var o;Au.dispatch((o=e.articulacao,{type:"ABRIR_ARTICULACAO",classificacao:this.modo,articulacao:o}))}loadEmenda(){this.emenda&&setTimeout((()=>{Au.dispatch(In.execute({dispositivosModificados:this.emenda.dispositivosModificados,dispositivosSuprimidos:this.emenda.dispositivosSuprimidos,dispositivosAdicionados:this.emenda.dispositivosAdicionados}))}),1e3)}render(){return ji`
      <style>
        #gtx-trans {
          display: none;
        }

        lexml-eta-articulacao {
          display: block;
          height: 100%;
        }

        lexml-eta-articulacao:focus {
          outline: 0;
          border: 0px solid #f1f1f1;
          -webkit-box-shadow: 0px;
          box-shadow: none;
        }
      </style>

      <lexml-eta-articulacao></lexml-eta-articulacao>
    `}};ti([Zi({type:String})],pd.prototype,"modo",void 0),ti([Zi({type:Object})],pd.prototype,"projetoNorma",void 0),ti([Zi({type:Object})],pd.prototype,"emenda",void 0),pd=ti([Gi("lexml-eta")],pd);export{Su as ArticulacaoComponent,Pu as ComandoEmendaComponent,mc as EditorComponent,vc as ElementoComponent,gc as HelpComponent,pd as LexmlEtaComponent};
//# sourceMappingURL=index.min.js.map
