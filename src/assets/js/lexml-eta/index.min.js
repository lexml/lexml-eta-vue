const t=Symbol("defaultState"),e=Symbol("delegatesFocus"),o=Symbol("firstRender"),i=Symbol("focusTarget"),n=Symbol("hasDynamicTemplate"),r=Symbol("ids"),s=Symbol("nativeInternals"),a=Symbol("raiseChangeEvents"),l=Symbol("render"),u=Symbol("renderChanges"),c=Symbol("rendered"),d=Symbol("rendering"),p=Symbol("setState"),h=Symbol("shadowRoot"),f=Symbol("shadowRootMode"),m=Symbol("state"),v=Symbol("stateEffects"),g=Symbol("template"),b=Symbol("mousedownListener");function y(t,e){return"boolean"==typeof e?e:"string"==typeof e&&(""===e||t.toLowerCase()===e.toLowerCase())}function x(t){for(const e of q(t)){const t=e[i]||e,o=t;if(t instanceof HTMLElement&&t.tabIndex>=0&&!o.disabled&&!(t instanceof HTMLSlotElement))return t}return null}function w(t,e){let o=e;for(;o;){const e=o.assignedSlot||o.parentNode||o.host;if(e===t)return!0;o=e}return!1}function E(t){const e=N(t,(t=>t instanceof HTMLElement&&t.matches('a[href],area[href],button:not([disabled]),details,iframe,input:not([disabled]),select:not([disabled]),textarea:not([disabled]),[contentEditable="true"],[tabindex]')&&t.tabIndex>=0)),{value:o}=e.next();return o instanceof HTMLElement?o:null}function O(t,e){t[b]&&t.removeEventListener("mousedown",t[b]),e&&(t[b]=t=>{if(0!==t.button)return;const o=x(e[i]||e);o&&(o.focus(),t.preventDefault())},t.addEventListener("mousedown",t[b]))}function A(t,e){return Array.prototype.findIndex.call(t,(t=>t===e||w(t,e)))}function _(t,e){const o=e.composedPath()[0];return t===o||w(t,o)}function*q(t){t&&(yield t,yield*function*(t){let e=t;for(;e=e instanceof HTMLElement&&e.assignedSlot?e.assignedSlot:e instanceof ShadowRoot?e.host:e.parentNode,e;)yield e}(t))}function I(t,e,o){t.toggleAttribute(e,o),t[s]&&t[s].states&&t[s].states.toggle(e,o)}const S={checked:!0,defer:!0,disabled:!0,hidden:!0,ismap:!0,multiple:!0,noresize:!0,readonly:!0,selected:!0};function k(t,e){const o=[...e],i=t.childNodes.length,n=o.length,r=Math.max(i,n);for(let e=0;e<r;e++){const r=t.childNodes[e],s=o[e];e>=i?t.append(s):e>=n?t.removeChild(t.childNodes[n]):r!==s&&(o.indexOf(r,e)>=e?t.insertBefore(s,r):t.replaceChild(s,r))}}function*N(t,e){let o;if(e(t)&&(yield t),t instanceof HTMLElement&&t.shadowRoot)o=t.shadowRoot.children;else{const e=t instanceof HTMLSlotElement?t.assignedNodes({flatten:!0}):[];o=e.length>0?e:t.childNodes}if(o)for(let t=0;t<o.length;t++)yield*N(o[t],e)}const P={html:(t,...e)=>T.html(t,...e).content},T={html(t,...e){const o=document.createElement("template");return o.innerHTML=String.raw(t,...e),o}},C=new Map;function R(t){if("function"==typeof t){let e;try{e=new t}catch(o){if("TypeError"!==o.name)throw o;!function(t){let e;const o=/^[A-Za-z][A-Za-z0-9_$]*$/,i=t.name&&t.name.match(o);if(i){const t=/([A-Z])/g;e=i[0].replace(t,((t,e,o)=>o>0?`-${e}`:e)).toLowerCase()}else e="custom-element";let n,r=C.get(e)||0;for(;n=`${e}-${r}`,customElements.get(n);r++);customElements.define(n,t),C.set(e,r+1)}(t),e=new t}return e}return document.createElement(t)}function D(t,e){const o=t.parentNode;if(!o)throw"An element must have a parent before it can be substituted.";return(t instanceof HTMLElement||t instanceof SVGElement)&&(e instanceof HTMLElement||e instanceof SVGElement)&&(Array.prototype.forEach.call(t.attributes,(t=>{e.getAttribute(t.name)||"class"===t.name||"style"===t.name||e.setAttribute(t.name,t.value)})),Array.prototype.forEach.call(t.classList,(t=>{e.classList.add(t)})),Array.prototype.forEach.call(t.style,(o=>{e.style[o]||(e.style[o]=t.style[o])}))),e.append(...t.childNodes),o.replaceChild(e,t),e}function L(t,e){if("function"==typeof e&&t.constructor===e||"string"==typeof e&&t instanceof Element&&t.localName===e)return t;{const o=R(e);return D(t,o),o}}const j={tabindex:"tabIndex"},M={tabIndex:"tabindex"};function F(t){if(t===HTMLElement)return[];const e=Object.getPrototypeOf(t.prototype).constructor;let o=e.observedAttributes;o||(o=F(e));const i=Object.getOwnPropertyNames(t.prototype).filter((e=>{const o=Object.getOwnPropertyDescriptor(t.prototype,e);return o&&"function"==typeof o.set})).map((t=>function(t){let e=M[t];if(!e){const o=/([A-Z])/g;e=t.replace(o,"-$1").toLowerCase(),M[t]=e}return e}(t))).filter((t=>o.indexOf(t)<0));return o.concat(i)}const U=Symbol("state"),$=Symbol("raiseChangeEventsInNextRender"),B=Symbol("changedSinceLastRender");function z(t,e){const o={};for(const r in e)i=e[r],n=t[r],(i instanceof Date&&n instanceof Date?i.getTime()===n.getTime():i===n)||(o[r]=!0);var i,n;return o}const V=new Map,H=Symbol("shadowIdProxy"),K=Symbol("proxyElement"),G={get(t,e){const o=t[K][h];return o&&"string"==typeof e?o.getElementById(e):null}};const Q=function(t){return class extends t{attributeChangedCallback(t,e,o){if(super.attributeChangedCallback&&super.attributeChangedCallback(t,e,o),o!==e&&!this[d]){const e=function(t){let e=j[t];if(!e){const o=/-([a-z])/g;e=t.replace(o,(t=>t[1].toUpperCase())),j[t]=e}return e}(t);if(e in this){const i=S[t]?y(t,o):o;this[e]=i}}}static get observedAttributes(){return F(this)}}}(function(e){class i extends e{constructor(){super(),this[o]=void 0,this[a]=!1,this[B]=null,this[p](this[t])}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this[u]()}get[t](){return super[t]||{}}[l](t){super[l]&&super[l](t)}[u](){void 0===this[o]&&(this[o]=!0);const t=this[B];if(this[o]||t){const e=this[a];this[a]=this[$],this[d]=!0,this[l](t),this[d]=!1,this[B]=null,this[c](t),this[o]=!1,this[a]=e,this[$]=e}}[c](t){super[c]&&super[c](t)}async[p](t){this[d]&&console.warn(`${this.constructor.name} called [setState] during rendering, which you should avoid.\nSee https://elix.org/documentation/ReactiveMixin.`);const{state:e,changed:i}=function(t,e){const o=Object.assign({},t[U]),i={};let n=e;for(;;){const e=z(o,n);if(0===Object.keys(e).length)break;Object.assign(o,n),Object.assign(i,e),n=t[v](o,e)}return{state:o,changed:i}}(this,t);if(this[U]&&0===Object.keys(i).length)return;Object.freeze(e),this[U]=e,this[a]&&(this[$]=!0);const n=void 0===this[o]||null!==this[B];this[B]=Object.assign(this[B]||{},i);this.isConnected&&!n&&(await Promise.resolve(),this[u]())}get[m](){return this[U]}[v](t,e){return super[v]?super[v](t,e):{}}}return"true"===new URLSearchParams(location.search).get("elixdebug")&&Object.defineProperty(i.prototype,"state",{get(){return this[m]}}),i}(function(t){return class extends t{get[r](){if(!this[H]){const t={[K]:this};this[H]=new Proxy(t,G)}return this[H]}[l](t){if(super[l]&&super[l](t),!this[h]){const t=function(t){let e=t[n]?void 0:V.get(t.constructor);if(void 0===e){if(e=t[g],e&&!(e instanceof HTMLTemplateElement))throw`Warning: the [template] property for ${t.constructor.name} must return an HTMLTemplateElement.`;t[n]||V.set(t.constructor,e||null)}return e}(this);if(t){const o=this.attachShadow({delegatesFocus:this[e],mode:this[f]}),i=document.importNode(t.content,!0);o.append(i),this[h]=o}else this[h]=null}}get[f](){return"open"}}}(HTMLElement))),W=Symbol("checkSize"),Z=Symbol("closestAvailableItemIndex"),X=Symbol("contentSlot"),Y=t,J=Symbol("defaultTabIndex"),tt=e,et=Symbol("effectEndTarget"),ot=o,it=i,nt=Symbol("getItemText"),rt=Symbol("goDown"),st=Symbol("goEnd"),at=Symbol("goFirst"),lt=Symbol("goLast"),ut=Symbol("goLeft"),ct=Symbol("goNext"),dt=Symbol("goPrevious"),pt=Symbol("goRight"),ht=Symbol("goStart"),ft=Symbol("goToItemWithPrefix"),mt=Symbol("goUp"),vt=n,gt=r,bt=Symbol("inputDelegate"),yt=Symbol("itemsDelegate"),xt=Symbol("keydown"),wt=Symbol("matchText"),Et=Symbol("mouseenter"),Ot=Symbol("mouseleave"),At=s,_t=a,qt=l,It=u,St=Symbol("renderDataToElement"),kt=c,Nt=d,Pt=Symbol("scrollTarget"),Tt=p,Ct=h,Rt=f,Dt=Symbol("startEffect"),Lt=m,jt=v,Mt=Symbol("swipeDown"),Ft=Symbol("swipeDownComplete"),Ut=Symbol("swipeLeft"),$t=Symbol("swipeLeftTransitionEnd"),Bt=Symbol("swipeRight"),zt=Symbol("swipeRightTransitionEnd"),Vt=Symbol("swipeUp"),Ht=Symbol("swipeUpComplete"),Kt=Symbol("swipeStart"),Gt=Symbol("swipeTarget"),Qt=Symbol("tap"),Wt=g,Zt=Symbol("toggleSelectedFlag");"true"===new URLSearchParams(location.search).get("elixdebug")&&(window.elix={internal:{checkSize:W,closestAvailableItemIndex:Z,contentSlot:X,defaultState:Y,defaultTabIndex:J,delegatesFocus:tt,effectEndTarget:et,firstRender:ot,focusTarget:it,getItemText:nt,goDown:rt,goEnd:st,goFirst:at,goLast:lt,goLeft:ut,goNext:ct,goPrevious:dt,goRight:pt,goStart:ht,goToItemWithPrefix:ft,goUp:mt,hasDynamicTemplate:vt,ids:gt,inputDelegate:bt,itemsDelegate:yt,keydown:xt,mouseenter:Et,mouseleave:Ot,nativeInternals:At,event:event,raiseChangeEvents:_t,render:qt,renderChanges:It,renderDataToElement:St,rendered:kt,rendering:Nt,scrollTarget:Pt,setState:Tt,shadowRoot:Ct,shadowRootMode:Rt,startEffect:Dt,state:Lt,stateEffects:jt,swipeDown:Mt,swipeDownComplete:Ft,swipeLeft:Ut,swipeLeftTransitionEnd:$t,swipeRight:Bt,swipeRightTransitionEnd:zt,swipeUp:Vt,swipeUpComplete:Ht,swipeStart:Kt,swipeTarget:Gt,tap:Qt,template:Wt,toggleSelectedFlag:Zt}});const Xt=Symbol("previousBodyStyleOverflow"),Yt=Symbol("previousDocumentMarginRight");const Jt=Symbol("wrap"),te=Symbol("wrappingFocus");function ee(t){return class extends t{[xt](t){const e=E(this[Ct]);if(e){const o=document.activeElement&&(document.activeElement===e||document.activeElement.contains(e)),i=this[Ct].activeElement,n=i&&(i===e||w(i,e));(o||n)&&"Tab"===t.key&&t.shiftKey&&(this[te]=!0,this[gt].focusCatcher.focus(),this[te]=!1)}return super[xt]&&super[xt](t)||!1}[qt](t){super[qt]&&super[qt](t),this[ot]&&this[gt].focusCatcher.addEventListener("focus",(()=>{if(!this[te]){const t=E(this[Ct]);t&&t.focus()}}))}[Jt](t){const e=P.html`
        <style>
          #focusCapture {
            display: flex;
            height: 100%;
            overflow: hidden;
            width: 100%;
          }

          #focusCaptureContainer {
            align-items: center;
            display: flex;
            flex: 1;
            flex-direction: column;
            justify-content: center;
            position: relative;
          }
        </style>
        <div id="focusCapture">
          <div id="focusCaptureContainer"></div>
          <div id="focusCatcher" tabindex="0"></div>
        </div>
      `,o=e.getElementById("focusCaptureContainer");o&&(t.replaceWith(e),o.append(t))}}}function oe(t){return class extends t{constructor(){super(),this.addEventListener("keydown",(async t=>{this[_t]=!0,this[Lt].focusVisible||this[Tt]({focusVisible:!0});this[xt](t)&&(t.preventDefault(),t.stopImmediatePropagation()),await Promise.resolve(),this[_t]=!1}))}attributeChangedCallback(t,e,o){if("tabindex"===t){let t;null===o?t=-1:(t=Number(o),isNaN(t)&&(t=this[J]?this[J]:0)),this.tabIndex=t}else super.attributeChangedCallback(t,e,o)}get[Y](){const t=this[tt]?-1:0;return Object.assign(super[Y]||{},{tabIndex:t})}[xt](t){return!!super[xt]&&super[xt](t)}[qt](t){super[qt]&&super[qt](t),t.tabIndex&&(this.tabIndex=this[Lt].tabIndex)}get tabIndex(){return super.tabIndex}set tabIndex(t){super.tabIndex!==t&&(super.tabIndex=t),this[Nt]||this[Tt]({tabIndex:t})}}}ee.wrap=Jt;const ie=function(t){return class extends t{get[Y](){return Object.assign(super[Y]||{},{role:null})}[qt](t){if(super[qt]&&super[qt](t),t.role){const{role:t}=this[Lt];t?this.setAttribute("role",t):this.removeAttribute("role")}}get role(){return super.role}set role(t){const e=String(t);super.role=e,this[Nt]||this[Tt]({s:e})}}}(Q);class ne extends ie{get[Y](){return Object.assign(super[Y],{role:"none"})}get[Wt](){return T.html`
      <style>
        :host {
          display: inline-block;
          height: 100%;
          left: 0;
          position: fixed;
          top: 0;
          touch-action: manipulation;
          width: 100%;
        }
      </style>
      <slot></slot>
    `}}class re extends ne{constructor(){super(),"PointerEvent"in window||this.addEventListener("touchmove",(t=>{1===t.touches.length&&t.preventDefault()}))}}const se=Symbol("closePromise"),ae=Symbol("closeResolve");function le(t){return class extends t{attributeChangedCallback(t,e,o){if("opened"===t){const e=y(t,o);this.opened!==e&&(this.opened=e)}else super.attributeChangedCallback(t,e,o)}async close(t){super.close&&await super.close(),this[Tt]({closeResult:t}),await this.toggle(!1)}get closed(){return this[Lt]&&!this[Lt].opened}get closeFinished(){return this[Lt].closeFinished}get closeResult(){return this[Lt].closeResult}get[Y](){const t={closeResult:null,opened:!1};return this[Dt]&&Object.assign(t,{closeFinished:!0,effect:"close",effectPhase:"after",openCloseEffects:!0}),Object.assign(super[Y]||{},t)}async open(){super.open&&await super.open(),this[Tt]({closeResult:void 0}),await this.toggle(!0)}get opened(){return this[Lt]&&this[Lt].opened}set opened(t){this[Tt]({closeResult:void 0}),this.toggle(t)}[qt](t){if(super[qt](t),t.opened){const{opened:t}=this[Lt];I(this,"opened",t)}if(t.closeFinished){const{closeFinished:t}=this[Lt];I(this,"closed",t)}}[kt](t){if(super[kt]&&super[kt](t),t.opened&&this[_t]){const t=new CustomEvent("opened-changed",{bubbles:!0,detail:{closeResult:this[Lt].closeResult,opened:this[Lt].opened}});this.dispatchEvent(t);const e=new CustomEvent("openedchange",{bubbles:!0,detail:{closeResult:this[Lt].closeResult,opened:this[Lt].opened}});if(this.dispatchEvent(e),this[Lt].opened){const t=new CustomEvent("opened",{bubbles:!0});this.dispatchEvent(t);const e=new CustomEvent("open",{bubbles:!0});this.dispatchEvent(e)}else{const t=new CustomEvent("closed",{bubbles:!0,detail:{closeResult:this[Lt].closeResult}});this.dispatchEvent(t);const e=new CustomEvent("close",{bubbles:!0,detail:{closeResult:this[Lt].closeResult}});this.dispatchEvent(e)}}const e=this[ae];this.closeFinished&&e&&(this[ae]=null,this[se]=null,e(this[Lt].closeResult))}[jt](t,e){const o=super[jt]?super[jt](t,e):{};if(e.openCloseEffects||e.effect||e.effectPhase||e.opened){const{effect:e,effectPhase:i,openCloseEffects:n,opened:r}=t,s=n?"close"===e&&"after"===i:!r;Object.assign(o,{closeFinished:s})}return o}async toggle(t=!this.opened){super.toggle&&await super.toggle(t);if(t!==this[Lt].opened){const e={opened:t};this[Lt].openCloseEffects&&(e.effect=t?"open":"close","after"===this[Lt].effectPhase&&(e.effectPhase="before")),await this[Tt](e)}}whenClosed(){return this[se]||(this[se]=new Promise((t=>{this[ae]=t}))),this[se]}}}class ue extends Q{get[Wt](){return T.html`
      <style>
        :host {
          display: inline-block;
          position: relative;
        }
      </style>
      <slot></slot>
    `}}const ce=Symbol("appendedToDocument"),de=Symbol("assignedZIndex"),pe=Symbol("restoreFocusToElement");function he(t){const e=function(){const t=document.body.querySelectorAll("*"),e=Array.from(t,(t=>{const e=getComputedStyle(t);let o=0;if("static"!==e.position&&"auto"!==e.zIndex){const t=e.zIndex?parseInt(e.zIndex):0;o=isNaN(t)?0:t}return o}));return Math.max(...e)}()+1;t[de]=e,t.style.zIndex=e.toString()}function fe(t){const e=getComputedStyle(t).zIndex,o=t.style.zIndex,i=!isNaN(parseInt(o));if("auto"===e)return i;if("0"===e&&!i){const e=t.assignedSlot||(t instanceof ShadowRoot?t.host:t.parentNode);if(!(e instanceof HTMLElement))return!0;if(!fe(e))return!1}return!0}function me(t){return class extends t{get[X](){const t=this[Ct]&&this[Ct].querySelector("slot:not([name])");return this[Ct]&&t||console.warn(`SlotContentMixin expects ${this.constructor.name} to define a shadow tree that includes a default (unnamed) slot.\nSee https://elix.org/documentation/SlotContentMixin.`),t}get[Y](){return Object.assign(super[Y]||{},{content:null})}[kt](t){if(super[kt]&&super[kt](t),this[ot]){const t=this[X];t&&t.addEventListener("slotchange",(async()=>{this[_t]=!0;const e=t.assignedNodes({flatten:!0});Object.freeze(e),this[Tt]({content:e}),await Promise.resolve(),this[_t]=!1}))}}}}const ve=le(function(t){return class extends t{get autoFocus(){return this[Lt].autoFocus}set autoFocus(t){this[Tt]({autoFocus:t})}get[Y](){return Object.assign(super[Y]||{},{autoFocus:!0,persistent:!1})}async open(){this[Lt].persistent||this.isConnected||(this[ce]=!0,document.body.append(this)),super.open&&await super.open()}[qt](t){if(super[qt]&&super[qt](t),this[ot]&&this.addEventListener("blur",(t=>{const e=t.relatedTarget||document.activeElement;if(e instanceof HTMLElement){w(this,e)||(this.opened?this[pe]=e:(e.focus(),this[pe]=null))}})),(t.effectPhase||t.opened||t.persistent)&&!this[Lt].persistent){(void 0===this.closeFinished?this.closed:this.closeFinished)?this[de]&&(this.style.zIndex="",this[de]=null):this[de]?this.style.zIndex=this[de]:fe(this)||he(this)}}[kt](t){if(super[kt]&&super[kt](t),this[ot]&&this[Lt].persistent&&!fe(this)&&he(this),t.opened&&this[Lt].autoFocus)if(this[Lt].opened){this[pe]||document.activeElement===document.body||(this[pe]=document.activeElement);const t=E(this);t&&t.focus()}else this[pe]&&(this[pe].focus(),this[pe]=null);!this[ot]&&!this[Lt].persistent&&this.closeFinished&&this[ce]&&(this[ce]=!1,this.parentNode&&this.parentNode.removeChild(this))}get[Wt](){const t=super[Wt]||T.html``;return t.content.append(P.html`
        <style>
          :host([closed]) {
            display: none;
          }
        </style>
      `),t}}}(me(Q)));class ge extends ve{get backdrop(){return this[gt]&&this[gt].backdrop}get backdropPartType(){return this[Lt].backdropPartType}set backdropPartType(t){this[Tt]({backdropPartType:t})}get[Y](){return Object.assign(super[Y],{backdropPartType:ne,framePartType:ue})}get frame(){return this[gt].frame}get framePartType(){return this[Lt].framePartType}set framePartType(t){this[Tt]({framePartType:t})}[qt](t){super[qt](t),be(this[Ct],this[Lt],t)}[kt](t){super[kt](t),t.opened&&this[Lt].content&&this[Lt].content.forEach((t=>{t[W]&&t[W]()}))}get[Wt](){const t=super[Wt];return t.content.append(P.html`
      <style>
        :host {
          display: inline-grid;
          /* Constrain content if overlay's height is constrained. */
          grid-template: minmax(0, 1fr) / minmax(0, 1fr);
          max-height: 100vh;
          max-width: 100vw;
          outline: none;
          position: fixed;
          -webkit-tap-highlight-color: transparent;
        }

        [part~="frame"] {
          box-sizing: border-box;
          display: grid;
          overscroll-behavior: contain;
          pointer-events: initial;
          position: relative;
        }

        #frameContent {
          display: grid;
          grid-template: minmax(0, 1fr) / minmax(0, 1fr);
          overflow: hidden;
        }
      </style>
      <div id="backdrop" part="backdrop" tabindex="-1"></div>
      <div id="frame" part="frame" role="none">
        <div id="frameContent">
          <slot></slot>
        </div>
      </div>
    `),be(t.content,this[Lt]),t}}function be(t,e,o){if(!o||o.backdropPartType){const{backdropPartType:o}=e,i=t.getElementById("backdrop");i&&L(i,o)}if(!o||o.framePartType){const{framePartType:o}=e,i=t.getElementById("frame");i&&L(i,o)}}const ye=function(t){return class extends t{get[Y](){return Object.assign(super[Y]||{},{role:"dialog"})}[xt](t){let e=!1;switch(t.key){case"Escape":this.close({canceled:"Escape"}),e=!0}return e||super[xt]&&super[xt](t)||!1}[qt](t){if(super[qt]&&super[qt](t),t.opened)if(this[Lt].opened&&document.documentElement){const t=document.documentElement.clientWidth,e=window.innerWidth-t;this[Xt]=document.body.style.overflow,this[Yt]=e>0?document.documentElement.style.marginRight:null,document.body.style.overflow="hidden",e>0&&(document.documentElement.style.marginRight=`${e}px`)}else null!=this[Xt]&&(document.body.style.overflow=this[Xt],this[Xt]=null),null!=this[Yt]&&(document.documentElement.style.marginRight=this[Yt],this[Yt]=null);if(t.role){const{role:t}=this[Lt];this.setAttribute("role",t)}}get role(){return super.role}set role(t){super.role=t,this[Nt]||this[Tt]({role:t})}}}(ee(oe(ge)));class xe extends ye{get[Y](){return Object.assign(super[Y],{backdropPartType:re,tabIndex:-1})}get[Wt](){const t=super[Wt],e=t.content.querySelector("#frame");return this[ee.wrap](e),t.content.append(P.html`
        <style>
          :host {
            height: 100%;
            left: 0;
            pointer-events: initial;
            top: 0;
            width: 100%;
          }
        </style>
      `),t}}class we extends xe{get choiceButtons(){return this[Lt].choiceButtons}get choiceButtonPartType(){return this[Lt].choiceButtonPartType}set choiceButtonPartType(t){this[Tt]({choiceButtonPartType:t})}get choices(){return this[Lt].choices}set choices(t){this[Tt]({choices:t})}get[Y](){return Object.assign(super[Y],{choiceButtonPartType:"button",choiceButtons:[],choices:["OK"]})}[xt](t){let e=!1;const o=1===t.key.length&&t.key.toLowerCase();if(o){const t=this.choices.find((t=>t[0].toLowerCase()===o));t&&(this.close({choice:t}),e=!0)}return e||super[xt]&&super[xt](t)||!1}[qt](t){super[qt](t),this[ot]&&this[gt].choiceButtonContainer.addEventListener("click",(async t=>{const e=t.target;if(e instanceof HTMLElement){const t=e.textContent;this[_t]=!0,await this.close({choice:t}),this[_t]=!1}})),t.choiceButtons&&k(this[gt].choiceButtonContainer,this[Lt].choiceButtons)}[jt](t,e){const o=super[jt](t,e);if(e.choiceButtonPartType||e.choices){const e=t.choices.map((e=>{const o=R(t.choiceButtonPartType);return"part"in o&&(o.part="choice-button"),o.textContent=e,o}));Object.freeze(e),Object.assign(o,{choiceButtons:e})}return o}get[Wt](){const t=super[Wt],e=t.content.querySelector("slot:not([name])");return e&&e.replaceWith(P.html`
        <div id="alertDialogContent">
          <slot></slot>
          <div id="choiceButtonContainer" part="choice-button-container"></div>
        </div>
      `),t}}const Ee=document.createElement("div");Ee.attachShadow({mode:"open",delegatesFocus:!0});const Oe=Ee.shadowRoot.delegatesFocus;function Ae(t){return class extends t{get[Y](){return Object.assign(super[Y]||{},{composeFocus:!Oe})}[qt](t){super[qt]&&super[qt](t),this[ot]&&this.addEventListener("mousedown",(t=>{if(this[Lt].composeFocus&&0===t.button&&t.target instanceof Element){const e=x(t.target);e&&(e.focus(),t.preventDefault())}}))}}}function _e(t){return class extends t{get ariaLabel(){return this[Lt].ariaLabel}set ariaLabel(t){this[Lt].removingAriaAttribute||this[Tt]({ariaLabel:String(t)})}get ariaLabelledby(){return this[Lt].ariaLabelledby}set ariaLabelledby(t){this[Lt].removingAriaAttribute||this[Tt]({ariaLabelledby:String(t)})}get[Y](){return Object.assign(super[Y]||{},{ariaLabel:null,ariaLabelledby:null,inputLabel:null,removingAriaAttribute:!1})}[qt](t){if(super[qt]&&super[qt](t),this[ot]&&this.addEventListener("focus",(()=>{this[_t]=!0;const t=Ie(this,this[Lt]);this[Tt]({inputLabel:t}),this[_t]=!1})),t.inputLabel){const{inputLabel:t}=this[Lt];t?this[bt].setAttribute("aria-label",t):this[bt].removeAttribute("aria-label")}}[kt](t){if(super[kt]&&super[kt](t),this[ot]){(window.requestIdleCallback||setTimeout)((()=>{const t=Ie(this,this[Lt]);this[Tt]({inputLabel:t})}))}const{ariaLabel:e,ariaLabelledby:o}=this[Lt];t.ariaLabel&&!this[Lt].removingAriaAttribute&&this.getAttribute("aria-label")&&(this.setAttribute("delegated-label",e),this[Tt]({removingAriaAttribute:!0}),this.removeAttribute("aria-label")),t.ariaLabelledby&&!this[Lt].removingAriaAttribute&&this.getAttribute("aria-labelledby")&&(this.setAttribute("delegated-labelledby",o),this[Tt]({removingAriaAttribute:!0}),this.removeAttribute("aria-labelledby")),t.removingAriaAttribute&&this[Lt].removingAriaAttribute&&this[Tt]({removingAriaAttribute:!1})}[jt](t,e){const o=super[jt]?super[jt](t,e):{};if(e.ariaLabel&&t.ariaLabel||e.selectedText&&t.ariaLabelledby&&this.matches(":focus-within")){const e=Ie(this,t);Object.assign(o,{inputLabel:e})}return o}}}function qe(t){if("selectedText"in t)return t.selectedText;if("value"in t&&"options"in t){const e=t.value,o=t.options.find((t=>t.value===e));return o?o.innerText:""}return"value"in t?t.value:t.innerText}function Ie(t,e){const{ariaLabel:o,ariaLabelledby:i}=e,n=t.isConnected?t.getRootNode():null;let r=null;if(i&&n){r=i.split(" ").map((o=>{const i=n.getElementById(o);return i?i===t&&null!==e.value?e.selectedText:qe(i):""})).join(" ")}else if(o)r=o;else if(n){const e=t.id;if(e){const t=n.querySelector(`[for="${e}"]`);t instanceof HTMLElement&&(r=qe(t))}if(null===r){const e=t.closest("label");e&&(r=qe(e))}}return r&&(r=r.trim()),r}let Se=!1;const ke=Symbol("focusVisibleChangedListener");function Ne(t){return class extends t{constructor(){super(),this.addEventListener("focusout",(t=>{Promise.resolve().then((()=>{const e=t.relatedTarget||document.activeElement,o=this===e,i=w(this,e);!o&&!i&&(this[Tt]({focusVisible:!1}),document.removeEventListener("focusvisiblechange",this[ke]),this[ke]=null)}))})),this.addEventListener("focusin",(()=>{Promise.resolve().then((()=>{this[Lt].focusVisible!==Se&&this[Tt]({focusVisible:Se}),this[ke]||(this[ke]=()=>{this[Tt]({focusVisible:Se})},document.addEventListener("focusvisiblechange",this[ke]))}))}))}get[Y](){return Object.assign(super[Y]||{},{focusVisible:!1})}[qt](t){if(super[qt]&&super[qt](t),t.focusVisible){const{focusVisible:t}=this[Lt];this.toggleAttribute("focus-visible",t)}}get[Wt](){const t=super[Wt]||T.html``;return t.content.append(P.html`
        <style>
          :host {
            outline: none;
          }

          :host([focus-visible]:focus-within) {
            outline-color: Highlight; /* Firefox */
            outline-color: -webkit-focus-ring-color; /* All other browsers */
            outline-style: auto;
          }
        </style>
      `),t}}}function Pe(t){if(Se!==t){Se=t;const e=new CustomEvent("focus-visible-changed",{detail:{focusVisible:Se}});document.dispatchEvent(e);const o=new CustomEvent("focusvisiblechange",{detail:{focusVisible:Se}});document.dispatchEvent(o)}}function Te(t){return class extends t{get[tt](){return!0}focus(t){const e=this[it];e&&e.focus(t)}get[it](){return E(this[Ct])}}}window.addEventListener("keydown",(()=>{Pe(!0)}),{capture:!0}),window.addEventListener("mousedown",(()=>{Pe(!1)}),{capture:!0});const Ce=Symbol("extends"),Re=Symbol("delegatedPropertySetters"),De={a:!0,area:!0,button:!0,details:!0,iframe:!0,input:!0,select:!0,textarea:!0},Le={address:["scroll"],blockquote:["scroll"],caption:["scroll"],center:["scroll"],dd:["scroll"],dir:["scroll"],div:["scroll"],dl:["scroll"],dt:["scroll"],fieldset:["scroll"],form:["reset","scroll"],frame:["load"],h1:["scroll"],h2:["scroll"],h3:["scroll"],h4:["scroll"],h5:["scroll"],h6:["scroll"],iframe:["load"],img:["abort","error","load"],input:["abort","change","error","select","load"],li:["scroll"],link:["load"],menu:["scroll"],object:["error","scroll"],ol:["scroll"],p:["scroll"],script:["error","load"],select:["change","scroll"],tbody:["scroll"],tfoot:["scroll"],thead:["scroll"],textarea:["change","select","scroll"]},je=["click","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","wheel"],Me={abort:!0,change:!0,reset:!0},Fe=["address","article","aside","blockquote","canvas","dd","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tfoot","ul","video"],Ue=["accept-charset","autoplay","buffered","challenge","codebase","colspan","contenteditable","controls","crossorigin","datetime","dirname","for","formaction","http-equiv","icon","ismap","itemprop","keytype","language","loop","manifest","maxlength","minlength","muted","novalidate","preload","radiogroup","readonly","referrerpolicy","rowspan","scoped","usemap"],$e=Te(Q);class Be extends $e{constructor(){super();const t=this;!this[At]&&t.attachInternals&&(this[At]=t.attachInternals())}attributeChangedCallback(t,e,o){if(Ue.indexOf(t)>=0){const e=Object.assign({},this[Lt].innerAttributes,{[t]:o});this[Tt]({innerAttributes:e})}else super.attributeChangedCallback(t,e,o)}blur(){this.inner.blur()}get[Y](){return Object.assign(super[Y],{innerAttributes:{}})}get[J](){return De[this.extends]?0:-1}get extends(){return this.constructor[Ce]}get inner(){const t=this[gt]&&this[gt].inner;return t||console.warn("Attempted to get an inner standard element before it was instantiated."),t}static get observedAttributes(){return[...super.observedAttributes,...Ue]}[qt](t){super[qt](t);const e=this.inner;if(this[ot]){(Le[this.extends]||[]).forEach((t=>{e.addEventListener(t,(()=>{const e=new Event(t,{bubbles:Me[t]||!1});this.dispatchEvent(e)}))})),"disabled"in e&&je.forEach((t=>{this.addEventListener(t,(t=>{e.disabled&&t.stopImmediatePropagation()}))}))}if(t.tabIndex&&(e.tabIndex=this[Lt].tabIndex),t.innerAttributes){const{innerAttributes:t}=this[Lt];for(const o in t)ze(e,o,t[o])}this.constructor[Re].forEach((o=>{if(t[o]){const t=this[Lt][o];("selectionEnd"===o||"selectionStart"===o)&&null===t||(e[o]=t)}}))}[kt](t){if(super[kt](t),t.disabled){const{disabled:t}=this[Lt];void 0!==t&&I(this,"disabled",t)}}get[Wt](){const t=Fe.includes(this.extends)?"block":"inline-block",e=this.extends;return T.html`
      <style>
        :host {
          display: ${t}
        }
        
        [part~="inner"] {
          box-sizing: border-box;
          height: 100%;
          width: 100%;
        }
      </style>
      <${e} id="inner" part="inner ${e}">
        <slot></slot>
      </${e}>
    `}static wrap(t){class e extends Be{}e[Ce]=t;const o=document.createElement(t);return function(t,e){const o=Object.getOwnPropertyNames(e);t[Re]=[],o.forEach((o=>{const i=Object.getOwnPropertyDescriptor(e,o);if(!i)return;const n=function(t,e){if("function"==typeof e.value){if("constructor"!==t)return function(t,e){const o=function(...e){this.inner[t](...e)};return{configurable:e.configurable,enumerable:e.enumerable,value:o,writable:e.writable}}(t,e)}else if("function"==typeof e.get||"function"==typeof e.set)return function(t,e){const o={configurable:e.configurable,enumerable:e.enumerable};e.get&&(o.get=function(){return function(t,e){return t[Lt][e]||t[Ct]&&t.inner[e]}(this,t)});e.set&&(o.set=function(e){!function(t,e,o){t[Lt][e]!==o&&t[Tt]({[e]:o})}(this,t,e)});e.writable&&(o.writable=e.writable);return o}(t,e);return null}(o,i);n&&(Object.defineProperty(t.prototype,o,n),n.set&&t[Re].push(o))}))}(e,Object.getPrototypeOf(o)),e}}function ze(t,e,o){S[e]?"string"==typeof o?t.setAttribute(e,""):null===o&&t.removeAttribute(e):null!=o?t.setAttribute(e,o.toString()):t.removeAttribute(e)}const Ve=Ae(_e(Ne(Be.wrap("button"))));class He extends Ve{get[Y](){return Object.assign(super[Y],{role:"button"})}get[bt](){return this[gt].inner}[Qt](){const t=new MouseEvent("click",{bubbles:!0,cancelable:!0});this.dispatchEvent(t)}get[Wt](){const t=super[Wt];return t.content.append(P.html`
        <style>
          :host {
            display: inline-flex;
            outline: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
          }

          [part~="button"] {
            align-items: center;
            background: none;
            border: none;
            color: inherit;
            flex: 1;
            font: inherit;
            outline: none;
            padding: 0;
          }
        </style>
      `),t}}class Ke extends(function(t){return class extends t{get[Wt](){const t=super[Wt];return t.content.append(P.html`
        <style>
          :host([disabled]) ::slotted(*) {
            opacity: 0.5;
          }

          [part~="button"] {
            display: inline-flex;
            justify-content: center;
            margin: 0;
            position: relative;
          }
        </style>
      `),t}}}(He)){}class Ge extends Ke{get[Wt](){const t=super[Wt];return t.content.append(P.html`
        <style>
          [part~="button"] {
            background: #eee;
            border: 1px solid #ccc;
            padding: 0.25em 0.5em;
          }
        </style>
      `),t}}class Qe extends re{get[Wt](){const t=super[Wt];return t.content.append(P.html`
        <style>
          :host {
            background: rgba(0, 0, 0, 0.2);
          }
        </style>
      `),t}}class We extends ue{get[Wt](){const t=super[Wt];return t.content.append(P.html`
        <style>
          :host {
            background: white;
            border: 1px solid rgba(0, 0, 0, 0.2);
            box-shadow: 0 0px 10px rgba(0, 0, 0, 0.5);
            box-sizing: border-box;
          }
        </style>
      `),t}}function Ze(t){return class extends t{get[Y](){return Object.assign(super[Y]||{},{backdropPartType:Qe,framePartType:We})}}}class Xe extends(Ze(we)){get[Y](){return Object.assign(super[Y],{choiceButtonPartType:Ge})}get[Wt](){const t=super[Wt];return t.content.append(P.html`
        <style>
          [part~="frame"] {
            padding: 1em;
          }

          [part~="choice-button-container"] {
            margin-top: 1em;
          }

          [part~="choice-button"]:not(:first-child) {
            margin-left: 0.5em;
          }
        </style>
      `),t}}customElements.define("elix-alert-dialog",class extends Xe{});class Ye extends(Ze(xe)){}customElements.define("elix-dialog",class extends Ye{});const Je=Symbol("generatedId");let to=0;const eo={a:"link",article:"region",button:"button",h1:"sectionhead",h2:"sectionhead",h3:"sectionhead",h4:"sectionhead",h5:"sectionhead",h6:"sectionhead",hr:"sectionhead",iframe:"region",link:"link",menu:"menu",ol:"list",option:"option",output:"liveregion",progress:"progressbar",select:"select",table:"table",td:"td",textarea:"textbox",th:"th",ul:"list"};function oo(t){let e=t.id||t[Je];return e||(e="_id"+to++,t[Je]=e),e}function io(t){return class extends t{attributeChangedCallback(t,e,o){if("current-index"===t)this.currentIndex=Number(o);else if("current-item-required"===t){const e=y(t,o);this.currentItemRequired!==e&&(this.currentItemRequired=e)}else if("cursor-operations-wrap"===t){const e=y(t,o);this.cursorOperationsWrap!==e&&(this.cursorOperationsWrap=e)}else super.attributeChangedCallback(t,e,o)}get currentIndex(){const{items:t,currentIndex:e}=this[Lt];return t&&t.length>0?e:-1}set currentIndex(t){isNaN(t)||this[Tt]({currentIndex:t})}get currentItem(){const{items:t,currentIndex:e}=this[Lt];return t&&t[e]}set currentItem(t){const{items:e}=this[Lt];if(!e)return;const o=e.indexOf(t);this[Tt]({currentIndex:o})}get currentItemRequired(){return this[Lt].currentItemRequired}set currentItemRequired(t){this[Tt]({currentItemRequired:t})}get cursorOperationsWrap(){return this[Lt].cursorOperationsWrap}set cursorOperationsWrap(t){this[Tt]({cursorOperationsWrap:t})}goFirst(){return super.goFirst&&super.goFirst(),this[at]()}goLast(){return super.goLast&&super.goLast(),this[lt]()}goNext(){return super.goNext&&super.goNext(),this[ct]()}goPrevious(){return super.goPrevious&&super.goPrevious(),this[dt]()}[kt](t){if(super[kt]&&super[kt](t),t.currentIndex&&this[_t]){const{currentIndex:t}=this[Lt],e=new CustomEvent("current-index-changed",{bubbles:!0,detail:{currentIndex:t}});this.dispatchEvent(e);const o=new CustomEvent("currentindexchange",{bubbles:!0,detail:{currentIndex:t}});this.dispatchEvent(o)}}}}function no(t){const e=t[Ct],o=e&&e.querySelector("slot:not([name])");return o&&o.parentNode instanceof Element&&function(t){for(const e of q(t))if(e instanceof HTMLElement&&ro(e))return e;return null}(o.parentNode)||t}function ro(t){const e=getComputedStyle(t),o=e.overflowX,i=e.overflowY;return"scroll"===o||"auto"===o||"scroll"===i||"auto"===i}function so(t){return class extends t{[kt](t){super[kt]&&super[kt](t),t.currentItem&&this.scrollCurrentItemIntoView()}scrollCurrentItemIntoView(){super.scrollCurrentItemIntoView&&super.scrollCurrentItemIntoView();const{currentItem:t,items:e}=this[Lt];if(!t||!e)return;const o=this[Pt].getBoundingClientRect(),i=t.getBoundingClientRect(),n=i.bottom-o.bottom,r=i.left-o.left,s=i.right-o.right,a=i.top-o.top,l=this[Lt].orientation||"both";"horizontal"!==l&&"both"!==l||(s>0?this[Pt].scrollLeft+=s:r<0&&(this[Pt].scrollLeft+=Math.ceil(r))),"vertical"!==l&&"both"!==l||(n>0?this[Pt].scrollTop+=n:a<0&&(this[Pt].scrollTop+=Math.ceil(a)))}get[Pt](){return super[Pt]||no(this)}}}function ao(t){return class extends t{get[Y](){return Object.assign(super[Y]||{},{canGoDown:null,canGoLeft:null,canGoRight:null,canGoUp:null})}[rt](){return super[rt]&&super[rt](),this[ct]()}[st](){return super[st]&&super[st](),this[lt]()}[ut](){return super[ut]&&super[ut](),this[Lt]&&this[Lt].rightToLeft?this[ct]():this[dt]()}[pt](){return super[pt]&&super[pt](),this[Lt]&&this[Lt].rightToLeft?this[dt]():this[ct]()}[ht](){return super[ht]&&super[ht](),this[at]()}[mt](){return super[mt]&&super[mt](),this[dt]()}[jt](t,e){const o=super[jt]?super[jt](t,e):{};if(e.canGoNext||e.canGoPrevious||e.languageDirection||e.orientation||e.rightToLeft){const{canGoNext:e,canGoPrevious:i,orientation:n,rightToLeft:r}=t,s="horizontal"===n||"both"===n,a="vertical"===n||"both"===n,l=a&&e,u=!!s&&(r?e:i),c=!!s&&(r?i:e),d=a&&i;Object.assign(o,{canGoDown:l,canGoLeft:u,canGoRight:c,canGoUp:d})}return o}}}function lo(t){return class extends t{get items(){return this[Lt]?this[Lt].items:null}[kt](t){if(super[kt]&&super[kt](t),!this[ot]&&t.items&&this[_t]){const t=new CustomEvent("items-changed",{bubbles:!0});this.dispatchEvent(t);const e=new CustomEvent("itemschange",{bubbles:!0});this.dispatchEvent(e)}}}}function uo(t){return class extends t{[Z](t,e={}){const o=void 0!==e.direction?e.direction:1,i=void 0!==e.index?e.index:t.currentIndex,n=void 0!==e.wrap?e.wrap:t.cursorOperationsWrap,{items:r}=t,s=r?r.length:0;if(0===s)return-1;if(n){let e=(i%s+s)%s;const n=((e-o)%s+s)%s;for(;e!==n;){if(!t.availableItemFlags||t.availableItemFlags[e])return e;e=((e+o)%s+s)%s}}else for(let e=i;e>=0&&e<s;e+=o){if(!t.availableItemFlags||t.availableItemFlags[e])return e}return-1}get[Y](){return Object.assign(super[Y]||{},{currentIndex:-1,desiredCurrentIndex:null,currentItem:null,currentItemRequired:!1,cursorOperationsWrap:!1})}[at](){return super[at]&&super[at](),co(this,0,1)}[lt](){return super[lt]&&super[lt](),co(this,this[Lt].items.length-1,-1)}[ct](){super[ct]&&super[ct]();const{currentIndex:t,items:e}=this[Lt];return co(this,t<0&&e?0:t+1,1)}[dt](){super[dt]&&super[dt]();const{currentIndex:t,items:e}=this[Lt];return co(this,t<0&&e?e.length-1:t-1,-1)}[jt](t,e){const o=super[jt]?super[jt](t,e):{};if(e.availableItemFlags||e.items||e.currentIndex||e.currentItemRequired){const{currentIndex:i,desiredCurrentIndex:n,currentItem:r,currentItemRequired:s,items:a}=t,l=a?a.length:0;let u,c=n;if(e.items&&!e.currentIndex&&r&&l>0&&a[i]!==r){const t=a.indexOf(r);t>=0&&(c=t)}else e.currentIndex&&(i<0&&null!==r||i>=0&&(0===l||a[i]!==r)||null===n)&&(c=i);s&&c<0&&(c=0),c<0?(c=-1,u=-1):0===l?u=-1:(u=Math.max(Math.min(l-1,c),0),u=this[Z](t,{direction:1,index:u,wrap:!1}),u<0&&(u=this[Z](t,{direction:-1,index:u-1,wrap:!1})));const d=a&&a[u]||null;Object.assign(o,{currentIndex:u,desiredCurrentIndex:c,currentItem:d})}return o}}}function co(t,e,o){const i=t[Z](t[Lt],{direction:o,index:e});if(i<0)return!1;const n=t[Lt].currentIndex!==i;return n&&t[Tt]({currentIndex:i}),n}const po=["applet","basefont","embed","font","frame","frameset","isindex","keygen","link","multicol","nextid","noscript","object","param","script","style","template","noembed"];function ho(t){return t.getAttribute("aria-label")||t.getAttribute("alt")||t.innerText||t.textContent||""}function fo(t){return class extends t{get[Y](){return Object.assign(super[Y]||{},{texts:null})}[nt](t){return super[nt]?super[nt](t):ho(t)}[jt](t,e){const o=super[jt]?super[jt](t,e):{};if(e.items){const{items:e}=t,i=function(t,e){return t?Array.from(t,(t=>e(t))):null}(e,this[nt]);i&&(Object.freeze(i),Object.assign(o,{texts:i}))}return o}}}function mo(t){return class extends t{[rt](){if(super[rt])return super[rt]()}[st](){if(super[st])return super[st]()}[ut](){if(super[ut])return super[ut]()}[pt](){if(super[pt])return super[pt]()}[ht](){if(super[ht])return super[ht]()}[mt](){if(super[mt])return super[mt]()}[xt](t){let e=!1;if(t.target===this){const o=this[Lt].orientation||"both",i="horizontal"===o||"both"===o,n="vertical"===o||"both"===o;switch(t.key){case"ArrowDown":n&&(e=t.altKey?this[st]():this[rt]());break;case"ArrowLeft":!i||t.metaKey||t.altKey||(e=this[ut]());break;case"ArrowRight":!i||t.metaKey||t.altKey||(e=this[pt]());break;case"ArrowUp":n&&(e=t.altKey?this[ht]():this[mt]());break;case"End":e=this[st]();break;case"Home":e=this[ht]()}}return e||super[xt]&&super[xt](t)||!1}}}function vo(t){return class extends t{[xt](t){let e=!1;if("horizontal"!==this.orientation)switch(t.key){case"PageDown":e=this.pageDown();break;case"PageUp":e=this.pageUp()}return e||super[xt]&&super[xt](t)}get orientation(){return super.orientation||this[Lt]&&this[Lt].orientation||"both"}pageDown(){return super.pageDown&&super.pageDown(),bo(this,!0)}pageUp(){return super.pageUp&&super.pageUp(),bo(this,!1)}get[Pt](){return super[Pt]||no(this)}}}function go(t,e,o){const i=t[Lt].items,n=o?0:i.length-1,r=o?i.length:0,s=o?1:-1;let a,l,u=null;const{availableItemFlags:c}=t[Lt];for(a=n;a!==r;a+=s){if((!c||c[a])&&(l=i[a].getBoundingClientRect(),l.top<=e&&e<=l.bottom)){u=i[a];break}}if(!u||!l)return null;const d=getComputedStyle(u),p=d.paddingTop?parseFloat(d.paddingTop):0,h=d.paddingBottom?parseFloat(d.paddingBottom):0,f=l.top+p,m=f+u.clientHeight-p-h;return o&&f<=e||!o&&m>=e?a:a-s}function bo(t,e){const o=t[Lt].items,i=t[Lt].currentIndex,n=t[Pt].getBoundingClientRect(),r=go(t,e?n.bottom:n.top,e);let s;if(r&&i===r){const n=o[i].getBoundingClientRect(),r=t[Pt].clientHeight;s=go(t,e?n.bottom+r:n.top-r,e)}else s=r;if(!s){const i=e?o.length-1:0;s=t[Z]?t[Z](t[Lt],{direction:e?-1:1,index:i}):i}const a=s!==i;if(a){const e=t[_t];t[_t]=!0,t[Tt]({currentIndex:s}),t[_t]=e}return a}const yo=Symbol("typedPrefix"),xo=Symbol("prefixTimeout");function wo(t){return class extends t{constructor(){super(),Oo(this)}[ft](t){if(super[ft]&&super[ft](t),null==t||0===t.length)return!1;const e=t.toLowerCase(),o=this[Lt].texts.findIndex((o=>o.substr(0,t.length).toLowerCase()===e));if(o>=0){const t=this[Lt].currentIndex;return this[Tt]({currentIndex:o}),this[Lt].currentIndex!==t}return!1}[xt](t){let e;switch(t.key){case"Backspace":!function(t){const e=t,o=e[yo]?e[yo].length:0;o>0&&(e[yo]=e[yo].substr(0,o-1));t[ft](e[yo]),Ao(t)}(this),e=!0;break;case"Escape":Oo(this);break;default:t.ctrlKey||t.metaKey||t.altKey||1!==t.key.length||function(t,e){const o=t,i=o[yo]||"";o[yo]=i+e,t[ft](o[yo]),Ao(t)}(this,t.key)}return e||super[xt]&&super[xt](t)}}}function Eo(t){const e=t;e[xo]&&(clearTimeout(e[xo]),e[xo]=!1)}function Oo(t){t[yo]="",Eo(t)}function Ao(t){Eo(t),t[xo]=setTimeout((()=>{Oo(t)}),1e3)}function _o(t){return class extends t{connectedCallback(){const t="rtl"===getComputedStyle(this).direction;this[Tt]({rightToLeft:t}),super.connectedCallback()}}}function qo(t){return class extends t{get[Y](){return Object.assign(super[Y]||{},{items:null})}[jt](t,e){const o=super[jt]?super[jt](t,e):{};if(e.content){const e=t.content,i=e?Array.prototype.filter.call(e,(t=>{return(e=t)instanceof Element&&(!e.localName||po.indexOf(e.localName)<0);var e})):null;i&&Object.freeze(i),Object.assign(o,{items:i})}return o}}}function Io(t){return qo(me(t))}function So(t){return class extends t{constructor(){super(),this.addEventListener("mousedown",(t=>{0===t.button&&(this[_t]=!0,this[Qt](t),this[_t]=!1)}))}[qt](t){super[qt]&&super[qt](t),this[ot]&&Object.assign(this.style,{touchAction:"manipulation",mozUserSelect:"none",msUserSelect:"none",webkitUserSelect:"none",userSelect:"none"})}[Qt](t){const e=t.composedPath?t.composedPath()[0]:t.target,{items:o,currentItemRequired:i}=this[Lt];if(o&&e instanceof Node){const n=A(o,e),r=n>=0?o[n]:null;(r&&!r.disabled||!r&&!i)&&(this[Tt]({currentIndex:n}),t.stopPropagation())}}}}const ko=function(t){return class extends t{get[Y](){const t=super[Y];return Object.assign(t,{itemRole:t.itemRole||"menuitem",role:t.role||"menu"})}get itemRole(){return this[Lt].itemRole}set itemRole(t){this[Tt]({itemRole:t})}[qt](t){super[qt]&&super[qt](t);const e=this[Lt].items;if((t.items||t.itemRole)&&e){const{itemRole:t}=this[Lt];e.forEach((e=>{t===eo[e.localName]?e.removeAttribute("role"):e.setAttribute("role",t)}))}if(t.role){const{role:t}=this[Lt];this.setAttribute("role",t)}}get role(){return super.role}set role(t){super.role=t,this[Nt]||this[Tt]({role:t})}}}(io(so(Te(ao(lo(uo(fo(mo(oe(vo(wo(_o(Io(So(Q)))))))))))))));class No extends ko{get[Y](){return Object.assign(super[Y],{availableItemFlags:null,highlightCurrentItem:!0,orientation:"vertical",currentItemFocused:!1})}async flashCurrentItem(){const t=this[Lt].focusVisible,e=matchMedia("(pointer: fine)").matches;if(t||e){const t=75;this[Tt]({highlightCurrentItem:!1}),await new Promise((e=>setTimeout(e,t))),this[Tt]({highlightCurrentItem:!0}),await new Promise((e=>setTimeout(e,t)))}}[qt](t){super[qt](t),this[ot]&&(this.addEventListener("disabledchange",(t=>{this[_t]=!0;const e=t.target,{items:o}=this[Lt],i=null===o?-1:o.indexOf(e);if(i>=0){const t=this[Lt].availableItemFlags.slice();t[i]=!e.disabled,this[Tt]({availableItemFlags:t})}this[_t]=!1})),"PointerEvent"in window?this.addEventListener("pointerdown",(t=>this[Qt](t))):this.addEventListener("touchstart",(t=>this[Qt](t))),this.removeAttribute("tabindex"));const{currentIndex:e,items:o}=this[Lt];if((t.items||t.currentIndex||t.highlightCurrentItem)&&o){const{highlightCurrentItem:t}=this[Lt];o.forEach(((o,i)=>{o.toggleAttribute("current",t&&i===e)}))}(t.items||t.currentIndex||t.currentItemFocused||t.focusVisible)&&o&&o.forEach(((t,o)=>{const i=o===e,n=e<0&&0===o;this[Lt].currentItemFocused?i||n||t.removeAttribute("tabindex"):(i||n)&&(t.tabIndex=0)}))}[kt](t){if(super[kt](t),!this[ot]&&t.currentIndex&&!this[Lt].currentItemFocused){const{currentItem:t}=this[Lt];(t instanceof HTMLElement?t:this).focus(),this[Tt]({currentItemFocused:!0})}}get[Pt](){return this[gt].content}[jt](t,e){const o=super[jt](t,e);if(e.currentIndex&&Object.assign(o,{currentItemFocused:!1}),e.items){const{items:e}=t,i=null===e?null:e.map((t=>!t.disabled));Object.assign(o,{availableItemFlags:i})}return o}get[Wt](){return T.html`
      <style>
        :host {
          box-sizing: border-box;
          cursor: default;
          display: inline-flex;
          -webkit-tap-highlight-color: transparent;
          touch-action: manipulation;
        }

        #content {
          display: flex;
          flex: 1;
          flex-direction: column;
          max-height: 100%;
          overflow-x: hidden;
          overflow-y: auto;
          -webkit-overflow-scrolling: touch; /* for momentum scrolling */
        }
        
        ::slotted(*) {
          flex-shrink: 0;
          outline: none;
          touch-action: manipulation;
        }

        ::slotted(option) {
          font: inherit;
          min-height: inherit;
        }
      </style>
      <div id="content" role="none">
        <slot></slot>
      </div>
    `}}const Po=Symbol("documentMouseupListener");function To(t){return class extends t{connectedCallback(){super.connectedCallback(),Ro(this)}get[Y](){return Object.assign(super[Y]||{},{dragSelect:!0})}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),Ro(this)}[kt](t){super[kt](t),t.opened&&Ro(this)}[jt](t,e){const o=super[jt](t,e);return e.opened&&t.opened&&Object.assign(o,{dragSelect:!0}),o}}}async function Co(t){const e=this,o=e[Ct].elementsFromPoint(t.clientX,t.clientY);if(e.opened){const t=o.indexOf(e[gt].source)>=0,i=e[gt].popup,n=o.indexOf(i)>=0,r=i.frame&&o.indexOf(i.frame)>=0;t?e[Lt].dragSelect&&(e[_t]=!0,e[Tt]({dragSelect:!1}),e[_t]=!1):n||r||(e[_t]=!0,await e.close(),e[_t]=!1)}}function Ro(t){t[Lt].opened&&t.isConnected?t[Po]||(t[Po]=Co.bind(t),document.addEventListener("mouseup",t[Po])):t[Po]&&(document.removeEventListener("mouseup",t[Po]),t[Po]=null)}function Do(t){return class extends t{get[Y](){return Object.assign(super[Y]||{},{disabled:!1})}get disabled(){return this[Lt].disabled}set disabled(t){this[Tt]({disabled:t})}[kt](t){if(super[kt]&&super[kt](t),t.disabled&&(this.toggleAttribute("disabled",this.disabled),this[_t])){const t=new CustomEvent("disabled-changed",{bubbles:!0});this.dispatchEvent(t);const e=new CustomEvent("disabledchange",{bubbles:!0});this.dispatchEvent(e)}}}}function Lo(t,e,o,i){const n=jo(t,o,i);let r=0,s=0;const a="above"===o||"below"===o;switch(o){case"above":r=n.y-e.top;break;case"below":r=e.bottom-n.y;break;case"left":s=n.x-e.left;break;case"right":s=e.right-n.x}switch(i){case"bottom":r=n.y-e.top;break;case"center":a?s=e.width:r=e.height;break;case"stretch":a?s=t.width:r=t.height;break;case"left":s=e.right-n.x;break;case"right":s=n.x-e.left;break;case"top":r=e.bottom-n.y}return r=Math.max(0,r),s=Math.max(0,s),{height:r,width:s}}function jo(t,e,o){let i=0,n=0;const r="above"===e||"below"===e;switch(e){case"above":n=t.top;break;case"below":n=t.bottom;break;case"left":case"right":i=t[e]}switch(o){case"bottom":case"top":n=t[o];break;case"left":case"right":i=t[o];break;case"center":r?i=t.left+t.width/2:n=t.top+t.height/2;break;case"stretch":r?i=t.left:n=t.top}return{x:i,y:n}}function Mo(t,e,o,i){const n=function(t){const{align:e,direction:o,rightToLeft:i}=t,n="below",r={above:"above",below:"below",column:"below","column-reverse":"above",left:"left",right:"right",row:i?"left":"right","row-reverse":i?"right":"left"}[o]||n,s={above:"horizontal",below:"horizontal",left:"vertical",right:"vertical"}[r],a={horizontal:"left",vertical:"top"}[s];return{align:{horizontal:{center:"center",end:i?"left":"right",left:"left",right:"right",start:i?"right":"left",stretch:"stretch"},vertical:{bottom:"bottom",center:"center",end:"bottom",start:"top",stretch:"stretch",top:"top"}}[s][e]||a,direction:r,rightToLeft:i}}(i),r=function(t,e){const o={above:"below",below:"above",left:"right",right:"left"},i={top:"bottom",bottom:"top",left:"right",right:"left"},n=[{align:e,direction:t}];"center"===e||"stretch"===e?n.push({align:e,direction:o[t]}):(n.push({align:i[e],direction:t}),n.push({align:e,direction:o[t]}),n.push({align:i[e],direction:o[t]}));return n}(n.direction,n.align);r.sort(((i,n)=>function(t,e,o,i,n){const r=Lo(o,n,t.direction,t.align),s=Lo(o,n,e.direction,e.align),a=i.width<=r.width,l=i.height<=r.height,u=a||l,c=a&&l,d=i.width<=s.width,p=i.height<=s.height,h=d||p,f=d&&p,m=r.width*r.height,v=s.width*s.height;return c&&f?0:c?-1:f?1:u&&!h?-1:h&&!u?1:u&&m>v?-1:h&&v>m?1:m>v?-1:v>m?1:0}(i,n,t,e,o)));const s=r[0];return s.rect=function(t,e,o,i,n){const r=jo(t,i,n);let{x:s,y:a,bottom:l,right:u}=o,c=0,d=0,p=e.height,h=e.width;const f="above"===i||"below"===i;switch(i){case"above":d=r.y-e.height,l=r.y;break;case"below":d=r.y,a=r.y;break;case"left":c=r.x-e.width,u=r.x;break;case"right":c=r.x,s=r.x}switch(n){case"bottom":d=r.y-e.height,l=r.y;break;case"left":c=r.x,s=r.x;break;case"center":f?c=r.x-e.width/2:d=r.y-e.height/2;break;case"right":c=r.x-e.width,u=r.x;break;case"stretch":f?(c=r.x,h=t.width):(d=r.y,p=t.height);break;case"top":d=r.y,a=r.y}return c=Math.max(c,s),d=Math.max(d,a),h=Math.min(h,u-c),p=Math.min(p,l-d),new DOMRect(c,d,h,p)}(t,e,o,s.direction,s.align),s}const Fo=Symbol("implicitCloseListener");async function Uo(t){const e=this,o=t.relatedTarget||document.activeElement;o instanceof Element&&!w(e,o)&&(e[_t]=!0,await e.close({canceled:"window blur"}),e[_t]=!1)}async function $o(t){const e=this,o="resize"!==t.type||e[Lt].closeOnWindowResize;!_(e,t)&&o&&(e[_t]=!0,await e.close({canceled:`window ${t.type}`}),e[_t]=!1)}const Bo=oe(function(t){return class extends t{get closeOnWindowResize(){return this[Lt].closeOnWindowResize}set closeOnWindowResize(t){this[Tt]({closeOnWindowResize:t})}get[Y](){return Object.assign(super[Y]||{},{closeOnWindowResize:!0,role:"alert"})}[xt](t){let e=!1;switch(t.key){case"Escape":this.close({canceled:"Escape"}),e=!0}return e||super.keydown&&super.keydown(t)||!1}[qt](t){if(super[qt]&&super[qt](t),this[ot]&&this.addEventListener("blur",Uo.bind(this)),t.role){const{role:t}=this[Lt];this.setAttribute("role",t)}}[kt](t){if(super[kt]&&super[kt](t),t.opened)if(this.opened){("requestIdleCallback"in window?window.requestIdleCallback:setTimeout)((()=>{var t;this.opened&&((t=this)[Fo]=$o.bind(t),window.addEventListener("blur",t[Fo]),window.addEventListener("resize",t[Fo]),window.addEventListener("scroll",t[Fo]))}))}else(e=this)[Fo]&&(window.removeEventListener("blur",e[Fo]),window.removeEventListener("resize",e[Fo]),window.removeEventListener("scroll",e[Fo]),e[Fo]=null);var e}get role(){return super.role}set role(t){super.role=t,this[Nt]||this[Tt]({role:t})}}}(ge));class zo extends Bo{[qt](t){super[qt](t),t.backdropPartType&&(this[gt].backdrop.addEventListener("mousedown",Vo.bind(this)),"PointerEvent"in window||this[gt].backdrop.addEventListener("touchend",Vo))}}async function Vo(t){const e=this;e[_t]=!0,await e.close({canceled:"mousedown outside"}),e[_t]=!1,t.preventDefault(),t.stopPropagation()}const Ho=Symbol("resizeListener"),Ko=Do(Ne(_o(le(Q))));class Go extends Ko{get[Y](){return Object.assign(super[Y],{ariaHasPopup:"true",popupAlign:"start",popupDirection:"column",popupLayout:null,popupPartType:zo,sourcePartType:"div"})}get[bt](){return this[gt].source}get frame(){return this[gt].popup.frame}get horizontalAlign(){return this[Lt].popupAlign}set horizontalAlign(t){console.warn('The "horizontalAlign" property has been renamed to "popupAlign"; the "horizontal-align" attribute is now "popup-align".'),this[Tt]({popupAlign:t})}get popupAlign(){return this[Lt].popupAlign}set popupAlign(t){this[Tt]({popupAlign:t})}get popupDirection(){return this[Lt].popupDirection}set popupDirection(t){this[Tt]({popupDirection:t})}get popupPosition(){return this[Lt].popupPosition}set popupPosition(t){console.warn('The "popupPosition" property has been renamed to "popupDirection"; the "popup-position" attribute is now "popup-direction".'),this[Tt]({popupPosition:t})}get popupPartType(){return this[Lt].popupPartType}set popupPartType(t){this[Tt]({popupPartType:t})}[qt](t){if(super[qt](t),Wo(this[Ct],this[Lt],t),this[ot]||t.ariaHasPopup){const{ariaHasPopup:t}=this[Lt];null===t?this[bt].removeAttribute("aria-haspopup"):this[bt].setAttribute("aria-haspopup",this[Lt].ariaHasPopup)}if(t.popupPartType&&(this[gt].popup.addEventListener("open",(()=>{this.opened||(this[_t]=!0,this.open(),this[_t]=!1)})),this[gt].popup.addEventListener("close",(t=>{if(!this.closed){this[_t]=!0;const e=t.detail.closeResult;this.close(e),this[_t]=!1}}))),t.opened||t.popupLayout){const{opened:t,popupLayout:e}=this[Lt];if(t)if(e){const t=this[gt].popup,o=function(t){const{align:e,direction:o,rect:i}=t,n=Zo(),r={},s="above"===o||"below"===o;switch(o){case"above":r.bottom=n.bottom-i.bottom+"px";break;case"below":r.top=`${i.top}px`;break;case"left":r.right=n.right-i.right+"px";break;case"right":r.left=`${i.left}px`}switch(e){case"bottom":r.bottom=n.bottom-i.bottom+"px";break;case"center":case"stretch":s?(r.left=`${i.left}px`,r.right=n.right-i.right+"px"):(r.bottom=n.bottom-i.bottom+"px",r.top=`${i.top}px`);break;case"left":r.left=`${i.left}px`;break;case"right":r.right=n.right-i.right+"px";break;case"top":r.top=`${i.top}px`}return r}(e);Object.assign(t.style,o,{opacity:""})}else Object.assign(this[gt].popup.style,{bottom:"",left:"",opacity:0,right:"",top:""});else Object.assign(this[gt].popup.style,{bottom:"",left:"",opacity:"",right:"",top:""})}if(t.opened){const{opened:t}=this[Lt];this[gt].popup.opened=t}if(t.disabled&&"disabled"in this[gt].source){const{disabled:t}=this[Lt];this[gt].source.disabled=t}if(t.popupLayout){const{popupLayout:t}=this[Lt];if(t){const{align:e,direction:o}=t,i=this[gt].popup;"position"in i&&(i.position=o),"align"in i&&(i.align=e)}}}[kt](t){super[kt](t);const{opened:e}=this[Lt];var o;t.opened?e?(o=this,setTimeout((()=>{o[Lt].opened&&(Qo(o),function(t){const e=t;e[Ho]=()=>{Qo(t)},(window.visualViewport||window).addEventListener("resize",e[Ho])}(o))}))):function(t){const e=t;if(e[Ho]){(window.visualViewport||window).removeEventListener("resize",e[Ho]),e[Ho]=null}}(this):t.popupLayout&&this[Lt].opened&&!this[Lt].popupLayout&&Qo(this)}get sourcePartType(){return this[Lt].sourcePartType}set sourcePartType(t){this[Tt]({sourcePartType:t})}[jt](t,e){const o=super[jt](t,e);return(e.opened&&!t.opened||t.opened&&(e.popupAlign||e.popupDirection||e.rightToLeft))&&Object.assign(o,{popupLayout:null}),o}get[Wt](){const t=super[Wt];return t.content.append(P.html`
      <style>
        :host {
          display: inline-block;
          position: relative;
        }

        [part~="source"] {
          height: 100%;
          -webkit-tap-highlight-color: transparent;
          touch-action: manipulation;
          width: 100%;
        }

        [part~="popup"] {
          max-height: 100%;
          max-width: 100%;
          outline: none;
          position: fixed;
        }
      </style>
      <div id="source" part="source">
        <slot name="source"></slot>
      </div>
      <div id="popup" part="popup" exportparts="backdrop, frame" role="none">
        <slot></slot>
      </div>
    `),Wo(t.content,this[Lt]),t}}function Qo(t){const{popupAlign:e,popupDirection:o,rightToLeft:i}=t[Lt],n=Mo(t[gt].source.getBoundingClientRect(),t[gt].popup.getBoundingClientRect(),Zo(),{align:e,direction:o,rightToLeft:i});t[Tt]({popupLayout:n})}function Wo(t,e,o){if(!o||o.popupPartType){const{popupPartType:o}=e,i=t.getElementById("popup");i&&L(i,o)}if(!o||o.sourcePartType){const{sourcePartType:o}=e,i=t.getElementById("source");i&&L(i,o)}}function Zo(){const t=window.visualViewport;return t?new DOMRect(t.offsetLeft,t.offsetTop,t.width,t.height):new DOMRect(0,0,window.innerWidth,window.innerHeight)}const Xo=Te(oe(To(Go)));async function Yo(t){const e=this,o=t.relatedTarget||document.activeElement;o instanceof Element&&!w(e,o)&&(e[_t]=!0,await e.close({canceled:"blur"}),e[_t]=!1)}const Jo=Symbol("documentMousemoveListener");function ti(t){return class extends t{connectedCallback(){super.connectedCallback(),oi(this)}get[Y](){return Object.assign(super[Y]||{},{currentIndex:-1,hasHoveredOverItemSinceOpened:!1,popupList:null})}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),oi(this)}[xt](t){let e=!1;switch(t.key){case"Enter":this.opened&&(ii(this),e=!0)}return e||super[xt]&&super[xt](t)||!1}[qt](t){if(super[qt]&&super[qt](t),t.popupList){const{popupList:t}=this[Lt];t&&(t.addEventListener("mouseup",(async t=>{const e=this[Lt].currentIndex;this[Lt].dragSelect||e>=0?(t.stopPropagation(),this[_t]=!0,await ii(this),this[_t]=!1):t.stopPropagation()})),t.addEventListener("currentindexchange",(t=>{this[_t]=!0;const e=t;this[Tt]({currentIndex:e.detail.currentIndex}),this[_t]=!1})))}if(t.currentIndex||t.popupList){const{currentIndex:t,popupList:e}=this[Lt];e&&"currentIndex"in e&&(e.currentIndex=t)}}[kt](t){if(super[kt]&&super[kt](t),t.opened){if(this[Lt].opened){const{popupList:t}=this[Lt];t.scrollCurrentItemIntoView&&setTimeout((()=>{t.scrollCurrentItemIntoView()}))}oi(this)}}[jt](t,e){const o=super[jt]?super[jt](t,e):{};return e.opened&&t.opened&&Object.assign(o,{hasHoveredOverItemSinceOpened:!1}),o}}}function ei(t){const e=this,{hasHoveredOverItemSinceOpened:o,opened:i}=e[Lt];if(i){const i=t.composedPath?t.composedPath()[0]:t.target,n=e.items;if(i&&i instanceof Node&&n){const t=A(n,i),r=n[t],s=r&&!r.disabled?t:-1;(o||s>=0)&&s!==e[Lt].currentIndex&&(e[_t]=!0,e[Tt]({currentIndex:s}),s>=0&&!o&&e[Tt]({hasHoveredOverItemSinceOpened:!0}),e[_t]=!1)}}}function oi(t){t[Lt].opened&&t.isConnected?t[Jo]||(t[Jo]=ei.bind(t),document.addEventListener("mousemove",t[Jo])):t[Jo]&&(document.removeEventListener("mousemove",t[Jo]),t[Jo]=null)}async function ii(t){const e=t[_t],o=t[Lt].currentIndex>=0,i=t.items;if(i){const n=o?i[t[Lt].currentIndex]:void 0,r=t[Lt].popupList;o&&"flashCurrentItem"in r&&await r.flashCurrentItem();const s=t[_t];t[_t]=e,await t.close(n),t[_t]=s}}const ni=ti(class extends Xo{get[Y](){return Object.assign(super[Y],{sourcePartType:"button"})}[xt](t){let e;switch(t.key){case" ":case"ArrowDown":case"ArrowUp":this.closed&&(this.open(),e=!0);break;case"Enter":this.opened||(this.open(),e=!0);break;case"Escape":this.opened&&(this.close({canceled:"Escape"}),e=!0)}if(e=super[xt]&&super[xt](t),!e&&this.opened&&!t.metaKey&&!t.altKey)switch(t.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":case"PageDown":case"PageUp":case" ":e=!0}return e}[qt](t){if(super[qt](t),this[ot]&&(this.addEventListener("blur",Yo.bind(this)),this[gt].source.addEventListener("focus",(async t=>{const e=_(this[gt].popup,t),o=null!==this[Lt].popupHeight;!e&&this.opened&&o&&(this[_t]=!0,await this.close(),this[_t]=!1)}))),t.opened){const{opened:t}=this[Lt];this.toggleAttribute("opened",t)}if(t.sourcePartType){this[gt].source.addEventListener("mousedown",(t=>{if(this.disabled)return void t.preventDefault();const e=t;e.button&&0!==e.button||(setTimeout((()=>{this.opened||(this[_t]=!0,this.open(),this[_t]=!1)})),t.stopPropagation())}))}t.popupPartType&&this[gt].popup.removeAttribute("tabindex")}get[Wt](){const t=super[Wt];return t.content.append(P.html`
        <style>
          [part~="source"] {
            cursor: default;
            outline: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            -moz-user-select: none;
            -ms-user-select: none;
            -webkit-user-select: none;
            user-select: none;
          }

          :host([opened][focus-visible]) {
            outline: none;
          }
        </style>
      `),t}});class ri extends ni{get[Y](){return Object.assign(super[Y],{menuPartType:No})}get items(){const t=this[gt]&&this[gt].menu;return t?t.items:null}get menuPartType(){return this[Lt].menuPartType}set menuPartType(t){this[Tt]({menuPartType:t})}[qt](t){if(super[qt](t),si(this[Ct],this[Lt],t),t.menuPartType&&(this[gt].menu.addEventListener("blur",(async t=>{const e=t.relatedTarget||document.activeElement;this.opened&&!w(this[gt].menu,e)&&(this[_t]=!0,await this.close(),this[_t]=!1)})),this[gt].menu.addEventListener("mousedown",(t=>{0===t.button&&this.opened&&(t.stopPropagation(),t.preventDefault())}))),t.opened){const{opened:t}=this[Lt];this[gt].source.setAttribute("aria-expanded",t.toString())}}[kt](t){super[kt](t),t.menuPartType&&this[Tt]({popupList:this[gt].menu})}[jt](t,e){const o=super[jt](t,e);return e.opened&&!t.opened&&Object.assign(o,{currentIndex:-1}),o}get[Wt](){const t=super[Wt],e=t.content.querySelector("slot:not([name])");return e&&e.replaceWith(P.html`
        <div id="menu" part="menu">
          <slot></slot>
        </div>
      `),si(t.content,this[Lt]),t.content.append(P.html`
      <style>
        [part~="menu"] {
          max-height: 100%;
        }
      </style>
    `),t}}function si(t,e,o){if(!o||o.menuPartType){const{menuPartType:o}=e,i=t.getElementById("menu");i&&L(i,o)}}const ai=Do(Q);class li extends ai{get[Y](){return Object.assign(super[Y],{direction:"down"})}get direction(){return this[Lt].direction}set direction(t){this[Tt]({direction:t})}[qt](t){if(super[qt](t),t.direction){const{direction:t}=this[Lt];this[gt].downIcon.style.display="down"===t?"block":"none",this[gt].upIcon.style.display="up"===t?"block":"none"}}get[Wt](){return T.html`
      <style>
        :host {
          display: inline-block;
        }
      </style>
      <div id="downIcon" part="toggle-icon down-icon">
        <slot name="down-icon"></slot>
      </div>
      <div id="upIcon" part="toggle-icon up-icon">
        <slot name="up-icon"></slot>
      </div>
    `}}function ui(t){return class extends t{get[Y](){return Object.assign(super[Y]||{},{popupTogglePartType:li})}get popupTogglePartType(){return this[Lt].popupTogglePartType}set popupTogglePartType(t){this[Tt]({popupTogglePartType:t})}[qt](t){if(super[qt](t),ci(this[Ct],this[Lt],t),t.popupDirection||t.popupTogglePartType){const{popupDirection:t}=this[Lt],e="above"===t||"column-reverse"===t?"up":"down",o=this[gt].popupToggle;"direction"in o&&(o.direction=e)}if(t.disabled){const{disabled:t}=this[Lt];this[gt].popupToggle.disabled=t}}get[Wt](){const t=super[Wt],e=t.content.querySelector('[part~="source"]');return e&&e.append(P.html`
          <div
            id="popupToggle"
            part="popup-toggle"
            exportparts="toggle-icon, down-icon, up-icon"
            tabindex="-1"
          ></div>
      `),ci(t.content,this[Lt]),t.content.append(P.html`
      <style>
        [part~="popup-toggle"] {
          outline: none;
        }

        [part~="source"] {
          align-items: center;
          display: flex;
        }
      </style>
    `),t}}}function ci(t,e,o){if(!o||o.popupTogglePartType){const{popupTogglePartType:o}=e,i=t.getElementById("popupToggle");i&&L(i,o)}}class di extends No{get[Wt](){const t=super[Wt];return t.content.append(P.html`
        <style>
          :host ::slotted(*) {
            padding: 0.25em 1em;
          }
          
          :host ::slotted([current]) {
            background: highlight;
            color: highlighttext;
          }

          @media (pointer: coarse) {
            ::slotted(*) {
              padding: 1em;
            }
          }
        </style>
      `),t}}class pi extends li{get[Wt](){const t=super[Wt],e=t.content.getElementById("downIcon"),o=P.html`
      <svg
        id="downIcon"
        part="toggle-icon down-icon"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 10 5"
      >
        <path d="M 0 0 l5 5 5 -5 z" />
      </svg>
    `.firstElementChild;e&&o&&D(e,o);const i=t.content.getElementById("upIcon"),n=P.html`
      <svg
        id="upIcon"
        part="toggle-icon up-icon"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 10 5"
      >
        <path d="M 0 5 l5 -5 5 5 z" />
      </svg>
    `.firstElementChild;return i&&n&&D(i,n),t.content.append(P.html`
        <style>
          :host {
            align-items: center;
            display: inline-flex;
            padding: 2px;
          }

          :host(:not([disabled])):hover {
            background: #eee;
          }

          [part~="toggle-icon"] {
            fill: currentColor;
            height: 10px;
            margin: 0.25em;
            width: 10px;
          }
        </style>
      `),t}}class hi extends ne{}class fi extends zo{get[Y](){return Object.assign(super[Y],{backdropPartType:hi,framePartType:We})}}class mi extends(ui(ri)){get[Y](){return Object.assign(super[Y],{menuPartType:di,popupPartType:fi,popupTogglePartType:pi,sourcePartType:Ge})}get[Wt](){const t=super[Wt];return t.content.append(P.html`
        <style>
          [part~="menu"] {
            background: window;
            border: none;
            padding: 0.5em 0;
          }
        </style>
      `),t}}customElements.define("elix-menu-button",class extends mi{});class vi extends(function(t){return class extends t{constructor(){super();const t=this;!this[At]&&t.attachInternals&&(this[At]=t.attachInternals())}attributeChangedCallback(t,e,o){if("current"===t){const e=y(t,o);this.current!==e&&(this.current=e)}else super.attributeChangedCallback(t,e,o)}get[Y](){return Object.assign(super[Y]||{},{current:!1})}[qt](t){if(super[qt](t),t.current){const{current:t}=this[Lt];I(this,"current",t)}}[kt](t){if(super[kt]&&super[kt](t),t.current){const{current:t}=this[Lt],e=new CustomEvent("current-changed",{bubbles:!0,detail:{current:t}});this.dispatchEvent(e);const o=new CustomEvent("currentchange",{bubbles:!0,detail:{current:t}});this.dispatchEvent(o)}}get current(){return this[Lt].current}set current(t){this[Tt]({current:t})}}}(Do(function(t){return class extends t{constructor(){super();const t=this;!this[At]&&t.attachInternals&&(this[At]=t.attachInternals())}get[Y](){return Object.assign(super[Y]||{},{selected:!1})}[qt](t){if(super[qt](t),t.selected){const{selected:t}=this[Lt];I(this,"selected",t)}}[kt](t){if(super[kt]&&super[kt](t),t.selected){const{selected:t}=this[Lt],e=new CustomEvent("selected-changed",{bubbles:!0,detail:{selected:t}});this.dispatchEvent(e);const o=new CustomEvent("selectedchange",{bubbles:!0,detail:{selected:t}});this.dispatchEvent(o)}}get selected(){return this[Lt].selected}set selected(t){this[Tt]({selected:t})}}}(Q)))){}class gi extends vi{get[Wt](){return T.html`
      <style>
        :host {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
          font-size: 10pt;
          white-space: nowrap;
        }

        :host([disabled]) {
          opacity: 0.5;
        }

        #checkmark {
          height: 1em;
          visibility: hidden;
          width: 1em;
        }

        :host([selected]) #checkmark {
          visibility: visible;
        }
      </style>
      <svg id="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="4 6 18 12">
        <path d="M0 0h24v24H0V0z" fill="none"/>
        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
      </svg>
      <slot></slot>
    `}}customElements.define("elix-menu-item",class extends gi{});class bi extends Q{get disabled(){return!0}[qt](t){super[qt](t),this[ot]&&this.setAttribute("aria-hidden","true")}}class yi extends bi{get[Wt](){return T.html`
      <style>
        :host {
          padding: 0 !important;
        }

        hr {
          border-bottom-width: 0px;
          border-color: #fff; /* Ends up as light gray */
          border-top-width: 1px;
          margin: 0.25em 0;
        }
      </style>
      <hr>
    `}}customElements.define("elix-menu-separator",class extends yi{});const xi=Symbol("timeout"),wi=_o(function(t){return class extends t{get[et](){return super[et]||this}[qt](t){if(super[qt]&&super[qt](t),this[ot]){(this[et]===this?this:this[Ct]).addEventListener("transitionend",(t=>{const e=this[Lt].effectEndTarget||this[et];t.target===e&&this[Tt]({effectPhase:"after"})}))}}[kt](t){if(super[kt]&&super[kt](t),t.effect||t.effectPhase){const{effect:t,effectPhase:e}=this[Lt],o=new CustomEvent("effect-phase-changed",{bubbles:!0,detail:{effect:t,effectPhase:e}});this.dispatchEvent(o);const i=new CustomEvent("effectphasechange",{bubbles:!0,detail:{effect:t,effectPhase:e}});this.dispatchEvent(i),t&&("after"!==e&&this.offsetHeight,"before"===e&&this[Tt]({effectPhase:"during"}))}}async[Dt](t){await this[Tt]({effect:t,effectPhase:"before"})}}}(zo));class Ei extends wi{constructor(){super(),this.addEventListener("mouseout",(()=>{Ai(this)})),this.addEventListener("mouseover",(()=>{Oi(this)}))}attributeChangedCallback(t,e,o){"duration"===t?this.duration=Number(o):super.attributeChangedCallback(t,e,o)}get[Y](){return Object.assign(super[Y],{duration:null,fromEdge:"bottom"})}get duration(){return this[Lt].duration}set duration(t){isNaN(t)||this[Tt]({duration:t})}get[et](){return this[gt].frame}get fromEdge(){return this[Lt].fromEdge}set fromEdge(t){this[Tt]({fromEdge:t})}[qt](t){if(super[qt](t),t.fromEdge){const t={bottom:{alignItems:"center",justifyContent:"flex-end"},"bottom-left":{alignItems:"flex-start",justifyContent:"flex-end"},"bottom-right":{alignItems:"flex-end",justifyContent:"flex-end"},top:{alignItems:"center",justifyContent:null},"top-left":{alignItems:"flex-start",justifyContent:null},"top-right":{alignItems:"flex-end",justifyContent:null}};Object.assign(this.style,t[this[Lt].fromEdge])}if(t.effect||t.effectPhase||t.fromEdge||t.rightToLeft){const{effect:t,effectPhase:e,fromEdge:o,rightToLeft:i}=this[Lt],n={"bottom-left":"bottom-right","bottom-right":"bottom-left","top-left":"top-right","top-right":"top-left"},r=i&&n[o]||o,s={bottom:"translateY(100%)","bottom-left":"translateX(-100%)","bottom-right":"translateX(100%)",top:"translateY(-100%)","top-left":"translateX(-100%)","top-right":"translateX(100%)"},a={bottom:"translateY(0)","bottom-left":"translateX(0)","bottom-right":"translateX(0)",top:"translateY(0)","top-left":"translateX(0)","top-right":"translateX(0)"},l="open"===t&&"before"!==e||"close"===t&&"before"===e,u=l?1:0,c=l?a[r]:s[r];Object.assign(this[gt].frame.style,{opacity:u,transform:c})}}[kt](t){super[kt](t),Ai(this)}}function Oi(t){const e=t;e[xi]&&(clearTimeout(e[xi]),e[xi]=null)}function Ai(t){t.opened&&function(t){Oi(t);const e=t[Lt].duration;null!==e&&e>0&&(t[xi]=setTimeout((()=>{t.close()}),e))}(t)}class _i extends Ei{get[Y](){return Object.assign(super[Y],{framePartType:We})}get[Wt](){const t=super[Wt];return t.content.append(P.html`
        <style>
          :host {
            align-items: initial;
            display: flex;
            flex-direction: column;
            height: 100%;
            justify-content: initial;
            left: 0;
            outline: none;
            pointer-events: none;
            top: 0;
            -webkit-tap-highlight-color: transparent;
            width: 100%;
          }

          [part~="frame"] {
            margin: 1em;
            transition-duration: 0.25s;
            transition-property: opacity, transform;
            will-change: opacity, transform;
          }
        </style>
      `),t}}function qi(t){return class extends t{constructor(){super();const t=this;!this[At]&&t.attachInternals&&(this[At]=t.attachInternals())}checkValidity(){return this[At].checkValidity()}get[Y](){return Object.assign(super[Y]||{},{name:"",validationMessage:"",valid:!0})}get internals(){return this[At]}static get formAssociated(){return!0}get form(){return this[At].form}get name(){return this[Lt]?this[Lt].name:""}set name(e){const o=String(e);"name"in t.prototype&&(super.name=o),this[Tt]({name:o})}[qt](t){if(super[qt]&&super[qt](t),t.name){const{name:t}=this[Lt];t?this.setAttribute("name",t):this.removeAttribute("name")}if(this[At]&&this[At].setValidity&&(t.valid||t.validationMessage)){const{valid:t,validationMessage:e}=this[Lt];t?this[At].setValidity({}):this[At].setValidity({customError:!0},e)}}[kt](t){super[kt]&&super[kt](t),t.value&&this[At]&&this[At].setFormValue(this[Lt].value,this[Lt])}reportValidity(){return this[At].reportValidity()}get type(){return super.type||this.localName}get validationMessage(){return this[Lt].validationMessage}get validity(){return this[At].validity}get willValidate(){return this[At].willValidate}}}customElements.define("elix-toast",class extends _i{});const Ii=_e(Ne(qi(function(t){return class extends t{get[Y](){return Object.assign(super[Y]||{},{selectionEnd:0,selectionStart:0})}[qt](t){if(super[qt]&&super[qt](t),this[ot]){const t=(()=>{setTimeout((()=>{this[_t]=!0,function(t){const e=t.inner,{selectionEnd:o,selectionStart:i}=e;t[Tt]({selectionEnd:o,selectionStart:i})}(this),this[_t]=!1}),10)}).bind(this);this.addEventListener("keydown",t),this.addEventListener("mousedown",t),this.addEventListener("touchend",t)}}}}(Be.wrap("input")))));class Si extends Ii{get[Y](){return Object.assign(super[Y],{valueCopy:""})}get[bt](){return this.inner}[qt](t){super[qt](t),this[ot]&&this[gt].inner.addEventListener("input",(()=>{this[_t]=!0;const t=this[gt].inner;this.value=t.value,this[Tt]({selectionEnd:t.selectionEnd,selectionStart:t.selectionStart}),this[_t]=!1}))}get[Wt](){const t=super[Wt];return t.content.append(P.html`
      <style>
        [part~="input"] {
          font: inherit;
          outline: none;
          text-align: inherit;
        }
      </style>
    `),t}get value(){return super.value}set value(t){const e=String(t);super.value=e,this[Tt]({valueCopy:e})}}function ki(t){return class extends t{attributeChangedCallback(t,e,o){"selected-index"===t?this.selectedIndex=Number(o):super.attributeChangedCallback(t,e,o)}[kt](t){if(super[kt]&&super[kt](t),t.selectedIndex&&this[_t]){const t=this[Lt].selectedIndex,e=new CustomEvent("selected-index-changed",{bubbles:!0,detail:{selectedIndex:t}});this.dispatchEvent(e);const o=new CustomEvent("selectedindexchange",{bubbles:!0,detail:{selectedIndex:t}});this.dispatchEvent(o)}}get selectedIndex(){const{items:t,selectedIndex:e}=this[Lt];return t&&t.length>0?e:-1}set selectedIndex(t){isNaN(t)||this[Tt]({selectedIndex:t})}get selectedItem(){const{items:t,selectedIndex:e}=this[Lt];return t&&t[e]}set selectedItem(t){const{items:e}=this[Lt];if(!e)return;const o=e.indexOf(t);o>=0&&this[Tt]({selectedIndex:o})}}}const Ni=function(t){return class extends t{get[Y](){const t=super[Y];return Object.assign(t,{itemRole:t.itemRole||"option",role:t.role||"listbox"})}get itemRole(){return this[Lt].itemRole}set itemRole(t){this[Tt]({itemRole:t})}[qt](t){super[qt]&&super[qt](t);const{itemRole:e}=this[Lt],o=this[Lt].items;if(t.items&&o&&o.forEach((t=>{t.id||(t.id=oo(t))})),(t.items||t.itemRole)&&o&&o.forEach((t=>{e===eo[t.localName]?t.removeAttribute("role"):t.setAttribute("role",e)})),t.items||t.selectedIndex||t.selectedItemFlags){const{selectedItemFlags:t,selectedIndex:e}=this[Lt];o&&o.forEach(((o,i)=>{const n=t?t[i]:i===e;o.setAttribute("aria-selected",n.toString())}))}if(t.items||t.selectedIndex){const{selectedIndex:t}=this[Lt],e=t>=0&&o?o[t]:null;e?(e.id||(e.id=oo(e)),this.setAttribute("aria-activedescendant",e.id)):this.removeAttribute("aria-activedescendant")}if(t.selectedItemFlags&&(this[Lt].selectedItemFlags?this.setAttribute("aria-multiselectable","true"):this.removeAttribute("aria-multiselectable")),t.orientation){const{orientation:t}=this[Lt];this.setAttribute("aria-orientation",t)}if(t.role){const{role:t}=this[Lt];this.setAttribute("role",t)}}get role(){return super.role}set role(t){super.role=t,this[Nt]||this[Tt]({role:t})}}}(Ae(io(so(function(t){return class extends t{get[Y](){return Object.assign(super[Y]||{},{selectedIndex:-1,selectedItem:null})}[jt](t,e){const o=super[jt]?super[jt](t,e):{};return e.currentIndex?Object.assign(o,{selectedIndex:t.currentIndex}):e.selectedIndex&&Object.assign(o,{currentIndex:t.selectedIndex}),e.currentItem?Object.assign(o,{selectedItem:t.currentItem}):e.selectedItem&&Object.assign(o,{currentItem:t.selectedItem}),o}}}(ao(Ne(qi(lo(uo(fo(mo(oe(vo(wo(_o(ki(function(t){return class extends t{get[Y](){return Object.assign(super[Y]||{},{selectedText:""})}[nt](t){return super[nt]?super[nt](t):ho(t)}[jt](t,e){const o=super[jt]?super[jt](t,e):{};if(e.items||e.selectedIndex){const{items:e,selectedIndex:i}=t,n=e?e[i]:null,r=n?this[nt](n):"";Object.assign(o,{selectedText:r})}return o}get selectedText(){return this[Lt].selectedText}set selectedText(t){const{items:e}=this[Lt],o=e?function(t,e,o){return t.findIndex((t=>e(t)===o))}(e,this[nt],String(t)):-1;this[Tt]({selectedIndex:o})}}}(function(t){return class extends t{get[Y](){return Object.assign(super[Y]||{},{value:""})}[jt](t,e){const o=super[jt]?super[jt](t,e):{};if(e.items||e.selectedIndex){const{items:e,selectedIndex:i}=t,n=e?e[i]:null,r=n?n.getAttribute("value"):"";Object.assign(o,{value:r})}return o}get value(){return this[Lt].value}set value(t){const{items:e}=this[Lt],o=e?function(t,e){return t.findIndex((t=>t.getAttribute("value")===e))}(e,String(t)):-1;this[Tt]({selectedIndex:o})}}}(Io(So(Q)))))))))))))))))))));class Pi extends Ni{get[Y](){return Object.assign(super[Y],{orientation:"vertical"})}get orientation(){return this[Lt].orientation}set orientation(t){this[Tt]({orientation:t})}[qt](t){if(super[qt](t),t.items||t.currentIndex){const{currentIndex:t,items:e}=this[Lt];e&&e.forEach(((e,o)=>{e.toggleAttribute("selected",o===t)}))}if(t.orientation){const t="vertical"===this[Lt].orientation?{display:"block",flexDirection:"",overflowX:"hidden",overflowY:"auto"}:{display:"flex",flexDirection:"row",overflowX:"auto",overflowY:"hidden"};Object.assign(this[gt].container.style,t)}}get[Pt](){return this[gt].container}get[Wt](){const t=super[Wt];return t.content.append(P.html`
      <style>
        :host {
          box-sizing: border-box;
          cursor: default;
          display: flex;
          overflow: hidden; /* Container element is responsible for scrolling */
          -webkit-tap-highlight-color: transparent;
        }

        #container {
          display: flex;
          flex: 1;
          -webkit-overflow-scrolling: touch; /* for momentum scrolling */
        }
      </style>
      <div id="container" role="none">
        <slot id="slot"></slot>
      </div>
    `),t}}class Ti extends Si{get[Y](){return Object.assign(super[Y],{autoCompleteSelect:!1,opened:!1,originalText:"",textIndex:-1,texts:[]})}[wt](t,e){if(0===e.length||!t)return null;const o=e.toLowerCase();return t.find((t=>t.toLowerCase().startsWith(o)))||null}get opened(){return this[Lt].opened}set opened(t){this[Tt]({opened:t})}[qt](t){if(super[qt](t),this[ot]&&(this[gt].inner.addEventListener("input",(()=>{setTimeout((()=>{this[_t]=!0;const t=this.inner,e=this.value.toLowerCase(),o=t.selectionStart===e.length&&t.selectionEnd===e.length,i=this[Lt].originalText,n=e.startsWith(i)&&e.length===i.length+1;o&&n&&function(t){const e=t[wt](t.texts,t.value);e&&t[Tt]({autoCompleteSelect:!0,value:e})}(this),this[Tt]({originalText:e}),this[_t]=!1}))})),L(this[gt].accessibleList,Pi)),t.opened){const{opened:t}=this[Lt];this[gt].inner.setAttribute("aria-expanded",t.toString())}if(t.texts){const{texts:t}=this[Lt],e=null===t?[]:t.map((t=>{const e=document.createElement("div");return e.textContent=t,e}));k(this[gt].accessibleList,e)}if(t.textIndex){const{textIndex:t}=this[Lt],e=this[gt].accessibleList;"currentIndex"in e&&(e.currentIndex=t);const o=e.currentItem,i=o?o.id:null;i?this[bt].setAttribute("aria-activedescendant",i):this[bt].removeAttribute("aria-activedescendant")}}[kt](t){super[kt](t);const{autoCompleteSelect:e,originalText:o}=this[Lt];if(t.originalText&&e){this[Tt]({autoCompleteSelect:!1,selectionEnd:this[Lt].value.length,selectionStart:o.length});const t=new(window.InputEvent||Event)("input",{detail:{originalText:o}});this.dispatchEvent(t)}}[jt](t,e){const o=super[jt]?super[jt](t,e):{};if(e.valueCopy){const{texts:e,valueCopy:i}=t,n=e.indexOf(i);Object.assign(o,{textIndex:n})}return o}get[Wt](){const t=super[Wt],e=t.content.querySelector('[part~="input"]');return e&&(e.setAttribute("aria-autocomplete","both"),e.setAttribute("aria-controls","accessibleList"),e.setAttribute("role","combobox")),t.content.append(P.html`
      <style>
        #accessibleList {
          height: 0;
          position: absolute;
          width: 0;
        }
      </style>
      <div id="accessibleList" tabindex="-1"></div>
    `),t}get texts(){return this[Lt].texts}set texts(t){this[Tt]({texts:t})}get value(){return super.value}set value(t){super.value=t,this[Ct]&&!this.inner.matches(":focus")&&this[Tt]({originalText:t})}}class Ci extends Q{[qt](t){super[qt](t),this[ot]&&this.setAttribute("hidden","")}}const Ri=Te(_e(function(t){return class extends t{select(){this[bt].select()}get selectionEnd(){return this[bt].selectionEnd}set selectionEnd(t){this[bt].selectionEnd=t}get selectionStart(){return this[bt].selectionStart}set selectionStart(t){this[bt].selectionStart=t}setRangeText(...t){this[bt].setRangeText(...t)}setSelectionRange(...t){this[bt].setSelectionRange(...t);document.createElement("input").select}}}(Ne(qi(oe(To(ui(Go))))))));function Di(t,e,o){if(!o||o.inputPartType){const{inputPartType:o}=e,i=t.getElementById("input");i&&L(i,o)}}function Li(t,e){const o=t[yt];if(!o[e])return!1;const i=o[e]();if(i){const e=o.currentIndex;t[Tt]({currentIndex:e})}return i}const ji=Symbol("itemsChangedListener"),Mi=Symbol("previousItemsDelegate"),Fi=Symbol("currentIndexChangedListener");const Ui=io(function(t){return class extends t{[at](){return Li(this,at)}[lt](){return Li(this,lt)}[ct](){return Li(this,ct)}[dt](){return Li(this,dt)}}}(function(t){return class extends t{constructor(){super(),this[ji]=t=>{const e=t.target.items;this[Lt].items!==e&&this[Tt]({items:e})},this[Fi]=t=>{const e=t.detail.currentIndex;this[Lt].currentIndex!==e&&this[Tt]({currentIndex:e})}}get[Y](){return Object.assign(super[Y]||{},{items:null})}get items(){return this[Lt]?this[Lt].items:null}[qt](t){if(super[qt]&&super[qt](t),t.currentIndex){if(void 0===this[yt])throw`To use DelegateItemsMixin, ${this.constructor.name} must define a getter for [itemsDelegate].`;"currentIndex"in this[yt]&&(this[yt].currentIndex=this[Lt].currentIndex)}}[kt](t){super[kt]&&super[kt](t);const e=this[Mi];this[yt]!==e&&(e&&(e.removeEventListener(this[ji]),e.removeEventListener(this[Fi])),this[yt].addEventListener("itemschange",this[ji]),this[yt].addEventListener("currentindexchange",this[Fi]),this[Mi]=this[yt])}}}(ti(ki(class extends Ri{get[Y](){return Object.assign(super[Y],{ariaHasPopup:null,confirmedValue:"",focused:!1,inputPartType:"input",orientation:"vertical",placeholder:"",selectText:!1,value:""})}get[bt](){return this[gt].input}get input(){return this[Ct]?this[gt].input:null}get inputPartType(){return this[Lt].inputPartType}set inputPartType(t){this[Tt]({inputPartType:t})}[xt](t){let e;switch(t.key){case"ArrowDown":case"ArrowUp":case"PageDown":case"PageUp":this.closed&&(this.open(),e=!0);break;case"Enter":this.opened||(this.open(),e=!0);break;case"Escape":this.close({canceled:"Escape"}),e=!0;break;case"F4":this.opened?this.close({canceled:"F4"}):this.open(),e=!0}return e||super[xt]&&super[xt](t)}get placeholder(){return this[Lt].placeholder}set placeholder(t){this[Tt]({placeholder:String(t)})}[qt](t){if(super[qt](t),Di(this[Ct],this[Lt],t),t.inputPartType&&(this[gt].input.addEventListener("blur",(()=>{this[Tt]({focused:!1}),this.opened&&(this[_t]=!0,this.close(),this[_t]=!1)})),this[gt].input.addEventListener("focus",(()=>{this[_t]=!0,this[Tt]({focused:!0}),this[_t]=!1})),this[gt].input.addEventListener("input",(()=>{this[_t]=!0;const t=this[gt].input.value,e={value:t,selectText:!1};this.closed&&t>""&&(e.opened=!0),this[Tt](e),this[_t]=!1})),this[gt].input.addEventListener("keydown",(()=>{this[_t]=!0,this[Tt]({selectText:!1}),this[_t]=!1})),this[gt].input.addEventListener("mousedown",(t=>{0===t.button&&(this[_t]=!0,this[Tt]({selectText:!1}),this.closed&&!this.disabled&&this.open(),this[_t]=!1)}))),t.opened||t.inputPartType){const t=this[gt].input;if("opened"in t){const{opened:e}=this[Lt];t.opened=e}}if(t.popupTogglePartType){const t=this[gt].popupToggle,e=this[gt].input;t.addEventListener("mousedown",(t=>{0===t.button&&(this[Lt].disabled?t.preventDefault():(this[_t]=!0,this.toggle(),this[_t]=!1))})),t instanceof HTMLElement&&e instanceof HTMLElement&&O(t,e)}if(t.popupPartType){const t=this[gt].popup,e=t;t.removeAttribute("tabindex"),"backdropPartType"in t&&(e.backdropPartType=Ci),"autoFocus"in t&&(e.autoFocus=!1);const o=e.frame;o&&Object.assign(o.style,{display:"flex",flexDirection:"column"}),"closeOnWindowResize"in t&&(e.closeOnWindowResize=!1)}if(t.disabled){const{disabled:t}=this[Lt];this[gt].input.disabled=t,this[gt].popupToggle.disabled=t}if(t.placeholder){const{placeholder:t}=this[Lt];this[gt].input.placeholder=t}if(t.value){const{value:t}=this[Lt];this[gt].input.value=t}}[kt](t){super[kt](t),this[Lt].selectText&&setTimeout((()=>{if(this[Lt].selectText){const t=this[gt].input;t.value>""&&(t.selectionStart=0,t.selectionEnd=t.value.length)}}))}[jt](t,e){const o=super[jt](t,e);if(e.opened||e.value){const{closeResult:e,opened:i}=t;if(!i){e&&e.canceled?Object.assign(o,{value:t.confirmedValue}):Object.assign(o,{confirmedValue:t.value})}}if(e.opened&&!t.opened){const t=!matchMedia("(pointer: coarse)").matches;Object.assign(o,{selectText:t})}return o}get[Wt](){const t=super[Wt],e=t.content.querySelector('slot[name="source"]');return e&&e.replaceWith(P.html`
        <input id="input" part="input"></input>
      `),Di(t.content,this[Lt]),t.content.append(P.html`
        <style>
          [part~="source"] {
            background-color: inherit;
            display: inline-grid;
            grid-template-columns: 1fr auto;
            position: relative;
          }

          [part~="input"] {
            outline: none;
          }
        </style>
      `),t}get value(){return this[Lt].value}set value(t){this[Tt]({value:t})}})))));function $i(t,e,o){if(!o||o.listPartType){const{listPartType:o}=e,i=t.getElementById("list");i&&L(i,o)}}const Bi=fo(class extends Ui{get[Y](){return Object.assign(super[Y],{currentIndex:-1,listPartType:Pi,popupAlign:"stretch",selectedIndex:-1,selectedItem:null})}[nt](t){return ho(t)}[xt](t){let e;const o=this[gt].list;switch(t.key){case"ArrowDown":this.opened&&(e=t.altKey?this[lt]():this[ct]());break;case"ArrowUp":this.opened&&(e=t.altKey?this[at]():this[dt]());break;case"PageDown":this.opened&&(e=o.pageDown&&o.pageDown());break;case"PageUp":this.opened&&(e=o.pageUp&&o.pageUp())}if(e){const{selectedIndex:t}=this[Lt];t!==o.currentIndex&&this[Tt]({selectedIndex:o.currentIndex})}return e||super[xt]&&super[xt](t)}get listPartType(){return this[Lt].listPartType}set listPartType(t){this[Tt]({listPartType:t})}get[yt](){return this[gt].list}[qt](t){if(t.listPartType&&this[gt].list){O(this[gt].list,null)}if(super[qt](t),$i(this[Ct],this[Lt],t),t.listPartType){const t=this[gt].list;t instanceof HTMLElement&&O(t,this)}}[kt](t){super[kt](t),t.listPartType&&this[Tt]({popupList:this[gt].list})}get selectedItemValue(){const{items:t,selectedIndex:e}=this[Lt],o=t?t[e]:null;return o?o.getAttribute("value"):""}set selectedItemValue(t){const{items:e}=this[Lt],o=String(t),i=e.findIndex((t=>t.getAttribute("value")===o));this[Tt]({selectedIndex:i})}[jt](t,e){const o=super[jt](t,e);if(e.selectedIndex&&Object.assign(o,{currentIndex:t.selectedIndex}),e.selectedItem&&Object.assign(o,{currentItem:t.selectedItem}),e.items||e.value){const{value:e}=t,i=t.items;if(i&&null!=e){const t=e.toLowerCase(),n=i.findIndex((e=>this[nt](e).toLowerCase()===t));Object.assign(o,{currentIndex:n})}}if(e.selectedIndex){const{items:e,selectedIndex:i,value:n}=t,r=e?e[i]:null,s=r?this[nt](r):"",a=!matchMedia("(pointer: coarse)").matches;n!==s&&Object.assign(o,{selectText:a,value:s})}if(e.opened){const{closeResult:i,currentIndex:n,opened:r}=t,s=e.opened&&!r,a=i&&i.canceled;s&&!a&&n>=0&&Object.assign(o,{selectedIndex:n})}return e.items&&Object.assign(o,{popupMeasured:!1}),o}get[Wt](){const t=super[Wt],e=t.content.querySelector("slot:not([name])");return e&&e.replaceWith(P.html`
        <div id="list" part="list" tabindex="-1">
          <slot></slot>
        </div>
      `),t.content.append(P.html`
      <style>
        [part~="list"] {
          border: none;
          flex: 1;
          height: 100%;
          max-height: 100%;
          overscroll-behavior: contain;
          width: 100%;
        }
      </style>
    `),$i(t.content,this[Lt]),t}});class zi extends Bi{get[Y](){return Object.assign(super[Y],{inputPartType:Ti})}[qt](t){super[qt](t),t.texts&&"texts"in this[gt].input&&(this[gt].input.texts=this[Lt].texts)}}function Vi(t){return class extends t{get[Wt](){const t=super[Wt];return t.content.append(P.html`
        <style>
          :host {
            background: white;
            border: 1px solid gray;
            box-sizing: border-box;
          }

          [part~="input"] {
            background: transparent;
            border-color: transparent;
          }
        </style>
      `),t}}}class Hi extends(Vi(Ti)){}class Ki extends(Vi(Si)){}class Gi extends(function(t){return class extends t{get[Wt](){const t=super[Wt];return t.content.append(P.html`
          <style>
            :host {
              border: 1px solid gray;
              box-sizing: border-box;
            }

            ::slotted(*),
            #slot > * {
              padding: 0.25em;
            }

            ::slotted([selected]),
            #slot > [selected] {
              background: highlight;
              color: highlighttext;
            }

            @media (pointer: coarse) {
              ::slotted(*),
              #slot > * {
                padding: 1em;
              }
            }
          </style>
        `),t}}}(Pi)){}class Qi extends(function(t){return class extends t{get[Y](){return Object.assign(super[Y]||{},{inputPartType:Ki,popupPartType:fi,popupTogglePartType:pi})}[qt](t){if(super[qt]&&super[qt](t),t.inputPartType){const t=this[gt].input,e="inner"in t?t.inner:t;Object.assign(e.style,{outline:"none"})}if(t.opened||t.popupLayout){const{opened:t,popupLayout:e}=this[Lt],o=e?e.direction:null,i="10px",n="column-reverse"===o||"above"===o,r="column"===o||"below"===o?`polygon(0px 0px, 100% 0px, 100% -${i}, calc(100% + ${i}) -${i}, calc(100% + ${i}) calc(100% + ${i}), -${i} calc(100% + ${i}), -${i} -${i}, 0px -${i})`:n?`polygon(-${i} -${i}, calc(100% + ${i}) -${i}, calc(100% + ${i}) calc(100% + ${i}), 100% calc(100% + ${i}), 100% 100%, 0px 100%, 0px calc(100% + ${i}), -${i} calc(100% + ${i}))`:"";this[gt].popup.style.clipPath=t?r:""}}get[Wt](){const t=super[Wt];return t.content.append(P.html`
        <style>
          :host {
            background: white;
            border: 1px solid gray;
            box-sizing: border-box;
          }

          [part~="input"] {
            background: transparent;
            border: none;
          }
        </style>
      `),t}}}(zi)){get[Y](){return Object.assign(super[Y],{inputPartType:Hi,listPartType:Gi})}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function Wi(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}customElements.define("elix-auto-complete-combo-box",class extends Qi{}),
/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */
function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Quill=e():t.Quill=e()}("undefined"!=typeof self?self:void 0,(function(){return function(t){var e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=109)}([function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=o(17),n=o(18),r=o(19),s=o(45),a=o(46),l=o(47),u=o(48),c=o(49),d=o(12),p=o(32),h=o(33),f=o(31),m=o(1),v={Scope:m.Scope,create:m.create,find:m.find,query:m.query,register:m.register,Container:i.default,Format:n.default,Leaf:r.default,Embed:u.default,Scroll:s.default,Block:l.default,Inline:a.default,Text:c.default,Attributor:{Attribute:d.default,Class:p.default,Style:h.default,Store:f.default}};e.default=v},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var o=this;return e="[Parchment] "+e,(o=t.call(this,e)||this).message=e,o.name=o.constructor.name,o}return n(e,t),e}(Error);e.ParchmentError=r;var s,a={},l={},u={},c={};function d(t,e){var o;if(void 0===e&&(e=s.ANY),"string"==typeof t)o=c[t]||a[t];else if(t instanceof Text||t.nodeType===Node.TEXT_NODE)o=c.text;else if("number"==typeof t)t&s.LEVEL&s.BLOCK?o=c.block:t&s.LEVEL&s.INLINE&&(o=c.inline);else if(t instanceof HTMLElement){var i=(t.getAttribute("class")||"").split(/\s+/);for(var n in i)if(o=l[i[n]])break;o=o||u[t.tagName]}return null==o?null:e&s.LEVEL&o.scope&&e&s.TYPE&o.scope?o:null}e.DATA_KEY="__blot",function(t){t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY"}(s=e.Scope||(e.Scope={})),e.create=function(t,e){var o=d(t);if(null==o)throw new r("Unable to create "+t+" blot");var i=o,n=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:i.create(e);return new i(n,e)},e.find=function t(o,i){return void 0===i&&(i=!1),null==o?null:null!=o[e.DATA_KEY]?o[e.DATA_KEY].blot:i?t(o.parentNode,i):null},e.query=d,e.register=function t(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];if(e.length>1)return e.map((function(e){return t(e)}));var i=e[0];if("string"!=typeof i.blotName&&"string"!=typeof i.attrName)throw new r("Invalid definition");if("abstract"===i.blotName)throw new r("Cannot register abstract class");if(c[i.blotName||i.attrName]=i,"string"==typeof i.keyName)a[i.keyName]=i;else if(null!=i.className&&(l[i.className]=i),null!=i.tagName){Array.isArray(i.tagName)?i.tagName=i.tagName.map((function(t){return t.toUpperCase()})):i.tagName=i.tagName.toUpperCase();var n=Array.isArray(i.tagName)?i.tagName:[i.tagName];n.forEach((function(t){null!=u[t]&&null!=i.className||(u[t]=i)}))}return i}},function(t,e,o){var i=o(51),n=o(11),r=o(3),s=o(20),a=String.fromCharCode(0),l=function(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]};l.prototype.insert=function(t,e){var o={};return 0===t.length?this:(o.insert=t,null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(o.attributes=e),this.push(o))},l.prototype.delete=function(t){return t<=0?this:this.push({delete:t})},l.prototype.retain=function(t,e){if(t<=0)return this;var o={retain:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(o.attributes=e),this.push(o)},l.prototype.push=function(t){var e=this.ops.length,o=this.ops[e-1];if(t=r(!0,{},t),"object"==typeof o){if("number"==typeof t.delete&&"number"==typeof o.delete)return this.ops[e-1]={delete:o.delete+t.delete},this;if("number"==typeof o.delete&&null!=t.insert&&(e-=1,"object"!=typeof(o=this.ops[e-1])))return this.ops.unshift(t),this;if(n(t.attributes,o.attributes)){if("string"==typeof t.insert&&"string"==typeof o.insert)return this.ops[e-1]={insert:o.insert+t.insert},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof o.retain)return this.ops[e-1]={retain:o.retain+t.retain},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this},l.prototype.chop=function(){var t=this.ops[this.ops.length-1];return t&&t.retain&&!t.attributes&&this.ops.pop(),this},l.prototype.filter=function(t){return this.ops.filter(t)},l.prototype.forEach=function(t){this.ops.forEach(t)},l.prototype.map=function(t){return this.ops.map(t)},l.prototype.partition=function(t){var e=[],o=[];return this.forEach((function(i){(t(i)?e:o).push(i)})),[e,o]},l.prototype.reduce=function(t,e){return this.ops.reduce(t,e)},l.prototype.changeLength=function(){return this.reduce((function(t,e){return e.insert?t+s.length(e):e.delete?t-e.delete:t}),0)},l.prototype.length=function(){return this.reduce((function(t,e){return t+s.length(e)}),0)},l.prototype.slice=function(t,e){t=t||0,"number"!=typeof e&&(e=1/0);for(var o=[],i=s.iterator(this.ops),n=0;n<e&&i.hasNext();){var r;n<t?r=i.next(t-n):(r=i.next(e-n),o.push(r)),n+=s.length(r)}return new l(o)},l.prototype.compose=function(t){var e=s.iterator(this.ops),o=s.iterator(t.ops),i=[],r=o.peek();if(null!=r&&"number"==typeof r.retain&&null==r.attributes){for(var a=r.retain;"insert"===e.peekType()&&e.peekLength()<=a;)a-=e.peekLength(),i.push(e.next());r.retain-a>0&&o.next(r.retain-a)}for(var u=new l(i);e.hasNext()||o.hasNext();)if("insert"===o.peekType())u.push(o.next());else if("delete"===e.peekType())u.push(e.next());else{var c=Math.min(e.peekLength(),o.peekLength()),d=e.next(c),p=o.next(c);if("number"==typeof p.retain){var h={};"number"==typeof d.retain?h.retain=c:h.insert=d.insert;var f=s.attributes.compose(d.attributes,p.attributes,"number"==typeof d.retain);if(f&&(h.attributes=f),u.push(h),!o.hasNext()&&n(u.ops[u.ops.length-1],h)){var m=new l(e.rest());return u.concat(m).chop()}}else"number"==typeof p.delete&&"number"==typeof d.retain&&u.push(p)}return u.chop()},l.prototype.concat=function(t){var e=new l(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e},l.prototype.diff=function(t,e){if(this.ops===t.ops)return new l;var o=[this,t].map((function(e){return e.map((function(o){if(null!=o.insert)return"string"==typeof o.insert?o.insert:a;throw new Error("diff() called "+(e===t?"on":"with")+" non-document")})).join("")})),r=new l,u=i(o[0],o[1],e),c=s.iterator(this.ops),d=s.iterator(t.ops);return u.forEach((function(t){for(var e=t[1].length;e>0;){var o=0;switch(t[0]){case i.INSERT:o=Math.min(d.peekLength(),e),r.push(d.next(o));break;case i.DELETE:o=Math.min(e,c.peekLength()),c.next(o),r.delete(o);break;case i.EQUAL:o=Math.min(c.peekLength(),d.peekLength(),e);var a=c.next(o),l=d.next(o);n(a.insert,l.insert)?r.retain(o,s.attributes.diff(a.attributes,l.attributes)):r.push(l).delete(o)}e-=o}})),r.chop()},l.prototype.eachLine=function(t,e){e=e||"\n";for(var o=s.iterator(this.ops),i=new l,n=0;o.hasNext();){if("insert"!==o.peekType())return;var r=o.peek(),a=s.length(r)-o.peekLength(),u="string"==typeof r.insert?r.insert.indexOf(e,a)-a:-1;if(u<0)i.push(o.next());else if(u>0)i.push(o.next(u));else{if(!1===t(i,o.next(1).attributes||{},n))return;n+=1,i=new l}}i.length()>0&&t(i,{},n)},l.prototype.transform=function(t,e){if(e=!!e,"number"==typeof t)return this.transformPosition(t,e);for(var o=s.iterator(this.ops),i=s.iterator(t.ops),n=new l;o.hasNext()||i.hasNext();)if("insert"!==o.peekType()||!e&&"insert"===i.peekType())if("insert"===i.peekType())n.push(i.next());else{var r=Math.min(o.peekLength(),i.peekLength()),a=o.next(r),u=i.next(r);if(a.delete)continue;u.delete?n.push(u):n.retain(r,s.attributes.transform(a.attributes,u.attributes,e))}else n.retain(s.length(o.next()));return n.chop()},l.prototype.transformPosition=function(t,e){e=!!e;for(var o=s.iterator(this.ops),i=0;o.hasNext()&&i<=t;){var n=o.peekLength(),r=o.peekType();o.next(),"delete"!==r?("insert"===r&&(i<t||!e)&&(t+=n),i+=n):t-=Math.min(n,t-i)}return t},t.exports=l},function(t,e){var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===i.call(t)},a=function(t){if(!t||"[object Object]"!==i.call(t))return!1;var e,n=o.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&o.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;for(e in t);return void 0===e||o.call(t,e)},l=function(t,e){n&&"__proto__"===e.name?n(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},u=function(t,e){if("__proto__"===e){if(!o.call(t,e))return;if(r)return r(t,e).value}return t[e]};t.exports=function t(){var e,o,i,n,r,c,d=arguments[0],p=1,h=arguments.length,f=!1;for("boolean"==typeof d&&(f=d,d=arguments[1]||{},p=2),(null==d||"object"!=typeof d&&"function"!=typeof d)&&(d={});p<h;++p)if(null!=(e=arguments[p]))for(o in e)i=u(d,o),d!==(n=u(e,o))&&(f&&n&&(a(n)||(r=s(n)))?(r?(r=!1,c=i&&s(i)?i:[]):c=i&&a(i)?i:{},l(d,{name:o,newValue:t(f,c,n)})):void 0!==n&&l(d,{name:o,newValue:n}));return d}},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BlockEmbed=e.bubbleFormats=void 0;var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),n=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},r=d(o(3)),s=d(o(2)),a=d(o(0)),l=d(o(16)),u=d(o(6)),c=d(o(7));function d(t){return t&&t.__esModule?t:{default:t}}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var m=function(t){function e(){return p(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return f(e,t),i(e,[{key:"attach",value:function(){n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attach",this).call(this),this.attributes=new a.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new s.default).insert(this.value(),(0,r.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(t,e){var o=a.default.query(t,a.default.Scope.BLOCK_ATTRIBUTE);null!=o&&this.attributes.attribute(o,e)}},{key:"formatAt",value:function(t,e,o,i){this.format(o,i)}},{key:"insertAt",value:function(t,o,i){if("string"==typeof o&&o.endsWith("\n")){var r=a.default.create(v.blotName);this.parent.insertBefore(r,0===t?this:this.next),r.insertAt(0,o.slice(0,-1))}else n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,o,i)}}]),e}(a.default.Embed);m.scope=a.default.Scope.BLOCK_BLOT;var v=function(t){function e(t){p(this,e);var o=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o.cache={},o}return f(e,t),i(e,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(a.default.Leaf).reduce((function(t,e){return 0===e.length()?t:t.insert(e.value(),g(e))}),new s.default).insert("\n",g(this))),this.cache.delta}},{key:"deleteAt",value:function(t,o){n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deleteAt",this).call(this,t,o),this.cache={}}},{key:"formatAt",value:function(t,o,i,r){o<=0||(a.default.query(i,a.default.Scope.BLOCK)?t+o===this.length()&&this.format(i,r):n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,Math.min(o,this.length()-t-1),i,r),this.cache={})}},{key:"insertAt",value:function(t,o,i){if(null!=i)return n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,o,i);if(0!==o.length){var r=o.split("\n"),s=r.shift();s.length>0&&(t<this.length()-1||null==this.children.tail?n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,Math.min(t,this.length()-1),s):this.children.tail.insertAt(this.children.tail.length(),s),this.cache={});var a=this;r.reduce((function(t,e){return(a=a.split(t,!0)).insertAt(0,e),e.length}),t+s.length)}}},{key:"insertBefore",value:function(t,o){var i=this.children.head;n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,o),i instanceof l.default&&i.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(t,o){n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveChildren",this).call(this,t,o),this.cache={}}},{key:"optimize",value:function(t){n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.cache={}}},{key:"path",value:function(t){return n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"path",this).call(this,t,!0)}},{key:"removeChild",value:function(t){n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeChild",this).call(this,t),this.cache={}}},{key:"split",value:function(t){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(o&&(0===t||t>=this.length()-1)){var i=this.clone();return 0===t?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}var r=n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"split",this).call(this,t,o);return this.cache={},r}}]),e}(a.default.Block);function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==t?e:("function"==typeof t.formats&&(e=(0,r.default)(e,t.formats())),null==t.parent||"scroll"==t.parent.blotName||t.parent.statics.scope!==t.statics.scope?e:g(t.parent,e))}v.blotName="block",v.tagName="P",v.defaultChild="break",v.allowedChildren=[u.default,a.default.Embed,c.default],e.bubbleFormats=g,e.BlockEmbed=m,e.default=v},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.overload=e.expandConfig=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}();o(50);var s=v(o(2)),a=v(o(14)),l=v(o(8)),u=v(o(9)),c=v(o(0)),d=o(15),p=v(d),h=v(o(3)),f=v(o(10)),m=v(o(34));function v(t){return t&&t.__esModule?t:{default:t}}function g(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var y=(0,f.default)("quill"),x=function(){function t(e){var o=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(b(this,t),this.options=w(e,i),this.container=this.options.container,null==this.container)return y.error("Invalid Quill container",e);this.options.debug&&t.debug(this.options.debug);var n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new l.default,this.scroll=c.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new a.default(this.scroll),this.selection=new p.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(l.default.events.EDITOR_CHANGE,(function(t){t===l.default.events.TEXT_CHANGE&&o.root.classList.toggle("ql-blank",o.editor.isBlank())})),this.emitter.on(l.default.events.SCROLL_UPDATE,(function(t,e){var i=o.selection.lastRange,n=i&&0===i.length?i.index:void 0;E.call(o,(function(){return o.editor.update(null,e,n)}),t)}));var r=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+n+"<p><br></p></div>");this.setContents(r),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return r(t,null,[{key:"debug",value:function(t){!0===t&&(t="log"),f.default.level(t)}},{key:"find",value:function(t){return t.__quill||c.default.find(t)}},{key:"import",value:function(t){return null==this.imports[t]&&y.error("Cannot import "+t+". Are you sure it was registered?"),this.imports[t]}},{key:"register",value:function(t,e){var o=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof t){var n=t.attrName||t.blotName;"string"==typeof n?this.register("formats/"+n,t,e):Object.keys(t).forEach((function(i){o.register(i,t[i],e)}))}else null==this.imports[t]||i||y.warn("Overwriting "+t+" with",e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&"abstract"!==e.blotName?c.default.register(e):t.startsWith("modules")&&"function"==typeof e.register&&e.register()}}]),r(t,[{key:"addContainer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){var o=t;(t=document.createElement("div")).classList.add(o)}return this.container.insertBefore(t,e),t}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(t,e,o){var i=this,r=O(t,e,o),s=n(r,4);return t=s[0],e=s[1],o=s[3],E.call(this,(function(){return i.editor.deleteText(t,e)}),o,t,-1*e)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}},{key:"focus",value:function(){var t=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=t,this.scrollIntoView()}},{key:"format",value:function(t,e){var o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;return E.call(this,(function(){var i=o.getSelection(!0),n=new s.default;if(null==i)return n;if(c.default.query(t,c.default.Scope.BLOCK))n=o.editor.formatLine(i.index,i.length,g({},t,e));else{if(0===i.length)return o.selection.format(t,e),n;n=o.editor.formatText(i.index,i.length,g({},t,e))}return o.setSelection(i,l.default.sources.SILENT),n}),i)}},{key:"formatLine",value:function(t,e,o,i,r){var s,a=this,l=O(t,e,o,i,r),u=n(l,4);return t=u[0],e=u[1],s=u[2],r=u[3],E.call(this,(function(){return a.editor.formatLine(t,e,s)}),r,t,0)}},{key:"formatText",value:function(t,e,o,i,r){var s,a=this,l=O(t,e,o,i,r),u=n(l,4);return t=u[0],e=u[1],s=u[2],r=u[3],E.call(this,(function(){return a.editor.formatText(t,e,s)}),r,t,0)}},{key:"getBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=void 0;o="number"==typeof t?this.selection.getBounds(t,e):this.selection.getBounds(t.index,t.length);var i=this.container.getBoundingClientRect();return{bottom:o.bottom-i.top,height:o.height,left:o.left-i.left,right:o.right-i.left,top:o.top-i.top,width:o.width}}},{key:"getContents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,o=O(t,e),i=n(o,2);return t=i[0],e=i[1],this.editor.getContents(t,e)}},{key:"getFormat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof t?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}},{key:"getIndex",value:function(t){return t.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(t){return this.scroll.leaf(t)}},{key:"getLine",value:function(t){return this.scroll.line(t)}},{key:"getLines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}},{key:"getModule",value:function(t){return this.theme.modules[t]}},{key:"getSelection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,o=O(t,e),i=n(o,2);return t=i[0],e=i[1],this.editor.getText(t,e)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(e,o,i){var n=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.sources.API;return E.call(this,(function(){return n.editor.insertEmbed(e,o,i)}),r,e)}},{key:"insertText",value:function(t,e,o,i,r){var s,a=this,l=O(t,0,o,i,r),u=n(l,4);return t=u[0],s=u[2],r=u[3],E.call(this,(function(){return a.editor.insertText(t,e,s)}),r,t,e.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(t,e,o){this.clipboard.dangerouslyPasteHTML(t,e,o)}},{key:"removeFormat",value:function(t,e,o){var i=this,r=O(t,e,o),s=n(r,4);return t=s[0],e=s[1],o=s[3],E.call(this,(function(){return i.editor.removeFormat(t,e)}),o,t)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return E.call(this,(function(){t=new s.default(t);var o=e.getLength(),i=e.editor.deleteText(0,o),n=e.editor.applyDelta(t),r=n.ops[n.ops.length-1];return null!=r&&"string"==typeof r.insert&&"\n"===r.insert[r.insert.length-1]&&(e.editor.deleteText(e.getLength()-1,1),n.delete(1)),i.compose(n)}),o)}},{key:"setSelection",value:function(e,o,i){if(null==e)this.selection.setRange(null,o||t.sources.API);else{var r=O(e,o,i),s=n(r,4);e=s[0],o=s[1],i=s[3],this.selection.setRange(new d.Range(e,o),i),i!==l.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API,o=(new s.default).insert(t);return this.setContents(o,e)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,e=this.scroll.update(t);return this.selection.update(t),e}},{key:"updateContents",value:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return E.call(this,(function(){return t=new s.default(t),e.editor.applyDelta(t,o)}),o,!0)}}]),t}();function w(t,e){if((e=(0,h.default)(!0,{container:t,modules:{clipboard:!0,keyboard:!0,history:!0}},e)).theme&&e.theme!==x.DEFAULTS.theme){if(e.theme=x.import("themes/"+e.theme),null==e.theme)throw new Error("Invalid theme "+e.theme+". Did you register it?")}else e.theme=m.default;var o=(0,h.default)(!0,{},e.theme.DEFAULTS);[o,e].forEach((function(t){t.modules=t.modules||{},Object.keys(t.modules).forEach((function(e){!0===t.modules[e]&&(t.modules[e]={})}))}));var i=Object.keys(o.modules).concat(Object.keys(e.modules)).reduce((function(t,e){var o=x.import("modules/"+e);return null==o?y.error("Cannot load "+e+" module. Are you sure you registered it?"):t[e]=o.DEFAULTS||{},t}),{});return null!=e.modules&&e.modules.toolbar&&e.modules.toolbar.constructor!==Object&&(e.modules.toolbar={container:e.modules.toolbar}),e=(0,h.default)(!0,{},x.DEFAULTS,{modules:i},o,e),["bounds","container","scrollingContainer"].forEach((function(t){"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))})),e.modules=Object.keys(e.modules).reduce((function(t,o){return e.modules[o]&&(t[o]=e.modules[o]),t}),{}),e}function E(t,e,o,i){if(this.options.strict&&!this.isEnabled()&&e===l.default.sources.USER)return new s.default;var n=null==o?null:this.getSelection(),r=this.editor.delta,a=t();if(null!=n&&(!0===o&&(o=n.index),null==i?n=A(n,a,e):0!==i&&(n=A(n,o,i,e)),this.setSelection(n,l.default.sources.SILENT)),a.length()>0){var u,c,d=[l.default.events.TEXT_CHANGE,a,r,e];if((u=this.emitter).emit.apply(u,[l.default.events.EDITOR_CHANGE].concat(d)),e!==l.default.sources.SILENT)(c=this.emitter).emit.apply(c,d)}return a}function O(t,e,o,n,r){var s={};return"number"==typeof t.index&&"number"==typeof t.length?"number"!=typeof e?(r=n,n=o,o=e,e=t.length,t=t.index):(e=t.length,t=t.index):"number"!=typeof e&&(r=n,n=o,o=e,e=0),"object"===(void 0===o?"undefined":i(o))?(s=o,r=n):"string"==typeof o&&(null!=n?s[o]=n:r=o),[t,e,s,r=r||l.default.sources.API]}function A(t,e,o,i){if(null==t)return null;var r=void 0,a=void 0;if(e instanceof s.default){var u=[t.index,t.index+t.length].map((function(t){return e.transformPosition(t,i!==l.default.sources.USER)})),c=n(u,2);r=c[0],a=c[1]}else{var p=[t.index,t.index+t.length].map((function(t){return t<e||t===e&&i===l.default.sources.USER?t:o>=0?t+o:Math.max(e,t+o)})),h=n(p,2);r=h[0],a=h[1]}return new d.Range(r,a-r)}x.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},x.events=l.default.events,x.sources=l.default.sources,x.version="1.3.7",x.imports={delta:s.default,parchment:c.default,"core/module":u.default,"core/theme":m.default},e.expandConfig=w,e.overload=O,e.default=x},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),n=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},r=a(o(7)),s=a(o(0));function a(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c=function(t){function e(){return l(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"formatAt",value:function(t,o,i,r){if(e.compare(this.statics.blotName,i)<0&&s.default.query(i,s.default.Scope.BLOT)){var a=this.isolate(t,o);r&&a.wrap(i,r)}else n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,o,i,r)}},{key:"optimize",value:function(t){if(n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.parent instanceof e&&e.compare(this.statics.blotName,this.parent.statics.blotName)>0){var o=this.parent.isolate(this.offset(),this.length());this.moveChildren(o),o.wrap(this)}}}],[{key:"compare",value:function(t,o){var i=e.order.indexOf(t),n=e.order.indexOf(o);return i>=0||n>=0?i-n:t===o?0:t<o?-1:1}}]),e}(s.default.Inline);c.allowedChildren=[c,s.default.Embed,r.default],c.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],e.default=c},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=o(0);function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=function(t){function e(){return r(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((i=n)&&i.__esModule?i:{default:i}).default.Text);e.default=a},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),n=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},r=s(o(54));function s(t){return t&&t.__esModule?t:{default:t}}var a=(0,s(o(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((function(t){document.addEventListener(t,(function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];[].slice.call(document.querySelectorAll(".ql-container")).forEach((function(t){var o;t.__quill&&t.__quill.emitter&&(o=t.__quill.emitter).handleDOM.apply(o,e)}))}))}));var l=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.listeners={},t.on("error",a.error),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"emit",value:function(){a.log.apply(a,arguments),n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(t){for(var e=arguments.length,o=Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];(this.listeners[t.type]||[]).forEach((function(e){var i=e.node,n=e.handler;(t.target===i||i.contains(t.target))&&n.apply(void 0,[t].concat(o))}))}},{key:"listenDOM",value:function(t,e,o){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({node:e,handler:o})}}]),e}(r.default);l.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},l.sources={API:"api",SILENT:"silent",USER:"user"},e.default=l},function(t,e,o){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.quill=e,this.options=o};n.DEFAULTS={},e.default=n},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=["error","warn","log","info"],n="warn";function r(t){if(i.indexOf(t)<=i.indexOf(n)){for(var e,o=arguments.length,r=Array(o>1?o-1:0),s=1;s<o;s++)r[s-1]=arguments[s];(e=console)[t].apply(e,r)}}function s(t){return i.reduce((function(e,o){return e[o]=r.bind(console,o,t),e}),{})}r.level=s.level=function(t){n=t},e.default=s},function(t,e,o){var i=Array.prototype.slice,n=o(52),r=o(53),s=t.exports=function(t,e,o){return o||(o={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?o.strict?t===e:t==e:function(t,e,o){var u,c;if(a(t)||a(e))return!1;if(t.prototype!==e.prototype)return!1;if(r(t))return!!r(e)&&(t=i.call(t),e=i.call(e),s(t,e,o));if(l(t)){if(!l(e))return!1;if(t.length!==e.length)return!1;for(u=0;u<t.length;u++)if(t[u]!==e[u])return!1;return!0}try{var d=n(t),p=n(e)}catch(t){return!1}if(d.length!=p.length)return!1;for(d.sort(),p.sort(),u=d.length-1;u>=0;u--)if(d[u]!=p[u])return!1;for(u=d.length-1;u>=0;u--)if(c=d[u],!s(t[c],e[c],o))return!1;return typeof t==typeof e}(t,e,o))};function a(t){return null==t}function l(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),n=function(){function t(t,e,o){void 0===o&&(o={}),this.attrName=t,this.keyName=e;var n=i.Scope.TYPE&i.Scope.ATTRIBUTE;null!=o.scope?this.scope=o.scope&i.Scope.LEVEL|n:this.scope=i.Scope.ATTRIBUTE,null!=o.whitelist&&(this.whitelist=o.whitelist)}return t.keys=function(t){return[].map.call(t.attributes,(function(t){return t.name}))},t.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)},t.prototype.canAdd=function(t,e){return null!=i.query(t,i.Scope.BLOT&(this.scope|i.Scope.TYPE))&&(null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1))},t.prototype.remove=function(t){t.removeAttribute(this.keyName)},t.prototype.value=function(t){var e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""},t}();e.default=n},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Code=void 0;var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=d(o(2)),a=d(o(0)),l=d(o(4)),u=d(o(6)),c=d(o(7));function d(t){return t&&t.__esModule?t:{default:t}}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var m=function(t){function e(){return p(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return f(e,t),e}(u.default);m.blotName="code",m.tagName="CODE";var v=function(t){function e(){return p(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return f(e,t),n(e,[{key:"delta",value:function(){var t=this,e=this.domNode.textContent;return e.endsWith("\n")&&(e=e.slice(0,-1)),e.split("\n").reduce((function(e,o){return e.insert(o).insert("\n",t.formats())}),new s.default)}},{key:"format",value:function(t,o){if(t!==this.statics.blotName||!o){var n=this.descendant(c.default,this.length()-1),s=i(n,1)[0];null!=s&&s.deleteAt(s.length()-1,1),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,o)}}},{key:"formatAt",value:function(t,o,i,n){if(0!==o&&null!=a.default.query(i,a.default.Scope.BLOCK)&&(i!==this.statics.blotName||n!==this.statics.formats(this.domNode))){var r=this.newlineIndex(t);if(!(r<0||r>=t+o)){var s=this.newlineIndex(t,!0)+1,l=r-s+1,u=this.isolate(s,l),c=u.next;u.format(i,n),c instanceof e&&c.formatAt(0,t-s+o-l,i,n)}}}},{key:"insertAt",value:function(t,e,o){if(null==o){var n=this.descendant(c.default,t),r=i(n,2),s=r[0],a=r[1];s.insertAt(a,e)}}},{key:"length",value:function(){var t=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?t:t+1}},{key:"newlineIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return this.domNode.textContent.slice(0,t).lastIndexOf("\n");var o=this.domNode.textContent.slice(t).indexOf("\n");return o>-1?t+o:-1}},{key:"optimize",value:function(t){this.domNode.textContent.endsWith("\n")||this.appendChild(a.default.create("text","\n")),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t);var o=this.next;null!=o&&o.prev===this&&o.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===o.statics.formats(o.domNode)&&(o.optimize(t),o.moveChildren(this),o.remove())}},{key:"replace",value:function(t){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replace",this).call(this,t),[].slice.call(this.domNode.querySelectorAll("*")).forEach((function(t){var e=a.default.find(t);null==e?t.parentNode.removeChild(t):e instanceof a.default.Embed?e.remove():e.unwrap()}))}}],[{key:"create",value:function(t){var o=r(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return o.setAttribute("spellcheck",!1),o}},{key:"formats",value:function(){return!0}}]),e}(l.default);v.blotName="code-block",v.tagName="PRE",v.TAB="  ",e.Code=m,e.default=v},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),s=g(o(2)),a=g(o(20)),l=g(o(0)),u=g(o(13)),c=g(o(24)),d=o(4),p=g(d),h=g(o(16)),f=g(o(21)),m=g(o(11)),v=g(o(3));function g(t){return t&&t.__esModule?t:{default:t}}var b=/^[ -~]*$/,y=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scroll=e,this.delta=this.getDelta()}return r(t,[{key:"applyDelta",value:function(t){var e=this,o=!1;this.scroll.update();var r=this.scroll.length();return this.scroll.batchStart(),(t=function(t){return t.reduce((function(t,e){if(1===e.insert){var o=(0,f.default)(e.attributes);return delete o.image,t.insert({image:e.attributes.image},o)}if(null==e.attributes||!0!==e.attributes.list&&!0!==e.attributes.bullet||((e=(0,f.default)(e)).attributes.list?e.attributes.list="ordered":(e.attributes.list="bullet",delete e.attributes.bullet)),"string"==typeof e.insert){var i=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(i,e.attributes)}return t.push(e)}),new s.default)}(t)).reduce((function(t,s){var u=s.retain||s.delete||s.insert.length||1,c=s.attributes||{};if(null!=s.insert){if("string"==typeof s.insert){var h=s.insert;h.endsWith("\n")&&o&&(o=!1,h=h.slice(0,-1)),t>=r&&!h.endsWith("\n")&&(o=!0),e.scroll.insertAt(t,h);var f=e.scroll.line(t),m=n(f,2),g=m[0],b=m[1],y=(0,v.default)({},(0,d.bubbleFormats)(g));if(g instanceof p.default){var x=g.descendant(l.default.Leaf,b),w=n(x,1)[0];y=(0,v.default)(y,(0,d.bubbleFormats)(w))}c=a.default.attributes.diff(y,c)||{}}else if("object"===i(s.insert)){var E=Object.keys(s.insert)[0];if(null==E)return t;e.scroll.insertAt(t,E,s.insert[E])}r+=u}return Object.keys(c).forEach((function(o){e.scroll.formatAt(t,u,o,c[o])})),t+u}),0),t.reduce((function(t,o){return"number"==typeof o.delete?(e.scroll.deleteAt(t,o.delete),t):t+(o.retain||o.insert.length||1)}),0),this.scroll.batchEnd(),this.update(t)}},{key:"deleteText",value:function(t,e){return this.scroll.deleteAt(t,e),this.update((new s.default).retain(t).delete(e))}},{key:"formatLine",value:function(t,e){var o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(i).forEach((function(n){if(null==o.scroll.whitelist||o.scroll.whitelist[n]){var r=o.scroll.lines(t,Math.max(e,1)),s=e;r.forEach((function(e){var r=e.length();if(e instanceof u.default){var a=t-e.offset(o.scroll),l=e.newlineIndex(a+s)-a+1;e.formatAt(a,l,n,i[n])}else e.format(n,i[n]);s-=r}))}})),this.scroll.optimize(),this.update((new s.default).retain(t).retain(e,(0,f.default)(i)))}},{key:"formatText",value:function(t,e){var o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(i).forEach((function(n){o.scroll.formatAt(t,e,n,i[n])})),this.update((new s.default).retain(t).retain(e,(0,f.default)(i)))}},{key:"getContents",value:function(t,e){return this.delta.slice(t,t+e)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce((function(t,e){return t.concat(e.delta())}),new s.default)}},{key:"getFormat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=[],i=[];0===e?this.scroll.path(t).forEach((function(t){var e=n(t,1)[0];e instanceof p.default?o.push(e):e instanceof l.default.Leaf&&i.push(e)})):(o=this.scroll.lines(t,e),i=this.scroll.descendants(l.default.Leaf,t,e));var r=[o,i].map((function(t){if(0===t.length)return{};for(var e=(0,d.bubbleFormats)(t.shift());Object.keys(e).length>0;){var o=t.shift();if(null==o)return e;e=x((0,d.bubbleFormats)(o),e)}return e}));return v.default.apply(v.default,r)}},{key:"getText",value:function(t,e){return this.getContents(t,e).filter((function(t){return"string"==typeof t.insert})).map((function(t){return t.insert})).join("")}},{key:"insertEmbed",value:function(t,e,o){return this.scroll.insertAt(t,e,o),this.update((new s.default).retain(t).insert(function(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}({},e,o)))}},{key:"insertText",value:function(t,e){var o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(i).forEach((function(n){o.scroll.formatAt(t,e.length,n,i[n])})),this.update((new s.default).retain(t).insert(e,(0,f.default)(i)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var t=this.scroll.children.head;return t.statics.blotName===p.default.blotName&&(!(t.children.length>1)&&t.children.head instanceof h.default)}},{key:"removeFormat",value:function(t,e){var o=this.getText(t,e),i=this.scroll.line(t+e),r=n(i,2),a=r[0],l=r[1],c=0,d=new s.default;null!=a&&(c=a instanceof u.default?a.newlineIndex(l)-l+1:a.length()-l,d=a.delta().slice(l,l+c-1).insert("\n"));var p=this.getContents(t,e+c).diff((new s.default).insert(o).concat(d)),h=(new s.default).retain(t).concat(p);return this.applyDelta(h)}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(b)&&l.default.find(e[0].target)){var n=l.default.find(e[0].target),r=(0,d.bubbleFormats)(n),a=n.offset(this.scroll),u=e[0].oldValue.replace(c.default.CONTENTS,""),p=(new s.default).insert(u),h=(new s.default).insert(n.value()),f=(new s.default).retain(a).concat(p.diff(h,o));t=f.reduce((function(t,e){return e.insert?t.insert(e.insert,r):t.push(e)}),new s.default),this.delta=i.compose(t)}else this.delta=this.getDelta(),t&&(0,m.default)(i.compose(t),this.delta)||(t=i.diff(this.delta,o));return t}}]),t}();function x(t,e){return Object.keys(e).reduce((function(o,i){return null==t[i]||(e[i]===t[i]?o[i]=e[i]:Array.isArray(e[i])?e[i].indexOf(t[i])<0&&(o[i]=e[i].concat([t[i]])):o[i]=[e[i],t[i]]),o}),{})}e.default=y},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Range=void 0;var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=u(o(0)),s=u(o(21)),a=u(o(11)),l=u(o(8));function u(t){return t&&t.__esModule?t:{default:t}}function c(t){if(Array.isArray(t)){for(var e=0,o=Array(t.length);e<t.length;e++)o[e]=t[e];return o}return Array.from(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var p=(0,u(o(10)).default)("quill:selection"),h=function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d(this,t),this.index=e,this.length=o},f=function(){function t(e,o){var i=this;d(this,t),this.emitter=o,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=r.default.create("cursor",this),this.lastRange=this.savedRange=new h(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){i.mouseDown||setTimeout(i.update.bind(i,l.default.sources.USER),1)})),this.emitter.on(l.default.events.EDITOR_CHANGE,(function(t,e){t===l.default.events.TEXT_CHANGE&&e.length()>0&&i.update(l.default.sources.SILENT)})),this.emitter.on(l.default.events.SCROLL_BEFORE_UPDATE,(function(){if(i.hasFocus()){var t=i.getNativeRange();null!=t&&t.start.node!==i.cursor.textNode&&i.emitter.once(l.default.events.SCROLL_UPDATE,(function(){try{i.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset)}catch(t){}}))}})),this.emitter.on(l.default.events.SCROLL_OPTIMIZE,(function(t,e){if(e.range){var o=e.range,n=o.startNode,r=o.startOffset,s=o.endNode,a=o.endOffset;i.setNativeRange(n,r,s,a)}})),this.update(l.default.sources.SILENT)}return n(t,[{key:"handleComposition",value:function(){var t=this;this.root.addEventListener("compositionstart",(function(){t.composing=!0})),this.root.addEventListener("compositionend",(function(){if(t.composing=!1,t.cursor.parent){var e=t.cursor.restore();if(!e)return;setTimeout((function(){t.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)}),1)}}))}},{key:"handleDragging",value:function(){var t=this;this.emitter.listenDOM("mousedown",document.body,(function(){t.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){t.mouseDown=!1,t.update(l.default.sources.USER)}))}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(t,e){if(null==this.scroll.whitelist||this.scroll.whitelist[t]){this.scroll.update();var o=this.getNativeRange();if(null!=o&&o.native.collapsed&&!r.default.query(t,r.default.Scope.BLOCK)){if(o.start.node!==this.cursor.textNode){var i=r.default.find(o.start.node,!1);if(null==i)return;if(i instanceof r.default.Leaf){var n=i.split(o.start.offset);i.parent.insertBefore(this.cursor,n)}else i.insertBefore(this.cursor,o.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this.scroll.length();t=Math.min(t,o-1),e=Math.min(t+e,o-1)-t;var n=void 0,r=this.scroll.leaf(t),s=i(r,2),a=s[0],l=s[1];if(null==a)return null;var u=a.position(l,!0),c=i(u,2);n=c[0],l=c[1];var d=document.createRange();if(e>0){d.setStart(n,l);var p=this.scroll.leaf(t+e),h=i(p,2);if(a=h[0],l=h[1],null==a)return null;var f=a.position(l,!0),m=i(f,2);return n=m[0],l=m[1],d.setEnd(n,l),d.getBoundingClientRect()}var v="left",g=void 0;return n instanceof Text?(l<n.data.length?(d.setStart(n,l),d.setEnd(n,l+1)):(d.setStart(n,l-1),d.setEnd(n,l),v="right"),g=d.getBoundingClientRect()):(g=a.domNode.getBoundingClientRect(),l>0&&(v="right")),{bottom:g.top+g.height,height:g.height,left:g[v],right:g[v],top:g.top,width:0}}},{key:"getNativeRange",value:function(){var t=document.getSelection();if(null==t||t.rangeCount<=0)return null;var e=t.getRangeAt(0);if(null==e)return null;var o=this.normalizeNative(e);return p.info("getNativeRange",o),o}},{key:"getRange",value:function(){var t=this.getNativeRange();return null==t?[null,null]:[this.normalizedToRange(t),t]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(t){var e=this,o=[[t.start.node,t.start.offset]];t.native.collapsed||o.push([t.end.node,t.end.offset]);var n=o.map((function(t){var o=i(t,2),n=o[0],s=o[1],a=r.default.find(n,!0),l=a.offset(e.scroll);return 0===s?l:a instanceof r.default.Container?l+a.length():l+a.index(n,s)})),s=Math.min(Math.max.apply(Math,c(n)),this.scroll.length()-1),a=Math.min.apply(Math,[s].concat(c(n)));return new h(a,s-a)}},{key:"normalizeNative",value:function(t){if(!m(this.root,t.startContainer)||!t.collapsed&&!m(this.root,t.endContainer))return null;var e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach((function(t){for(var e=t.node,o=t.offset;!(e instanceof Text)&&e.childNodes.length>0;)if(e.childNodes.length>o)e=e.childNodes[o],o=0;else{if(e.childNodes.length!==o)break;o=(e=e.lastChild)instanceof Text?e.data.length:e.childNodes.length+1}t.node=e,t.offset=o})),e}},{key:"rangeToNative",value:function(t){var e=this,o=t.collapsed?[t.index]:[t.index,t.index+t.length],n=[],r=this.scroll.length();return o.forEach((function(t,o){t=Math.min(r-1,t);var s,a=e.scroll.leaf(t),l=i(a,2),u=l[0],c=l[1],d=u.position(c,0!==o),p=i(d,2);s=p[0],c=p[1],n.push(s,c)})),n.length<2&&(n=n.concat(n)),n}},{key:"scrollIntoView",value:function(t){var e=this.lastRange;if(null!=e){var o=this.getBounds(e.index,e.length);if(null!=o){var n=this.scroll.length()-1,r=this.scroll.line(Math.min(e.index,n)),s=i(r,1)[0],a=s;if(e.length>0){var l=this.scroll.line(Math.min(e.index+e.length,n));a=i(l,1)[0]}if(null!=s&&null!=a){var u=t.getBoundingClientRect();o.top<u.top?t.scrollTop-=u.top-o.top:o.bottom>u.bottom&&(t.scrollTop+=o.bottom-u.bottom)}}}}},{key:"setNativeRange",value:function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(p.info("setNativeRange",t,e,o,i),null==t||null!=this.root.parentNode&&null!=t.parentNode&&null!=o.parentNode){var r=document.getSelection();if(null!=r)if(null!=t){this.hasFocus()||this.root.focus();var s=(this.getNativeRange()||{}).native;if(null==s||n||t!==s.startContainer||e!==s.startOffset||o!==s.endContainer||i!==s.endOffset){"BR"==t.tagName&&(e=[].indexOf.call(t.parentNode.childNodes,t),t=t.parentNode),"BR"==o.tagName&&(i=[].indexOf.call(o.parentNode.childNodes,o),o=o.parentNode);var a=document.createRange();a.setStart(t,e),a.setEnd(o,i),r.removeAllRanges(),r.addRange(a)}}else r.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;if("string"==typeof e&&(o=e,e=!1),p.info("setRange",t),null!=t){var i=this.rangeToNative(t);this.setNativeRange.apply(this,c(i).concat([e]))}else this.setNativeRange(null);this.update(o)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,e=this.lastRange,o=this.getRange(),n=i(o,2),r=n[0],u=n[1];if(this.lastRange=r,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,a.default)(e,this.lastRange)){var c;!this.composing&&null!=u&&u.native.collapsed&&u.start.node!==this.cursor.textNode&&this.cursor.restore();var d,p=[l.default.events.SELECTION_CHANGE,(0,s.default)(this.lastRange),(0,s.default)(e),t];if((c=this.emitter).emit.apply(c,[l.default.events.EDITOR_CHANGE].concat(p)),t!==l.default.sources.SILENT)(d=this.emitter).emit.apply(d,p)}}}]),t}();function m(t,e){try{e.parentNode}catch(t){return!1}return e instanceof Text&&(e=e.parentNode),t.contains(e)}e.Range=h,e.default=f},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(0);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u=function(t){function e(){return a(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"insertInto",value:function(t,o){0===t.children.length?r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertInto",this).call(this,t,o):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),e}(((i=s)&&i.__esModule?i:{default:i}).default.Embed);u.blotName="break",u.tagName="BR",e.default=u},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o(44),s=o(30),a=o(1),l=function(t){function e(e){var o=t.call(this,e)||this;return o.build(),o}return n(e,t),e.prototype.appendChild=function(t){this.insertBefore(t)},e.prototype.attach=function(){t.prototype.attach.call(this),this.children.forEach((function(t){t.attach()}))},e.prototype.build=function(){var t=this;this.children=new r.default,[].slice.call(this.domNode.childNodes).reverse().forEach((function(e){try{var o=u(e);t.insertBefore(o,t.children.head||void 0)}catch(t){if(t instanceof a.ParchmentError)return;throw t}}))},e.prototype.deleteAt=function(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,(function(t,e,o){t.deleteAt(e,o)}))},e.prototype.descendant=function(t,o){var i=this.children.find(o),n=i[0],r=i[1];return null==t.blotName&&t(n)||null!=t.blotName&&n instanceof t?[n,r]:n instanceof e?n.descendant(t,r):[null,-1]},e.prototype.descendants=function(t,o,i){void 0===o&&(o=0),void 0===i&&(i=Number.MAX_VALUE);var n=[],r=i;return this.children.forEachAt(o,i,(function(o,i,s){(null==t.blotName&&t(o)||null!=t.blotName&&o instanceof t)&&n.push(o),o instanceof e&&(n=n.concat(o.descendants(t,i,r))),r-=s})),n},e.prototype.detach=function(){this.children.forEach((function(t){t.detach()})),t.prototype.detach.call(this)},e.prototype.formatAt=function(t,e,o,i){this.children.forEachAt(t,e,(function(t,e,n){t.formatAt(e,n,o,i)}))},e.prototype.insertAt=function(t,e,o){var i=this.children.find(t),n=i[0],r=i[1];if(n)n.insertAt(r,e,o);else{var s=null==o?a.create("text",e):a.create(e,o);this.appendChild(s)}},e.prototype.insertBefore=function(t,e){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some((function(e){return t instanceof e})))throw new a.ParchmentError("Cannot insert "+t.statics.blotName+" into "+this.statics.blotName);t.insertInto(this,e)},e.prototype.length=function(){return this.children.reduce((function(t,e){return t+e.length()}),0)},e.prototype.moveChildren=function(t,e){this.children.forEach((function(o){t.insertBefore(o,e)}))},e.prototype.optimize=function(e){if(t.prototype.optimize.call(this,e),0===this.children.length)if(null!=this.statics.defaultChild){var o=a.create(this.statics.defaultChild);this.appendChild(o),o.optimize(e)}else this.remove()},e.prototype.path=function(t,o){void 0===o&&(o=!1);var i=this.children.find(t,o),n=i[0],r=i[1],s=[[this,t]];return n instanceof e?s.concat(n.path(r,o)):(null!=n&&s.push([n,r]),s)},e.prototype.removeChild=function(t){this.children.remove(t)},e.prototype.replace=function(o){o instanceof e&&o.moveChildren(this),t.prototype.replace.call(this,o)},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var o=this.clone();return this.parent.insertBefore(o,this.next),this.children.forEachAt(t,this.length(),(function(t,i,n){t=t.split(i,e),o.appendChild(t)})),o},e.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},e.prototype.update=function(t,e){var o=this,i=[],n=[];t.forEach((function(t){t.target===o.domNode&&"childList"===t.type&&(i.push.apply(i,t.addedNodes),n.push.apply(n,t.removedNodes))})),n.forEach((function(t){if(!(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var e=a.find(t);null!=e&&(null!=e.domNode.parentNode&&e.domNode.parentNode!==o.domNode||e.detach())}})),i.filter((function(t){return t.parentNode==o.domNode})).sort((function(t,e){return t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(t){var e=null;null!=t.nextSibling&&(e=a.find(t.nextSibling));var i=u(t);i.next==e&&null!=i.next||(null!=i.parent&&i.parent.removeChild(o),o.insertBefore(i,e||void 0))}))},e}(s.default);function u(t){var e=a.find(t);if(null==e)try{e=a.create(t)}catch(o){e=a.create(a.Scope.INLINE),[].slice.call(t.childNodes).forEach((function(t){e.domNode.appendChild(t)})),t.parentNode&&t.parentNode.replaceChild(e.domNode,t),e.attach()}return e}e.default=l},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o(12),s=o(31),a=o(17),l=o(1),u=function(t){function e(e){var o=t.call(this,e)||this;return o.attributes=new s.default(o.domNode),o}return n(e,t),e.formats=function(t){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)},e.prototype.format=function(t,e){var o=l.query(t);o instanceof r.default?this.attributes.attribute(o,e):e&&(null==o||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e))},e.prototype.formats=function(){var t=this.attributes.values(),e=this.statics.formats(this.domNode);return null!=e&&(t[this.statics.blotName]=e),t},e.prototype.replaceWith=function(e,o){var i=t.prototype.replaceWith.call(this,e,o);return this.attributes.copy(i),i},e.prototype.update=function(e,o){var i=this;t.prototype.update.call(this,e,o),e.some((function(t){return t.target===i.domNode&&"attributes"===t.type}))&&this.attributes.build()},e.prototype.wrap=function(o,i){var n=t.prototype.wrap.call(this,o,i);return n instanceof e&&n.statics.scope===this.statics.scope&&this.attributes.move(n),n},e}(a.default);e.default=u},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o(30),s=o(1),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.value=function(t){return!0},e.prototype.index=function(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1},e.prototype.position=function(t,e){var o=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return t>0&&(o+=1),[this.parent.domNode,o]},e.prototype.value=function(){var t;return(t={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,t},e.scope=s.Scope.INLINE_BLOT,e}(r.default);e.default=a},function(t,e,o){var i=o(11),n=o(3),r={attributes:{compose:function(t,e,o){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var i=n(!0,{},e);for(var r in o||(i=Object.keys(i).reduce((function(t,e){return null!=i[e]&&(t[e]=i[e]),t}),{})),t)void 0!==t[r]&&void 0===e[r]&&(i[r]=t[r]);return Object.keys(i).length>0?i:void 0},diff:function(t,e){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var o=Object.keys(t).concat(Object.keys(e)).reduce((function(o,n){return i(t[n],e[n])||(o[n]=void 0===e[n]?null:e[n]),o}),{});return Object.keys(o).length>0?o:void 0},transform:function(t,e,o){if("object"!=typeof t)return e;if("object"==typeof e){if(!o)return e;var i=Object.keys(e).reduce((function(o,i){return void 0===t[i]&&(o[i]=e[i]),o}),{});return Object.keys(i).length>0?i:void 0}}},iterator:function(t){return new s(t)},length:function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"string"==typeof t.insert?t.insert.length:1}};function s(t){this.ops=t,this.index=0,this.offset=0}s.prototype.hasNext=function(){return this.peekLength()<1/0},s.prototype.next=function(t){t||(t=1/0);var e=this.ops[this.index];if(e){var o=this.offset,i=r.length(e);if(t>=i-o?(t=i-o,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e.delete)return{delete:t};var n={};return e.attributes&&(n.attributes=e.attributes),"number"==typeof e.retain?n.retain=t:"string"==typeof e.insert?n.insert=e.insert.substr(o,t):n.insert=e.insert,n}return{retain:1/0}},s.prototype.peek=function(){return this.ops[this.index]},s.prototype.peekLength=function(){return this.ops[this.index]?r.length(this.ops[this.index])-this.offset:1/0},s.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},s.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var t=this.offset,e=this.index,o=this.next(),i=this.ops.slice(this.index);return this.offset=t,this.index=e,[o].concat(i)}return[]},t.exports=r},function(t,e){var o=function(){function t(t,e){return null!=e&&t instanceof e}var e,o,i;try{e=Map}catch(t){e=function(){}}try{o=Set}catch(t){o=function(){}}try{i=Promise}catch(t){i=function(){}}function n(r,a,l,u,c){"object"==typeof a&&(l=a.depth,u=a.prototype,c=a.includeNonEnumerable,a=a.circular);var d=[],p=[],h="undefined"!=typeof Buffer;return void 0===a&&(a=!0),void 0===l&&(l=1/0),function r(l,f){if(null===l)return null;if(0===f)return l;var m,v;if("object"!=typeof l)return l;if(t(l,e))m=new e;else if(t(l,o))m=new o;else if(t(l,i))m=new i((function(t,e){l.then((function(e){t(r(e,f-1))}),(function(t){e(r(t,f-1))}))}));else if(n.__isArray(l))m=[];else if(n.__isRegExp(l))m=new RegExp(l.source,s(l)),l.lastIndex&&(m.lastIndex=l.lastIndex);else if(n.__isDate(l))m=new Date(l.getTime());else{if(h&&Buffer.isBuffer(l))return m=Buffer.allocUnsafe?Buffer.allocUnsafe(l.length):new Buffer(l.length),l.copy(m),m;t(l,Error)?m=Object.create(l):void 0===u?(v=Object.getPrototypeOf(l),m=Object.create(v)):(m=Object.create(u),v=u)}if(a){var g=d.indexOf(l);if(-1!=g)return p[g];d.push(l),p.push(m)}for(var b in t(l,e)&&l.forEach((function(t,e){var o=r(e,f-1),i=r(t,f-1);m.set(o,i)})),t(l,o)&&l.forEach((function(t){var e=r(t,f-1);m.add(e)})),l){var y;v&&(y=Object.getOwnPropertyDescriptor(v,b)),y&&null==y.set||(m[b]=r(l[b],f-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(l);for(b=0;b<x.length;b++){var w=x[b];(!(O=Object.getOwnPropertyDescriptor(l,w))||O.enumerable||c)&&(m[w]=r(l[w],f-1),O.enumerable||Object.defineProperty(m,w,{enumerable:!1}))}}if(c){var E=Object.getOwnPropertyNames(l);for(b=0;b<E.length;b++){var O,A=E[b];(O=Object.getOwnPropertyDescriptor(l,A))&&O.enumerable||(m[A]=r(l[A],f-1),Object.defineProperty(m,A,{enumerable:!1}))}}return m}(r,l)}function r(t){return Object.prototype.toString.call(t)}function s(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return n.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},n.__objToStr=r,n.__isDate=function(t){return"object"==typeof t&&"[object Date]"===r(t)},n.__isArray=function(t){return"object"==typeof t&&"[object Array]"===r(t)},n.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===r(t)},n.__getRegExpFlags=s,n}();"object"==typeof t&&t.exports&&(t.exports=o)},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=h(o(0)),a=h(o(8)),l=o(4),u=h(l),c=h(o(16)),d=h(o(13)),p=h(o(25));function h(t){return t&&t.__esModule?t:{default:t}}function f(t){return t instanceof u.default||t instanceof l.BlockEmbed}var m=function(t){function e(t,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.emitter=o.emitter,Array.isArray(o.whitelist)&&(i.whitelist=o.whitelist.reduce((function(t,e){return t[e]=!0,t}),{})),i.domNode.addEventListener("DOMNodeInserted",(function(){})),i.optimize(),i.enable(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(t,o){var n=this.line(t),s=i(n,2),a=s[0],u=s[1],p=this.line(t+o),h=i(p,1)[0];if(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deleteAt",this).call(this,t,o),null!=h&&a!==h&&u>0){if(a instanceof l.BlockEmbed||h instanceof l.BlockEmbed)return void this.optimize();if(a instanceof d.default){var f=a.newlineIndex(a.length(),!0);if(f>-1&&(a=a.split(f+1))===h)return void this.optimize()}else if(h instanceof d.default){var m=h.newlineIndex(0);m>-1&&h.split(m+1)}var v=h.children.head instanceof c.default?null:h.children.head;a.moveChildren(h,v),a.remove()}this.optimize()}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",t)}},{key:"formatAt",value:function(t,o,i,n){(null==this.whitelist||this.whitelist[i])&&(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,o,i,n),this.optimize())}},{key:"insertAt",value:function(t,o,i){if(null==i||null==this.whitelist||this.whitelist[o]){if(t>=this.length())if(null==i||null==s.default.query(o,s.default.Scope.BLOCK)){var n=s.default.create(this.statics.defaultChild);this.appendChild(n),null==i&&o.endsWith("\n")&&(o=o.slice(0,-1)),n.insertAt(0,o,i)}else{var a=s.default.create(o,i);this.appendChild(a)}else r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,o,i);this.optimize()}}},{key:"insertBefore",value:function(t,o){if(t.statics.scope===s.default.Scope.INLINE_BLOT){var i=s.default.create(this.statics.defaultChild);i.appendChild(t),t=i}r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,o)}},{key:"leaf",value:function(t){return this.path(t).pop()||[null,-1]}},{key:"line",value:function(t){return t===this.length()?this.line(t-1):this.descendant(f,t)}},{key:"lines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,o=function t(e,o,i){var n=[],r=i;return e.children.forEachAt(o,i,(function(e,o,i){f(e)?n.push(e):e instanceof s.default.Container&&(n=n.concat(t(e,o,r))),r-=i})),n};return o(this,t,e)}},{key:"optimize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t,o),t.length>0&&this.emitter.emit(a.default.events.SCROLL_OPTIMIZE,t,o))}},{key:"path",value:function(t){return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"path",this).call(this,t).slice(1)}},{key:"update",value:function(t){if(!0!==this.batch){var o=a.default.sources.USER;"string"==typeof t&&(o=t),Array.isArray(t)||(t=this.observer.takeRecords()),t.length>0&&this.emitter.emit(a.default.events.SCROLL_BEFORE_UPDATE,o,t),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t.concat([])),t.length>0&&this.emitter.emit(a.default.events.SCROLL_UPDATE,o,t)}}}]),e}(s.default.Scroll);m.blotName="scroll",m.className="ql-editor",m.tagName="DIV",m.defaultChild="block",m.allowedChildren=[u.default,l.BlockEmbed,p.default],e.default=m},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.SHORTKEY=e.default=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),s=m(o(21)),a=m(o(11)),l=m(o(3)),u=m(o(2)),c=m(o(20)),d=m(o(0)),p=m(o(5)),h=m(o(10)),f=m(o(9));function m(t){return t&&t.__esModule?t:{default:t}}function v(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var g=(0,h.default)("quill:keyboard"),b=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",y=function(t){function e(t,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));return i.bindings={},Object.keys(i.options.bindings).forEach((function(e){("list autofill"!==e||null==t.scroll.whitelist||t.scroll.whitelist.list)&&i.options.bindings[e]&&i.addBinding(i.options.bindings[e])})),i.addBinding({key:e.keys.ENTER,shiftKey:null},A),i.addBinding({key:e.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},(function(){})),/Firefox/i.test(navigator.userAgent)?(i.addBinding({key:e.keys.BACKSPACE},{collapsed:!0},w),i.addBinding({key:e.keys.DELETE},{collapsed:!0},E)):(i.addBinding({key:e.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},w),i.addBinding({key:e.keys.DELETE},{collapsed:!0,suffix:/^.?$/},E)),i.addBinding({key:e.keys.BACKSPACE},{collapsed:!1},O),i.addBinding({key:e.keys.DELETE},{collapsed:!1},O),i.addBinding({key:e.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},w),i.listen(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,null,[{key:"match",value:function(t,e){return e=I(e),!["altKey","ctrlKey","metaKey","shiftKey"].some((function(o){return!!e[o]!==t[o]&&null!==e[o]}))&&e.key===(t.which||t.keyCode)}}]),r(e,[{key:"addBinding",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=I(t);if(null==i||null==i.key)return g.warn("Attempted to add invalid keyboard binding",i);"function"==typeof e&&(e={handler:e}),"function"==typeof o&&(o={handler:o}),i=(0,l.default)(i,e,o),this.bindings[i.key]=this.bindings[i.key]||[],this.bindings[i.key].push(i)}},{key:"listen",value:function(){var t=this;this.quill.root.addEventListener("keydown",(function(o){if(!o.defaultPrevented){var r=o.which||o.keyCode,s=(t.bindings[r]||[]).filter((function(t){return e.match(o,t)}));if(0!==s.length){var l=t.quill.getSelection();if(null!=l&&t.quill.hasFocus()){var u=t.quill.getLine(l.index),c=n(u,2),p=c[0],h=c[1],f=t.quill.getLeaf(l.index),m=n(f,2),v=m[0],g=m[1],b=0===l.length?[v,g]:t.quill.getLeaf(l.index+l.length),y=n(b,2),x=y[0],w=y[1],E=v instanceof d.default.Text?v.value().slice(0,g):"",O=x instanceof d.default.Text?x.value().slice(w):"",A={collapsed:0===l.length,empty:0===l.length&&p.length()<=1,format:t.quill.getFormat(l),offset:h,prefix:E,suffix:O};s.some((function(e){if(null!=e.collapsed&&e.collapsed!==A.collapsed)return!1;if(null!=e.empty&&e.empty!==A.empty)return!1;if(null!=e.offset&&e.offset!==A.offset)return!1;if(Array.isArray(e.format)){if(e.format.every((function(t){return null==A.format[t]})))return!1}else if("object"===i(e.format)&&!Object.keys(e.format).every((function(t){return!0===e.format[t]?null!=A.format[t]:!1===e.format[t]?null==A.format[t]:(0,a.default)(e.format[t],A.format[t])})))return!1;return!(null!=e.prefix&&!e.prefix.test(A.prefix))&&(!(null!=e.suffix&&!e.suffix.test(A.suffix))&&!0!==e.handler.call(t,l,A))}))&&o.preventDefault()}}}}))}}]),e}(f.default);function x(t,e){var o,i=t===y.keys.LEFT?"prefix":"suffix";return v(o={key:t,shiftKey:e,altKey:null},i,/^$/),v(o,"handler",(function(o){var i=o.index;t===y.keys.RIGHT&&(i+=o.length+1);var r=this.quill.getLeaf(i);return!(n(r,1)[0]instanceof d.default.Embed)||(t===y.keys.LEFT?e?this.quill.setSelection(o.index-1,o.length+1,p.default.sources.USER):this.quill.setSelection(o.index-1,p.default.sources.USER):e?this.quill.setSelection(o.index,o.length+1,p.default.sources.USER):this.quill.setSelection(o.index+o.length+1,p.default.sources.USER),!1)})),o}function w(t,e){if(!(0===t.index||this.quill.getLength()<=1)){var o=this.quill.getLine(t.index),i=n(o,1)[0],r={};if(0===e.offset){var s=this.quill.getLine(t.index-1),a=n(s,1)[0];if(null!=a&&a.length()>1){var l=i.formats(),u=this.quill.getFormat(t.index-1,1);r=c.default.attributes.diff(l,u)||{}}}var d=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;this.quill.deleteText(t.index-d,d,p.default.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(t.index-d,d,r,p.default.sources.USER),this.quill.focus()}}function E(t,e){var o=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(!(t.index>=this.quill.getLength()-o)){var i={},r=0,s=this.quill.getLine(t.index),a=n(s,1)[0];if(e.offset>=a.length()-1){var l=this.quill.getLine(t.index+1),u=n(l,1)[0];if(u){var d=a.formats(),h=this.quill.getFormat(t.index,1);i=c.default.attributes.diff(d,h)||{},r=u.length()}}this.quill.deleteText(t.index,o,p.default.sources.USER),Object.keys(i).length>0&&this.quill.formatLine(t.index+r-1,o,i,p.default.sources.USER)}}function O(t){var e=this.quill.getLines(t),o={};if(e.length>1){var i=e[0].formats(),n=e[e.length-1].formats();o=c.default.attributes.diff(n,i)||{}}this.quill.deleteText(t,p.default.sources.USER),Object.keys(o).length>0&&this.quill.formatLine(t.index,1,o,p.default.sources.USER),this.quill.setSelection(t.index,p.default.sources.SILENT),this.quill.focus()}function A(t,e){var o=this;t.length>0&&this.quill.scroll.deleteAt(t.index,t.length);var i=Object.keys(e.format).reduce((function(t,o){return d.default.query(o,d.default.Scope.BLOCK)&&!Array.isArray(e.format[o])&&(t[o]=e.format[o]),t}),{});this.quill.insertText(t.index,"\n",i,p.default.sources.USER),this.quill.setSelection(t.index+1,p.default.sources.SILENT),this.quill.focus(),Object.keys(e.format).forEach((function(t){null==i[t]&&(Array.isArray(e.format[t])||"link"!==t&&o.quill.format(t,e.format[t],p.default.sources.USER))}))}function _(t){return{key:y.keys.TAB,shiftKey:!t,format:{"code-block":!0},handler:function(e){var o=d.default.query("code-block"),i=e.index,r=e.length,s=this.quill.scroll.descendant(o,i),a=n(s,2),l=a[0],u=a[1];if(null!=l){var c=this.quill.getIndex(l),h=l.newlineIndex(u,!0)+1,f=l.newlineIndex(c+u+r),m=l.domNode.textContent.slice(h,f).split("\n");u=0,m.forEach((function(e,n){t?(l.insertAt(h+u,o.TAB),u+=o.TAB.length,0===n?i+=o.TAB.length:r+=o.TAB.length):e.startsWith(o.TAB)&&(l.deleteAt(h+u,o.TAB.length),u-=o.TAB.length,0===n?i-=o.TAB.length:r-=o.TAB.length),u+=e.length+1})),this.quill.update(p.default.sources.USER),this.quill.setSelection(i,r,p.default.sources.SILENT)}}}}function q(t){return{key:t[0].toUpperCase(),shortKey:!0,handler:function(e,o){this.quill.format(t,!o.format[t],p.default.sources.USER)}}}function I(t){if("string"==typeof t||"number"==typeof t)return I({key:t});if("object"===(void 0===t?"undefined":i(t))&&(t=(0,s.default)(t,!1)),"string"==typeof t.key)if(null!=y.keys[t.key.toUpperCase()])t.key=y.keys[t.key.toUpperCase()];else{if(1!==t.key.length)return null;t.key=t.key.toUpperCase().charCodeAt(0)}return t.shortKey&&(t[b]=t.shortKey,delete t.shortKey),t}y.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},y.DEFAULTS={bindings:{bold:q("bold"),italic:q("italic"),underline:q("underline"),indent:{key:y.keys.TAB,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","+1",p.default.sources.USER)}},outdent:{key:y.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","-1",p.default.sources.USER)}},"outdent backspace":{key:y.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(t,e){null!=e.format.indent?this.quill.format("indent","-1",p.default.sources.USER):null!=e.format.list&&this.quill.format("list",!1,p.default.sources.USER)}},"indent code-block":_(!0),"outdent code-block":_(!1),"remove tab":{key:y.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(t){this.quill.deleteText(t.index-1,1,p.default.sources.USER)}},tab:{key:y.keys.TAB,handler:function(t){this.quill.history.cutoff();var e=(new u.default).retain(t.index).delete(t.length).insert("\t");this.quill.updateContents(e,p.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,p.default.sources.SILENT)}},"list empty enter":{key:y.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(t,e){this.quill.format("list",!1,p.default.sources.USER),e.format.indent&&this.quill.format("indent",!1,p.default.sources.USER)}},"checklist enter":{key:y.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(t){var e=this.quill.getLine(t.index),o=n(e,2),i=o[0],r=o[1],s=(0,l.default)({},i.formats(),{list:"checked"}),a=(new u.default).retain(t.index).insert("\n",s).retain(i.length()-r-1).retain(1,{list:"unchecked"});this.quill.updateContents(a,p.default.sources.USER),this.quill.setSelection(t.index+1,p.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:y.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(t,e){var o=this.quill.getLine(t.index),i=n(o,2),r=i[0],s=i[1],a=(new u.default).retain(t.index).insert("\n",e.format).retain(r.length()-s-1).retain(1,{header:null});this.quill.updateContents(a,p.default.sources.USER),this.quill.setSelection(t.index+1,p.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(t,e){var o=e.prefix.length,i=this.quill.getLine(t.index),r=n(i,2),s=r[0],a=r[1];if(a>o)return!0;var l=void 0;switch(e.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(t.index," ",p.default.sources.USER),this.quill.history.cutoff();var c=(new u.default).retain(t.index-a).delete(o+1).retain(s.length()-2-a).retain(1,{list:l});this.quill.updateContents(c,p.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-o,p.default.sources.SILENT)}},"code exit":{key:y.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(t){var e=this.quill.getLine(t.index),o=n(e,2),i=o[0],r=o[1],s=(new u.default).retain(t.index+i.length()-r-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(s,p.default.sources.USER)}},"embed left":x(y.keys.LEFT,!1),"embed left shift":x(y.keys.LEFT,!0),"embed right":x(y.keys.RIGHT,!1),"embed right shift":x(y.keys.RIGHT,!0)}},e.default=y,e.SHORTKEY=b},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},r=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),s=l(o(0)),a=l(o(7));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.selection=o,i.textNode=document.createTextNode(e.CONTENTS),i.domNode.appendChild(i.textNode),i._length=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,null,[{key:"value",value:function(){}}]),r(e,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(t,o){if(0!==this._length)return n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,o);for(var i=this,r=0;null!=i&&i.statics.scope!==s.default.Scope.BLOCK_BLOT;)r+=i.offset(i.parent),i=i.parent;null!=i&&(this._length=e.CONTENTS.length,i.optimize(),i.formatAt(r,e.CONTENTS.length,t,o),this._length=0)}},{key:"index",value:function(t,o){return t===this.textNode?0:n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"index",this).call(this,t,o)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var t=this.textNode,o=this.selection.getNativeRange(),n=void 0,r=void 0,l=void 0;if(null!=o&&o.start.node===t&&o.end.node===t){var u=[t,o.start.offset,o.end.offset];n=u[0],r=u[1],l=u[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==e.CONTENTS){var c=this.textNode.data.split(e.CONTENTS).join("");this.next instanceof a.default?(n=this.next.domNode,this.next.insertAt(0,c),this.textNode.data=e.CONTENTS):(this.textNode.data=c,this.parent.insertBefore(s.default.create(this.textNode),this),this.textNode=document.createTextNode(e.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=r){var d=[r,l].map((function(t){return Math.max(0,Math.min(n.data.length,t-1))})),p=i(d,2);return r=p[0],l=p[1],{startNode:n,startOffset:r,endNode:n,endOffset:l}}}}},{key:"update",value:function(t,e){var o=this;if(t.some((function(t){return"characterData"===t.type&&t.target===o.textNode}))){var i=this.restore();i&&(e.range=i)}}},{key:"value",value:function(){return""}}]),e}(s.default.Embed);u.blotName="cursor",u.className="ql-cursor",u.tagName="span",u.CONTENTS="\ufeff",e.default=u},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=s(o(0)),n=o(4),r=s(n);function s(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u=function(t){function e(){return a(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(i.default.Container);u.allowedChildren=[r.default,n.BlockEmbed,u],e.default=u},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.ColorStyle=e.ColorClass=e.ColorAttributor=void 0;var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(0),a=(i=s)&&i.__esModule?i:{default:i};function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c=function(t){function e(){return l(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"value",value:function(t){var o=r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t);return o.startsWith("rgb(")?(o=o.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+o.split(",").map((function(t){return("00"+parseInt(t).toString(16)).slice(-2)})).join("")):o}}]),e}(a.default.Attributor.Style),d=new a.default.Attributor.Class("color","ql-color",{scope:a.default.Scope.INLINE}),p=new c("color","color",{scope:a.default.Scope.INLINE});e.ColorAttributor=c,e.ColorClass=d,e.ColorStyle=p},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.sanitize=e.default=void 0;var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(6);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u=function(t){function e(){return a(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"format",value:function(t,o){if(t!==this.statics.blotName||!o)return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,o);o=this.constructor.sanitize(o),this.domNode.setAttribute("href",o)}}],[{key:"create",value:function(t){var o=r(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return t=this.sanitize(t),o.setAttribute("href",t),o.setAttribute("rel","noopener noreferrer"),o.setAttribute("target","_blank"),o}},{key:"formats",value:function(t){return t.getAttribute("href")}},{key:"sanitize",value:function(t){return c(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}}]),e}(((i=s)&&i.__esModule?i:{default:i}).default);function c(t,e){var o=document.createElement("a");o.href=t;var i=o.href.slice(0,o.href.indexOf(":"));return e.indexOf(i)>-1}u.blotName="link",u.tagName="A",u.SANITIZED_URL="about:blank",u.PROTOCOL_WHITELIST=["http","https","mailto","tel"],e.default=u,e.sanitize=c},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=a(o(23)),s=a(o(107));function a(t){return t&&t.__esModule?t:{default:t}}var l=0;function u(t,e){t.setAttribute(e,!("true"===t.getAttribute(e)))}var c=function(){function t(e){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(function(){o.togglePicker()})),this.label.addEventListener("keydown",(function(t){switch(t.keyCode){case r.default.keys.ENTER:o.togglePicker();break;case r.default.keys.ESCAPE:o.escape(),t.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}return n(t,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),u(this.label,"aria-expanded"),u(this.options,"aria-hidden")}},{key:"buildItem",value:function(t){var e=this,o=document.createElement("span");return o.tabIndex="0",o.setAttribute("role","button"),o.classList.add("ql-picker-item"),t.hasAttribute("value")&&o.setAttribute("data-value",t.getAttribute("value")),t.textContent&&o.setAttribute("data-label",t.textContent),o.addEventListener("click",(function(){e.selectItem(o,!0)})),o.addEventListener("keydown",(function(t){switch(t.keyCode){case r.default.keys.ENTER:e.selectItem(o,!0),t.preventDefault();break;case r.default.keys.ESCAPE:e.escape(),t.preventDefault()}})),o}},{key:"buildLabel",value:function(){var t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=s.default,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}},{key:"buildOptions",value:function(){var t=this,e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id="ql-picker-options-"+l,l+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,[].slice.call(this.select.options).forEach((function(o){var i=t.buildItem(o);e.appendChild(i),!0===o.selected&&t.selectItem(i)})),this.container.appendChild(e)}},{key:"buildPicker",value:function(){var t=this;[].slice.call(this.select.attributes).forEach((function(e){t.container.setAttribute(e.name,e.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var t=this;this.close(),setTimeout((function(){return t.label.focus()}),1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this.container.querySelector(".ql-selected");if(t!==o&&(null!=o&&o.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(t.parentNode.children,t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":i(Event))){var n=document.createEvent("Event");n.initEvent("change",!0,!0),this.select.dispatchEvent(n)}this.close()}}},{key:"update",value:function(){var t=void 0;if(this.select.selectedIndex>-1){var e=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(e)}else this.selectItem(null);var o=null!=t&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",o)}}]),t}();e.default=c},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=g(o(0)),n=g(o(5)),r=o(4),s=g(r),a=g(o(16)),l=g(o(25)),u=g(o(24)),c=g(o(35)),d=g(o(6)),p=g(o(22)),h=g(o(7)),f=g(o(55)),m=g(o(42)),v=g(o(23));function g(t){return t&&t.__esModule?t:{default:t}}n.default.register({"blots/block":s.default,"blots/block/embed":r.BlockEmbed,"blots/break":a.default,"blots/container":l.default,"blots/cursor":u.default,"blots/embed":c.default,"blots/inline":d.default,"blots/scroll":p.default,"blots/text":h.default,"modules/clipboard":f.default,"modules/history":m.default,"modules/keyboard":v.default}),i.default.register(s.default,a.default,u.default,d.default,p.default,h.default),e.default=n.default},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),n=function(){function t(t){this.domNode=t,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(t.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),t.create=function(t){if(null==this.tagName)throw new i.ParchmentError("Blot definition missing tagName");var e;return Array.isArray(this.tagName)?("string"==typeof t&&(t=t.toUpperCase(),parseInt(t).toString()===t&&(t=parseInt(t))),e="number"==typeof t?document.createElement(this.tagName[t-1]):this.tagName.indexOf(t)>-1?document.createElement(t):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e},t.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},t.prototype.clone=function(){var t=this.domNode.cloneNode(!1);return i.create(t)},t.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},t.prototype.deleteAt=function(t,e){this.isolate(t,e).remove()},t.prototype.formatAt=function(t,e,o,n){var r=this.isolate(t,e);if(null!=i.query(o,i.Scope.BLOT)&&n)r.wrap(o,n);else if(null!=i.query(o,i.Scope.ATTRIBUTE)){var s=i.create(this.statics.scope);r.wrap(s),s.format(o,n)}},t.prototype.insertAt=function(t,e,o){var n=null==o?i.create("text",e):i.create(e,o),r=this.split(t);this.parent.insertBefore(n,r)},t.prototype.insertInto=function(t,e){void 0===e&&(e=null),null!=this.parent&&this.parent.children.remove(this);var o=null;t.children.insertBefore(this,e),null!=e&&(o=e.domNode),this.domNode.parentNode==t.domNode&&this.domNode.nextSibling==o||t.domNode.insertBefore(this.domNode,o),this.parent=t,this.attach()},t.prototype.isolate=function(t,e){var o=this.split(t);return o.split(e),o},t.prototype.length=function(){return 1},t.prototype.offset=function(t){return void 0===t&&(t=this.parent),null==this.parent||this==t?0:this.parent.children.offset(this)+this.parent.offset(t)},t.prototype.optimize=function(t){null!=this.domNode[i.DATA_KEY]&&delete this.domNode[i.DATA_KEY].mutations},t.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},t.prototype.replace=function(t){null!=t.parent&&(t.parent.insertBefore(this,t.next),t.remove())},t.prototype.replaceWith=function(t,e){var o="string"==typeof t?i.create(t,e):t;return o.replace(this),o},t.prototype.split=function(t,e){return 0===t?this:this.next},t.prototype.update=function(t,e){},t.prototype.wrap=function(t,e){var o="string"==typeof t?i.create(t,e):t;return null!=this.parent&&this.parent.insertBefore(o,this.next),o.appendChild(this),o},t.blotName="abstract",t}();e.default=n},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=o(12),n=o(32),r=o(33),s=o(1),a=function(){function t(t){this.attributes={},this.domNode=t,this.build()}return t.prototype.attribute=function(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])},t.prototype.build=function(){var t=this;this.attributes={};var e=i.default.keys(this.domNode),o=n.default.keys(this.domNode),a=r.default.keys(this.domNode);e.concat(o).concat(a).forEach((function(e){var o=s.query(e,s.Scope.ATTRIBUTE);o instanceof i.default&&(t.attributes[o.attrName]=o)}))},t.prototype.copy=function(t){var e=this;Object.keys(this.attributes).forEach((function(o){var i=e.attributes[o].value(e.domNode);t.format(o,i)}))},t.prototype.move=function(t){var e=this;this.copy(t),Object.keys(this.attributes).forEach((function(t){e.attributes[t].remove(e.domNode)})),this.attributes={}},t.prototype.values=function(){var t=this;return Object.keys(this.attributes).reduce((function(e,o){return e[o]=t.attributes[o].value(t.domNode),e}),{})},t}();e.default=a},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});function r(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter((function(t){return 0===t.indexOf(e+"-")}))}Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.keys=function(t){return(t.getAttribute("class")||"").split(/\s+/).map((function(t){return t.split("-").slice(0,-1).join("-")}))},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(this.keyName+"-"+e),!0)},e.prototype.remove=function(t){r(t,this.keyName).forEach((function(e){t.classList.remove(e)})),0===t.classList.length&&t.removeAttribute("class")},e.prototype.value=function(t){var e=(r(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""},e}(o(12).default);e.default=s},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});function r(t){var e=t.split("-"),o=e.slice(1).map((function(t){return t[0].toUpperCase()+t.slice(1)})).join("");return e[0]+o}Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.keys=function(t){return(t.getAttribute("style")||"").split(";").map((function(t){return t.split(":")[0].trim()}))},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.style[r(this.keyName)]=e,!0)},e.prototype.remove=function(t){t.style[r(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")},e.prototype.value=function(t){var e=t.style[r(this.keyName)];return this.canAdd(t,e)?e:""},e}(o(12).default);e.default=s},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}();var n=function(){function t(e,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.quill=e,this.options=o,this.modules={}}return i(t,[{key:"init",value:function(){var t=this;Object.keys(this.options.modules).forEach((function(e){null==t.modules[e]&&t.addModule(e)}))}},{key:"addModule",value:function(t){var e=this.quill.constructor.import("modules/"+t);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}]),t}();n.DEFAULTS={modules:{}},n.themes={default:n},e.default=n},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),n=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},r=a(o(0)),s=a(o(7));function a(t){return t&&t.__esModule?t:{default:t}}var l="\ufeff",u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o.contentNode=document.createElement("span"),o.contentNode.setAttribute("contenteditable",!1),[].slice.call(o.domNode.childNodes).forEach((function(t){o.contentNode.appendChild(t)})),o.leftGuard=document.createTextNode(l),o.rightGuard=document.createTextNode(l),o.domNode.appendChild(o.leftGuard),o.domNode.appendChild(o.contentNode),o.domNode.appendChild(o.rightGuard),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"index",value:function(t,o){return t===this.leftGuard?0:t===this.rightGuard?1:n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"index",this).call(this,t,o)}},{key:"restore",value:function(t){var e=void 0,o=void 0,i=t.data.split(l).join("");if(t===this.leftGuard)if(this.prev instanceof s.default){var n=this.prev.length();this.prev.insertAt(n,i),e={startNode:this.prev.domNode,startOffset:n+i.length}}else o=document.createTextNode(i),this.parent.insertBefore(r.default.create(o),this),e={startNode:o,startOffset:i.length};else t===this.rightGuard&&(this.next instanceof s.default?(this.next.insertAt(0,i),e={startNode:this.next.domNode,startOffset:i.length}):(o=document.createTextNode(i),this.parent.insertBefore(r.default.create(o),this.next),e={startNode:o,startOffset:i.length}));return t.data=l,e}},{key:"update",value:function(t,e){var o=this;t.forEach((function(t){if("characterData"===t.type&&(t.target===o.leftGuard||t.target===o.rightGuard)){var i=o.restore(t.target);i&&(e.range=i)}}))}}]),e}(r.default.Embed);e.default=u},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.AlignStyle=e.AlignClass=e.AlignAttribute=void 0;var i,n=o(0),r=(i=n)&&i.__esModule?i:{default:i};var s={scope:r.default.Scope.BLOCK,whitelist:["right","center","justify"]},a=new r.default.Attributor.Attribute("align","align",s),l=new r.default.Attributor.Class("align","ql-align",s),u=new r.default.Attributor.Style("align","text-align",s);e.AlignAttribute=a,e.AlignClass=l,e.AlignStyle=u},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.BackgroundStyle=e.BackgroundClass=void 0;var i,n=o(0),r=(i=n)&&i.__esModule?i:{default:i},s=o(26);var a=new r.default.Attributor.Class("background","ql-bg",{scope:r.default.Scope.INLINE}),l=new s.ColorAttributor("background","background-color",{scope:r.default.Scope.INLINE});e.BackgroundClass=a,e.BackgroundStyle=l},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.DirectionStyle=e.DirectionClass=e.DirectionAttribute=void 0;var i,n=o(0),r=(i=n)&&i.__esModule?i:{default:i};var s={scope:r.default.Scope.BLOCK,whitelist:["rtl"]},a=new r.default.Attributor.Attribute("direction","dir",s),l=new r.default.Attributor.Class("direction","ql-direction",s),u=new r.default.Attributor.Style("direction","direction",s);e.DirectionAttribute=a,e.DirectionClass=l,e.DirectionStyle=u},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.FontClass=e.FontStyle=void 0;var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(0),a=(i=s)&&i.__esModule?i:{default:i};function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c={scope:a.default.Scope.INLINE,whitelist:["serif","monospace"]},d=new a.default.Attributor.Class("font","ql-font",c),p=new(function(t){function e(){return l(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"value",value:function(t){return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t).replace(/["']/g,"")}}]),e}(a.default.Attributor.Style))("font","font-family",c);e.FontStyle=p,e.FontClass=d},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.SizeStyle=e.SizeClass=void 0;var i,n=o(0),r=(i=n)&&i.__esModule?i:{default:i};var s=new r.default.Attributor.Class("size","ql-size",{scope:r.default.Scope.INLINE,whitelist:["small","large","huge"]}),a=new r.default.Attributor.Style("size","font-size",{scope:r.default.Scope.INLINE,whitelist:["10px","18px","32px"]});e.SizeClass=s,e.SizeStyle=a},function(t,e,o){t.exports={align:{"":o(76),center:o(77),right:o(78),justify:o(79)},background:o(80),blockquote:o(81),bold:o(82),clean:o(83),code:o(58),"code-block":o(58),color:o(84),direction:{"":o(85),rtl:o(86)},float:{center:o(87),full:o(88),left:o(89),right:o(90)},formula:o(91),header:{1:o(92),2:o(93)},italic:o(94),image:o(95),indent:{"+1":o(96),"-1":o(97)},link:o(98),list:{ordered:o(99),bullet:o(100),check:o(101)},script:{sub:o(102),super:o(103)},strike:o(104),underline:o(105),video:o(106)}},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.getLastChangeIndex=e.default=void 0;var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),n=s(o(0)),r=s(o(5));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(t,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));return i.lastRecorded=0,i.ignoreChange=!1,i.clear(),i.quill.on(r.default.events.EDITOR_CHANGE,(function(t,e,o,n){t!==r.default.events.TEXT_CHANGE||i.ignoreChange||(i.options.userOnly&&n!==r.default.sources.USER?i.transform(e):i.record(e,o))})),i.quill.keyboard.addBinding({key:"Z",shortKey:!0},i.undo.bind(i)),i.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},i.redo.bind(i)),/Win/i.test(navigator.platform)&&i.quill.keyboard.addBinding({key:"Y",shortKey:!0},i.redo.bind(i)),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"change",value:function(t,e){if(0!==this.stack[t].length){var o=this.stack[t].pop();this.stack[e].push(o),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(o[t],r.default.sources.USER),this.ignoreChange=!1;var i=l(o[t]);this.quill.setSelection(i)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(t,e){if(0!==t.ops.length){this.stack.redo=[];var o=this.quill.getContents().diff(e),i=Date.now();if(this.lastRecorded+this.options.delay>i&&this.stack.undo.length>0){var n=this.stack.undo.pop();o=o.compose(n.undo),t=n.redo.compose(t)}else this.lastRecorded=i;this.stack.undo.push({redo:t,undo:o}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(t){this.stack.undo.forEach((function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)})),this.stack.redo.forEach((function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)}))}},{key:"undo",value:function(){this.change("undo","redo")}}]),e}(s(o(9)).default);function l(t){var e=t.reduce((function(t,e){return t+=e.delete||0}),0),o=t.length()-e;return function(t){var e=t.ops[t.ops.length-1];return null!=e&&(null!=e.insert?"string"==typeof e.insert&&e.insert.endsWith("\n"):null!=e.attributes&&Object.keys(e.attributes).some((function(t){return null!=n.default.query(t,n.default.Scope.BLOCK)})))}(t)&&(o-=1),o}a.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},e.default=a,e.getLastChangeIndex=l},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BaseTooltip=void 0;var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),n=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},r=f(o(3)),s=f(o(2)),a=f(o(8)),l=f(o(23)),u=f(o(34)),c=f(o(59)),d=f(o(60)),p=f(o(28)),h=f(o(61));function f(t){return t&&t.__esModule?t:{default:t}}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var b=[!1,"center","right","justify"],y=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],x=[!1,"serif","monospace"],w=["1","2","3",!1],E=["small",!1,"large","huge"],O=function(t){function e(t,o){m(this,e);var i=v(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));return t.emitter.listenDOM("click",document.body,(function e(o){if(!document.body.contains(t.root))return document.body.removeEventListener("click",e);null==i.tooltip||i.tooltip.root.contains(o.target)||document.activeElement===i.tooltip.textbox||i.quill.hasFocus()||i.tooltip.hide(),null!=i.pickers&&i.pickers.forEach((function(t){t.container.contains(o.target)||t.close()}))})),i}return g(e,t),i(e,[{key:"addModule",value:function(t){var o=n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addModule",this).call(this,t);return"toolbar"===t&&this.extendToolbar(o),o}},{key:"buildButtons",value:function(t,e){t.forEach((function(t){(t.getAttribute("class")||"").split(/\s+/).forEach((function(o){if(o.startsWith("ql-")&&(o=o.slice("ql-".length),null!=e[o]))if("direction"===o)t.innerHTML=e[o][""]+e[o].rtl;else if("string"==typeof e[o])t.innerHTML=e[o];else{var i=t.value||"";null!=i&&e[o][i]&&(t.innerHTML=e[o][i])}}))}))}},{key:"buildPickers",value:function(t,e){var o=this;this.pickers=t.map((function(t){if(t.classList.contains("ql-align"))return null==t.querySelector("option")&&_(t,b),new d.default(t,e.align);if(t.classList.contains("ql-background")||t.classList.contains("ql-color")){var o=t.classList.contains("ql-background")?"background":"color";return null==t.querySelector("option")&&_(t,y,"background"===o?"#ffffff":"#000000"),new c.default(t,e[o])}return null==t.querySelector("option")&&(t.classList.contains("ql-font")?_(t,x):t.classList.contains("ql-header")?_(t,w):t.classList.contains("ql-size")&&_(t,E)),new p.default(t)}));this.quill.on(a.default.events.EDITOR_CHANGE,(function(){o.pickers.forEach((function(t){t.update()}))}))}}]),e}(u.default);O.DEFAULTS=(0,r.default)(!0,{},u.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var t=this,e=this.container.querySelector("input.ql-image[type=file]");null==e&&((e=document.createElement("input")).setAttribute("type","file"),e.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),e.classList.add("ql-image"),e.addEventListener("change",(function(){if(null!=e.files&&null!=e.files[0]){var o=new FileReader;o.onload=function(o){var i=t.quill.getSelection(!0);t.quill.updateContents((new s.default).retain(i.index).delete(i.length).insert({image:o.target.result}),a.default.sources.USER),t.quill.setSelection(i.index+1,a.default.sources.SILENT),e.value=""},o.readAsDataURL(e.files[0])}})),this.container.appendChild(e)),e.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var A=function(t){function e(t,o){m(this,e);var i=v(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));return i.textbox=i.root.querySelector('input[type="text"]'),i.listen(),i}return g(e,t),i(e,[{key:"listen",value:function(){var t=this;this.textbox.addEventListener("keydown",(function(e){l.default.match(e,"enter")?(t.save(),e.preventDefault()):l.default.match(e,"escape")&&(t.cancel(),e.preventDefault())}))}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+t)||""),this.root.setAttribute("data-mode",t)}},{key:"restoreFocus",value:function(){var t=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=t}},{key:"save",value:function(){var t=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var e=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,a.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,a.default.sources.USER)),this.quill.root.scrollTop=e;break;case"video":t=function(t){var e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);if(e)return(e[1]||"https")+"://www.youtube.com/embed/"+e[2]+"?showinfo=0";if(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))return(e[1]||"https")+"://player.vimeo.com/video/"+e[2]+"/";return t}(t);case"formula":if(!t)break;var o=this.quill.getSelection(!0);if(null!=o){var i=o.index+o.length;this.quill.insertEmbed(i,this.root.getAttribute("data-mode"),t,a.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(i+1," ",a.default.sources.USER),this.quill.setSelection(i+2,a.default.sources.USER)}}this.textbox.value="",this.hide()}}]),e}(h.default);function _(t,e){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.forEach((function(e){var i=document.createElement("option");e===o?i.setAttribute("selected","selected"):i.setAttribute("value",e),t.appendChild(i)}))}e.BaseTooltip=A,e.default=O},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.head=this.tail=null,this.length=0}return t.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.insertBefore(t[0],null),t.length>1&&this.append.apply(this,t.slice(1))},t.prototype.contains=function(t){for(var e,o=this.iterator();e=o();)if(e===t)return!0;return!1},t.prototype.insertBefore=function(t,e){t&&(t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)},t.prototype.offset=function(t){for(var e=0,o=this.head;null!=o;){if(o===t)return e;e+=o.length(),o=o.next}return-1},t.prototype.remove=function(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)},t.prototype.iterator=function(t){return void 0===t&&(t=this.head),function(){var e=t;return null!=t&&(t=t.next),e}},t.prototype.find=function(t,e){void 0===e&&(e=!1);for(var o,i=this.iterator();o=i();){var n=o.length();if(t<n||e&&t===n&&(null==o.next||0!==o.next.length()))return[o,t];t-=n}return[null,0]},t.prototype.forEach=function(t){for(var e,o=this.iterator();e=o();)t(e)},t.prototype.forEachAt=function(t,e,o){if(!(e<=0))for(var i,n=this.find(t),r=n[0],s=t-n[1],a=this.iterator(r);(i=a())&&s<t+e;){var l=i.length();t>s?o(i,t-s,Math.min(e,s+l-t)):o(i,0,Math.min(l,t+e-s)),s+=l}},t.prototype.map=function(t){return this.reduce((function(e,o){return e.push(t(o)),e}),[])},t.prototype.reduce=function(t,e){for(var o,i=this.iterator();o=i();)e=t(e,o);return e},t}();e.default=i},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o(17),s=o(1),a={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},l=function(t){function e(e){var o=t.call(this,e)||this;return o.scroll=o,o.observer=new MutationObserver((function(t){o.update(t)})),o.observer.observe(o.domNode,a),o.attach(),o}return n(e,t),e.prototype.detach=function(){t.prototype.detach.call(this),this.observer.disconnect()},e.prototype.deleteAt=function(e,o){this.update(),0===e&&o===this.length()?this.children.forEach((function(t){t.remove()})):t.prototype.deleteAt.call(this,e,o)},e.prototype.formatAt=function(e,o,i,n){this.update(),t.prototype.formatAt.call(this,e,o,i,n)},e.prototype.insertAt=function(e,o,i){this.update(),t.prototype.insertAt.call(this,e,o,i)},e.prototype.optimize=function(e,o){var i=this;void 0===e&&(e=[]),void 0===o&&(o={}),t.prototype.optimize.call(this,o);for(var n=[].slice.call(this.observer.takeRecords());n.length>0;)e.push(n.pop());for(var a=function(t,e){void 0===e&&(e=!0),null!=t&&t!==i&&null!=t.domNode.parentNode&&(null==t.domNode[s.DATA_KEY].mutations&&(t.domNode[s.DATA_KEY].mutations=[]),e&&a(t.parent))},l=function(t){null!=t.domNode[s.DATA_KEY]&&null!=t.domNode[s.DATA_KEY].mutations&&(t instanceof r.default&&t.children.forEach(l),t.optimize(o))},u=e,c=0;u.length>0;c+=1){if(c>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(u.forEach((function(t){var e=s.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(a(s.find(t.previousSibling,!1)),[].forEach.call(t.addedNodes,(function(t){var e=s.find(t,!1);a(e,!1),e instanceof r.default&&e.children.forEach((function(t){a(t,!1)}))}))):"attributes"===t.type&&a(e.prev)),a(e))})),this.children.forEach(l),n=(u=[].slice.call(this.observer.takeRecords())).slice();n.length>0;)e.push(n.pop())}},e.prototype.update=function(e,o){var i=this;void 0===o&&(o={}),(e=e||this.observer.takeRecords()).map((function(t){var e=s.find(t.target,!0);return null==e?null:null==e.domNode[s.DATA_KEY].mutations?(e.domNode[s.DATA_KEY].mutations=[t],e):(e.domNode[s.DATA_KEY].mutations.push(t),null)})).forEach((function(t){null!=t&&t!==i&&null!=t.domNode[s.DATA_KEY]&&t.update(t.domNode[s.DATA_KEY].mutations||[],o)})),null!=this.domNode[s.DATA_KEY].mutations&&t.prototype.update.call(this,this.domNode[s.DATA_KEY].mutations,o),this.optimize(e,o)},e.blotName="scroll",e.defaultChild="block",e.scope=s.Scope.BLOCK_BLOT,e.tagName="DIV",e}(r.default);e.default=l},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o(18),s=o(1);var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.formats=function(o){if(o.tagName!==e.tagName)return t.formats.call(this,o)},e.prototype.format=function(o,i){var n=this;o!==this.statics.blotName||i?t.prototype.format.call(this,o,i):(this.children.forEach((function(t){t instanceof r.default||(t=t.wrap(e.blotName,!0)),n.attributes.copy(t)})),this.unwrap())},e.prototype.formatAt=function(e,o,i,n){null!=this.formats()[i]||s.query(i,s.Scope.ATTRIBUTE)?this.isolate(e,o).format(i,n):t.prototype.formatAt.call(this,e,o,i,n)},e.prototype.optimize=function(o){t.prototype.optimize.call(this,o);var i=this.formats();if(0===Object.keys(i).length)return this.unwrap();var n=this.next;n instanceof e&&n.prev===this&&function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var o in t)if(t[o]!==e[o])return!1;return!0}(i,n.formats())&&(n.moveChildren(this),n.remove())},e.blotName="inline",e.scope=s.Scope.INLINE_BLOT,e.tagName="SPAN",e}(r.default);e.default=a},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o(18),s=o(1),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.formats=function(o){var i=s.query(e.blotName).tagName;if(o.tagName!==i)return t.formats.call(this,o)},e.prototype.format=function(o,i){null!=s.query(o,s.Scope.BLOCK)&&(o!==this.statics.blotName||i?t.prototype.format.call(this,o,i):this.replaceWith(e.blotName))},e.prototype.formatAt=function(e,o,i,n){null!=s.query(i,s.Scope.BLOCK)?this.format(i,n):t.prototype.formatAt.call(this,e,o,i,n)},e.prototype.insertAt=function(e,o,i){if(null==i||null!=s.query(o,s.Scope.INLINE))t.prototype.insertAt.call(this,e,o,i);else{var n=this.split(e),r=s.create(o,i);n.parent.insertBefore(r,n)}},e.prototype.update=function(e,o){navigator.userAgent.match(/Trident/)?this.build():t.prototype.update.call(this,e,o)},e.blotName="block",e.scope=s.Scope.BLOCK_BLOT,e.tagName="P",e}(r.default);e.default=a},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.formats=function(t){},e.prototype.format=function(e,o){t.prototype.formatAt.call(this,0,this.length(),e,o)},e.prototype.formatAt=function(e,o,i,n){0===e&&o===this.length()?this.format(i,n):t.prototype.formatAt.call(this,e,o,i,n)},e.prototype.formats=function(){return this.statics.formats(this.domNode)},e}(o(19).default);e.default=r},function(t,e,o){var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o(19),s=o(1),a=function(t){function e(e){var o=t.call(this,e)||this;return o.text=o.statics.value(o.domNode),o}return n(e,t),e.create=function(t){return document.createTextNode(t)},e.value=function(t){var e=t.data;return e.normalize&&(e=e.normalize()),e},e.prototype.deleteAt=function(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)},e.prototype.index=function(t,e){return this.domNode===t?e:-1},e.prototype.insertAt=function(e,o,i){null==i?(this.text=this.text.slice(0,e)+o+this.text.slice(e),this.domNode.data=this.text):t.prototype.insertAt.call(this,e,o,i)},e.prototype.length=function(){return this.text.length},e.prototype.optimize=function(o){t.prototype.optimize.call(this,o),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof e&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},e.prototype.position=function(t,e){return[this.domNode,t]},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var o=s.create(this.domNode.splitText(t));return this.parent.insertBefore(o,this.next),this.text=this.statics.value(this.domNode),o},e.prototype.update=function(t,e){var o=this;t.some((function(t){return"characterData"===t.type&&t.target===o.domNode}))&&(this.text=this.statics.value(this.domNode))},e.prototype.value=function(){return this.text},e.blotName="text",e.scope=s.Scope.INLINE_BLOT,e}(r.default);e.default=a},function(t,e,o){var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return arguments.length>1&&!this.contains(t)==!e?e:n.call(this,t)}}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var o=this.toString();("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>o.length)&&(e=o.length),e-=t.length;var i=o.indexOf(t,e);return-1!==i&&i===e}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,o=Object(this),i=o.length>>>0,n=arguments[1],r=0;r<i;r++)if(e=o[r],t.call(n,e,r,o))return e}}),document.addEventListener("DOMContentLoaded",(function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)}))},function(t,e){var o=-1;function i(t,e,l){if(t==e)return t?[[0,t]]:[];(l<0||t.length<l)&&(l=null);var c=r(t,e),d=t.substring(0,c);c=s(t=t.substring(c),e=e.substring(c));var p=t.substring(t.length-c),h=function(t,e){var a;if(!t)return[[1,e]];if(!e)return[[o,t]];var l=t.length>e.length?t:e,u=t.length>e.length?e:t,c=l.indexOf(u);if(-1!=c)return a=[[1,l.substring(0,c)],[0,u],[1,l.substring(c+u.length)]],t.length>e.length&&(a[0][0]=a[2][0]=o),a;if(1==u.length)return[[o,t],[1,e]];var d=function(t,e){var o=t.length>e.length?t:e,i=t.length>e.length?e:t;if(o.length<4||2*i.length<o.length)return null;function n(t,e,o){for(var i,n,a,l,u=t.substring(o,o+Math.floor(t.length/4)),c=-1,d="";-1!=(c=e.indexOf(u,c+1));){var p=r(t.substring(o),e.substring(c)),h=s(t.substring(0,o),e.substring(0,c));d.length<h+p&&(d=e.substring(c-h,c)+e.substring(c,c+p),i=t.substring(0,o-h),n=t.substring(o+p),a=e.substring(0,c-h),l=e.substring(c+p))}return 2*d.length>=t.length?[i,n,a,l,d]:null}var a,l,u,c,d,p=n(o,i,Math.ceil(o.length/4)),h=n(o,i,Math.ceil(o.length/2));if(!p&&!h)return null;a=h?p&&p[4].length>h[4].length?p:h:p;t.length>e.length?(l=a[0],u=a[1],c=a[2],d=a[3]):(c=a[0],d=a[1],l=a[2],u=a[3]);var f=a[4];return[l,u,c,d,f]}(t,e);if(d){var p=d[0],h=d[1],f=d[2],m=d[3],v=d[4],g=i(p,f),b=i(h,m);return g.concat([[0,v]],b)}return function(t,e){for(var i=t.length,r=e.length,s=Math.ceil((i+r)/2),a=s,l=2*s,u=new Array(l),c=new Array(l),d=0;d<l;d++)u[d]=-1,c[d]=-1;u[a+1]=0,c[a+1]=0;for(var p=i-r,h=p%2!=0,f=0,m=0,v=0,g=0,b=0;b<s;b++){for(var y=-b+f;y<=b-m;y+=2){for(var x=a+y,w=(q=y==-b||y!=b&&u[x-1]<u[x+1]?u[x+1]:u[x-1]+1)-y;q<i&&w<r&&t.charAt(q)==e.charAt(w);)q++,w++;if(u[x]=q,q>i)m+=2;else if(w>r)f+=2;else if(h){if((A=a+p-y)>=0&&A<l&&-1!=c[A])if(q>=(O=i-c[A]))return n(t,e,q,w)}}for(var E=-b+v;E<=b-g;E+=2){for(var O,A=a+E,_=(O=E==-b||E!=b&&c[A-1]<c[A+1]?c[A+1]:c[A-1]+1)-E;O<i&&_<r&&t.charAt(i-O-1)==e.charAt(r-_-1);)O++,_++;if(c[A]=O,O>i)g+=2;else if(_>r)v+=2;else if(!h){if((x=a+p-E)>=0&&x<l&&-1!=u[x]){var q;w=a+(q=u[x])-x;if(q>=(O=i-O))return n(t,e,q,w)}}}}return[[o,t],[1,e]]}(t,e)}(t=t.substring(0,t.length-c),e=e.substring(0,e.length-c));return d&&h.unshift([0,d]),p&&h.push([0,p]),a(h),null!=l&&(h=function(t,e){var i=function(t,e){if(0===e)return[0,t];for(var i=0,n=0;n<t.length;n++){var r=t[n];if(r[0]===o||0===r[0]){var s=i+r[1].length;if(e===s)return[n+1,t];if(e<s){t=t.slice();var a=e-i,l=[r[0],r[1].slice(0,a)],u=[r[0],r[1].slice(a)];return t.splice(n,1,l,u),[n+1,t]}i=s}}throw new Error("cursor_pos is out of bounds!")}(t,e),n=i[1],r=i[0],s=n[r],a=n[r+1];if(null==s)return t;if(0!==s[0])return t;if(null!=a&&s[1]+a[1]===a[1]+s[1])return n.splice(r,2,a,s),u(n,r,2);if(null!=a&&0===a[1].indexOf(s[1])){n.splice(r,2,[a[0],s[1]],[0,s[1]]);var l=a[1].slice(s[1].length);return l.length>0&&n.splice(r+2,0,[a[0],l]),u(n,r,3)}return t}(h,l)),h=function(t){for(var e=!1,i=function(t){return t.charCodeAt(0)>=56320&&t.charCodeAt(0)<=57343},n=function(t){return t.charCodeAt(t.length-1)>=55296&&t.charCodeAt(t.length-1)<=56319},r=2;r<t.length;r+=1)0===t[r-2][0]&&n(t[r-2][1])&&t[r-1][0]===o&&i(t[r-1][1])&&1===t[r][0]&&i(t[r][1])&&(e=!0,t[r-1][1]=t[r-2][1].slice(-1)+t[r-1][1],t[r][1]=t[r-2][1].slice(-1)+t[r][1],t[r-2][1]=t[r-2][1].slice(0,-1));if(!e)return t;var s=[];for(r=0;r<t.length;r+=1)t[r][1].length>0&&s.push(t[r]);return s}(h)}function n(t,e,o,n){var r=t.substring(0,o),s=e.substring(0,n),a=t.substring(o),l=e.substring(n),u=i(r,s),c=i(a,l);return u.concat(c)}function r(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var o=0,i=Math.min(t.length,e.length),n=i,r=0;o<n;)t.substring(r,n)==e.substring(r,n)?r=o=n:i=n,n=Math.floor((i-o)/2+o);return n}function s(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var o=0,i=Math.min(t.length,e.length),n=i,r=0;o<n;)t.substring(t.length-n,t.length-r)==e.substring(e.length-n,e.length-r)?r=o=n:i=n,n=Math.floor((i-o)/2+o);return n}function a(t){t.push([0,""]);for(var e,i=0,n=0,l=0,u="",c="";i<t.length;)switch(t[i][0]){case 1:l++,c+=t[i][1],i++;break;case o:n++,u+=t[i][1],i++;break;case 0:n+l>1?(0!==n&&0!==l&&(0!==(e=r(c,u))&&(i-n-l>0&&0==t[i-n-l-1][0]?t[i-n-l-1][1]+=c.substring(0,e):(t.splice(0,0,[0,c.substring(0,e)]),i++),c=c.substring(e),u=u.substring(e)),0!==(e=s(c,u))&&(t[i][1]=c.substring(c.length-e)+t[i][1],c=c.substring(0,c.length-e),u=u.substring(0,u.length-e))),0===n?t.splice(i-l,n+l,[1,c]):0===l?t.splice(i-n,n+l,[o,u]):t.splice(i-n-l,n+l,[o,u],[1,c]),i=i-n-l+(n?1:0)+(l?1:0)+1):0!==i&&0==t[i-1][0]?(t[i-1][1]+=t[i][1],t.splice(i,1)):i++,l=0,n=0,u="",c=""}""===t[t.length-1][1]&&t.pop();var d=!1;for(i=1;i<t.length-1;)0==t[i-1][0]&&0==t[i+1][0]&&(t[i][1].substring(t[i][1].length-t[i-1][1].length)==t[i-1][1]?(t[i][1]=t[i-1][1]+t[i][1].substring(0,t[i][1].length-t[i-1][1].length),t[i+1][1]=t[i-1][1]+t[i+1][1],t.splice(i-1,1),d=!0):t[i][1].substring(0,t[i+1][1].length)==t[i+1][1]&&(t[i-1][1]+=t[i+1][1],t[i][1]=t[i][1].substring(t[i+1][1].length)+t[i+1][1],t.splice(i+1,1),d=!0)),i++;d&&a(t)}var l=i;function u(t,e,o){for(var i=e+o-1;i>=0&&i>=e-1;i--)if(i+1<t.length){var n=t[i],r=t[i+1];n[0]===r[1]&&t.splice(i,2,[n[0],n[1]+r[1]])}return t}l.INSERT=1,l.DELETE=o,l.EQUAL=0,t.exports=l},function(t,e){function o(t){var e=[];for(var o in t)e.push(o);return e}(t.exports="function"==typeof Object.keys?Object.keys:o).shim=o},function(t,e){var o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function i(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function n(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=o?i:n).supported=i,e.unsupported=n},function(t,e){var o=Object.prototype.hasOwnProperty,i="~";function n(){}function r(t,e,o){this.fn=t,this.context=e,this.once=o||!1}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),s.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)o.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},s.prototype.listeners=function(t,e){var o=i?i+t:t,n=this._events[o];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var r=0,s=n.length,a=new Array(s);r<s;r++)a[r]=n[r].fn;return a},s.prototype.emit=function(t,e,o,n,r,s){var a=i?i+t:t;if(!this._events[a])return!1;var l,u,c=this._events[a],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,o),!0;case 4:return c.fn.call(c.context,e,o,n),!0;case 5:return c.fn.call(c.context,e,o,n,r),!0;case 6:return c.fn.call(c.context,e,o,n,r,s),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var p,h=c.length;for(u=0;u<h;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,o);break;case 4:c[u].fn.call(c[u].context,e,o,n);break;default:if(!l)for(p=1,l=new Array(d-1);p<d;p++)l[p-1]=arguments[p];c[u].fn.apply(c[u].context,l)}}return!0},s.prototype.on=function(t,e,o){var n=new r(e,o||this),s=i?i+t:t;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],n]:this._events[s].push(n):(this._events[s]=n,this._eventsCount++),this},s.prototype.once=function(t,e,o){var n=new r(e,o||this,!0),s=i?i+t:t;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],n]:this._events[s].push(n):(this._events[s]=n,this._eventsCount++),this},s.prototype.removeListener=function(t,e,o,r){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return 0==--this._eventsCount?this._events=new n:delete this._events[s],this;var a=this._events[s];if(a.fn)a.fn!==e||r&&!a.once||o&&a.context!==o||(0==--this._eventsCount?this._events=new n:delete this._events[s]);else{for(var l=0,u=[],c=a.length;l<c;l++)(a[l].fn!==e||r&&!a[l].once||o&&a[l].context!==o)&&u.push(a[l]);u.length?this._events[s]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new n:delete this._events[s]}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new n:delete this._events[e])):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prototype.setMaxListeners=function(){return this},s.prefixed=i,s.EventEmitter=s,void 0!==t&&(t.exports=s)},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.matchText=e.matchSpacing=e.matchNewline=e.matchBlot=e.matchAttributor=e.default=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),s=y(o(3)),a=y(o(2)),l=y(o(0)),u=y(o(5)),c=y(o(10)),d=y(o(9)),p=o(36),h=o(37),f=y(o(13)),m=o(26),v=o(38),g=o(39),b=o(40);function y(t){return t&&t.__esModule?t:{default:t}}function x(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var w=(0,c.default)("quill:clipboard"),E="__ql-matcher",O=[[Node.TEXT_NODE,j],[Node.TEXT_NODE,D],["br",function(t,e){k(e,"\n")||e.insert("\n");return e}],[Node.ELEMENT_NODE,D],[Node.ELEMENT_NODE,R],[Node.ELEMENT_NODE,L],[Node.ELEMENT_NODE,C],[Node.ELEMENT_NODE,function(t,e){var o={},i=t.style||{};i.fontStyle&&"italic"===S(t).fontStyle&&(o.italic=!0);i.fontWeight&&(S(t).fontWeight.startsWith("bold")||parseInt(S(t).fontWeight)>=700)&&(o.bold=!0);Object.keys(o).length>0&&(e=I(e,o));parseFloat(i.textIndent||0)>0&&(e=(new a.default).insert("\t").concat(e));return e}],["li",function(t,e){var o=l.default.query(t);if(null==o||"list-item"!==o.blotName||!k(e,"\n"))return e;var i=-1,n=t.parentNode;for(;!n.classList.contains("ql-clipboard");)"list"===(l.default.query(n)||{}).blotName&&(i+=1),n=n.parentNode;return i<=0?e:e.compose((new a.default).retain(e.length()-1).retain(1,{indent:i}))}],["b",T.bind(T,"bold")],["i",T.bind(T,"italic")],["style",function(){return new a.default}]],A=[p.AlignAttribute,v.DirectionAttribute].reduce((function(t,e){return t[e.keyName]=e,t}),{}),_=[p.AlignStyle,h.BackgroundStyle,m.ColorStyle,v.DirectionStyle,g.FontStyle,b.SizeStyle].reduce((function(t,e){return t[e.keyName]=e,t}),{}),q=function(t){function e(t,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));return i.quill.root.addEventListener("paste",i.onPaste.bind(i)),i.container=i.quill.addContainer("ql-clipboard"),i.container.setAttribute("contenteditable",!0),i.container.setAttribute("tabindex",-1),i.matchers=[],O.concat(i.options.matchers).forEach((function(t){var e=n(t,2),r=e[0],s=e[1];(o.matchVisual||s!==L)&&i.addMatcher(r,s)})),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"addMatcher",value:function(t,e){this.matchers.push([t,e])}},{key:"convert",value:function(t){if("string"==typeof t)return this.container.innerHTML=t.replace(/\>\r?\n +\</g,"><"),this.convert();var e=this.quill.getFormat(this.quill.selection.savedRange.index);if(e[f.default.blotName]){var o=this.container.innerText;return this.container.innerHTML="",(new a.default).insert(o,x({},f.default.blotName,e[f.default.blotName]))}var i=this.prepareMatching(),r=n(i,2),s=r[0],l=r[1],u=P(this.container,s,l);return k(u,"\n")&&null==u.ops[u.ops.length-1].attributes&&(u=u.compose((new a.default).retain(u.length()-1).delete(1))),w.log("convert",this.container.innerHTML,u),this.container.innerHTML="",u}},{key:"dangerouslyPasteHTML",value:function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.default.sources.API;if("string"==typeof t)this.quill.setContents(this.convert(t),e),this.quill.setSelection(0,u.default.sources.SILENT);else{var i=this.convert(e);this.quill.updateContents((new a.default).retain(t).concat(i),o),this.quill.setSelection(t+i.length(),u.default.sources.SILENT)}}},{key:"onPaste",value:function(t){var e=this;if(!t.defaultPrevented&&this.quill.isEnabled()){var o=this.quill.getSelection(),i=(new a.default).retain(o.index),n=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(u.default.sources.SILENT),setTimeout((function(){i=i.concat(e.convert()).delete(o.length),e.quill.updateContents(i,u.default.sources.USER),e.quill.setSelection(i.length()-o.length,u.default.sources.SILENT),e.quill.scrollingContainer.scrollTop=n,e.quill.focus()}),1)}}},{key:"prepareMatching",value:function(){var t=this,e=[],o=[];return this.matchers.forEach((function(i){var r=n(i,2),s=r[0],a=r[1];switch(s){case Node.TEXT_NODE:o.push(a);break;case Node.ELEMENT_NODE:e.push(a);break;default:[].forEach.call(t.container.querySelectorAll(s),(function(t){t[E]=t[E]||[],t[E].push(a)}))}})),[e,o]}}]),e}(d.default);function I(t,e,o){return"object"===(void 0===e?"undefined":i(e))?Object.keys(e).reduce((function(t,o){return I(t,o,e[o])}),t):t.reduce((function(t,i){return i.attributes&&i.attributes[e]?t.push(i):t.insert(i.insert,(0,s.default)({},x({},e,o),i.attributes))}),new a.default)}function S(t){if(t.nodeType!==Node.ELEMENT_NODE)return{};var e="__ql-computed-style";return t[e]||(t[e]=window.getComputedStyle(t))}function k(t,e){for(var o="",i=t.ops.length-1;i>=0&&o.length<e.length;--i){var n=t.ops[i];if("string"!=typeof n.insert)break;o=n.insert+o}return o.slice(-1*e.length)===e}function N(t){if(0===t.childNodes.length)return!1;var e=S(t);return["block","list-item"].indexOf(e.display)>-1}function P(t,e,o){return t.nodeType===t.TEXT_NODE?o.reduce((function(e,o){return o(t,e)}),new a.default):t.nodeType===t.ELEMENT_NODE?[].reduce.call(t.childNodes||[],(function(i,n){var r=P(n,e,o);return n.nodeType===t.ELEMENT_NODE&&(r=e.reduce((function(t,e){return e(n,t)}),r),r=(n[E]||[]).reduce((function(t,e){return e(n,t)}),r)),i.concat(r)}),new a.default):new a.default}function T(t,e,o){return I(o,t,!0)}function C(t,e){var o=l.default.Attributor.Attribute.keys(t),i=l.default.Attributor.Class.keys(t),n=l.default.Attributor.Style.keys(t),r={};return o.concat(i).concat(n).forEach((function(e){var o=l.default.query(e,l.default.Scope.ATTRIBUTE);null!=o&&(r[o.attrName]=o.value(t),r[o.attrName])||(null==(o=A[e])||o.attrName!==e&&o.keyName!==e||(r[o.attrName]=o.value(t)||void 0),null==(o=_[e])||o.attrName!==e&&o.keyName!==e||(o=_[e],r[o.attrName]=o.value(t)||void 0))})),Object.keys(r).length>0&&(e=I(e,r)),e}function R(t,e){var o=l.default.query(t);if(null==o)return e;if(o.prototype instanceof l.default.Embed){var i={},n=o.value(t);null!=n&&(i[o.blotName]=n,e=(new a.default).insert(i,o.formats(t)))}else"function"==typeof o.formats&&(e=I(e,o.blotName,o.formats(t)));return e}function D(t,e){return k(e,"\n")||(N(t)||e.length()>0&&t.nextSibling&&N(t.nextSibling))&&e.insert("\n"),e}function L(t,e){if(N(t)&&null!=t.nextElementSibling&&!k(e,"\n\n")){var o=t.offsetHeight+parseFloat(S(t).marginTop)+parseFloat(S(t).marginBottom);t.nextElementSibling.offsetTop>t.offsetTop+1.5*o&&e.insert("\n")}return e}function j(t,e){var o=t.data;if("O:P"===t.parentNode.tagName)return e.insert(o.trim());if(0===o.trim().length&&t.parentNode.classList.contains("ql-clipboard"))return e;if(!S(t.parentNode).whiteSpace.startsWith("pre")){var i=function(t,e){return(e=e.replace(/[^\u00a0]/g,"")).length<1&&t?" ":e};o=(o=o.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,i.bind(i,!0)),(null==t.previousSibling&&N(t.parentNode)||null!=t.previousSibling&&N(t.previousSibling))&&(o=o.replace(/^\s+/,i.bind(i,!1))),(null==t.nextSibling&&N(t.parentNode)||null!=t.nextSibling&&N(t.nextSibling))&&(o=o.replace(/\s+$/,i.bind(i,!1)))}return e.insert(o)}q.DEFAULTS={matchers:[],matchVisual:!0},e.default=q,e.matchAttributor=C,e.matchBlot=R,e.matchNewline=D,e.matchSpacing=L,e.matchText=j},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(6);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u=function(t){function e(){return a(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"optimize",value:function(t){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return r(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),e}(((i=s)&&i.__esModule?i:{default:i}).default);u.blotName="bold",u.tagName=["STRONG","B"],e.default=u},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.addControls=e.default=void 0;var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=c(o(2)),s=c(o(0)),a=c(o(5)),l=c(o(10)),u=c(o(9));function c(t){return t&&t.__esModule?t:{default:t}}function d(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var p=(0,l.default)("quill:toolbar"),h=function(t){function e(t,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n,r=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));if(Array.isArray(r.options.container)){var s=document.createElement("div");m(s,r.options.container),t.container.parentNode.insertBefore(s,t.container),r.container=s}else"string"==typeof r.options.container?r.container=document.querySelector(r.options.container):r.container=r.options.container;return r.container instanceof HTMLElement?(r.container.classList.add("ql-toolbar"),r.controls=[],r.handlers={},Object.keys(r.options.handlers).forEach((function(t){r.addHandler(t,r.options.handlers[t])})),[].forEach.call(r.container.querySelectorAll("button, select"),(function(t){r.attach(t)})),r.quill.on(a.default.events.EDITOR_CHANGE,(function(t,e){t===a.default.events.SELECTION_CHANGE&&r.update(e)})),r.quill.on(a.default.events.SCROLL_OPTIMIZE,(function(){var t=r.quill.selection.getRange(),e=i(t,1)[0];r.update(e)})),r):(n=p.error("Container required for toolbar",r.options),d(r,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"addHandler",value:function(t,e){this.handlers[t]=e}},{key:"attach",value:function(t){var e=this,o=[].find.call(t.classList,(function(t){return 0===t.indexOf("ql-")}));if(o){if(o=o.slice("ql-".length),"BUTTON"===t.tagName&&t.setAttribute("type","button"),null==this.handlers[o]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[o])return void p.warn("ignoring attaching to disabled format",o,t);if(null==s.default.query(o))return void p.warn("ignoring attaching to nonexistent format",o,t)}var n="SELECT"===t.tagName?"change":"click";t.addEventListener(n,(function(n){var l=void 0;if("SELECT"===t.tagName){if(t.selectedIndex<0)return;var u=t.options[t.selectedIndex];l=!u.hasAttribute("selected")&&(u.value||!1)}else l=!t.classList.contains("ql-active")&&(t.value||!t.hasAttribute("value")),n.preventDefault();e.quill.focus();var c=e.quill.selection.getRange(),d=i(c,1)[0];if(null!=e.handlers[o])e.handlers[o].call(e,l);else if(s.default.query(o).prototype instanceof s.default.Embed){if(!(l=prompt("Enter "+o)))return;e.quill.updateContents((new r.default).retain(d.index).delete(d.length).insert(function(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}({},o,l)),a.default.sources.USER)}else e.quill.format(o,l,a.default.sources.USER);e.update(d)})),this.controls.push([o,t])}}},{key:"update",value:function(t){var e=null==t?{}:this.quill.getFormat(t);this.controls.forEach((function(o){var n=i(o,2),r=n[0],s=n[1];if("SELECT"===s.tagName){var a=void 0;if(null==t)a=null;else if(null==e[r])a=s.querySelector("option[selected]");else if(!Array.isArray(e[r])){var l=e[r];"string"==typeof l&&(l=l.replace(/\"/g,'\\"')),a=s.querySelector('option[value="'+l+'"]')}null==a?(s.value="",s.selectedIndex=-1):a.selected=!0}else if(null==t)s.classList.remove("ql-active");else if(s.hasAttribute("value")){var u=e[r]===s.getAttribute("value")||null!=e[r]&&e[r].toString()===s.getAttribute("value")||null==e[r]&&!s.getAttribute("value");s.classList.toggle("ql-active",u)}else s.classList.toggle("ql-active",null!=e[r])}))}}]),e}(u.default);function f(t,e,o){var i=document.createElement("button");i.setAttribute("type","button"),i.classList.add("ql-"+e),null!=o&&(i.value=o),t.appendChild(i)}function m(t,e){Array.isArray(e[0])||(e=[e]),e.forEach((function(e){var o=document.createElement("span");o.classList.add("ql-formats"),e.forEach((function(t){if("string"==typeof t)f(o,t);else{var e=Object.keys(t)[0],i=t[e];Array.isArray(i)?function(t,e,o){var i=document.createElement("select");i.classList.add("ql-"+e),o.forEach((function(t){var e=document.createElement("option");!1!==t?e.setAttribute("value",t):e.setAttribute("selected","selected"),i.appendChild(e)})),t.appendChild(i)}(o,e,i):f(o,e,i)}})),t.appendChild(o)}))}h.DEFAULTS={},h.DEFAULTS={container:null,handlers:{clean:function(){var t=this,e=this.quill.getSelection();if(null!=e)if(0==e.length){var o=this.quill.getFormat();Object.keys(o).forEach((function(e){null!=s.default.query(e,s.default.Scope.INLINE)&&t.quill.format(e,!1)}))}else this.quill.removeFormat(e,a.default.sources.USER)},direction:function(t){var e=this.quill.getFormat().align;"rtl"===t&&null==e?this.quill.format("align","right",a.default.sources.USER):t||"right"!==e||this.quill.format("align",!1,a.default.sources.USER),this.quill.format("direction",t,a.default.sources.USER)},indent:function(t){var e=this.quill.getSelection(),o=this.quill.getFormat(e),i=parseInt(o.indent||0);if("+1"===t||"-1"===t){var n="+1"===t?1:-1;"rtl"===o.direction&&(n*=-1),this.quill.format("indent",i+n,a.default.sources.USER)}},link:function(t){!0===t&&(t=prompt("Enter link URL:")),this.quill.format("link",t,a.default.sources.USER)},list:function(t){var e=this.quill.getSelection(),o=this.quill.getFormat(e);"check"===t?"checked"===o.list||"unchecked"===o.list?this.quill.format("list",!1,a.default.sources.USER):this.quill.format("list","unchecked",a.default.sources.USER):this.quill.format("list",t,a.default.sources.USER)}}},e.default=h,e.addControls=m},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(28);var a=function(t){function e(t,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.label.innerHTML=o,i.container.classList.add("ql-color-picker"),[].slice.call(i.container.querySelectorAll(".ql-picker-item"),0,7).forEach((function(t){t.classList.add("ql-primary")})),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"buildItem",value:function(t){var o=r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"buildItem",this).call(this,t);return o.style.backgroundColor=t.getAttribute("value")||"",o}},{key:"selectItem",value:function(t,o){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"selectItem",this).call(this,t,o);var i=this.label.querySelector(".ql-color-label"),n=t&&t.getAttribute("data-value")||"";i&&("line"===i.tagName?i.style.stroke=n:i.style.fill=n)}}]),e}(((i=s)&&i.__esModule?i:{default:i}).default);e.default=a},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(28);var a=function(t){function e(t,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.container.classList.add("ql-icon-picker"),[].forEach.call(i.container.querySelectorAll(".ql-picker-item"),(function(t){t.innerHTML=o[t.getAttribute("data-value")||""]})),i.defaultItem=i.container.querySelector(".ql-selected"),i.selectItem(i.defaultItem),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"selectItem",value:function(t,o){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"selectItem",this).call(this,t,o),t=t||this.defaultItem,this.label.innerHTML=t.innerHTML}}]),e}(((i=s)&&i.__esModule?i:{default:i}).default);e.default=a},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}();var n=function(){function t(e,o){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.quill=e,this.boundsContainer=o||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",(function(){i.root.style.marginTop=-1*i.quill.root.scrollTop+"px"})),this.hide()}return i(t,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(t){var e=t.left+t.width/2-this.root.offsetWidth/2,o=t.bottom+this.quill.root.scrollTop;this.root.style.left=e+"px",this.root.style.top=o+"px",this.root.classList.remove("ql-flip");var i=this.boundsContainer.getBoundingClientRect(),n=this.root.getBoundingClientRect(),r=0;if(n.right>i.right&&(r=i.right-n.right,this.root.style.left=e+r+"px"),n.left<i.left&&(r=i.left-n.left,this.root.style.left=e+r+"px"),n.bottom>i.bottom){var s=n.bottom-n.top,a=t.bottom-t.top+s;this.root.style.top=o-a+"px",this.root.classList.add("ql-flip")}return r}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),t}();e.default=n},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},r=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),s=h(o(3)),a=h(o(8)),l=o(43),u=h(l),c=h(o(27)),d=o(15),p=h(o(41));function h(t){return t&&t.__esModule?t:{default:t}}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var g=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],b=function(t){function e(t,o){f(this,e),null!=o.modules.toolbar&&null==o.modules.toolbar.container&&(o.modules.toolbar.container=g);var i=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));return i.quill.container.classList.add("ql-snow"),i}return v(e,t),r(e,[{key:"extendToolbar",value:function(t){t.container.classList.add("ql-snow"),this.buildButtons([].slice.call(t.container.querySelectorAll("button")),p.default),this.buildPickers([].slice.call(t.container.querySelectorAll("select")),p.default),this.tooltip=new y(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},(function(e,o){t.handlers.link.call(t,!o.format.link)}))}}]),e}(u.default);b.DEFAULTS=(0,s.default)(!0,{},u.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){if(t){var e=this.quill.getSelection();if(null==e||0==e.length)return;var o=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(o)&&0!==o.indexOf("mailto:")&&(o="mailto:"+o),this.quill.theme.tooltip.edit("link",o)}else this.quill.format("link",!1)}}}}});var y=function(t){function e(t,o){f(this,e);var i=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));return i.preview=i.root.querySelector("a.ql-preview"),i}return v(e,t),r(e,[{key:"listen",value:function(){var t=this;n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",(function(e){t.root.classList.contains("ql-editing")?t.save():t.edit("link",t.preview.textContent),e.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(function(e){if(null!=t.linkRange){var o=t.linkRange;t.restoreFocus(),t.quill.formatText(o,"link",!1,a.default.sources.USER),delete t.linkRange}e.preventDefault(),t.hide()})),this.quill.on(a.default.events.SELECTION_CHANGE,(function(e,o,n){if(null!=e){if(0===e.length&&n===a.default.sources.USER){var r=t.quill.scroll.descendant(c.default,e.index),s=i(r,2),l=s[0],u=s[1];if(null!=l){t.linkRange=new d.Range(e.index-u,l.length());var p=c.default.formats(l.domNode);return t.preview.textContent=p,t.preview.setAttribute("href",p),t.show(),void t.position(t.quill.getBounds(t.linkRange))}}else delete t.linkRange;t.hide()}}))}},{key:"show",value:function(){n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),e}(l.BaseTooltip);y.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),e.default=b},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i=D(o(29)),n=o(36),r=o(38),s=o(64),a=D(o(65)),l=D(o(66)),u=o(67),c=D(u),d=o(37),p=o(26),h=o(39),f=o(40),m=D(o(56)),v=D(o(68)),g=D(o(27)),b=D(o(69)),y=D(o(70)),x=D(o(71)),w=D(o(72)),E=D(o(73)),O=o(13),A=D(O),_=D(o(74)),q=D(o(75)),I=D(o(57)),S=D(o(41)),k=D(o(28)),N=D(o(59)),P=D(o(60)),T=D(o(61)),C=D(o(108)),R=D(o(62));function D(t){return t&&t.__esModule?t:{default:t}}i.default.register({"attributors/attribute/direction":r.DirectionAttribute,"attributors/class/align":n.AlignClass,"attributors/class/background":d.BackgroundClass,"attributors/class/color":p.ColorClass,"attributors/class/direction":r.DirectionClass,"attributors/class/font":h.FontClass,"attributors/class/size":f.SizeClass,"attributors/style/align":n.AlignStyle,"attributors/style/background":d.BackgroundStyle,"attributors/style/color":p.ColorStyle,"attributors/style/direction":r.DirectionStyle,"attributors/style/font":h.FontStyle,"attributors/style/size":f.SizeStyle},!0),i.default.register({"formats/align":n.AlignClass,"formats/direction":r.DirectionClass,"formats/indent":s.IndentClass,"formats/background":d.BackgroundStyle,"formats/color":p.ColorStyle,"formats/font":h.FontClass,"formats/size":f.SizeClass,"formats/blockquote":a.default,"formats/code-block":A.default,"formats/header":l.default,"formats/list":c.default,"formats/bold":m.default,"formats/code":O.Code,"formats/italic":v.default,"formats/link":g.default,"formats/script":b.default,"formats/strike":y.default,"formats/underline":x.default,"formats/image":w.default,"formats/video":E.default,"formats/list/item":u.ListItem,"modules/formula":_.default,"modules/syntax":q.default,"modules/toolbar":I.default,"themes/bubble":C.default,"themes/snow":R.default,"ui/icons":S.default,"ui/picker":k.default,"ui/icon-picker":P.default,"ui/color-picker":N.default,"ui/tooltip":T.default},!0),e.default=i.default},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.IndentClass=void 0;var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(0),a=(i=s)&&i.__esModule?i:{default:i};function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c=new(function(t){function e(){return l(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"add",value:function(t,o){if("+1"===o||"-1"===o){var i=this.value(t)||0;o="+1"===o?i+1:i-1}return 0===o?(this.remove(t),!0):r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"add",this).call(this,t,o)}},{key:"canAdd",value:function(t,o){return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canAdd",this).call(this,t,o)||r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canAdd",this).call(this,t,parseInt(o))}},{key:"value",value:function(t){return parseInt(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t))||void 0}}]),e}(a.default.Attributor.Class))("indent","ql-indent",{scope:a.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});e.IndentClass=c},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=o(4);function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=function(t){function e(){return r(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((i=n)&&i.__esModule?i:{default:i}).default);a.blotName="blockquote",a.tagName="blockquote",e.default=a},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=o(4);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var l=function(t){function e(){return s(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,null,[{key:"formats",value:function(t){return this.tagName.indexOf(t.tagName)+1}}]),e}(((i=r)&&i.__esModule?i:{default:i}).default);l.blotName="header",l.tagName=["H1","H2","H3","H4","H5","H6"],e.default=l},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ListItem=void 0;var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),n=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},r=l(o(0)),s=l(o(4)),a=l(o(25));function l(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var p=function(t){function e(){return u(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return d(e,t),i(e,[{key:"format",value:function(t,o){t!==h.blotName||o?n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,o):this.replaceWith(r.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(t,o){return this.parent.isolate(this.offset(this.parent),this.length()),t===this.parent.statics.blotName?(this.parent.replaceWith(t,o),this):(this.parent.unwrap(),n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replaceWith",this).call(this,t,o))}}],[{key:"formats",value:function(t){return t.tagName===this.tagName?void 0:n(e.__proto__||Object.getPrototypeOf(e),"formats",this).call(this,t)}}]),e}(s.default);p.blotName="list-item",p.tagName="LI";var h=function(t){function e(t){u(this,e);var o=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),i=function(e){if(e.target.parentNode===t){var i=o.statics.formats(t),n=r.default.find(e.target);"checked"===i?n.format("list","unchecked"):"unchecked"===i&&n.format("list","checked")}};return t.addEventListener("touchstart",i),t.addEventListener("mousedown",i),o}return d(e,t),i(e,null,[{key:"create",value:function(t){var o="ordered"===t?"OL":"UL",i=n(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,o);return"checked"!==t&&"unchecked"!==t||i.setAttribute("data-checked","checked"===t),i}},{key:"formats",value:function(t){return"OL"===t.tagName?"ordered":"UL"===t.tagName?t.hasAttribute("data-checked")?"true"===t.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),i(e,[{key:"format",value:function(t,e){this.children.length>0&&this.children.tail.format(t,e)}},{key:"formats",value:function(){return t={},e=this.statics.blotName,o=this.statics.formats(this.domNode),e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t;var t,e,o}},{key:"insertBefore",value:function(t,o){if(t instanceof p)n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,o);else{var i=null==o?this.length():o.offset(this),r=this.split(i);r.parent.insertBefore(t,r)}}},{key:"optimize",value:function(t){n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t);var o=this.next;null!=o&&o.prev===this&&o.statics.blotName===this.statics.blotName&&o.domNode.tagName===this.domNode.tagName&&o.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(o.moveChildren(this),o.remove())}},{key:"replace",value:function(t){if(t.statics.blotName!==this.statics.blotName){var o=r.default.create(this.statics.defaultChild);t.moveChildren(o),this.appendChild(o)}n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replace",this).call(this,t)}}]),e}(a.default);h.blotName="list",h.scope=r.default.Scope.BLOCK_BLOT,h.tagName=["OL","UL"],h.defaultChild="list-item",h.allowedChildren=[p],e.ListItem=p,e.default=h},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=o(56);function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=function(t){function e(){return r(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((i=n)&&i.__esModule?i:{default:i}).default);a.blotName="italic",a.tagName=["EM","I"],e.default=a},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(6);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u=function(t){function e(){return a(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,null,[{key:"create",value:function(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):r(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t)}},{key:"formats",value:function(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}}]),e}(((i=s)&&i.__esModule?i:{default:i}).default);u.blotName="script",u.tagName=["SUB","SUP"],e.default=u},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=o(6);function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=function(t){function e(){return r(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((i=n)&&i.__esModule?i:{default:i}).default);a.blotName="strike",a.tagName="S",e.default=a},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=o(6);function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=function(t){function e(){return r(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((i=n)&&i.__esModule?i:{default:i}).default);a.blotName="underline",a.tagName="U",e.default=a},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(0),a=(i=s)&&i.__esModule?i:{default:i},l=o(27);function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var d=["alt","height","width"],p=function(t){function e(){return u(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"format",value:function(t,o){d.indexOf(t)>-1?o?this.domNode.setAttribute(t,o):this.domNode.removeAttribute(t):r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,o)}}],[{key:"create",value:function(t){var o=r(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return"string"==typeof t&&o.setAttribute("src",this.sanitize(t)),o}},{key:"formats",value:function(t){return d.reduce((function(e,o){return t.hasAttribute(o)&&(e[o]=t.getAttribute(o)),e}),{})}},{key:"match",value:function(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}},{key:"sanitize",value:function(t){return(0,l.sanitize)(t,["http","https","data"])?t:"//:0"}},{key:"value",value:function(t){return t.getAttribute("src")}}]),e}(a.default.Embed);p.blotName="image",p.tagName="IMG",e.default=p},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var i,n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},s=o(4),a=o(27),l=(i=a)&&i.__esModule?i:{default:i};function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var d=["height","width"],p=function(t){function e(){return u(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"format",value:function(t,o){d.indexOf(t)>-1?o?this.domNode.setAttribute(t,o):this.domNode.removeAttribute(t):r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,o)}}],[{key:"create",value:function(t){var o=r(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return o.setAttribute("frameborder","0"),o.setAttribute("allowfullscreen",!0),o.setAttribute("src",this.sanitize(t)),o}},{key:"formats",value:function(t){return d.reduce((function(e,o){return t.hasAttribute(o)&&(e[o]=t.getAttribute(o)),e}),{})}},{key:"sanitize",value:function(t){return l.default.sanitize(t)}},{key:"value",value:function(t){return t.getAttribute("src")}}]),e}(s.BlockEmbed);p.blotName="video",p.className="ql-video",p.tagName="IFRAME",e.default=p},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.FormulaBlot=void 0;var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),n=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},r=l(o(35)),s=l(o(5)),a=l(o(9));function l(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var p=function(t){function e(){return u(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return d(e,t),i(e,null,[{key:"create",value:function(t){var o=n(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return"string"==typeof t&&(window.katex.render(t,o,{throwOnError:!1,errorColor:"#f00"}),o.setAttribute("data-value",t)),o}},{key:"value",value:function(t){return t.getAttribute("data-value")}}]),e}(r.default);p.blotName="formula",p.className="ql-formula",p.tagName="SPAN";var h=function(t){function e(){u(this,e);var t=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return t}return d(e,t),i(e,null,[{key:"register",value:function(){s.default.register(p,!0)}}]),e}(a.default);e.FormulaBlot=p,e.default=h},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.CodeToken=e.CodeBlock=void 0;var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),n=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},r=l(o(0)),s=l(o(5)),a=l(o(9));function l(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var p=function(t){function e(){return u(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return d(e,t),i(e,[{key:"replaceWith",value:function(t){this.domNode.textContent=this.domNode.textContent,this.attach(),n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replaceWith",this).call(this,t)}},{key:"highlight",value:function(t){var e=this.domNode.textContent;this.cachedText!==e&&((e.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=t(e),this.domNode.normalize(),this.attach()),this.cachedText=e)}}]),e}(l(o(13)).default);p.className="ql-syntax";var h=new r.default.Attributor.Class("token","hljs",{scope:r.default.Scope.INLINE}),f=function(t){function e(t,o){u(this,e);var i=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));if("function"!=typeof i.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var n=null;return i.quill.on(s.default.events.SCROLL_OPTIMIZE,(function(){clearTimeout(n),n=setTimeout((function(){i.highlight(),n=null}),i.options.interval)})),i.highlight(),i}return d(e,t),i(e,null,[{key:"register",value:function(){s.default.register(h,!0),s.default.register(p,!0)}}]),i(e,[{key:"highlight",value:function(){var t=this;if(!this.quill.selection.composing){this.quill.update(s.default.sources.USER);var e=this.quill.getSelection();this.quill.scroll.descendants(p).forEach((function(e){e.highlight(t.options.highlight)})),this.quill.update(s.default.sources.SILENT),null!=e&&this.quill.setSelection(e,s.default.sources.SILENT)}}}]),e}(a.default);f.DEFAULTS={highlight:null==window.hljs?null:function(t){return window.hljs.highlightAuto(t).value},interval:1e3},e.CodeBlock=p,e.CodeToken=h,e.default=f},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,e){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,e){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BubbleTooltip=void 0;var i=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(i):void 0},n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=d(o(3)),s=d(o(8)),a=o(43),l=d(a),u=o(15),c=d(o(41));function d(t){return t&&t.__esModule?t:{default:t}}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var m=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],v=function(t){function e(t,o){p(this,e),null!=o.modules.toolbar&&null==o.modules.toolbar.container&&(o.modules.toolbar.container=m);var i=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));return i.quill.container.classList.add("ql-bubble"),i}return f(e,t),n(e,[{key:"extendToolbar",value:function(t){this.tooltip=new g(this.quill,this.options.bounds),this.tooltip.root.appendChild(t.container),this.buildButtons([].slice.call(t.container.querySelectorAll("button")),c.default),this.buildPickers([].slice.call(t.container.querySelectorAll("select")),c.default)}}]),e}(l.default);v.DEFAULTS=(0,r.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var g=function(t){function e(t,o){p(this,e);var i=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));return i.quill.on(s.default.events.EDITOR_CHANGE,(function(t,e,o,n){if(t===s.default.events.SELECTION_CHANGE)if(null!=e&&e.length>0&&n===s.default.sources.USER){i.show(),i.root.style.left="0px",i.root.style.width="",i.root.style.width=i.root.offsetWidth+"px";var r=i.quill.getLines(e.index,e.length);if(1===r.length)i.position(i.quill.getBounds(e));else{var a=r[r.length-1],l=i.quill.getIndex(a),c=Math.min(a.length()-1,e.index+e.length-l),d=i.quill.getBounds(new u.Range(l,c));i.position(d)}}else document.activeElement!==i.textbox&&i.quill.hasFocus()&&i.hide()})),i}return f(e,t),n(e,[{key:"listen",value:function(){var t=this;i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",(function(){t.root.classList.remove("ql-editing")})),this.quill.on(s.default.events.SCROLL_OPTIMIZE,(function(){setTimeout((function(){if(!t.root.classList.contains("ql-hidden")){var e=t.quill.getSelection();null!=e&&t.position(t.quill.getBounds(e))}}),1)}))}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(t){var o=i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"position",this).call(this,t),n=this.root.querySelector(".ql-tooltip-arrow");if(n.style.marginLeft="",0===o)return o;n.style.marginLeft=-1*o-n.offsetWidth/2+"px"}}]),e}(a.BaseTooltip);g.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),e.BubbleTooltip=g,e.default=v},function(t,e,o){t.exports=o(63)}]).default}));const Zi=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Xi=Symbol(),Yi=new Map;class Ji{constructor(t,e){if(this._$cssResult$=!0,e!==Xi)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){let t=Yi.get(this.cssText);return Zi&&void 0===t&&(Yi.set(this.cssText,t=new CSSStyleSheet),t.replaceSync(this.cssText)),t}toString(){return this.cssText}}const tn=(t,...e)=>{const o=1===t.length?t[0]:e.reduce(((e,o,i)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+t[i+1]),t[0]);return new Ji(o,Xi)},en=Zi?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const o of t.cssRules)e+=o.cssText;return(t=>new Ji("string"==typeof t?t:t+"",Xi))(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var on;const nn=window.trustedTypes,rn=nn?nn.emptyScript:"",sn=window.reactiveElementPolyfillSupport,an={toAttribute(t,e){switch(e){case Boolean:t=t?rn:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let o=t;switch(e){case Boolean:o=null!==t;break;case Number:o=null===t?null:Number(t);break;case Object:case Array:try{o=JSON.parse(t)}catch(t){o=null}}return o}},ln=(t,e)=>e!==t&&(e==e||t==t),un={attribute:!0,type:String,converter:an,reflect:!1,hasChanged:ln};class cn extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(t){var e;null!==(e=this.l)&&void 0!==e||(this.l=[]),this.l.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,o)=>{const i=this._$Eh(o,e);void 0!==i&&(this._$Eu.set(i,o),t.push(i))})),t}static createProperty(t,e=un){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const o="symbol"==typeof t?Symbol():"__"+t,i=this.getPropertyDescriptor(t,o,e);void 0!==i&&Object.defineProperty(this.prototype,t,i)}}static getPropertyDescriptor(t,e,o){return{get(){return this[e]},set(i){const n=this[t];this[e]=i,this.requestUpdate(t,n,o)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||un}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const o of e)this.createProperty(o,t[o])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const o=new Set(t.flat(1/0).reverse());for(const t of o)e.unshift(en(t))}else void 0!==t&&e.push(en(t));return e}static _$Eh(t,e){const o=e.attribute;return!1===o?void 0:"string"==typeof o?o:"string"==typeof t?t.toLowerCase():void 0}o(){var t;this._$Ep=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(t=this.constructor.l)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,o;(null!==(e=this._$Eg)&&void 0!==e?e:this._$Eg=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(o=t.hostConnected)||void 0===o||o.call(t))}removeController(t){var e;null===(e=this._$Eg)||void 0===e||e.splice(this._$Eg.indexOf(t)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Et.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const e=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,e)=>{Zi?t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):e.forEach((e=>{const o=document.createElement("style"),i=window.litNonce;void 0!==i&&o.setAttribute("nonce",i),o.textContent=e.cssText,t.appendChild(o)}))})(e,this.constructor.elementStyles),e}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,o){this._$AK(t,o)}_$ES(t,e,o=un){var i,n;const r=this.constructor._$Eh(t,o);if(void 0!==r&&!0===o.reflect){const s=(null!==(n=null===(i=o.converter)||void 0===i?void 0:i.toAttribute)&&void 0!==n?n:an.toAttribute)(e,o.type);this._$Ei=t,null==s?this.removeAttribute(r):this.setAttribute(r,s),this._$Ei=null}}_$AK(t,e){var o,i,n;const r=this.constructor,s=r._$Eu.get(t);if(void 0!==s&&this._$Ei!==s){const t=r.getPropertyOptions(s),a=t.converter,l=null!==(n=null!==(i=null===(o=a)||void 0===o?void 0:o.fromAttribute)&&void 0!==i?i:"function"==typeof a?a:null)&&void 0!==n?n:an.fromAttribute;this._$Ei=s,this[s]=l(e,t.type),this._$Ei=null}}requestUpdate(t,e,o){let i=!0;void 0!==t&&(((o=o||this.constructor.getPropertyOptions(t)).hasChanged||ln)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===o.reflect&&this._$Ei!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,o))):i=!1),!this.isUpdatePending&&i&&(this._$Ep=this._$E_())}async _$E_(){this.isUpdatePending=!0;try{await this._$Ep}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((t,e)=>this[e]=t)),this._$Et=void 0);let e=!1;const o=this._$AL;try{e=this.shouldUpdate(o),e?(this.willUpdate(o),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(o)):this._$EU()}catch(t){throw e=!1,this._$EU(),t}e&&this._$AE(o)}willUpdate(t){}_$AE(t){var e;null===(e=this._$Eg)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,e)=>this._$ES(e,this[e],t))),this._$EC=void 0),this._$EU()}updated(t){}firstUpdated(t){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var dn;cn.finalized=!0,cn.elementProperties=new Map,cn.elementStyles=[],cn.shadowRootOptions={mode:"open"},null==sn||sn({ReactiveElement:cn}),(null!==(on=globalThis.reactiveElementVersions)&&void 0!==on?on:globalThis.reactiveElementVersions=[]).push("1.3.1");const pn=globalThis.trustedTypes,hn=pn?pn.createPolicy("lit-html",{createHTML:t=>t}):void 0,fn=`lit$${(Math.random()+"").slice(9)}$`,mn="?"+fn,vn=`<${mn}>`,gn=document,bn=(t="")=>gn.createComment(t),yn=t=>null===t||"object"!=typeof t&&"function"!=typeof t,xn=Array.isArray,wn=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,En=/-->/g,On=/>/g,An=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,_n=/'/g,qn=/"/g,In=/^(?:script|style|textarea|title)$/i,Sn=(t=>(e,...o)=>({_$litType$:t,strings:e,values:o}))(1),kn=Symbol.for("lit-noChange"),Nn=Symbol.for("lit-nothing"),Pn=new WeakMap,Tn=gn.createTreeWalker(gn,129,null,!1),Cn=(t,e)=>{const o=t.length-1,i=[];let n,r=2===e?"<svg>":"",s=wn;for(let e=0;e<o;e++){const o=t[e];let a,l,u=-1,c=0;for(;c<o.length&&(s.lastIndex=c,l=s.exec(o),null!==l);)c=s.lastIndex,s===wn?"!--"===l[1]?s=En:void 0!==l[1]?s=On:void 0!==l[2]?(In.test(l[2])&&(n=RegExp("</"+l[2],"g")),s=An):void 0!==l[3]&&(s=An):s===An?">"===l[0]?(s=null!=n?n:wn,u=-1):void 0===l[1]?u=-2:(u=s.lastIndex-l[2].length,a=l[1],s=void 0===l[3]?An:'"'===l[3]?qn:_n):s===qn||s===_n?s=An:s===En||s===On?s=wn:(s=An,n=void 0);const d=s===An&&t[e+1].startsWith("/>")?" ":"";r+=s===wn?o+vn:u>=0?(i.push(a),o.slice(0,u)+"$lit$"+o.slice(u)+fn+d):o+fn+(-2===u?(i.push(void 0),e):d)}const a=r+(t[o]||"<?>")+(2===e?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==hn?hn.createHTML(a):a,i]};class Rn{constructor({strings:t,_$litType$:e},o){let i;this.parts=[];let n=0,r=0;const s=t.length-1,a=this.parts,[l,u]=Cn(t,e);if(this.el=Rn.createElement(l,o),Tn.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(i=Tn.nextNode())&&a.length<s;){if(1===i.nodeType){if(i.hasAttributes()){const t=[];for(const e of i.getAttributeNames())if(e.endsWith("$lit$")||e.startsWith(fn)){const o=u[r++];if(t.push(e),void 0!==o){const t=i.getAttribute(o.toLowerCase()+"$lit$").split(fn),e=/([.?@])?(.*)/.exec(o);a.push({type:1,index:n,name:e[2],strings:t,ctor:"."===e[1]?Fn:"?"===e[1]?$n:"@"===e[1]?Bn:Mn})}else a.push({type:6,index:n})}for(const e of t)i.removeAttribute(e)}if(In.test(i.tagName)){const t=i.textContent.split(fn),e=t.length-1;if(e>0){i.textContent=pn?pn.emptyScript:"";for(let o=0;o<e;o++)i.append(t[o],bn()),Tn.nextNode(),a.push({type:2,index:++n});i.append(t[e],bn())}}}else if(8===i.nodeType)if(i.data===mn)a.push({type:2,index:n});else{let t=-1;for(;-1!==(t=i.data.indexOf(fn,t+1));)a.push({type:7,index:n}),t+=fn.length-1}n++}}static createElement(t,e){const o=gn.createElement("template");return o.innerHTML=t,o}}function Dn(t,e,o=t,i){var n,r,s,a;if(e===kn)return e;let l=void 0!==i?null===(n=o._$Cl)||void 0===n?void 0:n[i]:o._$Cu;const u=yn(e)?void 0:e._$litDirective$;return(null==l?void 0:l.constructor)!==u&&(null===(r=null==l?void 0:l._$AO)||void 0===r||r.call(l,!1),void 0===u?l=void 0:(l=new u(t),l._$AT(t,o,i)),void 0!==i?(null!==(s=(a=o)._$Cl)&&void 0!==s?s:a._$Cl=[])[i]=l:o._$Cu=l),void 0!==l&&(e=Dn(t,l._$AS(t,e.values),l,i)),e}class Ln{constructor(t,e){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var e;const{el:{content:o},parts:i}=this._$AD,n=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:gn).importNode(o,!0);Tn.currentNode=n;let r=Tn.nextNode(),s=0,a=0,l=i[0];for(;void 0!==l;){if(s===l.index){let e;2===l.type?e=new jn(r,r.nextSibling,this,t):1===l.type?e=new l.ctor(r,l.name,l.strings,this,t):6===l.type&&(e=new zn(r,this,t)),this.v.push(e),l=i[++a]}s!==(null==l?void 0:l.index)&&(r=Tn.nextNode(),s++)}return n}m(t){let e=0;for(const o of this.v)void 0!==o&&(void 0!==o.strings?(o._$AI(t,o,e),e+=o.strings.length-2):o._$AI(t[e])),e++}}class jn{constructor(t,e,o,i){var n;this.type=2,this._$AH=Nn,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=o,this.options=i,this._$Cg=null===(n=null==i?void 0:i.isConnected)||void 0===n||n}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=Dn(this,t,e),yn(t)?t===Nn||null==t||""===t?(this._$AH!==Nn&&this._$AR(),this._$AH=Nn):t!==this._$AH&&t!==kn&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.k(t):(t=>{var e;return xn(t)||"function"==typeof(null===(e=t)||void 0===e?void 0:e[Symbol.iterator])})(t)?this.S(t):this.$(t)}A(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.A(t))}$(t){this._$AH!==Nn&&yn(this._$AH)?this._$AA.nextSibling.data=t:this.k(gn.createTextNode(t)),this._$AH=t}T(t){var e;const{values:o,_$litType$:i}=t,n="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=Rn.createElement(i.h,this.options)),i);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===n)this._$AH.m(o);else{const t=new Ln(n,this),e=t.p(this.options);t.m(o),this.k(e),this._$AH=t}}_$AC(t){let e=Pn.get(t.strings);return void 0===e&&Pn.set(t.strings,e=new Rn(t)),e}S(t){xn(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let o,i=0;for(const n of t)i===e.length?e.push(o=new jn(this.A(bn()),this.A(bn()),this,this.options)):o=e[i],o._$AI(n),i++;i<e.length&&(this._$AR(o&&o._$AB.nextSibling,i),e.length=i)}_$AR(t=this._$AA.nextSibling,e){var o;for(null===(o=this._$AP)||void 0===o||o.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cg=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class Mn{constructor(t,e,o,i,n){this.type=1,this._$AH=Nn,this._$AN=void 0,this.element=t,this.name=e,this._$AM=i,this.options=n,o.length>2||""!==o[0]||""!==o[1]?(this._$AH=Array(o.length-1).fill(new String),this.strings=o):this._$AH=Nn}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,o,i){const n=this.strings;let r=!1;if(void 0===n)t=Dn(this,t,e,0),r=!yn(t)||t!==this._$AH&&t!==kn,r&&(this._$AH=t);else{const i=t;let s,a;for(t=n[0],s=0;s<n.length-1;s++)a=Dn(this,i[o+s],e,s),a===kn&&(a=this._$AH[s]),r||(r=!yn(a)||a!==this._$AH[s]),a===Nn?t=Nn:t!==Nn&&(t+=(null!=a?a:"")+n[s+1]),this._$AH[s]=a}r&&!i&&this.C(t)}C(t){t===Nn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class Fn extends Mn{constructor(){super(...arguments),this.type=3}C(t){this.element[this.name]=t===Nn?void 0:t}}const Un=pn?pn.emptyScript:"";class $n extends Mn{constructor(){super(...arguments),this.type=4}C(t){t&&t!==Nn?this.element.setAttribute(this.name,Un):this.element.removeAttribute(this.name)}}class Bn extends Mn{constructor(t,e,o,i,n){super(t,e,o,i,n),this.type=5}_$AI(t,e=this){var o;if((t=null!==(o=Dn(this,t,e,0))&&void 0!==o?o:Nn)===kn)return;const i=this._$AH,n=t===Nn&&i!==Nn||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,r=t!==Nn&&(i===Nn||n);n&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,o;"function"==typeof this._$AH?this._$AH.call(null!==(o=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==o?o:this.element,t):this._$AH.handleEvent(t)}}class zn{constructor(t,e,o){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=o}get _$AU(){return this._$AM._$AU}_$AI(t){Dn(this,t)}}const Vn=window.litHtmlPolyfillSupport;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var Hn,Kn;null==Vn||Vn(Rn,jn),(null!==(dn=globalThis.litHtmlVersions)&&void 0!==dn?dn:globalThis.litHtmlVersions=[]).push("2.2.1");class Gn extends cn{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var t,e;const o=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=o.firstChild),o}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Dt=((t,e,o)=>{var i,n;const r=null!==(i=null==o?void 0:o.renderBefore)&&void 0!==i?i:e;let s=r._$litPart$;if(void 0===s){const t=null!==(n=null==o?void 0:o.renderBefore)&&void 0!==n?n:null;r._$litPart$=s=new jn(e.insertBefore(bn(),t),t,void 0,null!=o?o:{})}return s._$AI(t),s})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!1)}render(){return kn}}Gn.finalized=!0,Gn._$litElement$=!0,null===(Hn=globalThis.litElementHydrateSupport)||void 0===Hn||Hn.call(globalThis,{LitElement:Gn});const Qn=globalThis.litElementPolyfillSupport;null==Qn||Qn({LitElement:Gn}),(null!==(Kn=globalThis.litElementVersions)&&void 0!==Kn?Kn:globalThis.litElementVersions=[]).push("3.2.0");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const Wn=t=>e=>"function"==typeof e?((t,e)=>(window.customElements.define(t,e),e))(t,e):((t,e)=>{const{kind:o,elements:i}=e;return{kind:o,elements:i,finisher(e){window.customElements.define(t,e)}}})(t,e)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,Zn=(t,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(o){o.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(o){o.createProperty(e.key,t)}};function Xn(t){return(e,o)=>void 0!==o?((t,e,o)=>{e.constructor.createProperty(o,t)})(t,e,o):Zn(t,e)
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}var Yn;null===(Yn=window.HTMLSlotElement)||void 0===Yn||Yn.prototype.assignedElements;
/**
@license
Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const Jn=t=>e=>class extends e{connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._storeUnsubscribe=t.subscribe((()=>this.stateChanged(t.getState()))),this.stateChanged(t.getState())}disconnectedCallback(){this._storeUnsubscribe(),super.disconnectedCallback&&super.disconnectedCallback()}stateChanged(t){}};var tr=function(t){var e,o=t.Symbol;return"function"==typeof o?o.observable?e=o.observable:(e=o("observable"),o.observable=e):e="@@observable",e}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()),er=function(){return Math.random().toString(36).substring(7).split("").join(".")},or={INIT:"@@redux/INIT"+er(),REPLACE:"@@redux/REPLACE"+er(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+er()}};function ir(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function nr(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t);try{throw new Error(t)}catch(t){}}function rr(t,e){var o=e&&e.type;return"Given "+(o&&'action "'+String(o)+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function sr(){}"production"!==process.env.NODE_ENV&&"string"==typeof sr.name&&"isCrushed"!==sr.name&&nr('You are currently using minified code outside of NODE_ENV === "production". This means that you are running a slower development build of Redux. You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) to ensure you have the correct code for your production build.');const ar={agrupadorGenerico:{tipo:"DispositivoAgrupadorGenerico",name:void 0,tagId:"dg",descricao:void 0,descricaoPlural:void 0,tiposPermitidosPai:["Articulacao","Parte","Livro","Titulo","Capitulo","Secao"],tiposPermitidosFilhos:["Parte","Livro","Titulo","Capitulo","Secao","Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:[""],INDICADOR_DESDOBRAMENTO:["NA"]},alinea:{tipo:"Alinea",name:"Alinea",tagId:"ali",descricao:"Alínea",descricaoPlural:"Alíneas",tiposPermitidosPai:["Inciso"],tiposPermitidosFilhos:["Item"],tipoProvavelFilho:"Item",INDICADOR_SEQUENCIA:[";","; e","; ou"],INDICADOR_FIM_SEQUENCIA:["."],INDICADOR_DESDOBRAMENTO:[":"]},articulacao:{tipo:"Articulacao",name:"Articulacao",tagId:"",descricao:"Articulação",descricaoPlural:"Articulações",tiposPermitidosPai:[],tiposPermitidosFilhos:["Parte","Livro","Titulo","Capitulo","Secao","Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["."],INDICADOR_FIM_SEQUENCIA:["NA"],INDICADOR_DESDOBRAMENTO:[":"]},artigo:{tipo:"Artigo",name:"Artigo",tagId:"art",descricao:"Artigo",descricaoPlural:"Artigos",tiposPermitidosPai:["Articulacao","Parte","Livro","Titulo","Capitulo","Secao","Subsecao"],tiposPermitidosFilhos:["Paragrafo","Inciso"],tipoProvavelFilho:"Inciso",INDICADOR_SEQUENCIA:["."],INDICADOR_FIM_SEQUENCIA:["NA"],INDICADOR_DESDOBRAMENTO:[":"]},capitulo:{tipo:"Capitulo",name:"Capitulo",tagId:"cap",descricao:"Capítulo",descricaoPlural:"Capítulos",tiposPermitidosPai:["Articulacao","Parte","Livro","Titulo"],tiposPermitidosFilhos:["Secao","Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:[""],INDICADOR_DESDOBRAMENTO:["NA"]},caput:{tipo:"Caput",name:"Caput",tagId:"cpt",descricao:"Caput",descricaoPlural:"Capita",tiposPermitidosPai:["Artigo"],tiposPermitidosFilhos:["Inciso"],tipoProvavelFilho:"Inciso",INDICADOR_SEQUENCIA:["."],INDICADOR_FIM_SEQUENCIA:["NA"],INDICADOR_DESDOBRAMENTO:[":"]},generico:{tipo:"DispositivoGenerico",name:void 0,tagId:"gen",descricao:"Dispositivo genérico",descricaoPlural:"Dispositivos genéricos",tiposPermitidosPai:["Articulacao","Parte","Livro","Titulo","Capitulo","Secao","Subsecao"],tiposPermitidosFilhos:["Paragrafo","Inciso","Alinea","Item"],tipoProvavelFilho:"DispositivoGenerico",INDICADOR_SEQUENCIA:[";","; e","; ou"],INDICADOR_FIM_SEQUENCIA:["."],INDICADOR_DESDOBRAMENTO:[":"]},inciso:{tipo:"Inciso",name:"Inciso",tagId:"inc",descricao:"Inciso",descricaoPlural:"Incisos",tiposPermitidosPai:["Artigo","Caput","Paragrafo"],tiposPermitidosFilhos:["Alinea"],tipoProvavelFilho:"Alinea",INDICADOR_SEQUENCIA:[";","; e","; ou"],INDICADOR_FIM_SEQUENCIA:["."],INDICADOR_DESDOBRAMENTO:[":"]},item:{tipo:"Item",name:"Item",tagId:"ite",descricao:"Item",descricaoPlural:"Itens",tiposPermitidosPai:["Alinea"],tiposPermitidosFilhos:[],tipoProvavelFilho:"DispositivoGenerico",INDICADOR_SEQUENCIA:[";","; e","; ou"],INDICADOR_FIM_SEQUENCIA:["."],INDICADOR_DESDOBRAMENTO:[":"]},livro:{tipo:"Livro",name:"Livro",tagId:"liv",descricao:"Livro",descricaoPlural:"Livros",tiposPermitidosPai:["Articulacao","Parte"],tiposPermitidosFilhos:["Titulo","Capitulo","Secao","Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:[""],INDICADOR_DESDOBRAMENTO:["NA"]},omissis:{tipo:"Omissis",name:"Omissis",tagId:"omi",descricao:"Omissis",descricaoPlural:"Linhas pontilhadas (omissis)",tiposPermitidosPai:["Articulacao","Parte","Livro","Titulo","Capitulo","Secao","Subsecao","Artigo","Caput","Paragrafo","Alinea","Inciso"],tiposPermitidosFilhos:["Parte","Livro","Titulo","Capitulo","Secao","Subsecao","Artigo","Paragrafo","Alinea","Inciso","Item"],tipoProvavelFilho:void 0,INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:["NA"],INDICADOR_DESDOBRAMENTO:["NA"]},paragrafo:{tipo:"Paragrafo",name:"Paragrafo",tagId:"par",descricao:"Parágrafo",descricaoPlural:"Parágrafos",tiposPermitidosPai:["Artigo"],tiposPermitidosFilhos:["Inciso"],tipoProvavelFilho:"Inciso",INDICADOR_SEQUENCIA:["."],INDICADOR_FIM_SEQUENCIA:["NA"],INDICADOR_DESDOBRAMENTO:[":"]},parte:{tipo:"Parte",name:"Parte",tagId:"prt",descricao:"Parte",descricaoPlural:"Partes",tiposPermitidosPai:["Articulacao"],tiposPermitidosFilhos:["Livro","Titulo","Capitulo","Secao","Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:[""],INDICADOR_DESDOBRAMENTO:["NA"]},secao:{tipo:"Secao",name:"Secao",tagId:"sec",descricao:"Seção",descricaoPlural:"Seções",tiposPermitidosPai:["Articulacao","Parte","Livro","Titulo","Capitulo"],tiposPermitidosFilhos:["Subsecao","Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:[""],INDICADOR_DESDOBRAMENTO:["NA"]},subsecao:{tipo:"Subsecao",name:"Subsecao",tagId:"sub",descricao:"Subseção",descricaoPlural:"Subseções",tiposPermitidosPai:["Secao"],tiposPermitidosFilhos:["Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:[""],INDICADOR_DESDOBRAMENTO:["NA"]},titulo:{tipo:"Titulo",name:"Titulo",tagId:"tit",descricao:"Título",descricaoPlural:"Títulos",tiposPermitidosPai:["Articulacao","Parte","Livro"],tiposPermitidosFilhos:["Capitulo","Secao","Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:[""],INDICADOR_DESDOBRAMENTO:["NA"]}};class lr{constructor(t){var e;this.isDispositivoAlteracao=!1,this.descricao=`Adicionar ${null!==(e=null==t?void 0:t.descricao)&&void 0!==e?e:""}`,this.tipo=null==t?void 0:t.tipo}execute(t,e,o,i=!1){return{type:"ADICIONAR_ELEMENTO",atual:t,novo:{tipo:o,isDispositivoAlteracao:this.isDispositivoAlteracao,conteudo:{texto:e}},hasDesmembramento:i}}}const ur=new lr,cr=new lr(ar.artigo),dr=new lr(ar.alinea),pr=new lr(ar.inciso),hr=new lr(ar.item),fr=new lr(ar.omissis),mr=new lr(ar.paragrafo);class vr{constructor(t){this.descricao="Adicionar "+t.descricao,this.tipo=t.tipo}execute(t){return{type:"AGRUPAR_ELEMENTO",atual:t,novo:{tipo:this.tipo}}}}const gr=new vr(ar.parte),br=new vr(ar.livro),yr=new vr(ar.titulo),xr=new vr(ar.capitulo),wr=new vr(ar.secao),Er=new vr(ar.subsecao);const Or=new class{constructor(){this.descricao="Atualizar dispositivo"}execute(t){return{type:"APLICAR_ALTERACOES_EMENDA",alteracoesEmenda:t}}};const Ar=new class{constructor(){this.descricao="Atualizar dispositivo"}execute(t){return this.tipo=t.tipo,{type:"ATUALIZAR_ELEMENTO",atual:t}}};const _r=new class{constructor(){this.descricao="Atualizar Norma Referenciada"}execute(t){return this.tipo=t.tipo,{type:"ATUALIZAR_REFERENCIA_ELEMENTO",atual:t}}};const qr=new class{constructor(){this.descricao="Atualizar dispositivo"}execute(t){return this.tipo=t.tipo,{type:"ATUALIZAR_TEXTO_ELEMENTO",atual:t}}};const Ir=new class{constructor(){this.descricao="Elemento selecionado"}execute(t){return{type:"ELEMENTO_SELECIONADO",atual:t}}};const Sr=new class{constructor(){this.descricao="Informar norma alterada"}execute(t){return{type:"INFORMAR_NORMA",atual:t}}};class kr{constructor(){this.descricao="Mover para baixo"}execute(t){return{type:"Mover para baixo",atual:t}}}const Nr=new kr;class Pr{constructor(){this.descricao="Mover para cima"}execute(t){return{type:"Mover para cima",atual:t}}}const Tr=new Pr;class Cr{constructor(){this.descricao="Remover dispositivo"}execute(t){return{type:"REMOVER_ELEMENTO",atual:t}}}const Rr=new Cr;class Dr{constructor(){this.descricao="Numerar e criar rótulo para o dispositivo "}execute(t,e){return this.tipo=t.tipo,{type:"RENUMERAR_ELEMENTO",atual:t,novo:{numero:e}}}}const Lr=new Dr;const jr=new class{constructor(){this.descricao="Abandonar modificações do dispositivo"}execute(t){return{type:"RESTAURAR_ELEMENTO",atual:t}}};const Mr=new class{constructor(){this.descricao="Suprimir dispositivo"}execute(t){return{type:"SUPRIMIR_ELEMENTO",atual:t}}};class Fr{constructor(t,e,o){this.descricao=e,this.tipo=t.tipo,this.nomeAcao=o}execute(t){return{type:"TRANSFORMAR_TIPO_ELEMENTO",subType:this.nomeAcao,atual:t,novo:{tipo:this.tipo}}}}const Ur=new Fr(ar.omissis,"Transformar em Omissis de Alínea","transformarAlineaEmOmissisAlinea"),$r=new Fr(ar.omissis,"Transformar em Omissis de Inciso de Caput","transformarIncisoCaputEmOmissisIncisoCaput"),Br=new Fr(ar.omissis,"Transformar em Omissis de Item","transformarItemEmOmissisItem"),zr=new Fr(ar.omissis,"Transformar em Omissis de Parágrafo","transformarParagrafoEmOmissisParagrafo"),Vr=new Fr(ar.omissis,"Transformar em Omissis de Inciso de Parágrafo","transformarIncisoParagrafoEmOmissisIncisoParagrafo"),Hr=new Fr(ar.inciso,"Transformar Alínea em Inciso","transformarAlineaEmIncisoCaput"),Kr=new Fr(ar.inciso,"Transformar Alínea em Inciso","transformarAlineaEmIncisoParagrafo"),Gr=new Fr(ar.item,"Transformar Alínea em Item","transformarAlineaEmItem"),Qr=new Fr(ar.paragrafo,"Transformar Artigo em Parágrafo","transformarArtigoEmParagrafo"),Wr=new Fr(ar.inciso,"Transformar em Inciso","transformarDispositivoGenericoEmInciso"),Zr=new Fr(ar.alinea,"Transformar em Alínea","transformarDispositivoGenericoEmAlinea"),Xr=new Fr(ar.item,"Transformar em Item","transformarDispositivoGenericoEmItem"),Yr=new Fr(ar.paragrafo,"Transformar Inciso em Parágrafo","transformarIncisoParagrafoEmParagrafo"),Jr=new Fr(ar.paragrafo,"Transformar Inciso Caput em Parágrafo","transformarIncisoCaputEmParagrafo"),ts=new Fr(ar.alinea,"Transformar Inciso de Caput em Alínea","transformarIncisoCaputEmAlinea"),es=new Fr(ar.alinea,"Transformar Inciso de Caput em Alínea","transformarIncisoParagrafoEmAlinea"),os=new Fr(ar.alinea,"Transformar Omissis em Alínea","transformarOmissisEmAlinea"),is=new Fr(ar.artigo,"Transformar Omissis em Artigo","transformarOmissisEmArtigo"),ns=new Fr(ar.inciso,"Transformar Omissis em Inciso de Caput","transformarOmissisEmIncisoCaput"),rs=new Fr(ar.inciso,"Transformar Omissis em Inciso de Parágrafo","transformarOmissisEmIncisoParagrafo"),ss=new Fr(ar.item,"Transformar Omissis em Item","transformarOmissisEmItem"),as=new Fr(ar.paragrafo,"Transformar Omissis em Parágrafo","transformarOmissisEmParagrafo"),ls=new Fr(ar.alinea,"Transformar Item em Alínea","transformarItemEmAlinea"),us=new Fr(ar.artigo,"Transformar Parágrafo em Artigo","transformarParagrafoEmArtigo"),cs=new Fr(ar.inciso,"Transformar Parágrafo em Inciso de Parágrafo","transformarParagrafoEmIncisoParagrafo"),ds=new Fr(ar.inciso,"Transformar Parágrafo em Inciso de Caput","transformarParagrafoEmIncisoCaput");const ps=new class{constructor(){this.descricao="Articulação validada"}execute(){return{type:"VALIDAR_ARTICULACAO"}}};const hs=new class{constructor(){this.descricao="Elemento validado"}execute(t){return{type:"VALIDAR_ELEMENTO",atual:t}}},fs=t=>t.tipo===ar.articulacao.tipo,ms=t=>t.tipo===ar.generico.tipo,vs=t=>t.tipo===ar.artigo.tipo,gs=t=>t.tipo===ar.caput.tipo,bs=t=>t.tipo===ar.paragrafo.tipo,ys=t=>t.tipo===ar.inciso.tipo,xs=t=>ys(t)&&gs(t.pai),ws=t=>ys(t)&&bs(t.pai),Es=t=>t.tipo===ar.alinea.tipo,Os=t=>t.tipo===ar.item.tipo,As=t=>t.tipo===ar.omissis.tipo,_s=t=>[ar.articulacao.tipo,ar.agrupadorGenerico.tipo,ar.capitulo.tipo,ar.livro.tipo,ar.parte.tipo,ar.secao.tipo,ar.subsecao.tipo,ar.titulo.tipo].includes(t.tipo),qs=t=>_s(t)&&!fs(t),Is=t=>t.tipo===ar.agrupadorGenerico.tipo,Ss=t=>[ar.paragrafo.tipo,ar.inciso.tipo,ar.alinea.tipo,ar.item.tipo].includes(t.tipo);function ks(t,e){return!0===e.map((e=>new RegExp(Ts(Ps(e))+"\\s*$").test(t))).filter((t=>t))[0]}function Ns(t){switch(t[0].trim()){case".":return"ponto";case":":return"dois pontos";case";":return"ponto e vírgula";case",":return"vírgula";default:return t[0].trim()}}function Ps(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ts(t){return t.replace(/\s+/g,"\\s+")}function Cs(t){return t.replace(/\s{2,}/g," ")}class Rs{constructor(t){this.strs=new Array,t&&this.append(t)}append(t){t&&this.strs.push(t)}toString(){return function(t){let e="";return t.forEach((t=>{e+=t})),e}(this.strs)}}var Ds;!function(t){t.DISPOSITIVO_ADICIONADO="Dispositivo Adicionado",t.DISPOSITIVO_NOVO="Dispositivo Novo",t.DISPOSITIVO_MODIFICADO="Dispositivo Modificado",t.DISPOSITIVO_ORIGINAL="Dispositivo Original",t.DISPOSITIVO_SUPRIMIDO="Dispositivo Suprimido"}(Ds||(Ds={}));const Ls=t=>[Ds.DISPOSITIVO_ADICIONADO.toString(),Ds.DISPOSITIVO_MODIFICADO.toString(),Ds.DISPOSITIVO_SUPRIMIDO.toString()].includes(t.situacao.descricaoSituacao),js=t=>!!Ls(t)||void 0!==t.pai&&js(t.pai);function Ms(t){if(!t)return t;if(fs(t))return t;if(void 0===t.pai)throw new Error("Não foi encontrada a articulação");return Ms(t.pai)}function Fs(t,e){if(e.uuid===t)return e;if(null!==e.filhos){let o=null;const i=e.hasAlteracao()?e.alteracoes.filhos:e.filhos;for(let e=0;null===o&&e<i.length;e++)o=Fs(t,i[e]);return o}return null}const Us=(t,e)=>{if(void 0===e)throw new Error("uuid não foi informado");return Fs(e,t)},$s=t=>{var e;return ea(t)?$s(t.filhos[t.filhos.length-1]):(null==t?void 0:t.hasAlteracao())&&(null===(e=t.alteracoes)||void 0===e?void 0:e.filhos.length)?$s(t.alteracoes.filhos[t.alteracoes.filhos.length-1]):t},Bs=t=>vs(t)?Ms(t).artigos.filter((e=>e.tipo===t.tipo)):t.pai?t.pai.filhos.filter((e=>e.tipo===t.tipo)):[t],zs=(t,e,o)=>{if(null==t?void 0:t.filhos){for(let i=null==t?void 0:t.indexOf(e);i>=0;i--){const e=null==t?void 0:t.filhos[i];_s(e)&&o.push(e)}if(null==t?void 0:t.pai)return zs(t.pai,e.pai,o)}return o},Vs=(t,e)=>{if(t&&t.pai)return t.pai&&t.pai.tipo===e?t.pai:Vs(t.pai,e)},Hs=t=>vs(t.pai)?t.pai:Hs(t.pai),Ks=t=>{const e=t.pai;return vs(e)&&!ga(e)?t.pai:Ks(t.pai)},Gs=(t,e)=>{if(null==t?void 0:t.filhos){for(let o=(null==t?void 0:t.indexOf(e))-1;o>=0;o--){const e=null==t?void 0:t.filhos[o];if(vs(e))return e;if(_s(e))return Qs(e)}if(null==t?void 0:t.pai)return Gs(t.pai,e.pai)}},Qs=t=>{if(void 0!==t&&t.filhos)for(let e=t.filhos.length-1;e>=0;e--){const o=t.filhos[e];if(vs(o))return o;if(_s(o))return Qs(o)}},Ws=t=>{const e=t.pai.indexOf(t);return t.pai.filhos.filter(((t,o)=>o>e&&_s(t)))[0]},Zs=t=>{var e;return(null===(e=t.filhos)||void 0===e?void 0:e.filter((t=>ms(t))).length)>0},Xs=t=>1===Bs(t).length,Ys=t=>{const e=Bs(t);return e[e.length-1]===t},Js=t=>{const e=Bs(t);return e.length>1&&e[e.length-2]===t},ta=t=>Bs(t)[0]===t,ea=t=>t.filhos&&t.filhos.length>0,oa=t=>{const e=t.pai.indexOf(t);return e>0?t.pai.filhos[e-1]:void 0},ia=t=>{const e=Bs(t),o=e.indexOf(t);return o>0?e[o-1]:void 0},na=t=>{const e=t.pai.indexOf(t);if(0===e)return;return t.pai.filhos.filter(((o,i)=>i<e&&(o.tipo===t.tipo||o.tipo===fr.tipo))).pop()},ra=t=>{const e=t.pai.indexOf(t);return e<t.pai.filhos.length-1?t.pai.filhos[e+1]:void 0},sa=t=>{var e,o,i;const n=null===(e=t.pai)||void 0===e?void 0:e.indexOf(t);return null!==(i=null===(o=t.pai)||void 0===o?void 0:o.filhos.filter(((e,o)=>o<n&&e.tipo===t.tipo&&e.pai===t.pai)))&&void 0!==i?i:[]},aa=t=>{var e,o,i;const n=null===(e=t.pai)||void 0===e?void 0:e.indexOf(t);return null!==(i=null===(o=t.pai)||void 0===o?void 0:o.filhos.filter(((e,o)=>o>n&&e.tipo===t.tipo)))&&void 0!==i?i:[]},la=t=>{const e=t.pai.indexOf(t);if(e===t.pai.filhos.length-1)return;return t.pai.filhos.filter(((o,i)=>i>e&&(o.tipo===t.tipo||o.tipo===fr.tipo)))[0]},ua=(t,e=!1)=>{if(vs(t)){const e=Ms(t),o=Ms(t).indexOfArtigo(t);return e.artigos.filter(((t,e)=>e>o))}const o=t.pai.indexOf(t);return t.pai.filhos.filter(((t,i)=>e?i>o:i>=o)).filter((e=>t.tipo===e.tipo))},ca=t=>vs(t)&&Xs(t),da=t=>bs(t)&&Xs(t),pa=t=>t.cabecaAlteracao||ha(t)?t:pa(t.pai),ha=t=>ga(t)&&fs(t.pai)&&void 0!==t.pai.pai,fa=t=>{const e=pa(t),o=xa(e);return o.length>0&&o[o.length-1]===t},ma=t=>{const e=Ms(t).pai;if(!e)return!1;const o=Ms(e);return Xs(e)||o.indexOfArtigo(e)<o.artigos.length-1},va=t=>fs(t)&&void 0!==t.pai,ga=t=>{if(!!t.isDispositivoAlteracao)return!0;try{return void 0!==Ms(t).pai}catch(t){return!1}},ba=t=>t.situacao.descricaoSituacao===Ds.DISPOSITIVO_ORIGINAL,ya=t=>t.situacao.descricaoSituacao===Ds.DISPOSITIVO_MODIFICADO||t.situacao.descricaoSituacao===Ds.DISPOSITIVO_SUPRIMIDO,xa=t=>wa(t,[]),wa=(t,e)=>{e.push(t);const o=t.hasAlteracao()?t.alteracoes.filhos:t.filhos;return o.length&&o.forEach((t=>wa(t,e))),e},Ea=(t,e)=>{if(t)if(e(t),t.tipo===ar.artigo.tipo){const o=t;o.caput&&(Ea(o.caput,e),t.alteracoes&&Ea(t.alteracoes,e),t.filhos.filter((t=>bs(t))).forEach((t=>{Ea(t,e)})))}else t.alteracoes&&Ea(t.alteracoes,e),t.filhos.forEach((t=>{Ea(t,e)}))},Oa=(t,e)=>{if(!t)return;let o=e(t);if(o)return o;if(t.tipo===ar.artigo.tipo){const i=t;if(i.caput){if(o=Oa(i.caput,e),o)return o;if(t.alteracoes&&(o=Oa(t.alteracoes,e),o))return o;for(const i of t.filhos.filter((t=>bs(t))))if(o=Oa(i,e),o)return o}}else{if(t.alteracoes&&(o=Oa(t.alteracoes,e),o))return o;for(const i of t.filhos)if(o=Oa(i,e),o)return o}},Aa=t=>t&&!t.pai&&t.tipo===ar.articulacao.tipo,_a=(t,e)=>{const o=qa(e);let i=t;if(o){const n=t.artigos.find((t=>o===t.id));if(n){if(e===o||e===o+"_cpt")return n;i=n}}return Oa(i,(t=>e===t.id?t:void 0))},qa=t=>{const e=/^art\d+(-\d+)*/.exec(t);return(null==e?void 0:e.length)?e[0]:void 0},Ia=t=>{if(!t)return!1;let e=t.pai;for(;e;){if(e.situacao.descricaoSituacao===Ds.DISPOSITIVO_SUPRIMIDO)return!0;e=e.pai}return!1};var Sa;!function(t){t[t.INFO=0]="INFO",t[t.WARNING=1]="WARNING",t[t.ERROR=2]="ERROR"}(Sa||(Sa={}));const ka="...........................................................................................",Na=t=>{var e;const o=vs(t)?t.caput:t;return ks(o.texto,null!==(e=o.INDICADOR_DESDOBRAMENTO)&&void 0!==e?e:[])},Pa=t=>{var e;const o=vs(t)?t.caput:t;return ks(o.texto,null!==(e=o.INDICADOR_FIM_SEQUENCIA)&&void 0!==e?e:[])},Ta=t=>{var e;const o=vs(t)?t.caput:t;return ks(o.texto,null!==(e=o.INDICADOR_SEQUENCIA)&&void 0!==e?e:[])},Ca=ka+".” (NR)",Ra=t=>new RegExp(Ts(Ps("o seguinte acréscimo:"))+"\\s*$").test(t)||new RegExp(Ts(Ps("os seguintes acréscimos:"))+"\\s*$").test(t)||new RegExp(Ts(Ps("passa a vigorar com a seguinte alteração:"))+"\\s*$").test(t)||new RegExp(Ts(Ps("passa a vigorar com as seguintes alterações:"))+"\\s*$").test(t),Da=t=>/^[.]*(?:\s*)["”“]?(\s*)?\(NR\)\s*$/.test(t)?Ca:/["”]?(\s*)?\(NR\)?\s*$/.test(t)?t.replace(/["“](?!.*["”])/,"”"):t!==ka&&t!==Ca&&new RegExp("^[.]+$").test(t)?ka:t,La=t=>/\.["”](?:\s*\(NR\))\s*$/.test(t),ja=t=>void 0!==t&&/.*:[\s]{1,2}["”“].*[.]["”“]$/.test(t),Ma=t=>{var e;const o=[];return(fs(t)||t.texto)&&0!==t.texto.trim().length||o.push({tipo:Sa.ERROR,descricao:"Não foi informado um texto para "+(t.artigoDefinido+" "+t.descricao)}),fs(t)||!t.texto||function(t){const e=document.createElement("div");return e.innerHTML=t,e.innerHTML===t}(t.texto)||o.push({tipo:Sa.ERROR,descricao:"O conteúdo do dispositivo não é um HTML válido"}),!fs(t)&&t.texto&&t.texto.trim().length>300&&o.push({tipo:Sa.WARNING,descricao:"Pelo princípio da concisão, o texto dos dispositivos não deve ser extenso, devendo ser utilizadas frases curtas e concisas"}),Ss(t)&&!bs(t)&&t.texto&&/^[A-ZÀ-Ú]/.test(t.texto)&&o.push({tipo:Sa.WARNING,descricao:`${t.descricao} deveria iniciar com letra minúscula, a não ser que se trate de uma situação especial, como nome próprio`}),!Ss(t)||bs(t)||As(t)||!t.texto||Xs(t)||Ys(t)||Js(t)||ea(t)||void 0===t.INDICADOR_SEQUENCIA||function(t){const e=t.replace(/(<([^>]+)>)/gi,"").trim();return e.length>0?e.charAt(e.length-1):""}(t.texto)===t.INDICADOR_SEQUENCIA[0]||o.push({tipo:Sa.ERROR,descricao:`${t.descricao} deveria terminar com ${Ns(t.INDICADOR_SEQUENCIA)}. ${Ta(t)?"A variação informada só é permitida para o penúltimo elemento":""}`}),!vs(t)&&!bs(t)||!t.texto||/^[...]{3,}/.test(t.texto)||/^[A-ZÀ-Ú]/.test(t.texto)||o.push({tipo:Sa.ERROR,descricao:`${t.descricao} deveria iniciar com letra maiúscula`}),ga(t)||_s(t)||As(t)||!t.texto||!(!vs(t)&&ea(t)||vs(t)&&ea(t.caput))||Na(t)||o.push({tipo:Sa.ERROR,descricao:`${t.descricao} deveria terminar com ${Ns(t.INDICADOR_DESDOBRAMENTO)}`}),ga(t)||!Ss(t)||bs(t)||!t.texto||!Xs(t)&&!Ys(t)||Zs(t.pai)||ea(t)||Pa(t)||o.push({tipo:Sa.ERROR,descricao:`Último dispositivo de uma sequência deveria terminar com ${Ns(t.INDICADOR_FIM_SEQUENCIA)}`}),ga(t)||!Ss(t)||bs(t)||!t.texto||Xs(t)||!Js(t)||ea(t)||Ta(t)||o.push({tipo:Sa.ERROR,descricao:`${t.descricao} deveria terminar com uma das seguintes possibilidades: ${t.INDICADOR_SEQUENCIA.join("     ")}`}),ga(t)||!vs(t)&&!bs(t)||!t.texto||ea(t)||t.hasAlteracao()||Xs(t)||Ta(t)||ja(t.texto)||o.push({tipo:Sa.ERROR,descricao:`${t.descricao} deveria terminar com ${Ns(t.INDICADOR_SEQUENCIA)}`}),!ga(t)&&vs(t)&&t.texto&&t.hasAlteracao()&&!Na(t)&&!Ra(t.texto)&&o.push({tipo:Sa.ERROR,descricao:`${t.descricao} deveria terminar com ${Ns(t.INDICADOR_DESDOBRAMENTO)}`}),ga(t)||!vs(t)||!t.texto||t.hasAlteracao()||ea(t)&&ea(t.caput)||!Na(t)||o.push({tipo:Sa.ERROR,descricao:`${t.descricao} deveria terminar com ${Ns(t.INDICADOR_SEQUENCIA)}`}),!ga(t)&&vs(t)&&t.hasAlteracao()&&!(null===(e=t.alteracoes)||void 0===e?void 0:e.base)&&o.push({tipo:Sa.ERROR,descricao:"É necessário informar a norma a ser alterada"}),ga(t)&&!_s(t)&&t.texto!==ka&&t.texto&&(!vs(t)&&ea(t)||vs(t)&&ea(t.caput))&&!Na(t)&&o.push({tipo:Sa.ERROR,descricao:`${t.descricao} deveria terminar com ${Ns(t.INDICADOR_DESDOBRAMENTO)}`}),!(ga(t)&&bs(t)&&t.texto)||ea(t)||Xs(t)||Ys(t)||Ta(t)||o.push({tipo:Sa.ERROR,descricao:`${t.descricao} deveria terminar com ${Ns(t.INDICADOR_SEQUENCIA)}`}),!ga(t)||!fa(t)||t.texto&&La(t.texto)||o.push({tipo:Sa.ERROR,descricao:"O último dispositivo do bloco de alteração deve terminar com: <b>.&#8221; (NR)</b>"}),ga(t)&&t.texto&&!fa(t)&&/.*["”“]$/.test(t.texto)&&!ja(t.texto)&&!/”.*(NR)/.test(t.texto)&&o.push({tipo:Sa.ERROR,descricao:"Somente o último dispositivo do bloco de alteração poderia ser finalizado com aspas"}),ga(t)&&t.texto&&!fa(t)&&/”.*(NR)/.test(t.texto)&&o.push({tipo:Sa.ERROR,descricao:"Somente o último dispositivo do bloco de alteração poderia terminar com &#8221; (NR)"}),ga(t)&&t.texto&&t===pa(t)&&0===t.filhos.length&&(t.texto===Ca||t.texto===ka)&&o.push({tipo:Sa.ERROR,descricao:"Não foi informada nenhuma alteração"}),!(ga(t)&&t.texto&&Ss(t))||bs(t)||As(t)||0!==t.pai.filhos.filter((t=>As(t))).length||!Xs(t)||Zs(t.pai)||ea(t)||Pa(t)||fa(t)||o.push({tipo:Sa.ERROR,descricao:`Último dispositivo de uma sequência deveria terminar com ${Ns(t.INDICADOR_FIM_SEQUENCIA)}`}),o},Fa=t=>_s(t)?(t=>{const e=[];var o,i;return fs(t)||t.texto&&0!==t.texto.trim().length||e.push({tipo:Sa.ERROR,descricao:`Não foi informado um texto para ${t.artigoDefinido} ${t.descricao}`}),!fs(t)&&t.texto&&(o=t.texto,/[.,:]\s*$/.test(o))&&e.push({tipo:Sa.ERROR,descricao:`Não pode haver sinal de pontuação ao final do texto d${t.artigoDefinido} ${t.descricao}`}),!fs(t)&&(i=t.texto,/<.+>/g.test(null==i?void 0:i.trim()))&&e.push({tipo:Sa.ERROR,descricao:`Texto d${t.artigoDefinido} ${t.descricao} não pode possuir formatação`}),e})(t):Ma(t);var Ua;function $a(t){return class extends t{constructor(){super(...arguments),this.tipoGenero="feminino",this.artigoDefinido="a",this.pronomePossessivoSingular=" da ",this.pronomePossessivoPlural=" das ",this.artigoDefinidoSingular=" a ",this.artigoDefinidoPlural=" as ",this.artigoIndefinidoSingular=" uma ",this.artigoDefinidoPrecedidoPreposicaoASingular=" à ",this.artigoDefinidoPrecedidoPreposicaoAPlural=" às ",this.contracaoEmArtigoDefinidoSingular=" na "}}}function Ba(t){return class extends t{constructor(){super(...arguments),this.tipoGenero="indefinido",this.artigoDefinido="",this.pronomePossessivoSingular="",this.pronomePossessivoPlural="",this.artigoDefinidoSingular="",this.artigoDefinidoPlural="",this.artigoIndefinidoSingular="",this.artigoDefinidoPrecedidoPreposicaoASingular="",this.artigoDefinidoPrecedidoPreposicaoAPlural="",this.contracaoEmArtigoDefinidoSingular=""}}}function za(t){return class extends t{constructor(){super(...arguments),this.tipoGenero="masculino",this.artigoDefinido="o",this.pronomePossessivoSingular=" do ",this.pronomePossessivoPlural=" dos ",this.artigoDefinidoSingular=" o ",this.artigoDefinidoPlural=" os ",this.artigoIndefinidoSingular=" um ",this.artigoDefinidoPrecedidoPreposicaoASingular=" ao ",this.artigoDefinidoPrecedidoPreposicaoAPlural=" aos ",this.contracaoEmArtigoDefinidoSingular=" no "}}}!function(t){t.MASCULINO="masculino",t.FEMININO="feminino",t.INDEFINIDO="indefinido"}(Ua||(Ua={}));const Va=new($a(Object)),Ha=new(za(Object)),Ka=new(Ba(Object)),Ga=t=>"F"===t?Va:"M"===t?Ha:Ka;class Qa{constructor(t,e){this.nome=t,this.genero="string"==typeof e?Ga(e):e}}const Wa={autoridades:[{urn:"federal",descricao:"Federal"},{urn:"senado.federal",descricao:"Senado Federal"},{urn:"congresso.nacional",descricao:"Congresso Nacional"}],tiposDocumento:[{urn:"lei",descricao:"Lei",genero:"F"},{urn:"lei.complementar",descricao:"Lei Complementar",genero:"F"},{urn:"lei.delegada",descricao:"Lei Delegada",genero:"F"},{urn:"decreto.legislativo",descricao:"Decreto Legislativo",genero:"M"},{urn:"decreto.lei",descricao:"Decreto-Lei",genero:"M"},{urn:"decreto",descricao:"Decreto",genero:"M"},{urn:"consolidacao.leis.trabalho",descricao:"Consolidação das Leis do Trabalho",genero:"F"},{urn:"resolucao",descricao:"Resolução",genero:"F"},{urn:"regimento.interno",descricao:"Regimento Interno",genero:"M"},{urn:"constituicao",descricao:"Constituição",genero:"F"},{urn:"ato.disposicoes.constitucionais.transitorias",descricao:"Ato das Disposições Constitucionais Transitórias",genero:"M"},{urn:"medida.provisoria",descricao:"Medida Provisória",genero:"F"},{urn:"medida.provisoria;mpv",descricao:"Medida Provisória",genero:"F"},{urn:"emenda.constitucional",descricao:"Emenda Constitucional",genero:"F"},{urn:"emenda.constitucional.revisao",descricao:"Emenda Constitucional de Revisão",genero:"F"},{urn:"proposta.emenda.constitucional;pec",descricao:"Proposta de Emenda Constitucional",genero:"F"},{urn:"projeto.lei;pl",descricao:"Projeto de Lei",genero:"M"},{urn:"projeto.lei;pls",descricao:"Projeto de Lei do Senado",genero:"M"},{urn:"projeto.lei.complementar;plp",descricao:"Projeto de Lei Complementar",genero:"M"},{urn:"projeto.lei.complementar;pls",descricao:"Projeto de Lei Complementar do Senado",genero:"M"},{urn:"projeto.lei;plc",descricao:"Projeto de Lei da Câmara",genero:"M"},{urn:"projeto.lei.complementar;plc",descricao:"Projeto de Lei Complementar da Câmara",genero:"M"},{urn:"projeto.lei.conversao;plv",descricao:"Projeto de Lei de Conversão",genero:"M"},{urn:"projeto.resolucao;prs",descricao:"Projeto de Resolução do Senado",genero:"M"},{urn:"projeto.decreto.legislativo;pds",descricao:"Projeto de Decreto Legislativo",genero:"M"},{urn:"projeto.decreto.legislativo;pdl",descricao:"Projeto de Decreto Legislativo",genero:"M"},{urn:"substitutivo.projeto.lei.senado;scd",descricao:"Substitutivo da Câmara dos Deputados",genero:"M"},{urn:"emenda.projeto.lei.senado;ecd",descricao:"Emenda(s) da Câmara dos Deputados",genero:"F"}],fakeUrns:[{sigla:"PEC",urnAutoridade:"senado.federal",urnTipoDocumento:"proposta.emenda.constitucional;pec"},{sigla:"PL",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.lei;pl"},{sigla:"PLS",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.lei;pls"},{sigla:"PLP",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.lei.complementar;plp"},{sigla:"PLC",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.lei;plc"},{sigla:"PLV",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.lei.conversao;plv"},{sigla:"PRS",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.resolucao;prs"},{sigla:"PDS",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.decreto.legislativo;pds"},{sigla:"PDL",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.decreto.legislativo;pdl"},{sigla:"SCD",urnAutoridade:"senado.federal",urnTipoDocumento:"substitutivo.projeto.lei.senado;scd"},{sigla:"ECD",urnAutoridade:"senado.federal",urnTipoDocumento:"emenda.projeto.lei.senado;ecd"},{sigla:"MPV",urnAutoridade:"senado.federal",urnTipoDocumento:"medida.provisoria;mpv"}],siglas:[{urnAutoridade:"federal",urnTipoDocumento:"medida.provisoria",sigla:"MPV"},{urnAutoridade:"congresso.nacional",urnTipoDocumento:"projeto.lei",sigla:"PLN"},{urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.lei",sigla:"PLS"},{urnAutoridade:"congresso.nacional",urnTipoDocumento:"medida.provisoria",sigla:"MPV"},{urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.lei.senado.federal",sigla:"PLS"},{urnAutoridade:"camara.deputados",urnTipoDocumento:"projeto.lei",sigla:"PLC"}],atalhosUrn:[{urnTipoDocumento:"constituicao",urnAutoridade:"federal",urn:"urn:lex:br:federal:constituicao:1988-10-05;1988",nome:"Constituição Federal"},{urnTipoDocumento:"ato.disposicoes.constitucionais.transitorias",urnAutoridade:"federal",urn:"urn:lex:br:federal:ato.disposicoes.constitucionais.transitorias:1988-10-05;1988",nome:"Ato das Disposições Constitucionais Transitórias - ADCT"},{urnTipoDocumento:"consolidacao.leis.trabalho",urnAutoridade:"federal",urn:"urn:lex:br:federal:decreto.lei:1943-05-01;5452",nome:"Consolidação das Leis do Trabalho - CLT, aprovada pelo Decreto-Lei nº 5.452, de 1º de maio de 1943",genero:"F"},{urnTipoDocumento:"regimento.interno",urnAutoridade:"senado.federal",urn:"urn:lex:br:senado.federal:resolucao:1970-11-27;93",nome:"Regimento Interno do Senado Federal",genero:"M"},{urnTipoDocumento:"regimento.interno",urnAutoridade:"congresso.nacional",urn:"urn:lex:br:congresso.nacional:resolucao:1970-08-11;1",nome:"Regimento Comum do Congresso Nacional",genero:"M"}],eventos:[{urn:"leitura",tipoTextoProcessoLegislativo:"Texto inicial",genero:"M"},{urn:"aprovacao.substitutivo.decisao.terminativa",tipoTextoProcessoLegislativo:"Redação do vencido em turno suplementar na Comissão",substitutivo:"s",genero:"F"},{urn:"aprovacao.substitutivo",tipoTextoProcessoLegislativo:"Redação do vencido em turno suplementar no Plenário",substitutivo:"s",genero:"F"},{urn:"apresentacao.substitutivo",tipoTextoProcessoLegislativo:"Texto do substitutivo",substitutivo:"s",genero:"M"}]},Za=t=>{var e;const o=null===(e=t.replace("urn:lex:br:",""))||void 0===e?void 0:e.split(":");return Wa.tiposDocumento.filter((t=>t.urn===o[1]))[0]},Xa=t=>{var e,o,i;const n=null===(e=t.replace("urn:lex:br:",""))||void 0===e?void 0:e.split(":");return(null===(o=n[2])||void 0===o?void 0:o.indexOf(";"))>-1?null===(i=n[2])||void 0===i?void 0:i.substring(n[2].indexOf(";")+1):""},Ya=t=>{var e,o,i,n,r;const s=null===(e=t.replace("urn:lex:br:",""))||void 0===e?void 0:e.split(":"),a=null===(o=s[2])||void 0===o?void 0:o.substring(0,s[2].indexOf(";"));if(/\d{4}$/.test(a))return a;const l=null===(r=null===(n=null===(i=s[2])||void 0===i?void 0:i.substring(0,s[2].indexOf(";")))||void 0===n?void 0:n.split("-"))||void 0===r?void 0:r.reverse();return l?l.join("/"):""},Ja=t=>{const e=t.indexOf("!");return-1!==e?t.substring(0,e):t},tl=t=>{const e=t.match(/^(0[1-9]|[12][0-9]|3[01])[-/](0[1-9]|1[012])[-/](\d{4})$/);return e?`${e[3]}-${e[2]}-${e[1]}`:""},el=t=>{var e,o;const i=null===(e=(t=>{var e;const o=null===(e=t.replace("urn:lex:br:",""))||void 0===e?void 0:e.split(":");return Wa.autoridades.filter((t=>t.urn===o[0]))[0]})(t))||void 0===e?void 0:e.urn,n=null===(o=Za(t))||void 0===o?void 0:o.urn,r=/^\d{1,5}$/.test(Xa(t)),s=/\d{4}$/.test(Ya(t))?Ya(t):tl(Ya(t));return(null==t?void 0:t.startsWith("urn:lex:br:"))&&i&&n&&r&&s},ol=t=>{var e;const o=Ja(t),i=Xa(o),n=null===(e=Za(o))||void 0===e?void 0:e.descricao,r=Ya(o),[s,a,l]=r.split("/").map((t=>parseInt(t))),u=r.length>7?il(new Date(l,a-1,s)):void 0;return(n||"")+(i?" nº "+parseInt(i).toLocaleString("pt-BR"):"")+(u?", de "+u:"")},il=t=>t?t.getDate()+" de "+t.toLocaleDateString("pt-BR",{month:"long"})+" de "+t.getFullYear():void 0,nl={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XV:40,X:10,IX:9,V:5,IV:4,I:1},rl=t=>/^\d{1,}([-]?[a-zA-Z]+)?$/.test(t),sl=t=>/^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$/i.test(t),al=t=>{if(!/[a-zA-Z]+/.test(t))throw new Error(`O valor ${t} não é uma sequência de letras válida.`);t=t.toLowerCase();let e=0;return[...t].forEach((t=>e=t.toLowerCase().charCodeAt(0)-97+1+26*e)),e.toString()},ll=t=>{const e=parseInt(t);return e?ul(e):t},ul=t=>{let e="",o=0;for(;t>0;)o=(t-1)%26,t=(t-o-1)/26,e=e.replace(/^/,String.fromCharCode(97+o));return e},cl=t=>{if(!sl(t))throw new Error("O valor '"+t+"' não é um número em algarismo romano válido.");let e=0,o=1;for(let i=(t=t.toLowerCase()).length-1;i>=0;i--){const n=dl(t.charAt(i));n>o&&(o=n),n<o?e-=n:e+=n}return e.toString()},dl=t=>{switch(t.toLowerCase()){case"i":return 1;case"v":return 5;case"x":return 10;case"l":return 50;case"c":return 100;case"d":return 500;case"m":return 1e3;default:return 0}},pl=t=>{let e,o="",i=-1===t.search(/[a-zA-Z-]/)?parseInt(t):parseInt(t.substring(0,t.search(/[a-zA-Z-]/)));const n=-1===t.search(/[a-zA-Z-]/)?"":t.substring(t.search(/[a-zA-Z-]/));for(const t in nl){if(e=Math.floor(i/nl[t]),e>=0)for(let i=0;i<e;i++)o+=t;i%=nl[t]}return o+n},hl=(t,e)=>{const o=-1===t.search(/-[a-zA-Z-]/)?t:t.substring(0,t.search(/-[a-zA-Z-]/)),i=-1===t.search(/-[a-zA-Z-]/)?"":t.substring(t.search(/-[a-zA-Z-]/));return(e?e(o):o)+(null==i?void 0:i.toUpperCase())},fl=(t,e)=>!t||e&&t<e?1:!e||t&&t>e?-1:0,ml=t=>{var e;return(vs(t)?null!==(e=(t=>{const e=Ms(t).indexOfArtigo(t);return-1===e||Ms(t).artigos.length===e+1?[]:Ms(t).artigos.filter(((t,o)=>o>e))})(t))&&void 0!==e?e:[]:aa(t)).filter((t=>ba(t))).length>0},vl=t=>{let e=0;const o=t.tipo;do{(ba(t)||ya(t))&&t.tipo===o&&e++,t=vs(t)?Gs(t.pai,t):oa(t)}while(void 0!==t);return e},gl=t=>{let e=0;const o=t.tipo;for(;void 0!==t&&!ba(t)&&!ya(t)&&t.tipo===o;)e++,t=vs(t)?Gs(t.pai,t):oa(t);return e},bl=t=>(t=>{const e=vl(t);if(ba(t))return new yl(e);const o=gl(t),i=e>0,n=ml(t);if(!i&&!n)return new yl(o);if(!i&&n){const t=new yl(0);return t.addNovoSeqOrdem(o),t}if(i&&n){const t=new yl(e);return t.addNovoSeqOrdem(o),t}return new yl(e+o)})(t).getNumeracao(js(t));class yl{constructor(t){this.seq=t}addNovoSeqOrdem(t){this.seq>0?this.letras=ul(t).toUpperCase():t>1&&(this.letras=ul(t-1).toUpperCase())}getNumeracao(t){var e;return this.seq+(t&&this.letras?"-":"")+(null!==(e=this.letras)&&void 0!==e?e:"")}}const xl=t=>ga(t)?(t=>{var e,o,i,n,r,s,a;const l=[];var u;return null===t&&l.push({tipo:Sa.ERROR,descricao:"O dispositivo não foi informado"}),null!==t&&void 0!==t.numero&&0===t.numero.trim().length&&l.push({tipo:Sa.ERROR,descricao:"O dispositivo não contém numeração"}),null!==t&&0===(null===(e=t.rotulo)||void 0===e?void 0:e.trim().length)&&l.push({tipo:Sa.ERROR,descricao:"O dispositivo não contém rótulo"}),null!==t&&!ms(t)&&(null===(o=t.rotulo)||void 0===o?void 0:o.endsWith(t.tipo))&&l.push({tipo:Sa.ERROR,descricao:"O rótulo informado não é válido. Numere o dispositivo"}),null!==t&&ga(t)&&bs(t)&&!Xs(t)&&(null===(i=t.rotulo)||void 0===i?void 0:i.endsWith("único."))&&l.push({tipo:Sa.ERROR,descricao:`Quando houver mais de um ${t.descricao}, não pode se tratar de '${t.descricao} único'`}),null===t||ha(t)||void 0===t.numero||0!==(null===(n=t.pai)||void 0===n?void 0:n.indexOf(t))||"1"===t.numero||l.push({tipo:Sa.ERROR,descricao:"É necessário um omissis antes deste dispositivo"}),null===t||!As(t)||(null===(r=oa(t))||void 0===r?void 0:r.tipo)!==ar.omissis.name&&(null===(s=ra(t))||void 0===s?void 0:s.tipo)!==ar.omissis.name||l.push({tipo:Sa.ERROR,descricao:"Não pode haver mais de um omissis sequencialmente"}),null!==t&&void 0!==t.numero&&t.pai.indexOf(t)>0&&sa(t).filter((t=>void 0!==t.numero)).filter((e=>-1===fl(e.numero,t.numero))).length>0&&l.push({tipo:Sa.ERROR,descricao:"O dispositivo tem número menor do que algum dispositivo anterior"}),null!==t&&void 0!==t.numero&&!t.pai.isLastFilho(t)&&ua(t).filter((e=>t.pai===e.pai&&void 0!==e.numero)).filter((e=>1===fl(e.numero,t.numero))).length>0&&l.push({tipo:Sa.ERROR,descricao:"O dispositivo tem número maior do que algum dispositivo posterior"}),null!==t&&!ha(t)&&void 0!==t.numero&&Bs(t).filter((e=>e.numero&&e.numero===t.numero)).length>1&&l.push({tipo:Sa.ERROR,descricao:"O dispositivo tem número igual a de outro dispositivo"}),null!==t&&!ha(t)&&void 0!==t.numero&&(u=t.numero,/^\d+$/.test(u))&&parseInt(t.numero)>2&&t.pai.indexOf(t)>0&&ia(t)&&t.tipo!==(null===(a=ia(t))||void 0===a?void 0:a.rotulo)&&0===Bs(t).filter((e=>e.numero&&e.numero===t.numero)).length&&parseInt(t.numero)!==parseInt(ia(t).numero)+1&&l.push({tipo:Sa.ERROR,descricao:"É necessário um omissis antes deste dispositivo"}),l})(t):(t=>{const e=[];return null===t&&e.push({tipo:Sa.ERROR,descricao:"O dispositivo não foi informado"}),null!==t&&t.numero&&0===t.numero.trim().length&&e.push({tipo:Sa.ERROR,descricao:"O dispositivo não contém numeração"}),null!==t&&t.rotulo&&0===t.rotulo.trim().length&&e.push({tipo:Sa.ERROR,descricao:"O dispositivo não contém rótulo"}),e})(t),wl=t=>ba(t)?[]:(t=>{const e=[];if(null===t&&e.push({tipo:Sa.ERROR,descricao:"O dispositivo não foi informado"}),null!==t&&t.filhos.length>0&&0===t.tiposPermitidosFilhos.length&&e.push({tipo:Sa.ERROR,descricao:`Segundo a Legislação vigente, ${t.descricao} não poderia possuir filhos`}),null!==t&&(ms(t)||Is(t))&&e.push({tipo:Sa.ERROR,descricao:"Não foi possível validar a natureza deste dispositivo com base na legislação vigente"}),null===t||!t.pai||Is(t.pai)||ms(t)||t.tiposPermitidosPai.includes(t.pai.tipo)||e.push({tipo:Sa.ERROR,descricao:`Segundo a Legislação vigente, ${t.descricao} somente poderia pertencer a ${t.tiposPermitidosPai.join(", ")}`}),null!==t&&!ms&&t.filhos.length>0&&(0===t.tiposPermitidosFilhos.length||t.filhos.filter((e=>!t.tiposPermitidosFilhos.includes(e.tipo))).length>0)){const o=0===t.tiposPermitidosFilhos.length?"não poderia possuir filhos":`somente poderia possuir ${t.tiposPermitidosFilhos.join(", ")}`;e.push({tipo:Sa.ERROR,descricao:`Segundo a Legislação vigente, ${t.descricao} ${o}`})}return e})(t).concat(Fa(t),xl(t),(t=>{const e=[];return t.alteracoes&&t.alteracoes.base?(el(t.alteracoes.base)||e.push({tipo:Sa.ERROR,descricao:"Não foi informada uma norma alterada válida"}),e):[]})(t));class El{constructor(t){this.descricaoSituacao=Ds.DISPOSITIVO_SUPRIMIDO,this.dispositivoOriginal=t}getAcoesPermitidas(t,e){const o=[];return(xs(t)?t.pai.pai:t.pai).situacao.descricaoSituacao!==Ds.DISPOSITIVO_SUPRIMIDO&&o.push(jr),o}}const Ol=t=>fs(t)?"cpt_alt1":t.tagId?t.tagId+(gs(t)?"":As(t)?sa(t).length+1:t.numero?(vs(t)||bs(t))&&"1"===t.numero&&Xs(t)?"1u":(t=>{const e=null==t?void 0:t.split("-"),[o,...i]=e,n=i.map((t=>al(t)));return(null==n?void 0:n.length)>0?o+"-"+(null==n?void 0:n.join("-").toUpperCase()):o})(t.numero):`[urn:${t.uuid}]`):void 0,Al=(t,e=[])=>{if(fs(t)&&void 0===t.pai)return;const o=Ol(t);if(o&&e.unshift(o),vs(t)){if(ga(t)){const o=Ms(t);Al(o,e)}}else Al(t.pai,e)},_l=t=>{const e=[];return Al(t,e),e.join("_")},ql=t=>{var e,o;return void 0!==(null===(o=null===(e=t.hierarquia)||void 0===e?void 0:e.pai)||void 0===o?void 0:o.uuidAlteracao)||void 0!==t.uuidAlteracao},Il=(t,e=0)=>void 0===(null==t?void 0:t.pai)||_s(t)?e:vs(t)?ga(t)?++e:e:(e=ha(null==t?void 0:t.pai)?e+2:++e,vs(null==t?void 0:t.pai)?e:Il(t.pai,e)),Sl=t=>{var e;const o=t.pai?gs(t.pai)?t.pai.pai:t.pai:void 0;return{tipo:null==o?void 0:o.tipo,uuid:null==o?void 0:o.uuid,uuidAlteracao:o&&ga(t)?null===(e=Ms(t).pai)||void 0===e?void 0:e.uuid:void 0}},kl=(t,e=!0)=>{var o,i,n;const r=t.pai;return{tipo:t.tipo,nivel:Il(t),agrupador:_s(t),hierarquia:{pai:r?Sl(t):void 0,posicao:r?r.indexOf(t):void 0,numero:t.numero},editavel:!(fs(t)||t.situacao instanceof El),sendoEditado:!1,uuid:t.uuid,lexmlId:t.id&&t.numero&&Ol(t),numero:t.numero,rotulo:null!==(o=t.rotulo)&&void 0!==o?o:"",conteudo:{texto:t.texto},norma:null===(i=t.alteracoes)||void 0===i?void 0:i.base,index:0,acoesPossiveis:e?t.getAcoesPossiveis(t):[],descricaoSituacao:null===(n=t.situacao)||void 0===n?void 0:n.descricaoSituacao,mensagens:ba(t)?[]:t.mensagens}},Nl=(t,e)=>{void 0!==e.filhos&&e.filhos.forEach((e=>{var o;const i=kl(e);vs(e)&&(i.conteudo.texto=e.caput.texto),t.push(i),vs(e)&&e.hasAlteracao()&&(null===(o=e.alteracoes)||void 0===o||o.filhos.forEach((e=>{t.push(kl(e)),Nl(t,e)}))),Nl(t,e)}))},Pl=t=>{var e;const o=[];return o.push(kl(t,!0)),vs(t)&&t.hasAlteracao()&&vs(t)&&t.hasAlteracao()&&(null===(e=t.alteracoes)||void 0===e||e.filhos.forEach((t=>{o.push(kl(t)),Nl(o,t)}))),Nl(o,t),o},Tl=(t,e,o=!1)=>{var i;const n=((t,e)=>{var o,i;return!ql(e)||va(t)?t:null!==(i=null===(o=Tl(t,{uuid:e.hierarquia?e.hierarquia.pai.uuidAlteracao:e.uuidAlteracao}))||void 0===o?void 0:o.alteracoes)&&void 0!==i?i:t})(t,e);if(!o&&ql(e)){const t=Tl(n,{uuid:e.hierarquia?e.hierarquia.pai.uuidAlteracao:e.uuidAlteracao});if(!(null==t?void 0:t.alteracoes))return;return null===(i=t.alteracoes)||void 0===i?void 0:i.filhos.flatMap((t=>{const e=[];return wa(t,e),e})).filter((t=>t.uuid===e.uuid))[0]}if((null==e?void 0:e.tipo)===ar.artigo.tipo){const t=n.filhos.find((t=>t.uuid===e.uuid));if(t)return t}const r=(null==e?void 0:e.tipo)===ar.articulacao.tipo||void 0===(null==e?void 0:e.uuid)?n:Us(n,e.uuid);if(null!==r)return r},Cl=(t,e,o)=>{var i;const n=wl(e);if(n.length>0||e.mensagens&&(null===(i=e.mensagens)||void 0===i?void 0:i.length)>0){e.mensagens=n;const i=kl(e,o);i.mensagens=wl(e),t.push(i)}},Rl=(t,e=!0)=>{const o=[];if(!t)return[];if(ga(t)&&ea(t)&&t.filhos.filter((t=>t.tipo===ar.omissis.tipo)).length>0&&(Cl(o,t),t.filhos.filter((t=>t.tipo===ar.omissis.tipo)).forEach((t=>Cl(o,t)))),Ss(t)||ms(t)){const i=xs(t)?t.pai.pai:t.pai;Cl(o,i),_s(i)&&Cl(o,xs(t)?t.pai.pai:t.pai),Bs(t).forEach((i=>{(e||i!==t)&&Cl(o,i,!0)}))}else!e||fs(t)||_s(t)||Cl(o,t,!0);return o},Dl=t=>(vs(t)||bs(t))&&2===Bs(t).length?Bs(t).filter((e=>t.uuid!==e.uuid)):ua(t,!0).filter((e=>e.tipo===t.tipo)),Ll=t=>Dl(t).map((t=>{t.mensagens=wl(t);return kl(t)}));var jl;!function(t){t.ArticulacaoAtualizada="ArticulacaoAtualizada",t.ComandoEmendaGerado="ComandoEmendaGerado",t.DocumentoCarregado="DocumentoCarregado",t.InformarNorma="InformarNorma",t.ElementoModificado="ElementoModificado",t.ElementoIncluido="ElementoIncluido",t.ElementoRemovido="ElementoRemovido",t.ElementoRenumerado="ElementoRenumerado",t.ElementoRestaurado="ElementoRestaurado",t.ElementoSuprimido="ElementoSuprimido",t.ElementoValidado="ElementoValidado",t.ElementoSelecionado="ElementoSelecionado",t.ElementoMarcado="ElementoMarcado",t.SituacaoElementoModificada="SituacaoElementoModificada"}(jl||(jl={}));const Ml=(t,e)=>((t,e)=>{const o=Pl(t);return{articulacao:t,modo:e,past:[],present:[],future:[],ui:{events:[{stateType:jl.DocumentoCarregado,elementos:o}]}}})(e.articulacao,e.classificacao);const Fl=function(t=0){return{next:()=>++t}}();function Ul(t){return class extends t{constructor(){super(...arguments),this.mensagens=[]}}}class $l{constructor(t){this.tipoAcao=t,this.isDispositivoAlteracao=!0,this.descricao="INICIAR_BLOCO"===t?"Inserir bloco de alteração":"Finalizar bloco de alteração"}execute(t,e,o,i=!1){return{type:"ADICIONAR_ELEMENTO",subType:this.tipoAcao,atual:t,novo:{tipo:o,isDispositivoAlteracao:this.isDispositivoAlteracao,conteudo:{texto:e}},hasDesmembramento:i}}}const Bl=new $l("INICIAR_BLOCO"),zl=new $l("FINALIZAR_BLOCO");function Vl(t){return class extends t{get alteracoes(){}hasAlteracao(){return!1}}}var Hl,Kl;function Gl(t){return class extends t{constructor(){super(...arguments),this.tipoConteudo=Hl.ConteudoTexto,this.texto=""}}}function Ql(t){return class extends t{addFilho(t,e){if(e&&this.filhos.indexOf(e)>=0){const o=this.filhos.indexOf(e)+1;this.isLastFilho(e)?this.filhos.push(t):this.filhos.splice(o,0,t)}else this.filhos.push(t);vs(t)&&Ms(t).addArtigo(t,e)}addFilhoOnPosition(t,e){var o;if(this.filhos.splice(e,0,t),vs(t)){const e=null!==(o=oa(t))&&void 0!==o?o:Gs(t.pai.pai,t.pai),i=Ms(t),n=e?i.indexOfArtigo(e)+1:0;i.addArtigoOnPosition(t,n)}}hasArtigos(){return this.filhos.filter((t=>vs(t))).length>0}isLastFilho(t){return this.filhos.indexOf(t)===this.filhos.length-1}get filhos(){var t;return this._filhos=null!==(t=this._filhos)&&void 0!==t?t:[],this._filhos}indexOf(t){return this.filhos.indexOf(t)}removeFilho(t){this._filhos=this.filhos.filter((e=>e.uuid!==t.uuid)),vs(t)&&Ms(t).removeArtigo(t)}renumeraFilhos(){var t;this.filhos.filter((t=>!vs(t))).forEach((t=>{t.numero=bl(t),t.createRotulo(t),t.id=_l(t)})),null===(t=Ms(this.filhos[0]))||void 0===t||t.renumeraArtigos()}}}function Wl(t){return class extends t{addFilho(t,e){if(e){const o=this.filhos.indexOf(e)+1;this.isLastFilho(e)?this.filhos.push(t):this.filhos.splice(o,0,t)}else this.filhos.push(t)}addFilhoOnPosition(t,e){this.filhos.splice(e,0,t)}hasArtigos(){return this.filhos.filter((t=>vs(t))).length>0}isLastFilho(t){return this.filhos.indexOf(t)===this.filhos.length-1}get filhos(){var t;return this._filhos=null!==(t=this._filhos)&&void 0!==t?t:[],this._filhos}indexOf(t){return this.filhos.indexOf(t)}removeFilho(t){this._filhos=this.filhos.filter((e=>e.uuid!==t.uuid))}renumeraFilhos(){this.filhos.filter((t=>!ga(t)&&(t.situacao.descricaoSituacao===Ds.DISPOSITIVO_NOVO||t.situacao.descricaoSituacao===Ds.DISPOSITIVO_ADICIONADO))).forEach((t=>{t.numero=bl(t),t.createRotulo(t),t.id=_l(t)}))}}}function Zl(t){return class extends t{constructor(){super(...arguments),this.type="NumeracaoAgrupadorLcp95",this.informouAgrupadorUnico=!1}getNomeAgrupadorUnico(t){return`${t.descricao} únic${t.artigoDefinido}`.toLocaleUpperCase()}normalizaNumeracao(t){const e=t.trim().split(/\s+/);if(2!==e.length)return"";const o=e[1].split("-");return sl(o[0])?(o[0]=cl(o[0]),o.join("-")):""}createNumeroFromRotulo(t){if(this.informouAgrupadorUnico=/.*[uú]nic[ao]/i.test(t),this.informouAgrupadorUnico)this.numero="1";else{const e=this.normalizaNumeracao(t);this.numero=this.informouAgrupadorUnico?"1":rl(e)?e:void 0}}createRotulo(t){var e;const o=void 0===t.descricao?null!==(e=t.name)&&void 0!==e?e:"":t.descricao.toLocaleUpperCase();void 0===this.numero?this.rotulo=ha(t)?"“"+t.tipo:t.tipo:void 0===this.numero||rl(this.numero)?t.isDispositivoAlteracao&&ha(t)?this.rotulo="“"+(this.informouAgrupadorUnico?this.getNomeAgrupadorUnico(t):o+" "+hl(this.numero,pl)):1===Bs(t).length?this.rotulo=this.getNomeAgrupadorUnico(t):this.rotulo=o+" "+hl(this.numero,pl):this.rotulo=o+" "+this.numero}getNumeracaoParaComandoEmenda(){const t=new Rs,e=this.numero?hl(this.numero,pl):"???";t.append(this.descricao+" "+e);const o=this.pai;return o&&!Aa(o)&&(t.append(o.pronomePossessivoSingular),t.append(" "),t.append(o.getNumeracaoParaComandoEmenda())),t.toString()}getNumeracaoComRotuloParaComandoEmenda(){return this.getNumeracaoParaComandoEmenda()}}}!function(t){t.ConteudoTexto="Conteúdo de Texto"}(Hl||(Hl={})),function(t){t.EMENDA="emenda",t.EMENDA_ARTIGO_ONDE_COUBER="emendaArtigoOndeCouber",t.NORMA="norma",t.PROJETO="projeto"}(Kl||(Kl={}));const Xl=[];Xl.push(Sr),Xl.push(Nr),Xl.push(Tr),Xl.push(Lr),Xl.push(Bl),Xl.push(zl),Xl.push(Ur),Xl.push($r),Xl.push(Br),Xl.push(zr),Xl.push(Vr),Xl.push(Hr),Xl.push(Kr),Xl.push(Gr),Xl.push(Qr),Xl.push(Wr),Xl.push(Zr),Xl.push(Xr),Xl.push(Yr),Xl.push(ls),Xl.push(Jr),Xl.push(os),Xl.push(is),Xl.push(ns),Xl.push(rs),Xl.push(ss),Xl.push(as),Xl.push(us),Xl.push(cs),Xl.push(ds),Xl.push(Rr),Xl.push(jr),Xl.push(Mr),Xl.push(hs),Xl.push(gr),Xl.push(br),Xl.push(yr),Xl.push(xr),Xl.push(wr),Xl.push(Er);const Yl=[];Yl.push(ur),Yl.push(cr),Yl.push(dr),Yl.push(pr),Yl.push(hr),Yl.push(mr);const Jl=t=>Xl.includes(t),tu=[...Xl,...Yl,ps],eu=t=>tu.filter((e=>e instanceof vr&&e.tipo===t))[0];function ou(t){return class extends t{getAcoesPossiveis(t){var e,o,i,n;const r=[];if(!_s(t))return[];if(0===sa(t).length&&aa(t).length>0&&t.filhos.filter((t=>_s(t))).length>0||r.push(Rr),t.pai&&fs(t.pai)&&_s(t.pai)&&void 0===ia(t)){const i=null===(e=t.tiposPermitidosPai)||void 0===e?void 0:e.indexOf(t.pai.tipo);null===(o=t.tiposPermitidosPai)||void 0===o||o.filter(((t,e)=>e>i)).forEach((t=>r.push(eu(t))))}if(t.pai&&!fs(t.pai)&&_s(t.pai)&&0===t.pai.indexOf(t)){const e=null===(i=t.tiposPermitidosPai)||void 0===i?void 0:i.indexOf(t.pai.tipo);null===(n=t.tiposPermitidosPai)||void 0===n||n.filter(((t,o)=>o>e)).forEach((t=>r.push(eu(t))))}return t.pai&&t.pai.indexOf(t)>0&&_s(t.pai)&&!fs(t.pai)&&r.push(eu(t.pai.tipo)),ga(t)&&r.push(Lr),t.getAcoesPermitidas(t,r)}getAcaoPossivelTab(t){}getAcaoPossivelShiftTab(t){}}}const iu=t=>{var e,o;return ga(t.pai)&&0===t.filhos.length&&t.tipo!==ar.omissis.name&&(null===(e=oa(t))||void 0===e?void 0:e.tipo)!==ar.omissis.name&&(null===(o=ra(t))||void 0===o?void 0:o.tipo)!==ar.omissis.name};class nu{constructor(){this.descricaoSituacao=Ds.DISPOSITIVO_NOVO}getAcoesPermitidas(t,e){return[...new Set(e)].filter((t=>void 0!==t)).filter((t=>"Adicionar"!==t.descricao&&"Atualizar dispositivo"!==t.descricao)).sort(((t,e)=>t.descricao.localeCompare(e.descricao)))}}function ru(t){return class extends t{constructor(){super(...arguments),this.situacao=new nu}getAcoesPermitidas(t,e){var o;return null===(o=this.situacao)||void 0===o?void 0:o.getAcoesPermitidas(t,e)}}}class su{constructor(t){this.tipo=ar[t].tipo,this.tagId=ar[t].tagId,this.name=ar[t].name,this.descricao=ar[t].descricao,this.descricaoPlural=ar[t].descricaoPlural,this.tiposPermitidosPai=ar[t].tiposPermitidosPai,this.tiposPermitidosFilhos=ar[t].tiposPermitidosFilhos,this.tipoProvavelFilho=ar[t].tipoProvavelFilho,this.INDICADOR_SEQUENCIA=ar[t].INDICADOR_SEQUENCIA,this.INDICADOR_FIM_SEQUENCIA=ar[t].INDICADOR_FIM_SEQUENCIA,this.INDICADOR_DESDOBRAMENTO=ar[t].INDICADOR_DESDOBRAMENTO}}const au=(t,e)=>{void 0!==e.tipoProvavelFilho&&t.filhos.forEach(((o,i)=>{var n;const r=_u(vs(e)&&ar.inciso.name===e.tipoProvavelFilho?e.caput:e,e.tipoProvavelFilho);r.texto=null!==(n=o.texto)&&void 0!==n?n:"",r.situacao=o.situacao,r.mensagens=wl(o),o.filhos&&au(o,r),i===t.filhos.length-1&&e.renumeraFilhos()}))},lu=(t,e)=>{t.tipo===e.tipo&&t.filhos.forEach((o=>{var i;const n=_u(vs(e)&&gs(o.pai)?e.caput:e,o.tipo);o.rotulo?n.rotulo=o.rotulo:n.createRotulo(n),n.texto=null!==(i=o.texto)&&void 0!==i?i:"",n.situacao=o.situacao,t.removeFilho(o),n.mensagens=wl(o),o.filhos&&(t.tipo===e.tipo?lu(o,n):au(o,n)),0===t.filhos.length&&e.renumeraFilhos()}))},uu=ru(function(t){return class extends t{getAcoesPossiveis(t){const e=[];return Es(t)?(e.push(Rr),void 0!==la(t)&&e.push(Nr),void 0!==na(t)&&e.push(Tr),ga(t)&&e.push(Lr),ga(t)&&fa(t)&&(e.push(Bl),ma(t)&&e.push(zl)),(0===t.texto.length||Ta(t))&&e.push(dr),(0===t.texto.length||Na(t))&&e.push(hr),(Xs(t)||Ys(t))&&e.push(bs(t.pai.pai)?Kr:Hr),(!ta(t)||void 0!==oa(t)&&As(oa(t)))&&e.push(Gr),iu(t)&&e.push(Ur),t.getAcoesPermitidas(t,e)):[]}getAcaoPossivelTab(t){var e;if(Es(t))return null===(e=t.tiposPermitidosFilhos)||void 0===e?void 0:e.map((e=>{const o="transformar"+t.tipo+"Em"+e;return t.getAcoesPossiveis(t).filter((t=>t instanceof Fr)).filter((t=>t instanceof Fr&&t.nomeAcao&&o&&t.nomeAcao===o))[0]}))[0]}getAcaoPossivelShiftTab(t){var e;if(Es(t))return Xs(t)||Ys(t)?bs(t.pai.pai)?Kr:Hr:null===(e=t.tiposPermitidosPai)||void 0===e?void 0:e.map((e=>{const o="transformar"+t.tipo+"Em"+e;return t.getAcoesPossiveis(t).filter((t=>t instanceof Fr)).filter((t=>t instanceof Fr&&t.nomeAcao&&o&&t.nomeAcao===o))[0]}))[0]}}}(Ul($a(Vl(Gl(function(t){return class extends t{constructor(){super(...arguments),this.type="NumeracaoAlineaLcp95",this.SUFIXO=")"}normalizaNumeracao(t){const e=/[a-z]+(-[a-zA-Z]+)*/.exec(t.trim());return e?e[0]:Ts(t).trim().replace(/\)$/,"").trim()}createNumeroFromRotulo(t){this.numero=hl(this.normalizaNumeracao(t),al)}createRotulo(){this.rotulo=void 0===this.numero?ar.alinea.name:hl(this.numero,ll)+this.SUFIXO}getNumeracaoParaComandoEmenda(){var t;return void 0===this.numero?(null===(t=ar.alinea.descricao)||void 0===t?void 0:t.toLocaleLowerCase())+"":"“"+hl(this.numero,ll)+"”"}getNumeracaoComRotuloParaComandoEmenda(){var t,e;return void 0===this.numero?(null===(t=ar.alinea.descricao)||void 0===t?void 0:t.toLocaleLowerCase())+"":(null===(e=ar.alinea.descricao)||void 0===e?void 0:e.toLocaleLowerCase())+" "+this.getNumeracaoParaComandoEmenda()}}}(Wl(su)))))))),cu=ru(function(t){return class extends t{getAcoesPossiveis(t){var e,o,i,n,r,s;const a=[];if(!vs(t))return[];if(a.push(ur),a.push(Rr),void 0!==la(t)&&a.push(Nr),void 0!==na(t)&&a.push(Tr),ga(t)&&!ms(t)&&a.push(Lr),ga(t)&&fa(t)&&(a.push(Bl),ma(t)&&a.push(zl)),t.alteracoes&&a.push(Sr),t.hasAlteracao()||ga(t)||0!==t.texto.length&&Na(t)||a.push(cr),t.hasAlteracao()||ga(t)||0!==t.texto.length&&!Na(t)||a.push(pr),t.hasAlteracao()||ga(t)||ea(t)||a.push(Bl),t.pai.indexOf(t)>0&&a.push(Qr),t.pai&&!ga(t)&&fs(t.pai)&&0===t.pai.filhos.filter((t=>_s(t))).length&&a.push(xr),!ga(t)&&t.pai&&(t=>{const e=t.pai.indexOf(t);return t.pai.filhos.filter(((t,o)=>o>e&&_s(t))).length>0})(t)&&a.push(eu(Ws(t).tipo)),!ga(t)&&_s(t.pai)){const n=null!==(o=null===(e=t.tiposPermitidosPai)||void 0===e?void 0:e.indexOf(t.pai.tipo))&&void 0!==o?o:0;null===(i=t.tiposPermitidosPai)||void 0===i||i.filter((()=>n>0)).filter(((e,o)=>t.pai.indexOf(t)>0?o>=n:o>n)).forEach((t=>a.push(eu(t))))}if(!ga(t)&&_s(t.pai)&&!fs(t.pai)&&t.pai.indexOf(t)>0&&(t=>{var e;return void 0!==(null===(e=t.pai)||void 0===e?void 0:e.pai)&&zs(t.pai.pai,t.pai,[]).length>0})(t)){const e=null!==(r=null===(n=t.tiposPermitidosPai)||void 0===n?void 0:n.indexOf(t.pai.tipo))&&void 0!==r?r:0,o=zs(t.pai.pai,t.pai,[]).reduce(((t,e)=>t.includes(e.tipo)&&void 0!==Ws(e)?t:t.concat(e.tipo)),[]);null===(s=t.tiposPermitidosPai)||void 0===s||s.filter((()=>e>0)).filter((t=>o.includes(t))).forEach((t=>a.push(eu(t))))}return t.getAcoesPermitidas(t,a)}getAcaoPossivelTab(t){var e;if(vs(t))return null===(e=t.tiposPermitidosFilhos)||void 0===e?void 0:e.map((e=>{const o="transformar"+t.tipo+"Em"+e;return t.getAcoesPossiveis(t).filter((t=>t instanceof Fr)).filter((t=>t instanceof Fr&&t.nomeAcao&&o&&t.nomeAcao===o))[0]}))[0]}getAcaoPossivelShiftTab(t){var e;if(t.tiposPermitidosFilhos)return xs(t)&&(Xs(t)||Ys(t))?Jr:ws(t)&&(Xs(t)||Ys(t))?Yr:Es(t)&&(Xs(t)||Ys(t))?bs(t.pai.pai)?Kr:Hr:null===(e=t.tiposPermitidosPai)||void 0===e?void 0:e.map((e=>{const o="transformar"+t.tipo+"Em"+e;return t.getAcoesPossiveis(t).filter((t=>t instanceof Fr)).filter((t=>t instanceof Fr&&t.nomeAcao&&o&&t.nomeAcao===o))[0]}))[0]}}}(Ul(za(function(t){return class extends t{hasAlteracao(){var t;return!!this.alteracoes&&(null===(t=this.alteracoes.filhos)||void 0===t?void 0:t.length)>0}}}(function(t){return class extends t{constructor(){super(...arguments),this.type="NumeracaoArtigoLcp95",this.PREFIXO="Art. ",this.SUFIXO="º",this.ARTIGO_UNICO="Artigo único.",this.informouArtigoUnico=!1}normalizaNumeracao(t){return t.replace(/["”“]/g,"").replace(/\./g,"").replace(/artigo [uú]nico/i,"1").replace(/(art[.]{0,1})/i,"").replace(/[º]/i,"").trim()}createNumeroFromRotulo(t){const e=this.normalizaNumeracao(t);this.informouArtigoUnico=/.[uú]nico/i.test(t),this.numero=this.informouArtigoUnico?"1":rl(e)?e:void 0}createRotulo(t){void 0===t?this.rotulo=ar.artigo.descricao:t.situacao.descricaoSituacao===Ds.DISPOSITIVO_ADICIONADO&&t.situacao.tipoEmenda===Kl.EMENDA_ARTIGO_ONDE_COUBER?this.rotulo="Art.":void 0===this.numero?this.rotulo=ha(t)?"“"+t.tipo:t.tipo:void 0===this.numero||rl(this.numero)?ha(t)?this.rotulo="“"+(this.informouArtigoUnico?this.ARTIGO_UNICO:this.PREFIXO+this.getNumeroAndSufixoNumeracao()):1===Ms(t).artigos.length?this.rotulo=this.ARTIGO_UNICO:this.rotulo=this.PREFIXO+this.numero===void 0?void 0:this.PREFIXO+this.getNumeroAndSufixoNumeracao():this.rotulo=this.PREFIXO+this.numero+this.SUFIXO}getNumeroAndSufixoNumeracao(t=!1){var e;const o=null===(e=this.numero)||void 0===e?void 0:e.split("-"),[i,...n]=o;return(parseInt(null!=i?i:"1",10)<10?i+this.SUFIXO:i)+(n.length>0?"-"+(null==n?void 0:n.map(ll).join("-").toUpperCase()):"")+(!t&&parseInt(null!=i?i:"1",10)>9?".":"")}getNumeracaoParaComandoEmenda(){var t;return void 0===this.numero?(null===(t=ar.artigo.descricao)||void 0===t?void 0:t.toLowerCase())+"":this.informouArtigoUnico?"artigo único":this.getNumeroAndSufixoNumeracao(!0)}getNumeracaoComRotuloParaComandoEmenda(){var t;return void 0===this.numero?(null===(t=ar.artigo.descricao)||void 0===t?void 0:t.toLowerCase())+"":this.informouArtigoUnico?"artigo único":"art. "+this.getNumeroAndSufixoNumeracao()}}}(function(t){return class extends t{get filhos(){const t=this.getIncisosCaput(),e=this.paragrafos;return t.concat(e)}getIncisosCaput(){var t,e;return null!==(e=null===(t=this.caput)||void 0===t?void 0:t.filhos)&&void 0!==e?e:[]}get paragrafos(){var t;return this._paragrafos=null!==(t=this._paragrafos)&&void 0!==t?t:[],this._paragrafos}addFilhoOnPosition(t,e){ys(t)?this.caput.addFilhoOnPosition(t,e):this.paragrafos.splice(e-this.getIncisosCaput().length,0,t)}addFilho(t,e){gs(t)?this.caput=t:ys(t)?this.addIncisoCaput(t,e):this.addParagrafo(t,e)}removeFilho(t){var e;ys(t)?null===(e=this.caput)||void 0===e||e.removeFilho(t):this.removeParagrafo(t)}addIncisoCaput(t,e){this.caput.addFilho(t,e)}addParagrafo(t,e){if(e){const o=this.paragrafos.indexOf(e)+1;this.isLastFilho(e)?this.paragrafos.push(t):this.paragrafos.splice(o,0,t)}else this.paragrafos.push(t)}removeParagrafo(t){var e;this._paragrafos=null===(e=this._paragrafos)||void 0===e?void 0:e.filter((e=>e.uuid!==t.uuid?e:e.pai=void 0))}isLastFilho(t){return this.paragrafos.indexOf(t)===this.paragrafos.length-1}indexOf(t){return ys(t)?this.caput.indexOf(t):this.filhos.indexOf(t)}renumeraIncisos(){var t;null===(t=this.caput)||void 0===t||t.renumeraFilhos()}renumeraParagrafos(){this.paragrafos.filter((t=>!ga(t)&&!ba(t))).forEach((t=>{t.numero=bl(t),t.createRotulo(t),t.id=_l(t)}))}isParagrafoUnico(){return 1===this.paragrafos.length}renumeraFilhos(){this.renumeraIncisos(),this.renumeraParagrafos()}}}(class extends su{constructor(){super("artigo")}get texto(){var t,e;return null!==(e=null===(t=this.caput)||void 0===t?void 0:t.texto)&&void 0!==e?e:""}set texto(t){this.caput.texto=t}}))))))),du=ru(function(t){return class extends t{getAcoesPossiveis(t){return[]}getAcaoPossivelTab(t){}getAcaoPossivelShiftTab(t){}}}(Ul(za(Vl(Gl(function(t){return class extends t{constructor(){super(...arguments),this.type="NumeracaoIndisponivel"}createRotulo(){this.rotulo=void 0}createNumeroFromRotulo(){}getNumeracaoParaComandoEmenda(){return""}getNumeracaoComRotuloParaComandoEmenda(){return"caput"}}}(Wl(su)))))))),pu=ru(function(t){return class extends t{getAcoesPossiveis(t){const e=[];return ms(t)?(e.push(Rr),ga(t)&&fa(t)&&(e.push(Bl),ma(t)&&e.push(zl)),(bs(t.pai)||gs(t.pai)||ys(t.pai)||Es(t.pai))&&t.pai.tipoProvavelFilho.length>0&&e.push(tu.filter((e=>e instanceof Fr&&e.nomeAcao==="transformarDispositivoGenericoEm"+t.pai.tipoProvavelFilho))[0]),t.getAcoesPermitidas(t,e)):[]}getAcaoPossivelTab(t){}getAcaoPossivelShiftTab(t){}}}(Ul(Ba(Vl(Gl(function(t){return class extends t{constructor(){super(...arguments),this.type="NumeracaoDispositivoGenericoLcp95",this.SUFIXO=" -"}createNumeroFromRotulo(){}createRotulo(){this.rotulo=void 0===this.numero?"dg":this.numero+this.SUFIXO}getNumeracaoParaComandoEmenda(){return void 0===this.numero?"dg":this.numero}getNumeracaoComRotuloParaComandoEmenda(){return this.getNumeracaoParaComandoEmenda()}}}(Wl(su)))))))),hu=ru(function(t){return class extends t{getAcoesPossiveis(t){const e=[];return ys(t)?(e.push(Rr),void 0!==la(t)&&e.push(Nr),void 0!==na(t)&&e.push(Tr),ga(t)&&!ms(t)&&e.push(Lr),ga(t)&&fa(t)&&(e.push(Bl),ma(t)&&e.push(zl)),ga(t)&&!ms(t)&&e.push(Lr),Na(t)&&e.push(dr),Ta(t)&&e.push(pr),Pa(t)&&Ys(t)&&e.push(mr),xs(t)&&(!ta(t)||void 0!==oa(t)&&As(oa(t)))&&e.push(ts),xs(t)&&(Xs(t)||Ys(t))&&e.push(Jr),xs(t)&&iu(t)&&e.push($r),ws(t)&&(Xs(t)||ta(t))&&e.push(Vr),ws(t)&&(!ta(t)||void 0!==oa(t)&&As(oa(t)))&&e.push(es),ws(t)&&iu(t)&&e.push(Vr),ws(t)&&(Xs(t)||Ys(t))&&e.push(Yr),t.getAcoesPermitidas(t,e)):[]}getAcaoPossivelTab(t){var e;if(ys(t))return!xs(t)||Xs(t)&&ta(t)?ws(t)&&(Xs(t)||Ys(t))?es:null===(e=t.tiposPermitidosFilhos)||void 0===e?void 0:e.map((e=>{const o=ys(t)?t.pai.tipo:"",i=e.endsWith(ar.inciso.name)?!bs(t)||Xs(t)&&ta(t)?"IncisoCaput":"IncisoParagrafo":e,n="transformar"+t.tipo+o+"Em"+i;return t.getAcoesPossiveis(t).filter((t=>t instanceof Fr)).filter((t=>t instanceof Fr&&t.nomeAcao&&n&&t.nomeAcao===n))[0]}))[0]:ts}getAcaoPossivelShiftTab(t){var e;if(ys(t))return xs(t)&&(Xs(t)||Ys(t))?Jr:ws(t)&&(Xs(t)||Ys(t))?Yr:null===(e=t.tiposPermitidosPai)||void 0===e?void 0:e.map((e=>{const o="transformar"+t.tipo+"Em"+e;return t.getAcoesPossiveis(t).filter((t=>t instanceof Fr)).filter((t=>t instanceof Fr&&t.nomeAcao&&o&&t.nomeAcao===o))[0]}))[0]}}}(Ul(za(Vl(Gl(function(t){return class extends t{constructor(){super(...arguments),this.type="NumeracaoIncisoLcp95",this.SUFIXO=" –"}normalizaNumeracao(t){const e=/[CDILMVX]+(-[a-zA-Z]+)*/.exec(t);return e?e[0]:Ts(t).trim().replace(/-$/,"").trim()}createNumeroFromRotulo(t){const e=hl(this.normalizaNumeracao(t),cl);this.numero=rl(e)?e:void 0}createRotulo(){this.rotulo=void 0===this.numero?ar.inciso.name:hl(this.numero,pl)+this.SUFIXO}getNumeracaoParaComandoEmenda(){var t;return void 0===this.numero?(null===(t=ar.inciso.descricao)||void 0===t?void 0:t.toLocaleLowerCase())+"":hl(this.numero,pl)}getNumeracaoComRotuloParaComandoEmenda(){var t,e;return void 0===this.numero?(null===(t=ar.inciso.descricao)||void 0===t?void 0:t.toLocaleLowerCase())+"":(null===(e=ar.inciso.descricao)||void 0===e?void 0:e.toLocaleLowerCase())+" "+this.getNumeracaoParaComandoEmenda()}}}(Wl(su)))))))),fu=ru(function(t){return class extends t{getAcoesPossiveis(t){const e=[];return Os(t)?(e.push(Rr),void 0!==la(t)&&e.push(Nr),void 0!==na(t)&&e.push(Tr),ga(t)&&!ms(t)&&e.push(Lr),ga(t)&&fa(t)&&(e.push(Bl),ma(t)&&e.push(zl)),(Xs(t)||Ys(t))&&e.push(ls),iu(t)&&e.push(Br),t.getAcoesPermitidas(t,e)):[]}getAcaoPossivelTab(t){var e;if(Os)return null===(e=t.tiposPermitidosFilhos)||void 0===e?void 0:e.map((e=>{const o="transformar"+t.tipo+"Em"+e;return t.getAcoesPossiveis(t).filter((t=>t instanceof Fr)).filter((t=>t instanceof Fr&&t.nomeAcao&&o&&t.nomeAcao===o))[0]}))[0]}getAcaoPossivelShiftTab(t){var e;if(t.tiposPermitidosFilhos)return null===(e=t.tiposPermitidosPai)||void 0===e?void 0:e.map((e=>{const o="transformar"+t.tipo+"Em"+e;return t.getAcoesPossiveis(t).filter((t=>t instanceof Fr)).filter((t=>t instanceof Fr&&t.nomeAcao&&o&&t.nomeAcao===o))[0]}))[0]}}}(Ul(za(Vl(Gl(function(t){return class extends t{constructor(){super(...arguments),this.type="NumeracaoItemLcp95",this.SUFIXO="."}normalizaNumeracao(t){const e=/\d+(-[a-zA-Z]+)*/.exec(t.trim());return e?e[0]:Ts(t).trim().replace(/\.$/,"").trim()}createNumeroFromRotulo(t){const e=this.normalizaNumeracao(t);this.numero=rl(e)?e:void 0}createRotulo(){this.rotulo=void 0===this.numero?ar.item.name:hl(this.numero)+this.SUFIXO}getNumeracaoParaComandoEmenda(){var t;return void 0===this.numero?(null===(t=ar.item.descricao)||void 0===t?void 0:t.toLowerCase())+"":hl(this.numero)}getNumeracaoComRotuloParaComandoEmenda(){var t,e;return void 0===this.numero?(null===(t=ar.item.descricao)||void 0===t?void 0:t.toLocaleLowerCase())+"":(null===(e=ar.item.descricao)||void 0===e?void 0:e.toLocaleLowerCase())+" "+this.getNumeracaoParaComandoEmenda()}}}(Wl(su)))))))),mu=ru(function(t){return class extends t{getAcoesPossiveis(t){const e=[];return bs(t)?(e.push(Rr),void 0!==la(t)&&e.push(Nr),void 0!==na(t)&&e.push(Tr),ga(t)&&e.push(Lr),t.texto&&Na(t)&&e.push(pr),(ta(t)||Xs(t))&&e.push(ds),Xs(t)||e.push(cs),(Ys(t)||Xs(t))&&e.push(us),iu(t)&&e.push(zr),ga(t)&&fa(t)&&(e.push(Bl),ma(t)&&e.push(zl)),t.getAcoesPermitidas(t,e)):[]}getAcaoPossivelTab(t){var e;if(bs(t))return null===(e=t.tiposPermitidosFilhos)||void 0===e?void 0:e.map((e=>{const o=e.endsWith(ar.inciso.name)?!bs(t)||Xs(t)&&ta(t)?"IncisoCaput":"IncisoParagrafo":e,i="transformar"+t.tipo+"Em"+o;return t.getAcoesPossiveis(t).filter((t=>t instanceof Fr)).filter((t=>t instanceof Fr&&t.nomeAcao&&i&&t.nomeAcao===i))[0]}))[0]}getAcaoPossivelShiftTab(t){var e;if(t.tiposPermitidosFilhos)return xs(t)&&(Xs(t)||Ys(t))?Jr:ws(t)&&(Xs(t)||Ys(t))?Yr:Es(t)&&(Xs(t)||Ys(t))?bs(t.pai.pai)?Kr:Hr:null===(e=t.tiposPermitidosPai)||void 0===e?void 0:e.map((e=>{const o="transformar"+t.tipo+"Em"+e;return t.getAcoesPossiveis(t).filter((t=>t instanceof Fr)).filter((t=>t instanceof Fr&&t.nomeAcao&&o&&t.nomeAcao===o))[0]}))[0]}}}(Ul(za(Vl(Gl(function(t){return class extends t{constructor(){super(...arguments),this.type="NumeracaoParagrafoLcp95",this.PREFIXO="§ ",this.SUFIXO="º",this.PARAGRAFO_UNICO="Parágrafo único.",this.informouParagrafoUnico=!1}normalizaNumeracao(t){return t.trim().replace(/\./g,"").replace(/§/i,"").replace(/par[aá]grafo [uú]nico/i,"1").replace(/[º]/i,"").trim()}createNumeroFromRotulo(t){const e=this.normalizaNumeracao(t);this.informouParagrafoUnico=/.[uú]nico/i.test(t),this.numero=this.informouParagrafoUnico?"1":rl(e)?e:void 0}createRotulo(t){var e;void 0!==this.numero&&t?rl(this.numero)?t.isDispositivoAlteracao?this.rotulo=this.informouParagrafoUnico?this.PARAGRAFO_UNICO:this.PREFIXO+this.getNumeroAndSufixoNumeracao():1===(null===(e=t.pai)||void 0===e?void 0:e.filhos.filter((t=>bs(t))).length)?this.rotulo=this.PARAGRAFO_UNICO:this.rotulo=this.PREFIXO+this.numero===void 0?void 0:this.PREFIXO+this.getNumeroAndSufixoNumeracao():this.rotulo=this.getNumeroAndSufixoNumeracao():this.rotulo=ar.paragrafo.name}getNumeroAndSufixoNumeracao(){if(!this.numero)return"";const t=-1===this.numero.search(/[a-zA-Z-]/)?parseInt(this.numero):parseInt(this.numero.substring(0,this.numero.search(/[a-zA-Z-]/))),e=-1===this.numero.search(/[a-zA-Z-]/)?"":this.numero.substring(this.numero.search(/[a-zA-Z-]/));return(t<10?t+this.SUFIXO:t)+((null==e?void 0:e.length)>0?e:"")+(t>9?".":"")}getNumeracaoParaComandoEmenda(){var t;return void 0===this.numero?(null===(t=ar.paragrafo.descricao)||void 0===t?void 0:t.toLocaleLowerCase())+"":this.isParagrafoUnico()?"parágrafo único":this.getNumeroAndSufixoNumeracao()}getNumeracaoComRotuloParaComandoEmenda(){var t;return void 0===this.numero?(null===(t=ar.paragrafo.descricao)||void 0===t?void 0:t.toLocaleLowerCase())+"":this.isParagrafoUnico()?"parágrafo único":"§ "+this.getNumeroAndSufixoNumeracao()}isParagrafoUnico(){var t;return this.isDispositivoAlteracao&&this.informouParagrafoUnico||1===(null===(t=this.pai)||void 0===t?void 0:t.filhos.filter((t=>bs(t))).length)}}}(Wl(su)))))))),vu=ru(ou(Ul(Ba(Vl(Gl(Zl(Ql(class extends su{constructor(){super("articulacao")}get artigos(){var t;return null!==(t=this._artigos)&&void 0!==t?t:[]}addArtigo(t,e){var o;this._artigos=null!==(o=this._artigos)&&void 0!==o?o:[],void 0!==e?this._artigos.splice(this._artigos.indexOf(e)+1,0,t):this._artigos.push(t)}addArtigoOnPosition(t,e){var o;this._artigos=null!==(o=this._artigos)&&void 0!==o?o:[],this._artigos.splice(e,0,t)}removeArtigo(t){var e;this._artigos=null!==(e=this._artigos)&&void 0!==e?e:[],this._artigos=this._artigos.filter((e=>e.uuid!==t.uuid))}renumeraArtigos(){this.artigos.filter((t=>t.situacao.descricaoSituacao===Ds.DISPOSITIVO_NOVO||t.situacao.descricaoSituacao===Ds.DISPOSITIVO_ADICIONADO)).forEach((t=>{t.numero=bl(t),t.createRotulo(t),t.id=_l(t);const e=t.caput;e&&(e.id=_l(e))}))}indexOfArtigo(t){return this.artigos.indexOf(t)}})))))))),gu=ru(ou(Ul(za(Vl(Gl(Zl(Ql(su)))))))),bu=ru(ou(Ul(Ba(Vl(Gl(Zl(Ql(su)))))))),yu=ru(ou(Ul(za(Vl(Gl(Zl(Ql(su)))))))),xu=ru(ou(Ul($a(Vl(Gl(Zl(Ql(su)))))))),wu=ru(ou(Ul($a(Vl(Gl(Zl(Ql(su)))))))),Eu=ru(ou(Ul($a(Vl(Gl(Zl(Ql(su)))))))),Ou=ru(ou(Ul(za(Vl(Gl(Zl(Ql(su)))))))),Au=ru(function(t){return class extends t{getAcoesPossiveis(t){const e=[];return As(t)?(e.push(Rr),void 0!==la(t)&&e.push(Nr),void 0!==na(t)&&e.push(Tr),ga(t)&&!ms(t)&&e.push(Lr),ga(t)&&fa(t)&&(e.push(Bl),ma(t)&&e.push(zl)),fs(t.pai)&&void 0!==oa(t)&&e.push(is),gs(t.pai)&&e.push(ns),vs(t.pai)&&e.push(as),bs(t.pai)&&e.push(rs),ys(t.pai)&&e.push(os),Es(t.pai)&&e.push(ss),t.getAcoesPermitidas(t,e)):[]}getAcaoPossivelTab(t){}getAcaoPossivelShiftTab(t){}}}(za(Vl(function(t){return class extends t{constructor(){super(...arguments),this.tipoConteudo=Hl.ConteudoTexto,this._texto=ka}get texto(){return this._texto}set texto(t){const e=Da(t);this._texto=e===Ca?Ca:ka}}}(function(t){return class extends t{constructor(){super(...arguments),this.type="NumeracaoIndisponivel"}createRotulo(){this.rotulo=void 0}createNumeroFromRotulo(){}getNumeracaoParaComandoEmenda(){return""}getNumeracaoComRotuloParaComandoEmenda(){return""}}}(Wl(su))))))),_u=(t,e,o,i)=>{const n=qu(e,t);return void 0!==i&&i>=0?t.addFilhoOnPosition(n,i):o?t.addFilho(n,o):t.addFilho(n),n},qu=(t,e)=>{let o;switch(t.toLowerCase()){case"alinea":o=new uu(t.toLowerCase());break;case"artigo":o=new cu,o.caput=qu(ar.caput.tipo,o);break;case"capitulo":o=new gu(t.toLowerCase());break;case"caput":o=new du(t.toLowerCase());break;case"inciso":o=new hu(t.toLowerCase());break;case"item":o=new fu(t.toLowerCase());break;case"livro":o=new yu(t.toLowerCase());break;case"omissis":o=new Au(t.toLowerCase());break;case"paragrafo":o=new mu(t.toLowerCase());break;case"parte":o=new xu(t.toLowerCase());break;case"secao":o=new Eu(t.toLowerCase());break;case"subsecao":o=new wu(t.toLowerCase());break;case"titulo":o=new Ou(t.toLowerCase());break;default:o=e&&_s(e)?new bu("agrupadorGenerico"):new pu("generico"),o.mensagens=[],o.mensagens.push({tipo:Sa.WARNING,descricao:"Não foi possível validar a natureza deste dispositivo com base na legislação vigente"})}return o.uuid=Fl.next(),o.name=t,o.pai=e,(t=>{t.isDispositivoAlteracao=ga(t),ga(t)&&(t.renumeraFilhos=()=>{},vs(t)&&(t.caput.renumeraFilhos=()=>{}),Ms(t).renumeraFilhos=()=>{},Ms(t).renumeraArtigos=()=>{})})(o),o},Iu=()=>{const t=new vu;return t.uuid=Fl.next(),t},Su=t=>{t.alteracoes=Iu(),t.alteracoes.pai=t},ku=(t,e)=>{var o,i,n,r,s,a,l,u,c,d,p,h,f,m,v,g,b,y,x,w,E,O,A,_,q,I,S,k;let N;if(ga(t))if("INICIAR_BLOCO"===e.subType)N=Du(ar.artigo.tipo,Ms(t)),N.texto=(null===(n=null===(i=null===(o=e.novo)||void 0===o?void 0:o.conteudo)||void 0===i?void 0:i.texto)||void 0===n?void 0:n.length)>0?null===(s=null===(r=e.novo)||void 0===r?void 0:r.conteudo)||void 0===s?void 0:s.texto:"";else if("FINALIZAR_BLOCO"===e.subType){const o=Ms(t);N=Nu(o.pai),N.texto=Da(null!==(u=null===(l=null===(a=e.novo)||void 0===a?void 0:a.conteudo)||void 0===l?void 0:l.texto)&&void 0!==u?u:"")}else if(((t,e)=>{var o,i,n;if(!ga(t))return!1;const r=Hs(t);return Ys(r)&&La(Da(null!==(n=null===(i=null===(o=e.atual)||void 0===o?void 0:o.conteudo)||void 0===i?void 0:i.texto)&&void 0!==n?n:""))&&fa(t)})(t,e)){const o=Ms(t);N="INICIAR_BLOCO"===e.subType?Du(ar.artigo.tipo,o):Nu(o.pai),N.texto="INICIAR_BLOCO"===e.subType?"":Da(null!==(p=null===(d=null===(c=e.novo)||void 0===c?void 0:c.conteudo)||void 0===d?void 0:d.texto)&&void 0!==p?p:"")}else N=Nu(t),N.createRotulo(),N.texto=(null===(m=null===(f=null===(h=e.novo)||void 0===h?void 0:h.conteudo)||void 0===f?void 0:f.texto)||void 0===m?void 0:m.length)>0?Da(null!==(b=null===(g=null===(v=e.novo)||void 0===v?void 0:v.conteudo)||void 0===g?void 0:g.texto)&&void 0!==b?b:""):"";else t.alteracoes||Ra(null===(x=null===(y=e.atual)||void 0===y?void 0:y.conteudo)||void 0===x?void 0:x.texto)||(null===(w=e.novo)||void 0===w?void 0:w.isDispositivoAlteracao)?(t.hasAlteracao()||Su(t),N=Du(t.tipo,t.alteracoes),N.texto=(null===(A=null===(O=null===(E=e.novo)||void 0===E?void 0:E.conteudo)||void 0===O?void 0:O.texto)||void 0===A?void 0:A.length)>0?null===(q=null===(_=e.novo)||void 0===_?void 0:_.conteudo)||void 0===q?void 0:q.texto:""):(N=Nu(t),N.texto=null!==(k=null===(S=null===(I=e.novo)||void 0===I?void 0:I.conteudo)||void 0===S?void 0:S.texto)&&void 0!==k?k:"");return N},Nu=t=>t.hasAlteracao()?Pu(t):vs(t)?ga(t)?_u(t.caput,ar.inciso.tipo,void 0,0):Cu(t):_s(t)?Ru(t):ga(t)?ea(t)||Na(t)?_u(t,t.tipoProvavelFilho,t):_u(t.pai,t.tipo===ar.omissis.tipo?t.pai.tipoProvavelFilho:t.tipo,t):Tu(t),Pu=t=>{var e;return t.pai.isLastFilho(t)&&(null===(e=null==t?void 0:t.pai)||void 0===e?void 0:e.pai)?_u(t.pai.pai,t.pai.tipo,t.pai):_u(t.pai,t.tipo,t)},Tu=t=>{if(Na(t)){const e=t.tipoProvavelFilho;return t.pai.filhos.length>0?_u(t,e,void 0,0):_u(t,e)}if(t.situacao.descricaoSituacao!==Ds.DISPOSITIVO_ORIGINAL&&Pa(t)&&t.pai.isLastFilho(t)){if(xs(t)){const e=t.pai.pai;return e.filhos.filter((t=>bs(t))).length>0?_u(e,ar.paragrafo.tipo,void 0,0):_u(e,ar.paragrafo.tipo)}return _u(t.pai.pai,t.pai.tipo,t.pai)}return _u(t.pai,t.tipo,t)},Cu=t=>{if(Na(t)){const e=t.tipoProvavelFilho;if(e===ar.inciso.tipo){const o=t.caput;return o.filhos.length>0?_u(o,e,void 0,0):_u(o,e)}return t.pai.filhos.length>0?_u(t,e,void 0,0):_u(t,e)}return Pa(t)&&t.pai.isLastFilho(t)?_u(t.pai.pai,t.pai.tipo,t.pai):_u(t.pai,t.tipo,t)},Ru=t=>_u(t,ar.artigo.tipo,void 0,0),Du=(t,e)=>{const o=_u(e,t);return o.createRotulo(o),o};class Lu extends nu{constructor(){super(...arguments),this.descricaoSituacao=Ds.DISPOSITIVO_ADICIONADO,this.tipoEmenda=Kl.EMENDA}getAcoesPermitidas(t,e){return[...new Set(e)].filter((t=>void 0!==t)).filter((t=>"Adicionar"!==t.descricao&&"Atualizar dispositivo"!==t.descricao)).filter((t=>!(t instanceof vr))).filter((e=>{var o;return!(null===(o=e.descricao)||void 0===o?void 0:o.startsWith("Mover"))||(t=>{var e;return 0===(null===(e=t.pai.filhos)||void 0===e?void 0:e.filter((t=>t.situacao.descricaoSituacao!==Ds.DISPOSITIVO_ADICIONADO)).length)})(t)})).sort(((t,e)=>t.descricao.localeCompare(e.descricao)))}}class ju{constructor(){this.descricaoSituacao=Ds.DISPOSITIVO_ORIGINAL}getAcoesPermitidas(t,e){const o=e.filter((t=>!(t instanceof vr))).filter((t=>!(t instanceof Cr))).filter((t=>{var e;return!(null===(e=t.descricao)||void 0===e?void 0:e.startsWith("Mover"))})).filter((t=>!(t instanceof Fr))).filter((t=>!(t instanceof Dr)));return xa(t).filter((t=>Ls(t))).length>0?o.push(jr):o.push(Mr),o}}const Mu=(t,e)=>{var o;let i;if(e.endsWith("EmOmissis")){const t=e.replace("transformar","").replace("EmOmissis","");i="transformar"+t+"EmOmissis"+t}else i=e;return null===(o=t.getAcoesPossiveis(t).filter((t=>t instanceof Fr)).filter((t=>t.nomeAcao===e||t.nomeAcao.replaceAll("IncisoCaput","Inciso").replaceAll("IncisoParagrafo","Inciso")===i))[0])||void 0===o?void 0:o.nomeAcao},Fu=(t,e)=>t.getAcoesPossiveis(t).filter((t=>t instanceof e)).length>0,Uu=(t,e,o)=>{var i,n,r,s,a,l,u,c,d;if(o&&(null===(i=o.ui)||void 0===i?void 0:i.events)){const e=Zu(o.ui.events,jl.ElementoModificado);if(e&&e.elementos&&(null===(r=null===(n=e.elementos[0])||void 0===n?void 0:n.conteudo)||void 0===r?void 0:r.texto)===t.texto)return!0}return""!==t.texto&&""===(null===(a=null===(s=e.atual)||void 0===s?void 0:s.conteudo)||void 0===a?void 0:a.texto)||(null===(u=null===(l=e.atual)||void 0===l?void 0:l.conteudo)||void 0===u?void 0:u.texto)&&0!==t.texto.localeCompare(null===(d=null===(c=e.atual)||void 0===c?void 0:c.conteudo)||void 0===d?void 0:d.texto)},$u=t=>{const e=kl(t);return e.mensagens=wl(t),e},Bu=t=>{var e;t.uuid=Fl.next(),null===(e=t.filhos)||void 0===e||e.forEach((t=>Bu(t)))},zu=(t,e)=>fs(t)||(t=>vs(t)&&0===Ms(t).indexOfArtigo(t))(e)||0===e.pai.indexOf(e)?t:$s(t),Vu=t=>void 0!==t&&""!==t,Hu=(t,e=!1)=>{const o=[];return xa(t).forEach((t=>{if(e){const e=wl(t);e&&(t.mensagens=e,o.push(kl(t)))}else o.push(kl(t))})),o};class Ku{constructor(){this.eventos=[],this.eventos=Yu()}add(t,e){const o=this.get(t);e.forEach((t=>{var e;return Xu(o,t)||null===(e=o.elementos)||void 0===e?void 0:e.push(t)}))}build(){return this.eventos.filter((t=>t.elementos&&t.elementos.length>0))}get(t){return this.eventos.filter((e=>e.stateType===t))[0]}setReferencia(t){this.get(jl.ElementoIncluido).referencia=t}}const Gu=t=>{const e=new Ku,o=kl(t);return o.mensagens=wl(t),e.add(jl.ElementoModificado,[o]),e.add(jl.ElementoValidado,Rl(t)),e},Qu=(t,e)=>{t.mensagens=wl(t);const o=kl(t),i=e?[e]:[];return i.push(o),[{stateType:jl.ElementoModificado,elementos:i},{stateType:jl.ElementoValidado,elementos:Rl(t,!0)}]},Wu=(t,e)=>{const o=Pl(e),i=Dl(e),n=oa(e),r=e.pai;r.removeFilho(e),r.renumeraFilhos(),va(r)&&0===r.filhos.length&&(r.pai.alteracoes=void 0);const s=n&&(ca(n)||da(n))?n:gs(r)?r.pai:r;1===t.artigos.length&&i.push(t.artigos[0]);return((t,e,o)=>{const i=new Ku;return i.add(jl.ElementoRemovido,t),i.add(jl.ElementoRenumerado,e.map((t=>kl(t)))),i.add(jl.ElementoValidado,o),i})(o,i,Rl(s,!1)).build()},Zu=(t,e)=>null==t?void 0:t.filter((t=>t.stateType===e))[0],Xu=(t,e)=>(null==t?void 0:t.elementos.map((t=>{var o,i;return t.uuid===e.uuid&&t.rotulo===e.rotulo&&(null===(o=t.conteudo)||void 0===o?void 0:o.texto)===(null===(i=e.conteudo)||void 0===i?void 0:i.texto)})).filter((t=>t)).length)>0,Yu=()=>[{stateType:jl.ElementoIncluido,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]},{stateType:jl.ElementoRemovido,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]},{stateType:jl.ElementoModificado,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]},{stateType:jl.ElementoRenumerado,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]},{stateType:jl.ElementoRestaurado,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]},{stateType:jl.ElementoSuprimido,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]},{stateType:jl.ElementoValidado,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]},{stateType:jl.ElementoSelecionado,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]},{stateType:jl.ElementoMarcado,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]},{stateType:jl.SituacaoElementoModificada,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]}],Ju=(t,e)=>{const o=t.past?t.past:[];return o.push(JSON.parse(JSON.stringify(e))),o},tc=(t,e)=>{const o=t.future?t.future:[];return o.push(JSON.parse(JSON.stringify(e))),o},ec=(t,e)=>{var o;return{articulacao:t.articulacao,modo:t.modo,past:t.past,present:t.present,future:t.future,ui:{events:null===(o=t.ui)||void 0===o?void 0:o.events,message:e}}},oc=(t,e)=>{var o,i,n,r,s,a,l,u,c,d,p,h,f,m,v,g,b;let y=!1;const x=Tl(t.articulacao,e.atual,!0);if(void 0===x)return t;(null===(o=x.situacao)||void 0===o?void 0:o.descricaoSituacao)===Ds.DISPOSITIVO_ORIGINAL&&Vu(null===(n=null===(i=e.novo)||void 0===i?void 0:i.conteudo)||void 0===n?void 0:n.texto)&&(e.atual.conteudo.texto=x.texto,e.novo.conteudo.texto=void 0);const w=ca(x)||da(x),E=$u(x),O=[];if(Nl(O,x),Uu(x,e,t)&&(x.texto=ga(x)?Da(null!==(a=null===(s=e.atual.conteudo)||void 0===s?void 0:s.texto)&&void 0!==a?a:""):null===(r=e.atual.conteudo)||void 0===r?void 0:r.texto,y=!0),((t,e)=>{var o,i,n;return!(!_s(t)||!t.pai||t.situacao.descricaoSituacao===Ds.DISPOSITIVO_NOVO||Gs(t.pai,t))||!(t.situacao.descricaoSituacao!==Ds.DISPOSITIVO_ORIGINAL||!Na(t)||!ea(t))||ms(t)||Na(t)&&!Fu(t,lr)||(null===(o=t.situacao)||void 0===o?void 0:o.descricaoSituacao)===Ds.DISPOSITIVO_ORIGINAL&&Vu(null===(n=null===(i=e.novo)||void 0===i?void 0:i.conteudo)||void 0===n?void 0:n.texto)})(x,e))return ec(t,{tipo:Sa.INFO,descricao:"Não é possível criar dispositivos nessa situação"});const A=ku(x,e);if((null===(l=x.situacao)||void 0===l?void 0:l.descricaoSituacao)===Ds.DISPOSITIVO_ORIGINAL||(null===(u=x.situacao)||void 0===u?void 0:u.descricaoSituacao)===Ds.DISPOSITIVO_MODIFICADO||x.situacao instanceof Lu){A.situacao=new Lu,A.situacao.tipoEmenda=t.modo;const e=A.pai;va(e)&&1===e.filhos.length&&(e.situacao=new Lu)}Vu(null===(d=null===(c=e.novo)||void 0===c?void 0:c.conteudo)||void 0===d?void 0:d.texto)&&x.tipo===A.tipo&&ea(x)&&lu(x,A),ga(A)&&(null===(p=A.mensagens)||void 0===p||p.push({tipo:Sa.WARNING,descricao:"É necessário informar o rótulo do dispositivo"})),A.pai.renumeraFilhos();const _=((t,e)=>{const o=new Ku;return o.setReferencia(kl(zu(t,e))),o.add(jl.ElementoIncluido,Hu(e)),o.add(jl.ElementoRenumerado,Ll(e)),o.add(jl.ElementoValidado,Rl(e,!1)),o})(x,A),q=$u(x);if(Vu(null===(f=null===(h=e.novo)||void 0===h?void 0:h.conteudo)||void 0===f?void 0:f.texto)&&x.tipo===A.tipo&&O&&O.length>0&&_.add(jl.ElementoRemovido,O),_s(A)&&2===Bs(A).length){const t=Bs(A).filter((t=>t!==A));_.add(jl.ElementoModificado,[kl(t[0])])}return(y||Vu(null===(v=null===(m=e.novo)||void 0===m?void 0:m.conteudo)||void 0===v?void 0:v.texto))&&_.add(jl.ElementoModificado,[E,q]),(y||Vu(null===(b=null===(g=e.novo)||void 0===g?void 0:g.conteudo)||void 0===b?void 0:b.texto)||As(x))&&_.add(jl.ElementoValidado,[q]),(ca(x)||w)&&(_.add(jl.ElementoValidado,[q]),_.add(jl.ElementoRenumerado,[q])),{articulacao:t.articulacao,modo:t.modo,past:Ju(t,_.build()),present:_.build(),future:[],ui:{events:_.build()}}},ic=(t,e)=>{var o,i,n,r,s;const a=Tl(t.articulacao,e.atual,!0);if(void 0===a)return t;const l=oa(a),u=a.pai.indexOf(a),c=a.pai.filhos.filter(((t,o)=>o>=u&&t.tipo!==e.novo.tipo)).map((t=>Pl(t))).flat();let d,p;var h,f;Uu(a,e)&&(a.texto=ga(a)?Da(null!==(n=null===(i=e.atual.conteudo)||void 0===i?void 0:i.texto)&&void 0!==n?n:""):null===(o=e.atual.conteudo)||void 0===o?void 0:o.texto),h=a,f=e.novo.tipo,h.pai.tipo===f?(d=_u(a.pai.pai,e.novo.tipo,void 0,a.pai.pai.indexOf(a.pai)+1),p=ia(d)):!ga(a)&&((t,e)=>void 0!==Vs(t,e))(a,e.novo.tipo)||((t,e)=>zs(t.pai.pai,t.pai,[]).filter((t=>t.tipo===e)).length>0)(a,e.novo.tipo)?(p=null!==(r=Vs(a,e.novo.tipo))&&void 0!==r?r:((t,e)=>[...new Set(zs(t.pai,t,[]))].filter((t=>t.tipo===e)).reverse()[0])(a,e.novo.tipo),d=_u(p.pai,e.novo.tipo,p)):(d=_u(a.pai,e.novo.tipo,void 0,a.pai.indexOf(a)),p=null!=l?l:a.pai),d.texto=null===(s=e.novo.conteudo)||void 0===s?void 0:s.texto;((t,e)=>{e.map((e=>{const o=e.pai;Bu(e);const i=vs(e)?ia(e):void 0;return null==o||o.removeFilho(e),e.pai=t,t.addFilho(e,i),e}))})(d,a.pai.filhos.filter(((t,o)=>o>=u&&t.tipo!==e.novo.tipo))),d.renumeraFilhos(),d.pai.renumeraFilhos();const m=[...Ll(d)].concat(d.filhos.filter(((t,e)=>e>=u&&t.tipo!==a.tipo)).map((t=>Pl(t))).flat()),v=ia(d);v&&2===Bs(d).length&&m.unshift(kl(v));const g=new Ku;return g.setReferencia(kl(zu(p.pai&&fs(p)&&va(p)?p.pai:p,d))),g.add(jl.ElementoIncluido,Pl(d)),g.add(jl.ElementoRemovido,c),g.add(jl.ElementoRenumerado,m),{articulacao:t.articulacao,modo:t.modo,past:Ju(t,g.build()),present:g.build(),future:[],ui:{events:g.build()}}};class nc{constructor(t){this.descricaoSituacao=Ds.DISPOSITIVO_MODIFICADO,this.dispositivoOriginal=t}getAcoesPermitidas(t,e){const o=e.filter((t=>!(t instanceof vr))).filter((t=>!(t instanceof Cr))).filter((t=>!(t instanceof Dr))).filter((t=>{var e;return!(null===(e=t.descricao)||void 0===e?void 0:e.startsWith("Mover"))})).filter((t=>"Adicionar"!==t.descricao&&"Atualizar dispositivo"!==t.descricao)).filter((t=>!(t instanceof Fr)));return o.push(jr),o.filter((t=>void 0!==t)).sort(((t,e)=>t.descricao.localeCompare(e.descricao)))}}const rc=(t,e)=>{const o=[],i=lc(e);for(const e of i.values())o.push(sc(t,e));return o},sc=(t,e)=>{const o={stateType:jl.ElementoIncluido,referencia:void 0,pai:void 0,posicao:void 0,elementos:[]};return e.forEach((e=>{var i;let n;if(e.idIrmaoAnterior){const i=_a(t.articulacao,e.idIrmaoAnterior);i&&(n=_u(i.pai,i.tipo,i),o.referencia=kl(i))}if(e.idPai){const i=_a(t.articulacao,e.idPai);i&&(n=_u(i,e.tipo,void 0,0),o.referencia=kl(n.pai))}n&&(n.situacao=new Lu,n.rotulo=e.rotulo,n.texto=e.texto,n.lexmlId=_l(n),null===(i=o.elementos)||void 0===i||i.push(kl(n)))})),o},ac=(t,e)=>{t.set(e.id,[e])},lc=t=>{var e;const o=new Map;return null===(e=t.dispositivosAdicionados)||void 0===e||e.forEach(((e,i)=>{if(0===i)ac(o,e);else{const r=t.dispositivosAdicionados[i-1];n=e.id,r.id===n.substring(0,n.lastIndexOf("_"))||((t,e)=>e.substring(0,e.lastIndexOf("_"))===t.substring(0,t.lastIndexOf("_")))(e.id,r.id)?o.get(r).push(e):ac(o,e)}var n})),o},uc=(t,e)=>{var o;const i=Tl(t.articulacao,e.atual,!0),n=e.atual.norma,r=(null==i?void 0:i.alteracoes.base)||"",s=new RegExp(`<a.+href=.${r}.*?>.*?</a>`,"ig"),a=ol(n);if(void 0===i||!i.alteracoes||r===n&&i.texto.match(s))return t.ui=[],t;const l=`<a href="${u=n}"> ${ol(u)} </a>`;var u;const c=i.texto;if(i.texto.match(s))i.texto=c.replace(s,l);else if(i.texto.includes(a))i.texto=c.replace(a,l);else{const t=parseInt(localStorage.indexCursor);i.texto=[c.slice(0,t),l,c.slice(t)].join(" "),localStorage.removeItem("indexCursor")}const d=kl(i);i.alteracoes.base=n,(null===(o=i.situacao)||void 0===o?void 0:o.descricaoSituacao)===Ds.DISPOSITIVO_ORIGINAL&&(i.situacao=new nc(d));const p=new Ku,h=kl(i,!0);h.mensagens=wl(i),p.add(jl.ElementoValidado,[h]),p.add(jl.ElementoModificado,[h]),p.add(jl.SituacaoElementoModificada,[h]);const f=Gu(i);return{articulacao:t.articulacao,modo:t.modo,past:Ju(t,Qu(i,d)),present:f.build(),future:t.future,ui:{events:p.build()}}},cc=(t,e)=>{const o=Tl(t.articulacao,e.atual,!0);if(void 0===o)return t.ui=[],t;if(!((t,e)=>{const o=Mu(t,e.subType);return t.getAcoesPossiveis(t).filter((t=>t instanceof Fr&&t.nomeAcao&&t.nomeAcao===o)).length>0})(o,e))return t;e.subType=Mu(o,e.subType);const i=[...Pl(o)],n=Dl(o),r=((t,e)=>{var o,i;const n=t.pai;let r,s;switch(e.subType){case"transformarAlineaEmItem":case"transformarIncisoCaputEmAlinea":case"transformarIncisoParagrafoEmAlinea":case"transformarParagrafoEmIncisoParagrafo":s=oa(t),r=_u(s,e.novo.tipo);break;case"transformarDispositivoGenericoEmInciso":case"transformarDispositivoGenericoEmAlinea":case"transformarDispositivoGenericoEmItem":case"transformarOmissisEmAlinea":case"transformarOmissisEmArtigo":case"transformarOmissisEmIncisoCaput":case"transformarOmissisEmIncisoParagrafo":case"transformarOmissisEmItem":case"transformarOmissisEmParagrafo":case"transformarAlineaEmOmissisAlinea":case"transformarItemEmOmissisItem":case"transformarParagrafoEmOmissisParagrafo":case"transformarIncisoCaputEmOmissisIncisoCaput":case"transformarIncisoParagrafoEmOmissisIncisoParagrafo":s=n,r=_u(n,e.novo.tipo,void 0,null==n?void 0:n.indexOf(t));break;case"transformarParagrafoEmInciso":if(bs(t)&&(ta(t)||Xs(t))){s=n,r=_u(s.caput,e.novo.tipo);break}s=oa(t),r=_u(s,e.novo.tipo);break;case"transformarParagrafoEmIncisoCaput":s=n,r=_u(s.caput,e.novo.tipo);break;case"transformarArtigoEmParagrafo":s=oa(t),r=_u(s,e.novo.tipo);break;default:s=t.pai.pai,r=_u(s,e.novo.tipo,t.pai)}return r.texto=null!==(i=null===(o=e.atual.conteudo)||void 0===o?void 0:o.texto)&&void 0!==i?i:t.texto,r.createRotulo(r),r.situacao=t.situacao,r.mensagens=wl(r),null==n||n.removeFilho(t),null==n||n.renumeraFilhos(),null==s||s.renumeraFilhos(),au(t,r),r})(o,e),s=Dl(r).concat(n),a=Hu(r,!0),l=xs(r)?r.pai.pai:r.pai,u=oa(r);if(u){const t=wl(u);u.mensagens!==t&&a.unshift(kl(u))}const c=a.filter((t=>t.uuid===l.uuid)).length>0?o.pai:l;c.mensagens=wl(c),a.unshift(kl(c));const d=null!=u?u:r.pai,p=((t,e,o,i,n)=>{const r=new Ku;return r.setReferencia(kl(zu(t,e))),r.add(jl.ElementoIncluido,Pl(e)),r.add(jl.ElementoRemovido,o),r.add(jl.ElementoRenumerado,i),r.add(jl.ElementoValidado,n.filter((t=>t.mensagens.length>0))),r})(gs(d)?d.pai:d,r,i,s.map((t=>{t.mensagens=wl(t);return kl(t)})),a);return{articulacao:t.articulacao,modo:t.modo,past:Ju(t,p.build()),present:p.build(),future:[],ui:{events:p.build()}}},dc=(t,e)=>{if(ql(e)){const o=va(t)?t.pai:Us(t,e.hierarquia.pai.uuidAlteracao);if(o)return o.alteracoes||(o.alteracoes=Iu(),o.alteracoes.pai=o),e.hierarquia.pai.tipo===ar.articulacao.tipo?o.alteracoes:Us(o.alteracoes,e.hierarquia.pai.uuid)}return Us(t,e.hierarquia.pai.uuid)},pc=(t,e)=>{var o,i,n;const r=_u(vs(e)&&(t.tipo===ar.inciso.name||(t=>{var e,o;const i=null!==(o=null===(e=t.lexmlId)||void 0===e?void 0:e.split("_"))&&void 0!==o?o:[];return t.tipo===ar.omissis.tipo&&i.length>1&&"cpt"===i[i.length-2]})(t))?e.caput:e,t.tipo,void 0,t.hierarquia.posicao);return r.uuid=t.uuid,r.id=t.lexmlId,r.texto=null!==(i=null===(o=null==t?void 0:t.conteudo)||void 0===o?void 0:o.texto)&&void 0!==i?i:"",r.numero=null===(n=null==t?void 0:t.hierarquia)||void 0===n?void 0:n.numero,r.rotulo=null==t?void 0:t.rotulo,r.mensagens=null==t?void 0:t.mensagens,r.situacao=(t=>{switch(t){case Ds.DISPOSITIVO_ADICIONADO:return new Lu;case Ds.DISPOSITIVO_NOVO:return new nu;default:return new ju}})(t.descricaoSituacao),r},hc=(t,e,o)=>{if(void 0!==e&&void 0!==e.elementos&&void 0!==e.elementos[0]){const i=e.elementos[0],n=dc(t.articulacao,i),r=((t,e)=>{const o=e.shift(),i=dc(t,o),n=pc(o,i),r=[n];return null==e||e.forEach((e=>{var i,s;const a=(null===(i=e.hierarquia)||void 0===i?void 0:i.pai)===(null===(s=null==o?void 0:o.hierarquia)||void 0===s?void 0:s.pai)?n.pai:dc(t,e),l=pc(e,a);r.push(l)})),r})(t.articulacao,e.elementos);if(null==n||n.renumeraFilhos(),o){const e=0===i.hierarquia.posicao?fs(n)&&va(n)?n.pai:n:$s(oa(r[0]));if(e){const i=Tl(t.articulacao,e);i?o.referencia=kl(i):ec(t,{tipo:Sa.ERROR,descricao:"Erro inesperado"})}}return e.stateType===jl.ElementoIncluido&&(o.referencia=e.referencia),r.map((t=>kl(t)))}return[]},fc=(t,e)=>void 0!==e&&void 0!==e.elementos&&void 0!==e.elementos[0]?(e.elementos.forEach((e=>{const o=Tl(t.articulacao,e,!0);if(o){const t=o.pai;t.removeFilho(o),t.renumeraFilhos()}})),e.elementos):[],mc=(t,e,o,i)=>void 0!==e&&void 0!==e.elementos&&void 0!==e.elementos[0]?(e.elementos.forEach((e=>{var n,r,s,a,l,u,c;const d=Tl(t.articulacao,e,!0);i instanceof ju?(d.numero=null!==(r=null===(n=d.situacao.dispositivoOriginal)||void 0===n?void 0:n.numero)&&void 0!==r?r:"",d.rotulo=null!==(a=null===(s=d.situacao.dispositivoOriginal)||void 0===s?void 0:s.rotulo)&&void 0!==a?a:"",d.texto=null!==(c=null===(u=null===(l=d.situacao.dispositivoOriginal)||void 0===l?void 0:l.conteudo)||void 0===u?void 0:u.texto)&&void 0!==c?c:"",d.situacao=new ju):d.situacao=new i(kl(d)),o.elementos.push(kl(d))})),o.elementos):[],vc=(t,e,o=!1)=>{if(void 0!==e&&void 0!==e.elementos&&void 0!==e.elementos[0]){const i=[];let n=0;return e.elementos.forEach((e=>{var r,s,a,l;const u=Tl(t.articulacao,e,!0);u&&(o&&n===u.uuid||n!==u.uuid)&&(u.situacao.descricaoSituacao===Ds.DISPOSITIVO_MODIFICADO?(u.texto=null!==(s=null===(r=u.situacao.dispositivoOriginal.conteudo)||void 0===r?void 0:r.texto)&&void 0!==s?s:"",u.situacao=new ju):(e.descricaoSituacao===Ds.DISPOSITIVO_MODIFICADO&&(u.situacao=new nc(kl(u))),u.texto=null!==(l=null===(a=e.conteudo)||void 0===a?void 0:a.texto)&&void 0!==l?l:""),u.alteracoes&&(u.alteracoes.base=e.norma),u.mensagens=wl(u),i.push(kl(u)),n=u.uuid)})),i}return[]},gc=(t,e)=>{if(void 0!==e&&void 0!==e.elementos&&void 0!==e.elementos[0]){const o=[];return e.elementos.forEach((e=>{const i=Tl(t.articulacao,e,!0);i&&o.push(kl(i))})),o}return[]},bc=(t,e)=>{const o=Zu(e,jl.ElementoValidado);if(void 0!==o&&void 0!==o.elementos&&void 0!==o.elementos[0]){const e=[];return o.elementos.forEach((o=>{const i=Tl(t.articulacao,o,!0);i&&(i.mensagens=wl(i),i.mensagens.length>0&&e.push(kl(i)))})),e}return[]},yc=(t,e)=>{const o=Tl(t.articulacao,e.atual,!0);if(void 0===o)return t.ui=[],t;if(!Fu(o,Cr))return ec(t,{tipo:Sa.ERROR,descricao:"Não é possível excluir um dispositivo original mas apenas suprimi-lo."});if(!ga(o)&&(ca(o)||1===t.articulacao.filhos.length&&t.articulacao.filhos[0]===o&&!ea(o)))return ec(t,{tipo:Sa.ERROR,descricao:"Não é possível excluir o único dispositivo disponível."});const i=_s(o)?((t,e)=>{let o=e.pai.indexOf(e);const i=e.pai.filhos.filter(((t,e)=>e<o&&_s(t))),n=e.pai,r=[...Pl(e)],s=ia(e),a=(null==i?void 0:i.length)>0&&!ga(e)?i.reverse()[0]:e.pai,l=(null==i?void 0:i.length)>0&&!ga(e)?i.reverse()[0]:o>0?$s(a.filhos[o-1]):a,u=fs(l)?a:$s(l),c=e.filhos.map((t=>(t.pai=a,n.removeFilho(t),Bu(t),(null==i?void 0:i.length)>0?a.addFilho(t):a.addFilhoOnPosition(t,o++),t)));e.pai.removeFilho(e),null==a||a.renumeraFilhos(),n.renumeraFilhos();const d=c.map((t=>Pl(t))).flat(),p=a.filhos.filter(((t,e)=>e>=o&&(_s(t)||ha(t)))).map((t=>kl(t))).flat();s&&1===Bs(s).length&&p.unshift(kl(s));const h=new Ku;return h.setReferencia(fs(u)&&va(u)?kl(u.pai):kl(u)),h.add(jl.ElementoIncluido,d),h.add(jl.ElementoRemovido,r),h.add(jl.ElementoRenumerado,p),h.build()})(t.articulacao,o):Wu(t.articulacao,o);return{articulacao:t.articulacao,modo:t.modo,past:Ju(t,i),present:i,future:[],ui:{events:i}}},xc=(t,e)=>{var o,i;const n=Tl(t.articulacao,e.atual,!0);if(void 0===n)return t.ui=[],t;if(!(xa(n).filter((t=>Ls(t))).length>0)&&(null===(o=n.situacao)||void 0===o?void 0:o.descricaoSituacao)!==Ds.DISPOSITIVO_MODIFICADO&&(null===(i=n.situacao)||void 0===i?void 0:i.descricaoSituacao)!==Ds.DISPOSITIVO_SUPRIMIDO)return t;const r=((t,e)=>{const o=xa(e).filter((t=>t.situacao.descricaoSituacao!==Ds.DISPOSITIVO_ORIGINAL));o.forEach((t=>{var e,o,i,n,r,s,a,l,u;t.numero=null!==(o=null===(e=t.situacao.dispositivoOriginal)||void 0===e?void 0:e.numero)&&void 0!==o?o:"",t.rotulo=null!==(n=null===(i=t.situacao.dispositivoOriginal)||void 0===i?void 0:i.rotulo)&&void 0!==n?n:"",t.id=null!==(s=null===(r=t.situacao.dispositivoOriginal)||void 0===r?void 0:r.lexmlId)&&void 0!==s?s:"",t.texto=t.situacao.descricaoSituacao===Ds.DISPOSITIVO_MODIFICADO?null!==(u=null===(l=null===(a=t.situacao.dispositivoOriginal)||void 0===a?void 0:a.conteudo)||void 0===l?void 0:l.texto)&&void 0!==u?u:"":t.texto,t.situacao=new ju}));const i=new Ku;return i.add(jl.ElementoRestaurado,o.map((t=>kl(t)))),i.build()})(t.articulacao,n);return{articulacao:t.articulacao,modo:t.modo,past:Ju(t,r),present:r,future:[],ui:{events:r}}},wc=(t,e)=>{0!==t.length&&(null==t||t.forEach((t=>{e.add(t.situacao.descricaoSituacao),wc(t.filhos,e)})))},Ec=(t,e)=>{var o;const i=Tl(t.articulacao,e.atual,!0);if(void 0===i||(null===(o=i.situacao)||void 0===o?void 0:o.descricaoSituacao)!==Ds.DISPOSITIVO_ORIGINAL)return t.ui=[],t;if(!(t=>{var e;const o=new Set;return o.add(t.situacao.descricaoSituacao),wc(t.filhos,o),t.alteracoes&&wc(null===(e=t.alteracoes)||void 0===e?void 0:e.filhos,o),1===o.size&&[...o][0]===Ds.DISPOSITIVO_ORIGINAL})(i))return ec(t,{tipo:Sa.ERROR,descricao:"Só é possível suprimir dispositivos que não tenham sofrido modificação."});const n=((t,e)=>{xa(e).forEach((t=>t.situacao=new El(kl(t)))),e.alteracoes&&e.alteracoes.filhos.length>0&&e.alteracoes.filhos.forEach((t=>xa(t).forEach((t=>t.situacao=new El(kl(t))))));const o=new Ku;return o.add(jl.ElementoSuprimido,Pl(e)),o.build()})(t.articulacao,i);return{articulacao:t.articulacao,modo:t.modo,past:Ju(t,n),present:n,future:[],ui:{events:n}}},Oc=function t(e,o,i){var n;if("function"==typeof o&&"function"==typeof i||"function"==typeof i&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof o&&void 0===i&&(i=o,o=void 0),void 0!==i){if("function"!=typeof i)throw new Error("Expected the enhancer to be a function.");return i(t)(e,o)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var r=e,s=o,a=[],l=a,u=!1;function c(){l===a&&(l=a.slice())}function d(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return s}function p(t){if("function"!=typeof t)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var e=!0;return c(),l.push(t),function(){if(e){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");e=!1,c();var o=l.indexOf(t);l.splice(o,1),a=null}}}function h(t){if(!ir(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,s=r(s,t)}finally{u=!1}for(var e=a=l,o=0;o<e.length;o++){(0,e[o])()}return t}function f(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");r=t,h({type:or.REPLACE})}function m(){var t,e=p;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new TypeError("Expected the observer to be an object.");function o(){t.next&&t.next(d())}return o(),{unsubscribe:e(o)}}})[tr]=function(){return this},t}return h({type:or.INIT}),(n={dispatch:h,subscribe:p,getState:d,replaceReducer:f})[tr]=m,n}(function(t){for(var e=Object.keys(t),o={},i=0;i<e.length;i++){var n=e[i];"production"!==process.env.NODE_ENV&&void 0===t[n]&&nr('No reducer provided for key "'+n+'"'),"function"==typeof t[n]&&(o[n]=t[n])}var r,s,a=Object.keys(o);"production"!==process.env.NODE_ENV&&(r={});try{!function(t){Object.keys(t).forEach((function(e){var o=t[e];if(void 0===o(void 0,{type:or.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===o(void 0,{type:or.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+or.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(o)}catch(t){s=t}return function(t,e){if(void 0===t&&(t={}),s)throw s;if("production"!==process.env.NODE_ENV){var i=function(t,e,o,i){var n=Object.keys(e),r=o&&o.type===or.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(0===n.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!ir(t))return"The "+r+' has unexpected type of "'+{}.toString.call(t).match(/\s([a-z|A-Z]+)/)[1]+'". Expected argument to be an object with the following keys: "'+n.join('", "')+'"';var s=Object.keys(t).filter((function(t){return!e.hasOwnProperty(t)&&!i[t]}));return s.forEach((function(t){i[t]=!0})),o&&o.type===or.REPLACE?void 0:s.length>0?"Unexpected "+(s.length>1?"keys":"key")+' "'+s.join('", "')+'" found in '+r+'. Expected to find one of the known reducer keys instead: "'+n.join('", "')+'". Unexpected keys will be ignored.':void 0}(t,o,e,r);i&&nr(i)}for(var n=!1,l={},u=0;u<a.length;u++){var c=a[u],d=o[c],p=t[c],h=d(p,e);if(void 0===h){var f=rr(c,e);throw new Error(f)}l[c]=h,n=n||h!==p}return(n=n||a.length!==Object.keys(t).length)?l:t}}({appReducer:(t={},e)=>(e.type,t),elementoReducer:(t={},e)=>{switch(e.type){case"APLICAR_ALTERACOES_EMENDA":return((t,e)=>{const o={articulacao:t.articulacao,modo:t.modo,past:[],present:[],future:[],ui:{events:[]}},i=new Ku;return e.alteracoesEmenda.dispositivosSuprimidos&&(i.add(jl.ElementoSuprimido,[]),e.alteracoesEmenda.dispositivosSuprimidos.forEach((e=>{var o;const n=_a(t.articulacao,e.id);n&&(n.situacao=new El(kl(n)),null===(o=i.get(jl.ElementoSuprimido).elementos)||void 0===o||o.push(kl(n)))}))),e.alteracoesEmenda.dispositivosModificados&&(i.add(jl.ElementoModificado,[]),e.alteracoesEmenda.dispositivosModificados.forEach((e=>{var o;const n=_a(t.articulacao,e.id);n&&(n.situacao=new nc(kl(n)),n.texto=e.texto,null===(o=i.get(jl.ElementoModificado).elementos)||void 0===o||o.push(kl(n)))}))),e.alteracoesEmenda.dispositivosAdicionados&&rc(t,e.alteracoesEmenda).forEach((t=>i.eventos.push(t))),o.ui.events=i.build(),o})(t,e);case"ATUALIZAR_ELEMENTO":return((t,e)=>{var o,i,n,r;const s=Tl(t.articulacao,e.atual,!0);if(void 0===s||s.texto===e.atual.conteudo.texto)return t.ui=[],t;const a=kl(s);s.texto=ga(s)?Da(null!==(n=null===(i=e.atual.conteudo)||void 0===i?void 0:i.texto)&&void 0!==n?n:""):null===(o=e.atual.conteudo)||void 0===o?void 0:o.texto,(null===(r=s.situacao)||void 0===r?void 0:r.descricaoSituacao)===Ds.DISPOSITIVO_ORIGINAL&&(s.situacao=new nc(a));const l=Gu(s);return{articulacao:t.articulacao,modo:t.modo,past:Ju(t,Qu(s,a)),present:l.build(),future:t.future,ui:{events:l.build()}}})(t,e);case"ATUALIZAR_REFERENCIA_ELEMENTO":return uc(t,e);case"ATUALIZAR_TEXTO_ELEMENTO":return((t,e)=>{var o,i,n,r;const s=Tl(t.articulacao,e.atual,!0);if(void 0===s||s.texto===e.atual.conteudo.texto)return t.ui=[],t;const a=kl(s);s.texto=ga(s)?Da(null!==(n=null===(i=e.atual.conteudo)||void 0===i?void 0:i.texto)&&void 0!==n?n:""):null===(o=e.atual.conteudo)||void 0===o?void 0:o.texto,(null===(r=s.situacao)||void 0===r?void 0:r.descricaoSituacao)===Ds.DISPOSITIVO_ORIGINAL&&(s.situacao=new nc(a));const l=new Ku,u=kl(s,!0);u.mensagens=wl(s),((t,e)=>{var o,i;return(null===(i=null===(o=e.atual)||void 0===o?void 0:o.conteudo)||void 0===i?void 0:i.texto)!==t})(s.texto,e)&&l.add(jl.ElementoModificado,[u]),l.add(jl.SituacaoElementoModificada,[u]),l.add(jl.ElementoValidado,Rl(s));const c=Gu(s);return{articulacao:t.articulacao,modo:t.modo,past:Ju(t,Qu(s,a)),present:c.build(),future:[],ui:{events:l.build()}}})(t,e);case"ADICIONAR_ELEMENTO":return oc(t,e);case"AGRUPAR_ELEMENTO":return ic(t,e);case"TRANSFORMAR_TIPO_ELEMENTO":return cc(t,e);case"ELEMENTO_SELECIONADO":return((t,e)=>{const o=Tl(t.articulacao,e.atual,!0);if(void 0===o)return t.ui.events=[],t;o.mensagens=wl(o);const i=kl(o,!0),n=[{stateType:jl.ElementoSelecionado,elementos:[i]}];return{articulacao:t.articulacao,modo:t.modo,past:t.past,present:t.present,future:t.future,ui:{events:n}}})(t,e);case"INFORMAR_NORMA":return((t,e)=>{const o=Tl(t.articulacao,e.atual,!0);if(void 0===o)return t.ui.events=[],t;o.mensagens=wl(o);const i=kl(o,!0),n=[{stateType:jl.InformarNorma,elementos:[i]}];return{articulacao:t.articulacao,modo:t.modo,past:t.past,present:t.present,future:[],ui:{events:n}}})(t,e);case"Mover para baixo":return((t,e)=>{const o=Tl(t.articulacao,e.atual,!0);if(void 0===o)return t.ui=[],t;if(!Fu(o,kr))return ec(t,{tipo:Sa.ERROR,descricao:"Não é possível excluir um dispositivo original mas apenas suprimi-lo."});const i=la(o);if(void 0===i)return t;const n=[...Pl(o),...Pl(i)],r=Dl(o),s=o.pai,a=s.indexOf(o);Bu(o),Bu(i),s.removeFilho(o),s.removeFilho(i),s.addFilhoOnPosition(i,a),s.addFilhoOnPosition(o,a+1),o.pai=s,i.pai=s,s.renumeraFilhos();const l=0===a?xs(i)||ga(o)&&"Artigo"===o.tipo?s.pai:s:oa(i),u=new Ku;return u.setReferencia(kl(zu(l,i))),u.add(jl.ElementoIncluido,wa(i,[]).concat(wa(o,[])).map((t=>(t.mensagens=wl(t),kl(t))))),u.add(jl.ElementoRemovido,n),u.add(jl.ElementoRenumerado,r.map((t=>kl(t)))),u.add(jl.ElementoMarcado,[kl(o),e.atual]),u.add(jl.ElementoSelecionado,[kl(o)]),{articulacao:t.articulacao,modo:t.modo,past:Ju(t,u.build()),present:u.build(),future:[],ui:{events:u.build()}}})(t,e);case"Mover para cima":return((t,e)=>{var o;const i=Tl(t.articulacao,e.atual,!0);if(void 0===i)return t.ui=[],t;if(!Fu(i,Pr))return ec(t,{tipo:Sa.ERROR,descricao:"Não é possível excluir um dispositivo original mas apenas suprimi-lo."});const n=na(i);if(void 0===n)return t;const r=[...Pl(n),...Pl(i)],s=Dl(i),a=i.pai,l=a.indexOf(n);Bu(n),Bu(i),a.removeFilho(n),a.removeFilho(i),a.addFilhoOnPosition(i,l),a.addFilhoOnPosition(n,l+1),i.pai=a,n.pai=a,a.renumeraFilhos();const u=0===l?(null===(o=i.pai)||void 0===o?void 0:o.tipo)===ar.caput.tipo||ga(i)&&"Artigo"===i.tipo?a.pai:a:oa(i),c=new Ku;return c.setReferencia(kl(zu(u,i))),c.add(jl.ElementoIncluido,wa(i,[]).concat(wa(n,[])).map((t=>(t.mensagens=wl(t),kl(t))))),c.add(jl.ElementoRemovido,r),c.add(jl.ElementoRenumerado,s.map((t=>kl(t)))),c.add(jl.ElementoMarcado,[kl(i),e.atual]),c.add(jl.ElementoSelecionado,[kl(i)]),{articulacao:t.articulacao,modo:t.modo,past:Ju(t,c.build()),present:c.build(),future:[],ui:{events:c.build()}}})(t,e);case"RENUMERAR_ELEMENTO":return((t,e)=>{var o;const i=Tl(t.articulacao,e.atual,!0);if(void 0===i)return t.ui=[],t;if(!Fu(i,Dr))return ec(t,{tipo:Sa.INFO,descricao:"Nessa situação, não é possível renumerar o dispositivo"});const n=Ju(t,Qu(i));try{i.createNumeroFromRotulo(null===(o=e.novo)||void 0===o?void 0:o.numero)}catch(e){return ec(t,{tipo:Sa.ERROR,descricao:"O rótulo informado é inválido",detalhe:e})}i.createRotulo(i);const r=Gu(i);return{articulacao:t.articulacao,modo:t.modo,past:n,present:r.build(),future:t.future,ui:{events:r.build()}}})(t,e);case"RESTAURAR_ELEMENTO":return xc(t,e);case"SUPRIMIR_ELEMENTO":return Ec(t,e);case"ABRIR_ARTICULACAO":return Ml(0,e);case"REDO":return(t=>{var e;if(void 0===t.future||0===t.future.length)return t.ui=[],t;const o=t.future.pop(),i={articulacao:t.articulacao,modo:t.modo,past:Ju(t,o),present:[],future:t.future,ui:{events:[]}},n=new Ku;n.add(jl.ElementoRemovido,fc(t,Zu(o,jl.ElementoRemovido))),n.add(jl.ElementoIncluido,hc(t,Zu(o,jl.ElementoIncluido),Zu(n.eventos,jl.ElementoIncluido))),n.add(jl.ElementoModificado,vc(t,Zu(o,jl.ElementoModificado),!0)),n.add(jl.ElementoSuprimido,mc(t,Zu(o,jl.ElementoSuprimido),Zu(n.eventos,jl.ElementoSuprimido),El)),n.add(jl.ElementoRenumerado,gc(t,Zu(o,jl.ElementoRenumerado))),n.add(jl.ElementoValidado,bc(t,o));const r=null===(e=Zu(o,jl.ElementoMarcado))||void 0===e?void 0:e.elementos;return r&&(n.add(jl.ElementoMarcado,r),n.add(jl.ElementoSelecionado,[r[0]])),i.ui.events=n.build(),i.present=n.build(),i})(t);case"REMOVER_ELEMENTO":return yc(t,e);case"SHIFT_TAB":case"TAB":return((t,e)=>{const o=Tl(t.articulacao,e.atual,!0);if(void 0===o)return t.ui=[],t;const i="TAB"===e.type?o.getAcaoPossivelTab(o):o.getAcaoPossivelShiftTab(o);if(!i)return t.ui=[],t;const n={type:"TRANSFORMAR_TIPO_ELEMENTO",subType:i.nomeAcao,atual:e.atual,novo:{tipo:i.tipo}};return cc(t,n)})(t,e);case"UNDO":return(t=>{var e;if(void 0===t.past||0===t.past.length)return t.ui=[],t;const o=t.past.pop(),i={articulacao:t.articulacao,modo:t.modo,past:t.past,present:[],future:tc(t,o),ui:{events:[]}},n=new Ku;n.add(jl.ElementoRemovido,fc(t,Zu(o,jl.ElementoIncluido))),n.add(jl.ElementoIncluido,hc(t,Zu(o,jl.ElementoRemovido),Zu(n.eventos,jl.ElementoIncluido))),n.add(jl.ElementoRestaurado,mc(t,Zu(o,jl.ElementoSuprimido),Zu(n.eventos,jl.ElementoRestaurado),ju)),n.add(jl.ElementoModificado,vc(t,Zu(o,jl.ElementoModificado))),n.add(jl.ElementoRenumerado,gc(t,Zu(o,jl.ElementoRenumerado))),n.add(jl.ElementoValidado,bc(t,o));const r=null===(e=Zu(o,jl.ElementoMarcado))||void 0===e?void 0:e.elementos;return r&&(n.add(jl.ElementoMarcado,[r[1],r[0]]),n.add(jl.ElementoSelecionado,[r[1]])),i.ui.events=n.build(),i.present=n.build(),i})(t);case"VALIDAR_ELEMENTO":return((t,e)=>{const o=Tl(t.articulacao,e.atual,!0);if(void 0===o)return t.ui=[],t;o.mensagens=wl(o);const i=kl(o,!0),n=[{stateType:jl.ElementoValidado,elementos:[i]}];return{articulacao:t.articulacao,modo:t.modo,past:t.past,present:t.present,future:t.future,ui:{events:n}}})(t,e);case"VALIDAR_ARTICULACAO":return(t=>{const e=[];wa(t.articulacao,[]).forEach((t=>{const o=wl(t);(null==o?void 0:o.length)>0&&(t.mensagens=o,e.push(kl(t)))}));const o=[{stateType:jl.ElementoValidado,elementos:e}];return{articulacao:t.articulacao,modo:t.modo,past:t.past,present:t.present,future:t.future,ui:{events:o}}})(t);default:return t}}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());let Ac=class extends(Jn(Oc)(Gn)){constructor(){super(),this.elementos=[],this.tabIndex=-1}createRenderRoot(){return this}render(){return Sn`
      <style>
        lexml-eta-editor {
          display: block;
          height: 100%;
        }

        lexml-eta-editor:focus {
          outline: 0;
          border: 0px solid #f1f1f1;
          -webkit-box-shadow: 0px;
          box-shadow: none;
        }
      </style>
      <lexml-eta-editor></lexml-eta-editor>
    `}};Wi([Xn({type:Array})],Ac.prototype,"elementos",void 0),Ac=Wi([Wn("lexml-eta-articulacao")],Ac);
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const _c=2;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
class qc extends class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,o){this._$Ct=t,this._$AM=e,this._$Ci=o}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}{constructor(t){if(super(t),this.it=Nn,t.type!==_c)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===Nn||null==t)return this.ft=void 0,this.it=t;if(t===kn)return t;if("string"!=typeof t)throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this.ft;this.it=t;const e=[t];return e.raw=e,this.ft={_$litType$:this.constructor.resultType,strings:e,values:[]}}}qc.directiveName="unsafeHTML",qc.resultType=1;const Ic=(t=>(...e)=>({_$litDirective$:t,values:e}))(qc);let Sc=class extends Gn{update(t){super.update(t)}buildTemplateComando(t){const e=null==t?void 0:t.reduce(((t,e)=>t+`<p> ${e.cabecalho} </p>`),"");return Sn`${e}`}buildTemplateCitacao(t){return t.replaceAll("<Rotulo>","<b>").replaceAll("</Rotulo>","</b> ").replaceAll("<Alteracao>",'<div class="alteracao">').replaceAll("</Alteracao>","</div> ").replaceAll("<Omissis/>"," ..........................................................")}render(){var t,e,o;const i=null===(t=this.emenda)||void 0===t?void 0:t.comandos;return Sn`
      <style>
        .lexml-emenda-comando {
          display: block;
          border: 1px solid #ccc;
          height: 100%;
          padding: 0 10px;
          margin: 0px 5px;
          font-size: 14px;
        }

        .lexml-emenda-comando:focus {
          outline: 0;
          border: 0px solid #f1f1f1;
          -webkit-box-shadow: 0px;
          box-shadow: none;
        }

        .lexml-emenda-tituloComando {
          margin: 3px 10px;
          text-align: center;
          font-weight: bold;
        }

        .lexml-emenda-cabecalhoComando {
          display: block;
          margin-top: 1em;
          text-align: justify;
          text-indent: 3em;
        }

        .lexml-emenda-citacaoComando {
          display: block;
          margin-top: 1em;
        }

        .lexml-emenda-citacaoComando p {
          text-align: justify;
          text-indent: 3em;
          margin: 0;
        }

        .lexml-emenda-citacaoComando div.alteracao {
          margin-left: 4em;
        }

        .lexml-emenda-citacaoComando div.alteracao p {
          text-indent: 2em;
        }
      </style>

      <div class="lexml-emenda-comando">
        <p class="lexml-emenda-tituloComando">Comando de emenda</p>
        <p>${null===(o=null===(e=this.emenda)||void 0===e?void 0:e.comandoEmenda)||void 0===o?void 0:o.cabecalhoComum}</p>

        ${null==i?void 0:i.map((t=>Sn`
            ${Ic('<div class="lexml-emenda-cabecalhoComando">'+t.cabecalho+'</div><div class="lexml-emenda-citacaoComando">'+this.buildTemplateCitacao(t.citacao)+"</div>")}
          `))}
      </div>
    `}};Wi([Xn({type:Object})],Sc.prototype,"emenda",void 0),Sc=Wi([Wn("lexml-emenda-comando")],Sc);class kc extends class{}{constructor(){super(...arguments),this.nivel=0,this.rotulo="",this.agrupador=!1,this.editavel=!0,this.sendoEditado=!1,this.index=0}}const Nc=(t,e)=>new Fr(ar[e.toLowerCase()],"Transformar "+t.tipo+"em "+ar[e.toLowerCase()].name,"transformar"+t.tipo+"Em"+ar[e.toLowerCase()].name).execute(t),Pc=Quill.import("blots/block");class Tc extends Pc{get linha(){return this.parent.parent.parent}get tamanho(){return this.length()-1}get tagName(){return this.domNode.tagName}get html(){return"<br>"!==this.domNode.innerHTML?this.domNode.innerHTML.replace("&nbsp;",""):""}set html(t){this.domNode.innerHTML=t}constructor(t){super(t)}}var Cc;!function(t){t[t.Esquerda=0]="Esquerda",t[t.Direita=1]="Direita"}(Cc||(Cc={}));class Rc extends Tc{constructor(){super(Rc.create())}static create(){const t=super.create();return t.setAttribute("contenteditable","false"),t.setAttribute("class",Rc.className),t}}Rc.blotName="blotMenu",Rc.tagName="DIV",Rc.className="lx-eta-dropdown";class Dc extends Tc{constructor(){super(Dc.create())}static create(){const t=super.create();return t.setAttribute("contenteditable","false"),t.setAttribute("class",Dc.className),t.innerHTML="&vellip;",t}}Dc.blotName="blotMenuBotao",Dc.tagName="DIV",Dc.className="lx-eta-dropbtn";class Lc extends Tc{constructor(t){super(Lc.create(t))}static create(t){const e=super.create(),o=t===Cc.Esquerda?"":" lx-eta-dropdown-content-right";return e.setAttribute("contenteditable","false"),e.setAttribute("class",Lc.className+o),e}}Lc.blotName="blotMenuConteudo",Lc.tagName="DIV",Lc.className="lx-eta-dropdown-content";class jc extends Tc{constructor(t,e){super(jc.create(t,e))}static create(t,e){var o;const i=super.create();return i.setAttribute("contenteditable","false"),i.setAttribute("class",jc.className),i.innerHTML=null!==(o=t.descricao)&&void 0!==o?o:"",i.addEventListener("mousedown",(()=>{var o;if(t.descricao==Sr.descricao){const t=null===(o=document.getSelection())||void 0===o?void 0:o.focusOffset;localStorage.setItem("indexCursor",JSON.stringify(t))}e(t.descricao)})),i}}jc.blotName="blotMenuItem",jc.tagName="DIV",jc.className="lx-eta-dropdown-content-item";class Mc extends Tc{constructor(t){super(Mc.create(t))}static create(t){const e=super.create();return e.setAttribute("contenteditable","false"),e.setAttribute("class",Mc.getClasseCSS(t.agrupador)),e.setAttribute("data-rotulo",t.rotulo),e.innerHTML="",e}get rotulo(){return this.domNode.getAttribute("data-rotulo")}format(t,e){t===Mc.blotName?this.domNode.setAttribute("data-rotulo",e):t===Mc.formatoStyle?this.domNode.setAttribute("style",Mc.criarAtributoStyle(e)):super.format(t,e)}static criarAtributoStyle(t){let e="Articulacao"===t.tipo?"color: #373634; font-weight: 600; line-height: 0.42;":"color: #373634; font-weight: 600; line-height: 1.42;";return e=t.agrupador?`${e} display: block; font-size: 1rem; text-align: center;`:`${e} float: left; margin-right: 10px;`,e}static getClasseCSS(t){return"texto__rotulo"+(t?" texto__rotulo--agrupador":" texto__rotulo--padrao")}}Mc.blotName="rotulo",Mc.tagName="LABEL",Mc.formatoStyle="STYLE";class Fc extends Tc{constructor(){super(Fc.create())}static create(){const t=super.create();return t.setAttribute("contenteditable","false"),t.innerHTML="&nbsp;",t}}Fc.blotName="espaco",Fc.tagName="ESPACO",Fc.className="espaco";const Uc=Quill.import("blots/container");class $c extends Uc{constructor(t){var e,o,i,n,r;super($c.create(t)),this._lexmlId=null!==(e=t.lexmlId)&&void 0!==e?e:"",this._editavel=t.editavel,this._nivel=t.nivel,this._numero=null!==(o=t.numero)&&void 0!==o?o:"",this._tipo=null!==(i=t.tipo)&&void 0!==i?i:"",this._agrupador=t.agrupador,this._hierarquia=(null===(r=null===(n=t.hierarquia)||void 0===n?void 0:n.pai)||void 0===r?void 0:r.uuidAlteracao)?t.hierarquia:void 0,this._descricaoSituacao=t.descricaoSituacao?t.descricaoSituacao:void 0}static criarId(t){return`lxEtaId${null!=t?t:0}`}static create(t){const e=super.create();return e.setAttribute("contenteditable",(null==t?void 0:t.editavel)?"true":"false"),e.setAttribute("class",$c.className+" "+$c.getClasseCSS(t)),e.setAttribute("id",$c.criarId(t.uuid)),e.setAttribute("cellpadding","0"),e.setAttribute("cellspacing","0"),e.setAttribute("border","0"),e}get blotRotulo(){var t,e;return null===(e=null===(t=this.children.head)||void 0===t?void 0:t.children)||void 0===e?void 0:e.head.children.head}get blotConteudo(){var t;return null===(t=this.blotRotulo)||void 0===t?void 0:t.next}get containerDireito(){return this.children.head.children.tail}get blotContainerDireito(){return this.containerDireito.children.head}get tamanho(){return this.length()-1}get id(){var t;return null!==(t=this.domNode.getAttribute("id"))&&void 0!==t?t:""}set agrupador(t){this._agrupador=t}get agrupador(){return this._agrupador}set editavel(t){this._editavel=t,this.blotConteudo.domNode.contentEditable=this._editavel}get editavel(){return this._editavel}set hierarquia(t){this._hierarquia=t}get hierarquia(){return this._hierarquia}set nivel(t){this._nivel=t}get nivel(){return this._nivel}set numero(t){this._numero=t}get numero(){return this._numero}set tipo(t){this._tipo=t}get tipo(){return this._tipo}set descricaoSituacao(t){this._descricaoSituacao=t}get descricaoSituacao(){return this._descricaoSituacao}get uuid(){return parseInt(this.id.substr(7),0)}set lexmlId(t){this._lexmlId=t}get lexmlId(){var t;return null!==(t=this._lexmlId)&&void 0!==t?t:""}get html(){return"<br>"!==this.domNode.innerHTML?this.domNode.innerHTML:""}set html(t){this.domNode.innerHTML=t}setEstilo(t){let e="",o="texto__dispositivo";switch(t){case Ds.DISPOSITIVO_ADICIONADO:e="dispositivo--adicionado";break;case Ds.DISPOSITIVO_MODIFICADO:e="dispositivo--modificado";break;case Ds.DISPOSITIVO_SUPRIMIDO:e="dispositivo--suprimido",o="texto--suprimido"}this.blotRotulo.domNode.setAttribute("class",`${Mc.getClasseCSS(this._agrupador)} ${e}`),this.blotConteudo.domNode.setAttribute("class",`${e} ${o}`)}format(t,e){t===$c.blotName?this.domNode.setAttribute("style",$c.criarAtributoStyle(e)):super.format(t,e)}ativarBorda(){this.domNode.classList.add("container__elemento--ativo")}desativarBorda(){this.domNode.classList.remove("container__elemento--ativo"),this.limparContainerDireito()}limparContainerDireito(){this.blotContainerDireito.tagName!==Fc.tagName&&(this.blotContainerDireito.remove(),(new Fc).insertInto(this.containerDireito))}static criarAtributoStyle(t){let e="Articulacao"===t.tipo?"width: 100%; min-height: 1px; line-height: 0.42; margin: 1px":"width: 100%; min-height: 26px; border: 1px solid #ffffff; line-height: 1.42; margin: 0px 2px 0px 5px !important;";return t.agrupador&&(e=`${e} text-align: center;`),e}static getClasseCSS(t){let e="Articulacao"===t.tipo?"container__elemento--articulacao":"container__elemento--padrao";return t.agrupador&&(e=`${e} agrupador`),e}}function Bc(t){t.stopPropagation(),t.preventDefault()}$c.blotName="containerTable",$c.tagName="DIV",$c.className="container__elemento";class zc{constructor(t,e){this.callback=t,this.canceled=e}isCanceled(){var t;return null!==(t=this.canceled)&&void 0!==t&&t}cancel(){this.canceled=!0}}class Vc{constructor(){this.subscriptions=[]}subscribe(t){const e=new zc(t);return this.subscriptions.push(e),e}notify(t){this.subscriptions.forEach((e=>{e.isCanceled()||setTimeout((()=>{e.callback(t)}),1)}))}clean(){this.subscriptions=[]}}const Hc=/([a-zA-Z0-9áéíóúÁÉÍÓÚãẽĩõũÃẼĨÕŨàèìòùÀÈÌÒÙäëïöüÄËÏÖÜâêîôûÂÊÎÔÛçÇýÝỹỸỳỲÿŸŶŷñÑ '!@#$%&*()_\-+=`'{[^~}\]<,>.:;?/|\\ªº¹²³£¢¬§¿¡“”])/i,Kc=/([^a-zA-Z0-9áéíóúÁÉÍÓÚãẽĩõũÃẼĨÕŨàèìòùÀÈÌÒÙäëïöüÄËÏÖÜâêîôûÂÊÎÔÛçÇýÝỹỸỳỲÿŸŶŷñÑ '!@#$%&*()_\-+=`'{[^~}\]<,>.:;?/|\\ªº¹²³£¢¬§¿¡“”])/gi,Gc=Quill.import("modules/keyboard");class Qc extends Gc{constructor(t,e){super(t,e),this.operacaoTecladoInvalida=new Vc,this.adicionaElementoTeclaEnter=new Vc,this.removeElemento=new Vc,this.renumeraElemento=new Vc,this.transformaElemento=new Vc,this.moveElemento=new Vc,this.onChange=new Vc,this.altGraphPressionado=!1}listen(){this.quill.root.addEventListener("keyup",(t=>{"AltGraph"===t.key&&(this.altGraphPressionado=!1),!t.ctrlKey||t.altKey||t.shiftKey||!"biBI".includes(t.key)?this.quill.cursorDeTextoEstaSobreLink()||"Backspace"===t.key&&this.quill.cursorDeTextoEstaSobreLink(-1)||!this.isTeclaQueAlteraTexto(t)||this.onChange.notify("keyboard"):this.onHotKeyToolbar()})),this.quill.root.addEventListener("keypress",(t=>{this.quill.cursorDeTextoEstaSobreLink()&&1===t.key.length&&Bc(t)})),this.quill.root.addEventListener("keydown",(t=>{if("AltGraph"===t.key&&(this.altGraphPressionado=!0),this.quill.cursorDeTextoEstaSobreLink()||"Backspace"===t.key&&this.quill.cursorDeTextoEstaSobreLink(-1)){if(["Delete","Backspace"].includes(t.key)||!t.ctrlKey&&1===t.key.length||t.ctrlKey&&"xvXV".includes(t.key)||t.altKey&&"0123456789".includes(t.key))return void Bc(t)}else t.ctrlKey?(t.altKey||t.metaKey||("Home"===t.key?this.onTeclaHome(t):"End"===t.key?this.onTeclaEnd(t):"ArrowUp"===t.key||"ArrowDown"===t.key?this.onHotKeyMover(t):"a"!==t.key.toLowerCase()||t.shiftKey?"d"===t.key.toLowerCase()?this.onTeclaCtrlD(t):"z"===t.key.toLowerCase()?this.onTeclaCtrlZ(t):"y"===t.key.toLowerCase()?this.onTeclaCtrlY(t):t.ctrlKey&&t.shiftKey&&"a"===t.key.toLowerCase()?this.onTeclaCtrlShiftA(t):"b"!==t.key&&"i"!==t.key&&"x"!==t.key&&"v"!==t.key||this.onValidarTecla(t):this.onTeclaCtrlA(t)),(t.altKey||t.metaKey)&&(["a","l","n","o","p","t"].includes(t.key.toLowerCase())?this.onHotKeyTransformacaoTipo(t):"r"===t.key.toLowerCase()&&this.onHotKeyRenumeraDispositivo(t))):"ArrowRight"===t.key?this.onTeclaArrowRight(t):"ArrowLeft"===t.key?this.onTeclaArrowLeft(t):"ArrowDown"===t.key||"ArrowUp"===t.key?this.onTeclaArrowDownOuUp(t):"Enter"===t.key?this.onTeclaEnter(t):"Escape"===t.key?this.onTeclaEscape(t):"Delete"===t.key?this.onTeclaDelete(t):"Backspace"===t.key?this.onTeclaBackspace(t):"Tab"===t.key?this.onTeclaTab(t):1===t.key.length&&Hc.test(t.key)&&this.onValidarTecla(t)})),super.listen()}isTeclaComCaracterGrafico(t){return 3!==t.location&&"123456=[]/".includes(t.key)}isTeclaQueAlteraTexto(t){return!(t.ctrlKey||t.altKey||t.metaKey)&&(!(this.altGraphPressionado&&!this.isTeclaComCaracterGrafico(t))&&!(!["Delete","Backspace"].includes(t.key)&&1!==t.key.length))}verificarOperacaoTecladoPermitida(){const t=this.quill.textoSelecionado;if(t.conteudo&&t.quantidadeCR>0){if(1===t.quantidadeCR&&/\n$/gi.test(t.conteudo)){const t=this.quill.getSelection(!0);return this.quill.setSelection(t.index,t.length-1,Quill.sources.API),!0}return this.operacaoTecladoInvalida.notify(),!1}return!0}onTeclaArrowRight(t){const e=this.quill.getSelection(!0),[o,i]=this.quill.getLine(e.index);i===o.tamanho&&(o.linha.next&&this.quill.setIndex(this.quill.getIndex(o.linha.next.blotConteudo),Quill.sources.USER),Bc(t))}onTeclaArrowLeft(t){const e=this.quill.getSelection(!0),[o,i]=this.quill.getLine(e.index);if(0===i){if(o.linha.prev){const t=o.linha.prev,e=this.quill.getIndex(t.blotConteudo)+t.blotConteudo.tamanho;this.quill.setIndex(e,Quill.sources.USER)}Bc(t)}}onTeclaArrowDownOuUp(t){this.quill.isProcessandoMudancaLinha&&Bc(t)}onTeclaEnter(t){if(this.verificarOperacaoTecladoPermitida()){const t=this.quill.getSelection(!0);this.quill.setSelection(t.index,0,Quill.sources.SILENT),this.adicionaElementoTeclaEnter.notify(t)}Bc(t)}onTeclaEscape(t){const e=this.quill.getSelection(!0);this.quill.setIndex(e.index,Quill.sources.SILENT),this.quill.setSelection(this.quill.inicioConteudoAtual,0,Quill.sources.SILENT),Bc(t)}onTeclaDelete(t){const e=this.quill.getSelection(!0);this.verificarOperacaoTecladoPermitida()&&e.index!==this.quill.fimConteudoAtual||Bc(t)}onTeclaBackspace(t){const e=this.quill.getSelection(!0);(!this.verificarOperacaoTecladoPermitida()||e.index===this.quill.inicioConteudoAtual&&0===e.length)&&Bc(t)}onValidarTecla(t){this.verificarOperacaoTecladoPermitida()||Bc(t)}onTeclaHome(t){const e=this.quill.getIndex(this.quill.getPrimeiraLinha().blotConteudo);this.quill.setIndex(e,Quill.sources.USER),this.quill.scroll.domNode.scrollTo(0,0),Bc(t)}onTeclaEnd(t){var e,o;const i=null!==(o=this.quill.getIndex(this.quill.getUltimaLinha().blotConteudo)+(null===(e=this.quill.getUltimaLinha().blotConteudo)||void 0===e?void 0:e.tamanho))&&void 0!==o?o:0;this.quill.setIndex(i,Quill.sources.USER),this.quill.scroll.domNode.scrollTo(0,this.quill.scroll.domNode.scrollHeight),Bc(t)}onTeclaCtrlD(t){this.removeElemento.notify(),Bc(t)}onTeclaTab(t){this.transformaElemento.notify(t),Bc(t)}onTeclaCtrlZ(t){this.quill.undo(),Bc(t)}onTeclaCtrlY(t){this.quill.redo(),Bc(t)}onTeclaCtrlA(t){const e=this.quill.getIndex(this.quill.scroll.children.head.blotConteudo);this.quill.setSelection(e,this.quill.getLength(),Quill.sources.SILENT),Bc(t)}onTeclaCtrlShiftA(t){this.quill.setSelection(this.quill.inicioConteudoAtual,this.quill.linhaAtual.blotConteudo.tamanho,Quill.sources.SILENT),Bc(t)}onHotKeyRenumeraDispositivo(t){this.renumeraElemento.notify(t),Bc(t)}onHotKeyMover(t){this.moveElemento.notify(t),Bc(t)}onHotKeyTransformacaoTipo(t){this.transformaElemento.notify(t),Bc(t)}onHotKeyToolbar(){var t;(null===(t=document.getSelection())||void 0===t?void 0:t.toString())&&this.onChange.notify("toolbar(hotkey)")}}class Wc extends Tc{constructor(t){super(Wc.create(t)),this._htmlAnt=""}static create(t){var e,o;const i=super.create(),n=(null!==(o=null===(e=t.conteudo)||void 0===e?void 0:e.texto)&&void 0!==o?o:"").trim();return i.setAttribute("contenteditable",(null==t?void 0:t.editavel)?"true":"false"),i.innerHTML=""!==n?n:"<br>",i}set htmlAnt(t){this._htmlAnt=t}get htmlAnt(){return this._htmlAnt}get alterado(){return this._htmlAnt!==this.html}}Wc.blotName="texto",Wc.tagName="P",Wc.className="texto__dispositivo";class Zc extends Tc{constructor(t){super(Zc.create(t))}static create(t){const e=super.create();let o="";return o=t.tipo===Sa.INFO?"mensagem--info":t.tipo===Sa.WARNING?"mensagem--warning":"mensagem--danger",e.setAttribute("contenteditable","false"),e.classList.add(o),e.innerHTML=t.descricao?"- "+t.descricao:"",e}}Zc.blotName="mensagem",Zc.tagName="div",Zc.className="mensagem";class Xc extends Tc{constructor(){super(Xc.create())}static create(){const t=super.create();return t.setAttribute("contenteditable","false"),t.setAttribute("style","font-size: 0.8em;"),t}}Xc.blotName="mensagens",Xc.tagName="MENSAGENS";const Yc=Quill.import("modules/clipboard");class Jc extends Yc{constructor(t,e){super(t,e),this.onChange=new Vc,this.quill.root.addEventListener("cut",(t=>{var e;if(this.quill.cursorDeTextoEstaSobreLink())return void Bc(t);(null===(e=document.getSelection())||void 0===e?void 0:e.toString())&&this.onChange.notify("clipboard")})),this.quill.root.addEventListener("paste",(t=>{var e;if(this.quill.cursorDeTextoEstaSobreLink())return void Bc(t);(null===(e=t.clipboardData)||void 0===e?void 0:e.getData("text/plain"))&&this.onChange.notify("clipboard")}))}convert(t){if("string"==typeof t)return this.container.innerHTML=t,super.convert();this.container.innerHTML=this.container.innerHTML.replace(Kc,""),this.container.innerHTML=this.container.innerHTML.replace(/(<p\s*)/gi," <p"),this.container.innerHTML=this.container.innerHTML.replace(/(<br\s*\/>)/gi," "),this.container.innerHTML=this.container.innerHTML.replace(/<(?!strong)(?!\/strong)(?!em)(?!\/em)(?!sub)(?!\/sub)(?!sup)(?!\/sup)(.*?)>/gi,""),this.container.innerHTML=this.container.innerHTML.replace(/<([a-z]+) .*?=".*?( *\/?>)/gi,"<$1$2");const e=super.convert();return this.container.innerHTML="",e}}const td=Quill.import("blots/container");class ed extends td{constructor(t){super(ed.create()),this.alinhamentoMenu=t}static create(){const t=super.create();return t.setAttribute("contenteditable","false"),t.setAttribute("class",ed.className),t}}ed.blotName="containerTdDireito",ed.tagName="DIV",ed.className="container__menu";const od=Quill.import("blots/container");class id extends od{constructor(t){super(id.create(t))}static create(t){const e=super.create();e.setAttribute("contenteditable",t.editavel?"true":"false"),e.setAttribute("class",id.className+" container__texto--nivel"+t.nivel);const o=Number(getComputedStyle(document.documentElement).getPropertyValue("--elemento-padding-factor"));if(o){const i=(t.agrupador?0:t.nivel)*o+5;e.setAttribute("style",`padding-left: ${i}px;`)}return e}}id.blotName="containerTdEsquerdo",id.tagName="DIV",id.className="container__texto",id.classLevel="level";const nd=Quill.import("blots/container");class rd extends nd{constructor(t,e){super(rd.create(t,e))}static create(t,e){const o=super.create(),i=e===Cc.Esquerda?" container__linha--reverse":"";return o.setAttribute("contenteditable",t?"true":"false"),o.setAttribute("class",rd.className+i),o}}rd.blotName="containerTr",rd.tagName="DIV",rd.className="container__linha";class sd extends Quill{constructor(t,e){super(t,e)}getConteudoHtml(t,e,o){const i=this.scroll.children.head;return this.setConteudo(this.converterHtmlParaDelta(t),Quill.sources.SILENT),this.deleteText(e+o,i.length()-o-1,Quill.sources.SILENT),e>0&&this.deleteText(0,e,Quill.sources.SILENT),i.domNode.innerHTML}converterHtmlParaDelta(t){return this.clipboard.convert(null!=t?t:"")}converterDeltaParaHtml(t){return this.setConteudo(t,Quill.sources.SILENT),this.scroll.children.head.domNode.innerHTML}setConteudo(t,e){var o;const i=this.scroll.children.head;let n=0;i.length()>1&&this.deleteText(n,i.length()-1,null!=e?e:Quill.sources.SILENT),this.insertText(n," ",Quill.sources.SILENT),null===(o=t.ops)||void 0===o||o.forEach((t=>{t.attributes?this.insertText(n,t.insert,t.attributes,null!=e?e:Quill.sources.SILENT):this.insertText(n,t.insert,null!=e?e:Quill.sources.SILENT),n+=t.insert.length})),this.deleteText(n,1,Quill.sources.SILENT)}}class ad extends Quill{constructor(t,e,o){super(t,o),this._undoEstruturaVazio=!0,this._redoEstruturaVazio=!0,this._processandoMudancaLinha=!1,this.undoRedoEstrutura=new Vc,this.elementoSelecionado=new Vc,this.aspasAberta=!1,this.observableSelectionChange=new Vc,this.onSelectionChange=(t,e)=>{const o=this.linhaAtual;this._mudouDeLinha=this.verificarMudouLinha(t,e),this._mudouDeLinha&&(this.observableSelectionChange.notify(o),this.aspasAberta=!1,this.limparHistory())},this.onTextChange=()=>{this._linhaAtual&&setTimeout((()=>{this.acertarAspas()}),0)},this.on("text-change",this.onTextChange),this.on("selection-change",this.onSelectionChange),this.buffer=new sd(e,{}),this.root.addEventListener("dragstart",(t=>{t.preventDefault()})),this.root.addEventListener("drop",(t=>{t.preventDefault()}))}get mudouDeLinha(){var t;return null!==(t=this._mudouDeLinha)&&void 0!==t&&t}get linhaAnterior(){return this._linhaAnterior}get linhaAtual(){return this._linhaAtual}get inicioConteudoAtual(){return this.getIndex(this.linhaAtual.blotConteudo)}get fimConteudoAtual(){return this.inicioConteudoAtual+this.linhaAtual.blotConteudo.tamanho}get textoSelecionado(){var t,e,o;const i=null!==(t=this.getSelection(!0))&&void 0!==t?t:{index:0,length:0},n=this.getText().substr(i.index,i.length);return{conteudo:n,quantidadeCR:null!==(o=null===(e=n.match(/(\n)/gi))||void 0===e?void 0:e.length)&&void 0!==o?o:0}}get isUndoEstruturaVazio(){return this._undoEstruturaVazio}set undoEstruturaVazio(t){this._undoEstruturaVazio=t}get isRedoEstruturaVazio(){return this._redoEstruturaVazio}set redoEstruturaVazio(t){this._redoEstruturaVazio=t}get isProcessandoMudancaLinha(){return this._processandoMudancaLinha}set processandoMudancaLinha(t){this._processandoMudancaLinha=t}static configurar(){const t=ad.import("parchment"),e=new t.Attributor.Attribute("id","id",{scope:t.Scope.BLOCK}),o=new t.Attributor.Style("paddingLeft","padding-left",{scope:t.Scope.BLOCK}),i=new t.Attributor.Style("border","border",{scope:t.Scope.BLOCK}),n=new t.Attributor.Style("borderColor","border-color",{scope:t.Scope.BLOCK}),r=new t.Attributor.Style("display","display",{scope:t.Scope.BLOCK}),s=new t.Attributor.Style("aria-label","aria-label",{scope:t.Scope.BLOCK}),a=new t.Attributor.Attribute("dataRotulo","data-rotulo",{scope:t.Scope.BLOCK});ad.register("modules/clipboard",Jc,!0),ad.register("modules/keyboard",Qc,!0),ad.register(Wc,!0),ad.register(Fc,!0),ad.register(Zc,!0),ad.register(Xc,!0),ad.register(Dc,!0),ad.register(Lc,!0),ad.register(jc,!0),ad.register(Rc,!0),ad.register(Mc,!0),ad.register($c,!0),ad.register(id,!0),ad.register(ed,!0),ad.register(rd,!0),ad.register(e,!0),ad.register(o,!0),ad.register(i,!0),ad.register(n,!0),ad.register(r,!0),ad.register(s,!0),ad.register(a,!0)}destroi(){var t,e;this.off("text-change",this.onTextChange),this.off("selection-change",this.onSelectionChange),null===(t=this.keyboard)||void 0===t||t.operacaoTecladoInvalida.clean(),null===(e=this.keyboard)||void 0===e||e.adicionaElementoTeclaEnter.clean()}getConteudoHtmlParteLinha(t,e,o){return this.buffer.getConteudoHtml(t.html,e,o)}getPrimeiraLinha(){return this.scroll.children.head}getUltimaLinha(){return this.scroll.children.tail}getLinha(t,e=this.getPrimeiraLinha()){return e.uuid===t?e:e.next?this.getLinha(t,e.next):void 0}getLinhaPorId(t){return Quill.find(this.getHtmlElement($c.criarId(t)),!1)}setIndex(t,e=Quill.sources.USER){var o;const i=null!==(o=this.getSelection(!0))&&void 0!==o?o:{index:0,length:0};t===i.index&&0===i.length||this.setSelection(t,0,e)}setConteudoLinha(t,e,o){var i;let n=this.getIndex(t);t.length()>1&&this.deleteText(n,t.length()-1,null!=o?o:Quill.sources.SILENT),this.insertText(n," ",Quill.sources.SILENT),null===(i=e.ops)||void 0===i||i.forEach((t=>{t.attributes?this.insertText(n,t.insert,t.attributes,null!=o?o:Quill.sources.SILENT):this.insertText(n,t.insert,null!=o?o:Quill.sources.SILENT),n+=t.insert.length})),this.deleteText(n,1,Quill.sources.SILENT)}converterHtmlParaDelta(t){return this.buffer.converterHtmlParaDelta(t)}converterDeltaParaHtml(t){return this.buffer.converterDeltaParaHtml(t)}irProximaLinha(){var t;const e=this.getIndex(null===(t=this._linhaAtual)||void 0===t?void 0:t.next.blotConteudo);this.setSelection(e,0)}desmarcarLinhaAtual(t){this._linhaAnterior=t,null==t||t.desativarBorda()}marcarLinhaAtual(t){"Articulacao"!==t.tipo&&(this.atualizarLinhaCorrente(t),this.elementoSelecionado.notify(t.uuid))}undo(){0===this.history.stack.undo.length?this.isUndoEstruturaVazio||this.undoRedoEstrutura.notify(ad.UNDO):(this.history.undo(),this.focus())}redo(){0===this.history.stack.redo.length?this.isRedoEstruturaVazio||this.undoRedoEstrutura.notify(ad.REDO):(this.history.redo(),this.focus())}limparHistory(){setTimeout((()=>{this.history.clear()}),0)}verificarMudouLinha(t,e){if(e&&0===(null==t?void 0:t.index)&&0===(null==t?void 0:t.length))return this.setSelection(e.index,0),!1;if(t){const o=this.getLine(t.index)[0],i=o.linha;if(o.tagName!==Mc.tagName&&o.tagName!==Fc.tagName&&o.tagName!==Rc.tagName&&o.tagName!==Xc.tagName||this.setSelection(this.getIndex(o.linha.blotConteudo),0,Quill.sources.SILENT),e){const t=this.getLine(e.index)[0];if(t){const e=t.linha;if(i===e)return!1;this.desmarcarLinhaAtual(e)}}return this.marcarLinhaAtual(i),!0}return!1}getHtmlElement(t){return this.root.querySelector(`#${t}`)}acertarAspas(){var t,e;if(this._linhaAtual){const o=this.inicioConteudoAtual,i=null!==(e=this.getText(o,null===(t=this.linhaAtual)||void 0===t?void 0:t.blotConteudo.tamanho))&&void 0!==e?e:"";let n=o;if(i.indexOf('"')>-1)for(let t=0;t<i.length;t++)'"'===i[t]&&(n+=t,this.deleteText(n,1,Quill.sources.SILENT),this.insertText(n,this.aspasAberta?"”":"“",Quill.sources.SILENT),this.aspasAberta=!this.aspasAberta,n=o)}}atualizarLinhaCorrente(t){this.processandoMudancaLinha=!0,this._linhaAtual=t,this._linhaAtual.blotConteudo.htmlAnt=this._linhaAtual.blotConteudo.html,t.ativarBorda(),this.scrollToElemento(t.uuid)}scrollToElemento(t){const e=this.getHtmlElement($c.criarId(t));setTimeout((()=>{this.isInEtaBoxViewport(e)||this.scrollIntoEtaBox(e)}),0)}scrollIntoEtaBox(t){var e;const o=t.offsetTop;null===(e=t.closest(".ql-editor"))||void 0===e||e.scrollTo(0,o)}isInEtaBoxViewport(t){const e=t.getBoundingClientRect(),o=t.closest("#lx-eta-box").getBoundingClientRect().bottom;return e.top>=0&&e.bottom<=o}cursorDeTextoEstaSobreLink(t=0){var e;const o=this.getSelection(!0),i=this.getContents(o.index+t,1).ops;return!!i&&(null===(e=i[0].attributes)||void 0===e?void 0:e.link)}}ad.UNDO="undo",ad.REDO="redo";class ld{static criarContainerLinha(t){const e=new $c(t),o=new rd(t.editavel,this.alinhamentoMenu),i=new id(t),n=new ed(this.alinhamentoMenu);return new Mc(t).insertInto(i),new Wc(t).insertInto(i),(new Fc).insertInto(n),i.insertInto(o),n.insertInto(o),o.insertInto(e),e}static criarContainerMensagens(t){const e=new rd(!1,this.alinhamentoMenu),o=new id(t),i=new ed(this.alinhamentoMenu);return t.mensagens&&t.mensagens.length>0&&t.mensagens.forEach((t=>{new Zc(t).insertInto(o)})),(new Fc).insertInto(i),o.insertInto(e),i.insertInto(e),e}}async function ud(t,e,o,i){var n;const r=document.createElement("elix-dialog"),s=document.createRange().createContextualFragment('\n    <style>\n    h1.normaDiv {\n      font-size: 1em;\n      padding: 0.5em;\n      font-weight: bold;\n    }\n    .normaDiv {\n      display: grid;\n      grid-template-columns: [labels] auto [controls] 1fr;\n      grid-auto-flow: row;\n      grid-gap: .8em;\n      padding: 0.5em;\n    }\n    .normaDiv > label  {\n      grid-column: labels;\n      grid-row: auto;\n    }\n    .normaDiv > input,\n    .normaDiv > select {\n      grid-column: controls;\n      grid-row: auto;\n      padding: 0.5em;\n    }\n  </style>\n  <h1 class="normaDiv">Dados da norma vigente</h1>\n  <div name="normaDiv" class="normaDiv">\n    <label for="tipoNorma">Tipo </label>\n      <select name="tipos" name="tipoNorma" id="tipoNorma">      \n      <option value="decreto">Decreto</option>\n      <option value="decreto-lei">Decreto-Lei</option>\n      <option value="lei" selected>Lei</option>\n      <option value="lei.complementar">Lei Complementar</option>\n      <option value="lei.delegada">Lei Delegada</option>\n      <option value="medida.provisoria">Medida Provisória</option>\n    </select>    \n    <label for="numeroNorma">Número </label>\n    <input type="text" name="numeroNorma" id="numeroNorma" placeholder="8666 (número sem ponto)">\n    <label for="dataNorma">Data</label>\n    <input type="text" name="dataNorma" id="dataNorma" placeholder="21/06/1993">\n\n    <div style="margin-top: 10px;">\n      <button>Ok</button>\n      <button>Cancelar</button>\n    </div>\n    <div class="erro" style="margin-top: 10px; color: red; display: none;"></div>\n\n  </div>\n\n\n  '),a=t.norma?null===(n=Za(t.norma))||void 0===n?void 0:n.urn:void 0,l=t.norma?Xa(t.norma):void 0,u=t.norma?Ya(t.norma):void 0,c=s.querySelector("#tipoNorma"),d=s.querySelector("#numeroNorma"),p=s.querySelector("#dataNorma");a&&(c.value=a),l&&(d.value=l),u&&(p.value=u);const h=s.querySelectorAll("button"),f=h[0],m=h[1],v=s.querySelector(".erro");f.onclick=()=>{const n=((t,e,o,i)=>{var n;return`urn:lex:br:${t}:${e}:${null!==(n=tl(i))&&void 0!==n?n:i};${o}`})("federal",c.value,null==d?void 0:d.value,null==p?void 0:p.value);el(n)?(e.focus(),r.close(),v.style.display="none",t.norma=n,o.dispatch(i.execute(t))):(v.innerText="Dados inválidos",v.style.display="block")},m.onclick=()=>{e.focus(),r.close()},r.appendChild(s),await r.open()}ld.alinhamentoMenu=Cc.Esquerda;const cd=Sn`
  <style>
    /*!
    * Quill Editor v1.3.7
    * https://quilljs.com/
    * Copyright (c) 2014, Jason Chen
    * Copyright (c) 2013, salesforce.com
    */
    .ql-container {
      box-sizing: border-box;
      font-family: Helvetica, Arial, sans-serif;
      font-size: 13px;
      height: 100%;
      margin: 0px;
      position: relative;
    }
    .ql-container.ql-disabled .ql-tooltip {
      visibility: hidden;
    }
    .ql-container.ql-disabled .ql-editor ul[data-checked] > li::before {
      pointer-events: none;
    }
    .ql-clipboard {
      left: -100000px;
      height: 1px;
      overflow-y: hidden;
      position: absolute;
      top: 50%;
    }
    .ql-clipboard p {
      margin: 0;
      padding: 0;
    }
    .ql-editor {
      box-sizing: border-box;
      line-height: 1.42;
      height: 100%;
      outline: none;
      overflow-y: auto;
      padding: 12px 15px;
      tab-size: 4;
      -moz-tab-size: 4;
      text-align: left;
      white-space: pre-wrap;
      word-wrap: break-word;
    }
    .ql-editor > * {
      cursor: text;
    }
    .ql-editor p,
    .ql-editor ol,
    .ql-editor ul,
    .ql-editor pre,
    .ql-editor blockquote,
    .ql-editor h1,
    .ql-editor h2,
    .ql-editor h3,
    .ql-editor h4,
    .ql-editor h5,
    .ql-editor h6 {
      margin: 0;
      padding: 0;
      counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;
    }
    .ql-editor ol,
    .ql-editor ul {
      padding-left: 1.5em;
    }
    .ql-editor ol > li,
    .ql-editor ul > li {
      list-style-type: none;
    }
    .ql-editor ul > li::before {
      content: '\\2022';
    }
    .ql-editor ul[data-checked='true'],
    .ql-editor ul[data-checked='false'] {
      pointer-events: none;
    }
    .ql-editor ul[data-checked='true'] > li *,
    .ql-editor ul[data-checked='false'] > li * {
      pointer-events: all;
    }
    .ql-editor ul[data-checked='true'] > li::before,
    .ql-editor ul[data-checked='false'] > li::before {
      color: #777;
      cursor: pointer;
      pointer-events: all;
    }
    .ql-editor ul[data-checked='true'] > li::before {
      content: '\\2611';
    }
    .ql-editor ul[data-checked='false'] > li::before {
      content: '\\2610';
    }
    .ql-editor li::before {
      display: inline-block;
      white-space: nowrap;
      width: 1.2em;
    }
    .ql-editor li:not(.ql-direction-rtl)::before {
      margin-left: -1.5em;
      margin-right: 0.3em;
      text-align: right;
    }
    .ql-editor li.ql-direction-rtl::before {
      margin-left: 0.3em;
      margin-right: -1.5em;
    }
    .ql-editor ol li:not(.ql-direction-rtl),
    .ql-editor ul li:not(.ql-direction-rtl) {
      padding-left: 1.5em;
    }
    .ql-editor ol li.ql-direction-rtl,
    .ql-editor ul li.ql-direction-rtl {
      padding-right: 1.5em;
    }
    .ql-editor ol li {
      counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;
      counter-increment: list-0;
    }
    .ql-editor ol li:before {
      content: counter(list-0, decimal) '. ';
    }
    .ql-editor ol li.ql-indent-1 {
      counter-increment: list-1;
    }
    .ql-editor ol li.ql-indent-1:before {
      content: counter(list-1, lower-alpha) '. ';
    }
    .ql-editor ol li.ql-indent-1 {
      counter-reset: list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;
    }
    .ql-editor ol li.ql-indent-2 {
      counter-increment: list-2;
    }
    .ql-editor ol li.ql-indent-2:before {
      content: counter(list-2, lower-roman) '. ';
    }
    .ql-editor ol li.ql-indent-2 {
      counter-reset: list-3 list-4 list-5 list-6 list-7 list-8 list-9;
    }
    .ql-editor ol li.ql-indent-3 {
      counter-increment: list-3;
    }
    .ql-editor ol li.ql-indent-3:before {
      content: counter(list-3, decimal) '. ';
    }
    .ql-editor ol li.ql-indent-3 {
      counter-reset: list-4 list-5 list-6 list-7 list-8 list-9;
    }
    .ql-editor ol li.ql-indent-4 {
      counter-increment: list-4;
    }
    .ql-editor ol li.ql-indent-4:before {
      content: counter(list-4, lower-alpha) '. ';
    }
    .ql-editor ol li.ql-indent-4 {
      counter-reset: list-5 list-6 list-7 list-8 list-9;
    }
    .ql-editor ol li.ql-indent-5 {
      counter-increment: list-5;
    }
    .ql-editor ol li.ql-indent-5:before {
      content: counter(list-5, lower-roman) '. ';
    }
    .ql-editor ol li.ql-indent-5 {
      counter-reset: list-6 list-7 list-8 list-9;
    }
    .ql-editor ol li.ql-indent-6 {
      counter-increment: list-6;
    }
    .ql-editor ol li.ql-indent-6:before {
      content: counter(list-6, decimal) '. ';
    }
    .ql-editor ol li.ql-indent-6 {
      counter-reset: list-7 list-8 list-9;
    }
    .ql-editor ol li.ql-indent-7 {
      counter-increment: list-7;
    }
    .ql-editor ol li.ql-indent-7:before {
      content: counter(list-7, lower-alpha) '. ';
    }
    .ql-editor ol li.ql-indent-7 {
      counter-reset: list-8 list-9;
    }
    .ql-editor ol li.ql-indent-8 {
      counter-increment: list-8;
    }
    .ql-editor ol li.ql-indent-8:before {
      content: counter(list-8, lower-roman) '. ';
    }
    .ql-editor ol li.ql-indent-8 {
      counter-reset: list-9;
    }
    .ql-editor ol li.ql-indent-9 {
      counter-increment: list-9;
    }
    .ql-editor ol li.ql-indent-9:before {
      content: counter(list-9, decimal) '. ';
    }
    .ql-editor .ql-indent-1:not(.ql-direction-rtl) {
      padding-left: 3em;
    }
    .ql-editor li.ql-indent-1:not(.ql-direction-rtl) {
      padding-left: 4.5em;
    }
    .ql-editor .ql-indent-1.ql-direction-rtl.ql-align-right {
      padding-right: 3em;
    }
    .ql-editor li.ql-indent-1.ql-direction-rtl.ql-align-right {
      padding-right: 4.5em;
    }
    .ql-editor .ql-indent-2:not(.ql-direction-rtl) {
      padding-left: 6em;
    }
    .ql-editor li.ql-indent-2:not(.ql-direction-rtl) {
      padding-left: 7.5em;
    }
    .ql-editor .ql-indent-2.ql-direction-rtl.ql-align-right {
      padding-right: 6em;
    }
    .ql-editor li.ql-indent-2.ql-direction-rtl.ql-align-right {
      padding-right: 7.5em;
    }
    .ql-editor .ql-indent-3:not(.ql-direction-rtl) {
      padding-left: 9em;
    }
    .ql-editor li.ql-indent-3:not(.ql-direction-rtl) {
      padding-left: 10.5em;
    }
    .ql-editor .ql-indent-3.ql-direction-rtl.ql-align-right {
      padding-right: 9em;
    }
    .ql-editor li.ql-indent-3.ql-direction-rtl.ql-align-right {
      padding-right: 10.5em;
    }
    .ql-editor .ql-indent-4:not(.ql-direction-rtl) {
      padding-left: 12em;
    }
    .ql-editor li.ql-indent-4:not(.ql-direction-rtl) {
      padding-left: 13.5em;
    }
    .ql-editor .ql-indent-4.ql-direction-rtl.ql-align-right {
      padding-right: 12em;
    }
    .ql-editor li.ql-indent-4.ql-direction-rtl.ql-align-right {
      padding-right: 13.5em;
    }
    .ql-editor .ql-indent-5:not(.ql-direction-rtl) {
      padding-left: 15em;
    }
    .ql-editor li.ql-indent-5:not(.ql-direction-rtl) {
      padding-left: 16.5em;
    }
    .ql-editor .ql-indent-5.ql-direction-rtl.ql-align-right {
      padding-right: 15em;
    }
    .ql-editor li.ql-indent-5.ql-direction-rtl.ql-align-right {
      padding-right: 16.5em;
    }
    .ql-editor .ql-indent-6:not(.ql-direction-rtl) {
      padding-left: 18em;
    }
    .ql-editor li.ql-indent-6:not(.ql-direction-rtl) {
      padding-left: 19.5em;
    }
    .ql-editor .ql-indent-6.ql-direction-rtl.ql-align-right {
      padding-right: 18em;
    }
    .ql-editor li.ql-indent-6.ql-direction-rtl.ql-align-right {
      padding-right: 19.5em;
    }
    .ql-editor .ql-indent-7:not(.ql-direction-rtl) {
      padding-left: 21em;
    }
    .ql-editor li.ql-indent-7:not(.ql-direction-rtl) {
      padding-left: 22.5em;
    }
    .ql-editor .ql-indent-7.ql-direction-rtl.ql-align-right {
      padding-right: 21em;
    }
    .ql-editor li.ql-indent-7.ql-direction-rtl.ql-align-right {
      padding-right: 22.5em;
    }
    .ql-editor .ql-indent-8:not(.ql-direction-rtl) {
      padding-left: 24em;
    }
    .ql-editor li.ql-indent-8:not(.ql-direction-rtl) {
      padding-left: 25.5em;
    }
    .ql-editor .ql-indent-8.ql-direction-rtl.ql-align-right {
      padding-right: 24em;
    }
    .ql-editor li.ql-indent-8.ql-direction-rtl.ql-align-right {
      padding-right: 25.5em;
    }
    .ql-editor .ql-indent-9:not(.ql-direction-rtl) {
      padding-left: 27em;
    }
    .ql-editor li.ql-indent-9:not(.ql-direction-rtl) {
      padding-left: 28.5em;
    }
    .ql-editor .ql-indent-9.ql-direction-rtl.ql-align-right {
      padding-right: 27em;
    }
    .ql-editor li.ql-indent-9.ql-direction-rtl.ql-align-right {
      padding-right: 28.5em;
    }
    .ql-editor .ql-video {
      display: block;
      max-width: 100%;
    }
    .ql-editor .ql-video.ql-align-center {
      margin: 0 auto;
    }
    .ql-editor .ql-video.ql-align-right {
      margin: 0 0 0 auto;
    }
    .ql-editor .ql-bg-black {
      background-color: #000;
    }
    .ql-editor .ql-bg-red {
      background-color: #e60000;
    }
    .ql-editor .ql-bg-orange {
      background-color: #f90;
    }
    .ql-editor .ql-bg-yellow {
      background-color: #ff0;
    }
    .ql-editor .ql-bg-green {
      background-color: #008a00;
    }
    .ql-editor .ql-bg-blue {
      background-color: #06c;
    }
    .ql-editor .ql-bg-purple {
      background-color: #93f;
    }
    .ql-editor .ql-color-white {
      color: #fff;
    }
    .ql-editor .ql-color-red {
      color: #e60000;
    }
    .ql-editor .ql-color-orange {
      color: #f90;
    }
    .ql-editor .ql-color-yellow {
      color: #ff0;
    }
    .ql-editor .ql-color-green {
      color: #008a00;
    }
    .ql-editor .ql-color-blue {
      color: #06c;
    }
    .ql-editor .ql-color-purple {
      color: #93f;
    }
    .ql-editor .ql-font-serif {
      font-family: Georgia, Times New Roman, serif;
    }
    .ql-editor .ql-font-monospace {
      font-family: Monaco, Courier New, monospace;
    }
    .ql-editor .ql-size-small {
      font-size: 0.75em;
    }
    .ql-editor .ql-size-large {
      font-size: 1.5em;
    }
    .ql-editor .ql-size-huge {
      font-size: 2.5em;
    }
    .ql-editor .ql-direction-rtl {
      direction: rtl;
      text-align: inherit;
    }
    .ql-editor .ql-align-center {
      text-align: center;
    }
    .ql-editor .ql-align-justify {
      text-align: justify;
    }
    .ql-editor .ql-align-right {
      text-align: right;
    }
    .ql-editor.ql-blank::before {
      color: rgba(0, 0, 0, 0.6);
      content: attr(data-placeholder);
      font-style: italic;
      left: 15px;
      pointer-events: none;
      position: absolute;
      right: 15px;
    }
    .ql-snow.ql-toolbar:after,
    .ql-snow .ql-toolbar:after {
      clear: both;
      content: '';
      display: table;
    }
    .ql-snow.ql-toolbar button,
    .ql-snow .ql-toolbar button {
      background: none;
      border: none;
      cursor: pointer;
      display: inline-block;
      float: left;
      height: 24px;
      padding: 3px 5px;
      width: 28px;
    }
    .ql-snow.ql-toolbar button svg,
    .ql-snow .ql-toolbar button svg {
      float: left;
      height: 100%;
    }
    .ql-snow.ql-toolbar button:active:hover,
    .ql-snow .ql-toolbar button:active:hover {
      outline: none;
    }
    .ql-snow.ql-toolbar input.ql-image[type='file'],
    .ql-snow .ql-toolbar input.ql-image[type='file'] {
      display: none;
    }
    .ql-snow.ql-toolbar button:hover,
    .ql-snow .ql-toolbar button:hover,
    .ql-snow.ql-toolbar button:focus,
    .ql-snow .ql-toolbar button:focus,
    .ql-snow.ql-toolbar button.ql-active,
    .ql-snow .ql-toolbar button.ql-active,
    .ql-snow.ql-toolbar .ql-picker-label:hover,
    .ql-snow .ql-toolbar .ql-picker-label:hover,
    .ql-snow.ql-toolbar .ql-picker-label.ql-active,
    .ql-snow .ql-toolbar .ql-picker-label.ql-active,
    .ql-snow.ql-toolbar .ql-picker-item:hover,
    .ql-snow .ql-toolbar .ql-picker-item:hover,
    .ql-snow.ql-toolbar .ql-picker-item.ql-selected,
    .ql-snow .ql-toolbar .ql-picker-item.ql-selected {
      color: #06c;
    }
    .ql-snow.ql-toolbar button:hover .ql-fill,
    .ql-snow .ql-toolbar button:hover .ql-fill,
    .ql-snow.ql-toolbar button:focus .ql-fill,
    .ql-snow .ql-toolbar button:focus .ql-fill,
    .ql-snow.ql-toolbar button.ql-active .ql-fill,
    .ql-snow .ql-toolbar button.ql-active .ql-fill,
    .ql-snow.ql-toolbar .ql-picker-label:hover .ql-fill,
    .ql-snow .ql-toolbar .ql-picker-label:hover .ql-fill,
    .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-fill,
    .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-fill,
    .ql-snow.ql-toolbar .ql-picker-item:hover .ql-fill,
    .ql-snow .ql-toolbar .ql-picker-item:hover .ql-fill,
    .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-fill,
    .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-fill,
    .ql-snow.ql-toolbar button:hover .ql-stroke.ql-fill,
    .ql-snow .ql-toolbar button:hover .ql-stroke.ql-fill,
    .ql-snow.ql-toolbar button:focus .ql-stroke.ql-fill,
    .ql-snow .ql-toolbar button:focus .ql-stroke.ql-fill,
    .ql-snow.ql-toolbar button.ql-active .ql-stroke.ql-fill,
    .ql-snow .ql-toolbar button.ql-active .ql-stroke.ql-fill,
    .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,
    .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,
    .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,
    .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,
    .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,
    .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,
    .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,
    .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill {
      fill: #06c;
    }
    .ql-snow.ql-toolbar button:hover .ql-stroke,
    .ql-snow .ql-toolbar button:hover .ql-stroke,
    .ql-snow.ql-toolbar button:focus .ql-stroke,
    .ql-snow .ql-toolbar button:focus .ql-stroke,
    .ql-snow.ql-toolbar button.ql-active .ql-stroke,
    .ql-snow .ql-toolbar button.ql-active .ql-stroke,
    .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke,
    .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke,
    .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke,
    .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke,
    .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke,
    .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke,
    .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,
    .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,
    .ql-snow.ql-toolbar button:hover .ql-stroke-miter,
    .ql-snow .ql-toolbar button:hover .ql-stroke-miter,
    .ql-snow.ql-toolbar button:focus .ql-stroke-miter,
    .ql-snow .ql-toolbar button:focus .ql-stroke-miter,
    .ql-snow.ql-toolbar button.ql-active .ql-stroke-miter,
    .ql-snow .ql-toolbar button.ql-active .ql-stroke-miter,
    .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,
    .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,
    .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,
    .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,
    .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,
    .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,
    .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,
    .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter {
      stroke: #06c;
    }
    @media (pointer: coarse) {
      .ql-snow.ql-toolbar button:hover:not(.ql-active),
      .ql-snow .ql-toolbar button:hover:not(.ql-active) {
        color: #444;
      }
      .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-fill,
      .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-fill,
      .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill,
      .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill {
        fill: #444;
      }
      .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke,
      .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke,
      .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter,
      .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter {
        stroke: #444;
      }
    }
    .ql-snow {
      box-sizing: border-box;
    }
    .ql-snow * {
      box-sizing: border-box;
    }
    .ql-snow .ql-hidden {
      display: none;
    }
    .ql-snow .ql-out-bottom,
    .ql-snow .ql-out-top {
      visibility: hidden;
    }
    .ql-snow .ql-tooltip {
      position: absolute;
      transform: translateY(10px);
    }
    .ql-snow .ql-tooltip a {
      cursor: pointer;
      text-decoration: none;
    }
    .ql-snow .ql-tooltip.ql-flip {
      transform: translateY(-10px);
    }
    .ql-snow .ql-formats {
      display: inline-block;
      vertical-align: middle;
    }
    .ql-snow .ql-formats:after {
      clear: both;
      content: '';
      display: table;
    }
    .ql-snow .ql-stroke {
      fill: none;
      stroke: #444;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-width: 2;
    }
    .ql-snow .ql-stroke-miter {
      fill: none;
      stroke: #444;
      stroke-miterlimit: 10;
      stroke-width: 2;
    }
    .ql-snow .ql-fill,
    .ql-snow .ql-stroke.ql-fill {
      fill: #444;
    }
    .ql-snow .ql-empty {
      fill: none;
    }
    .ql-snow .ql-even {
      fill-rule: evenodd;
    }
    .ql-snow .ql-thin,
    .ql-snow .ql-stroke.ql-thin {
      stroke-width: 1;
    }
    .ql-snow .ql-transparent {
      opacity: 0.4;
    }
    .ql-snow .ql-direction svg:last-child {
      display: none;
    }
    .ql-snow .ql-direction.ql-active svg:last-child {
      display: inline;
    }
    .ql-snow .ql-direction.ql-active svg:first-child {
      display: none;
    }
    .ql-snow .ql-editor h1 {
      font-size: 2em;
    }
    .ql-snow .ql-editor h2 {
      font-size: 1.5em;
    }
    .ql-snow .ql-editor h3 {
      font-size: 1.17em;
    }
    .ql-snow .ql-editor h4 {
      font-size: 1em;
    }
    .ql-snow .ql-editor h5 {
      font-size: 0.83em;
    }
    .ql-snow .ql-editor h6 {
      font-size: 0.67em;
    }
    .ql-snow .ql-editor a {
      text-decoration: underline;
    }
    .ql-snow .ql-editor blockquote {
      border-left: 4px solid #ccc;
      margin-bottom: 5px;
      margin-top: 5px;
      padding-left: 16px;
    }
    .ql-snow .ql-editor code,
    .ql-snow .ql-editor pre {
      background-color: #f0f0f0;
      border-radius: 3px;
    }
    .ql-snow .ql-editor pre {
      white-space: pre-wrap;
      margin-bottom: 5px;
      margin-top: 5px;
      padding: 5px 10px;
    }
    .ql-snow .ql-editor code {
      font-size: 85%;
      padding: 2px 4px;
    }
    .ql-snow .ql-editor pre.ql-syntax {
      background-color: #23241f;
      color: #f8f8f2;
      overflow: visible;
    }
    .ql-snow .ql-editor img {
      max-width: 100%;
    }
    .ql-snow .ql-picker {
      color: #444;
      display: inline-block;
      float: left;
      font-size: 14px;
      font-weight: 500;
      height: 24px;
      position: relative;
      vertical-align: middle;
    }
    .ql-snow .ql-picker-label {
      cursor: pointer;
      display: inline-block;
      height: 100%;
      padding-left: 8px;
      padding-right: 2px;
      position: relative;
      width: 100%;
    }
    .ql-snow .ql-picker-label::before {
      display: inline-block;
      line-height: 22px;
    }
    .ql-snow .ql-picker-options {
      background-color: #fff;
      display: none;
      min-width: 100%;
      padding: 4px 8px;
      position: absolute;
      white-space: nowrap;
    }
    .ql-snow .ql-picker-options .ql-picker-item {
      cursor: pointer;
      display: block;
      padding-bottom: 5px;
      padding-top: 5px;
    }
    .ql-snow .ql-picker.ql-expanded .ql-picker-label {
      color: #ccc;
      z-index: 2;
    }
    .ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-fill {
      fill: #ccc;
    }
    .ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-stroke {
      stroke: #ccc;
    }
    .ql-snow .ql-picker.ql-expanded .ql-picker-options {
      display: block;
      margin-top: -1px;
      top: 100%;
      z-index: 1;
    }
    .ql-snow .ql-color-picker,
    .ql-snow .ql-icon-picker {
      width: 28px;
    }
    .ql-snow .ql-color-picker .ql-picker-label,
    .ql-snow .ql-icon-picker .ql-picker-label {
      padding: 2px 4px;
    }
    .ql-snow .ql-color-picker .ql-picker-label svg,
    .ql-snow .ql-icon-picker .ql-picker-label svg {
      right: 4px;
    }
    .ql-snow .ql-icon-picker .ql-picker-options {
      padding: 4px 0px;
    }
    .ql-snow .ql-icon-picker .ql-picker-item {
      height: 24px;
      width: 24px;
      padding: 2px 4px;
    }
    .ql-snow .ql-color-picker .ql-picker-options {
      padding: 3px 5px;
      width: 152px;
    }
    .ql-snow .ql-color-picker .ql-picker-item {
      border: 1px solid transparent;
      float: left;
      height: 16px;
      margin: 2px;
      padding: 0px;
      width: 16px;
    }
    .ql-snow .ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg {
      position: absolute;
      margin-top: -9px;
      right: 0;
      top: 50%;
      width: 18px;
    }
    .ql-snow .ql-picker.ql-header .ql-picker-label[data-label]:not([data-label=''])::before,
    .ql-snow .ql-picker.ql-font .ql-picker-label[data-label]:not([data-label=''])::before,
    .ql-snow .ql-picker.ql-size .ql-picker-label[data-label]:not([data-label=''])::before,
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-label]:not([data-label=''])::before,
    .ql-snow .ql-picker.ql-font .ql-picker-item[data-label]:not([data-label=''])::before,
    .ql-snow .ql-picker.ql-size .ql-picker-item[data-label]:not([data-label=''])::before {
      content: attr(data-label);
    }
    .ql-snow .ql-picker.ql-header {
      width: 98px;
    }
    .ql-snow .ql-picker.ql-header .ql-picker-label::before,
    .ql-snow .ql-picker.ql-header .ql-picker-item::before {
      content: 'Normal';
    }
    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='1']::before,
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='1']::before {
      content: 'Heading 1';
    }
    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='2']::before,
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='2']::before {
      content: 'Heading 2';
    }
    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='3']::before,
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='3']::before {
      content: 'Heading 3';
    }
    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='4']::before,
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='4']::before {
      content: 'Heading 4';
    }
    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='5']::before,
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='5']::before {
      content: 'Heading 5';
    }
    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='6']::before,
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='6']::before {
      content: 'Heading 6';
    }
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='1']::before {
      font-size: 2em;
    }
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='2']::before {
      font-size: 1.5em;
    }
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='3']::before {
      font-size: 1.17em;
    }
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='4']::before {
      font-size: 1em;
    }
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='5']::before {
      font-size: 0.83em;
    }
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='6']::before {
      font-size: 0.67em;
    }
    .ql-snow .ql-picker.ql-font {
      width: 108px;
    }
    .ql-snow .ql-picker.ql-font .ql-picker-label::before,
    .ql-snow .ql-picker.ql-font .ql-picker-item::before {
      content: 'Sans Serif';
    }
    .ql-snow .ql-picker.ql-font .ql-picker-label[data-value='serif']::before,
    .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='serif']::before {
      content: 'Serif';
    }
    .ql-snow .ql-picker.ql-font .ql-picker-label[data-value='monospace']::before,
    .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='monospace']::before {
      content: 'Monospace';
    }
    .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='serif']::before {
      font-family: Georgia, Times New Roman, serif;
    }
    .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='monospace']::before {
      font-family: Monaco, Courier New, monospace;
    }
    .ql-snow .ql-picker.ql-size {
      width: 98px;
    }
    .ql-snow .ql-picker.ql-size .ql-picker-label::before,
    .ql-snow .ql-picker.ql-size .ql-picker-item::before {
      content: 'Normal';
    }
    .ql-snow .ql-picker.ql-size .ql-picker-label[data-value='small']::before,
    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='small']::before {
      content: 'Small';
    }
    .ql-snow .ql-picker.ql-size .ql-picker-label[data-value='large']::before,
    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='large']::before {
      content: 'Large';
    }
    .ql-snow .ql-picker.ql-size .ql-picker-label[data-value='huge']::before,
    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='huge']::before {
      content: 'Huge';
    }
    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='small']::before {
      font-size: 10px;
    }
    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='large']::before {
      font-size: 18px;
    }
    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='huge']::before {
      font-size: 32px;
    }
    .ql-snow .ql-color-picker.ql-background .ql-picker-item {
      background-color: #fff;
    }
    .ql-snow .ql-color-picker.ql-color .ql-picker-item {
      background-color: #000;
    }
    .ql-toolbar.ql-snow {
      border: 1px solid #ccc;
      box-sizing: border-box;
      font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
      padding: 8px;
    }
    .ql-toolbar.ql-snow .ql-formats {
      margin-right: 15px;
    }
    .ql-toolbar.ql-snow .ql-picker-label {
      border: 1px solid transparent;
    }
    .ql-toolbar.ql-snow .ql-picker-options {
      border: 1px solid transparent;
      box-shadow: rgba(0, 0, 0, 0.2) 0 2px 8px;
    }
    .ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-label {
      border-color: #ccc;
    }
    .ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options {
      border-color: #ccc;
    }
    .ql-toolbar.ql-snow .ql-color-picker .ql-picker-item.ql-selected,
    .ql-toolbar.ql-snow .ql-color-picker .ql-picker-item:hover {
      border-color: #000;
    }
    .ql-toolbar.ql-snow + .ql-container.ql-snow {
      border-top: 0px;
    }
    .ql-snow .ql-tooltip {
      background-color: #fff;
      border: 1px solid #ccc;
      box-shadow: 0px 0px 5px #ddd;
      color: #444;
      padding: 5px 12px;
      white-space: nowrap;
    }
    .ql-snow .ql-tooltip::before {
      content: 'Visit URL:';
      line-height: 26px;
      margin-right: 8px;
    }
    .ql-snow .ql-tooltip input[type='text'] {
      display: none;
      border: 1px solid #ccc;
      font-size: 13px;
      height: 26px;
      margin: 0px;
      padding: 3px 5px;
      width: 170px;
    }
    .ql-snow .ql-tooltip a.ql-preview {
      display: inline-block;
      max-width: 200px;
      overflow-x: hidden;
      text-overflow: ellipsis;
      vertical-align: top;
    }
    .ql-snow .ql-tooltip a.ql-action::after {
      border-right: 1px solid #ccc;
      content: 'Edit';
      margin-left: 16px;
      padding-right: 8px;
    }
    .ql-snow .ql-tooltip a.ql-remove::before {
      content: 'Remove';
      margin-left: 8px;
    }
    .ql-snow .ql-tooltip a {
      line-height: 26px;
    }
    .ql-snow .ql-tooltip.ql-editing a.ql-preview,
    .ql-snow .ql-tooltip.ql-editing a.ql-remove {
      display: none;
    }
    .ql-snow .ql-tooltip.ql-editing input[type='text'] {
      display: inline-block;
    }
    .ql-snow .ql-tooltip.ql-editing a.ql-action::after {
      border-right: 0px;
      content: 'Save';
      padding-right: 0px;
    }
    .ql-snow .ql-tooltip[data-mode='link']::before {
      content: 'Enter link:';
    }
    .ql-snow .ql-tooltip[data-mode='formula']::before {
      content: 'Enter formula:';
    }
    .ql-snow .ql-tooltip[data-mode='video']::before {
      content: 'Enter video:';
    }
    .ql-snow a {
      color: #06c;
    }
    .ql-container.ql-snow {
      border: 1px solid #ccc;
    }
  </style>
`,dd=Sn`
  <style>
    :root {
      --elemento-padding-factor: 20;
    }

    #lx-eta-box {
      display: grid;
      grid-template-columns: 1fr;
      grid-template-rows: 30px calc(100% - 30px);
      height: 100%;
    }

    #lx-eta-box .ql-toolbar.ql-snow {
      border: 1px solid #ccc;
      box-sizing: border-box;
      padding: 3px 10px 3px 10px;
    }

    #lx-eta-box .ql-snow.ql-toolbar button,
    .ql-snow .ql-toolbar button {
      height: 20px !important;
      padding: 0px !important;
      width: 24px !important;
      margin: 0px !important;
    }

    #lx-eta-barra-ferramenta button:focus {
      outline: 0;
      border: 0px solid #f1f1f1;
      -webkit-box-shadow: 0px;
      box-shadow: none;
    }

    #lx-eta-barra-ferramenta .lx-eta-ql-button {
      font-size: 1.1em;
      color: #444444;
    }

    .lx-eta-rebate-180-graus {
      -moz-transform: scaleX(-1);
      -o-transform: scaleX(-1);
      -webkit-transform: scaleX(-1);
      transform: scaleX(-1);
    }

    #lx-eta-editor {
      overflow-y: auto;
    }

    #lx-eta-editor .ql-editor {
      font-family: sans-serif, 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
        'Noto Color Emoji';
      font-size: 1rem;
      line-height: 1.42;
      color: #646260;
      text-transform: none !important;
      padding: 5px;
    }

    #lx-eta-editor .ql-editor *:focus {
      outline: 0;
      border: 0px solid #f1f1f1;
      -webkit-box-shadow: 0px;
      box-shadow: none;
    }

    #lx-eta-editor .ql-editor label:before {
      content: attr(data-rotulo) ' ';
    }

    #toast-msg {
      padding: 1em;
      font-size: 1.1em;
    }

    .lx-eta-dropbtn {
      background-color: #ffffff;
      color: #444444;
      width: 26px;
      font-weight: bold;
      vertical-align: middle;
      border: none;
      cursor: pointer;
      text-align: center;
    }

    .lx-eta-dropdown {
      position: relative;
      display: inline-block;
    }

    .lx-eta-dropdown-content {
      display: none;
      position: absolute;
      background-color: #f9f9f9;
      min-width: 160px;
      box-shadow: 0px 4px 4px 4px rgba(0, 0, 0, 0.25);
      z-index: 1;
    }

    .lx-eta-dropdown-content div {
      color: black;
      padding: 5px 16px;
      text-decoration: none;
      display: block;
      white-space: nowrap;
      font-weight: normal !important;
      text-align: left;
      cursor: pointer;
    }

    .lx-eta-dropdown-content div:hover {
      background-color: #e5e5e5;
    }

    .lx-eta-dropdown:hover .lx-eta-dropdown-content {
      display: block;
    }

    .lx-eta-dropdown:hover .lx-eta-dropbtn {
      background-color: #e1e1e1;
    }

    .lx-eta-btn-disp-atual {
      margin-left: 10px !important;
      text-decoration: underline;
    }

    .lx-eta-btn-desfazer {
      margin-left: 10px !important;
    }

    .icon-undo-redo {
      width: 19px;
      height: 16px !important;
    }

    .icon-undo-redo:hover {
      fill: #0066cc;
    }

    .lx-eta-dropdown-content-right {
      right: 0;
    }

    .ql-snow .ql-hidden {
      display: none;
    }

    .ql-snow .ql-tooltip::before {
      content: 'Acesse a norma:';
    }

    .ql-snow .ql-tooltip a.ql-action::after {
      display: none;
    }

    .ql-snow .ql-tooltip a.ql-remove::before {
      display: none;
    }

    .ql-snow .ql-tooltip a.ql-preview {
      max-width: 300px;
    }

    .btn--artigoOndeCouber {
    }

    .container__linha {
      display: flex;
      width: 100%;
    }

    .container__linha--reverse {
      flex-direction: row-reverse;
    }

    .container__texto {
      flex: 1;
    }

    .container__menu {
      width: 30px;
      vertical-align: top;
      text-align: center;
    }

    .container__elemento--padrao {
      width: 100%;
      min-height: 26px;
      border: 1px solid #ffffff;
      line-height: 1.42;
      margin: 0px 2px 0px 5px !important;
    }

    .container__elemento--articulacao {
      width: 100%;
      min-height: 1px;
      line-height: 0.42;
      margin: 1px;
    }

    .agrupador {
      text-align: center;
    }

    .texto__rotulo {
      color: black;
      font-weight: 600;
      font-size: 1rem;
    }

    .texto__rotulo--agrupador {
      display: block;
    }

    .texto__rotulo--padrao {
      float: left;
      margin-right: 10px;
    }

    .dispositivo--adicionado {
      color: green;
    }

    .dispositivo--modificado {
      color: blue;
    }

    .dispositivo--suprimido {
      color: red;
    }

    .texto--suprimido {
      text-decoration: line-through;
    }

    .container__elemento--ativo {
      border-color: #24d421;
    }

    .mensagem {
      font-size: 0.8em;
      font-weight: 600;
    }

    .mensagem--info {
      color: green;
    }

    .mensagem--warning {
      color: #ff5733;
    }

    .mensagem--danger {
      color: red;
    }

    lexml-eta-help {
      float: right;
    }

    #lx-eta-buffer {
      display: none;
      height: 0px;
    }
  </style>
`;let pd=class extends(Jn(Oc)(Gn)){constructor(){super(),this.inscricoes=[],this.onSelectionChange=(t,e,o)=>{0===(null==t?void 0:t.length)&&o===Quill.sources.USER&&this.ajustarLinkParaNorma()},this.tabIndex=-1}get quill(){return this._quill}createRenderRoot(){return this}async firstUpdated(){this.inicializar(this.configEditor())}stateChanged(t){var e,o;this.quill?(this.quill.undoEstruturaVazio=0===(null!==(e=t.elementoReducer.past)&&void 0!==e?e:[]).length,this.quill.redoEstruturaVazio=0===(null!==(o=t.elementoReducer.future)&&void 0!==o?o:[]).length,t.elementoReducer.ui&&(t.elementoReducer.ui.message?this.alertar(t.elementoReducer.ui.message.descricao):this.processarStateEvents(t.elementoReducer.ui.events))):this.quillNaoInicializado(t)}disconnectedCallback(){this.inscricoes.forEach((t=>t.cancel())),this.removeEventListener("ontextchange",(t=>console.log(t))),this.destroiQuill(),super.disconnectedCallback()}render(){return Sn`
      ${cd}
      ${dd}
      <div id="lx-eta-box">
        <div id="lx-eta-barra-ferramenta">
          <button class="ql-bold" title="Negrito (Ctrl+b)"></button>
          <button class="ql-italic" title="Itálico (Ctrl+i)"></button>
          <button class="ql-script" value="sub" title="Subscrito"></button>
          <button class="ql-script" value="super" title="Sobrescrito"></button>

          <button @click=${this.onClickUndo} class="lx-eta-ql-button lx-eta-btn-desfazer" title="Desfazer (Ctrl+Z)">
            <svg class="icon-undo-redo" id="undo" viewBox="0 0 512 512">
              <path
                d="M488,256c0,123.4-100.5,223.9-223.9,223.9c-48.8,0-95.2-15.6-134.2-44.9c-14.1-10.6-17-30.7-6.4-44.8 c10.6-14.1,30.6-16.9,44.8-6.4c27.8,20.9,61,31.9,95.9,31.9c88.1,0,159.8-71.7,159.8-159.8S352.3,96.2,264.2,96.2 c-37.5,0-73.1,13.5-101.3,36.6L208,178c17,17,5,46.1-19.1,46.1H43.2c-10.6,0-19.2-8.6-19.2-19.2V59C24,35,53.1,23,70.1,40l47.6,47.6 c40.2-34.9,91.8-55.5,146.4-55.5C387.5,32.1,488,132.6,488,256z"
              />
            </svg>
          </button>
          <button @click=${this.onClickRedo} class="lx-eta-ql-button" title="Refazer (Ctrl+y)">
            <svg class="icon-undo-redo lx-eta-rebate-180-graus" id="redo" viewBox="0 0 512 512">
              <path
                d="M488,256c0,123.4-100.5,223.9-223.9,223.9c-48.8,0-95.2-15.6-134.2-44.9c-14.1-10.6-17-30.7-6.4-44.8 c10.6-14.1,30.6-16.9,44.8-6.4c27.8,20.9,61,31.9,95.9,31.9c88.1,0,159.8-71.7,159.8-159.8S352.3,96.2,264.2,96.2 c-37.5,0-73.1,13.5-101.3,36.6L208,178c17,17,5,46.1-19.1,46.1H43.2c-10.6,0-19.2-8.6-19.2-19.2V59C24,35,53.1,23,70.1,40l47.6,47.6 c40.2-34.9,91.8-55.5,146.4-55.5C387.5,32.1,488,132.6,488,256z"
              />
            </svg>
          </button>

          <button @click=${this.onClickDispositivoAtual} class="lx-eta-ql-button lx-eta-btn-disp-atual" title="Localizar dispositivo atual">D</button>
          <input type="button" @click=${this.artigoOndeCouber} class="${"ql-hidden"} btn--artigoOndeCouber" value="Propor artigo onde couber" title="Artigo onde couber"></input>
          <lexml-eta-help></lexml-eta-help>
        </div>
        <div id="lx-eta-editor"></div>
      </div>
      <elix-toast id="toast-alerta" duration="3000">
        <div id="toast-msg"></div>
      </elix-toast>
      <div id="lx-eta-buffer"><p></p></div>
    `}formatacaoAlterada(){var t;(null===(t=document.getSelection())||void 0===t?void 0:t.toString())&&this.agendarEmissaoEventoOnChange("toolbar")}onClickUndo(){this.quill.undo()}onClickRedo(){this.quill.redo()}onClickDispositivoAtual(){this.quill.setSelection(this.quill.getIndex(this.quill.linhaAtual.blotConteudo),0,Quill.sources.SILENT),this.quill.focus()}artigoOndeCouber(){}ajustarLinkParaNorma(){const t=document.querySelector("a.ql-preview"),e=null==t?void 0:t.getAttribute("href");if(null==e?void 0:e.startsWith("urn")){const o="https://normas.leg.br/?urn="+e;t.setAttribute("href",o),t.innerHTML=(t=>{var e;const o=Ja(t),i=Xa(o),n=null===(e=Za(o))||void 0===e?void 0:e.descricao,r=Ya(o);return(n||"")+(i?" nº "+i:"")+(r.length>7?" de "+r:"")})(e)}}onBold(t){this.quill.keyboard.verificarOperacaoTecladoPermitida()&&(this.quill.format("bold",t),this.formatacaoAlterada())}onItalic(t){this.quill.keyboard.verificarOperacaoTecladoPermitida()&&(this.quill.format("italic",t),this.formatacaoAlterada())}onScript(t){this.quill.keyboard.verificarOperacaoTecladoPermitida()&&(this.quill.format("script",t),this.formatacaoAlterada())}onOperacaoInvalida(){this.alertar("Operação não permitida.")}isDesmembramento(t,e,o){return 0!==(e+o).localeCompare(t)}adicionarElemento(t){var e,o;const i=this.quill.linhaAtual,n=i.blotConteudo,r=null!==(e=this.quill.inicioConteudoAtual)&&void 0!==e?e:0,s=null!==(o=r+n.tamanho)&&void 0!==o?o:0;let a="",l="";if(t.index===r)a="",l=n.html;else if(t.index===s)a=n.html,l="";else{const e=s-t.index;a=this.quill.getConteudoHtmlParteLinha(n,0,n.tamanho-e),l=this.quill.getConteudoHtmlParteLinha(n,t.index-r,e)}const u=this.criarElemento(i.uuid,i.lexmlId,i.tipo,a,i.numero,i.hierarquia);if(this.isDesmembramento(n.htmlAnt,a,l)){const t=this.criarElemento(i.uuid,i.lexmlId,i.tipo,a+l,i.numero,i.hierarquia);Oc.dispatch(qr.execute(t))}Oc.dispatch(ur.execute(u,l))}async renumerarElemento(){var t,e;const o=this.quill.linhaAtual,i=o.blotConteudo.html,n=this.criarElemento(null!==(t=o.uuid)&&void 0!==t?t:0,o.lexmlId,null!==(e=o.tipo)&&void 0!==e?e:"","",o.numero,o.hierarquia,o.descricaoSituacao);if(!(t=>{var e,o;return void 0!==(null===(o=null===(e=t.hierarquia)||void 0===e?void 0:e.pai)||void 0===o?void 0:o.uuidAlteracao)&&t.descricaoSituacao!==Ds.DISPOSITIVO_ORIGINAL})(n))return;const r=document.createElement("elix-dialog"),s=document.createRange().createContextualFragment('\n      <div style="padding: 15px; text-align: center">\n        <div>\n          Numeração do dispositivo:\n          <input type="text" style="width: 60px">\n        </div>\n        <div class="erro" style="margin-top: 10px; color: red; display: none;"></div>\n        <div style="margin-top: 10px;">\n          <button>Ok</button>\n          <button>Cancelar</button>\n        </div>\n      </div>\n    '),a=s.querySelector("input");var l;a.value=`${l=o.blotRotulo.rotulo,l.replace(/\./g,"").replace(/["“]/g,"").replace(/^Parte$/i,"").replace(/^Livro$/i,"").replace(/^Titulo$/i,"").replace(/^Capitulo$/i,"").replace(/^Secao$/i,"").replace(/^Subsecao$/i,"").replace(/^Artigo$/i,"").replace(/^Paragrafo$/i,"").replace(/^Inciso$/i,"").replace(/^Alinea$/i,"").replace(/^Item$/i,"").replace(/Art/i,"").replace(/§/i,"").replace(/§/i,"").replace(/[º]/i,"").replace(/[–-][/s]*$/,"").replace(/[)][/s]*$/,"").trim()}`;const u=s.querySelectorAll("button"),c=u[0],d=u[1],p=s.querySelector(".erro");c.onclick=()=>{var t;this.quill.focus(),r.close(),(null===(t=n.conteudo)||void 0===t?void 0:t.texto)!==i&&(n.conteudo.texto=i,Oc.dispatch(Ar.execute(n))),Oc.dispatch(Lr.execute(n,a.value.trim()))},d.onclick=()=>{this.quill.focus(),r.close()};const h=()=>{const t=a.value;return/^\s*$/.test(t)?"A numeração não pode ser vazia.":""};a.onkeyup=t=>{const e=h();p.innerText=e,p.style.display=e?"block":"none",c.disabled=Boolean(e),c.disabled||"Enter"===t.key&&c.click()},r.appendChild(s),c.disabled=Boolean(h()),await r.open()}removerElemento(){const t=this.quill.linhaAtual,e=`Você realmente deseja remover o dispositivo ${t.blotRotulo.rotulo}`;this.confirmar(e,["Sim","Não"],(e=>{var o,i;const n=e.detail.closeResult;if("Sim"===(n&&n.choice)){const e=this.criarElemento(null!==(o=t.uuid)&&void 0!==o?o:0,t.lexmlId,null!==(i=t.tipo)&&void 0!==i?i:"","",t.numero,t.hierarquia);Oc.dispatch(Rr.execute(e))}this.quill.focus()}))}moverElemento(t){const e=this.quill.linhaAtual,o=e.blotConteudo.html,i=this.criarElemento(e.uuid,e.lexmlId,e.tipo,o,e.numero,e.hierarquia);"ArrowUp"===t.key?Oc.dispatch(Tr.execute(i)):"ArrowDown"===t.key&&Oc.dispatch(Nr.execute(i))}transformarElemento(t){const e=this.quill.linhaAtual,o=e.blotConteudo.html,i=this.criarElemento(e.uuid,e.lexmlId,e.tipo,o,e.numero,e.hierarquia);"a"===t.key.toLowerCase()?Oc.dispatch(Nc(i,ar.artigo.name)):"l"===t.key.toLowerCase()?Oc.dispatch(Nc(i,ar.alinea.name)):"n"===t.key.toLowerCase()?Oc.dispatch(Nc(i,ar.inciso.name)):"o"===t.key.toLowerCase()?Oc.dispatch(Nc(i,ar.omissis.name)):"p"===t.key.toLowerCase()?Oc.dispatch(Nc(i,ar.paragrafo.name)):"t"===t.key.toLowerCase()?Oc.dispatch(Nc(i,ar.item.name)):Gc.keys.TAB&&Oc.dispatch(t.shiftKey?{type:"SHIFT_TAB",atual:i}:(t=>({type:"TAB",atual:t}))(i))}elementoSelecionado(t){var e;const o=this.quill.linhaAtual,i=this.criarElemento(t,o.lexmlId,null!==(e=o.tipo)&&void 0!==e?e:"","",o.numero,o.hierarquia);Oc.dispatch(Ir.execute(i)),this.quill.processandoMudancaLinha=!1}undoRedoEstrutura(t){"undo"===t?Oc.dispatch({type:"UNDO"}):Oc.dispatch({type:"REDO"})}processarStateEvents(t){null==t||t.forEach((t=>{var e;switch(t.stateType){case jl.DocumentoCarregado:this.destroiQuill(),this.inicializar(this.configEditor()),this.carregarArticulacao(null!==(e=t.elementos)&&void 0!==e?e:[]);break;case jl.InformarNorma:ud(t.elementos[0],this.quill,Oc,_r);break;case jl.ElementoIncluido:this.inserirNovoElementoNoQuill(t.elementos[0],t.referencia,!0),this.inserirNovosElementosNoQuill(t);break;case jl.ElementoModificado:case jl.ElementoRestaurado:this.atualizarQuill(t),this.montarMenuContexto(t);break;case jl.ElementoSuprimido:this.atualizarSituacao(t),this.montarMenuContexto(t);break;case jl.ElementoRemovido:this.removerLinhaQuill(t);break;case jl.ElementoRenumerado:this.renumerarQuill(t);break;case jl.ElementoValidado:this.atualizarMensagemQuill(t);break;case jl.ElementoSelecionado:this.montarMenuContexto(t),this.atualizarMensagemQuill(t);break;case jl.ElementoMarcado:this.marcarLinha(t);break;case jl.SituacaoElementoModificada:this.atualizarSituacao(t),this.montarMenuContexto(t)}this.quill.limparHistory()}));const e=[jl.ElementoModificado,jl.ElementoSuprimido,jl.ElementoRestaurado,jl.ElementoIncluido,jl.ElementoRemovido,jl.ElementoRenumerado],o=null==t?void 0:t.filter((t=>e.includes(t.stateType))).map((t=>t.stateType));(null==o?void 0:o.length)&&this.agendarEmissaoEventoOnChange("stateEvents")}marcarLinha(t){this.quill.desmarcarLinhaAtual(this.quill.linhaAtual);const e=t.elementos[0],o=this.quill.getLinha(e.uuid),i=this.quill.getIndex(o.blotConteudo);this.quill.setIndex(i,Quill.sources.SILENT),this.quill.atualizarLinhaCorrente(o),this.elementoSelecionado(o.uuid)}processarEscolhaMenu(t){var e,o,i,n;if("Remover dispositivo"===t)this.removerElemento();else if(t===Lr.descricao)this.renumerarElemento();else{const r=this.quill.linhaAtual,s=this.criarElemento(null!==(e=r.uuid)&&void 0!==e?e:0,r.lexmlId,null!==(o=r.tipo)&&void 0!==o?o:"","",r.numero,r.hierarquia);s.conteudo.texto=null!==(i=r.blotConteudo.html)&&void 0!==i?i:"",Oc.dispatch((n=t,tu.filter((t=>t.descricao===n.trim()))[0]).execute(s))}}inserirNovoElementoNoQuill(t,e,o){const i=this.quill.getLinha(e.uuid);if(i){const e=ld.criarContainerLinha(t);if(i.next?e.insertInto(this.quill.scroll,i.next):e.insertInto(this.quill.scroll),""!==this.quill.linhaAtual.blotConteudo.html||""===e.blotConteudo.html){if(o){this.quill.desmarcarLinhaAtual(this.quill.linhaAtual),this.quill.marcarLinhaAtual(e);try{this.quill.setIndex(this.quill.getIndex(e.blotConteudo),Quill.sources.SILENT)}catch(t){console.log(t)}}}else this.quill.linhaAtual.blotConteudo.htmlAnt=this.quill.linhaAtual.blotConteudo.html;this.quill.linhaAtual.descricaoSituacao=t.descricaoSituacao,this.quill.linhaAtual.setEstilo(t.descricaoSituacao)}}inserirNovosElementosNoQuill(t,e){var o;const i=null!==(o=t.elementos)&&void 0!==o?o:[];for(let t=1;t<i.length;t++)this.inserirNovoElementoNoQuill(i[t],i[t-1],e)}atualizarSituacao(t){var e;let o;(null!==(e=t.elementos)&&void 0!==e?e:[]).map((t=>{var e;o=this.quill.getLinha(null!==(e=t.uuid)&&void 0!==e?e:0,o),o&&t.descricaoSituacao!==o.descricaoSituacao&&(o.descricaoSituacao=t.descricaoSituacao,o.setEstilo(t.descricaoSituacao))}))}atualizarQuill(t){var e;let o;(null!==(e=t.elementos)&&void 0!==e?e:[]).map((t=>{var e,i,n,r,s;if(o=this.quill.getLinha(null!==(e=t.uuid)&&void 0!==e?e:0,o),o){let e=!1;t.editavel!==o.editavel&&(o.editavel=t.editavel),t.rotulo!==o.blotRotulo.html&&(o.numero=null!==(i=t.numero)&&void 0!==i?i:"",o.blotRotulo.format(Mc.blotName,t.rotulo)),t.nivel!==o.nivel&&(o.nivel=t.nivel,o.format($c.blotName,t),e=!0),t.agrupador!==o.agrupador&&(o.agrupador=t.agrupador,o.blotRotulo.format(Mc.formatoStyle,t),e||o.format($c.blotName,t)),(null===(n=t.conteudo)||void 0===n?void 0:n.texto)!==o.blotConteudo.html&&(o.blotConteudo.html=null!==(s=null===(r=t.conteudo)||void 0===r?void 0:r.texto)&&void 0!==s?s:""),t.descricaoSituacao!==o.descricaoSituacao&&(o.descricaoSituacao=t.descricaoSituacao,o.setEstilo(t.descricaoSituacao)),2===o.children.length&&o.children.tail.remove(),t.mensagens&&t.mensagens.length>0&&ld.criarContainerMensagens(t).insertInto(o)}}))}removerLinhaQuill(t){var e;let o;(null!==(e=t.elementos)&&void 0!==e?e:[]).forEach((t=>{var e;o=this.quill.getLinha(null!==(e=t.uuid)&&void 0!==e?e:0,o),o&&o.remove()}));const i=this.quill.getLine(this.quill.getSelection(!0).index)[0].linha,n=this.quill.getIndex(i.blotConteudo);this.quill.setSelection(n,0,Quill.sources.SILENT),this.quill.marcarLinhaAtual(i)}renumerarQuill(t){var e;let o;(null!==(e=t.elementos)&&void 0!==e?e:[]).map((t=>{var e;o=this.quill.getLinha(null!==(e=t.uuid)&&void 0!==e?e:0,o),o&&o.blotRotulo.format(Mc.blotName,t.rotulo)}))}atualizarMensagemQuill(t){var e;let o;(null!==(e=t.elementos)&&void 0!==e?e:[]).map((t=>{var e;o=this.quill.getLinha(null!==(e=t.uuid)&&void 0!==e?e:0,o),o&&(2===(null==o?void 0:o.children.length)&&o.children.tail.remove(),t.mensagens&&t.mensagens.length>0&&ld.criarContainerMensagens(t).insertInto(o))}))}montarMenuContexto(t){var e;const o=t.elementos?t.elementos[0]:new kc,i=(null!==(e=null==o?void 0:o.acoesPossiveis)&&void 0!==e?e:[]).filter((t=>Jl(t)));if(i.length>0){this.quill.linhaAtual||this.marcarLinha(t);const e=new Rc,o=new Lc(this.quill.linhaAtual.containerDireito.alinhamentoMenu),n=t=>{this.processarEscolhaMenu(t),this.quill.focus()};(new Dc).insertInto(e),i.forEach((t=>{new jc(t,n).insertInto(o)})),o.insertInto(e),this.quill.linhaAtual.blotContainerDireito.remove(),e.insertInto(this.quill.linhaAtual.containerDireito)}}criarElemento(t,e,o,i,n,r,s){const a=new kc;return a.uuid=t,a.lexmlId=e,a.tipo=o,a.numero=n,a.conteudo={texto:i},a.hierarquia=r,a.descricaoSituacao=s,a}inicializar(t){const e=this.getHtmlElement("lx-eta-editor"),o=this.getHtmlElement("lx-eta-buffer");ad.configurar(),this._quill=new ad(e,o,t),this.quill.on("selection-change",this.onSelectionChange),this.inscricoes.push(this.quill.keyboard.operacaoTecladoInvalida.subscribe(this.onOperacaoInvalida.bind(this))),this.inscricoes.push(this.quill.keyboard.adicionaElementoTeclaEnter.subscribe(this.adicionarElemento.bind(this))),this.inscricoes.push(this.quill.keyboard.moveElemento.subscribe(this.moverElemento.bind(this))),this.inscricoes.push(this.quill.keyboard.removeElemento.subscribe(this.removerElemento.bind(this))),this.inscricoes.push(this.quill.keyboard.renumeraElemento.subscribe(this.renumerarElemento.bind(this))),this.inscricoes.push(this.quill.keyboard.transformaElemento.subscribe(this.transformarElemento.bind(this))),this.inscricoes.push(this.quill.undoRedoEstrutura.subscribe(this.undoRedoEstrutura.bind(this))),this.inscricoes.push(this.quill.elementoSelecionado.subscribe(this.elementoSelecionado.bind(this))),this.inscricoes.push(this.quill.observableSelectionChange.subscribe(this.atualizarTextoElemento.bind(this))),this.inscricoes.push(this.quill.keyboard.onChange.subscribe(this.agendarEmissaoEventoOnChange.bind(this))),this.inscricoes.push(this.quill.clipboard.onChange.subscribe(this.agendarEmissaoEventoOnChange.bind(this)))}agendarEmissaoEventoOnChange(t){clearTimeout(this.timerOnChange),this.timerOnChange=setTimeout((()=>this.emitirEventoOnChange(t)),1e3)}atualizarTextoElemento(t){var e,o,i;if(null===(e=null==t?void 0:t.blotConteudo)||void 0===e?void 0:e.alterado){const e=this.criarElemento(t.uuid,t.lexmlId,t.tipo,null!==(i=null===(o=t.blotConteudo)||void 0===o?void 0:o.html)&&void 0!==i?i:"",t.numero,t.hierarquia);Oc.dispatch(qr.execute(e))}}emitirEventoOnChange(t){this.atualizarTextoElemento(this.quill.linhaAtual),this.dispatchEvent(new CustomEvent("onchange",{bubbles:!0,composed:!0,detail:{origemEvento:t}}))}carregarArticulacao(t){setTimeout((()=>{this.quill.getLine(0)[0].remove(),t.map((t=>{const e=ld.criarContainerLinha(t);e.insertInto(this.quill.scroll),t.tipo===ar.generico.tipo&&Oc.dispatch(hs.execute(t)),t.descricaoSituacao===Ds.DISPOSITIVO_ADICIONADO&&e.setEstilo(Ds.DISPOSITIVO_ADICIONADO)})),this.quill.limparHistory(),setTimeout((()=>{const e=this.quill.getLinha(t[1].uuid);this.quill.setSelection(this.quill.getIndex(null==e?void 0:e.blotConteudo),0,Quill.sources.USER)}),0),Oc.dispatch(ps.execute())}),0)}configEditor(){return{modules:{toolbar:{container:"#lx-eta-barra-ferramenta",handlers:{bold:this.onBold.bind(this),italic:this.onItalic.bind(this),script:this.onScript.bind(this)}},history:{delay:0,maxStack:500,userOnly:!0}},theme:"snow"}}async confirmar(t,e,o){const i=document.createElement("elix-alert-dialog");i.textContent=t,i.choices=e,i.addEventListener("close",o),await i.open()}alertar(t){const e=this.querySelector("#toast-alerta");this.querySelector("#toast-msg").innerHTML=t,e.fromEdge="top",e.open()}quillNaoInicializado(t){var e;let o=[];const i=t=>{setTimeout((()=>{this.quill?t.length>0&&this.carregarArticulacao(t):i(t)}),70)};if(t.elementoReducer.ui){o=null!==(e=t.elementoReducer.ui.events.find((t=>t.stateType===jl.DocumentoCarregado)).elementos)&&void 0!==e?e:[]}i(o)}getHtmlElement(t){return this.querySelector(`#${t}`)}destroiQuill(){this.getHtmlElement("lx-eta-editor").innerHTML="",this.getHtmlElement("lx-eta-buffer").innerHTML="",this.quill&&(this.quill.off("selection-change",this.onSelectionChange),this.quill.destroi()),this._quill=void 0}};pd=Wi([Wn("lexml-eta-editor")],pd);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const hd=new WeakMap,fd=t=>"function"==typeof t&&hd.has(t),md="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,vd={},gd={},bd=`{{lit-${String(Math.random()).slice(2)}}}`,yd=`\x3c!--${bd}--\x3e`,xd=t=>-1!==t.index,wd=()=>document.createComment(""),Ed=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class Od{constructor(t,e,o){this.__parts=[],this.template=t,this.processor=e,this.options=o}update(t){let e=0;for(const o of this.__parts)void 0!==o&&o.setValue(t[e]),e++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const t=md?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],o=this.template.parts,i=document.createTreeWalker(t,133,null,!1);let n,r=0,s=0,a=i.nextNode();for(;r<o.length;)if(n=o[r],xd(n)){for(;s<n.index;)s++,"TEMPLATE"===a.nodeName&&(e.push(a),i.currentNode=a.content),null===(a=i.nextNode())&&(i.currentNode=e.pop(),a=i.nextNode());if("node"===n.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(a.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(a,n.name,n.strings,this.options));r++}else this.__parts.push(void 0),r++;return md&&(document.adoptNode(t),customElements.upgrade(t)),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Ad=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:t=>t}),_d=` ${bd} `;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const qd=t=>null===t||!("object"==typeof t||"function"==typeof t);class Id{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(wd()),this.endNode=t.appendChild(wd())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=wd()),t.__insert(this.endNode=wd())}insertAfterPart(t){t.__insert(this.startNode=wd()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(null===this.startNode.parentNode)return;for(;fd(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=vd,t(this)}const t=this.__pendingValue;t!==vd&&(qd(t)?t!==this.value&&this.__commitText(t):t instanceof class{constructor(t,e,o,i){this.strings=t,this.values=e,this.type=o,this.processor=i}getHTML(){const t=this.strings.length-1;let e="",o=!1;for(let i=0;i<t;i++){const t=this.strings[i],n=t.lastIndexOf("\x3c!--");o=(n>-1||o)&&-1===t.indexOf("--\x3e",n+1);const r=Ed.exec(t);e+=null===r?t+(o?_d:yd):t.substr(0,r.index)+r[1]+r[2]+"$lit$"+r[3]+bd}return e+=this.strings[t],e}getTemplateElement(){const t=document.createElement("template");let e=this.getHTML();return void 0!==Ad&&(e=Ad.createHTML(e)),t.innerHTML=e,t}}?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):(t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]))(t)?this.__commitIterable(t):t===gd?(this.value=gd,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,o="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=o:this.__commitNode(document.createTextNode(o)),this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof Od&&this.value.template===e)this.value.update(t.values);else{const o=new Od(e,t.processor,this.options),i=o._clone();o.update(t.values),this.__commitNode(i),this.value=o}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let o,i=0;for(const n of t)o=e[i],void 0===o&&(o=new Id(this.options),e.push(o),0===i?o.appendIntoPart(this):o.insertAfterPart(e[i-1])),o.setValue(n),o.commit(),i++;i<e.length&&(e.length=i,this.clear(o&&o.endNode))}clear(t=this.startNode){((t,e,o=null)=>{for(;e!==o;){const o=e.nextSibling;t.removeChild(e),e=o}})(this.startNode.parentNode,t.nextSibling,this.endNode)}}let Sd=!1;(()=>{try{const t={get capture(){return Sd=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})(),
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const kd=new WeakMap,Nd=(t=>(...e)=>{const o=t(...e);return hd.set(o,!0),o})((t=>e=>{if(!(e instanceof Id))throw new Error("unsafeHTML can only be used in text bindings");const o=kd.get(e);if(void 0!==o&&qd(t)&&t===o.value&&e.value===o.fragment)return;const i=document.createElement("template");i.innerHTML=t;const n=document.importNode(i.content,!0);e.setValue(n),kd.set(e,{value:t,fragment:n})}));let Pd=class extends Gn{constructor(){super(...arguments),this.htmlAgrupador=()=>{var t,e,o;return Sn`<p class="rotulo">${this.elemento.rotulo}</p>
      <p class="texto-agrupador">${Nd(null!==(o=null===(e=null===(t=this.elemento)||void 0===t?void 0:t.conteudo)||void 0===e?void 0:e.texto)&&void 0!==o?o:"")}</p>`},this.htmlDispositivo=()=>{var t,e,o;return Sn`
      <p class="texto" style="${`padding-left: ${20*this.elemento.nivel}px;`}">
        <span class="rotulo">${this.elemento.rotulo}</span>
        ${Nd(null!==(o=null===(e=null===(t=this.elemento)||void 0===t?void 0:t.conteudo)||void 0===e?void 0:e.texto)&&void 0!==o?o:"")}
      </p>
    `}}render(){return Sn`
      <div class="box">
        <div class="conteudo">${this.elemento.agrupador?this.htmlAgrupador():this.htmlDispositivo()}</div>
      </div>
    `}};Pd.styles=tn`
    :host {
      display: block;
      padding: 0px;
      margin: 0px;
      font-family: sans-serif, 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
        'Noto Color Emoji';
      font-size: 1.1em;
      line-height: 1.2;
      color: #646260;
      text-transform: none !important;
    }

    p.rotulo {
      margin: 5px !important;
      color: #373634;
      font-weight: 600;
      text-align: center;
    }

    p.texto {
      margin: 5px !important;
    }

    p.texto-agrupador {
      margin: 5px !important;
      text-align: center;
    }

    span.rotulo {
      color: #373634;
      font-weight: 600;
    }
  `,Wi([Xn({type:Object})],Pd.prototype,"elemento",void 0),Pd=Wi([Wn("lexml-eta-elemento")],Pd);let Td=class extends Gn{render(){return Sn`
      <div class="lx-eta-help">
        <button class="lx-eta-helpbtn">&quest;</button>
        <div class="lx-eta-help-content">
          <div><b>ctrl-shift-a</b>&nbsp;-&nbsp;Seleciona o texto do dispositivo atual</div>
          <div><b>ctrl-a</b>&nbsp;-&nbsp;Seleciona todos os dispositivos da articulação</div>
          <div><b>ctrl-home</b>&nbsp;-&nbsp;Vai para o primeiro dispositivo</div>
          <div><b>ctrl-end</b>&nbsp;-&nbsp;Vai para o último dispositivo</div>
          <div><b>ctrl-&uarr;</b>&nbsp;-&nbsp;Move o dispositivo acima</div>
          <div><b>ctrl-&darr;</b>&nbsp;-&nbsp;Move o dispositivo abaixo</div>
          <hr></hr>
          <div><b>enter</b>&nbsp;-&nbsp;Finaliza a edição do dispositivo atual e cria um novo</div>
          <div><b>ctrl-d</b>&nbsp;-&nbsp;Remove dispositivo atual</div>
          <div><b>ctrl-z</b>&nbsp;-&nbsp;Desfaz ultima alteração</div>
          <div><b>ctrl-y</b>&nbsp;-&nbsp;Refaz alteração</div>
          <hr></hr>
          <div><b>ctrl-alt-A</b>&nbsp;-&nbsp;Transforma o dispositivo em artigo</div>
          <div><b>ctrl-alt-L</b>&nbsp;-&nbsp;Transforma o dispositivo em alínea</div>
          <div><b>ctrl-alt-N</b>&nbsp;-&nbsp;Transforma o dispositivo em inciso</div>
          <div><b>ctrl-alt-O</b>&nbsp;-&nbsp;Transforma o dispositivo em omissis</div>
          <div><b>ctrl-alt-P</b>&nbsp;-&nbsp;Transforma o dispositivo em parágrafo</div>
          <div><b>ctrl-alt-T</b>&nbsp;-&nbsp;Transforma o dispositivo em item</div>
          <div><b>tab</b>&nbsp;-&nbsp;Indenta para a direita o dispositivo, transformando-o no tipo mais provável</div>
          <div><b>shift-tab</b>&nbsp;-&nbsp;Recua o dispositivo para a esquerda, transformando-o no tipo mais provável</div>
          <hr></hr>
          <div><b>ctrl-alt-R</b>&nbsp;-&nbsp;Renumera o dispositivo</div>
        </div>
      </div>
    `}};Td.styles=tn`
    :host {
      position: relative;
      display: inline-block;
    }

    .lx-eta-helpbtn {
      background-color: #ffffff;
      color: black;
      width: 26px;
      height: 22px;
      font-size: 1.1em;
      font-weight: bold;
      vertical-align: middle;
      border: none;
      cursor: pointer;
      text-align: center;
    }

    .lx-eta-help-content {
      display: none;
      position: absolute;
      right: 0;
      background-color: #f9f9f9;
      box-shadow: 0px 4px 4px 4px rgba(0, 0, 0, 0.25);
      z-index: 1;
      width: calc(100vw - 30px);
      max-width: 400px;
    }

    .lx-eta-help-content div {
      color: black;
      padding: 2px 5px;
      text-decoration: none;
      display: block;
      white-space: wrap;
      font-size: 0.8em;
      font-weight: normal !important;
      text-align: left;
    }

    .lx-eta-help:hover .lx-eta-help-content {
      display: block;
    }
  `,Td=Wi([Wn("lexml-eta-help")],Td);class Cd{static getDispositivosNaoOriginais(t){const e=[];return Ea(t,(t=>{t.pai&&t.situacao.descricaoSituacao!==Ds.DISPOSITIVO_ORIGINAL&&e.push(t)})),e}static getDispositivosComando(t){const e=new Array;for(const o of t){if(o.situacao.descricaoSituacao===Ds.DISPOSITIVO_ORIGINAL||ga(o)||va(o))continue;const t=Cd.getDispositivoAfetado(o);t&&!e.includes(t)&&e.push(t)}return e}static getDispositivoAfetado(t){if(_s(t)||vs(t))return t;const e=t.pai;return gs(e)&&e.pai.situacao.descricaoSituacao!==Ds.DISPOSITIVO_ORIGINAL?e.filhos.find((t=>t.situacao.descricaoSituacao===Ds.DISPOSITIVO_ORIGINAL))?t:e.pai:Cd.isAlteracaoIntegral(e)?Cd.getDispositivoAfetado(e):t}static isTextoOmitido(t){var e;return As(t)||t.texto.startsWith(ka)||_s(t)&&!!(null===(e=t.caput)||void 0===e?void 0:e.texto.startsWith(ka))}static isAlteracaoIntegral(t){if(t.situacao.descricaoSituacao===Ds.DISPOSITIVO_ORIGINAL)return!1;if(t.situacao.descricaoSituacao===Ds.DISPOSITIVO_SUPRIMIDO||t.situacao.descricaoSituacao===Ds.DISPOSITIVO_ADICIONADO)return!0;if(!t.filhos.length)return!vs(t)||t.situacao.descricaoSituacao!==Ds.DISPOSITIVO_ORIGINAL;for(const e of t.filhos)if(!Cd.isAlteracaoIntegral(e))return!1;return!0}static getArvoreDispositivos(t){const e=new Array;return t.length?(t.forEach((t=>{this.atualizaMapa(t,e)})),e):e}static atualizaMapa(t,e){const o=this.getHierarquiaDispositivosDeUmDispositivo(t);let i=e;o.forEach((t=>{const e=i.find((e=>e.dispositivo===t));if(e)i=e.filhos;else{const e=new Rd(t);i.push(e),i=e.filhos}}))}static getHierarquiaDispositivosDeUmDispositivo(t){const e=new Array;e.push(t);let o=t.pai;for(;o&&!Aa(o)&&!qs(o);)e.push(o),o=o.pai;return e.reverse(),e}static isSequenciasPlural(t){const e=t.length;return 0!==e&&(e>1||Cd.isSequenciaPlural(t[0]))}static isSequenciaPlural(t){const e=t.getQuantidadeRanges();return 0!==e&&(e>1||t.getPrimeiroRange().getQuantidadeDispositivos()>1)}static getProximoAgrupador(t){let e=t;do{e=ra(e)}while(e&&!_s(e));return e}static getDispositivoIrmaoPosterior(t){if(vs(t)||_s(t))return this.getArtigoPosterior(t);if(!this.isUltimoDispositivoDoMesmoTipo(t)){const e=t.pai,o=e.filhos.indexOf(t)+1;return e.filhos[o]}}static getArtigoPosterior(t){const e=t.pai;if(e.filhos.length){for(let o=e.filhos.indexOf(t)+1;o<e.filhos.length;o++){const t=e.filhos[o];if(vs(t))return t;if(_s(t)){const e=this.buscaProximoArtigo(t);if(e)return e}}if(e.pai)return this.getArtigoPosterior(e)}}static buscaProximoArtigo(t){const e=t.filhos;for(const t of e){if(vs(t))return t;if(_s(t))return this.buscaProximoArtigo(t)}}static isUltimoDispositivoDoMesmoTipo(t){if(!t.pai)return!0;const e=t.pai,o=e.filhos.indexOf(t);return e.filhos.length===o+1||e.filhos[o+1].tipo!==t.tipo}static getFilhosEstiloLexML(t){if(vs(t)){const e=t;return[e.caput,...e.filhos.filter((t=>bs(t)))]}return t.filhos}static getDispositivoAnteriorDireto(t){const e=t.pai,o=this.getFilhosEstiloLexML(e),i=o.indexOf(t);if(!(i>0))return e;for(t=o[i-1];t.filhos.length;)t=t.filhos[t.filhos.length-1];return t}static getDispositivoPosteriorDireto(t){const e=this.getFilhosEstiloLexML(t);return e.length?e[0]:this.getProximoIrmaoRecursivo(t)}static getProximoIrmaoRecursivo(t){if(!t)return;const e=ra(t);if(e)return e;{const e=t.pai;return e?void 0:this.getProximoIrmaoRecursivo(e)}}static isMesmoTipoParaComandoEmenda(t,e){return t.tipo===e.tipo&&(!vs(t)||Cd.isAlteracaoIntegral(t)===Cd.isAlteracaoIntegral(e))}static trataTextoParaCitacao(t){return(vs(t)?t.caput.texto:t.texto).replace(/”( *(?:\(NR\)) *)?/,"’$1 ").replace(/^\s*<p>\s*/i,"").replace(/\s*<\/p>\s*$/i,"")}}class Rd{constructor(t,e=new Array){this.dispositivo=t,this.filhos=e}}const Dd=(t,e)=>{t.splice(t.indexOf(e),1)};class Ld{constructor(t){this.dispositivos=[],t&&this.add(t)}isSituacao(t){return!!this.dispositivos.length&&this.dispositivos[0].situacao.descricaoSituacao===t}isTipo(t){return!!this.dispositivos.length&&this.dispositivos[0].tipo===t}add(t){return!!this.podeAdicionarAoRange(t)&&(this.dispositivos.push(t),!0)}addInicio(t){this.dispositivos.splice(0,0,t)}isUltimo(t){return this.dispositivos.indexOf(t)===this.dispositivos.length-1}getPrimeiro(){return this.dispositivos[0]}getUltimo(){return this.dispositivos[this.dispositivos.length-1]}getQuantidadeDispositivos(){return this.dispositivos.length}getAnterior(t){if(!(t<1))return this.dispositivos[t-1]}getNumeracaoParaComandoEmenda(){let t=this.dispositivos[0].getNumeracaoParaComandoEmenda();return this.dispositivos.length>1&&(t+=" a "+this.getUltimo().getNumeracaoParaComandoEmenda()),t}print(t,e){this.isRotuloNecessario(e)?this.printRotuloInicio(t,e):t.append(this.dispositivos[0].getNumeracaoParaComandoEmenda()),this.printSeparadorProximoDispositivo(t,e),this.printRotuloFimSeExistir(t)}printRotuloFimSeExistir(t){this.dispositivos.length>=2&&t.append(this.dispositivos[this.dispositivos.length-1].getNumeracaoParaComandoEmenda())}printSeparadorProximoDispositivo(t,e){const o=this.getRangeDispositivosPosterior(e);this.dispositivos.length>=3?t.append(" a "):2!==this.dispositivos.length||o?this.dispositivos.length>1&&this.dispositivos.length<3&&o&&t.append(", "):t.append(" e ")}printRotuloInicio(t,e){const o=this.getRangeDispositivosPosterior(e);this.hasApenasUmDispositivo()&&!o||o&&!this.isMesmoTipoSituacao(o)?t.append(this.getRotuloCompletoSingular(this.dispositivos[0])):t.append(this.getRotuloCompletoPlural(this.dispositivos[0]))}isMesmoTipoSituacao(t){return t.isTipo(this.dispositivos[0].tipo)&&t.isSituacao(this.dispositivos[0].situacao.descricaoSituacao)}hasApenasUmDispositivo(){return 1===this.dispositivos.length}isRotuloNecessario(t){const e=this.getRangeDispositivosAnterior(t);return!e||!e.isMesmoTipoSituacao(this)||!(!this.isSituacao(Ds.DISPOSITIVO_ADICIONADO)||this.isMesmoPai(e))}isMesmoPai(t){return this.getPrimeiro().pai===t.getPrimeiro().pai}getRotuloCompletoSingular(t){const e=new Rs;t.situacao.descricaoSituacao!==Ds.DISPOSITIVO_ADICIONADO?e.append(t.artigoDefinidoSingular):e.append(" ");const o=t.getNumeracaoComRotuloParaComandoEmenda();return o.endsWith(".")?e.append(o.substring(0,o.indexOf("."))):e.append(o),e.toString()}getRotuloCompletoPlural(t){const e=new Rs;return t.situacao.descricaoSituacao!==Ds.DISPOSITIVO_ADICIONADO?e.append(t.artigoDefinidoPlural):e.append(" "),e.append(this.getTipoDispositivoPlural(t)),e.append(" "),e.append(t.getNumeracaoParaComandoEmenda()),e.toString()}getRangeDispositivosAnterior(t){const e=t.indexOf(this);if(e>0)return t[e-1]}getRangeDispositivosPosterior(t){if(1===t.length)return;const e=t.indexOf(this);return e>=0&&e<t.length-1?t[e+1]:void 0}getTipoDispositivoPlural(t){var e;return t.tipo===ar.artigo.tipo?"arts.":t.tipo===ar.paragrafo.tipo?"§§":(null===(e=t.descricaoPlural)||void 0===e?void 0:e.toLocaleLowerCase())+""}podeAdicionarAoRange(t){if(this.isVazio())return!0;const e=this.getUltimo();return e.tipo===t.tipo&&(e.situacao.descricaoSituacao===t.situacao.descricaoSituacao&&(!(!vs(t)&&t.pai!==e.pai)&&((t=>{const e=Bs(t),o=e.indexOf(t);return o<e.length-1?e[o+1]:void 0})(e)===t&&Cd.isAlteracaoIntegral(e)===Cd.isAlteracaoIntegral(t))))}isVazio(){return 0===this.dispositivos.length}toString(){const t=new Rs;return this.dispositivos.forEach((e=>{t.append(" "),t.append(""+e.rotulo)})),t.toString()}getDispositivos(){return this.dispositivos}getDispositivo(t){return this.dispositivos[t]}}class jd{constructor(){this.ranges=new Array,this.localizarArtigoEmAgrupador=!1,this.informarCaputDoDispositivo=!1}isVazio(){return 0===this.ranges.length}add(t){this.ranges.push(t)}addInicio(t){this.ranges.unshift(t)}getQuantidadeRanges(){return this.ranges.length}getPrimeiroRange(){return this.ranges[0]}getPrimeiroDispositivo(){return this.ranges[0].getPrimeiro()}getUltimoDispositivo(){return this.ranges[this.ranges.length-1].getUltimo()}getRanges(){return this.ranges}setRanges(t){this.ranges=t}getRange(t){return this.ranges[t]}getTextoListaDeDispositivos(){const t=new Rs,e=this.ranges.length;let o=1;for(const i of this.ranges)o>1&&(o===e?t.append(" e "):t.append(", ")),t.append(i.getNumeracaoParaComandoEmenda()),o++;return t.toString()}static debug(t){const e=new Rs;for(const o of t)e.append("seq: "+o);console.log(e)}toString(){return this.ranges.toString()}remove(t){Dd(this.ranges,t)}}class Md{getSequencias(t){const e=this.getRanges(t);return this.agrupaRanges(e)}getRanges(t){let e=new Array,o=new Ld;for(const i of t)o.add(i)||(e.push(o),o=new Ld,o.add(i));return o.isVazio()||e.push(o),e=Md.separaRangesDeDoisDispositivos(e),e}static separaRangesDeDoisDispositivos(t){const e=new Array;for(const o of t)2===o.getQuantidadeDispositivos()?(e.push(new Ld(o.getPrimeiro())),e.push(new Ld(o.getUltimo()))):e.push(o);return e}separaRangesDeDoisDispositivosEmSequencias(t){for(const e of t)e.setRanges(Md.separaRangesDeDoisDispositivos(e.getRanges()))}agrupaRanges(t){const e=new Array;let o=new jd;for(const i of t)o.isVazio()?(o.add(i),e.push(o)):this.isMesmaSequencia(o,i)?o.add(i):(o=new jd,o.add(i),e.push(o));return e}isMesmaSequencia(t,e){const o=t.getPrimeiroDispositivo(),i=e.getUltimo();return Cd.isMesmoTipoParaComandoEmenda(o,i)&&o.situacao.descricaoSituacao===i.situacao.descricaoSituacao&&(o.tipo===ar.artigo.tipo||o.pai===i.pai)&&o.tipo!==ar.omissis.tipo}separaDispositivosSeguidosDeOmissis(t){const e=new Array;for(const o of t)e.push(...this.separaDispositivosSeguidosDeOmissis2(o));return e}separaDispositivosSeguidosDeOmissis2(t){const e=new Array;let o=new jd;e.push(o);let i=new Ld;o.add(i);for(const n of t.getRanges()){i.getQuantidadeDispositivos()>0&&(i=new Ld,o.add(i));for(const t of n.getDispositivos()){const n=ra(t);n&&n.tipo===ar.omissis.tipo?(this.adicionaouDispositivos(o,i)&&(0===i.getQuantidadeDispositivos()&&o.remove(i),o=new jd,e.push(o),i=new Ld,o.add(i)),o.informarCaputDoDispositivo=!0,i.add(t),o=new jd,e.push(o),i=new Ld,o.add(i)):i.add(t)}}return 0===i.getQuantidadeDispositivos()&&o.remove(i),0===o.getQuantidadeRanges()&&Dd(e,o),this.separaRangesDeDoisDispositivosEmSequencias(e),e}adicionaouDispositivos(t,e){return t.getQuantidadeRanges()>1||e.getQuantidadeDispositivos()>0}}class Fd{static compare(t,e){if(!t||!e)throw new Error("Tentativa de comparação de dispositivo nulo.");if(!t.pai)return-1;if(!e.pai)return 1;const o=Fd.getIndices(t),i=Fd.getIndices(e);return Fd.comparaIndices(o,i)}static getIndices(t){const e=[];let o=this.getPaiParaComparacao(t);for(;o;)e.push(this.getIndexDoFilho(o,t)),t=o,o=this.getPaiParaComparacao(t);return e.reverse(),e}static getPaiParaComparacao(t){if(t.pai)return vs(t.pai)&&va(t)?t.pai.caput:t.pai}static getIndexDoFilho(t,e){return gs(e)?0:bs(e)?t.filhos.indexOf(e)+1:va(e)?-1:t.filhos.indexOf(e)}static comparaIndices(t,e){let o=0;const i=t.length,n=e.length;for(let r=0;r<i&&r<n&&0===o;r++)o=t[r]-e[r];return 0===o&&(o=i-n),o}}class Ud{constructor(t){this.dispositivos=t}static compare(t,e){var o,i;return(null===(o=t.dispositivos)||void 0===o?void 0:o.length)?(null===(i=e.dispositivos)||void 0===i?void 0:i.length)?Fd.compare(t.dispositivos[0],e.dispositivos[0]):-1:1}}var $d;!function(t){t[t.NENHUM=0]="NENHUM",t[t.DEFINIDO=1]="DEFINIDO",t[t.DEFINIDO_COM_PREPOSICAO_A=2]="DEFINIDO_COM_PREPOSICAO_A"}($d||($d={}));class Bd{constructor(){this.artigoAntesDispositivo=$d.NENHUM}getTexto(t){const e=new Rs,o=t.length;let i=1;for(const n of t)i>1&&(i===o?e.append(" e "):e.append(", ")),n.informarCaputDoDispositivo?e.append(this.getReferenciaCaputDoDispositivo(n)):e.append(this.getTextoArtigoAntesSequencia(n)),e.append(this.getRotuloTipoDispositivo(n)),e.append(" "),e.append(n.getTextoListaDeDispositivos()),e.append(this.getRotuloPaisSequencia(n)),i++;return e.toString()}getReferenciaCaputDoDispositivo(t){const e=new Rs,o=t.getPrimeiroDispositivo();if(o.tipo===ar.caput.tipo)return this.getTextoArtigoAntesSequencia(t);const i=Cd.isSequenciaPlural(t);return e.append(this.getTextoArtigoAntesDispositivo(this.artigoAntesDispositivo,Ha,i)),e.append(" caput "),1===t.getRange(0).getQuantidadeDispositivos()?e.append(o.pronomePossessivoSingular):e.append(o.pronomePossessivoPlural),e.toString()}getTextoArtigoAntesSequencia(t){const e=t.getPrimeiroDispositivo(),o=Cd.isSequenciaPlural(t);return this.getTextoArtigoAntesDispositivo(this.artigoAntesDispositivo,e,o)}getTextoArtigoAntesDispositivo(t,e,o){switch(t){case $d.DEFINIDO:return o?e.artigoDefinidoPlural:e.artigoDefinidoSingular;case $d.DEFINIDO_COM_PREPOSICAO_A:return o?e.artigoDefinidoPrecedidoPreposicaoAPlural:e.artigoDefinidoPrecedidoPreposicaoASingular;default:return""}}getRotuloTipoDispositivo(t){const e=t.getPrimeiroDispositivo();return Bd.getRotuloTipoDispositivo(e,Cd.isSequenciaPlural(t))}static getRotuloTipoDispositivo(t,e){return t.getNumeracaoParaComandoEmenda().indexOf("único")>=0?"":e?vs(t)?"arts.":bs(t)?"§§":String(t.descricaoPlural).toLocaleLowerCase():vs(t)?t.situacao.descricaoSituacao!==Ds.DISPOSITIVO_MODIFICADO||Cd.isAlteracaoIntegral(t)?"art.":"caput do art.":bs(t)?"§":String(t.descricao).toLowerCase()}getRotuloPaisSequencia(t){const e=t.getPrimeiroDispositivo(),o=t.localizarArtigoEmAgrupador;return this.getRotuloPais(e,o)}getRotuloPais(t,e){var o;const i=new Rs;let n;for(;!Aa(t);){if(n=t.pai,n&&va(n)){if(t.tipo===ar.omissis.tipo){const o=Cd.getDispositivoAnteriorDireto(t);if(o.tipo!==ar.alteracao.tipo)return i.append("após "),i.append(o.artigoDefinidoSingular),i.append(o.getNumeracaoComRotuloParaComandoEmenda()),i.append(this.getRotuloPais(o,e)),i.toString()}break}if(n&&!Aa(n)&&(!_s(n)||vs(t)&&e)){const r=ga(t),s=!r&&t.situacao.descricaoSituacao===Ds.DISPOSITIVO_ADICIONADO,a=r&&!Cd.isTextoOmitido(t)&&t.situacao.descricaoSituacao===Ds.DISPOSITIVO_ADICIONADO;if(s||a)i.append(n.artigoDefinidoPrecedidoPreposicaoASingular);else if(As(t)){const r=Cd.getDispositivoAnteriorDireto(t),s=Cd.getDispositivoPosteriorDireto(t);if(r===n&&s&&s.pai===n){const t=s.pronomePossessivoSingular+" "+(null===(o=s.descricao)||void 0===o?void 0:o.toLowerCase())+" "+s.getNumeracaoParaComandoEmenda();i.append("antes "+t),i.append(n.pronomePossessivoSingular)}else if(!fs(r)||!r.pai)return i.append("após "),i.append(r.artigoDefinidoSingular),i.append(r.getNumeracaoComRotuloParaComandoEmenda()),i.append(this.getRotuloPais(r,e)),i.toString()}else i.append(n.pronomePossessivoSingular);i.append(n.getNumeracaoComRotuloParaComandoEmenda())}else if(vs(t)&&Aa(n)&&e){const e=Cd.getProximoAgrupador(t);e&&(i.append(" antes "),i.append(e.pronomePossessivoSingular),i.append(e.getNumeracaoComRotuloParaComandoEmenda()))}if(!n)break;t=n}return i.toString()}setArtigoAntesDispositivo(t){this.artigoAntesDispositivo=t}}class zd extends Ud{constructor(t){super(t),this.dispositivos=t}getTexto(t,e,o){const i=new Rs,n=(new Md).getSequencias(this.dispositivos);e?(i.append("Dê-se "),o||i.append("nova redação ")):(i.append(o?"; e ":"; "),i.append("dê-se nova redação "));const r=new Bd;return r.setArtigoAntesDispositivo($d.DEFINIDO_COM_PREPOSICAO_A),i.append(r.getTexto(n)),o&&(i.append(" "+t.genero.pronomePossessivoSingular+" "+t.nome),i.append(e?" a seguinte redação:":", nos termos a seguir:")),Cs(i.toString())}}class Vd extends Ud{constructor(t){super(t),this.dispositivos=t}getTexto(t,e,o){const i=new Rs;let n=(new Md).getSequencias(this.dispositivos);n=this.trataLocalizacaoArtigoEmAgrupador(n);const r=Cd.isSequenciasPlural(n);e?i.append(r?"Acrescentem-se ":"Acrescente-se "):(i.append(o?"; e ":"; "),i.append(r?"acrescentem-se ":"acrescente-se "));const s=new Bd;if(i.append(s.getTexto(n)),o){const o=n[n.length-1];!vs(o.getPrimeiroDispositivo())||o.localizarArtigoEmAgrupador?i.append(t.genero.pronomePossessivoSingular):i.append(t.genero.artigoDefinidoPrecedidoPreposicaoASingular),i.append(t.nome),i.append(e?", com a seguinte redação:":", nos termos a seguir:")}return Cs(i.toString())}trataLocalizacaoArtigoEmAgrupador(t){const e=new Array;for(const o of t)vs(o.getPrimeiroDispositivo())?e.push(...this.trataLocalizacaoArtigoAgrupadorSequencia(o)):e.push(o);return e}trataLocalizacaoArtigoAgrupadorSequencia(t){const e=new Array,o=new Array;for(const e of t.getRanges())o.push(...e.getDispositivos());let i=!1;for(const t of o)if(this.isInclusaoArtigoProximoAgrupador(t)){i=!0;break}if(!i)return e.push(t),e;let n=new jd;n.localizarArtigoEmAgrupador=!0,e.push(n);let r,s=new Ld;n.add(s);for(const t of o)s.isVazio()||(t.pai!==r.pai?(n=new jd,n.localizarArtigoEmAgrupador=!0,e.push(n),s=new Ld,n.add(s)):Cd.getDispositivoIrmaoPosterior(r)!==t&&(s=new Ld,n.add(s))),s.add(t),r=t;for(const t of e)t.setRanges(Md.separaRangesDeDoisDispositivos(t.getRanges()));return e}isInclusaoArtigoProximoAgrupador(t){return this.isInclusaoArtigoInicioAgrupador(t)||this.isInclusaoArtigoAntesAgrupador(t)}isInclusaoArtigoInicioAgrupador(t){const e=t.pai;return!(Aa(e)||!_s(e))&&0===e.filhos.indexOf(t)}isInclusaoArtigoAntesAgrupador(t){const e=t.pai,o=Cd.getDispositivoIrmaoPosterior(t);return!!o&&e!==o.pai}}class Hd extends Ud{constructor(t){super(t),this.dispositivos=t}getTexto(t,e,o){const i=new Rs,n=(new Md).getSequencias(this.dispositivos),r=Cd.isSequenciasPlural(n);e?i.append(r?"Suprimam-se ":"Suprima-se "):(i.append(o?"; e ":"; "),i.append(r?"suprimam-se ":"suprima-se "));const s=new Bd;return s.setArtigoAntesDispositivo($d.DEFINIDO),i.append(s.getTexto(n)),o&&(i.append(" "+t.genero.pronomePossessivoSingular+" "+t.nome),i.append(e?".":", nos termos a seguir:")),Cs(i.toString())}}class Kd{constructor(){this.classificacao=Kl.EMENDA,this.proposicao=new Gd,this.dispositivosSuprimidos=[],this.dispositivosModificados=[],this.dispositivosAdicionados=[],this.comandoEmenda=new Yd,this.justificativa=""}}class Gd{constructor(){this.urn="",this.identificacao=""}}class Qd{constructor(){this.id=""}}class Wd extends Qd{}class Zd extends Qd{constructor(){super(...arguments),this.texto=""}}class Xd extends Qd{}class Yd{constructor(){this.comandos=[]}}class Jd{constructor(t,e){this.cabecalho=t,this.citacao=e}}class tp{constructor(t){this.dispositivos=t}getTexto(t){if(!this.dispositivos.length)return"";let e;const o=t.genero.contracaoEmArtigoDefinidoSingular+" "+t.nome;return e=this.dispositivos.length>1?"Acrescentem-se, onde couber, "+o+" os seguintes artigos:":"Acrescente-se, onde couber, "+o+" o seguinte artigo:",Cs(e)}}class ep{constructor(t){this.nome=t,this.valores=new Array,this.atributos=new Rs}toString(){if(!this.valores.length)return"<"+this.nome+this.atributos+"/>";const t=new Rs("<"+this.nome+this.atributos+">");return this.valores.forEach((e=>{t.append(e)})),t.append("</"+this.nome+">"),t.toString()}add(t){return t&&this.valores.push(t),this}addAtributo(t,e){return this.atributos.append(" "),this.atributos.append(t),e&&(this.atributos.append("='"),this.atributos.append(e),this.atributos.append("'")),this}}class op{constructor(){this.emAlteracao=!1,this.abrirAspasSimples=!1}getTexto(t){let e=Cd.getArvoreDispositivos(t);const o=new Rs,i=e[0],n=i.dispositivo;e=i.filhos;const r=new ep("p").add("“").add(new ep("Rotulo").add(n.rotulo)).add(this.getTextoDoDispositivoOuOmissis(n));return o.append(r.toString()),e.length&&(this.ultimoProcessado=n,this.writeDispositivoTo(o,e)),this.writeOmissisFinal(o,n),o.toString().replace(/(<\/p>(?:<\/Alteracao>)?)$/,"”$1")}getTextoDoDispositivoOuOmissis(t){return t.situacao.descricaoSituacao===Ds.DISPOSITIVO_ADICIONADO||t.situacao.descricaoSituacao===Ds.DISPOSITIVO_MODIFICADO||gs(t)?Cd.trataTextoParaCitacao(t):t.situacao.descricaoSituacao===Ds.DISPOSITIVO_SUPRIMIDO?"(Suprimido)":new ep("Omissis")}writeDispositivoTo(t,e){e.forEach((e=>{var o;const i=e.dispositivo;if(va(i))return t.append("<Alteracao>"),this.emAlteracao=!0,this.abrirAspasSimples=!0,this.ultimoProcessado=i,e.filhos.length&&this.writeDispositivoTo(t,e.filhos),void t.append("</Alteracao>");if(gs(i))return this.ultimoProcessado=i,void(e.filhos.length&&this.writeDispositivoTo(t,e.filhos));const n=Cd.getDispositivoAnteriorDireto(i);if(vs(this.ultimoProcessado)&&!gs(i)?gs(n)||t.append(new ep("p").add(new ep("Omissis")).toString()):this.ultimoProcessado===n||this.ultimoProcessado.situacao.descricaoSituacao===Ds.DISPOSITIVO_SUPRIMIDO&&((t,e)=>{if(!t||!e)return!1;let o=t.pai;for(;o;){if(o===e)return!0;o=o.pai}return!1})(n,this.ultimoProcessado)||t.append(new ep("p").add(new ep("Omissis")).toString()),i.situacao.descricaoSituacao!==Ds.DISPOSITIVO_ORIGINAL||this.hasFilhosPropostos(e.filhos)){const e=vs(i)?i.caput:i,n=this.emAlteracao?null===(o=i.rotulo)||void 0===o?void 0:o.replace("“",""):i.rotulo,r=new ep("p");this.abrirAspasSimples&&(r.add("‘"),this.abrirAspasSimples=!1),r.add(new ep("Rotulo").add(n)).add(this.getTextoDoDispositivoOuOmissis(e)),t.append(r.toString())}else t.append(new ep("p").add(new ep("Omissis")).toString());this.ultimoProcessado=i,e.filhos.length&&this.writeDispositivoTo(t,e.filhos)}))}writeOmissisFinal(t,e){if(e.situacao.descricaoSituacao===Ds.DISPOSITIVO_SUPRIMIDO)return;let o=e;for(;o.filhos.length;)o=o.filhos[o.filhos.length-1];o.situacao.descricaoSituacao!==Ds.DISPOSITIVO_ORIGINAL||Ia(o)||t.append(new ep("p").add(new ep("Omissis")).toString())}hasFilhosPropostos(t){if(!t.length)return!1;let e=!1;for(const o of t){if(o.dispositivo.situacao.descricaoSituacao!==Ds.DISPOSITIVO_ORIGINAL){e=!0;break}if(!e&&o.filhos.length&&(e=this.hasFilhosPropostos(o.filhos),e))break}return e}}class ip{getTexto(t){const e=new Rs,o=gs(t)?t.pai.rotulo:t.rotulo,i=new ep("Rotulo").add(null==o?void 0:o.trim()),n=new ep("p").add("“").add(i).add(Cd.trataTextoParaCitacao(t));if(this.necessitaOmissis(t)){const t=new ep("p").add(new ep("Omissis")).add("”");e.append(n.toString()),e.append(t.toString())}else n.add("”"),e.append(n.toString());return e.toString()}necessitaOmissis(t){return this.temFilhoNaoSuprimido(t)&&!ga(t)}temFilhoNaoSuprimido(t){for(const e of t.filhos)if(e.situacao.descricaoSituacao!==Ds.DISPOSITIVO_SUPRIMIDO)return!0;return!1}}class np{constructor(t){this.articulacao=t}getTexto(){const t=new Rs,e=this.getDispositivosParaCitacao();if(e.length-e.filter((t=>t.situacao.descricaoSituacao===Ds.DISPOSITIVO_SUPRIMIDO)).length>0){const o=e[0];1!==e.length||vs(o)?this.getCitacoesMultiplas(t,e):t.append((new ip).getTexto(o))}return t.toString()}getDispositivosParaCitacao(){const t=Cd.getDispositivosNaoOriginais(this.articulacao);t.sort(Fd.compare);const e=new Array;return t.forEach((t=>{va(t)?t.pai.situacao.descricaoSituacao===Ds.DISPOSITIVO_ADICIONADO&&e.push(t):ga(t)?e.indexOf(t.pai)>=0&&e.push(t):Ia(t)||e.push(t)})),e}getCitacoesMultiplas(t,e){let o,i,n=new Array;e.forEach((e=>{o=!vs(e)&&!_s(e)||ga(e)?Ks(e):e,o!==i&&(n.length&&this.getCitacaoMultipla(t,n),n=[],n.push(o),i=o),n.indexOf(e)<0&&n.push(e)})),n.length&&this.getCitacaoMultipla(t,n)}getCitacaoMultipla(t,e){t.append((new op).getTexto(e))}}class rp{constructor(t,e){this.urn=t,this.articulacao=e}getComandoEmenda(){const t=new Yd,e=Cd.getDispositivosNaoOriginais(this.articulacao),o=this.getDispositivosRepresentativosDeCadaComando(e);if(o.sort(Fd.compare),!o.length)return t;const i=(t=>{const e=Za(t);let o=Ga(e.genero),i="Projeto";return o===Va&&(i=e.urn.startsWith("medida.provisoria")?"Medida Provisória":"Proposta"),new Qa(i,o)})(this.urn);return o.forEach((o=>{let n,r;if(fs(o))n="O comando de emenda a dispositivos de norma alterada ainda não foi implementado.",r="";else{n=new sp(e).getTexto(i);r=new np(this.articulacao).getTexto()}t.comandos.push(new Jd(n,r))})),t}getDispositivosRepresentativosDeCadaComando(t){const e=[];let o=!1;return t.forEach((t=>{const i=Ms(t);i&&i.pai&&i.situacao.descricaoSituacao!==Ds.DISPOSITIVO_SUPRIMIDO?-1===e.indexOf(i)&&i.pai.situacao.descricaoSituacao!==Ds.DISPOSITIVO_ADICIONADO&&e.push(i):o||(o=!0,e.push(t))})),e}}class sp{constructor(t){this.dispositivosEmenda=t}getTexto(t){let e="";const o=Cd.getDispositivosComando(this.dispositivosEmenda),i=o.filter((t=>t.situacao instanceof Lu&&t.situacao.tipoEmenda===Kl.EMENDA_ARTIGO_ONDE_COUBER));if(i.length){if(i.length<o.length)throw new Error("Adição de artigos onde couber e outras alterações na mesma emenda.");return new tp(i).getTexto(t)}const n=[],r=o.filter((t=>t.situacao.descricaoSituacao===Ds.DISPOSITIVO_SUPRIMIDO));r.length&&n.push(new Hd(r));const s=o.filter((t=>t.situacao.descricaoSituacao===Ds.DISPOSITIVO_MODIFICADO));s.length&&n.push(new zd(s));const a=o.filter((t=>t.situacao.descricaoSituacao===Ds.DISPOSITIVO_ADICIONADO));a.length&&n.push(new Vd(a)),n.sort(Ud.compare);let l=0;const u=n.length-1;return n.forEach((o=>{e+=o.getTexto(t,0===l,l===u),l++})),e}}class ap{constructor(t,e,o){this.classificacao=t,this.urn=e,this.articulacao=o}getEmenda(){const t=new Kd;return t.classificacao=this.classificacao,this.preencheDispositivos(t),t.comandoEmenda=new rp(this.urn,this.articulacao).getComandoEmenda(),t}preencheDispositivos(t){const e=Cd.getDispositivosNaoOriginais(this.articulacao),o=e.filter((t=>t.situacao.descricaoSituacao===Ds.DISPOSITIVO_SUPRIMIDO));if(o.length)for(const e of o){const o=new Wd;o.id=e.id,o.rotulo=e.rotulo,t.dispositivosSuprimidos.push(o)}const i=e.filter((t=>t.situacao.descricaoSituacao===Ds.DISPOSITIVO_MODIFICADO));if(i.length)for(const e of i){const o=new Zd;if(vs(e)){const t=e.caput;o.id=t.id,o.texto=t.texto}else o.id=e.id,o.texto=e.texto;o.rotulo=e.rotulo,t.dispositivosModificados.push(o)}const n=e.filter((t=>t.situacao.descricaoSituacao===Ds.DISPOSITIVO_ADICIONADO));if(n.length)for(const e of n){const o=this.criaDispositivoEmendaAdicionado(e);if(t.dispositivosAdicionados.push(o),vs(e)){const o=this.criaDispositivoEmendaAdicionado(e.caput);t.dispositivosAdicionados.push(o)}}}criaDispositivoEmendaAdicionado(t){var e,o;const i=new Xd;if(t.id||(t.id=_l(t)),i.id=t.id,gs(t)||va(t)||As(t)||(i.rotulo=t.rotulo),vs(t)||va(t)||(i.texto=t.texto),gs(t)||va(t))i.idPai=null===(e=t.pai)||void 0===e?void 0:e.id;else{const e=Cd.getFilhosEstiloLexML(t.pai);t!==e[0]?i.idIrmaoAnterior=e[e.indexOf(t)-1].id:Aa(t.pai)||(i.idPai=null===(o=t.pai)||void 0===o?void 0:o.id)}if(va(t)){const e=t.base;e&&(i.urnNormaAlterada=e)}return!As(t)&&i.texto&&i.texto.indexOf(ka)>=0&&(i.textoOmitido=!0),i.rotulo&&i.rotulo.indexOf("“")>=0&&(i.abreAspas=!0),i.texto&&i.texto.indexOf("” (NR)")>=0&&(i.fechaAspas=!0),i}}const lp=(t,e)=>{var o;let i;if(i=_s(t)?e.lXhier=[]:e.lXcontainersOmissis=[],vs(t)){const e=dp(t.caput);up(t,e.value),i.push(e),cp(null===(o=t.filhos)||void 0===o?void 0:o.filter((t=>!gs(t.pai))),i),lp(t.caput,e.value)}else cp(t.filhos,i);return i},up=(t,e)=>{var o,i,n;t.hasAlteracao()&&(e.alteracao={TYPE_NAME:"br_gov_lexml__1.Alteracao",base:"",id:"",content:[]},e.alteracao.base=null!==(i=null===(o=t.alteracoes)||void 0===o?void 0:o.base)&&void 0!==i?i:"",e.alteracao.id=(t=>{const e=[];return Al(t,e),e.join("_")+"_alt1"})(t.caput),null===(n=t.alteracoes.filhos)||void 0===n||n.forEach((t=>{const o=dp(t);e.alteracao.content.push(o),lp(t,o.value)})))},cp=(t,e)=>{null==t||t.forEach((t=>{const o=dp(t);e.push(o),lp(t,o.value)}))},dp=t=>{const e={name:{namespaceURI:"http://www.lexml.gov.br/1.0",localPart:t.tipo,prefix:"",key:`{http://www.lexml.gov.br/1.0}${t.tipo}`,string:`{http://www.lexml.gov.br/1.0}${t.tipo}`},value:{TYPE_NAME:"br_gov_lexml__1.DispositivoType"}};return pp(t,e.value),e},pp=(t,e)=>{e.href=gs(t)?Ol(t.pai)+"_"+Ol(t):Ol(t),e.id=_l(t),t.rotulo&&/^["”“].*/.test(t.rotulo)?(e.abreAspas="s",e.rotulo=t.rotulo.substring(1)):gs(t)||As(t)||(e.rotulo=t.rotulo),gs(t)&&/”.*(NR)/.test(t.texto)&&(e.fechaAspas="s",e.notaAlteracao="NR"),_s(t)?e.nomeAgrupador={TYPE_NAME:"br_gov_lexml__1.GenInline",content:hp(t)}:vs(t)||(t.texto===ka?e.textoOmitido="s":e.p=[{TYPE_NAME:"br_gov_lexml__1.GenInline",content:hp(t)}])},hp=t=>{const e=/<a[^>]+href="(.*?)"[^>]*>(.*?)<\/a>/gi,o=[],i=t.texto.match(e);if(i)t.texto.startsWith(i[0])||o.push(t.texto.substring(0,t.texto.indexOf(i[0])));else{const e=t.texto.indexOf("” (NR)");o.push(t.texto.substring(0,-1===e?void 0:e))}return null==i||i.forEach(((n,r)=>{var s,a;const l=n.match(e)?n:"";o.push(fp(null!=l?l:""));const u=(null===(s=t.texto)||void 0===s?void 0:s.indexOf(n))+n.length;if(u<t.texto.length-1){const e=i[r+1]?t.texto.indexOf(i[r+1]):t.texto.length;o.push(null===(a=t.texto.substring(u,e))||void 0===a?void 0:a.replace(/strong>/gi,"b>").replace(/em>/gi,"i>"))}})),o},fp=t=>{var e;const o=t.match(/href="(.*?)"*>/i),i=o&&o[1]?o[1]:"",n=t.match(/<a[^>]+href=".*?"[^>]*>(.*?)<\/a>/);return{name:{namespaceURI:"http://www.lexml.gov.br/1.0",localPart:"span",prefix:"",key:"{http://www.lexml.gov.br/1.0}span",string:"{http://www.lexml.gov.br/1.0}span"},value:{TYPE_NAME:"br_gov_lexml__1.GenInline",href:i,content:n&&n[1]?[null===(e=n[1])||void 0===e?void 0:e.trim()]:[""]}}};let mp=!1;const vp=(t,e=!1)=>{var o,i;if(mp=e,!(null===(o=null==t?void 0:t.value)||void 0===o?void 0:o.projetoNorma))throw new Error("Não se trata de um documento lexml válido");return{classificacao:(null===(i=t.value)||void 0===i?void 0:i.projetoNorma.norma)?Kl.NORMA:Kl.PROJETO,tipo:Za(bp(t)),...yp(t),...xp(t),...wp(t.value.projetoNorma.norma?t.value.projetoNorma.norma:t.value.projetoNorma.projeto)}},gp=t=>null==t?void 0:t.replace(/[\n]/g,"").trim(),bp=t=>{var e,o,i;return null===(i=null===(o=null===(e=null==t?void 0:t.value)||void 0===e?void 0:e.metadado)||void 0===o?void 0:o.identificacao)||void 0===i?void 0:i.urn},yp=t=>({urn:bp(t)}),xp=t=>{var e,o,i,n,r,s,a,l,u,c,d,p,h,f,m,v;const g=null!==(s=null===(r=null===(n=null===(i=null===(o=null===(e=null==t?void 0:t.value)||void 0===e?void 0:e.projetoNorma)||void 0===o?void 0:o.norma)||void 0===i?void 0:i.parteInicial)||void 0===n?void 0:n.epigrafe)||void 0===r?void 0:r.content[0])&&void 0!==s?s:"",b=Ip(null===(c=null===(u=null===(l=null===(a=null==t?void 0:t.value)||void 0===a?void 0:a.projetoNorma)||void 0===l?void 0:l.norma)||void 0===u?void 0:u.parteInicial)||void 0===c?void 0:c.ementa.content),y=null!==(v=null===(m=null===(f=null===(h=null===(p=null===(d=null==t?void 0:t.value)||void 0===d?void 0:d.projetoNorma)||void 0===p?void 0:p.norma)||void 0===h?void 0:h.parteInicial)||void 0===f?void 0:f.preambulo)||void 0===m?void 0:m.p[0].content[0])&&void 0!==v?v:"";return{epigrafe:gp(g),ementa:gp(b),preambulo:gp(y)}},wp=t=>({articulacao:Ep(t.articulacao)}),Ep=t=>{const e=Iu();return Op(e,t.lXhier),e},Op=(t,e)=>{t&&e&&(null==e||e.forEach((e=>{var o,i,n,r,s,a,l,u,c,d,p,h,f,m,v,g;let b;const y=null===(o=e.value)||void 0===o?void 0:o.notaAlteracao,x=void 0!==(null===(i=e.value)||void 0===i?void 0:i.fechaAspas)?y?`” (${y})`:"” (NR)":"";"Caput"===(null===(n=e.name)||void 0===n?void 0:n.localPart)?("s"===(null===(r=e.value)||void 0===r?void 0:r.abreAspas)?(b.rotulo="“"+(null===(s=e.value)||void 0===s?void 0:s.rotulo),b.cabecaAlteracao=!0,b.notaAlteracao=y):(null===(a=e.value)||void 0===a?void 0:a.rotulo)&&(b.rotulo=e.value.rotulo,b.createNumeroFromRotulo(b.rotulo)),t.texto=(null===(l=e.value)||void 0===l?void 0:l.textoOmitido)?ka:gp(qp(e))+x,t.caput.href=null===(u=e.value)||void 0===u?void 0:u.href,t.caput.id=null===(c=e.value)||void 0===c?void 0:c.id,Ap(t,null===(d=e.value)||void 0===d?void 0:d.alteracao),Op(t.caput,null===(p=e.value)||void 0===p?void 0:p.lXcontainersOmissis)):"alteracao"===(null===(h=e.name)||void 0===h?void 0:h.localPart)?(Ap(t,e),Op(t.caput,null===(f=e.value)||void 0===f?void 0:f.lXcontainersOmissis)):(b=_p(t,e),Op(b,null!==(v=null===(m=e.value)||void 0===m?void 0:m.lXhier)&&void 0!==v?v:null===(g=e.value)||void 0===g?void 0:g.lXcontainersOmissis))})))},Ap=(t,e)=>{var o;e&&(Su(t),t.alteracoes.id=e.id,t.alteracoes.base=e.base,mp&&(t.alteracoes.situacao=new ju),null===(o=e.content)||void 0===o||o.forEach((e=>{var o,i,n,r;const s=_p(t.alteracoes,e);s.isDispositivoAlteracao=!0,s.rotulo="“"+(null===(o=e.value)||void 0===o?void 0:o.rotulo),Op(s,null!==(n=null===(i=e.value)||void 0===i?void 0:i.lXhier)&&void 0!==n?n:null===(r=e.value)||void 0===r?void 0:r.lXcontainersOmissis)})))},_p=(t,e)=>{var o,i,n,r,s,a,l,u,c;const d=_u(t,null===(o=e.name)||void 0===o?void 0:o.localPart),p=null===(i=e.value)||void 0===i?void 0:i.notaAlteracao,h=void 0!==(null===(n=e.value)||void 0===n?void 0:n.fechaAspas)?p?`” (${p})`:"” (NR)":"";return As(d)||("s"===(null===(r=e.value)||void 0===r?void 0:r.abreAspas)?(d.rotulo="“"+(null===(s=e.value)||void 0===s?void 0:s.rotulo),d.cabecaAlteracao=!0,d.notaAlteracao=p):d.rotulo=null===(a=e.value)||void 0===a?void 0:a.rotulo,d.createNumeroFromRotulo(d.rotulo)),d.href=null===(l=e.value)||void 0===l?void 0:l.href,d.id=null===(u=e.value)||void 0===u?void 0:u.id,mp&&(d.situacao=new ju,vs(d)&&(d.caput.situacao=new ju)),d.texto=(null===(c=e.value)||void 0===c?void 0:c.textoOmitido)?ka:gp(qp(e))+h,d},qp=t=>{var e,o,i,n,r;let s="";return(null===(e=t.value)||void 0===e?void 0:e.nomeAgrupador)?null!==(o=t.value.nomeAgrupador.content[0])&&void 0!==o?o:"":(null===(r=null===(n=null===(i=t.value)||void 0===i?void 0:i.p)||void 0===n?void 0:n.map((t=>t)))||void 0===r||r.map((t=>t.content)).forEach((t=>s+=Ip(t))),s.replace(/b>/gi,"strong>").replace(/i>/gi,"em>"))},Ip=t=>{let e="";return null==t||t.forEach((t=>{var o;t.value?e+=`<a href="${(o=t.value).href}"> ${o.content[0]} </a>`:e+=t})),e},Sp={name:{namespaceURI:"http://www.lexml.gov.br/1.0",localPart:"LexML",prefix:"",key:"{http://www.lexml.gov.br/1.0}LexML",string:"{http://www.lexml.gov.br/1.0}LexML"},value:{TYPE_NAME:"br_gov_lexml__1.LexML",metadado:{TYPE_NAME:"br_gov_lexml__1.Metadado",identificacao:{TYPE_NAME:"br_gov_lexml__1.Identificacao",urn:""}},projetoNorma:{TYPE_NAME:"br_gov_lexml__1.ProjetoNorma",norma:{TYPE_NAME:"br_gov_lexml__1.HierarchicalStructure",parteInicial:{TYPE_NAME:"br_gov_lexml__1.ParteInicial",epigrafe:{TYPE_NAME:"br_gov_lexml__1.GenInline",id:"epigrafe",content:[""]},ementa:{TYPE_NAME:"br_gov_lexml__1.GenInline",id:"ementa",content:[""]},preambulo:{TYPE_NAME:"br_gov_lexml__1.TextoType",id:"preambulo",p:[{TYPE_NAME:"br_gov_lexml__1.GenInline",content:[""]}]}},articulacao:{TYPE_NAME:"br_gov_lexml__1.Articulacao",lXhier:[{name:{namespaceURI:"http://www.lexml.gov.br/1.0",localPart:"Artigo",prefix:"",key:"{http://www.lexml.gov.br/1.0}Artigo",string:"{http://www.lexml.gov.br/1.0}Artigo"},value:{TYPE_NAME:"br_gov_lexml__1.DispositivoType",id:"art1",rotulo:"Art. 1º",lXcontainersOmissis:[{name:{namespaceURI:"http://www.lexml.gov.br/1.0",localPart:"Caput",prefix:"",key:"{http://www.lexml.gov.br/1.0}Caput",string:"{http://www.lexml.gov.br/1.0}Caput"},value:{TYPE_NAME:"br_gov_lexml__1.DispositivoType",id:"art1_cpt",p:[{TYPE_NAME:"br_gov_lexml__1.GenInline",content:[""]}]}}]}}]}}}}};let kp=class extends(Jn(Oc)(Gn)){constructor(){super(...arguments),this.modo="",this.projetoNorma={},this.emenda={}}createRenderRoot(){return this}getEmenda(){const t=this.modo;if(t!==Kl.EMENDA&&t!==Kl.EMENDA_ARTIGO_ONDE_COUBER)return;const e=this.projetoNorma.value.metadado.identificacao.urn,o=Oc.getState().elementoReducer.articulacao;return new ap(t,e,o).getEmenda()}getComandoEmenda(){const t=this.projetoNorma.value.metadado.identificacao.urn,e=Oc.getState().elementoReducer.articulacao;return new rp(t,e).getComandoEmenda()}getProjetoAtualizado(){const t={...this.projetoNorma},e=(o=Oc.getState().elementoReducer.articulacao,{TYPE_NAME:"br_gov_lexml__1.Articulacao",lXhier:lp(o,{articulacao:{}})});var o;return t.value.projetoNorma[t.value.projetoNorma.norma?"norma":"projeto"].articulacao.lXhier=e.lXhier,t}update(t){(this.hasChangedProjetoNorma(t)||this.hasChangedModo(t))&&this.loadProjetoNorma(),this.hasChangedEmenda(t)&&Object.keys(this.emenda).length>0&&this.loadEmenda(),super.update(t)}hasChangedProjetoNorma(t){return t.has("projetoNorma")&&void 0!==t.get("projetoNorma")}hasChangedModo(t){return t.has("modo")&&void 0!==t.get("modo")}hasChangedEmenda(t){return t.has("emenda")&&void 0!==t.get("emenda")}loadProjetoNorma(){var t;let e;if(this.projetoNorma&&this.projetoNorma.value||(this.projetoNorma=Sp),this.modo===Kl.EMENDA_ARTIGO_ONDE_COUBER){const o=null!==(t=bp(this.projetoNorma))&&void 0!==t?t:"";e=vp(Sp,!0),e.urn=o;const i=e.articulacao.artigos[0];i.rotulo="Art.",i.numero="1",i.id="art1";const n=new Lu;n.tipoEmenda=Kl.EMENDA_ARTIGO_ONDE_COUBER,i.situacao=n}else e=vp(this.projetoNorma,this.modo===Kl.EMENDA);var o;Oc.dispatch((o=e.articulacao,{type:"ABRIR_ARTICULACAO",classificacao:this.modo,articulacao:o}))}loadEmenda(){this.emenda&&setTimeout((()=>{Oc.dispatch(Or.execute({dispositivosModificados:this.emenda.dispositivosModificados,dispositivosSuprimidos:this.emenda.dispositivosSuprimidos,dispositivosAdicionados:this.emenda.dispositivosAdicionados}))}),1e3)}render(){return Sn`
      <style>
        #gtx-trans {
          display: none;
        }

        lexml-eta-articulacao {
          display: block;
          height: 100%;
        }

        lexml-eta-articulacao:focus {
          outline: 0;
          border: 0px solid #f1f1f1;
          -webkit-box-shadow: 0px;
          box-shadow: none;
        }
      </style>

      <lexml-eta-articulacao></lexml-eta-articulacao>
    `}};Wi([Xn({type:String})],kp.prototype,"modo",void 0),Wi([Xn({type:Object})],kp.prototype,"projetoNorma",void 0),Wi([Xn({type:Object})],kp.prototype,"emenda",void 0),kp=Wi([Wn("lexml-eta")],kp);const Np={id:"",nome:"",siglaPartido:"",siglaUF:"",indSexo:"",siglaCasa:"",cargo:""},Pp=tn`
  .lexml-autoria {
    display: block;
    border: 1px solid #ccc;
    height: 100%;
    padding: 0 10px;
    margin: 0px 5px;
    font-size: 1em;
    max-width: 700px;
  }

  .grid-autoria {
    display: grid;
    grid-template-columns: 3fr 2fr 250px;
  }
`;let Tp=class extends Gn{createRenderRoot(){return this}update(t){super.update(t)}atualizarObjeto(t){this.autoria.tipo=t.target.value}render(){var t,e;return Sn`
      <div @input=${this.atualizarObjeto}>
        <div>
          <p><strong>Tipo de autoria</strong></p>

          <input type="radio" id="opt-parlamentar" name="tipoAutoria" value="Parlamentar" ?checked=${"Parlamentar"===(null===(t=this.autoria)||void 0===t?void 0:t.tipo)} />
          <label for="opt-parlamentar">Parlamentar</label>

          <input type="radio" id="opt-comissao" name="tipoAutoria" value="Comissão" ?checked=${"Comissão"===(null===(e=this.autoria)||void 0===e?void 0:e.tipo)} />
          <label for="opt-comissao">Comissão</label>
        </div>
      </div>
    `}};Wi([Xn({type:Object})],Tp.prototype,"autoria",void 0),Tp=Wi([Wn("lexml-tipo-autoria")],Tp);let Cp=class extends Gn{constructor(){super(...arguments),this.parlamentares=[]}createRenderRoot(){return this}update(t){super.update(t)}montarItemAutocomplete(t){return Sn`<div>${t.nome}</div>`}emitEvent(t){const e=new CustomEvent(t,{detail:{parlamentar:this.parlamentar}});this.dispatchEvent(e)}atualizarObjeto(){const t=this.getElementsByTagName("input");this.parlamentar.nome=t[0].value,this.parlamentar.cargo=t[1].value}render(){var t;return Sn`
      <div class="grid-autoria" @input=${this.atualizarObjeto}>
        <!-- <label for="tex-parlamentar">Parlamentar</label> -->
        <!-- <elix-auto-complete-combo-box aria-label="parlamentar"> ${this.parlamentares.map(this.montarItemAutocomplete)} </elix-auto-complete-combo-box> -->
        <input type="text" aria-label="parlamentar" placeholder="Digite o nome..." value=${(null===(t=this.parlamentar)||void 0===t?void 0:t.nome)||""} />

        <!-- <label for="tex-cargo">Cargo</label> -->
        <input type="text" id="tex-cargo" placeholder="ex: Presidente da Comissão ..., Líder do ..." />

        <div>
          <button id="paraBaixo" @click=${()=>this.emitEvent("paraBaixo")}>Para baixo</button>
          <button id="paraCima" @click=${()=>this.emitEvent("paraCima")}>Para cima</button>
          <button id="excluir" @click=${()=>this.emitEvent("excluir")}>Excluir</button>
        </div>
      </div>
    `}};Cp.styles=[Pp],Wi([Xn({type:Array})],Cp.prototype,"parlamentares",void 0),Wi([Xn({type:Object})],Cp.prototype,"parlamentar",void 0),Cp=Wi([Wn("lexml-parlamentar-autocomplete")],Cp);let Rp=class extends Gn{update(t){this.autoria&&!this.autoria.parlamentares.length&&this.incluirNovoParlamentar(),super.update(t)}incluirNovoParlamentar(){var t;this.autoria.parlamentares=((t,e)=>{const o=[...t];return o.push(e),o})(t=this.autoria.parlamentares,{...Np,id:"novo"+(t.length+1)}),this.requestUpdate()}moverParlamentar(t,e){this.autoria.parlamentares=((t,e,o)=>{const i=t.findIndex((t=>t.id===e.id)),n=i+o;if(n<0||n>=t.length)return t;const r=[...t];return r.splice(n,0,r.splice(i,1)[0]),r})(this.autoria.parlamentares,t,e),this.requestUpdate()}excluir(t){var e,o;this.autoria.parlamentares=(e=this.autoria.parlamentares,o=t.detail.parlamentar,e.filter((t=>t.id!==o.id))),this.requestUpdate()}montarParlamentarAutocomplete(t,e){return Sn`<lexml-parlamentar-autocomplete
      .parlamentar=${t}
      .parlamentares=${e}
      @paraBaixo=${t=>this.moverParlamentar(t.detail.parlamentar,1)}
      @paraCima=${t=>this.moverParlamentar(t.detail.parlamentar,-1)}
      @excluir=${this.excluir}
    ></lexml-parlamentar-autocomplete>`}render(){var t;return Sn`
      <div>
        <div class="lexml-autoria">
          <h3>Autoria</h3>
          <lexml-tipo-autoria .autoria=${this.autoria}></lexml-tipo-autoria>
          <div class="grid-autoria">
            <div>Parlamentar</div>
            <div>Cargo</div>
            <div></div>
          </div>
          ${null===(t=this.autoria)||void 0===t?void 0:t.parlamentares.map((t=>this.montarParlamentarAutocomplete(t,this.parlamentares)))}
        </div>
        <button @click=${this.incluirNovoParlamentar}>Incluir outro parlamentar</button>
      </div>
    `}};Rp.styles=[Pp],Wi([Xn({type:Object})],Rp.prototype,"autoria",void 0),Wi([Xn({type:Array})],Rp.prototype,"parlamentares",void 0),Rp=Wi([Wn("lexml-autoria")],Rp);export{Ac as ArticulacaoComponent,Rp as AutoriaComponent,Sc as ComandoEmendaComponent,pd as EditorComponent,Pd as ElementoComponent,Td as HelpComponent,kp as LexmlEtaComponent};
//# sourceMappingURL=index.min.js.map
