{"version":3,"file":"index.min.js","sources":["../node_modules/elix/src/core/internal.js","../node_modules/elix/src/core/dom.js","../node_modules/elix/src/core/htmlLiterals.js","../node_modules/elix/src/core/template.js","../node_modules/elix/src/core/AttributeMarshallingMixin.js","../node_modules/elix/src/core/ReactiveMixin.js","../node_modules/elix/src/core/ShadowTemplateMixin.js","../node_modules/elix/src/core/ReactiveElement.js","../node_modules/elix/src/base/internal.js","../node_modules/elix/src/base/DialogModalityMixin.js","../node_modules/elix/src/base/FocusCaptureMixin.js","../node_modules/elix/src/base/KeyboardMixin.js","../node_modules/elix/src/base/Backdrop.js","../node_modules/elix/src/base/AriaRoleMixin.js","../node_modules/elix/src/base/ModalBackdrop.js","../node_modules/elix/src/base/OpenCloseMixin.js","../node_modules/elix/src/base/OverlayFrame.js","../node_modules/elix/src/base/OverlayMixin.js","../node_modules/elix/src/base/SlotContentMixin.js","../node_modules/elix/src/base/Overlay.js","../node_modules/elix/src/base/Dialog.js","../node_modules/elix/src/base/AlertDialog.js","../node_modules/elix/src/base/ComposedFocusMixin.js","../node_modules/elix/src/base/DelegateInputLabelMixin.js","../node_modules/elix/src/base/FocusVisibleMixin.js","../node_modules/elix/src/base/DelegateFocusMixin.js","../node_modules/elix/src/base/WrappedStandardElement.js","../node_modules/elix/src/base/Button.js","../node_modules/elix/src/plain/PlainButton.js","../node_modules/elix/src/plain/PlainButtonMixin.js","../node_modules/elix/src/plain/PlainBorderButton.js","../node_modules/elix/src/plain/PlainModalBackdrop.js","../node_modules/elix/src/plain/PlainOverlayFrame.js","../node_modules/elix/src/plain/PlainModalOverlayMixin.js","../node_modules/elix/src/plain/PlainAlertDialog.js","../node_modules/elix/define/AlertDialog.js","../node_modules/elix/src/plain/PlainDialog.js","../node_modules/elix/define/Dialog.js","../node_modules/elix/src/base/accessibility.js","../node_modules/elix/src/base/scrolling.js","../node_modules/elix/src/base/ItemsCursorMixin.js","../node_modules/elix/src/base/content.js","../node_modules/elix/src/base/KeyboardPagedCursorMixin.js","../node_modules/elix/src/base/constants.js","../node_modules/elix/src/base/KeyboardPrefixCursorMixin.js","../node_modules/elix/src/base/LanguageDirectionMixin.js","../node_modules/elix/src/base/ContentItemsMixin.js","../node_modules/elix/src/base/Menu.js","../node_modules/elix/src/base/AriaMenuMixin.js","../node_modules/elix/src/base/CursorAPIMixin.js","../node_modules/elix/src/base/CursorInViewMixin.js","../node_modules/elix/src/base/DirectionCursorMixin.js","../node_modules/elix/src/base/ItemsAPIMixin.js","../node_modules/elix/src/base/ItemsTextMixin.js","../node_modules/elix/src/base/KeyboardDirectionMixin.js","../node_modules/elix/src/base/SlotItemsMixin.js","../node_modules/elix/src/base/TapCursorMixin.js","../node_modules/elix/src/base/PopupDragSelectMixin.js","../node_modules/elix/src/base/DisabledMixin.js","../node_modules/elix/src/base/layoutPopup.js","../node_modules/elix/src/base/PopupModalityMixin.js","../node_modules/elix/src/base/Popup.js","../node_modules/elix/src/base/PopupSource.js","../node_modules/elix/src/base/PopupButton.js","../node_modules/elix/src/base/PopupListMixin.js","../node_modules/elix/src/base/MenuButton.js","../node_modules/elix/src/base/UpDownToggle.js","../node_modules/elix/src/base/PopupToggleMixin.js","../node_modules/elix/src/plain/PlainMenu.js","../node_modules/elix/src/plain/PlainOpenCloseToggle.js","../node_modules/elix/src/plain/PlainBackdrop.js","../node_modules/elix/src/plain/PlainPopup.js","../node_modules/elix/src/plain/PlainMenuButton.js","../node_modules/elix/define/MenuButton.js","../node_modules/elix/src/base/MenuItem.js","../node_modules/elix/src/base/CurrentMixin.js","../node_modules/elix/src/base/SelectableMixin.js","../node_modules/elix/src/plain/PlainMenuItem.js","../node_modules/elix/define/MenuItem.js","../node_modules/elix/src/base/MenuSeparator.js","../node_modules/elix/src/plain/PlainMenuSeparator.js","../node_modules/elix/define/MenuSeparator.js","../node_modules/elix/src/base/Toast.js","../node_modules/elix/src/base/TransitionEffectMixin.js","../node_modules/elix/src/plain/PlainToast.js","../node_modules/tslib/tslib.es6.js","../node_modules/elix/define/Toast.js","../node_modules/quill/dist/quill.js","../node_modules/lit-html/lib/dom.js","../node_modules/lit-html/lib/template.js","../node_modules/lit-html/lib/modify-template.js","../node_modules/lit-html/lib/directive.js","../node_modules/lit-html/lib/part.js","../node_modules/lit-html/lib/template-instance.js","../node_modules/lit-html/lib/template-result.js","../node_modules/lit-html/lib/parts.js","../node_modules/lit-html/lib/template-factory.js","../node_modules/lit-html/lib/render.js","../node_modules/lit-html/lib/default-template-processor.js","../node_modules/lit-html/lit-html.js","../node_modules/lit-html/lib/shady-render.js","../node_modules/lit-element/lib/updating-element.js","../node_modules/lit-element/lib/decorators.js","../node_modules/lit-element/lib/css-tag.js","../node_modules/lit-element/lit-element.js","../node_modules/pwa-helpers/connect-mixin.js","../node_modules/symbol-observable/es/index.js","../node_modules/symbol-observable/es/ponyfill.js","../node_modules/redux/es/redux.js","../../src/redux/app/appReducer.ts","../../src/model/lexml/tipo/tipoDispositivo.ts","../../src/model/lexml/acao/adicionarElementoAction.ts","../../src/model/lexml/acao/agruparElementoAction.ts","../../src/model/lexml/acao/aplicarAlteracoesEmenda.ts","../../src/model/lexml/acao/atualizarElementoAction.ts","../../src/model/lexml/acao/atualizarReferenciaElementoAction.ts","../../src/model/lexml/acao/atualizarTextoElementoAction.ts","../../src/model/lexml/acao/elementoSelecionadoAction.ts","../../src/model/lexml/acao/informarNormaAction.ts","../../src/model/lexml/acao/moverElementoAbaixoAction.ts","../../src/model/lexml/acao/moverElementoAcimaAction.ts","../../src/model/lexml/acao/removerElementoAction.ts","../../src/model/lexml/acao/renumerarElementoAction.ts","../../src/model/lexml/acao/restaurarElemento.ts","../../src/model/lexml/acao/suprimirElemento.ts","../../src/model/lexml/acao/transformarElementoAction.ts","../../src/model/lexml/acao/validarArticulacaoAction.ts","../../src/model/lexml/acao/validarElementoAction.ts","../../src/model/dispositivo/tipo.ts","../../src/util/string-util.ts","../../src/model/dispositivo/situacao.ts","../../src/model/lexml/hierarquia/hierarquiaUtil.ts","../../src/model/lexml/util/mensagem.ts","../../src/model/lexml/conteudo/textoOmissis.ts","../../src/model/lexml/conteudo/conteudoUtil.ts","../../src/model/lexml/conteudo/conteudoValidator.ts","../../src/model/dispositivo/genero.ts","../../src/model/lexml/documento/vocabulario.ts","../../src/model/lexml/documento/urnUtil.ts","../../src/model/lexml/numeracao/numeracaoUtil.ts","../../src/model/lexml/numeracao/numeracaoValidator.ts","../../src/model/lexml/dispositivo/dispositivoValidator.ts","../../src/model/lexml/hierarquia/hierarquiaValidator.ts","../../src/model/lexml/situacao/dispositivoSuprimido.ts","../../src/model/lexml/util/idUtil.ts","../../src/model/elemento/elementoUtil.ts","../../src/redux/state.ts","../../src/redux/elemento/reducer/loadArticulacao.ts","../../src/redux/elemento/reducer/abreArticulacao.ts","../../src/util/counter.ts","../../src/model/dispositivo/validacao.ts","../../src/model/lexml/acao/blocoAlteracaoAction.ts","../../src/model/lexml/alteracao/blocoAlteracaoNaoPermitido.ts","../../src/model/lexml/conteudo/tipoConteudo.ts","../../src/model/documento/classificacao.ts","../../src/model/lexml/conteudo/conteudoDispositivo.ts","../../src/model/lexml/hierarquia/hierarquiaAgrupador.ts","../../src/model/lexml/hierarquia/hierarquiaDispositivo.ts","../../src/model/lexml/numeracao/numeracaoAgrupador.ts","../../src/model/lexml/acao/index.ts","../../src/model/lexml/regras/regrasAgrupadores.ts","../../src/model/lexml/regras/regrasUtil.ts","../../src/model/lexml/situacao/dispositivoNovo.ts","../../src/model/lexml/situacao/situacaoDispositivo.ts","../../src/model/lexml/tipo/tipoLexml.ts","../../src/model/lexml/dispositivo/dispositivoLexmlUtil.ts","../../src/model/lexml/dispositivo/dispositivoLexmlFactory.ts","../../src/model/lexml/regras/regrasAlinea.ts","../../src/model/lexml/numeracao/numeracaoAlinea.ts","../../src/model/lexml/regras/regrasArtigo.ts","../../src/model/lexml/alteracao/BlocoAlteracaoPermitido.ts","../../src/model/lexml/numeracao/numeracaoArtigo.ts","../../src/model/lexml/hierarquia/hierarquiaArtigo.ts","../../src/model/lexml/tipo/tipoArtigo.ts","../../src/model/lexml/regras/regrasCaput.ts","../../src/model/lexml/numeracao/numeracaoCaput.ts","../../src/model/lexml/regras/regrasDispositivoGenerico.ts","../../src/model/lexml/numeracao/numeracaoGenerico.ts","../../src/model/lexml/regras/regrasInciso.ts","../../src/model/lexml/numeracao/numeracaoInciso.ts","../../src/model/lexml/regras/regrasItem.ts","../../src/model/lexml/numeracao/numeracaoItem.ts","../../src/model/lexml/regras/regrasParagrafo.ts","../../src/model/lexml/numeracao/numeracaoParagrafo.ts","../../src/model/lexml/tipo/tipoArticulacao.ts","../../src/model/lexml/regras/regrasOmissis.ts","../../src/model/lexml/conteudo/conteudoOmissis.ts","../../src/model/lexml/numeracao/numeracaoIndisponivel.ts","../../src/model/lexml/situacao/dispositivoAdicionado.ts","../../src/model/lexml/situacao/dispositivoOriginal.ts","../../src/model/lexml/acao/acaoUtil.ts","../../src/redux/elemento/util/reducerUtil.ts","../../src/redux/elemento/evento/eventos.ts","../../src/redux/elemento/evento/eventosUtil.ts","../../src/redux/elemento/util/stateReducerUtil.ts","../../src/redux/elemento/reducer/adicionaElemento.ts","../../src/redux/elemento/reducer/agrupaElemento.ts","../../src/model/lexml/situacao/dispositivoModificado.ts","../../src/redux/elemento/reducer/aplicaAlteracoesEmenda.ts","../../src/redux/elemento/reducer/atualizaReferenciaElemento.ts","../../src/redux/elemento/reducer/transformaTipoElemento.ts","../../src/redux/elemento/util/undoRedoReducerUtil.ts","../../src/redux/elemento/reducer/removeElemento.ts","../../src/redux/elemento/reducer/restauraElemento.ts","../../src/redux/elemento/reducer/suprimeElemento.ts","../../src/redux/store.ts","../../src/redux/elemento/reducer/elementoReducer.ts","../../src/redux/elemento/reducer/atualizaElemento.ts","../../src/redux/elemento/reducer/atualizaTextoElemento.ts","../../src/redux/elemento/reducer/selecionaElemento.ts","../../src/redux/elemento/reducer/solicitaNorma.ts","../../src/redux/elemento/reducer/moveElementoAbaixo.ts","../../src/redux/elemento/reducer/moveElementoAcima.ts","../../src/redux/elemento/reducer/renumeraElemento.ts","../../src/model/lexml/acao/openArticulacaoAction.ts","../../src/model/lexml/acao/redoAction.ts","../../src/redux/elemento/reducer/redo.ts","../../src/model/lexml/acao/shiftTabAction.ts","../../src/model/lexml/acao/tabAction.ts","../../src/redux/elemento/reducer/modificaTipoElementoWithTab.ts","../../src/model/lexml/acao/undoAction.ts","../../src/redux/elemento/reducer/undo.ts","../../src/redux/elemento/reducer/validaElemento.ts","../../src/redux/elemento/reducer/validaArticulacao.ts","../../src/components/articulacao.component.ts","../node_modules/lit-html/directives/unsafe-html.js","../../src/components/comandoEmenda/comandoEmenda.component.ts","../../src/model/elemento/elemento.ts","../../src/model/lexml/acao/transformarAction.ts","../../src/util/eta-quill/eta-blot.ts","../../src/util/eta-quill/eta-blot-menu.ts","../../src/util/eta-quill/eta-blot-menu-botao.ts","../../src/util/eta-quill/eta-blot-menu-conteudo.ts","../../src/util/eta-quill/eta-blot-menu-item.ts","../../src/util/eta-quill/eta-blot-rotulo.ts","../../src/util/eta-quill/eta-blot-espaco.ts","../../src/util/eta-quill/eta-container-table.ts","../../src/util/event-util.ts","../../src/util/observable.ts","../../src/util/eta-quill/eta-keyboard.ts","../../src/util/eta-quill/eta-blot-conteudo.ts","../../src/util/eta-quill/eta-blot-mensagem.ts","../../src/util/eta-quill/eta-blot-mensagens.ts","../../src/util/eta-quill/eta-clipboard.ts","../../src/util/eta-quill/eta-container-td-direito.ts","../../src/util/eta-quill/eta-container-td-esquerdo.ts","../../src/util/eta-quill/eta-container-tr.ts","../../src/util/eta-quill/eta-quill-buffer.ts","../../src/util/eta-quill/eta-quill.ts","../../src/util/eta-quill/eta-quill-util.ts","../../src/components/editor/informarNormaDialog.ts","../../src/assets/css/quill.snow.css.ts","../../src/assets/css/editor.css.ts","../../src/components/editor/editor.component.ts","../../src/components/elemento/elemento.component.ts","../../src/components/help.component.ts","../../src/emenda/comando-emenda-util.ts","../../src/util/objeto-util.ts","../../src/emenda/range-dispositivos.ts","../../src/emenda/sequencia-range-dispositivos.ts","../../src/emenda/agrupador-dispositivos-cmd-emd.ts","../../src/emenda/dispositivo-comparator.ts","../../src/emenda/cmd-emd-combinavel.ts","../../src/emenda/dispositivos-writer-cmd-emd.ts","../../src/emenda/cmd-emd-modificacao.ts","../../src/emenda/cmd-emd-adicao.ts","../../src/emenda/cmd-emd-supressao.ts","../../src/model/lexml/documento/emenda.ts","../../src/emenda/cmd-emd-adicao-artigo-onde-couber.ts","../../src/util/tag-node.ts","../../src/emenda/citacao-cmd-simples.ts","../../src/emenda/citacao-cmd-disp-prj.ts","../../src/emenda/comando-emenda-builder.ts","../../src/emenda/emenda-builder.ts","../../src/model/lexml/documento/conversor/buildJsonixFromProjetoNorma.ts","../../src/model/lexml/documento/conversor/buildProjetoNormaFromJsonix.ts","../../src/model/lexml/documento/modelo/documentoPadrao.ts","../../src/components/lexml-eta.component.ts"],"sourcesContent":["/**\n * Collection of shared Symbol objects for internal component communication.\n *\n * The shared `Symbol` objects in this module let mixins and a component\n * internally communicate without exposing these internal properties and methods\n * in the component's public API. They also help avoid unintentional name\n * collisions, as a component developer must specifically import the `internal`\n * module and reference one of its symbols.\n *\n * To use these `Symbol` objects in your own component, include this module and\n * then create a property or method whose key is the desired Symbol. E.g.,\n * [ShadowTemplateMixin](ShadowTemplateMixin) expects a component to define\n * a property called [template](#template):\n *\n *     import { template } from 'elix/src/core/internal.js';\n *     import { templateFrom } from 'elix/src/core/htmlLiterals.js'\n *     import ShadowTemplateMixin from 'elix/src/core/ShadowTemplateMixin.js';\n *\n *     class MyElement extends ShadowTemplateMixin(HTMLElement) {\n *       [template]() {\n *         return templateFrom.html`Hello, <em>world</em>.`;\n *       }\n *     }\n *\n * The above use of the internal `template` member lets the mixin find the\n * component's template in a way that will not pollute the component's public\n * API or interfere with other component logic. For example, if for some reason\n * the component wants to define a separate property with the plain string name,\n * \"template\", it can do so without affecting the above property setter.\n *\n * @module internal\n */\n\n/**\n * Symbol for the default state for this element.\n */\nexport const defaultState = Symbol(\"defaultState\");\n\n/**\n * Symbol for the `delegatesFocus` property.\n *\n * [DelegatesFocusMixin](DelegatesFocusMixin) defines this property, returning\n * true to indicate that the focus is being delegated, even in browsers that\n * don't support that natively. Mixins like [KeyboardMixin](KeyboardMixin) use\n * this to accommodate focus delegation.\n */\nexport const delegatesFocus = Symbol(\"delegatesFocus\");\n\n/**\n * Symbol for the `firstRender` property.\n *\n * [ReactiveMixin](ReactiveMixin) sets the property to `true` during the\n * element's first `render` and `rendered` callback, then `false` in subsequent\n * callbacks.\n *\n * You can inspect this property in your own `rendered` callback handler to do\n * work like wiring up events that should only happen once.\n */\nexport const firstRender = Symbol(\"firstRender\");\n\n/**\n * Symbol for the `focusTarget` property.\n *\n * [DelegatesFocusMixin](DelegatesFocusMixin) defines this property as either:\n * 1) the element itself, in browsers that support native focus delegation or,\n * 2) the shadow root's first focusable element.\n */\nexport const focusTarget = Symbol(\"focusTarget\");\n\n/**\n * Symbol for the `hasDynamicTemplate` property.\n *\n * If your component class does not always use the same template, define a\n * static class property getter with this symbol and have it return `true`.\n * This will disable template caching for your component.\n */\nexport const hasDynamicTemplate = Symbol(\"hasDynamicTemplate\");\n\n/**\n * Symbol for the `ids` property.\n *\n * [ShadowTemplateMixin](ShadowTemplateMixin) defines a shorthand function\n * `internal.ids` that can be used to obtain a reference to a shadow element with\n * a given ID.\n *\n * Example: if component's template contains a shadow element\n * `<button id=\"foo\">`, you can use the reference `this[ids].foo` to obtain\n * the corresponding button in the component instance's shadow tree.\n * The `ids` function is simply a shorthand for `getElementById`, so\n * `this[ids].foo` is the same as `this.shadowRoot.getElementById('foo')`.\n */\nexport const ids = Symbol(\"ids\");\n\n/**\n * Symbol for access to native HTML element internals.\n */\nexport const nativeInternals = Symbol(\"nativeInternals\");\n\n/**\n * Symbol for the `raiseChangeEvents` property.\n *\n * This property is used by mixins to determine whether they should raise\n * property change events. The standard HTML pattern is to only raise such\n * events in response to direct user interactions. For a detailed discussion\n * of this point, see the Gold Standard checklist item for\n * [Propery Change Events](https://github.com/webcomponents/gold-standard/wiki/Property%20Change%20Events).\n *\n * The above article describes a pattern for using a flag to track whether\n * work is being performed in response to internal component activity, and\n * whether the component should therefore raise property change events.\n * This `raiseChangeEvents` symbol is a shared flag used for that purpose by\n * all Elix mixins and components. Sharing this flag ensures that internal\n * activity (e.g., a UI event listener) in one mixin can signal other mixins\n * handling affected properties to raise change events.\n *\n * All UI event listeners (and other forms of internal handlers, such as\n * timeouts and async network handlers) should set `raiseChangeEvents` to\n * `true` at the start of the event handler, then `false` at the end:\n *\n *     this.addEventListener('click', event => {\n *       this[raiseChangeEvents] = true;\n *       // Do work here, possibly setting properties, like:\n *       this.foo = 'Hello';\n *       this[raiseChangeEvents] = false;\n *     });\n *\n * Elsewhere, property setters that raise change events should only do so it\n * this property is `true`:\n *\n *     set foo(value) {\n *       // Save foo value here, do any other work.\n *       if (this[raiseChangeEvents]) {\n *         export const event = new CustomEvent('foochange');\n *         this.dispatchEvent(event);\n *       }\n *     }\n *\n * In this way, programmatic attempts to set the `foo` property will not trigger\n * the `foochange` event, but UI interactions that update that property will\n * cause those events to be raised.\n */\nexport const raiseChangeEvents = Symbol(\"raiseChangeEvents\");\n\n/**\n * Symbol for the `render` method.\n *\n * [ReactiveMixin](ReactiveMixin) invokes this `internal.render` method to give\n * the component a chance to render recent changes in component state.\n */\nexport const render = Symbol(\"render\");\n\n/**\n * Symbol for the `renderChanges` method.\n *\n * [ReactiveMixin](ReactiveMixin) invokes this method in response to a\n * `setState` call; you should generally not invoke this method yourself.\n */\nexport const renderChanges = Symbol(\"renderChanges\");\n\n/**\n * Symbol for the `rendered` method.\n *\n * [ReactiveMixin](ReactiveMixin) will invoke this method after your\n * element has completely finished rendering.\n *\n * If you only want to do work the first time rendering happens (for example, if\n * you want to wire up event handlers), your `internal.rendered` implementation\n * can inspect the `internal.firstRender` flag.\n */\nexport const rendered = Symbol(\"rendered\");\n\n/**\n * Symbol for the `rendering` property.\n *\n * [ReactiveMixin](ReactiveMixin) sets this property to true during rendering,\n * at other times it will be false.\n */\nexport const rendering = Symbol(\"rendering\");\n\n/**\n * Symbol for the `setState` method.\n *\n * A component using [ReactiveMixin](ReactiveMixin) can invoke this method to\n * apply changes to the element's current state.\n */\nexport const setState = Symbol(\"setState\");\n\n/**\n * Symbol for the `shadowRoot` property.\n *\n * This property holds a reference to an element's shadow root, like\n * `this.shadowRoot`. This propery exists because `this.shadowRoot` is not\n * available for components with closed shadow roots.\n * [ShadowTemplateMixin](ShadowTemplateMixin) creates open shadow roots by\n * default, but you can opt into creating closed shadow roots; see\n * [shadowRootMode](internal#internal.shadowRootMode).\n */\nexport const shadowRoot = Symbol(\"shadowRoot\");\n\n/**\n * Symbol for the `shadowRootMode` property.\n *\n * If true (the default), then [ShadowTemplateMixin](ShadowTemplateMixin) will\n * create an open shadow root when the component is instantiated. Set this to\n * false if you want to programmatically hide component internals in a closed\n * shadow root.\n */\nexport const shadowRootMode = Symbol(\"shadowRootMode\");\n\n/**\n * Symbol for the element's current state.\n *\n * This is managed by [ReactiveMixin](ReactiveMixin).\n */\nexport const state = Symbol(\"state\");\n\n/**\n * Symbol for the `stateEffects` method.\n *\n * See [stateEffects](ReactiveMixin#stateEffects).\n */\nexport const stateEffects = Symbol(\"stateEffects\");\n\n/**\n * Symbol for the `template` method.\n *\n * [ShadowTemplateMixin](ShadowTemplateMixin) uses this property to obtain a\n * component's template, which it will clone into a component's shadow root.\n */\nexport const template = Symbol(\"template\");\n","import { focusTarget, nativeInternals } from \"./internal.js\";\n\n/**\n * Miscellaneous DOM helpers for web components\n *\n * @module dom\n */\n\nconst mousedownListenerKey = Symbol(\"mousedownListener\");\n\n/**\n * Given a string value for a named boolean attribute, return `true` if the\n * value is either: a) the empty string, or b) a case-insensitive match for the\n * name.\n *\n * This is native HTML behavior; see the MDN documentation on [boolean\n * attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes#Boolean_Attributes)\n * for the reasoning.\n *\n * Given a null value, this return `false`.\n * Given a boolean value, this return the value as is.\n *\n * @param {string} name\n * @param {string|boolean|null} value\n */\nexport function booleanAttributeValue(name, value) {\n  return typeof value === \"boolean\"\n    ? value\n    : typeof value === \"string\"\n    ? value === \"\" || name.toLowerCase() === value.toLowerCase()\n    : false;\n}\n\n/**\n * Return the closest focusable node that's either the node itself (if it's\n * focusable), or the closest focusable ancestor in the *composed* tree.\n *\n * If no focusable node is found, this returns null.\n *\n * @param {Node} node\n * @returns {HTMLElement|null}\n */\nexport function closestFocusableNode(node) {\n  for (const current of selfAndComposedAncestors(node)) {\n    // If the current element defines a focusTarget (e.g., via\n    // DelegateFocusMixin), use that, otherwise use the element itself.\n    const target = current[focusTarget] || current;\n    // We want an element that has a tabIndex of 0 or more. We ignore disabled\n    // elements, and slot elements (which oddly have a tabIndex of 0).\n    /** @type {any} */ const cast = target;\n    const focusable =\n      target instanceof HTMLElement &&\n      target.tabIndex >= 0 &&\n      !cast.disabled &&\n      !(target instanceof HTMLSlotElement);\n    if (focusable) {\n      return target;\n    }\n  }\n  return null;\n}\n\n/**\n * Return the ancestors of the given node in the composed tree.\n *\n * In the composed tree, the ancestor of a node assigned to a slot is that slot,\n * not the node's DOM ancestor. The ancestor of a shadow root is its host.\n *\n * @param {Node} node\n * @returns {Iterable<Node>}\n */\nexport function* composedAncestors(node) {\n  /** @type {Node|null} */\n  let current = node;\n  while (true) {\n    current =\n      current instanceof HTMLElement && current.assignedSlot\n        ? current.assignedSlot\n        : current instanceof ShadowRoot\n        ? current.host\n        : current.parentNode;\n    if (current) {\n      yield current;\n    } else {\n      break;\n    }\n  }\n}\n\n/**\n * Returns true if the first node contains the second, even if the second node\n * is in a shadow tree.\n *\n * The standard Node.contains() function does not account for Shadow DOM, and\n * returns false if the supplied target node is sitting inside a shadow tree\n * within the container.\n *\n * @param {Node} container - The container to search within.\n * @param {Node} target - The node that may be inside the container.\n * @returns {boolean} - True if the container contains the target node.\n */\nexport function deepContains(container, target) {\n  /** @type {any} */\n  let current = target;\n  while (current) {\n    const parent = current.assignedSlot || current.parentNode || current.host;\n    if (parent === container) {\n      return true;\n    }\n    current = parent;\n  }\n  return false;\n}\n\n/**\n * Return the first focusable element in the composed tree below the given root.\n * The composed tree includes nodes assigned to slots.\n *\n * This heuristic considers only the document order of the elements below the\n * root and whether a given element is focusable. It currently does not respect\n * the tab sort order defined by tabindex values greater than zero.\n *\n * @param {Node} root - the root of the tree in which to search\n * @returns {HTMLElement|null} - the first focusable element, or null if none\n * was found\n */\nexport function firstFocusableElement(root) {\n  // CSS selectors for focusable elements from\n  // https://stackoverflow.com/a/30753870/76472\n  const focusableQuery =\n    'a[href],area[href],button:not([disabled]),details,iframe,input:not([disabled]),select:not([disabled]),textarea:not([disabled]),[contentEditable=\"true\"],[tabindex]';\n  // Walk the tree looking for nodes that match the above selectors.\n  const walker = walkComposedTree(\n    root,\n    (/** @type {Node} */ node) =>\n      node instanceof HTMLElement &&\n      node.matches(focusableQuery) &&\n      node.tabIndex >= 0\n  );\n  // We only actually need the first matching value.\n  const { value } = walker.next();\n  // value, if defined, will always be an HTMLElement, but we do the following\n  // check to pass static type checking.\n  return value instanceof HTMLElement ? value : null;\n}\n\n/**\n * Trap any `mousedown` events on the `origin` element and prevent the default\n * behavior from setting the focus on that element. Instead, put the focus on\n * the `target` element (or, if the `target` is not focusable, on the target's\n * closest focusable ancestor).\n *\n * If this method is called again with the same `origin` element, the old\n * forwarding is overridden, and focus will now go to the new `target` element.\n *\n * If the `target` parameter is `null`, focus handling will be removed from the\n * indicated `origin`.\n *\n * @param {HTMLElement} origin\n * @param {HTMLElement|null} target\n */\nexport function forwardFocus(origin, target) {\n  if (origin[mousedownListenerKey]) {\n    // Origin was previously forwarding focus, probably to a different target.\n    // Remove the previous event listener.\n    origin.removeEventListener(\"mousedown\", origin[mousedownListenerKey]);\n  }\n  if (target) {\n    origin[mousedownListenerKey] = (/** @type {MouseEvent} */ event) => {\n      // Only process events for the main (usually left) button.\n      if (event.button !== 0) {\n        return;\n      }\n      // What element wants the focus?\n      const desiredTarget = target[focusTarget] || target;\n      // What ancestor can actually take the focus?\n      const focusableTarget = closestFocusableNode(desiredTarget);\n      if (focusableTarget) {\n        focusableTarget.focus();\n        event.preventDefault();\n      }\n    };\n    origin.addEventListener(\"mousedown\", origin[mousedownListenerKey]);\n  }\n}\n\n/**\n * Search a list element for the item that contains the specified target.\n *\n * When dealing with UI events (e.g., mouse clicks) that may occur in\n * subelements inside a list item, you can use this routine to obtain the\n * containing list item.\n *\n * @param {NodeList|Node[]} items - A list element containing a set of items\n * @param {Node} target - A target element that may or may not be an item in the\n * list.\n * @returns {number} - The index of the list child that is or contains the\n * indicated target node. Returns -1 if not found.\n */\nexport function indexOfItemContainingTarget(items, target) {\n  return Array.prototype.findIndex.call(\n    items,\n    (/** @type Node */ item) => item === target || deepContains(item, target)\n  );\n}\n\n/**\n * Return true if the event came from within the node (or from the node itself);\n * false otherwise.\n *\n * @param {Node} node - The node to consider in relation to the event\n * @param {Event} event - The event which may have been raised within/by the\n * node\n * @returns {boolean} - True if the event was raised within or by the node\n */\nexport function ownEvent(node, event) {\n  /** @type {any} */\n  const cast = event;\n  const eventSource = cast.composedPath()[0];\n  return node === eventSource || deepContains(node, eventSource);\n}\n\n/**\n * Returns the set that includes the given node and all of its ancestors in the\n * composed tree. See [composedAncestors](#composedAncestors) for details on the\n * latter.\n *\n * @param {Node} node\n * @returns {Iterable<Node>}\n */\nexport function* selfAndComposedAncestors(node) {\n  if (node) {\n    yield node;\n    yield* composedAncestors(node);\n  }\n}\n\n/**\n * Set an internal state for browsers that support the `:state` selector, as\n * well as an attribute of the same name to permit state-based styling on older\n * browsers.\n *\n * When all browsers support that, we'd like to deprecate use of attributes.\n *\n * @param {Element} element\n * @param {string} name\n * @param {boolean} value\n */\nexport function setInternalState(element, name, value) {\n  element.toggleAttribute(name, value);\n  if (element[nativeInternals] && element[nativeInternals].states) {\n    element[nativeInternals].states.toggle(name, value);\n  }\n}\n\n/** @type {IndexedObject<boolean>} */\nexport const standardBooleanAttributes = {\n  checked: true,\n  defer: true,\n  disabled: true,\n  hidden: true,\n  ismap: true,\n  multiple: true,\n  noresize: true,\n  readonly: true,\n  selected: true,\n};\n\n/**\n * Adds or removes the element's `childNodes` as necessary to match the nodes\n * indicated in the `childNodes` parameter.\n *\n * This operation is useful in cases where you maintain your own set of nodes\n * which should be rendered as the children of some element. When you insert or\n * remove nodes in that set, you can invoke this function to efficiently apply\n * the new set as a delta to the existing children. Only the items in the set\n * that have actually changed will be added or removed.\n *\n * @param {Element} element - the element to update\n * @param {(NodeList|Node[])} childNodes - the set of nodes to apply\n */\nexport function updateChildNodes(element, childNodes) {\n  // If the childNodes parameter is the actual childNodes of an element, then as\n  // we append those nodes to the indicated target element, they'll get removed\n  // from the original set. To keep the list stable, we make a copy.\n  const copy = [...childNodes];\n\n  const oldLength = element.childNodes.length;\n  const newLength = copy.length;\n  const length = Math.max(oldLength, newLength);\n  for (let i = 0; i < length; i++) {\n    const oldChild = element.childNodes[i];\n    const newChild = copy[i];\n    if (i >= oldLength) {\n      // Add new item not in old set.\n      element.append(newChild);\n    } else if (i >= newLength) {\n      // Remove old item past end of new set.\n      element.removeChild(element.childNodes[newLength]);\n    } else if (oldChild !== newChild) {\n      if (copy.indexOf(oldChild, i) >= i) {\n        // Old node comes later in final set. Insert the new node rather than\n        // replacing it so that we don't detach the old node only to have to\n        // reattach it later.\n        element.insertBefore(newChild, oldChild);\n      } else {\n        // Replace old item with new item.\n        element.replaceChild(newChild, oldChild);\n      }\n    }\n  }\n}\n\n/**\n * Walk the composed tree at the root for elements that pass the given filter.\n *\n * Note: the jsDoc types required for the filter function are too complex for\n * the current jsDoc parser to support strong type-checking.\n *\n * @private\n * @param {Node} node\n * @param {function} filter\n * @returns {IterableIterator<Node>}\n */\nfunction* walkComposedTree(node, filter) {\n  if (filter(node)) {\n    yield node;\n  }\n  let children;\n  if (node instanceof HTMLElement && node.shadowRoot) {\n    // Walk the shadow instead of the light DOM.\n    children = node.shadowRoot.children;\n  } else {\n    const assignedNodes =\n      node instanceof HTMLSlotElement\n        ? node.assignedNodes({ flatten: true })\n        : [];\n    children =\n      assignedNodes.length > 0\n        ? // Walk light DOM nodes assigned to this slot.\n          assignedNodes\n        : // Walk light DOM children.\n          node.childNodes;\n  }\n  if (children) {\n    for (let i = 0; i < children.length; i++) {\n      yield* walkComposedTree(children[i], filter);\n    }\n  }\n}\n","/**\n * JavaScript template literals for constructing DOM nodes from HTML\n *\n * @module html\n */\n\n/**\n * A JavaScript template string literal that returns an HTML document fragment.\n *\n * Example:\n *\n *     const fragment = fragmentFrom.html`Hello, <em>world</em>.`\n *\n * returns a `DocumentFragment` whose `innerHTML` is `Hello, <em>world</em>.`\n *\n * This function is called `html` so that it can be easily used with HTML\n * syntax-highlighting extensions for various popular code editors.\n *\n * See also [templateFrom.html](template#html), which returns a similar result but\n * as an HTMLTemplateElement.\n *\n * @param {TemplateStringsArray} strings - the strings passed to the JavaScript template\n * literal\n * @param {string[]} substitutions - the variable values passed to the\n * JavaScript template literal\n * @returns {DocumentFragment}\n */\nexport const fragmentFrom = {\n  html(strings, ...substitutions) {\n    return templateFrom.html(strings, ...substitutions).content;\n  },\n};\n\n/**\n * A JavaScript template string literal that returns an HTML template.\n *\n * Example:\n *\n *     const myTemplate = templateFrom.html`Hello, <em>world</em>.`\n *\n * returns an `HTMLTemplateElement` whose `innerHTML` is `Hello, <em>world</em>.`\n *\n * This function is called `html` so that it can be easily used with HTML\n * syntax-highlighting extensions for various popular code editors.\n *\n * See also [html](html), a helper which returns a similar result but as an\n * DocumentFragment.\n *\n * @param {TemplateStringsArray} strings - the strings passed to the JavaScript template\n * literal\n * @param {string[]} substitutions - the variable values passed to the\n * JavaScript template literal\n * @returns {HTMLTemplateElement}\n */\nexport const templateFrom = {\n  html(strings, ...substitutions) {\n    const template = document.createElement(\"template\");\n    template.innerHTML = String.raw(strings, ...substitutions);\n    return template;\n  },\n};\n","/**\n * Helpers for dynamically creating and patching component templates.\n *\n * The [ShadowTemplateMixin](ShadowTemplateMixin) lets you define a component\n * template that will be used to popuplate the shadow subtree of new component\n * instances. These helpers, especially the [html](#html) function, are intended\n * to simplify the creation of such templates.\n *\n * In particular, these helpers can be useful in [patching\n * templates](customizing#template-patching) inherited from a base class.\n *\n * Some of these functions take _descriptors_ that can either be a class, a tag\n * name, or an HTML template. These are generally used to fill specific roles in\n * an element's template; see [element roles](customizing#element-part-types).\n *\n * @module template\n */\n\nimport { templateFrom } from \"./htmlLiterals.js\";\n\n// Used by registerCustomElement.\nconst mapBaseTagToCount = new Map();\n\n/**\n * Create an element from a role descriptor (a component class constructor or\n * an HTML tag name).\n *\n * If the descriptor is an HTML template, and the resulting document fragment\n * contains a single top-level node, that node is returned directly (instead of\n * the fragment).\n *\n * @param {PartDescriptor} descriptor - the descriptor that will be used to\n * create the element\n * @returns {Element} the new element\n */\nexport function createElement(descriptor) {\n  if (typeof descriptor === \"function\") {\n    // Instantiable component class constructor\n    let element;\n    try {\n      element = new descriptor();\n    } catch (e) {\n      if (e.name === \"TypeError\") {\n        // Most likely this error results from the fact that the indicated\n        // component class hasn't been registered. Register it now with a random\n        // name and try again.\n        registerCustomElement(descriptor);\n        element = new descriptor();\n      } else {\n        // The exception was for some other reason.\n        throw e;\n      }\n    }\n    return element;\n    // @ts-ignore\n  } else {\n    // String tag name: e.g., 'div'\n    return document.createElement(descriptor);\n  }\n}\n\nexport function html(strings, ...substitutions) {\n  /* eslint-disable no-console */\n  console.warn(\n    `The template.html helper has moved to htmlLiterals.js, and is now called \\`templateFrom.html\\`. Please update your imports.`\n  );\n  return templateFrom.html(strings, ...substitutions);\n}\n\n/**\n * Register the indicated constructor as a custom element class.\n *\n * This function generates a suitable string tag for the class. If the\n * constructor is a named function (which is typical for hand-authored code),\n * the function's `name` will be used as the base for the tag. If the\n * constructor is an anonymous function (which often happens in\n * generated/minified code), the tag base will be \"custom-element\".\n *\n * In either case, this function adds a uniquifying number to the end of the\n * base to produce a complete tag.\n *\n * @private\n * @param {Constructor<HTMLElement>} classFn\n */\nfunction registerCustomElement(classFn) {\n  let baseTag;\n  // HTML places more restrictions on the first character in a tag than\n  // JavaScript places on the first character of a class name. We apply this\n  // more restrictive condition to the class names we'll convert to tags. Class\n  // names that fail this check -- often generated class names -- will result in\n  // a base tag name of \"custom-element\".\n  const classNameRegex = /^[A-Za-z][A-Za-z0-9_$]*$/;\n  const classNameMatch = classFn.name && classFn.name.match(classNameRegex);\n  if (classNameMatch) {\n    // Given the class name `FooBar`, calculate the base tag name `foo-bar`.\n    const className = classNameMatch[0];\n    const uppercaseRegEx = /([A-Z])/g;\n    const hyphenated = className.replace(\n      uppercaseRegEx,\n      (match, letter, offset) => (offset > 0 ? `-${letter}` : letter)\n    );\n    baseTag = hyphenated.toLowerCase();\n  } else {\n    baseTag = \"custom-element\";\n  }\n  // Add a uniquifying number to the end of the tag until we find a tag\n  // that hasn't been registered yet.\n  let count = mapBaseTagToCount.get(baseTag) || 0;\n  let tag;\n  for (; ; count++) {\n    tag = `${baseTag}-${count}`;\n    if (!customElements.get(tag)) {\n      // Not in use.\n      break;\n    }\n  }\n  // Register with the generated tag.\n  customElements.define(tag, /** @type {any} */ classFn);\n  // Bump number and remember it. If we see the same base tag again later, we'll\n  // start counting at that number in our search for a uniquifying number.\n  mapBaseTagToCount.set(baseTag, count + 1);\n}\n\n/**\n * Replace an original node in a tree or document fragment with the indicated\n * replacement node. The attributes, classes, styles, and child nodes of the\n * original node will be moved to the replacement.\n *\n * @param {Node} original - an existing node to be replaced\n * @param {Node} replacement - the node to replace the existing node with\n * @returns {Node} the updated replacement node\n */\nexport function replace(original, replacement) {\n  const parent = original.parentNode;\n  if (!parent) {\n    throw \"An element must have a parent before it can be substituted.\";\n  }\n  if (\n    (original instanceof HTMLElement || original instanceof SVGElement) &&\n    (replacement instanceof HTMLElement || replacement instanceof SVGElement)\n  ) {\n    // Merge attributes from original to replacement, letting replacement win\n    // conflicts. Handle classes and styles separately (below).\n    Array.prototype.forEach.call(original.attributes, (\n      /** @type {Attr} */ attribute\n    ) => {\n      if (\n        !replacement.getAttribute(attribute.name) &&\n        attribute.name !== \"class\" &&\n        attribute.name !== \"style\"\n      ) {\n        replacement.setAttribute(attribute.name, attribute.value);\n      }\n    });\n    // Copy classes/styles from original to replacement, letting replacement win\n    // conflicts.\n    Array.prototype.forEach.call(original.classList, (\n      /** @type {string} */ className\n    ) => {\n      replacement.classList.add(className);\n    });\n    Array.prototype.forEach.call(original.style, (\n      /** @type {number} */ key\n    ) => {\n      if (!replacement.style[key]) {\n        replacement.style[key] = original.style[key];\n      }\n    });\n  }\n  // Copy over children.\n  // @ts-ignore\n  replacement.append(...original.childNodes);\n\n  parent.replaceChild(replacement, original);\n  return replacement;\n}\n\n/**\n * Replace a node with a new element, transferring all attributes, classes,\n * styles, and child nodes from the original(s) to the replacement(s).\n *\n * The descriptor used for the replacements can be a 1) component class\n * constructor, 2) an HTML tag name, or 3) an HTML template. For #1 and #2, if\n * the existing elements that match the selector are already of the desired\n * class/tag name, the replacement operation is skipped.\n *\n * @param {Element} original - the node to replace\n * @param {PartDescriptor} descriptor - the descriptor used to generate the\n * replacement element\n * @returns {Element} the replacement node(s)\n */\nexport function transmute(original, descriptor) {\n  if (\n    (typeof descriptor === \"function\" && original.constructor === descriptor) ||\n    (typeof descriptor === \"string\" &&\n      original instanceof Element &&\n      original.localName === descriptor)\n  ) {\n    // Already correct type of element, no transmutation necessary.\n    return original;\n  } else {\n    // Transmute the single node.\n    const replacement = createElement(descriptor);\n    replace(original, replacement);\n    return replacement;\n  }\n}\n","import { booleanAttributeValue, standardBooleanAttributes } from \"./dom.js\";\nimport { rendering } from \"./internal.js\";\n\n// Memoized maps of attribute to property names and vice versa.\n// We initialize this with the special case of the tabindex (lowercase \"i\")\n// attribute, which is mapped to the tabIndex (capital \"I\") property.\n/** @type {IndexedObject<string>} */\nconst attributeToPropertyNames = {\n  tabindex: \"tabIndex\",\n};\n/** @type {IndexedObject<string>} */\nconst propertyNamesToAttributes = {\n  tabIndex: \"tabindex\",\n};\n\n/**\n * Sets properties when the corresponding attributes change\n *\n * If your component exposes a setter for a property, it's generally a good\n * idea to let devs using your component be able to set that property in HTML\n * via an element attribute. You can code that yourself by writing an\n * `attributeChangedCallback`, or you can use this mixin to get a degree of\n * automatic support.\n *\n * This mixin implements an `attributeChangedCallback` that will attempt to\n * convert a change in an element attribute into a call to the corresponding\n * property setter. Attributes typically follow hyphenated names (\"foo-bar\"),\n * whereas properties typically use camelCase names (\"fooBar\"). This mixin\n * respects that convention, automatically mapping the hyphenated attribute\n * name to the corresponding camelCase property name.\n *\n * Example: You define a component using this mixin:\n *\n *     class MyElement extends AttributeMarshallingMixin(HTMLElement) {\n *       get fooBar() { return this._fooBar; }\n *       set fooBar(value) { this._fooBar = value; }\n *     }\n *\n * If someone then instantiates your component in HTML:\n *\n *     <my-element foo-bar=\"Hello\"></my-element>\n *\n * Then, after the element has been upgraded, the `fooBar` setter will\n * automatically be invoked with the initial value \"Hello\".\n *\n * Attributes can only have string values. If you'd like to convert string\n * attributes to other types (numbers, booleans), you must implement parsing\n * yourself.\n *\n * @module AttributeMarshallingMixin\n * @param {Constructor<CustomElement>} Base\n */\nexport default function AttributeMarshallingMixin(Base) {\n  // The class prototype added by the mixin.\n  class AttributeMarshalling extends Base {\n    /**\n     * Handle a change to the attribute with the given name.\n     *\n     * @ignore\n     * @param {string} attributeName\n     * @param {string} oldValue\n     * @param {string} newValue\n     */\n    attributeChangedCallback(attributeName, oldValue, newValue) {\n      if (super.attributeChangedCallback) {\n        super.attributeChangedCallback(attributeName, oldValue, newValue);\n      }\n\n      // Sometimes this callback is invoked when there's not actually any\n      // change, in which we skip invoking the property setter.\n      //\n      // We also skip setting properties if we're rendering. A component may\n      // want to reflect property values to attributes during rendering, but\n      // such attribute changes shouldn't trigger property updates.\n      if (newValue !== oldValue && !this[rendering]) {\n        const propertyName = attributeToPropertyName(attributeName);\n        // If the attribute name corresponds to a property name, set the property.\n        if (propertyName in this) {\n          // Parse standard boolean attributes.\n          const parsed = standardBooleanAttributes[attributeName]\n            ? booleanAttributeValue(attributeName, newValue)\n            : newValue;\n          this[propertyName] = parsed;\n        }\n      }\n    }\n\n    // Because maintaining the mapping of attributes to properties is tedious,\n    // this provides a default implementation for `observedAttributes` that\n    // assumes that your component will want to expose all public properties in\n    // your component's API as properties.\n    //\n    // You can override this default implementation of `observedAttributes`. For\n    // example, if you have a system that can statically analyze which\n    // properties are available to your component, you could hand-author or\n    // programmatically generate a definition for `observedAttributes` that\n    // avoids the minor run-time performance cost of inspecting the component\n    // prototype to determine your component's public properties.\n    static get observedAttributes() {\n      return attributesForClass(this);\n    }\n  }\n\n  return AttributeMarshalling;\n}\n\n/**\n * Return the custom attributes for the given class.\n *\n * E.g., if the supplied class defines a `fooBar` property, then the resulting\n * array of attribute names will include the \"foo-bar\" attribute.\n *\n * @private\n * @param {Constructor<HTMLElement>} classFn\n * @returns {string[]}\n */\nfunction attributesForClass(classFn) {\n  // We treat the HTMLElement base class as if it has no attributes, since we\n  // don't want to receive attributeChangedCallback for it (or anything further\n  // up the protoype chain).\n  if (classFn === HTMLElement) {\n    return [];\n  }\n\n  // Get attributes for parent class.\n  const baseClass = Object.getPrototypeOf(classFn.prototype).constructor;\n\n  // See if parent class defines observedAttributes manually.\n  let baseAttributes = baseClass.observedAttributes;\n  if (!baseAttributes) {\n    // Calculate parent class attributes ourselves.\n    baseAttributes = attributesForClass(baseClass);\n  }\n\n  // Get the properties for this particular class.\n  const propertyNames = Object.getOwnPropertyNames(classFn.prototype);\n  const setterNames = propertyNames.filter((propertyName) => {\n    const descriptor = Object.getOwnPropertyDescriptor(\n      classFn.prototype,\n      propertyName\n    );\n    return descriptor && typeof descriptor.set === \"function\";\n  });\n\n  // Map the property names to attribute names.\n  const attributes = setterNames.map((setterName) =>\n    propertyNameToAttribute(setterName)\n  );\n\n  // Merge the attribute for this class and its base class.\n  const diff = attributes.filter(\n    (attribute) => baseAttributes.indexOf(attribute) < 0\n  );\n  const result = baseAttributes.concat(diff);\n\n  return result;\n}\n\n/**\n * Convert hyphenated foo-bar attribute name to camel case fooBar property name.\n *\n * @private\n * @param {string} attributeName\n */\nfunction attributeToPropertyName(attributeName) {\n  let propertyName = attributeToPropertyNames[attributeName];\n  if (!propertyName) {\n    // Convert and memoize.\n    const hyphenRegEx = /-([a-z])/g;\n    propertyName = attributeName.replace(hyphenRegEx, (match) =>\n      match[1].toUpperCase()\n    );\n    attributeToPropertyNames[attributeName] = propertyName;\n  }\n  return propertyName;\n}\n\n/**\n * Convert a camel case fooBar property name to a hyphenated foo-bar attribute.\n *\n * @private\n * @param {string} propertyName\n */\nfunction propertyNameToAttribute(propertyName) {\n  let attribute = propertyNamesToAttributes[propertyName];\n  if (!attribute) {\n    // Convert and memoize.\n    const uppercaseRegEx = /([A-Z])/g;\n    attribute = propertyName.replace(uppercaseRegEx, \"-$1\").toLowerCase();\n    propertyNamesToAttributes[propertyName] = attribute;\n  }\n  return attribute;\n}\n","import {\n  defaultState,\n  firstRender,\n  raiseChangeEvents,\n  render,\n  renderChanges,\n  rendered,\n  rendering,\n  setState,\n  state,\n  stateEffects,\n} from \"./internal.js\";\n\n/** @type {any} */\nconst stateKey = Symbol(\"state\");\n/** @type {any} */\nconst raiseChangeEventsInNextRenderKey = Symbol(\n  \"raiseChangeEventsInNextRender\"\n);\n// Tracks total set of changes made to elements since their last render.\n/** @type {any} */\nconst changedSinceLastRenderKey = Symbol(\"changedSinceLastRender\");\n\n/**\n * Manages component state and renders changes in state\n *\n * This is modeled after React/Preact's state management, and is adapted for\n * use with web components. Applying this mixin to a component will give it\n * FRP behavior comparable to React's.\n *\n * This model is very basic. It's key aspects are:\n * * an immutable `state` property updated via `setState` calls.\n * * a `render` method that will be invoked asynchronously when state changes.\n *\n * @module ReactiveMixin\n * @param {Constructor<CustomElement>} Base\n */\nexport default function ReactiveMixin(Base) {\n  class Reactive extends Base {\n    constructor() {\n      super();\n\n      // Components can inspect `firstRender` during rendering to do special\n      // work the first time (like wire up event handlers). Until the first\n      // render actually happens, we set that flag to be undefined so we have a\n      // way of distinguishing between a component that has never rendered and\n      // one that is being rendered for the nth time.\n      this[firstRender] = undefined;\n\n      // We want to support the standard HTML pattern of only raising events in\n      // response to direct user interactions. For a detailed discussion of this\n      // point, see the Gold Standard checklist item for [Propery Change\n      // Events](https://github.com/webcomponents/gold-standard/wiki/Property%20Change%20Events).\n      //\n      // To support this pattern, we define a flag indicating whether change\n      // events should be raised. By default, we want the flag to be false. In\n      // UI event handlers, a component can temporarily set the flag to true. If\n      // a setState call is made while the flag is true, then that fact will be\n      // remembered and passed the subsequent render/rendered methods. That will\n      // let the methods know whether they should raise property change events.\n      this[raiseChangeEvents] = false;\n\n      // Maintain a change log of all fields which have changed since the\n      // component was last rendered.\n      this[changedSinceLastRenderKey] = null;\n\n      // Set the initial state from the default state defined by the component\n      // and its mixins/base classes.\n      this[setState](this[defaultState]);\n    }\n\n    // When the component is attached to the document (or upgraded), we will\n    // generally render the component for the first time. That operation will\n    // include rendering of the default state and any state changes that\n    // happened between constructor time and this connectedCallback.\n    connectedCallback() {\n      if (super.connectedCallback) {\n        super.connectedCallback();\n      }\n\n      // Render the component.\n      //\n      // If the component was forced to render before this point, and the state\n      // hasn't changed, this call will be a no-op.\n      this[renderChanges]();\n    }\n\n    /**\n     * The default state for the component. This can be extended by mixins and\n     * classes to provide additional default state.\n     *\n     * @type {PlainObject}\n     */\n    // @ts-ignore\n    get [defaultState]() {\n      // Defer to base implementation if defined.\n      return super[defaultState] || {};\n    }\n\n    /**\n     * Render the indicated changes in state to the DOM.\n     *\n     * The default implementation of this method does nothing. Override this\n     * method in your component to update your component's host element and\n     * any shadow elements to reflect the component's new state. See the\n     * [rendering example](ReactiveMixin#rendering).\n     *\n     * Be sure to call `super` in your method implementation so that your\n     * component's base classes and mixins have a chance to perform their own\n     * render work.\n     *\n     * @param {ChangedFlags} changed - dictionary of flags indicating which state\n     * members have changed since the last render\n     */\n    [render](changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n    }\n\n    /**\n     * Render any pending component changes to the DOM.\n     *\n     * This method does nothing if the state has not changed since the last\n     * render call.\n     *\n     * ReactiveMixin will invoke this method following a `setState` call;\n     * you should not need to invoke this method yourself.\n     *\n     * This method invokes the internal `render` method, then invokes the\n     * `rendered` method.\n     */\n    [renderChanges]() {\n      if (this[firstRender] === undefined) {\n        // First render.\n        this[firstRender] = true;\n      }\n\n      // Get the log of which fields have changed since the last render.\n      const changed = this[changedSinceLastRenderKey];\n\n      // We only render if this is the first render, or state has changed since\n      // the last render.\n      if (this[firstRender] || changed) {\n        // If at least one of the[setState] calls was made in response\n        // to user interaction or some other component-internal event, set the\n        // raiseChangeEvents flag so that render/rendered methods know whether\n        // to raise property change events. See the comments in the component\n        // constructor where we initialize this flag for details.\n        const saveRaiseChangeEvents = this[raiseChangeEvents];\n        this[raiseChangeEvents] = this[raiseChangeEventsInNextRenderKey];\n\n        // We set a flag to indicate that rendering is happening. The component\n        // may use this to avoid triggering other updates during the render.\n        this[rendering] = true;\n\n        // Invoke any internal render implementations.\n        this[render](changed);\n\n        this[rendering] = false;\n\n        // Since we've now rendered all changes, clear the change log. If other\n        // async render calls are queued up behind this call, they'll see an\n        // empty change log, and so skip unnecessary render work.\n        this[changedSinceLastRenderKey] = null;\n\n        // Let the component know it was rendered.\n        this[rendered](changed);\n\n        // We've now rendered for the first time.\n        this[firstRender] = false;\n\n        // Restore state of event flags.\n        this[raiseChangeEvents] = saveRaiseChangeEvents;\n        this[raiseChangeEventsInNextRenderKey] = saveRaiseChangeEvents;\n      }\n    }\n\n    /**\n     * Perform any work that must happen after state changes have been rendered\n     * to the DOM.\n     *\n     * The default implementation of this method does nothing. Override this\n     * method in your component to perform work that requires the component to\n     * be fully rendered, such as setting focus on a shadow element or\n     * inspecting the computed style of an element. If such work should result\n     * in a change in component state, you can safely call `setState` during the\n     * `rendered` method.\n     *\n     * Be sure to call `super` in your method implementation so that your\n     * component's base classes and mixins have a chance to perform their own\n     * post-render work.\n     *\n     * @param {ChangedFlags} changed\n     */\n    [rendered](changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n    }\n\n    /**\n     * Update the component's state by merging the specified changes on\n     * top of the existing state. If the component is connected to the document,\n     * and the new state has changed, this returns a promise to asynchronously\n     * render the component. Otherwise, this returns a resolved promise.\n     *\n     * @param {PlainObject} changes - the changes to apply to the element's state\n     * @returns {Promise} - resolves when the new state has been rendered\n     */\n    async [setState](changes) {\n      // There's no good reason to have a render method update state.\n      if (this[rendering]) {\n        /* eslint-disable no-console */\n        console.warn(\n          `${this.constructor.name} called [setState] during rendering, which you should avoid.\\nSee https://elix.org/documentation/ReactiveMixin.`\n        );\n      }\n\n      // Apply the changes to a copy of the component's current state to produce\n      // a new, updated state and a dictionary of flags indicating which fields\n      // actually changed.\n      const { state, changed } = copyStateWithChanges(this, changes);\n\n      // We only need to apply the changes to the component state if: a) the\n      // current state is undefined (this is the first time setState has been\n      // called), or b) the supplied changes parameter actually contains\n      // substantive changes.\n      if (this[stateKey] && Object.keys(changed).length === 0) {\n        // No need to update state.\n        return;\n      }\n\n      // Freeze the new state so it's immutable. This prevents accidental\n      // attempts to set state without going through setState.\n      Object.freeze(state);\n\n      // Set this as the component's new state.\n      this[stateKey] = state;\n\n      // If setState was called with the raiseChangeEvents flag set, record that\n      // fact for use in rendering. See the comments in the component\n      // constructor for details.\n      if (this[raiseChangeEvents]) {\n        this[raiseChangeEventsInNextRenderKey] = true;\n      }\n\n      // Look to see whether the component is already set up to render.\n      const willRender =\n        this[firstRender] === undefined ||\n        this[changedSinceLastRenderKey] !== null;\n\n      // Add this round of changed fields to the complete log of fields that\n      // have changed since the component was last rendered.\n      this[changedSinceLastRenderKey] = Object.assign(\n        this[changedSinceLastRenderKey] || {},\n        changed\n      );\n\n      // We only need to queue a render if we're in the document and a render\n      // operation hasn't already been queued for this component. If we're not\n      // in the document yet, when the component is eventually added to the\n      // document, the connectedCallback will ensure we render at that point.\n      const needsRender = this.isConnected && !willRender;\n      if (needsRender) {\n        // Yield with promise timing. This lets any *synchronous* setState calls\n        // that happen after this current setState call complete first. Their\n        // effects on the state will be batched up, and accumulate in the change\n        // log stored under this[changedSinceLastRenderKey].\n        await Promise.resolve();\n\n        // Now that the above promise has resolved, render the component. By the\n        // time this line is reached, the complete log of batched changes can be\n        // applied in a single render call.\n        this[renderChanges]();\n      }\n    }\n\n    /**\n     * The component's current state.\n     *\n     * The returned state object is immutable. To update it, invoke\n     * `internal.setState`.\n     *\n     * It's extremely useful to be able to inspect component state while\n     * debugging. If you append `?elixdebug=true` to a page's URL, then\n     * ReactiveMixin will conditionally expose a public `state` property that\n     * returns the component's state. You can then access the state in your\n     * browser's debug console.\n     *\n     * @type {PlainObject}\n     */\n    get [state]() {\n      return this[stateKey];\n    }\n\n    /**\n     * Ask the component whether a state with a set of recently-changed fields\n     * implies that additional second-order changes should be applied to that\n     * state to make it consistent.\n     *\n     * This method is invoked during a call to `internal.setState` to give all\n     * of a component's mixins and classes a chance to respond to changes in\n     * state. If one mixin/class updates state that it controls, another\n     * mixin/class may want to respond by updating some other state member that\n     * *it* controls.\n     *\n     * This method should return a dictionary of changes that should be applied\n     * to the state. If the dictionary object is not empty, the\n     * `internal.setState` method will apply the changes to the state, and\n     * invoke this `stateEffects` method again to determine whether there are\n     * any third-order effects that should be applied. This process repeats\n     * until all mixins/classes report that they have no additional changes to\n     * make.\n     *\n     * See an example of how `ReactiveMixin` invokes the `stateEffects` to\n     * [ensure state consistency](ReactiveMixin#ensuring-state-consistency).\n     *\n     * @param {PlainObject} state - a proposal for a new state\n     * @param {ChangedFlags} changed - the set of fields changed in this\n     * latest proposal for the new state\n     * @returns {PlainObject}\n     */\n    [stateEffects](state, changed) {\n      return super[stateEffects] ? super[stateEffects](state, changed) : {};\n    }\n  }\n\n  // Expose state when debugging; see note for `[state]` getter.\n  const elixdebug = new URLSearchParams(location.search).get(\"elixdebug\");\n  if (elixdebug === \"true\") {\n    Object.defineProperty(Reactive.prototype, \"state\", {\n      get() {\n        return this[state];\n      },\n    });\n  }\n\n  return Reactive;\n}\n\n/**\n * Create a copy of the component's state with the indicated changes applied.\n * Ask the component whether the new state implies any second-order effects. If\n * so, apply those and loop again until the state has stabilized. Return the new\n * state and a dictionary of flags indicating which fields were actually\n * changed.\n *\n * @private\n * @param {Element} element\n * @param {PlainObject} changes\n */\nexport function copyStateWithChanges(element, changes) {\n  // Start with a copy of the current state.\n  /** @type {PlainObject} */\n  const state = Object.assign({}, element[stateKey]);\n  /** @type {ChangedFlags} */\n  const changed = {};\n  // Take the supplied changes as the first round of effects.\n  let effects = changes;\n  // Loop until there are no effects to apply.\n  /* eslint-disable no-constant-condition */\n  while (true) {\n    // See whether the effects actually changed anything in state.\n    const changedByEffects = fieldsChanged(state, effects);\n    if (Object.keys(changedByEffects).length === 0) {\n      // No more effects to apply; we're done.\n      break;\n    }\n    // Apply the effects.\n    Object.assign(state, effects);\n    Object.assign(changed, changedByEffects);\n    // Ask the component if there are any second- (or third-, etc.) order\n    // effects that should be applied.\n    effects = element[stateEffects](state, changedByEffects);\n  }\n  return { state, changed };\n}\n\n/**\n * Return true if the two values are equal.\n *\n * @private\n * @param {any} value1\n * @param {any} value2\n * @returns {boolean}\n */\nfunction equal(value1, value2) {\n  if (value1 instanceof Date && value2 instanceof Date) {\n    return value1.getTime() === value2.getTime();\n  }\n  return value1 === value2;\n}\n\n/**\n * Return a dictionary of flags indicating which of the indicated changes to the\n * state are actually substantive changes.\n *\n * @private\n * @param {PlainObject} state\n * @param {PlainObject} changes\n */\nfunction fieldsChanged(state, changes) {\n  /** @type {ChangedFlags} */\n  const changed = {};\n  for (const field in changes) {\n    if (!equal(changes[field], state[field])) {\n      changed[field] = true;\n    }\n  }\n  return changed;\n}\n","import {\n  delegatesFocus,\n  hasDynamicTemplate,\n  ids,\n  render,\n  shadowRoot,\n  shadowRootMode,\n  template,\n} from \"./internal.js\";\n\n// A cache of processed templates, indexed by element class.\nconst classTemplateMap = new Map();\n\n// A Proxy that maps shadow element IDs to shadow elements.\n// This will be return as the element's `this[ids]` property;\n// see comments in that property below.\n/** @type {any} */\nconst shadowIdProxyKey = Symbol(\"shadowIdProxy\");\n\n// A reference stored on the shadow element proxy target to get to the actual\n// element. We use a Symbol here instead of a string name to avoid naming\n// conflicts with the element's internal shadow element IDs.\nconst proxyElementKey = Symbol(\"proxyElement\");\n\n// A handler used for the shadow element ID proxy.\nconst shadowIdProxyHandler = {\n  get(target, id) {\n    // From this proxy, obtain a reference to the original component.\n    const element = target[proxyElementKey];\n\n    // Get a reference to the component's open or closed shadow root.\n    const root = element[shadowRoot];\n\n    // Look for a shadow element with the indicated ID.\n    return root && typeof id === \"string\" ? root.getElementById(id) : null;\n  },\n};\n\n/**\n * Stamps a template into a component's Shadow DOM when instantiated\n *\n * To use this mixin, define a `template` method that returns a string or HTML\n * `<template>` element:\n *\n *     import { createElement, replace, transmute } from 'elix/src/template.js';\n *\n *     class MyElement extends ShadowTemplateMixin(HTMLElement) {\n *       get [template]() {\n *         return templateFrom.html`Hello, <em>world</em>.`;\n *       }\n *     }\n *\n * When your component class is instantiated, a shadow root will be created on\n * the instance, and the contents of the template will be cloned into the\n * shadow root. If your component does not define a `template` method, this\n * mixin has no effect.\n *\n * This adds a member on the component called `this[ids]` that can be used to\n * reference shadow elements with IDs. E.g., if component's shadow contains an\n * element `<button id=\"foo\">`, then this mixin will create a member\n * `this[ids].foo` that points to that button.\n *\n * @module ShadowTemplateMixin\n * @param {Constructor<HTMLElement>} Base\n */\nexport default function ShadowTemplateMixin(Base) {\n  // The class prototype added by the mixin.\n  class ShadowTemplate extends Base {\n    /**\n     * A convenient shortcut for looking up an element by ID in the component's\n     * Shadow DOM subtree.\n     *\n     * Example: if component's template contains a shadow element `<button\n     * id=\"foo\">`, you can use the reference `this[ids].foo` to obtain\n     * the corresponding button in the component instance's shadow tree. The\n     * `ids` property is simply a shorthand for `getElementById`, so\n     * `this[ids].foo` is the same as\n     * `this[shadowRoot].getElementById('foo')`.\n     *\n     * @type {object} - a dictionary mapping shadow element IDs to elements\n     */\n    get [ids]() {\n      if (!this[shadowIdProxyKey]) {\n        // Construct a proxy that maps to getElementById.\n        const target = {\n          // Give the proxy a means of refering to this element via the target.\n          [proxyElementKey]: this,\n        };\n        this[shadowIdProxyKey] = new Proxy(target, shadowIdProxyHandler);\n      }\n      return this[shadowIdProxyKey];\n    }\n\n    /*\n     * If the component defines a template, a shadow root will be created on the\n     * component instance, and the template stamped into it.\n     */\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n\n      // We populate the shadow root if the component doesn't have a shadow;\n      // i.e., the first time the component is rendered. For this check, we use\n      // an internal reference we maintain for the shadow root; see below.\n      if (!this[shadowRoot]) {\n        // If this type of element defines a template, prepare it for use.\n        const template = getTemplate(this);\n\n        if (template) {\n          // Stamp the template into a new shadow root.\n          const root = this.attachShadow({\n            delegatesFocus: this[delegatesFocus],\n            mode: this[shadowRootMode],\n          });\n          const clone = document.importNode(template.content, true);\n          root.append(clone);\n\n          // After this call, we won't be able to rely on being able to access\n          // the shadow root via `this.shadowRoot`, because the component may\n          // have asked for a closed shadow root. We save a reference to the\n          // shadow root now so that the component always has a consistent means\n          // to reference its own shadow root.\n          this[shadowRoot] = root;\n        } else {\n          // No template. Set shadow root to null (instead of undefined) so we\n          // won't try to render shadow on next render.\n          this[shadowRoot] = null;\n        }\n      }\n    }\n\n    /**\n     * @type {ShadowRootMode}\n     * @default \"open\"\n     */\n    get [shadowRootMode]() {\n      return \"open\";\n    }\n  }\n\n  return ShadowTemplate;\n}\n\n/**\n * Return the template for the element being instantiated.\n *\n * If this is the first time we're creating this type of element, or the\n * component has indicated that its template is dynamic (and should be retrieved\n * each time), ask the component class for the template and cache the result.\n * Otherwise, immediately return the cached template.\n *\n * @private\n * @param {HTMLElement} element\n * @returns {HTMLTemplateElement}\n */\nfunction getTemplate(element) {\n  let t = element[hasDynamicTemplate]\n    ? undefined // Always retrieve template\n    : classTemplateMap.get(element.constructor); // See if we've cached it\n  if (t === undefined) {\n    // Ask the component for its template.\n    t = element[template];\n    // A component using this mixin isn't required to supply a template --\n    // if they don't, they simply won't end up with a shadow root.\n    if (t) {\n      // But if the component does supply a template, it needs to be an\n      // HTMLTemplateElement instance.\n      if (!(t instanceof HTMLTemplateElement)) {\n        throw `Warning: the [template] property for ${element.constructor.name} must return an HTMLTemplateElement.`;\n      }\n    }\n    if (!element[hasDynamicTemplate]) {\n      // Store prepared template for next creation of same type of element.\n      // If the component didn't define a template, store null so that we skip\n      // the template retrieval next time.\n      classTemplateMap.set(element.constructor, t || null);\n    }\n  }\n  return t;\n}\n","import AttributeMarshallingMixin from \"./AttributeMarshallingMixin.js\";\nimport ReactiveMixin from \"./ReactiveMixin.js\";\nimport ShadowTemplateMixin from \"./ShadowTemplateMixin.js\";\n\n/**\n * General-purpose base for writing components in functional-reactive style\n *\n * This base class lets you create web components in a functional-reactive\n * programming (FRP) style. It simply bundles a small set of mixins:\n *\n *     const ReactiveElement =\n *       AttributeMarshallingMixin(\n *       ReactiveMixin(\n *       ShadowTemplateMixin(\n *         HTMLElement\n *       )))));\n *\n * `ReactiveElement` is provided as a convenience. You can achieve the same\n * result by applying the mixins yourself to `HTMLElement`.\n *\n * @inherits HTMLElement\n * @mixes AttributeMarshallingMixin\n * @mixes ReactiveMixin\n * @mixes ShadowTemplateMixin\n */\nconst ReactiveElement = AttributeMarshallingMixin(\n  ReactiveMixin(ShadowTemplateMixin(HTMLElement))\n);\n\nexport default ReactiveElement;\n","/**\n * Collection of shared Symbol objects for internal component communication.\n *\n * The shared `Symbol` objects in this module let mixins and a component\n * internally communicate without exposing these internal properties and methods\n * in the component's public API. They also help avoid unintentional name\n * collisions, as a component developer must specifically import the `internal`\n * module and reference one of its symbols.\n *\n * To use these `Symbol` objects in your own component, include this module and\n * then create a property or method whose key is the desired Symbol. E.g.,\n * [ShadowTemplateMixin](ShadowTemplateMixin) expects a component to define\n * a property called [template](#template):\n *\n *     import { template } from 'elix/src/core/internal.js';\n *     import { templateFrom } from 'elix/src/core/htmlLiterals.js'\n *     import ShadowTemplateMixin from 'elix/src/core/ShadowTemplateMixin.js';\n *\n *     class MyElement extends ShadowTemplateMixin(HTMLElement) {\n *       [template]() {\n *         return templateFrom.html`Hello, <em>world</em>.`;\n *       }\n *     }\n *\n * The above use of the internal `template` member lets the mixin find the\n * component's template in a way that will not pollute the component's public\n * API or interfere with other component logic. For example, if for some reason\n * the component wants to define a separate property with the plain string name,\n * \"template\", it can do so without affecting the above property setter.\n *\n * @module internal\n */\n\nimport * as coreInternal from \"../core/internal.js\";\n\n/**\n * Symbol for the `applyElementData` method.\n *\n * Components that want to be able to apply data from one element to another\n * can support this method. E.g., [DropdownList](DropdownList) uses this to\n * apply data from the selected item to the component's value part.\n */\nexport const applyElementData = Symbol(\"applyElementData\");\n\n/**\n * Symbol for the `checkSize` method.\n *\n * If defined, this method will be invoked by [ResizeMixin](ResizeMixin)\n * when an element's size may have changed. The default implementation of\n * this method compares the element's current `clientHeight` and `clientWidth`\n * properties against the last known values of those properties (saved in\n * `state.clienHeight` and `state.clientWidth`).\n *\n * Components should override this method if they contain elements that may need\n * to know about size changes as well. For example, when an [Overlay](Overlay)\n * mixin opens, it invokes this method on any content elements that define it.\n * This gives the contents a chance to resize in response to being displayed.\n */\nexport const checkSize = Symbol(\"checkSize\");\n\n/**\n * Symbol for the `closestAvailableItemIndex` method.\n *\n * This method is defined by [ItemsCursorMixin](ItemsCursorMixin). You can call\n * this if you want to find an item at a particular location, but may need to\n * account for the fact that the item at that position is not available, and\n * would like to find the closest item that is available.\n */\nexport const closestAvailableItemIndex = Symbol(\"closestAvailableItemIndex\");\n\n/**\n * Symbol for the `contentSlot` property.\n *\n * [SlotContentMixin](SlotContentMixin) uses this to identify which slot\n * element in the component's shadow tree that holds the component's content.\n * By default, this is the first slot element with no \"name\" attribute. You\n * can override this to return a different slot.\n */\nexport const contentSlot = Symbol(\"contentSlot\");\n\n/**\n * The default state for this element.\n */\nexport const defaultState = coreInternal.defaultState;\n\n/**\n * Symbol for the `defaultTabIndex` property.\n *\n * [KeyboardMixin](KeyboardMixin) uses this if it is unable to successfully\n * parse a string tabindex attribute.\n */\nexport const defaultTabIndex = Symbol(\"defaultTabIndex\");\n\n/**\n * Symbol for the `delegatesFocus` property.\n *\n * [DelegatesFocusMixin](DelegatesFocusMixin) defines this property, returning\n * true to indicate that the focus is being delegated, even in browsers that\n * don't support that natively. Mixins like [KeyboardMixin](KeyboardMixin) use\n * this to accommodate focus delegation.\n */\nexport const delegatesFocus = coreInternal.delegatesFocus;\n\n/**\n * Symbol for the `effectEndTarget` property.\n *\n * [TransitionEffectMixin](TransitionEffectMixin) inspects this property to\n * determine which element's `transitionend` event will signal the end of a\n * transition effect.\n */\nexport const effectEndTarget = Symbol(\"effectEndTarget\");\n\n/**\n * Symbol for the `firstRender` property.\n *\n * [ReactiveMixin](ReactiveMixin) sets the property to `true` during the\n * element's first `connectedCallback`, then `false` in subsequent callbacks.\n *\n * You can inspect this property in your own `connectedCallback` handler\n * to do work like wiring up events that should only happen once.\n */\nexport const firstRender = coreInternal.firstRender;\n\n/**\n * Symbol for the `focusTarget` property.\n *\n * [DelegatesFocusMixin](DelegatesFocusMixin) defines this property as either:\n * 1) the element itself, in browsers that support native focus delegation or,\n * 2) the shadow root's first focusable element.\n */\nexport const focusTarget = coreInternal.focusTarget;\n\n/**\n * Symbol for the `getItemText` method.\n *\n * This method can be applied to an item to return its text.\n * [KeyboardPrefixCursorMixin](KeyboardPrefixCursorMixin) uses this to\n * obtain the text for each item in a list, then matches keypresses again that\n * text.\n *\n * This method takes a single parameter: the `HTMLElement` of the item from\n * which text should be extracted.\n */\nexport const getItemText = Symbol(\"getItemText\");\n\n/**\n * Symbol for the `goDown` method.\n *\n * This method is invoked when the user wants to go/navigate down.\n */\nexport const goDown = Symbol(\"goDown\");\n\n/**\n * Symbol for the `goEnd` method.\n *\n * This method is invoked when the user wants to go/navigate to the end (e.g.,\n * of a list).\n */\nexport const goEnd = Symbol(\"goEnd\");\n\n/**\n * Symbol for the `goFirst` method.\n *\n * This method is invoked when the user wants to go to the first item in a list.\n */\nexport const goFirst = Symbol(\"goFirst\");\n\n/**\n * Symbol for the `goLast` method.\n *\n * This method is invoked when the user wants to go to the last item in a list.\n */\nexport const goLast = Symbol(\"goLast\");\n\n/**\n * Symbol for the `goLeft` method.\n *\n * This method is invoked when the user wants to go/navigate left. Mixins that\n * make use of this method include\n * [KeyboardDirectionMixin](KeyboardDirectionMixin) and\n * [SwipeDirectionMixin](SwipeDirectionMixin).\n */\nexport const goLeft = Symbol(\"goLeft\");\n\n/**\n * Symbol for the `goNext` method.\n *\n * This method is invoked when the user wants to go/navigate to the next item.\n */\nexport const goNext = Symbol(\"goNext\");\n\n/**\n * Symbol for the `goPrevious` method.\n *\n * This method is invoked when the user wants to go/navigate to the previous item.\n */\nexport const goPrevious = Symbol(\"goPrevious\");\n\n/**\n * Symbol for the `goRight` method.\n *\n * This method is invoked when the user wants to go/navigate right. Mixins\n * that make use of this method include\n * [KeyboardDirectionMixin](KeyboardDirectionMixin) and\n * [SwipeDirectionMixin](SwipeDirectionMixin).\n */\nexport const goRight = Symbol(\"goRight\");\n\n/**\n * Symbol for the `goStart` method.\n *\n * This method is invoked when the user wants to go/navigate to the start\n * (e.g., of a list).\n */\nexport const goStart = Symbol(\"goStart\");\n\n/**\n * Symbol for the `goToItemWithPrefix` method.\n *\n * This method is invoked by\n * [KeyboardPrefixCursorMixin](KeyboardPrefixCursorMixin) when the user types\n * text characters.\n */\nexport const goToItemWithPrefix = Symbol(\"goToItemWithPrefix\");\n\n/**\n * Symbol for the `goUp` method.\n *\n * This method is invoked when the user wants to go/navigate up.\n */\nexport const goUp = Symbol(\"goUp\");\n\n/**\n * Symbol for the `hasDynamicTemplate` property.\n *\n * If your component class does not always use the same template, define a\n * static class property getter with this symbol and have it return `true`.\n * This will disable template caching for your component.\n */\nexport const hasDynamicTemplate = coreInternal.hasDynamicTemplate;\n\n/**\n * Symbol for the `ids` property.\n *\n * [ShadowTemplateMixin](ShadowTemplateMixin) defines a shorthand function\n * `internal.ids` that can be used to obtain a reference to a shadow element with\n * a given ID.\n *\n * Example: if component's template contains a shadow element\n * `<button id=\"foo\">`, you can use the reference `this[ids].foo` to obtain\n * the corresponding button in the component instance's shadow tree.\n * The `ids` function is simply a shorthand for `getElementById`, so\n * `this[ids].foo` is the same as `this.shadowRoot.getElementById('foo')`.\n */\nexport const ids = coreInternal.ids;\n\n/**\n * Symbol for the `inputDelegate` property.\n *\n * [DelegateInputSelectionMixin](DelegateInputSelectionMixin) uses this property\n * to indicate which shadow element is the input-type element to which text\n * selection methods and properties should be delegated.\n */\nexport const inputDelegate = Symbol(\"inputDelegate\");\n\n/**\n * Symbol for the `itemsDelegate` property.\n *\n * A component using [DelegateItemsMixin](DelegateItemsMixin) uses this property\n * to indicate which one of its shadow elements is the one whose `items`\n * property will be treated as the component's own `items`.\n */\nexport const itemsDelegate = Symbol(\"itemsDelegate\");\n\n/**\n * Symbol for the `keydown` method.\n *\n * This method is invoked when an element receives a `keydown` event.\n *\n * An implementation of `internal.keydown` should return `true` if it handled\n * the event, and `false` otherwise. If `true` is returned (the event was\n * handled), `KeyboardMixin` invokes the event's `preventDefault` and\n * `stopPropagation` methods to let the browser know the event was handled.\n *\n * The convention for handling `internal.keydown` is that the last mixin\n * applied wins. That is, if an implementation of `internal.keydown` *did*\n * handle the event, it can return immediately. If it did not, it should\n * invoke `super` to let implementations further up the prototype chain have\n * their chance.\n *\n * This method takes a `KeyboardEvent` parameter that contains the event being\n * processed.\n */\nexport const keydown = Symbol(\"keydown\");\n\n/**\n * Symbol for the `matchText` method.\n *\n * [AutoCompleteInput](AutoCompleteInput) invokes this method when trying\n * to find a match for a given input string against its set of texts.\n */\nexport const matchText = Symbol(\"matchText\");\n\n/**\n * Symbol for the `mouseenter` method.\n *\n * [HoverMixin](HoverMixin) invokes this method when the user moves the\n * mouse over a component. That mixin provides a base implementation of this\n * method, but you can extend it to do additional work on `mouseenter`.\n *\n * This method takes a `MouseEvent` parameter that contains the event being\n * processed.\n */\nexport const mouseenter = Symbol(\"mouseenter\");\n\n/**\n * Symbol for the `mouseleave` method.\n *\n * [HoverMixin](HoverMixin) invokes this method when the user moves off a\n * component. That mixin provides a base implementation of this method, but\n * you can extend it to do additional work on `mouseleave`.\n *\n * This method takes a `MouseEvent` parameter that contains the event being\n * processed.\n */\nexport const mouseleave = Symbol(\"mouseleave\");\n\n/**\n * Symbol for access to native HTML element internals.\n */\nexport const nativeInternals = coreInternal.nativeInternals;\n\n/**\n * Symbol for the `raiseChangeEvents` property.\n *\n * This property is used by mixins to determine whether they should raise\n * property change events. The standard HTML pattern is to only raise such\n * events in response to direct user interactions. For a detailed discussion\n * of this point, see the Gold Standard checklist item for\n * [Propery Change Events](https://github.com/webcomponents/gold-standard/wiki/Property%20Change%20Events).\n *\n * The above article describes a pattern for using a flag to track whether\n * work is being performed in response to internal component activity, and\n * whether the component should therefore raise property change events.\n * This `raiseChangeEvents` symbol is a shared flag used for that purpose by\n * all Elix mixins and components. Sharing this flag ensures that internal\n * activity (e.g., a UI event listener) in one mixin can signal other mixins\n * handling affected properties to raise change events.\n *\n * All UI event listeners (and other forms of internal handlers, such as\n * timeouts and async network handlers) should set `raiseChangeEvents` to\n * `true` at the start of the event handler, then `false` at the end:\n *\n *     this.addEventListener('click', event => {\n *       this[raiseChangeEvents] = true;\n *       // Do work here, possibly setting properties, like:\n *       this.foo = 'Hello';\n *       this[raiseChangeEvents] = false;\n *     });\n *\n * Elsewhere, property setters that raise change events should only do so it\n * this property is `true`:\n *\n *     set foo(value) {\n *       // Save foo value here, do any other work.\n *       if (this[raiseChangeEvents]) {\n *         export const event = new CustomEvent('foochange');\n *         this.dispatchEvent(event);\n *       }\n *     }\n *\n * In this way, programmatic attempts to set the `foo` property will not trigger\n * the `foochange` event, but UI interactions that update that property will\n * cause those events to be raised.\n */\nexport const raiseChangeEvents = coreInternal.raiseChangeEvents;\n\n/**\n * Symbol for the `render` method.\n *\n * [ReactiveMixin](ReactiveMixin) invokes this `internal.render` method to give\n * the component a chance to render recent changes in component state.\n */\nexport const render = coreInternal.render;\n\n/**\n * Symbol for the `renderChanges` method.\n *\n * [ReactiveMixin](ReactiveMixin) invokes this method in response to a\n * `setState` call; you should generally not invoke this method yourself.\n */\nexport const renderChanges = coreInternal.renderChanges;\n\n/**\n * Symbol for the `renderDataToElement` method.\n *\n * [DataItemsMixin](DataItemsMixin) invokes this method to render data to an\n * element being used as an item in a list.\n */\nexport const renderDataToElement = Symbol(\"renderDataToElement\");\n\n/**\n * Symbol for the `rendered` method.\n *\n * [ReactiveMixin](ReactiveMixin) will invoke this method after your\n * element has completely finished rendering.\n */\nexport const rendered = coreInternal.rendered;\n\n/**\n * Symbol for the `rendering` property.\n *\n * [ReactiveMixin](ReactiveMixin) sets this property to true during rendering,\n * at other times it will be false.\n */\nexport const rendering = coreInternal.rendering;\n\n/**\n * Symbol for the `scrollTarget` property.\n *\n * This property indicates which element in a component's shadow subtree\n * should be scrolled. [CursorInViewMixin](CursorInViewMixin) can use\n * this property to determine which element should be scrolled to keep the\n * selected item in view.\n */\nexport const scrollTarget = Symbol(\"scrollTarget\");\n\n/**\n * Symbol for the `setState` method.\n *\n * A component using [ReactiveMixin](ReactiveMixin) can invoke this method to\n * apply changes to the element's current state.\n */\nexport const setState = coreInternal.setState;\n\n/**\n * Symbol for the `shadowRoot` property.\n *\n * This property holds a reference to an element's shadow root, like\n * `this.shadowRoot`. This propery exists because `this.shadowRoot` is not\n * available for components with closed shadow roots.\n * [ShadowTemplateMixin](ShadowTemplateMixin) creates open shadow roots by\n * default, but you can opt into creating closed shadow roots; see\n * [shadowRootMode](internal#internal.shadowRootMode).\n */\nexport const shadowRoot = coreInternal.shadowRoot;\n\n/**\n * Symbol for the `shadowRootMode` property.\n *\n * If true (the default), then [ShadowTemplateMixin](ShadowTemplateMixin) will\n * create an open shadow root when the component is instantiated. Set this to\n * false if you want to programmatically hide component internals in a closed\n * shadow root.\n */\nexport const shadowRootMode = coreInternal.shadowRootMode;\n\n/**\n * Symbol for the `startEffect` method.\n *\n * A component using [TransitionEffectMixin](TransitionEffectMixin) can invoke\n * this method to trigger the application of a named, asynchronous CSS\n * transition effect.\n *\n * This method takes a single `string` parameter giving the name of the effect\n * to start.\n */\nexport const startEffect = Symbol(\"startEffect\");\n\n/**\n * The element's current state.\n *\n * This is managed by [ReactiveMixin](ReactiveMixin).\n */\nexport const state = coreInternal.state;\n\nexport const stateEffects = coreInternal.stateEffects;\n\n/**\n * Symbol for the `swipeDown` method.\n *\n * The swipe mixin [TouchSwipeMixin](TouchSwipeMixin) invokes this method when\n * the user finishes a gesture to swipe down.\n */\nexport const swipeDown = Symbol(\"swipeDown\");\n\n/**\n * Symbol for the `swipeDownComplete` method.\n *\n * [SwipeCommandsMixin](SwipeCommandsMixin) invokes this method after any\n * animated transition associated with a swipe down has completed.\n */\nexport const swipeDownComplete = Symbol(\"swipeDownComplete\");\n\n/**\n * Symbol for the `swipeLeft` method.\n *\n * The swipe mixins [TouchSwipeMixin](TouchSwipeMixin) and\n * [TrackpadSwipeMixin](TrackpadSwipeMixin) invoke this method when the user\n * finishes a gesture to swipe left.\n */\nexport const swipeLeft = Symbol(\"swipeLeft\");\n\n/**\n * Symbol for the `swipeLeftTransitionEnd` method.\n *\n * [SwipeCommandsMixin](SwipeCommandsMixin) invokes this method after any\n * animated transition associated with a swipe left has completed.\n */\nexport const swipeLeftTransitionEnd = Symbol(\"swipeLeftTransitionEnd\");\n\n/**\n * Symbol for the `swipeRight` method.\n *\n * The swipe mixins [TouchSwipeMixin](TouchSwipeMixin) and\n * [TrackpadSwipeMixin](TrackpadSwipeMixin) invoke this method when the user\n * finishes a gesture to swipe right.\n */\nexport const swipeRight = Symbol(\"swipeRight\");\n\n/**\n * Symbol for the `swipeRightTransitionEnd` method.\n *\n * [SwipeCommandsMixin](SwipeCommandsMixin) invokes this method after any\n * animated transition associated with a swipe right has completed.\n */\nexport const swipeRightTransitionEnd = Symbol(\"swipeRightTransitionEnd\");\n\n/**\n * Symbol for the `swipeUp` method.\n *\n * The swipe mixin [TouchSwipeMixin](TouchSwipeMixin) invokes this method when\n * the user finishes a gesture to swipe up.\n */\nexport const swipeUp = Symbol(\"swipeUp\");\n\n/**\n * Symbol for the `swipeUpComplete` method.\n *\n * [SwipeCommandsMixin](SwipeCommandsMixin) invokes this method after any\n * animated transition associated with a swipe up has completed.\n */\nexport const swipeUpComplete = Symbol(\"swipeUpComplete\");\n\n/**\n * Symbol for the `swipeStart` method.\n *\n * [TouchSwipeMixin](TouchSwipeMixin) and\n * [TrackpadSwipeMixin](TrackpadSwipeMixin) invoke this method when a swipe\n * is starting, passing in the starting (x, y) client coordinate.\n */\nexport const swipeStart = Symbol(\"swipeStart\");\n\n/**\n * Symbol for the `swipeTarget` property.\n *\n * By default, the swipe mixins [TouchSwipeMixin](TouchSwipeMixin) and\n * [TrackpadSwipeMixin](TrackpadSwipeMixin) assume that the element the user\n * is swiping the top-level element. In some cases (e.g., [Drawer](Drawer)),\n * the component wants to let the user swipe a shadow element. In such cases,\n * this property should return the element that should be swiped.\n *\n * The swipe target's `offsetWidth` is used by the mixin to calculate the\n * `state.swipeFraction` member when the user drags their finger. The\n * `swipeFraction` is the distance the user has dragged in the current drag\n * operation over that `offsetWidth`.\n */\nexport const swipeTarget = Symbol(\"swipeTarget\");\n\n/**\n * Symbol for the `tap` method.\n *\n * This method is invoked when an element receives an operation that should\n * be interpreted as a tap. [TapCursorMixin](TapCursorMixin)\n * invokes this when the element receives a `mousedown` event, for example.\n */\nexport const tap = Symbol(\"tap\");\n\n/**\n * Symbol for the `template` method.\n *\n * [ShadowTemplateMixin](ShadowTemplateMixin) uses this property to obtain a\n * component's template, which it will clone into a component's shadow root.\n */\nexport const template = coreInternal.template;\n\n/**\n * Symbol for the `toggleSelectedFlag` method.\n *\n * [ItemsMultiSelectMixin](ItemsMultiSelectMixin) exposes this method to let\n * other mixins like [MultiSelectAPIMixin](MultiSelectAPIMixin) toggle the\n * selected state of an individual item.\n */\nexport const toggleSelectedFlag = Symbol(\"toggleSelectedFlag\");\n\n// Expose internals as a global when debugging.\nconst elixdebug = new URLSearchParams(location.search).get(\"elixdebug\");\nif (elixdebug === \"true\") {\n  /** @type {any} */ (window).elix = {\n    internal: {\n      checkSize,\n      closestAvailableItemIndex,\n      contentSlot,\n      defaultState,\n      defaultTabIndex,\n      delegatesFocus,\n      effectEndTarget,\n      firstRender,\n      focusTarget,\n      getItemText,\n      goDown,\n      goEnd,\n      goFirst,\n      goLast,\n      goLeft,\n      goNext,\n      goPrevious,\n      goRight,\n      goStart,\n      goToItemWithPrefix,\n      goUp,\n      hasDynamicTemplate,\n      ids,\n      inputDelegate,\n      itemsDelegate,\n      keydown,\n      mouseenter,\n      mouseleave,\n      nativeInternals,\n      event,\n      raiseChangeEvents,\n      render,\n      renderChanges,\n      renderDataToElement,\n      rendered,\n      rendering,\n      scrollTarget,\n      setState,\n      shadowRoot,\n      shadowRootMode,\n      startEffect,\n      state,\n      stateEffects,\n      swipeDown,\n      swipeDownComplete,\n      swipeLeft,\n      swipeLeftTransitionEnd,\n      swipeRight,\n      swipeRightTransitionEnd,\n      swipeUp,\n      swipeUpComplete,\n      swipeStart,\n      swipeTarget,\n      tap,\n      template,\n      toggleSelectedFlag,\n    },\n  };\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  keydown,\n  render,\n  rendering,\n  setState,\n  state,\n} from \"./internal.js\";\n\n// Symbols for private data members.\n/** @type {any} */\nconst previousBodyOverflowKey = Symbol(\"previousBodyStyleOverflow\");\n/** @type {any} */\nconst previousDocumentMarginRightKey = Symbol(\"previousDocumentMarginRight\");\n\n/**\n * Gives an overlay modal behavior.\n *\n * This blocks various user interactions to make an overlay behave like a modal\n * dialog:\n *\n * * Disables scrolling on the background document. **This is a global\n *   side-effect of opening the component.**\n * * A default ARIA role of `dialog`.\n * * Closes the element if user presses the Esc key.\n *\n * For modeless overlays, see `PopupModalityMixin` instead.\n *\n * @module DialogModalityMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function DialogModalityMixin(Base) {\n  return class DialogModality extends Base {\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        role: \"dialog\",\n      });\n    }\n\n    [keydown](/** @type {KeyboardEvent} */ event) {\n      let handled = false;\n\n      switch (event.key) {\n        case \"Escape\":\n          // Close on Esc key.\n          this.close({\n            canceled: \"Escape\",\n          });\n          handled = true;\n          break;\n      }\n\n      // Prefer mixin result if it's defined, otherwise use base result.\n      return handled || (super[keydown] && super[keydown](event)) || false;\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n      if (changed.opened) {\n        if (this[state].opened && document.documentElement) {\n          // Disable body scrolling to absorb space bar keypresses and other\n          // means of scrolling the top-level document.\n          const documentWidth = document.documentElement.clientWidth;\n          const scrollBarWidth = window.innerWidth - documentWidth;\n          this[previousBodyOverflowKey] = document.body.style.overflow;\n          this[previousDocumentMarginRightKey] =\n            scrollBarWidth > 0\n              ? document.documentElement.style.marginRight\n              : null;\n          document.body.style.overflow = \"hidden\";\n          if (scrollBarWidth > 0) {\n            document.documentElement.style.marginRight = `${scrollBarWidth}px`;\n          }\n        } else {\n          // Reenable body scrolling.\n          if (this[previousBodyOverflowKey] != null) {\n            document.body.style.overflow = this[previousBodyOverflowKey];\n            this[previousBodyOverflowKey] = null;\n          }\n          if (this[previousDocumentMarginRightKey] != null) {\n            document.documentElement.style.marginRight = this[\n              previousDocumentMarginRightKey\n            ];\n            this[previousDocumentMarginRightKey] = null;\n          }\n        }\n      }\n      if (changed.role) {\n        // Apply top-level role.\n        const { role } = this[state];\n        this.setAttribute(\"role\", role);\n      }\n    }\n\n    // Setting the standard role attribute will invoke this property setter,\n    // which will allow us to update our state.\n    get role() {\n      return super.role;\n    }\n    set role(role) {\n      super.role = role;\n      if (!this[rendering]) {\n        this[setState]({ role });\n      }\n    }\n  };\n}\n","import { deepContains, firstFocusableElement } from \"../core/dom.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { firstRender, ids, keydown, render, shadowRoot } from \"./internal.js\";\n\n// Symbols for private data members on an element.\nconst wrap = Symbol(\"wrap\");\n/** @type {any} */\nconst wrappingFocusKey = Symbol(\"wrappingFocus\");\n\n/**\n * Allows Tab and Shift+Tab operations to cycle the focus within the component.\n *\n * This mixin expects the component to provide:\n *\n * * A template-stamping mechanism compatible with `ShadowTemplateMixin`.\n *\n * The mixin provides these features to the component:\n *\n * * Template elements and event handlers that will cause the keyboard focus to wrap.\n *\n * This mixin [contributes to a component's template](mixins#mixins-that-contribute-to-a-component-s-template).\n * See that discussion for details on how to use such a mixin.\n *\n * @module FocusCaptureMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nfunction FocusCaptureMixin(Base) {\n  class FocusCapture extends Base {\n    [keydown](/** @type {KeyboardEvent} */ event) {\n      const firstElement = firstFocusableElement(this[shadowRoot]);\n      // We need to check both the document active element (to handle case where\n      // the user is tabbing through light DOM nodes assigned to a slot) and the\n      // shadow active element (to handle case where the user is tabbing through\n      // shadow nodes).\n      if (firstElement) {\n        const firstElementIsDocumentActive =\n          document.activeElement &&\n          (document.activeElement === firstElement ||\n            document.activeElement.contains(firstElement));\n        const shadowActiveElement = this[shadowRoot].activeElement;\n        const firstElementIsShadowActive =\n          shadowActiveElement &&\n          (shadowActiveElement === firstElement ||\n            deepContains(shadowActiveElement, firstElement));\n        const firstElementIsActive =\n          firstElementIsDocumentActive || firstElementIsShadowActive;\n        if (firstElementIsActive && event.key === \"Tab\" && event.shiftKey) {\n          // Set focus to focus catcher.\n          // The Shift+Tab keydown event should continue bubbling, and the default\n          // behavior should cause it to end up on the last focusable element.\n          this[wrappingFocusKey] = true;\n          this[ids].focusCatcher.focus();\n          this[wrappingFocusKey] = false;\n          // Don't mark the event as handled, since we want it to keep bubbling up.\n        }\n      }\n\n      // Prefer mixin result if it's defined, otherwise use base result.\n      return (super[keydown] && super[keydown](event)) || false;\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n      if (this[firstRender]) {\n        this[ids].focusCatcher.addEventListener(\"focus\", () => {\n          if (!this[wrappingFocusKey]) {\n            // Wrap focus back to the first focusable element.\n            const focusElement = firstFocusableElement(this[shadowRoot]);\n            if (focusElement) {\n              focusElement.focus();\n            }\n          }\n        });\n      }\n    }\n\n    /**\n     * Destructively wrap a node with elements necessary to capture focus.\n     *\n     * Call this method in a components `internal.template` property.\n     * Invoke this method as `this[FocusCaptureMixin.wrap](element)`.\n     *\n     * @param {Element} target - the element within which focus should wrap\n     */\n    [wrap](target) {\n      const focusCapture = fragmentFrom.html`\n        <style>\n          #focusCapture {\n            display: flex;\n            height: 100%;\n            overflow: hidden;\n            width: 100%;\n          }\n\n          #focusCaptureContainer {\n            align-items: center;\n            display: flex;\n            flex: 1;\n            flex-direction: column;\n            justify-content: center;\n            position: relative;\n          }\n        </style>\n        <div id=\"focusCapture\">\n          <div id=\"focusCaptureContainer\"></div>\n          <div id=\"focusCatcher\" tabindex=\"0\"></div>\n        </div>\n      `;\n\n      // Wrap the target with the focus capture elements.\n      const container = focusCapture.getElementById(\"focusCaptureContainer\");\n      if (container) {\n        target.replaceWith(focusCapture);\n        container.append(target);\n      }\n    }\n  }\n\n  return FocusCapture;\n}\n\nFocusCaptureMixin.wrap = wrap;\n\nexport default FocusCaptureMixin;\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  defaultTabIndex,\n  delegatesFocus,\n  keydown,\n  raiseChangeEvents,\n  render,\n  rendering,\n  setState,\n  state,\n} from \"./internal.js\";\n\n/**\n * Manages keyboard handling for a component.\n *\n * This mixin handles several keyboard-related features.\n *\n * First, it wires up a single keydown event handler that can be shared by\n * multiple mixins on a component. The event handler will invoke a `keydown`\n * method with the event object, and any mixin along the prototype chain that\n * wants to handle that method can do so.\n *\n * If a mixin wants to indicate that keyboard event has been handled, and that\n * other mixins should *not* handle it, the mixin's `keydown` handler should\n * return a value of true. The convention that seems to work well is that a\n * mixin should see if it wants to handle the event and, if not, then ask the\n * superclass to see if it wants to handle the event. This has the effect of\n * giving the mixin that was applied last the first chance at handling a\n * keyboard event.\n *\n * Example:\n *\n *     [keydown](event) {\n *       let handled;\n *       switch (event.key) {\n *         // Handle the keys you want, setting handled = true if appropriate.\n *       }\n *       // Prefer mixin result if it's defined, otherwise use base result.\n *       return handled || (super[keydown] && super[keydown](event));\n *     }\n *\n * A second feature provided by this mixin is that it implicitly makes the\n * component a tab stop if it isn't already, by setting `tabindex` to 0. This\n * has the effect of adding the component to the tab order in document order.\n *\n * @module KeyboardMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function KeyboardMixin(Base) {\n  // The class prototype added by the mixin.\n  class Keyboard extends Base {\n    constructor() {\n      // @ts-ignore\n      super();\n      this.addEventListener(\"keydown\", async (event) => {\n        this[raiseChangeEvents] = true;\n        // For use with FocusVisibleMixin.\n        if (!this[state].focusVisible) {\n          // The user may have begun interacting with this element using the\n          // mouse/touch, but has now begun using the keyboard, so show focus.\n          this[setState]({\n            focusVisible: true,\n          });\n        }\n        const handled = this[keydown](event);\n        if (handled) {\n          event.preventDefault();\n          event.stopImmediatePropagation();\n        }\n        await Promise.resolve();\n        this[raiseChangeEvents] = false;\n      });\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n      if (name === \"tabindex\") {\n        // Parse the passed value, which could be a string or null.\n        let parsed;\n        if (newValue === null) {\n          // tabindex attribute was removed.\n          parsed = -1;\n        } else {\n          parsed = Number(newValue);\n          if (isNaN(parsed)) {\n            // Non-numeric tabindex falls back to default value (if defined).\n            parsed = this[defaultTabIndex] ? this[defaultTabIndex] : 0;\n          }\n        }\n        this.tabIndex = parsed;\n      } else {\n        super.attributeChangedCallback(name, oldValue, newValue);\n      }\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      // If we're using DelegateFocusMixin, we don't need or want to set a\n      // tabindex on the host; we'll rely on the inner shadow elements to take\n      // the focus and raise keyboard events. Otherwise, we do set a tabindex on\n      // the host, so that we can get keyboard events.\n      const tabIndex = this[delegatesFocus] ? -1 : 0;\n      const state = Object.assign(super[defaultState] || {}, {\n        tabIndex,\n      });\n\n      return state;\n    }\n\n    /**\n     * See the [symbols](internal#internal.keydown) documentation for details.\n     */\n    [keydown](/** @type {KeyboardEvent} */ event) {\n      if (super[keydown]) {\n        return super[keydown](event);\n      }\n      return false;\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n      if (changed.tabIndex) {\n        this.tabIndex = this[state].tabIndex;\n      }\n    }\n\n    // Record our own notion of the state of the tabIndex property so we can\n    // rerender if necessary.\n    get tabIndex() {\n      return super.tabIndex;\n    }\n    set tabIndex(tabIndex) {\n      // If value has changed, invoke the super setter.\n      if (super.tabIndex !== tabIndex) {\n        super.tabIndex = tabIndex;\n      }\n\n      // The tabIndex setter can get called during rendering when we render our\n      // own notion of the tabIndex state, in which case we don't need or want\n      // to set state again.\n      if (!this[rendering]) {\n        // Record the new tabIndex in our state.\n        this[setState]({\n          tabIndex,\n        });\n      }\n    }\n  }\n\n  return Keyboard;\n}\n","import { templateFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\";\nimport AriaRoleMixin from \"./AriaRoleMixin.js\";\nimport { defaultState, template } from \"./internal.js\";\n\nconst Base = AriaRoleMixin(ReactiveElement);\n\n/**\n * Background element shown behind an overlay's primary content\n *\n * The backdrop is transparent by default, suggesting to the user that the\n * overlay is modeless, and they can click through it to reach the background\n * elements. For a modal variant, see [ModalBackdrop](ModalBackdrop).\n *\n * @inherits ReactiveElement\n * @mixes AriaRoleMixin\n */\nclass Backdrop extends Base {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      role: \"none\",\n    });\n  }\n\n  get [template]() {\n    return templateFrom.html`\n      <style>\n        :host {\n          display: inline-block;\n          height: 100%;\n          left: 0;\n          position: fixed;\n          top: 0;\n          touch-action: manipulation;\n          width: 100%;\n        }\n      </style>\n      <slot></slot>\n    `;\n  }\n}\n\nexport default Backdrop;\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  render,\n  rendering,\n  setState,\n  state,\n} from \"./internal.js\";\n\n/**\n * Lets a component define its ARIA role through a `role` state member\n *\n * Among other things, this allows a class or mixin to define a default\n * role through the component's `defaultState`.\n *\n * Some mixins come with identicial support for managing an ARIA role. Those\n * mixins include [AriaListMixin](AriaListMixin),\n * [AriaMenuMixin](AriaMenuMixin), [DialogModalityMixin](DialogModalityMixin),\n * and [PopupModalityMixin](PopupModalityMixin). If you're using one of those\n * mixins, you do *not* need to use this mixin.\n *\n * @module AriaRoleMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function AriaRoleMixin(Base) {\n  // The class prototype added by the mixin.\n  class AriaRole extends Base {\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        role: null,\n      });\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n      if (changed.role) {\n        // Apply top-level role.\n        const { role } = this[state];\n        if (role) {\n          this.setAttribute(\"role\", role);\n        } else {\n          this.removeAttribute(\"role\");\n        }\n      }\n    }\n\n    // Setting the standard role attribute will invoke this property setter,\n    // which will allow us to update our state.\n    get role() {\n      return super.role;\n    }\n    set role(role) {\n      const s = String(role);\n      super.role = s;\n      if (!this[rendering]) {\n        this[setState]({ s });\n      }\n    }\n  }\n\n  return AriaRole;\n}\n","import Backdrop from \"./Backdrop.js\";\n\n/**\n * Semi-transparent backdrop for a modal overlay\n *\n * This type of backdrop is used by [Dialog](Dialog) and [Drawer](Drawer). The\n * backdrop slightly obscures the background elements, focusing the user's\n * attention on the overlay.\n *\n * @inherits Backdrop\n */\nclass ModalBackdrop extends Backdrop {\n  constructor() {\n    super();\n\n    // As of Sep 2018, Mobile Safari allows the user to drag on the backdrop to\n    // scroll the page behind it, which violates the modality. To correct this,\n    // we prevent touchmove events with one touch from performing the default\n    // page scrolling.\n    //\n    // Android Chrome already correctly prevents drags from reaching the page,\n    // so we only engage this workaround if we don't see support for pointer\n    // events -- in which case we assume we're in Safari.\n    if (!(\"PointerEvent\" in window)) {\n      this.addEventListener(\"touchmove\", (event) => {\n        if (event.touches.length === 1) {\n          event.preventDefault();\n        }\n      });\n    }\n  }\n}\n\nexport default ModalBackdrop;\n","import { booleanAttributeValue, setInternalState } from \"../core/dom.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  raiseChangeEvents,\n  render,\n  rendered,\n  setState,\n  startEffect,\n  state,\n  stateEffects,\n} from \"./internal.js\";\n\n/** @type {any} */\nconst closePromiseKey = Symbol(\"closePromise\");\n/** @type {any} */\nconst closeResolveKey = Symbol(\"closeResolve\");\n\n/**\n * Tracks the open/close state of a component.\n *\n * @module OpenCloseMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function OpenCloseMixin(Base) {\n  // The class prototype added by the mixin.\n  class OpenClose extends Base {\n    attributeChangedCallback(name, oldValue, newValue) {\n      if (name === \"opened\") {\n        const value = booleanAttributeValue(name, newValue);\n        if (this.opened !== value) {\n          this.opened = value;\n        }\n      } else {\n        super.attributeChangedCallback(name, oldValue, newValue);\n      }\n    }\n\n    /**\n     * Close the component (if not already closed).\n     *\n     * Some components like [AlertDialog](AlertDialog) want to indicate why or\n     * how they were closed. To support such scenarios, you can supply a value\n     * to the optional `closeResult` parameter. This closeResult will be made\n     * available in the `whenClosed` promise and the `state.closeResult` member.\n     *\n     * @param {object} [closeResult] - an indication of how or why the element closed\n     */\n    async close(closeResult) {\n      if (super.close) {\n        await super.close();\n      }\n      this[setState]({ closeResult });\n      await this.toggle(false);\n    }\n\n    /**\n     * True if the element is currently closed.\n     *\n     * This read-only property is provided as a convenient inverse of `opened`.\n     *\n     * @type {boolean}\n     */\n    get closed() {\n      return this[state] && !this[state].opened;\n    }\n\n    /**\n     * True if the element has completely closed.\n     *\n     * For components not using asynchronous open/close effects, this property\n     * returns the same value as the `closed` property. For elements that have a\n     * true value of `state.openCloseEffects` (e.g., elements using\n     * [TransitionEffectMixin](TransitionEffectMixin)), this property returns\n     * true only if `state.effect` is \"close\" and `state.effectPhase` is\n     * \"after\".\n     *\n     * @type {boolean}\n     */\n    get closeFinished() {\n      return this[state].closeFinished;\n    }\n\n    get closeResult() {\n      return this[state].closeResult;\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      const defaults = {\n        closeResult: null,\n        opened: false,\n      };\n      // If this component defines a `startEffect` method (e.g., by using\n      // TransitionEffectMixin), include default state for open/close effects.\n      // Since the component is closed by default, the default effect state is\n      // after the close effect has completed.\n      if (this[startEffect]) {\n        Object.assign(defaults, {\n          closeFinished: true,\n          effect: \"close\",\n          effectPhase: \"after\",\n          openCloseEffects: true,\n        });\n      }\n      return Object.assign(super[defaultState] || {}, defaults);\n    }\n\n    /**\n     * Open the element (if not already opened).\n     */\n    async open() {\n      if (super.open) {\n        await super.open();\n      }\n      this[setState]({ closeResult: undefined });\n      await this.toggle(true);\n    }\n\n    /**\n     * True if the element is currently opened.\n     *\n     * This property can be set as a boolean attribute\n     *\n     * @type {boolean}\n     * @default false\n     */\n    get opened() {\n      return this[state] && this[state].opened;\n    }\n    set opened(opened) {\n      this[setState]({ closeResult: undefined });\n      this.toggle(opened);\n    }\n\n    [render](changed) {\n      super[render](changed);\n\n      // Reflect opened state.\n      if (changed.opened) {\n        const { opened } = this[state];\n        setInternalState(this, \"opened\", opened);\n      }\n\n      // Reflect closed state. To handle asynchronous close effects, we reflect\n      // the inverse of closeFinished instead of reflecting closed.\n      if (changed.closeFinished) {\n        const { closeFinished } = this[state];\n        setInternalState(this, \"closed\", closeFinished);\n      }\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      if (changed.opened && this[raiseChangeEvents]) {\n        const oldEvent = new CustomEvent(\"opened-changed\", {\n          bubbles: true,\n          detail: {\n            closeResult: this[state].closeResult,\n            opened: this[state].opened,\n          },\n        });\n        this.dispatchEvent(oldEvent);\n        /**\n         * Raised when the opened/closed state of the component changes.\n         *\n         * @event openedchange\n         */\n        const openedChangeEvent = new CustomEvent(\"openedchange\", {\n          bubbles: true,\n          detail: {\n            closeResult: this[state].closeResult,\n            opened: this[state].opened,\n          },\n        });\n        this.dispatchEvent(openedChangeEvent);\n\n        if (this[state].opened) {\n          const oldOpenedEvent = new CustomEvent(\"opened\", {\n            bubbles: true,\n          });\n          this.dispatchEvent(oldOpenedEvent);\n          /**\n           * Raised when the component opens.\n           *\n           * @event open\n           */\n          const openEvent = new CustomEvent(\"open\", {\n            bubbles: true,\n          });\n          this.dispatchEvent(openEvent);\n        } else {\n          const oldClosedEvent = new CustomEvent(\"closed\", {\n            bubbles: true,\n            detail: {\n              closeResult: this[state].closeResult,\n            },\n          });\n          this.dispatchEvent(oldClosedEvent);\n          /**\n           * Raised when the component closes.\n           *\n           * @event close\n           */\n          const closeEvent = new CustomEvent(\"close\", {\n            bubbles: true,\n            detail: {\n              closeResult: this[state].closeResult,\n            },\n          });\n          this.dispatchEvent(closeEvent);\n        }\n      }\n\n      // If someone's waiting for the component to close, and it's completely\n      // finished closing, then resolve the close promise.\n      const closeResolve = this[closeResolveKey];\n      if (this.closeFinished && closeResolve) {\n        this[closeResolveKey] = null;\n        this[closePromiseKey] = null;\n        closeResolve(this[state].closeResult);\n      }\n    }\n\n    [stateEffects](state, changed) {\n      const effects = super[stateEffects]\n        ? super[stateEffects](state, changed)\n        : {};\n\n      // Update our notion of closeFinished to track the closed state for\n      // components with synchronous open/close effects and components with\n      // asynchronous open/close effects.\n      if (\n        changed.openCloseEffects ||\n        changed.effect ||\n        changed.effectPhase ||\n        changed.opened\n      ) {\n        const { effect, effectPhase, openCloseEffects, opened } = state;\n        const closeFinished = openCloseEffects\n          ? effect === \"close\" && effectPhase === \"after\"\n          : !opened;\n        Object.assign(effects, { closeFinished });\n      }\n\n      return effects;\n    }\n\n    /**\n     * Toggle the open/close state of the element.\n     *\n     * @param {boolean} [opened] - true if the element should be opened, false\n     * if closed.\n     */\n    async toggle(opened = !this.opened) {\n      if (super.toggle) {\n        await super.toggle(opened);\n      }\n      const changed = opened !== this[state].opened;\n      if (changed) {\n        /** @type {PlainObject} */ const changes = { opened };\n        if (this[state].openCloseEffects) {\n          changes.effect = opened ? \"open\" : \"close\";\n          if (this[state].effectPhase === \"after\") {\n            changes.effectPhase = \"before\";\n          }\n        }\n        await this[setState](changes);\n      }\n    }\n\n    /**\n     * This method can be used as an alternative to listening to the\n     * \"openedchange\" event, particularly in situations where you want to only\n     * handle the next time the component is closed.\n     *\n     * @returns {Promise} A promise that resolves when the element has\n     * completely closed, including the completion of any asynchronous opening\n     * effect.\n     */\n    whenClosed() {\n      if (!this[closePromiseKey]) {\n        this[closePromiseKey] = new Promise((resolve) => {\n          this[closeResolveKey] = resolve;\n        });\n      }\n      return this[closePromiseKey];\n    }\n  }\n\n  return OpenClose;\n}\n","import { templateFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\";\nimport { template } from \"./internal.js\";\n\n/**\n * A simple frame for overlay content.\n *\n * The default appearance of `OverlayFrame` uses a simple drop-shadow to let the\n * user see the framed content as being on top of the background page content.\n *\n * @inherits ReactiveElement\n */\nclass OverlayFrame extends ReactiveElement {\n  get [template]() {\n    return templateFrom.html`\n      <style>\n        :host {\n          display: inline-block;\n          position: relative;\n        }\n      </style>\n      <slot></slot>\n    `;\n  }\n}\n\nexport default OverlayFrame;\n","import { deepContains, firstFocusableElement } from \"../core/dom.js\";\nimport { fragmentFrom, templateFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  firstRender,\n  render,\n  rendered,\n  setState,\n  state,\n  template,\n} from \"./internal.js\";\n\n/** @type {any} */\nconst appendedToDocumentKey = Symbol(\"appendedToDocument\");\n/** @type {any} */\nconst defaultZIndexKey = Symbol(\"assignedZIndex\");\n/** @type {any} */\nconst restoreFocusToElementKey = Symbol(\"restoreFocusToElement\");\n\n/**\n * Displays an opened element on top of other page elements.\n *\n * This mixin handles showing and hiding an overlay element. It, together with\n * [OpenCloseMixin](OpenCloseMixin), form the core behavior for [Overlay](Overlay),\n * which in turn forms the basis of Elix's overlay components.\n *\n * @module OverlayMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function OverlayMixin(Base) {\n  // The class prototype added by the mixin.\n  class Overlay extends Base {\n    // TODO: Document\n    get autoFocus() {\n      return this[state].autoFocus;\n    }\n    set autoFocus(autoFocus) {\n      this[setState]({ autoFocus });\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        autoFocus: true,\n        persistent: false,\n      });\n    }\n\n    async open() {\n      if (!this[state].persistent && !this.isConnected) {\n        // Overlay isn't in document yet.\n        this[appendedToDocumentKey] = true;\n        document.body.append(this);\n      }\n      if (super.open) {\n        await super.open();\n      }\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n\n      if (this[firstRender]) {\n        this.addEventListener(\"blur\", (event) => {\n          // What has the focus now?\n          const newFocusedElement =\n            event.relatedTarget || document.activeElement;\n          /** @type {any} */\n          const node = this;\n          if (newFocusedElement instanceof HTMLElement) {\n            const focusInside = deepContains(node, newFocusedElement);\n            if (!focusInside) {\n              if (this.opened) {\n                // The user has most likely clicked on something in the background\n                // of a modeless overlay. Remember that element, and restore focus\n                // to it when the overlay finishes closing.\n                this[restoreFocusToElementKey] = newFocusedElement;\n              } else {\n                // A blur event fired, but the overlay closed itself before the blur\n                // event could be processed. In closing, we may have already\n                // restored the focus to the element that originally invoked the\n                // overlay. Since the user has clicked somewhere else to close the\n                // overlay, put the focus where they wanted it.\n                newFocusedElement.focus();\n                this[restoreFocusToElementKey] = null;\n              }\n            }\n          }\n        });\n      }\n\n      if (changed.effectPhase || changed.opened || changed.persistent) {\n        if (!this[state].persistent) {\n          // Temporary overlay\n          const closed =\n            typeof this.closeFinished === \"undefined\"\n              ? this.closed\n              : this.closeFinished;\n\n          if (closed) {\n            if (this[defaultZIndexKey]) {\n              // Remove default z-index.\n              this.style.zIndex = \"\";\n              this[defaultZIndexKey] = null;\n            }\n          } else if (this[defaultZIndexKey]) {\n            this.style.zIndex = this[defaultZIndexKey];\n          } else {\n            if (!hasZIndex(this)) {\n              bringToFront(this);\n            }\n          }\n        }\n      }\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      if (this[firstRender]) {\n        // Perform one-time check to see if component needs a default z-index.\n        if (this[state].persistent && !hasZIndex(this)) {\n          bringToFront(this);\n        }\n      }\n\n      if (changed.opened) {\n        if (this[state].autoFocus) {\n          if (this[state].opened) {\n            // Opened\n            if (\n              !this[restoreFocusToElementKey] &&\n              document.activeElement !== document.body\n            ) {\n              // Remember which element had the focus before we were opened.\n              this[restoreFocusToElementKey] = document.activeElement;\n            }\n            // Focus on the element itself (if it's focusable), or the first focusable\n            // element inside it.\n            // TODO: We'd prefer to require that overlays (like the Overlay base\n            // class) make use of delegatesFocus via DelegateFocusMixin, which would\n            // let us drop the need for this mixin here to do anything special with\n            // focus. However, an initial trial of this revealed an issue in\n            // MenuButton, where invoking the menu did not put the focus on the first\n            // menu item as expected. Needs more investigation.\n            const focusElement = firstFocusableElement(this);\n            if (focusElement) {\n              focusElement.focus();\n            }\n          } else {\n            // Closed\n            if (this[restoreFocusToElementKey]) {\n              // Restore focus to the element that had the focus before the overlay was\n              // opened.\n              this[restoreFocusToElementKey].focus();\n              this[restoreFocusToElementKey] = null;\n            }\n          }\n        }\n      }\n\n      // If we're finished closing an overlay that was automatically added to the\n      // document, remove it now. Note: we only do this when the component\n      // updates, not when it mounts, because we don't want an automatically-added\n      // element to be immediately removed during its connectedCallback.\n      if (\n        !this[firstRender] &&\n        !this[state].persistent &&\n        this.closeFinished &&\n        this[appendedToDocumentKey]\n      ) {\n        this[appendedToDocumentKey] = false;\n        if (this.parentNode) {\n          this.parentNode.removeChild(this);\n        }\n      }\n    }\n\n    get [template]() {\n      const result = super[template] || templateFrom.html``;\n\n      // We'd like to just use the `hidden` attribute, but a side-effect of\n      // styling with the hidden attribute is that naive styling of the\n      // component from the outside (to change to display: flex, say) will\n      // override the display: none implied by hidden. To work around this\n      // problem, we use display: none when the overlay is closed.\n      result.content.append(fragmentFrom.html`\n        <style>\n          :host([closed]) {\n            display: none;\n          }\n        </style>\n      `);\n\n      return result;\n    }\n  }\n\n  return Overlay;\n}\n\n// Pick a default z-index, remember it, and apply it.\nfunction bringToFront(element) {\n  const defaultZIndex = maxZIndexInUse() + 1;\n  element[defaultZIndexKey] = defaultZIndex;\n  element.style.zIndex = defaultZIndex.toString();\n}\n\n/**\n * If the element has or inherits an explicit numeric z-index, return true.\n * Otherwise, return false.\n *\n * @private\n * @param {HTMLElement} element\n * @returns {boolean}\n */\nfunction hasZIndex(element) {\n  const computedZIndex = getComputedStyle(element).zIndex;\n  const explicitZIndex = element.style.zIndex;\n  const isExplicitZIndexNumeric = !isNaN(parseInt(explicitZIndex));\n  if (computedZIndex === \"auto\") {\n    return isExplicitZIndexNumeric;\n  }\n  if (computedZIndex === \"0\" && !isExplicitZIndexNumeric) {\n    // Might be on Safari, which reports a computed z-index of zero even in\n    // cases where no z-index has been inherited but the element creates a\n    // stacking context. Inspect the composed tree parent to infer whether the\n    // element is really inheriting a z-index.\n    const parent =\n      element.assignedSlot ||\n      (element instanceof ShadowRoot ? element.host : element.parentNode);\n    if (!(parent instanceof HTMLElement)) {\n      // Theoretical edge case, assume zero z-index is real.\n      return true;\n    }\n    if (!hasZIndex(parent)) {\n      // The parent doesn't have a numeric z-index, and the element itself\n      // doesn't have a numeric z-index, so the \"0\" value for the computed\n      // z-index is simulated, not a real assigned numeric z-index.\n      return false;\n    }\n  }\n  // Element has a non-zero numeric z-index.\n  return true;\n}\n\n/*\n * Return the highest z-index currently in use in the document's light DOM.\n *\n * This calculation looks at all light DOM elements, so is theoretically\n * expensive. That said, it only runs when an overlay is opening, and is only used\n * if an overlay doesn't have a z-index already. In cases where performance is\n * an issue, this calculation can be completely circumvented by manually\n * applying a z-index to an overlay.\n */\nfunction maxZIndexInUse() {\n  const elements = document.body.querySelectorAll(\"*\");\n  const zIndices = Array.from(elements, (element) => {\n    const style = getComputedStyle(element);\n    let zIndex = 0;\n    if (style.position !== \"static\" && style.zIndex !== \"auto\") {\n      const parsed = style.zIndex ? parseInt(style.zIndex) : 0;\n      zIndex = !isNaN(parsed) ? parsed : 0;\n    }\n    return zIndex;\n  });\n  return Math.max(...zIndices);\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  contentSlot,\n  defaultState,\n  firstRender,\n  raiseChangeEvents,\n  rendered,\n  setState,\n  shadowRoot,\n} from \"./internal.js\";\n\n/**\n * Defines a component's content as the flattened set of nodes assigned to a\n * slot.\n *\n * This mixin defines a component's `content` state member as the flattened\n * set of nodes assigned to a slot, typically the default slot.\n *\n * If the set of assigned nodes changes, the `content` state will be updated.\n * This helps a component satisfy the Gold Standard checklist item for\n * monitoring\n * [Content Changes](https://github.com/webcomponents/gold-standard/wiki/Content-Changes).\n *\n * By default, the mixin looks in the component's shadow subtree for a default\n * (unnamed) `slot` element. You can specify that a different slot should be\n * used by overriding the `internal.contentSlot` property.\n *\n * Most Elix [elements](elements) use `SlotContentMixin`, including\n * [ListBox](ListBox), [Modes](Modes), and [Tabs](Tabs).\n *\n * @module SlotContentMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function SlotContentMixin(Base) {\n  // The class prototype added by the mixin.\n  class SlotContent extends Base {\n    /**\n     * See [contentSlot](internal#internal.contentSlot).\n     */\n    get [contentSlot]() {\n      /** @type {HTMLSlotElement|null} */ const slot =\n        this[shadowRoot] && this[shadowRoot].querySelector(\"slot:not([name])\");\n      if (!this[shadowRoot] || !slot) {\n        /* eslint-disable no-console */\n        console.warn(\n          `SlotContentMixin expects ${this.constructor.name} to define a shadow tree that includes a default (unnamed) slot.\\nSee https://elix.org/documentation/SlotContentMixin.`\n        );\n      }\n      return slot;\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        content: null,\n      });\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      if (this[firstRender]) {\n        // Listen to changes on the default slot.\n        const slot = this[contentSlot];\n        if (slot) {\n          slot.addEventListener(\"slotchange\", async () => {\n            // Although slotchange isn't generally a user-driven event, it's\n            // impossible for us to know whether a change in slot content is going\n            // to result in effects that the host of this element can predict.\n            // To be on the safe side, we raise any change events that come up\n            // during the processing of this event.\n            this[raiseChangeEvents] = true;\n\n            // The nodes assigned to the given component have changed.\n            // Update the component's state to reflect the new content.\n            const content = slot.assignedNodes({ flatten: true });\n            Object.freeze(content);\n            this[setState]({ content });\n\n            await Promise.resolve();\n            this[raiseChangeEvents] = false;\n          });\n        }\n      }\n    }\n  }\n\n  return SlotContent;\n}\n","import { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\";\nimport { transmute } from \"../core/template.js\";\nimport Backdrop from \"./Backdrop.js\";\nimport {\n  checkSize,\n  defaultState,\n  ids,\n  render,\n  rendered,\n  setState,\n  shadowRoot,\n  state,\n  template,\n} from \"./internal.js\";\nimport OpenCloseMixin from \"./OpenCloseMixin.js\";\nimport OverlayFrame from \"./OverlayFrame.js\";\nimport OverlayMixin from \"./OverlayMixin.js\";\nimport SlotContentMixin from \"./SlotContentMixin.js\";\n\n// TODO: We'd like to use DelegateFocusMixin in this component, but see the note\n// at OverlayMixin's openedChanged function.\nconst Base = OpenCloseMixin(OverlayMixin(SlotContentMixin(ReactiveElement)));\n\n/**\n * An element that appears over other page elements\n *\n * The main overlay content is presented within a frame on top of an optional\n * backdrop.\n *\n * The overlay logic is provided by [OverlayMixin](OverlayMixin). `Overlay` adds\n * the definition of customizable element tags: [frameTag](#frameTag) for the\n * frame around the overlay content, and [backdropTag](#backdropTag) (if\n * defined) for the optional element covering the page elements behind the\n * overlay.\n *\n * As a convenience, the `open` method of `Overlay` will automatically add the\n * overlay to the end of the document body if the overlay isn't already in the\n * document. If the overlay is automatically attached in this way, then when it\n * closes, it will automatically be removed.\n *\n * See [Dialog](Dialog) and [Popup](Popup) for modal and modeless subclasses,\n * respectively.\n *\n * @inherits ReactiveElement\n * @mixes OpenCloseMixin\n * @mixes OverlayMixin\n * @mixes SlotContentMixin\n * @part {Backdrop} backdrop - the backdrop behind the overlay\n * @part {OverlayFrame} frame - the frame around the overlay\n */\nclass Overlay extends Base {\n  get backdrop() {\n    return this[ids] && this[ids].backdrop;\n  }\n\n  /**\n   * The class or tag used for the `backdrop` part - the optional\n   * element shown behind the overlay.\n   *\n   * This can help focus the user's attention on the overlay content.\n   * Additionally, a backdrop can be used to absorb clicks on background page\n   * elements. For example, [Dialog](Dialog) uses [ModalBackdrop](ModalBackdrop)\n   * as an overlay backdrop in such a way.\n   *\n   * @type {PartDescriptor}\n   * @default Backdrop\n   */\n  get backdropPartType() {\n    return this[state].backdropPartType;\n  }\n  set backdropPartType(backdropPartType) {\n    this[setState]({ backdropPartType });\n  }\n\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      backdropPartType: Backdrop,\n      framePartType: OverlayFrame,\n    });\n  }\n\n  get frame() {\n    return this[ids].frame;\n  }\n\n  /**\n   * The class or tag used to create the `frame` part  the overlay's\n   * primary content.\n   *\n   * The frame element can be used to provide a border around the overlay\n   * content, and to provide visual effects such as a drop-shadow to help\n   * distinguish overlay content from background page elements.\n   *\n   * @type {PartDescriptor}\n   * @default OverlayFrame\n   */\n  get framePartType() {\n    return this[state].framePartType;\n  }\n  set framePartType(framePartType) {\n    this[setState]({ framePartType });\n  }\n\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n    renderParts(this[shadowRoot], this[state], changed);\n  }\n\n  [rendered](/** @type {ChangedFlags} */ changed) {\n    super[rendered](changed);\n\n    if (changed.opened && this[state].content) {\n      // If contents know how to size themselves, ask them to check their size.\n      this[state].content.forEach((element) => {\n        if (element[checkSize]) {\n          element[checkSize]();\n        }\n      });\n    }\n  }\n\n  get [template]() {\n    const result = super[template];\n\n    // TODO: Consider moving frameContent div to Drawer.\n    result.content.append(fragmentFrom.html`\n      <style>\n        :host {\n          display: inline-grid;\n          /* Constrain content if overlay's height is constrained. */\n          grid-template: minmax(0, 1fr) / minmax(0, 1fr);\n          max-height: 100vh;\n          max-width: 100vw;\n          outline: none;\n          position: fixed;\n          -webkit-tap-highlight-color: transparent;\n        }\n\n        [part~=\"frame\"] {\n          box-sizing: border-box;\n          display: grid;\n          overscroll-behavior: contain;\n          pointer-events: initial;\n          position: relative;\n        }\n\n        #frameContent {\n          display: grid;\n          grid-template: minmax(0, 1fr) / minmax(0, 1fr);\n          overflow: hidden;\n        }\n      </style>\n      <div id=\"backdrop\" part=\"backdrop\" tabindex=\"-1\"></div>\n      <div id=\"frame\" part=\"frame\" role=\"none\">\n        <div id=\"frameContent\">\n          <slot></slot>\n        </div>\n      </div>\n    `);\n\n    renderParts(result.content, this[state]);\n\n    return result;\n  }\n}\n\n/**\n * Render parts for the template or an instance.\n *\n * @private\n * @param {DocumentFragment} root\n * @param {PlainObject} state\n * @param {ChangedFlags} [changed]\n */\nfunction renderParts(root, state, changed) {\n  if (!changed || changed.backdropPartType) {\n    const { backdropPartType } = state;\n    const backdrop = root.getElementById(\"backdrop\");\n    if (backdrop) {\n      transmute(backdrop, backdropPartType);\n    }\n  }\n  if (!changed || changed.framePartType) {\n    const { framePartType } = state;\n    const frame = root.getElementById(\"frame\");\n    if (frame) {\n      transmute(frame, framePartType);\n    }\n  }\n}\n\nexport default Overlay;\n","import { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport DialogModalityMixin from \"./DialogModalityMixin.js\";\nimport FocusCaptureMixin from \"./FocusCaptureMixin.js\";\nimport { defaultState, template } from \"./internal.js\";\nimport KeyboardMixin from \"./KeyboardMixin.js\";\nimport ModalBackdrop from \"./ModalBackdrop.js\";\nimport Overlay from \"./Overlay.js\";\n\nconst Base = DialogModalityMixin(FocusCaptureMixin(KeyboardMixin(Overlay)));\n\n/**\n * Basic modal overlay that the user typically dismisses with an explicit action.\n *\n * This component presents its children as a basic modal dialog which appears on\n * top of the main page content and which the user must interact with before\n * they can return to the page.\n *\n * @inherits Overlay\n * @mixes DialogModalityMixin\n * @mixes FocusCaptureMixin\n * @mixes KeyboardMixin\n * @part {ModalBackdrop} backdrop\n */\nclass Dialog extends Base {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      backdropPartType: ModalBackdrop,\n      tabIndex: -1,\n    });\n  }\n\n  get [template]() {\n    const result = super[template];\n\n    const frame = result.content.querySelector(\"#frame\");\n    /** @type {any} */ const cast = this;\n    cast[FocusCaptureMixin.wrap](frame);\n\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          :host {\n            height: 100%;\n            left: 0;\n            pointer-events: initial;\n            top: 0;\n            width: 100%;\n          }\n        </style>\n      `\n    );\n\n    return result;\n  }\n}\n\nexport default Dialog;\n","import { updateChildNodes } from \"../core/dom.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport { createElement } from \"../core/template.js\";\nimport Dialog from \"./Dialog.js\";\nimport {\n  defaultState,\n  firstRender,\n  ids,\n  keydown,\n  raiseChangeEvents,\n  render,\n  setState,\n  state,\n  stateEffects,\n  template,\n} from \"./internal.js\";\n\n/**\n * Asks a single question the user can answer with choice buttons\n *\n * @inherits Dialog\n * @part {button} choice-button - a button representing a choice\n * @part {div} choice-button-container - the container for the choice buttons\n */\nclass AlertDialog extends Dialog {\n  /**\n   * The buttons created by the component to represent the choices in the\n   * [choices](#choices) property.\n   *\n   * @type {HTMLElement[]}\n   */\n  get choiceButtons() {\n    return this[state].choiceButtons;\n  }\n\n  /**\n   * The class or tag used to create the `choice-button` parts \n   * the set of choices shown to the user.\n   *\n   * @type {PartDescriptor}\n   * @default 'button'\n   */\n  get choiceButtonPartType() {\n    return this[state].choiceButtonPartType;\n  }\n  set choiceButtonPartType(choiceButtonPartType) {\n    this[setState]({ choiceButtonPartType });\n  }\n\n  /**\n   * An array of strings indicating the choices the `AlertDialog` will present\n   * to the user as responses to the alert. For each string in the array, the\n   * `AlertDialog` displays a button labeled with that string.\n   *\n   * By default, this is an array with a single choice, \"OK\".\n   *\n   * @type {string[]}\n   */\n  get choices() {\n    return this[state].choices;\n  }\n  set choices(choices) {\n    this[setState]({ choices });\n  }\n\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      choiceButtonPartType: \"button\",\n      choiceButtons: [],\n      choices: [\"OK\"],\n    });\n  }\n\n  // Let the user select a choice by pressing its initial letter.\n  [keydown](/** @type {KeyboardEvent} */ event) {\n    let handled = false;\n\n    const key = event.key.length === 1 && event.key.toLowerCase();\n    if (key) {\n      // See if one of the choices starts with the key.\n      const choice = this.choices.find(\n        (choice) => choice[0].toLowerCase() === key\n      );\n      if (choice) {\n        this.close({\n          choice,\n        });\n        handled = true;\n      }\n    }\n\n    // Prefer mixin result if it's defined, otherwise use base result.\n    return handled || (super[keydown] && super[keydown](event)) || false;\n  }\n\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n\n    if (this[firstRender]) {\n      this[ids].choiceButtonContainer.addEventListener(\n        \"click\",\n        async (event) => {\n          // TODO: Ignore clicks on choiceButtonContainer background.\n          const button = event.target;\n          if (button instanceof HTMLElement) {\n            const choice = button.textContent;\n            this[raiseChangeEvents] = true;\n            await this.close({ choice });\n            this[raiseChangeEvents] = false;\n          }\n        }\n      );\n    }\n\n    if (changed.choiceButtons) {\n      updateChildNodes(\n        this[ids].choiceButtonContainer,\n        this[state].choiceButtons\n      );\n    }\n  }\n\n  [stateEffects](state, changed) {\n    const effects = super[stateEffects](state, changed);\n\n    // When choices or choice button part type changes, regenerate buttons.\n    if (changed.choiceButtonPartType || changed.choices) {\n      /** @type {string[]} */ const choices = state.choices;\n      const choiceButtons = choices.map((choice) => {\n        const button = createElement(state.choiceButtonPartType);\n        if (\"part\" in button) {\n          /** @type {any} */ (button).part = \"choice-button\";\n        }\n        button.textContent = choice;\n        return button;\n      });\n      Object.freeze(choiceButtons);\n      Object.assign(effects, {\n        choiceButtons,\n      });\n    }\n\n    return effects;\n  }\n\n  get [template]() {\n    const result = super[template];\n    // Replace the default slot with a new default slot and a button container.\n    const defaultSlot = result.content.querySelector(\"slot:not([name])\");\n    if (defaultSlot) {\n      defaultSlot.replaceWith(fragmentFrom.html`\n        <div id=\"alertDialogContent\">\n          <slot></slot>\n          <div id=\"choiceButtonContainer\" part=\"choice-button-container\"></div>\n        </div>\n      `);\n    }\n    return result;\n  }\n}\n\nexport default AlertDialog;\n","import { closestFocusableNode } from \"../core/dom.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { defaultState, firstRender, render, state } from \"./internal.js\";\n\n// Quick detection of whether we'll need to handle focus.\n// As of February 2019, we don't need to handle this in Chrome, perhaps because\n// they already support delegatesFocus (which handles related focus issues).\nconst focusTest = document.createElement(\"div\");\nfocusTest.attachShadow({ mode: \"open\", delegatesFocus: true });\n/** @type {any} */\nconst focusTestShadowRoot = focusTest.shadowRoot;\nconst nativeDelegatesFocus = focusTestShadowRoot.delegatesFocus;\n\n/**\n * Normalizes focus treatment for custom elements with Shadow DOM\n *\n * This mixin exists because the default behavior for mousedown should set the\n * focus to the closest ancestor of the clicked element that can take the focus.\n * As of Nov 2018, Chrome and Safari don't handle this as expected when the\n * clicked element is reassigned across more than one slot to end up inside a\n * focusable element. In such cases, the focus will end up on the body. Firefox\n * exhibits the behavior we want. See\n * https://github.com/w3c/webcomponents/issues/773.\n *\n * This mixin normalizes behavior to provide what Firefox does. When the user\n * mouses down inside anywhere inside the component's light DOM or Shadow DOM,\n * we walk up the composed tree to find the first element that can take the\n * focus and put the focus on it.\n *\n * @module ComposedFocusMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function ComposedFocusMixin(Base) {\n  // The class prototype added by the mixin.\n  class ComposedFocus extends Base {\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        composeFocus: !nativeDelegatesFocus,\n      });\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n      if (this[firstRender]) {\n        this.addEventListener(\"mousedown\", (event) => {\n          if (!this[state].composeFocus) {\n            return;\n          }\n          // Only process events for the main (usually left) button.\n          if (event.button !== 0) {\n            return;\n          }\n          if (event.target instanceof Element) {\n            const target = closestFocusableNode(event.target);\n            if (target) {\n              target.focus();\n              event.preventDefault();\n            }\n          }\n        });\n      }\n    }\n  }\n\n  return ComposedFocus;\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  firstRender,\n  inputDelegate,\n  raiseChangeEvents,\n  render,\n  rendered,\n  setState,\n  state,\n  stateEffects,\n} from \"./internal.js\";\n\n/**\n * Delegates its ARIA label property to an inner input-type element.\n *\n * This helps ensure that elements built around an inner input element provide a\n * proper accessible label for assistive technologies like screen readers.\n *\n * You can identify which inner input element selection should be delegated to\n * by defining an `internal.inputDelegate` property and returning the desired\n * inner input.\n *\n * @module DelegateInputLabelMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function DelegateInputLabelMixin(Base) {\n  // The class prototype added by the mixin.\n  class DelegateInputLabel extends Base {\n    // Forward any ARIA label to the input element.\n    get ariaLabel() {\n      return this[state].ariaLabel;\n    }\n    set ariaLabel(ariaLabel) {\n      if (!this[state].removingAriaAttribute) {\n        this[setState]({\n          ariaLabel: String(ariaLabel),\n        });\n      }\n    }\n\n    // Forward ARIA labelledby as an aria-label to the input element.\n    // Note the lowercase \"b\" in the name, necessary to support the actual\n    // attribute name \"aria-labelledby\", which has no hyphen before the \"by\".\n    get ariaLabelledby() {\n      return this[state].ariaLabelledby;\n    }\n    set ariaLabelledby(ariaLabelledby) {\n      if (!this[state].removingAriaAttribute) {\n        this[setState]({\n          ariaLabelledby: String(ariaLabelledby),\n        });\n      }\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        ariaLabel: null,\n        ariaLabelledby: null,\n        inputLabel: null,\n        removingAriaAttribute: false,\n      });\n    }\n\n    [render](changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n\n      if (this[firstRender]) {\n        // Refresh the input label on focus. This refresh appears to happen fast\n        // enough that the screen reader will announce the refreshed label.\n        this.addEventListener(\"focus\", () => {\n          this[raiseChangeEvents] = true;\n          const inputLabel = refreshInputLabel(this, this[state]);\n          this[setState]({ inputLabel });\n          this[raiseChangeEvents] = false;\n        });\n      }\n\n      // Apply the latest input label to the input delegate.\n      if (changed.inputLabel) {\n        const { inputLabel } = this[state];\n        if (inputLabel) {\n          this[inputDelegate].setAttribute(\"aria-label\", inputLabel);\n        } else {\n          this[inputDelegate].removeAttribute(\"aria-label\");\n        }\n      }\n    }\n\n    [rendered](changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      if (this[firstRender]) {\n        // Refresh the label on first render. This is not guaranteed to pick up\n        // labels defined by another element, as that element (or elements) may\n        // not be in the DOM yet. For that reason, we'll also refresh the label\n        // on focus. The reason to do it now is to handle the common cases where\n        // the element defining the label does exist so that accessibility\n        // testing tools can confirm that the input delegate does have a label.\n        // Because this refresh can entail multiple searches of the tree, we\n        // defer the refresh to idle time.\n        // @ts-ignore\n        const idleCallback = window.requestIdleCallback || setTimeout;\n        idleCallback(() => {\n          const inputLabel = refreshInputLabel(this, this[state]);\n          this[setState]({ inputLabel });\n        });\n      }\n\n      // Once we've obtained an aria-label or aria-labelledby from the host, we\n      // remove those attirbutes so that the labels don't get announced twice.\n      // We use a flag to distinguish between us removing our own ARIA\n      // attributes (which should not update state), and someone removing\n      // those attributes from the outside (which should update state).\n      const { ariaLabel, ariaLabelledby } = this[state];\n      if (changed.ariaLabel && !this[state].removingAriaAttribute) {\n        if (this.getAttribute(\"aria-label\")) {\n          this.setAttribute(\"delegated-label\", ariaLabel);\n          this[setState]({ removingAriaAttribute: true });\n          this.removeAttribute(\"aria-label\");\n        }\n      }\n      if (changed.ariaLabelledby && !this[state].removingAriaAttribute) {\n        if (this.getAttribute(\"aria-labelledby\")) {\n          this.setAttribute(\"delegated-labelledby\", ariaLabelledby);\n          this[setState]({ removingAriaAttribute: true });\n          this.removeAttribute(\"aria-labelledby\");\n        }\n      }\n\n      if (changed.removingAriaAttribute && this[state].removingAriaAttribute) {\n        // We've done whatever removal we needed, and can now reset our flag.\n        this[setState]({ removingAriaAttribute: false });\n      }\n    }\n\n    [stateEffects](state, changed) {\n      const effects = super[stateEffects]\n        ? super[stateEffects](state, changed)\n        : {};\n\n      // If the ariaLabel changes, we can update our inputLabel state\n      // immediately. Among other things, this facilitates scenarios where we\n      // have nested elements using DelegateInputLabelMixin: the outermost\n      // element can use whatever label approach it wants, the inner elements\n      // will all use ariaLabel.\n      //\n      // We also update the label if we're focused, using ariaLabelledby, and\n      // the selectedText changes. One pattern with select-like elements is to\n      // have them include their own ID in the IDs specified by aria-labelledby.\n      // This can incorporate the element's own `selectedText` in the announced\n      // label. That `selectedText` can change while the element has focus, in\n      // which case we'll refresh.\n      if (\n        (changed.ariaLabel && state.ariaLabel) ||\n        (changed.selectedText &&\n          state.ariaLabelledby &&\n          this.matches(\":focus-within\"))\n      ) {\n        const inputLabel = refreshInputLabel(this, state);\n        Object.assign(effects, { inputLabel });\n      }\n\n      return effects;\n    }\n  }\n\n  return DelegateInputLabel;\n}\n\n// Given an element that is being used as a label, extract its label text.\nfunction getLabelFromElement(element) {\n  // We use innerText here instead of textContent because we want the rendered\n  // text. If, e.g., a text node includes a span with `display: none`,\n  // textContent would include that hidden text, but innerText would leave it\n  // out -- which is what we want here.\n  if (\"selectedText\" in element) {\n    // Element (most likely Elix) with selectedText property\n    return element.selectedText;\n  } else if (\"value\" in element && \"options\" in element) {\n    // select or select-like element\n    const value = element.value;\n    const option = element.options.find((option) => option.value === value);\n    return option ? option.innerText : \"\";\n  } else if (\"value\" in element) {\n    // Other input element\n    return element.value;\n  } else {\n    // Other\n    return element.innerText;\n  }\n}\n\n/**\n * Calculate an appropriate label for the component's delegated input element.\n * When the element gets the focus, we refresh its label. This is done because\n * three of the labeling strategies (`aria-labelledby` attribute, `for`\n * attribute, and wrapping `label`) reference other elements in the tree -- and\n * the contents of those elements can change dynamically.\n *\n * @private\n * @param {HTMLElement} element\n * @param {PlainObject} state\n */\nfunction refreshInputLabel(element, state) {\n  const { ariaLabel, ariaLabelledby } = state;\n  /** @type {any} */ const rootNode = element.isConnected\n    ? element.getRootNode()\n    : null;\n  let inputLabel = null;\n\n  // Prefer aria-labelledby over aria-label, per\n  // https://developers.google.com/web/fundamentals/accessibility/semantics-aria/aria-labels-and-relationships.\n  // After that, we prefer a `label` element with a `for` attribute, and finally\n  // a wrapping `label` element.\n  //\n  // There do not appear to be consistent cross-browser rules for handling\n  // multiple forms of label assignment on the same component. E.g., if you\n  // place an element in a wrapping label *and* point a `label` element at that\n  // element with a `for` attribute, as of August 2020 Chrome and Firefox will\n  // announce both, but Safari will only announce the `for` label.\n  //\n  // Since people are probably not relying upon specific results for multiple\n  // forms of label assignment, we don't attempt to construct a combined label\n  // in those cases.\n  if (ariaLabelledby && rootNode) {\n    // Collect labels from elements with the indicated IDs.\n    const ids = ariaLabelledby.split(\" \");\n    const labels = ids.map((id) => {\n      const elementWithId = rootNode.getElementById(id);\n      // Get a label from the indicated element.\n      // Special case: if the element is providing its own label, we return its\n      // current `selectedText` state.\n      const label = !elementWithId\n        ? \"\"\n        : elementWithId === element && state.value !== null\n        ? state.selectedText\n        : getLabelFromElement(elementWithId);\n      return label;\n    });\n    inputLabel = labels.join(\" \");\n  } else if (ariaLabel) {\n    // Use ariaLabel property as input label.\n    inputLabel = ariaLabel;\n  } else if (rootNode) {\n    const id = element.id;\n    if (id) {\n      // Look for labelling element with `for` attribute.\n      const elementWithFor = rootNode.querySelector(`[for=\"${id}\"]`);\n      if (elementWithFor instanceof HTMLElement) {\n        // Obtain label from wrapping label element.\n        inputLabel = getLabelFromElement(elementWithFor);\n      }\n    }\n    if (inputLabel === null) {\n      // Last option is to look for closest wrapping label element.\n      const labelElement = element.closest(\"label\");\n      if (labelElement) {\n        inputLabel = getLabelFromElement(labelElement);\n      }\n    }\n  }\n\n  if (inputLabel) {\n    inputLabel = inputLabel.trim();\n  }\n\n  return inputLabel;\n}\n","import { deepContains } from \"../core/dom.js\";\nimport { fragmentFrom, templateFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { defaultState, render, setState, state, template } from \"./internal.js\";\n\n// We consider the keyboard to be active if the window has received a keydown\n// event since the last mousedown event.\nlet keyboardActive = false;\n\n/** @type {any} */\nconst focusVisibleChangedListenerKey = Symbol(\"focusVisibleChangedListener\");\n\n/**\n * Shows a focus indication if and only if the keyboard is active.\n *\n * The keyboard is considered to be active if a keyboard event has occurred\n * since the last mousedown event.\n *\n * This is loosely modeled after the proposed\n * [focus-visible](https://github.com/WICG/focus-visible) feature for CSS.\n *\n * @module FocusVisibleMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function FocusVisibleMixin(Base) {\n  // The class prototype added by the mixin.\n  return class FocusVisible extends Base {\n    constructor() {\n      // @ts-ignore\n      super();\n\n      // We listen to focusin/focusout instead of focus/blur because components\n      // like Menu want to handle focus visiblity for the items they contain,\n      // and those contained items can get the focus. Using focusin/focusout\n      // lets us know whether this element *or any element it contains* has the\n      // focus.\n      //\n      // Focus events are problematic in that they can occur during rendering:\n      // if an element with the focus is updated so that its tabindex is\n      // removed, it will lose focus. Since these focus handlers need to set\n      // state, this could lead to setting state during rendering, which is bad.\n      // To avoid this problem, we use promise timing to defer the setting of\n      // state.\n      this.addEventListener(\"focusout\", (event) => {\n        Promise.resolve().then(() => {\n          // What has the focus now?\n          /** @type {any} */ const cast = event;\n          const newFocusedElement =\n            cast.relatedTarget || document.activeElement;\n          const isFocusedElement = this === newFocusedElement;\n          const containsFocus = deepContains(this, newFocusedElement);\n          const lostFocus = !isFocusedElement && !containsFocus;\n          if (lostFocus) {\n            this[setState]({\n              focusVisible: false,\n            });\n            // No longer need to listen for changes in focus visibility.\n            document.removeEventListener(\n              \"focusvisiblechange\",\n              this[focusVisibleChangedListenerKey]\n            );\n            this[focusVisibleChangedListenerKey] = null;\n          }\n        });\n      });\n      this.addEventListener(\"focusin\", () => {\n        Promise.resolve().then(() => {\n          if (this[state].focusVisible !== keyboardActive) {\n            // Show the element as focused if the keyboard has been used.\n            this[setState]({\n              focusVisible: keyboardActive,\n            });\n          }\n          if (!this[focusVisibleChangedListenerKey]) {\n            // Listen to subsequent changes in focus visibility.\n            this[focusVisibleChangedListenerKey] = () => refreshFocus(this);\n            document.addEventListener(\n              \"focusvisiblechange\",\n              this[focusVisibleChangedListenerKey]\n            );\n          }\n        });\n      });\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        focusVisible: false,\n      });\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n\n      // Suppress the component's normal `outline` style unless we know the\n      // focus should be visible.\n      if (changed.focusVisible) {\n        const { focusVisible } = this[state];\n        this.toggleAttribute(\"focus-visible\", focusVisible);\n      }\n    }\n\n    get [template]() {\n      const result = super[template] || templateFrom.html``;\n      result.content.append(fragmentFrom.html`\n        <style>\n          :host {\n            outline: none;\n          }\n\n          :host([focus-visible]:focus-within) {\n            outline-color: Highlight; /* Firefox */\n            outline-color: -webkit-focus-ring-color; /* All other browsers */\n            outline-style: auto;\n          }\n        </style>\n      `);\n      return result;\n    }\n  };\n}\n\nfunction refreshFocus(/** @type {ReactiveElement} */ element) {\n  element[setState]({\n    focusVisible: keyboardActive,\n  });\n}\n\nfunction updateKeyboardActive(/** @type {boolean} */ newKeyboardActive) {\n  if (keyboardActive !== newKeyboardActive) {\n    keyboardActive = newKeyboardActive;\n    const oldEvent = new CustomEvent(\"focus-visible-changed\", {\n      detail: {\n        focusVisible: keyboardActive,\n      },\n    });\n    document.dispatchEvent(oldEvent);\n    const event = new CustomEvent(\"focusvisiblechange\", {\n      detail: {\n        focusVisible: keyboardActive,\n      },\n    });\n    document.dispatchEvent(event);\n  }\n}\n\n// Listen for top-level keydown and mousedown events.\n// Use capture phase so we detect events even if they're handled.\nwindow.addEventListener(\n  \"keydown\",\n  () => {\n    updateKeyboardActive(true);\n  },\n  { capture: true }\n);\n\nwindow.addEventListener(\n  \"mousedown\",\n  () => {\n    updateKeyboardActive(false);\n  },\n  { capture: true }\n);\n","import { firstFocusableElement } from \"../core/dom.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { delegatesFocus, focusTarget, shadowRoot } from \"./internal.js\";\n\n/**\n * Delegates a component's focus to its first focusable shadow element.\n *\n * This mixin serves as a polyfill for the standard `delegatesFocus` shadow root\n * property. As of June 2020, that property is still only natively supported in\n * Chrome. The Chrome delegatesFocus implementation has some subtle issues;\n * until additional implementations are available, it's hard to know whether the\n * issues are with the definition of delegatesFocus, with Chrome's\n * implementation, or with Elix component code. Accordingly, for the time being\n * this polyfill is used even on Chrome.\n *\n * @module DelegateFocusMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function DelegateFocusMixin(Base) {\n  // The class prototype added by the mixin.\n  class DelegateFocus extends Base {\n    /**\n     * Returns true if the component is delegating its focus.\n     *\n     * A component using `DelegateFocusMixin` will always have this property be\n     * true unless a class takes measures to override it.\n     *\n     * @type {boolean}\n     * @default true\n     */\n    get [delegatesFocus]() {\n      return true;\n    }\n\n    /**\n     * If someone tries to put the focus on us, delegate the focus to the first\n     * focusable element in the composed tree below our shadow root.\n     *\n     * @ignore\n     * @param {FocusOptions=} focusOptions\n     */\n    focus(focusOptions) {\n      // On browsers that support delegatesFocus natively, we should just be\n      // able to let the browser handle the focus method. However, we hit a bug\n      // in June 2020 where the native focus method in Chrome did not always\n      // produce the expected results if delegatesFocus is set.\n      //\n      // Specific bug: a PopupButton would like to delegates focus to its source\n      // button. Tabbing to a PopupButton focused on the source button as\n      // expected. Moreover, programmatically setting focus on the button also\n      // worked. However, when a PopupButton's popup was closed with the Escape\n      // key, OverlayMixin attemped to set programmatically focus to the\n      // PopupButton. This did *not* work as expecte, and focus ended up on the\n      // body. Until we have a second native implementation to compare against,\n      // it's difficult to determine whether this is a bug in the definition of\n      // delegatesFocus, Chrome's implementation, or our code.\n\n      // /** @type {any} */ const cast = this[shadowRoot];\n      // if (cast.delegatesFocus) {\n      //   // Native support for delegatesFocus, so don't need to do anything.\n      //   super.focus(focusOptions);\n      //   return;\n      // }\n      const focusElement = this[focusTarget];\n      if (focusElement) {\n        focusElement.focus(focusOptions);\n      }\n    }\n\n    get [focusTarget]() {\n      // HACK: The commented-out code lets us rely on the browser to indicate\n      // which element should be focused on in browsers that don't support\n      // native delegatesFocus. However, this code creates subtle focus problems\n      // in components like AutoCompleteListBox: if the user clicks the toggle\n      // button, the focus won't be placed on the top-level AutoCompleteComboBox\n      // as expected; that element will be returned as the focus target, but if\n      // it doesn't have a non-negative tabindex, forwardFocus won't think it's\n      // focusable. A more correct solution would be for all components that are\n      // focusable to give themselves a tabIndex of 0 by default or define a new\n      // public `focusable` that components could use to indicate that they're\n      // focusable. Until we have time to fully explore that, we workaround the\n      // bug by providing the polyfill behavior even in browsers that have\n      // delegatesFocus.\n\n      // /** @type {any} */ const cast = this[shadowRoot];\n      // return cast.delegatesFocus\n      //   ? this\n      //   : firstFocusableElement(this[shadowRoot]);\n      return firstFocusableElement(this[shadowRoot]);\n    }\n  }\n\n  return DelegateFocus;\n}\n","import { setInternalState, standardBooleanAttributes } from \"../core/dom.js\";\nimport { templateFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\";\nimport DelegateFocusMixin from \"./DelegateFocusMixin.js\";\nimport {\n  defaultState,\n  defaultTabIndex,\n  firstRender,\n  ids,\n  nativeInternals,\n  render,\n  rendered,\n  setState,\n  shadowRoot,\n  state,\n  template,\n} from \"./internal.js\";\n\nconst extendsKey = Symbol(\"extends\");\n\nconst delegatedPropertySettersKey = Symbol(\"delegatedPropertySetters\");\n\n/* True if a standard element is focusable by default. */\n/** @type {IndexedObject<boolean>} */\nconst focusableByDefault = {\n  a: true,\n  area: true,\n  button: true,\n  details: true,\n  iframe: true,\n  input: true,\n  select: true,\n  textarea: true,\n};\n\n/*\n * A set of events which, if fired by the inner standard element, should be\n * re-raised by the custom element.\n *\n * These are events which are spec'ed to NOT get retargetted across a Shadow DOM\n * boundary, organized by which element(s) raise the events. To properly\n * simulate these, we will need to listen for the real events, then re-raise a\n * simulation of the original event. For more information, see\n * https://www.w3.org/TR/shadow-dom/#h-events-that-are-not-leaked-into-ancestor-trees.\n *\n * It appears that we do *not* need to re-raise the non-bubbling \"focus\" and\n * \"blur\" events. These appear to be automatically re-raised as expected -- but\n * it's not clear why that happens.\n *\n * The list below is reasonably complete. It omits elements that cannot be\n * wrapped (see class notes above). Also, we haven't actually tried wrapping\n * every element in this list; some of the more obscure ones might not actually\n * work as expected, but it was easier to include them for completeness than\n * to actually verify whether or not the element can be wrapped.\n */\n/** @type {IndexedObject<string[]>} */\nconst reraiseEvents = {\n  address: [\"scroll\"],\n  blockquote: [\"scroll\"],\n  caption: [\"scroll\"],\n  center: [\"scroll\"],\n  dd: [\"scroll\"],\n  dir: [\"scroll\"],\n  div: [\"scroll\"],\n  dl: [\"scroll\"],\n  dt: [\"scroll\"],\n  fieldset: [\"scroll\"],\n  form: [\"reset\", \"scroll\"],\n  frame: [\"load\"],\n  h1: [\"scroll\"],\n  h2: [\"scroll\"],\n  h3: [\"scroll\"],\n  h4: [\"scroll\"],\n  h5: [\"scroll\"],\n  h6: [\"scroll\"],\n  iframe: [\"load\"],\n  img: [\"abort\", \"error\", \"load\"],\n  input: [\"abort\", \"change\", \"error\", \"select\", \"load\"],\n  li: [\"scroll\"],\n  link: [\"load\"],\n  menu: [\"scroll\"],\n  object: [\"error\", \"scroll\"],\n  ol: [\"scroll\"],\n  p: [\"scroll\"],\n  script: [\"error\", \"load\"],\n  select: [\"change\", \"scroll\"],\n  tbody: [\"scroll\"],\n  tfoot: [\"scroll\"],\n  thead: [\"scroll\"],\n  textarea: [\"change\", \"select\", \"scroll\"],\n};\n\n/*\n * Mouse events that should be disabled if the inner component is disabled.\n */\nconst mouseEventNames = [\n  \"click\",\n  \"dblclick\",\n  \"mousedown\",\n  \"mouseenter\",\n  \"mouseleave\",\n  \"mousemove\",\n  \"mouseout\",\n  \"mouseover\",\n  \"mouseup\",\n  \"wheel\",\n];\n\n// Keep track of which re-raised events should bubble.\n/** @type {IndexedObject<boolean>} */\nconst eventBubbles = {\n  abort: true,\n  change: true,\n  reset: true,\n};\n\n// Elements which are display: block by default.\n// Source: https://developer.mozilla.org/en-US/docs/Web/HTML/Block-level_elements\nconst blockElements = [\n  \"address\",\n  \"article\",\n  \"aside\",\n  \"blockquote\",\n  \"canvas\",\n  \"dd\",\n  \"div\",\n  \"dl\",\n  \"fieldset\",\n  \"figcaption\",\n  \"figure\",\n  \"footer\",\n  \"form\",\n  \"h1\",\n  \"h2\",\n  \"h3\",\n  \"h4\",\n  \"h5\",\n  \"h6\",\n  \"header\",\n  \"hgroup\",\n  \"hr\",\n  \"li\",\n  \"main\",\n  \"nav\",\n  \"noscript\",\n  \"ol\",\n  \"output\",\n  \"p\",\n  \"pre\",\n  \"section\",\n  \"table\",\n  \"tfoot\",\n  \"ul\",\n  \"video\",\n];\n\n// Standard attributes that don't have corresponding properties.\n// These need to be delegated from the wrapper to the inner element.\nconst attributesWithoutProperties = [\n  \"accept-charset\",\n  \"autoplay\",\n  \"buffered\",\n  \"challenge\",\n  \"codebase\",\n  \"colspan\",\n  \"contenteditable\",\n  \"controls\",\n  \"crossorigin\",\n  \"datetime\",\n  \"dirname\",\n  \"for\",\n  \"formaction\",\n  \"http-equiv\",\n  \"icon\",\n  \"ismap\",\n  \"itemprop\",\n  \"keytype\",\n  \"language\",\n  \"loop\",\n  \"manifest\",\n  \"maxlength\",\n  \"minlength\",\n  \"muted\",\n  \"novalidate\",\n  \"preload\",\n  \"radiogroup\",\n  \"readonly\",\n  \"referrerpolicy\",\n  \"rowspan\",\n  \"scoped\",\n  \"usemap\",\n];\n\nconst Base = DelegateFocusMixin(ReactiveElement);\n\n/**\n * Wraps a standard HTML element so it can be extended\n *\n * The typical way to use this class is via its static `wrap` method.\n *\n * @inherits ReactiveElement\n * @mixes DelegateFocusMixin\n * @part inner - the inner standard HTML element\n */\nclass WrappedStandardElement extends Base {\n  constructor() {\n    super();\n    /** @type {any} */ const cast = this;\n    if (!this[nativeInternals] && cast.attachInternals) {\n      this[nativeInternals] = cast.attachInternals();\n    }\n  }\n\n  /**\n   *\n   * Wrapped standard elements need to forward some attributes to the inner\n   * element in cases where the attribute does not have a corresponding\n   * property. These attributes include those prefixed with \"aria-\", and some\n   * unusual standard attributes like contenteditable. To handle those, this\n   * class defines its own attributeChangedCallback.\n   *\n   * @ignore\n   * @param {string} name\n   * @param {string} oldValue\n   * @param {string} newValue\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    const forwardAttribute = attributesWithoutProperties.indexOf(name) >= 0;\n    if (forwardAttribute) {\n      const innerAttributes = Object.assign({}, this[state].innerAttributes, {\n        [name]: newValue,\n      });\n      this[setState]({ innerAttributes });\n    } else {\n      // Rely on the base attributeChangedCallback provided by\n      // AttributeMarshallingMixin.\n      super.attributeChangedCallback(name, oldValue, newValue);\n    }\n  }\n\n  // Delegate method defined by HTMLElement.\n  blur() {\n    this.inner.blur();\n  }\n\n  // One HTMLElement we *don't* delegate is `click`. Generally speaking, a click\n  // on the outer wrapper should behave the same as a click on the inner\n  // element. Also, we want to ensure outside event listeners get a click event\n  // when the click method is invoked. But a click on the inner element will\n  // raise a click event that won't be re-raised by default across the shadow\n  // boundary. The precise behavior seems to be slightly different in Safari\n  // than other browsers, but it seems safer to not delegate click.\n  //\n  // click() {}\n\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      innerAttributes: {},\n    });\n  }\n\n  get [defaultTabIndex]() {\n    return focusableByDefault[this.extends] ? 0 : -1;\n  }\n\n  /**\n   * The tag name of the standard HTML element extended by this class.\n   *\n   * @returns {string}\n   */\n  get extends() {\n    return this.constructor[extendsKey];\n  }\n\n  /**\n   * Returns a reference to the inner standard HTML element.\n   *\n   * @type {HTMLElement}\n   */\n  get inner() {\n    /** @type {any} */\n    const result = this[ids] && this[ids].inner;\n    if (!result) {\n      /* eslint-disable no-console */\n      console.warn(\n        \"Attempted to get an inner standard element before it was instantiated.\"\n      );\n    }\n    return result;\n  }\n\n  static get observedAttributes() {\n    // For our custom attributeChangedCallback to work, we need to observe\n    // the attributes we want to forward.\n    // @ts-ignore\n    return [...super.observedAttributes, ...attributesWithoutProperties];\n  }\n\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n\n    const inner = this.inner;\n    if (this[firstRender]) {\n      // Listen for any events raised by the inner element which will not\n      // automatically be retargetted across the Shadow DOM boundary, and\n      // re-raise those events when they happen.\n      const eventNames = reraiseEvents[this.extends] || [];\n      eventNames.forEach((eventName) => {\n        inner.addEventListener(eventName, () => {\n          const event = new Event(eventName, {\n            bubbles: eventBubbles[eventName] || false,\n          });\n          this.dispatchEvent(event);\n        });\n      });\n\n      // If inner element can be disabled, then listen to mouse events on the\n      // *outer* element and absorb them if the inner element is disabled.\n      // Without this, a mouse event like a click on the inner disabled element\n      // would be treated as a click on the outer element. Someone listening to\n      // clicks on the outer element would get a click event, even though the\n      // overall element is supposed to be disabled.\n      if (\"disabled\" in inner) {\n        mouseEventNames.forEach((eventName) => {\n          this.addEventListener(eventName, (event) => {\n            if (/** @type {any} */ (inner).disabled) {\n              event.stopImmediatePropagation();\n            }\n          });\n        });\n      }\n    }\n\n    if (changed.tabIndex) {\n      inner.tabIndex = this[state].tabIndex;\n    }\n\n    if (changed.innerAttributes) {\n      // Forward attributes to the inner element.\n      // See notes at attributeChangedCallback.\n      const { innerAttributes } = this[state];\n      for (const name in innerAttributes) {\n        applyAttribute(inner, name, innerAttributes[name]);\n      }\n    }\n\n    // Forward delegated properties to the inner element.\n    this.constructor[delegatedPropertySettersKey].forEach((property) => {\n      if (changed[property]) {\n        const value = this[state][property];\n\n        // Inner selection properties needed to be handled specially.\n        // See TrackTextSelectionMixin.\n        const specialCase =\n          (property === \"selectionEnd\" || property === \"selectionStart\") &&\n          value === null;\n        if (!specialCase) {\n          inner[property] = value;\n        }\n      }\n    });\n  }\n\n  [rendered](/** @type {ChangedFlags} */ changed) {\n    super[rendered](changed);\n\n    // Apply disabled state.\n    if (changed.disabled) {\n      const { disabled } = this[state];\n      if (disabled !== undefined) {\n        setInternalState(this, \"disabled\", disabled);\n      }\n    }\n  }\n\n  /**\n   * The template copied into the shadow tree of new instances of this element.\n   *\n   * The default value of this property is a template that includes an instance\n   * the standard element being wrapped, with a `<slot>` element inside that\n   * to pick up the element's light DOM content. For example, if you wrap an\n   * `<a>` element, then the default template will look like:\n   *\n   *     <template>\n   *       <style>\n   *       :host {\n   *         display: inline-block;\n   *       }\n   *       </style>\n   *       <a id=\"inner\">\n   *         <slot></slot>\n   *       </a>\n   *     </template>\n   *\n   * The `display` styling applied to the host will be `block` for elements that\n   * are block elements by default, and `inline-block` (not `inline`) for other\n   * elements.\n   *\n   * If you'd like the template to include other elements, then override this\n   * property and return a template of your own. The template should include an\n   * instance of the standard HTML element you are wrapping, and the ID of that\n   * element should be \"inner\".\n   *\n   * @type {(string|HTMLTemplateElement)}\n   */\n  get [template]() {\n    const display = blockElements.includes(this.extends)\n      ? \"block\"\n      : \"inline-block\";\n    const tag = this.extends;\n    return templateFrom.html`\n      <style>\n        :host {\n          display: ${display}\n        }\n        \n        [part~=\"inner\"] {\n          box-sizing: border-box;\n          height: 100%;\n          width: 100%;\n        }\n      </style>\n      <${tag} id=\"inner\" part=\"inner ${tag}\">\n        <slot></slot>\n      </${tag}>\n    `;\n  }\n\n  /**\n   * Creates a class that wraps a standard HTML element.\n   *\n   * Note that the resulting class is a subclass of WrappedStandardElement, not\n   * the standard class being wrapped. E.g., if you call\n   * `WrappedStandardElement.wrap('a')`, you will get a class whose shadow tree\n   * will include an anchor element, but the class will *not* inherit from\n   * HTMLAnchorElement.\n   *\n   * @static\n   * @param {string} extendsTag - the standard HTML element tag to extend\n   */\n  static wrap(extendsTag) {\n    // Create the new class.\n    /** @type {Constructor<WrappedStandardElement>} */\n    class Wrapped extends WrappedStandardElement {}\n\n    // Indicate which tag it wraps.\n    /** @type {any} */ (Wrapped)[extendsKey] = extendsTag;\n\n    // Create getter/setters that delegate to the wrapped element.\n    const element = document.createElement(extendsTag);\n    defineDelegates(Wrapped, Object.getPrototypeOf(element));\n\n    return Wrapped;\n  }\n}\n\n/**\n * Update the given attribute on an element.\n *\n * Passing a non-null `value` acts like a call to `setAttribute(name, value)`.\n * If the supplied `value` is nullish, this acts like a call to\n * `removeAttribute(name)`.\n *\n * @private\n * @param {HTMLElement} element\n * @param {string} name\n * @param {string} value\n */\nexport function applyAttribute(element, name, value) {\n  if (standardBooleanAttributes[name]) {\n    // Boolean attribute\n    if (typeof value === \"string\") {\n      element.setAttribute(name, \"\");\n    } else if (value === null) {\n      element.removeAttribute(name);\n    }\n  } else {\n    // Regular string-valued attribute\n    if (value != null) {\n      element.setAttribute(name, value.toString());\n    } else {\n      element.removeAttribute(name);\n    }\n  }\n}\n\n/**\n * Create a delegate for the method or property identified by the descriptor.\n *\n * @private\n * @param {string} name\n * @param {PropertyDescriptor} descriptor\n */\nfunction createDelegate(name, descriptor) {\n  if (typeof descriptor.value === \"function\") {\n    if (name !== \"constructor\") {\n      return createMethodDelegate(name, descriptor);\n    }\n  } else if (\n    typeof descriptor.get === \"function\" ||\n    typeof descriptor.set === \"function\"\n  ) {\n    return createPropertyDelegate(name, descriptor);\n  }\n  return null;\n}\n\n/**\n * Create a delegate for the method identified by the descriptor.\n *\n * @private\n * @param {string} name\n * @param {PropertyDescriptor} descriptor\n */\nfunction createMethodDelegate(name, descriptor) {\n  const value = function (/** @type {any[]} */ ...args) {\n    // @ts-ignore\n    this.inner[name](...args);\n  };\n  const delegate = {\n    configurable: descriptor.configurable,\n    enumerable: descriptor.enumerable,\n    value,\n    writable: descriptor.writable,\n  };\n  return delegate;\n}\n\n/**\n * Create a delegate for the property identified by the descriptor.\n *\n * @private\n * @param {string} name\n * @param {PropertyDescriptor} descriptor\n */\nfunction createPropertyDelegate(name, descriptor) {\n  /** @type {PlainObject} */\n  const delegate = {\n    configurable: descriptor.configurable,\n    enumerable: descriptor.enumerable,\n  };\n  if (descriptor.get) {\n    delegate.get = function () {\n      return getInnerProperty(/** @type {any} */ (this), name);\n    };\n  }\n  if (descriptor.set) {\n    delegate.set = function (/** @type {any} */ value) {\n      setInnerProperty(/** @type {any} */ (this), name, value);\n    };\n  }\n  if (descriptor.writable) {\n    delegate.writable = descriptor.writable;\n  }\n  return delegate;\n}\n\n/**\n * Define delegates for the given class for each property/method on the\n * indicated prototype.\n *\n * @private\n * @param {Constructor<Object>} cls\n * @param {Object} prototype\n */\nfunction defineDelegates(cls, prototype) {\n  const names = Object.getOwnPropertyNames(prototype);\n  cls[delegatedPropertySettersKey] = [];\n  names.forEach((name) => {\n    const descriptor = Object.getOwnPropertyDescriptor(prototype, name);\n    if (!descriptor) {\n      return;\n    }\n    const delegate = createDelegate(name, descriptor);\n    if (delegate) {\n      Object.defineProperty(cls.prototype, name, delegate);\n      if (delegate.set) {\n        cls[delegatedPropertySettersKey].push(name);\n      }\n    }\n  });\n}\n\n/**\n * Return the value of the named property on the inner standard element.\n *\n * @private\n * @param {ReactiveElement} element\n * @param {string} name\n */\nfunction getInnerProperty(element, name) {\n  // If we haven't rendered yet, use internal state value. Once we've\n  // rendered, we get the value from the wrapped element itself. Return our\n  // concept of the current property value from state. If the property hasn't\n  // been defined, however, get the current value of the property from the\n  // inner element.\n  //\n  // This is intended to support cases like an anchor element. If someone sets\n  // `href` on a wrapped anchor, we'll know the value of `href` from state,\n  // but we won't know the value of href-dependent calculated properties like\n  // `protocol`. Using two sources of truth (state and the inner element)\n  // seems fragile, but it's unclear how else to handle this without\n  // reimplementing all HTML property interactions ourselves.\n  //\n  // This arrangement also means that, if an inner element property can change\n  // in response to user interaction (e.g., an input element's value changes\n  // as the user types), the component must listen to suitable events on the\n  // inner element and update its state accordingly.\n  const value = element[state][name];\n  return value || (element[shadowRoot] && element.inner[name]);\n}\n\n/**\n * Set the named property on the inner standard element.\n *\n * @private\n * @param {ReactiveElement} element\n * @param {string} name\n * @param {any} value\n */\nfunction setInnerProperty(element, name, value) {\n  // We normally don't check an existing state value before calling[setState],\n  // relying instead on[setState] to do that check for us. However, we have\n  // dangers in this particular component of creating infinite loops.\n  //\n  // E.g., setting the tabindex attibute will call attributeChangedCallback,\n  // which will set the tabIndex property, which will want to set state, which\n  // will cause a render, which will try to reflect the current value of the\n  // tabIndex property to the tabindex attribute, causing a loop.\n  //\n  // To avoid this, we check the existing value before updating our state.\n  if (element[state][name] !== value) {\n    element[setState]({ [name]: value });\n  }\n}\n\nexport default WrappedStandardElement;\n","import { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport ComposedFocusMixin from \"./ComposedFocusMixin.js\";\nimport DelegateInputLabelMixin from \"./DelegateInputLabelMixin.js\";\nimport FocusVisibleMixin from \"./FocusVisibleMixin.js\";\nimport { defaultState, ids, inputDelegate, tap, template } from \"./internal.js\";\nimport WrappedStandardElement from \"./WrappedStandardElement.js\";\n\nconst Base = ComposedFocusMixin(\n  DelegateInputLabelMixin(\n    FocusVisibleMixin(WrappedStandardElement.wrap(\"button\"))\n  )\n);\n\n/**\n * Base class for custom buttons.\n *\n * `Button` wraps a standard HTML `button` element, allowing for custom styling\n * and behavior while ensuring standard keyboard and focus behavior.\n *\n * @inherits WrappedStandardElement\n * @mixes ComposedFocusMixin\n * @mixes DelegateInputLabelMixin\n * @mixes KeyboardMixin\n * @part button - the inner standard HTML button\n */\nclass Button extends Base {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      role: \"button\",\n    });\n  }\n\n  get [inputDelegate]() {\n    return this[ids].inner;\n  }\n\n  // Respond to a simulated click.\n  [tap]() {\n    const clickEvent = new MouseEvent(\"click\", {\n      bubbles: true,\n      cancelable: true,\n    });\n    this.dispatchEvent(clickEvent);\n  }\n\n  get [template]() {\n    const result = super[template];\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          :host {\n            display: inline-flex;\n            outline: none;\n            -webkit-tap-highlight-color: transparent;\n            touch-action: manipulation;\n          }\n\n          [part~=\"button\"] {\n            align-items: center;\n            background: none;\n            border: none;\n            color: inherit;\n            flex: 1;\n            font: inherit;\n            outline: none;\n            padding: 0;\n          }\n        </style>\n      `\n    );\n    return result;\n  }\n}\n\nexport default Button;\n","import Button from \"../base/Button.js\";\nimport PlainButtonMixin from \"./PlainButtonMixin.js\";\n\n/**\n * Button component in the Plain reference design system\n *\n * @inherits Button\n */\nclass PlainButton extends PlainButtonMixin(Button) {}\n\nexport default PlainButton;\n","import { template } from \"../base/internal.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\n\n/**\n * Button styles in the Plain reference design system\n *\n * @module PlainButtonMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function PlainButtonMixin(Base) {\n  return class PlainButton extends Base {\n    get [template]() {\n      const result = super[template];\n      result.content.append(fragmentFrom.html`\n        <style>\n          :host([disabled]) ::slotted(*) {\n            opacity: 0.5;\n          }\n\n          [part~=\"button\"] {\n            display: inline-flex;\n            justify-content: center;\n            margin: 0;\n            position: relative;\n          }\n        </style>\n      `);\n      return result;\n    }\n  };\n}\n","import { template } from \"../base/internal.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport PlainButton from \"./PlainButton.js\";\n\n/**\n * Button with a border in the Plain reference design system\n *\n * @inherits PlainButton\n */\nclass PlainBorderButton extends PlainButton {\n  get [template]() {\n    const result = super[template];\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          [part~=\"button\"] {\n            background: #eee;\n            border: 1px solid #ccc;\n            padding: 0.25em 0.5em;\n          }\n        </style>\n      `\n    );\n    return result;\n  }\n}\n\nexport default PlainBorderButton;\n","import { template } from \"../base/internal.js\";\nimport ModalBackdrop from \"../base/ModalBackdrop.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\n\n/**\n * ModalBackdrop component in the Plain reference design system\n *\n * @inherits ModalBackdrop\n */\nclass PlainModalBackdrop extends ModalBackdrop {\n  get [template]() {\n    const result = super[template];\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          :host {\n            background: rgba(0, 0, 0, 0.2);\n          }\n        </style>\n      `\n    );\n    return result;\n  }\n}\n\nexport default PlainModalBackdrop;\n","import { template } from \"../base/internal.js\";\nimport OverlayFrame from \"../base/OverlayFrame.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\n\n/**\n * OverlayFrame component in the Plain reference design system\n *\n * The default appearance of `OverlayFrame` uses a simple drop-shadow to let the\n * user see the framed content as being on top of the background page content.\n *\n * @inherits OverlayFrame\n */\nclass PlainOverlayFrame extends OverlayFrame {\n  get [template]() {\n    const result = super[template];\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          :host {\n            background: white;\n            border: 1px solid rgba(0, 0, 0, 0.2);\n            box-shadow: 0 0px 10px rgba(0, 0, 0, 0.5);\n            box-sizing: border-box;\n          }\n        </style>\n      `\n    );\n    return result;\n  }\n}\n\nexport default PlainOverlayFrame;\n","import { defaultState } from \"../base/internal.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport PlainModalBackdrop from \"./PlainModalBackdrop.js\";\nimport PlainOverlayFrame from \"./PlainOverlayFrame.js\";\n\n/**\n * Modal overlay styles for the Plain reference design system\n *\n * @module PlainModalOverlayMixin\n * @part {PlainModalBackdrop} backdrop\n * @part {PlainOverlayFrame} frame\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function PlainModalOverlayMixin(Base) {\n  return class PlainModalOverlay extends Base {\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        backdropPartType: PlainModalBackdrop,\n        framePartType: PlainOverlayFrame,\n      });\n    }\n  };\n}\n","import AlertDialog from \"../base/AlertDialog.js\";\nimport { defaultState, template } from \"../base/internal.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport PlainBorderButton from \"./PlainBorderButton.js\";\nimport PlainModalOverlayMixin from \"./PlainModalOverlayMixin.js\";\n\n/**\n * AlertDialog component in the Plain reference design system\n *\n * @inherits AlertDialog\n * @mixes PlainModalOverlayMixin\n * @part {PlainBorderButton} choice-button\n */\nclass PlainAlertDialog extends PlainModalOverlayMixin(AlertDialog) {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      choiceButtonPartType: PlainBorderButton,\n    });\n  }\n\n  get [template]() {\n    const result = super[template];\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          [part~=\"frame\"] {\n            padding: 1em;\n          }\n\n          [part~=\"choice-button-container\"] {\n            margin-top: 1em;\n          }\n\n          [part~=\"choice-button\"]:not(:first-child) {\n            margin-left: 0.5em;\n          }\n        </style>\n      `\n    );\n    return result;\n  }\n}\n\nexport default PlainAlertDialog;\n","import PlainAlertDialog from \"../src/plain/PlainAlertDialog.js\";\nexport default class ElixAlertDialog extends PlainAlertDialog {}\ncustomElements.define(\"elix-alert-dialog\", ElixAlertDialog);\n","import Dialog from \"../base/Dialog.js\";\nimport PlainModalOverlayMixin from \"./PlainModalOverlayMixin.js\";\n\n/**\n * Dialog component in the Plain reference design system\n *\n * @inherits Dialog\n * @mixes PlainModalOverlayMixin\n */\nclass PlainDialog extends PlainModalOverlayMixin(Dialog) {}\n\nexport default PlainDialog;\n","import PlainDialog from \"../src/plain/PlainDialog.js\";\nexport default class ElixDialog extends PlainDialog {}\ncustomElements.define(\"elix-dialog\", ElixDialog);\n","/**\n * Helpers related to universal accessibility\n *\n * Universal accessibility is a core goal of the Elix project. These helpers are\n * used by mixins like [AriaListMixin](AriaListMixin) and\n * [AriaMenuMixin](AriaMenuMixin) to support accessibility via ARIA.\n *\n * @module accessibility\n */\n\n// Used by ensureId\nconst generatedIdKey = Symbol(\"generatedId\");\nlet generatedIdCount = 0;\n\n/**\n * A dictionary mapping built-in HTML elements to their default ARIA role.\n *\n * Example: `defaultAriaRole.ol` returns \"list\", since the default ARIA role\n * for an `ol` (ordered list) element is \"list\".\n */\nexport const defaultAriaRole = {\n  a: \"link\",\n  article: \"region\",\n  button: \"button\",\n  h1: \"sectionhead\",\n  h2: \"sectionhead\",\n  h3: \"sectionhead\",\n  h4: \"sectionhead\",\n  h5: \"sectionhead\",\n  h6: \"sectionhead\",\n  hr: \"sectionhead\",\n  iframe: \"region\",\n  link: \"link\",\n  menu: \"menu\",\n  ol: \"list\",\n  option: \"option\",\n  output: \"liveregion\",\n  progress: \"progressbar\",\n  select: \"select\",\n  table: \"table\",\n  td: \"td\",\n  textarea: \"textbox\",\n  th: \"th\",\n  ul: \"list\",\n};\n\n/**\n * If the given element already has an ID, return it. If not, generate a\n * previously unused ID and return that.\n *\n * @param {Element} element\n * @returns {string}\n */\nexport function ensureId(element) {\n  let id = element.id || element[generatedIdKey];\n  if (!id) {\n    id = `_id${generatedIdCount++}`;\n    // Remember that we generated an ID for this element.\n    element[generatedIdKey] = id;\n  }\n  return id;\n}\n","import { selfAndComposedAncestors } from \"../core/dom.js\";\nimport { shadowRoot } from \"./internal.js\";\n\n/**\n * Utilities for working with scrolling.\n *\n * @module defaultScrollTarget\n */\n\n/**\n * Returns true if the given target or any of its ancestors can be scrolled\n * in the indicated direction.\n *\n * This is used, e.g., by gesture event handlers to predict if the default\n * behavior for a given event is likely to result in scrolling.\n *\n * @param {EventTarget} target\n * @param {'horizontal'|'vertical'} orientation\n * @param {boolean} downOrRight\n */\nexport function canScrollInDirection(target, orientation, downOrRight) {\n  if (!(target instanceof Node)) {\n    return false;\n  }\n  for (const ancestor of selfAndComposedAncestors(target)) {\n    if (ancestor instanceof HTMLElement) {\n      const style = getComputedStyle(ancestor);\n      const vertical = orientation === \"vertical\";\n      const scrollAxisMatch =\n        (vertical &&\n          (style.overflowY === \"scroll\" || style.overflowY === \"auto\")) ||\n        (!vertical &&\n          (style.overflowX === \"scroll\" || style.overflowX === \"auto\"));\n      if (scrollAxisMatch) {\n        // Found an ancestor that can potentially scroll in this orientation.\n        const scrollEdge = vertical ? \"scrollTop\" : \"scrollLeft\";\n        if (!downOrRight && ancestor[scrollEdge] > 0) {\n          // Target has room to scroll up or left.\n          return true;\n        }\n        const scrollLength = vertical ? \"scrollHeight\" : \"scrollWidth\";\n        const clientLength = vertical ? \"clientHeight\" : \"clientWidth\";\n        const scrollMax = ancestor[scrollLength] - ancestor[clientLength];\n        if (downOrRight && ancestor[scrollEdge] < scrollMax) {\n          // Target has room to scroll down or right.\n          return true;\n        }\n      }\n    }\n  }\n  return false;\n}\n\n/**\n * This helper returns a guess as to what portion of the given element can be\n * scrolled. This is used by [CursorInViewMixin](CursorInViewMixin) to\n * provide a default implementation of [scrollTarget].\n *\n * If the element has a shadow root containing a default (unnamed) slot, this\n * returns the first ancestor of that slot that has either `overflow-x` or\n * `overflow-y` styled as `auto` or `scroll`. If the element has no default\n * slot, or no scrolling ancestor is found, the element itself is returned.\n *\n * @param {Element} element  the component to examine for a scrolling\n * element\n * @returns {Element}\n */\nexport function defaultScrollTarget(element) {\n  const root = element[shadowRoot];\n  const slot = root && root.querySelector(\"slot:not([name])\");\n  const scrollingParent =\n    slot &&\n    slot.parentNode instanceof Element &&\n    getScrollableElement(slot.parentNode);\n  return scrollingParent || element;\n}\n\n/**\n * Return true if the given element can be scrolled.\n *\n * @private\n * @param {HTMLElement} element\n */\nfunction isElementScrollable(element) {\n  const style = getComputedStyle(element);\n  const overflowX = style.overflowX;\n  const overflowY = style.overflowY;\n  return (\n    overflowX === \"scroll\" ||\n    overflowX === \"auto\" ||\n    overflowY === \"scroll\" ||\n    overflowY === \"auto\"\n  );\n}\n\n/**\n * If the given element can be scrolled, return that. If not, return the closest\n * ancestor that can be scrolled. If no such ancestor is found, return null.\n *\n * @param {Element} node\n * @returns {Element|null}\n */\nexport function getScrollableElement(node) {\n  for (const ancestor of selfAndComposedAncestors(node)) {\n    if (ancestor instanceof HTMLElement && isElementScrollable(ancestor)) {\n      return ancestor;\n    }\n  }\n  return null;\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  closestAvailableItemIndex,\n  defaultState,\n  goFirst,\n  goLast,\n  goNext,\n  goPrevious,\n  setState,\n  state,\n  stateEffects,\n} from \"./internal.js\";\n\n/**\n * Tracks and navigates the current item in a set of items\n *\n * @module ItemsCursorMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function ItemsCursorMixin(Base) {\n  // The class prototype added by the mixin.\n  class ItemsCursor extends Base {\n    /**\n     * Look for an item which is available in the given state..\n     *\n     * The `options` parameter can accept options for:\n     *\n     * * `direction`: 1 to move forward, -1 to move backward\n     * * `index`: the index to start at, defaults to `state.currentIndex`\n     * * `wrap`: whether to wrap around the ends of the `items` array, defaults\n     *   to `state.cursorOperationsWrap`.\n     *\n     * If an available item was found, this returns its index. If no item was\n     * found, this returns -1.\n     *\n     * @param {PlainObject} state\n     * @param {PlainObject} options\n     * @returns {number}\n     */\n    [closestAvailableItemIndex](state, options = {}) {\n      const direction = options.direction !== undefined ? options.direction : 1;\n      const index =\n        options.index !== undefined ? options.index : state.currentIndex;\n      const wrap =\n        options.wrap !== undefined ? options.wrap : state.cursorOperationsWrap;\n\n      const { items } = state;\n      const count = items ? items.length : 0;\n\n      if (count === 0) {\n        // No items\n        return -1;\n      }\n\n      if (wrap) {\n        // Search with wrapping.\n\n        // Modulus taking into account negative numbers.\n        let i = ((index % count) + count) % count;\n        const end = (((i - direction) % count) + count) % count;\n        while (i !== end) {\n          const available = state.availableItemFlags\n            ? state.availableItemFlags[i]\n            : true;\n          if (available) {\n            return i;\n          }\n          // See modulus note above.\n          i = (((i + direction) % count) + count) % count;\n        }\n      } else {\n        // Search without wrapping.\n        for (let i = index; i >= 0 && i < count; i += direction) {\n          const available = state.availableItemFlags\n            ? state.availableItemFlags[i]\n            : true;\n          if (available) {\n            return i;\n          }\n        }\n      }\n\n      return -1; // No item found\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        currentIndex: -1,\n        desiredCurrentIndex: null,\n        currentItem: null,\n        currentItemRequired: false,\n        cursorOperationsWrap: false,\n      });\n    }\n\n    /**\n     * Move to the first item in the set.\n     *\n     * @protected\n     * @returns {Boolean} True if the current item changed, false if not.\n     */\n    [goFirst]() {\n      if (super[goFirst]) {\n        super[goFirst]();\n      }\n      return moveToIndex(this, 0, 1);\n    }\n\n    /**\n     * Move to the last item in the set.\n     *\n     * @protected\n     * @returns {Boolean} True if the current item changed, false if not.\n     */\n    [goLast]() {\n      if (super[goLast]) {\n        super[goLast]();\n      }\n      return moveToIndex(this, this[state].items.length - 1, -1);\n    }\n\n    /**\n     * Move to the next item in the set.\n     *\n     * If no item is current, move to the first item.\n     *\n     * @protected\n     * @returns {Boolean} True if the current item changed, false if not.\n     */\n    [goNext]() {\n      if (super[goNext]) {\n        super[goNext]();\n      }\n      const { currentIndex, items } = this[state];\n      const start = currentIndex < 0 && items ? 0 : currentIndex + 1;\n      return moveToIndex(this, start, 1);\n    }\n\n    /**\n     * Move to the previous item in the set.\n     *\n     * If no item is current, move to the last item.\n     *\n     * @protected\n     * @returns {Boolean} True if the current item changed, false if not.\n     */\n    [goPrevious]() {\n      if (super[goPrevious]) {\n        super[goPrevious]();\n      }\n      const { currentIndex, items } = this[state];\n      const start =\n        currentIndex < 0 && items ? items.length - 1 : currentIndex - 1;\n      return moveToIndex(this, start, -1);\n    }\n\n    [stateEffects](state, changed) {\n      const effects = super[stateEffects]\n        ? super[stateEffects](state, changed)\n        : {};\n\n      // Ensure currentIndex is valid.\n      if (\n        changed.availableItemFlags ||\n        changed.items ||\n        changed.currentIndex ||\n        changed.currentItemRequired\n      ) {\n        const {\n          currentIndex,\n          desiredCurrentIndex,\n          currentItem,\n          currentItemRequired,\n          items,\n        } = state;\n\n        const count = items ? items.length : 0;\n\n        // Determine the desired index: the one we want irrespective of whether\n        // we have items or their availability.\n        // Assume we'll stick with the same desired index we already have.\n        let newDesiredIndex = desiredCurrentIndex;\n        if (\n          changed.items &&\n          !changed.currentIndex &&\n          currentItem &&\n          count > 0 &&\n          items[currentIndex] !== currentItem\n        ) {\n          // The items changed, and the item at the cursor is no longer the\n          // same. See if we can find that item again in the list of items.\n          const newItemIndex = items.indexOf(currentItem);\n          if (newItemIndex >= 0) {\n            // Found the item again; try to use its index.\n            newDesiredIndex = newItemIndex;\n          }\n        } else if (\n          changed.currentIndex &&\n          ((currentIndex < 0 && currentItem !== null) ||\n            (currentIndex >= 0 &&\n              (count === 0 || items[currentIndex] !== currentItem)) ||\n            desiredCurrentIndex === null)\n        ) {\n          // Someone explicitly moved the cursor, which trumps any previously\n          // desired index.\n          newDesiredIndex = currentIndex;\n        }\n\n        // If an item is required and there's no selection, we'll implicitly try\n        // to get the first available item.\n        if (currentItemRequired && newDesiredIndex < 0) {\n          newDesiredIndex = 0;\n        }\n\n        // Now that we know what index we want, see how close we can get to it.\n        let newIndex;\n        if (newDesiredIndex < 0) {\n          // All negative indices are equivalent to -1.\n          newDesiredIndex = -1;\n          newIndex = -1;\n        } else if (count === 0) {\n          // No items yet.\n          newIndex = -1;\n        } else {\n          // See how close we can get to the desired index.\n          // First clamp index to existing array bounds.\n          newIndex = Math.max(Math.min(count - 1, newDesiredIndex), 0);\n          // Look for an available item going forward.\n          newIndex = this[closestAvailableItemIndex](state, {\n            direction: 1,\n            index: newIndex,\n            wrap: false,\n          });\n          if (newIndex < 0) {\n            // Next best: look for an available item going backward.\n            newIndex = this[closestAvailableItemIndex](state, {\n              direction: -1,\n              index: newIndex - 1,\n              wrap: false,\n            });\n          }\n        }\n\n        const newItem = (items && items[newIndex]) || null;\n        Object.assign(effects, {\n          currentIndex: newIndex,\n          desiredCurrentIndex: newDesiredIndex,\n          currentItem: newItem,\n        });\n      }\n\n      return effects;\n    }\n  }\n\n  return ItemsCursor;\n}\n\n/**\n * Update currentIndex and return true if it changed.\n *\n * @private\n * @param {Element} element\n * @param {number} index\n * @param {number} direction\n */\nfunction moveToIndex(element, index, direction) {\n  const newIndex = element[closestAvailableItemIndex](element[state], {\n    direction,\n    index,\n  });\n  if (newIndex < 0) {\n    // Couldn't find an item to move to.\n    return false;\n  }\n  // Normally we don't check to see if state is going to change before setting\n  // state, but the methods defined by this mixin want to be able to return true\n  // if the index is actually going to change.\n  const changed = element[state].currentIndex !== newIndex;\n  if (changed) {\n    element[setState]({\n      currentIndex: newIndex,\n    });\n  }\n  return changed;\n}\n","/**\n * Helpers for working with element content.\n *\n * @module content\n */\n\n// These are tags for elements that can appear in the document body, but do not\n// seem to have any user-visible manifestation.\n// See https://developer.mozilla.org/en-US/docs/Web/HTML/Element\nconst auxiliarycustomTags = [\n  \"applet\", // deprecated\n  \"basefont\", // deprecated\n  \"embed\",\n  \"font\", // deprecated\n  \"frame\", // deprecated\n  \"frameset\", // deprecated\n  \"isindex\", // deprecated\n  \"keygen\", // deprecated\n  \"link\",\n  \"multicol\", // deprecated\n  \"nextid\", // deprecated\n  \"noscript\",\n  \"object\",\n  \"param\",\n  \"script\",\n  \"style\",\n  \"template\",\n  \"noembed\", // deprecated\n];\n\n/**\n * Use a heuristic to extract text from the given item.\n *\n * This looks, in order, at: the `aria-label` attribute, the `alt` attribute,\n * `innerText`, or `textContent`.\n *\n * This function is used as the default implementation of the\n * [getItemText](internal#getItemText) function in several mixins.\n *\n * @param {Element} element\n * @returns {string}\n */\nexport function getDefaultText(element) {\n  return (\n    element.getAttribute(\"aria-label\") ||\n    element.getAttribute(\"alt\") ||\n    /** @type {any} */ (element).innerText ||\n    element.textContent ||\n    \"\"\n  );\n}\n\n/**\n * Return true if the given node is likely to be useful as component content.\n *\n * This will be `true` for nodes that are: a) instances of `Element`\n * (`HTMLElement` or `SVGElement`), and b) not on a blacklist of normally\n * invisible elements (such as `style` or `script`). Among other things, this\n * returns `false` for Text nodes.\n *\n * This is used by [ContentItemsMixin](ContentItemsMixin) to filter out nodes\n * which are unlikely to be interesting as list items. This is intended to\n * satisfy the Gold Standard checklist criteria [Auxiliary\n * Content](https://github.com/webcomponents/gold-standard/wiki/Auxiliary-Content),\n * so that a component does not inadvertently treat `<style>` and other invisible\n * items as element content.\n *\n * @param {Node} node\n * @returns {boolean}\n */\nexport function isSubstantiveElement(node) {\n  return (\n    node instanceof Element &&\n    (!node.localName || auxiliarycustomTags.indexOf(node.localName) < 0)\n  );\n}\n\n/**\n * Return a set of Elements which are likely to be useful as component content.\n *\n * Given a `NodeList` or array of objects, this will return only those array\n * members that are: a) instances of `Element` (`HTMLElement` or `SVGElement`),\n * and b) not on a blacklist of normally invisible elements (such as `style` or\n * `script`). Among other things, this filters out Text nodes.\n *\n * @param {(NodeList|Node[])} nodes - the list of nodes to filter\n * @returns {Element[]} the filtered elements\n */\nexport function substantiveElements(nodes) {\n  return [].filter.call(nodes, (/** @type {Node} */ node) =>\n    isSubstantiveElement(node)\n  );\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  closestAvailableItemIndex,\n  keydown,\n  raiseChangeEvents,\n  scrollTarget,\n  setState,\n  state,\n} from \"./internal.js\";\nimport { defaultScrollTarget } from \"./scrolling.js\";\n\n/**\n * Maps the Page Up and Page Down keys to item cursor operations.\n *\n * The keyboard interaction model generally follows that of Microsoft Windows'\n * list boxes instead of those in OS X:\n *\n * * The Page Up/Down and Home/End keys actually move the item cursor, rather\n *   than just scrolling. The former behavior seems more generally useful for\n *   keyboard users.\n *\n * * Pressing Page Up/Down will first move the cursor to the topmost/bottommost\n *   visible item if the cursor is not already there. Thereafter, the key\n *   will move the cursor up/down by a page, and (per the above point) make\n *   the current item visible.\n *\n * To ensure the current item is in view following use of Page Up/Down, use\n * the related [CursorInViewMixin](CursorInViewMixin).\n *\n * This mixin expects the component to provide:\n *\n * * A `[keydown]` method invoked when a key is pressed. You can use\n *   [KeyboardMixin](KeyboardMixin) for that purpose, or wire up your own\n *   keyboard handling and call `[keydown]` yourself.\n * * A `currentIndex` state member updatable via [setState]`.\n *\n * @module KeyboardPagedCursorMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function KeyboardPagedCursorMixin(Base) {\n  // The class prototype added by the mixin.\n  class KeyboardPagedCursor extends Base {\n    [keydown](/** @type {KeyboardEvent} */ event) {\n      let handled = false;\n      const orientation = this.orientation;\n      if (orientation !== \"horizontal\") {\n        switch (event.key) {\n          case \"PageDown\":\n            handled = this.pageDown();\n            break;\n\n          case \"PageUp\":\n            handled = this.pageUp();\n            break;\n        }\n      }\n\n      // Prefer mixin result if it's defined, otherwise use base result.\n      return handled || (super[keydown] && super[keydown](event));\n    }\n\n    // Default orientation implementation defers to super,\n    // but if not found, looks in state.\n    get orientation() {\n      return (\n        super.orientation || (this[state] && this[state].orientation) || \"both\"\n      );\n    }\n\n    /**\n     * Scroll down one page.\n     */\n    pageDown() {\n      if (super.pageDown) {\n        super.pageDown();\n      }\n      return scrollOnePage(this, true);\n    }\n\n    /**\n     * Scroll up one page.\n     */\n    pageUp() {\n      if (super.pageUp) {\n        super.pageUp();\n      }\n      return scrollOnePage(this, false);\n    }\n\n    /**\n     * The element that will be scrolled when the user presses Page Up or\n     * Page Down. The default value is calculated by\n     * [defaultScrollTarget](defaultScrollTarget#defaultScrollTarget).\n     *\n     * See [scrollTarget](internal#internal.scrollTarget).\n     *\n     * @type {HTMLElement}\n     */\n    get [scrollTarget]() {\n      /** @type {any} */\n      const element = this;\n      return super[scrollTarget] || defaultScrollTarget(element);\n    }\n  }\n\n  return KeyboardPagedCursor;\n}\n\n/**\n * Return the item whose content spans the given y position (relative to the\n * top of the list's scrolling client area), or null if not found.\n *\n * If downward is true, move down the list of items to find the first item\n * found at the given y position; if downward is false, move up the list of\n * items to find the last item at that position.\n *\n * @private\n * @param {ReactiveElement} element\n * @param {number} y\n * @param {boolean} downward\n */\nfunction getIndexOfItemAtY(element, y, downward) {\n  const items = element[state].items;\n  const start = downward ? 0 : items.length - 1;\n  const end = downward ? items.length : 0;\n  const step = downward ? 1 : -1;\n\n  // Find the item spanning the indicated y coordinate.\n  let index;\n  /** @type {HTMLElement|SVGElement|null} */ let item = null;\n  let itemRect;\n  const { availableItemFlags } = element[state];\n  for (index = start; index !== end; index += step) {\n    // Only consider items available in the element's current state.\n    const available = availableItemFlags ? availableItemFlags[index] : true;\n    if (available) {\n      itemRect = items[index].getBoundingClientRect();\n      if (itemRect.top <= y && y <= itemRect.bottom) {\n        // Item spans the indicated y coordinate.\n        item = items[index];\n        break;\n      }\n    }\n  }\n\n  if (!item || !itemRect) {\n    return null;\n  }\n\n  // We may have found an item whose padding spans the given y coordinate,\n  // but whose content is actually above/below that point.\n  // TODO: If the item has a border, then padding should be included in\n  // considering a hit.\n  const itemStyle = getComputedStyle(item);\n  const itemPaddingTop = itemStyle.paddingTop\n    ? parseFloat(itemStyle.paddingTop)\n    : 0;\n  const itemPaddingBottom = itemStyle.paddingBottom\n    ? parseFloat(itemStyle.paddingBottom)\n    : 0;\n  const contentTop = itemRect.top + itemPaddingTop;\n  const contentBottom =\n    contentTop + item.clientHeight - itemPaddingTop - itemPaddingBottom;\n  if ((downward && contentTop <= y) || (!downward && contentBottom >= y)) {\n    // The indicated coordinate hits the actual item content.\n    return index;\n  } else {\n    // The indicated coordinate falls within the item's padding. Back up to\n    // the item below/above the item we found and return that.\n    return index - step;\n  }\n}\n\n/**\n * Move by one page downward (if downward is true), or upward (if false).\n * Return true if we ended up moving the cursor, false if not.\n *\n * @private\n * @param {ReactiveElement} element\n * @param {boolean} downward\n */\nfunction scrollOnePage(element, downward) {\n  const items = element[state].items;\n  const currentIndex = element[state].currentIndex;\n\n  // Determine the item visible just at the edge of direction we're heading.\n  // We'll move to that item if it's not already current.\n  const targetRect = element[scrollTarget].getBoundingClientRect();\n  const edge = downward ? targetRect.bottom : targetRect.top;\n  const indexOfItemAtEdge = getIndexOfItemAtY(element, edge, downward);\n\n  let newIndex;\n  if (indexOfItemAtEdge && currentIndex === indexOfItemAtEdge) {\n    // The item at the edge was already current, so scroll in the indicated\n    // direction by one page, measuring from the bounds of the current item.\n    // Leave the new item at that edge current.\n    const currentItem = items[currentIndex];\n    const currentRect = currentItem.getBoundingClientRect();\n    const pageHeight = element[scrollTarget].clientHeight;\n    const y = downward\n      ? currentRect.bottom + pageHeight\n      : currentRect.top - pageHeight;\n    newIndex = getIndexOfItemAtY(element, y, downward);\n  } else {\n    // The item at the edge wasn't current yet. Instead of scrolling, we'll just\n    // move to that item. That is, the first attempt to page up/down usually\n    // just moves the cursor to the edge in that direction.\n    newIndex = indexOfItemAtEdge;\n  }\n\n  if (!newIndex) {\n    // We went past the first/last item without finding an item. Move to the\n    // last item (if moving downward) or first item (if moving upward).\n    const index = downward ? items.length - 1 : 0;\n    newIndex = element[closestAvailableItemIndex]\n      ? element[closestAvailableItemIndex](element[state], {\n          direction: downward ? -1 /* Work up */ : 1 /* Work down */,\n          index,\n        })\n      : index;\n  }\n\n  const changed = newIndex !== currentIndex;\n  if (changed) {\n    // If external code causes an operation that scrolls the page, it's\n    // impossible for it to predict where the currentIndex is going to end up.\n    // Accordingly, we raise change events.\n    const saveRaiseChangesEvents = element[raiseChangeEvents];\n    element[raiseChangeEvents] = true;\n    element[setState]({\n      currentIndex: newIndex,\n    });\n    element[raiseChangeEvents] = saveRaiseChangesEvents;\n  }\n  return changed;\n}\n","/**\n * Constants used by Elix mixins and components\n *\n * Sharing these constants allows for greater consistency in things such as user\n * interface timings.\n *\n * @module constants\n */\n\n/**\n * Time in milliseconds after which the user is considered to have stopped\n * typing.\n *\n * This is used by\n * [KeyboardPrefixCursorMixin](KeyboardPrefixCursorMixin).\n *\n * @const {number} TYPING_TIMEOUT_DURATION\n */\nexport const TYPING_TIMEOUT_DURATION = 1000;\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { TYPING_TIMEOUT_DURATION } from \"./constants.js\";\nimport { goToItemWithPrefix, keydown, setState, state } from \"./internal.js\";\n\n// Symbols for private data members on an element.\nconst typedPrefixKey = Symbol(\"typedPrefix\");\nconst prefixTimeoutKey = Symbol(\"prefixTimeout\");\n\n/**\n * Lets a user navigate an item cursor by typing the beginning of items\n *\n * Example: suppose a component using this mixin has the following items:\n *\n *     <sample-list-component>\n *       <div>Apple</div>\n *       <div>Apricot</div>\n *       <div>Banana</div>\n *       <div>Blackberry</div>\n *       <div>Blueberry</div>\n *       <div>Cantaloupe</div>\n *       <div>Cherry</div>\n *       <div>Lemon</div>\n *       <div>Lime</div>\n *     </sample-list-component>\n *\n * If this component receives the focus, and the user presses the \"b\" or \"B\"\n * key, the item cursor will move to \"Banana\", because it's the first item that\n * matches the prefix \"b\". (Matching is case-insensitive.) If the user now\n * presses the \"l\" or \"L\" key quickly, the prefix to match becomes \"bl\", so the\n * cursor will move to \"Blackberry\".\n *\n * The prefix typing feature has a one second timeout  the prefix to match will\n * be reset after a second has passed since the user last typed a key. If, in\n * the above example, the user waits a second between typing \"b\" and \"l\", the\n * prefix will become \"l\", so the cursor would move to \"Lemon\".\n *\n * This mixin expects the component to invoke a `keydown` method when a key is\n * pressed. You can use [KeyboardMixin](KeyboardMixin) for that purpose, or wire\n * up your own keyboard handling and call `keydown` yourself.\n *\n * This mixin also expects the component to provide an `items` property. The\n * `textContent` of those items will be used for purposes of prefix matching.\n *\n * @module KeyboardPrefixCursorMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function KeyboardPrefixCursorMixin(Base) {\n  // The class prototype added by the mixin.\n  class KeyboardPrefixCursor extends Base {\n    constructor() {\n      // @ts-ignore\n      super();\n      resetTypedPrefix(this);\n    }\n\n    /**\n     * Go to the first item whose text content begins with the given prefix.\n     *\n     * @param {string} prefix - The prefix string to search for\n     * @returns {boolean}\n     */\n    [goToItemWithPrefix](prefix) {\n      if (super[goToItemWithPrefix]) {\n        super[goToItemWithPrefix](prefix);\n      }\n      if (prefix == null || prefix.length === 0) {\n        return false;\n      }\n      // Find item that begins with the prefix. Ignore case.\n      const searchText = prefix.toLowerCase();\n      /** @type {string[]} */ const texts = this[state].texts;\n      const index = texts.findIndex(\n        (text) => text.substr(0, prefix.length).toLowerCase() === searchText\n      );\n      if (index >= 0) {\n        const previousIndex = this[state].currentIndex;\n        this[setState]({ currentIndex: index });\n        return this[state].currentIndex !== previousIndex;\n      } else {\n        return false;\n      }\n    }\n\n    [keydown](/** @type {KeyboardEvent} */ event) {\n      let handled;\n\n      switch (event.key) {\n        case \"Backspace\":\n          handleBackspace(this);\n          handled = true;\n          break;\n\n        case \"Escape\":\n          // Pressing Escape lets user quickly start typing a new prefix.\n          resetTypedPrefix(this);\n          break;\n\n        default:\n          if (\n            !event.ctrlKey &&\n            !event.metaKey &&\n            !event.altKey &&\n            event.key.length === 1\n          ) {\n            handlePlainCharacter(this, event.key);\n          }\n      }\n\n      // Prefer mixin result if it's defined, otherwise use base result.\n      return handled || (super[keydown] && super[keydown](event));\n    }\n  }\n\n  return KeyboardPrefixCursor;\n}\n\n/**\n * Handle the Backspace key: remove the last character from the prefix.\n *\n * @private\n * @param {ReactiveElement} element\n */\nfunction handleBackspace(element) {\n  /** @type {any} */ const cast = element;\n  const length = cast[typedPrefixKey] ? cast[typedPrefixKey].length : 0;\n  if (length > 0) {\n    cast[typedPrefixKey] = cast[typedPrefixKey].substr(0, length - 1);\n  }\n  element[goToItemWithPrefix](cast[typedPrefixKey]);\n  setPrefixTimeout(element);\n}\n\n/**\n * Add a plain character to the prefix.\n *\n * @private\n * @param {ReactiveElement} element\n * @param {string} char\n */\nfunction handlePlainCharacter(element, char) {\n  /** @type {any} */ const cast = element;\n  const prefix = cast[typedPrefixKey] || \"\";\n  cast[typedPrefixKey] = prefix + char;\n  element[goToItemWithPrefix](cast[typedPrefixKey]);\n  setPrefixTimeout(element);\n}\n\n/**\n * Stop listening for typing.\n *\n * @private\n * @param {ReactiveElement} element\n */\nfunction resetPrefixTimeout(element) {\n  /** @type {any} */ const cast = element;\n  if (cast[prefixTimeoutKey]) {\n    clearTimeout(cast[prefixTimeoutKey]);\n    cast[prefixTimeoutKey] = false;\n  }\n}\n\n/**\n * Clear the prefix under construction.\n *\n * @private\n * @param {ReactiveElement} element\n */\nfunction resetTypedPrefix(element) {\n  /** @type {any} */ (element)[typedPrefixKey] = \"\";\n  resetPrefixTimeout(element);\n}\n\n/**\n * Wait for the user to stop typing.\n *\n * @private\n * @param {ReactiveElement} element\n */\nfunction setPrefixTimeout(element) {\n  resetPrefixTimeout(element);\n  /** @type {any} */ (element)[prefixTimeoutKey] = setTimeout(() => {\n    resetTypedPrefix(element);\n  }, TYPING_TIMEOUT_DURATION);\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { setState } from \"./internal.js\";\n\n/**\n * Lets an element determine whether it resides in right-to-left text.\n *\n * @module LanguageDirectionMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function LanguageDirectionMixin(Base) {\n  // The class prototype added by the mixin.\n  return class LanguageDirection extends Base {\n    // The only way to get text direction is to wait for the component to\n    // connect and then inspect the computed style on its root element. We set\n    // state before calling super so the new state will be included when\n    // ReactiveMixin calls render.\n    connectedCallback() {\n      /** @type {any} */ const element = this;\n      const languageDirection = getComputedStyle(element).direction;\n      const rightToLeft = languageDirection === \"rtl\";\n      this[setState]({ rightToLeft });\n      super.connectedCallback();\n    }\n  };\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { isSubstantiveElement } from \"./content.js\";\nimport { defaultState, stateEffects } from \"./internal.js\";\n\n/**\n * Treats an element's content nodes as list items.\n *\n * Items differ from nodes contents in several ways:\n *\n * * They are often referenced via index.\n * * They may have a selection state.\n * * It's common to do work to initialize the appearance or state of a new\n *   item.\n * * Text nodes are filtered out.\n * * Auxiliary invisible child elements are filtered out and not counted as\n *   items. Auxiliary elements include link, script, style, and template\n *   elements. This filtering ensures that those auxiliary elements can be\n *   used in markup inside of a list without being treated as list items.\n *\n * This mixin expects a component to provide a `content` state member returning\n * a raw set of elements. You can provide that yourself, or use\n * [SlotContentMixin](SlotContentMixin).\n *\n * Most Elix [elements](elements) use `ContentItemsMixin`, including\n * [ListBox](ListBox), [Modes](Modes), and [Tabs](Tabs).\n *\n * @module ContentItemsMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function ContentItemsMixin(Base) {\n  return class ContentItems extends Base {\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        items: null,\n      });\n    }\n\n    [stateEffects](state, changed) {\n      const effects = super[stateEffects]\n        ? super[stateEffects](state, changed)\n        : {};\n\n      // Regenerate items when content changes.\n      if (changed.content) {\n        /** @type {Node[]} */ const content = state.content;\n        const items = content\n          ? Array.prototype.filter.call(content, (/** @type {Node} */ item) =>\n              isSubstantiveElement(item)\n            )\n          : null;\n        if (items) {\n          Object.freeze(items);\n        }\n        Object.assign(effects, { items });\n      }\n\n      return effects;\n    }\n  };\n}\n","import { templateFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\";\nimport AriaMenuMixin from \"./AriaMenuMixin.js\";\nimport CursorAPIMixin from \"./CursorAPIMixin.js\";\nimport CursorInViewMixin from \"./CursorInViewMixin.js\";\nimport DelegateFocusMixin from \"./DelegateFocusMixin.js\";\nimport DirectionCursorMixin from \"./DirectionCursorMixin.js\";\nimport {\n  defaultState,\n  firstRender,\n  ids,\n  raiseChangeEvents,\n  render,\n  rendered,\n  scrollTarget,\n  setState,\n  state,\n  stateEffects,\n  tap,\n  template,\n} from \"./internal.js\";\nimport ItemsAPIMixin from \"./ItemsAPIMixin.js\";\nimport ItemsCursorMixin from \"./ItemsCursorMixin.js\";\nimport ItemsTextMixin from \"./ItemsTextMixin.js\";\nimport KeyboardDirectionMixin from \"./KeyboardDirectionMixin.js\";\nimport KeyboardMixin from \"./KeyboardMixin.js\";\nimport KeyboardPagedCursorMixin from \"./KeyboardPagedCursorMixin.js\";\nimport KeyboardPrefixCursorMixin from \"./KeyboardPrefixCursorMixin.js\";\nimport LanguageDirectionMixin from \"./LanguageDirectionMixin.js\";\nimport SlotItemsMixin from \"./SlotItemsMixin.js\";\nimport TapCursorMixin from \"./TapCursorMixin.js\";\n\nconst Base = AriaMenuMixin(\n  CursorAPIMixin(\n    CursorInViewMixin(\n      DelegateFocusMixin(\n        DirectionCursorMixin(\n          ItemsAPIMixin(\n            ItemsCursorMixin(\n              ItemsTextMixin(\n                KeyboardDirectionMixin(\n                  KeyboardMixin(\n                    KeyboardPagedCursorMixin(\n                      KeyboardPrefixCursorMixin(\n                        LanguageDirectionMixin(\n                          SlotItemsMixin(TapCursorMixin(ReactiveElement))\n                        )\n                      )\n                    )\n                  )\n                )\n              )\n            )\n          )\n        )\n      )\n    )\n  )\n);\n\n/**\n * A menu of choices or commands\n *\n * This holds the contents of the menu, not the top-level UI element that invokes\n * a menu. For that, see [MenuButton](MenuButton) or [PopupSource](PopupSource).\n *\n * @inherits ReactiveElement\n * @mixes AriaMenuMixin\n * @mixes CursorInViewMixin\n * @mixes CursorAPIMixin\n * @mixes DelegateFocusMixin\n * @mixes DirectionCursorMixin\n * @mixes ItemsAPIMixin\n * @mixes ItemsCursorMixin\n * @mixes ItemsTextMixin\n * @mixes KeyboardDirectionMixin\n * @mixes KeyboardMixin\n * @mixes KeyboardPagedCursorMixin\n * @mixes KeyboardPrefixCursorMixin\n * @mixes LanguageDirectionMixin\n * @mixes SingleSelectAPIMixin\n * @mixes SlotItemsMixin\n * @mixes TapCursorMixin\n */\nclass Menu extends Base {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      availableItemFlags: null,\n      highlightCurrentItem: true,\n      orientation: \"vertical\",\n      currentItemFocused: false,\n    });\n  }\n\n  /**\n   * Flash the current item.\n   *\n   * By default, this uses a heuristic to guess whether the menu was closed by a\n   * keyboard or mouse (on desktop). If so, the menu flashes the current item\n   * off then back on, emulating the menu item selection effect in macOS.\n   * Otherwise, it does nothing.\n   */\n  async flashCurrentItem() {\n    const keyboardActive = this[state].focusVisible;\n    const probablyDesktop = matchMedia(\"(pointer: fine)\").matches;\n    if (keyboardActive || probablyDesktop) {\n      const flashDuration = 75; // milliseconds\n      this[setState]({ highlightCurrentItem: false });\n      await new Promise((resolve) => setTimeout(resolve, flashDuration));\n      this[setState]({ highlightCurrentItem: true });\n      await new Promise((resolve) => setTimeout(resolve, flashDuration));\n    }\n  }\n\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n\n    if (this[firstRender]) {\n      // Listen to changes in disabled state.\n      this.addEventListener(\"disabledchange\", (event) => {\n        this[raiseChangeEvents] = true;\n        /** @type {any} */ const target = event.target;\n        const { items } = this[state];\n        const index = items === null ? -1 : items.indexOf(target);\n        if (index >= 0) {\n          // Update item availability.\n          const availableItemFlags = this[state].availableItemFlags.slice();\n          availableItemFlags[index] = !target.disabled;\n          this[setState]({ availableItemFlags });\n        }\n        this[raiseChangeEvents] = false;\n      });\n\n      // Treat a pointerdown event as a tap.\n      if (\"PointerEvent\" in window) {\n        // Prefer listening to standard pointer events.\n        this.addEventListener(\"pointerdown\", (event) => this[tap](event));\n      } else {\n        this.addEventListener(\"touchstart\", (event) => this[tap](event));\n      }\n\n      this.removeAttribute(\"tabindex\");\n    }\n\n    const { currentIndex, items } = this[state];\n\n    // Highlight the current item.\n    if (\n      (changed.items || changed.currentIndex || changed.highlightCurrentItem) &&\n      items\n    ) {\n      const { highlightCurrentItem } = this[state];\n      items.forEach((item, index) => {\n        item.toggleAttribute(\n          \"current\",\n          highlightCurrentItem && index === currentIndex\n        );\n      });\n    }\n\n    if (\n      (changed.items ||\n        changed.currentIndex ||\n        changed.currentItemFocused ||\n        changed.focusVisible) &&\n      items\n    ) {\n      // A menu has a complicated focus arrangement in which the current item has\n      // focus, which means it needs a tabindex. However, we don't want any other\n      // item in the menu to have a tabindex, so that if the user presses Tab or\n      // Shift+Tab, they move away from the menu entirely (rather than just moving\n      // to the next or previous item).\n      //\n      // That's already complex, but to make things worse, if we remove the\n      // tabindex from an item that has the focus, the focus gets moved to the\n      // document. In popup menus, the popup will conclude it's lost the focus,\n      // and implicitly close. So we want to move the focus in two phases: 1)\n      // set tabindex on a newly-current item so we can focus on it, 2) after\n      // the new item has been focused, remove the tabindex from any\n      // previous item.\n      items.forEach((item, index) => {\n        const current = index === currentIndex;\n        const isDefaultFocusableItem = currentIndex < 0 && index === 0;\n        if (!this[state].currentItemFocused) {\n          // Phase 1: Add tabindex to newly-current item.\n          if (current || isDefaultFocusableItem) {\n            item.tabIndex = 0;\n          }\n        } else {\n          // Phase 2: Remove tabindex from any previous item.\n          if (!(current || isDefaultFocusableItem)) {\n            item.removeAttribute(\"tabindex\");\n          }\n        }\n      });\n    }\n  }\n\n  [rendered](/** @type {ChangedFlags} */ changed) {\n    super[rendered](changed);\n    if (\n      !this[firstRender] &&\n      changed.currentIndex &&\n      !this[state].currentItemFocused\n    ) {\n      // The current item needs the focus, but this is complicated. See notes\n      // in render.\n      const { currentItem } = this[state];\n      const focusElement =\n        currentItem instanceof HTMLElement ? currentItem : this;\n      focusElement.focus();\n\n      // Now that the current item has been focused, we can remove/reset the\n      // tabindex on any item that had previously been current.\n      this[setState]({\n        currentItemFocused: true,\n      });\n    }\n  }\n\n  // @ts-ignore\n  get [scrollTarget]() {\n    return this[ids].content;\n  }\n\n  [stateEffects](state, changed) {\n    const effects = super[stateEffects](state, changed);\n\n    // When current item changes, we'll need to focus on it in rendered.\n    if (changed.currentIndex) {\n      Object.assign(effects, {\n        currentItemFocused: false,\n      });\n    }\n\n    // Mark disabled items as unavailable.\n    if (changed.items) {\n      const { items } = state;\n      const availableItemFlags =\n        items === null ? null : items.map((item) => !item.disabled);\n      Object.assign(effects, { availableItemFlags });\n    }\n\n    return effects;\n  }\n\n  get [template]() {\n    return templateFrom.html`\n      <style>\n        :host {\n          box-sizing: border-box;\n          cursor: default;\n          display: inline-flex;\n          -webkit-tap-highlight-color: transparent;\n          touch-action: manipulation;\n        }\n\n        #content {\n          display: flex;\n          flex: 1;\n          flex-direction: column;\n          max-height: 100%;\n          overflow-x: hidden;\n          overflow-y: auto;\n          -webkit-overflow-scrolling: touch; /* for momentum scrolling */\n        }\n        \n        ::slotted(*) {\n          flex-shrink: 0;\n          outline: none;\n          touch-action: manipulation;\n        }\n\n        ::slotted(option) {\n          font: inherit;\n          min-height: inherit;\n        }\n      </style>\n      <div id=\"content\" role=\"none\">\n        <slot></slot>\n      </div>\n    `;\n  }\n}\n\nexport default Menu;\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { defaultAriaRole } from \"./accessibility.js\";\nimport {\n  defaultState,\n  render,\n  rendering,\n  setState,\n  state,\n} from \"./internal.js\";\n\n/**\n * Tells assistive technologies to describe a list's items as a menu of choices.\n *\n * @module AriaMenuMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function AriaMenuMixin(Base) {\n  // The class prototype added by the mixin.\n  class AriaMenu extends Base {\n    // @ts-ignore\n    get [defaultState]() {\n      const base = super[defaultState];\n      return Object.assign(base, {\n        itemRole: base.itemRole || \"menuitem\",\n        role: base.role || \"menu\",\n      });\n    }\n\n    get itemRole() {\n      return this[state].itemRole;\n    }\n    set itemRole(itemRole) {\n      this[setState]({ itemRole });\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n\n      /** @type {ListItemElement[]} */ const items = this[state].items;\n      if ((changed.items || changed.itemRole) && items) {\n        // Give each item a role.\n        const { itemRole } = this[state];\n        items.forEach((item) => {\n          if (itemRole === defaultAriaRole[item.localName]) {\n            item.removeAttribute(\"role\");\n          } else {\n            item.setAttribute(\"role\", itemRole);\n          }\n        });\n      }\n\n      if (changed.role) {\n        // Apply top-level role.\n        const { role } = this[state];\n        this.setAttribute(\"role\", role);\n      }\n    }\n\n    // Setting the standard role attribute will invoke this property setter,\n    // which will allow us to update our state.\n    get role() {\n      return super.role;\n    }\n    set role(role) {\n      super.role = role;\n      if (!this[rendering]) {\n        this[setState]({ role });\n      }\n    }\n  }\n\n  return AriaMenu;\n}\n","import { booleanAttributeValue } from \"../core/dom.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  goFirst,\n  goLast,\n  goNext,\n  goPrevious,\n  raiseChangeEvents,\n  rendered,\n  setState,\n  state,\n} from \"./internal.js\";\n\n/**\n * Exposes a public API for navigating a cursor over a set of items\n *\n * This mixin expects a component to provide an `items` Array of all elements in\n * the list. This mixin also expects the component to apply\n * [ItemsCursorMixin](ItemsCursorMixin) or otherwise define a compatible\n * `currentIndex` state and other state members for navigating the current item.\n *\n * Given the above, this mixin exposes a consistent public API for reading and\n * manipulating the cursor.\n *\n * @module CursorAPIMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function CursorAPIMixin(Base) {\n  // The class prototype added by the mixin.\n  class CursorAPI extends Base {\n    attributeChangedCallback(name, oldValue, newValue) {\n      if (name === \"current-index\") {\n        this.currentIndex = Number(newValue);\n      } else if (name === \"current-item-required\") {\n        const value = booleanAttributeValue(name, newValue);\n        if (this.currentItemRequired !== value) {\n          this.currentItemRequired = value;\n        }\n      } else if (name === \"cursor-operations-wrap\") {\n        const value = booleanAttributeValue(name, newValue);\n        if (this.cursorOperationsWrap !== value) {\n          this.cursorOperationsWrap = value;\n        }\n      } else {\n        super.attributeChangedCallback(name, oldValue, newValue);\n      }\n    }\n\n    /**\n     * The index of the current item, or -1 if no item is current.\n     *\n     * @type {number}\n     */\n    get currentIndex() {\n      const { items, currentIndex } = this[state];\n      return items && items.length > 0 ? currentIndex : -1;\n    }\n    set currentIndex(currentIndex) {\n      if (!isNaN(currentIndex)) {\n        this[setState]({ currentIndex });\n      }\n    }\n\n    /**\n     * The current item, or null if no item is current.\n     *\n     * @type {Element}\n     */\n    get currentItem() {\n      const { items, currentIndex } = this[state];\n      return items && items[currentIndex];\n    }\n    set currentItem(currentItem) {\n      const { items } = this[state];\n      if (!items) {\n        return;\n      }\n      const currentIndex = items.indexOf(currentItem);\n      this[setState]({ currentIndex });\n    }\n\n    /**\n     * True if the list should always have a current item (if it has items).\n     *\n     * @type {boolean}\n     * @default false\n     */\n    get currentItemRequired() {\n      return this[state].currentItemRequired;\n    }\n    set currentItemRequired(currentItemRequired) {\n      this[setState]({ currentItemRequired });\n    }\n\n    /**\n     * True if cursor operations wrap from last to first, and vice versa.\n     *\n     * @type {boolean}\n     * @default false\n     */\n    get cursorOperationsWrap() {\n      return this[state].cursorOperationsWrap;\n    }\n    set cursorOperationsWrap(cursorOperationsWrap) {\n      this[setState]({ cursorOperationsWrap });\n    }\n\n    /**\n     * Moves to the first item in the list.\n     *\n     * @returns {Boolean} True if the current item changed, false if not.\n     */\n    goFirst() {\n      if (super.goFirst) {\n        super.goFirst();\n      }\n      return this[goFirst]();\n    }\n\n    /**\n     * Move to the last item in the list.\n     *\n     * @returns {Boolean} True if the current item changed\n     */\n    goLast() {\n      if (super.goLast) {\n        super.goLast();\n      }\n      return this[goLast]();\n    }\n\n    /**\n     * Move to the next item in the list.\n     *\n     * If the list has no current item, the first item will become current.\n     *\n     * @returns {Boolean} True if the current item changed\n     */\n    goNext() {\n      if (super.goNext) {\n        super.goNext();\n      }\n      return this[goNext]();\n    }\n\n    /**\n     * Moves to the previous item in the list.\n     *\n     * If the list has no current item, the last item will become current.\n     *\n     * @returns {Boolean} True if the current item changed\n     */\n    goPrevious() {\n      if (super.goPrevious) {\n        super.goPrevious();\n      }\n      return this[goPrevious]();\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n      if (changed.currentIndex && this[raiseChangeEvents]) {\n        const { currentIndex } = this[state];\n        const oldEvent = new CustomEvent(\"current-index-changed\", {\n          bubbles: true,\n          detail: { currentIndex },\n        });\n        this.dispatchEvent(oldEvent);\n        /**\n         * Raised when the `currentIndex` property changes.\n         *\n         * @event currentindexchanged\n         */\n        const event = new CustomEvent(\"currentindexchange\", {\n          bubbles: true,\n          detail: { currentIndex },\n        });\n        this.dispatchEvent(event);\n      }\n    }\n  }\n\n  return CursorAPI;\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { rendered, scrollTarget, state } from \"./internal.js\";\nimport { defaultScrollTarget } from \"./scrolling.js\";\n\n/**\n * Scrolls to ensure the current item is visible\n *\n * When the current item in a list-like component changes, the current item\n * should be brought into view so that the user can confirm their selection.\n *\n * This mixin expects an `items` collection, such as that provided by\n * [ContentItemsMixin](ContentItemsMixin). It also expects a\n * `state.currentItem` member indicating which item is current. You\n * can supply that yourself, or use\n * [ItemsCursorMixin](ItemsCursorMixin).\n *\n * @module CursorInViewMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function CursorInViewMixin(Base) {\n  // The class prototype added by the mixin.\n  class CursorInView extends Base {\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      if (changed.currentItem) {\n        this.scrollCurrentItemIntoView();\n      }\n    }\n\n    /**\n     * Scroll the current item completely into view, minimizing the degree of\n     * scrolling performed.\n     *\n     * Blink has a `scrollIntoViewIfNeeded()` function that does something\n     * similar, but unfortunately it's non-standard, and in any event often ends\n     * up scrolling more than is absolutely necessary.\n     *\n     * This scrolls the containing element defined by the `scrollTarget`\n     * property. By default, it will scroll the element itself.\n     */\n    scrollCurrentItemIntoView() {\n      if (super.scrollCurrentItemIntoView) {\n        super.scrollCurrentItemIntoView();\n      }\n\n      const { currentItem, items } = this[state];\n      if (!currentItem || !items) {\n        return;\n      }\n\n      // Determine the bounds of the scroll target and item. We use\n      // getBoundingClientRect instead of .offsetTop, etc., because the latter\n      // round values, and we want to handle fractional values.\n      const scrollTargetRect = this[scrollTarget].getBoundingClientRect();\n      const itemRect = currentItem.getBoundingClientRect();\n\n      // Determine how far the item is outside the viewport.\n      const bottomDelta = itemRect.bottom - scrollTargetRect.bottom;\n      const leftDelta = itemRect.left - scrollTargetRect.left;\n      const rightDelta = itemRect.right - scrollTargetRect.right;\n      const topDelta = itemRect.top - scrollTargetRect.top;\n\n      // Scroll the target as necessary to bring the item into view.\n      // If an `orientation` state member is defined, only scroll along that\n      // axis. Otherwise, assume the orientation is \"both\".\n      const orientation = this[state].orientation || \"both\";\n      if (orientation === \"horizontal\" || orientation === \"both\") {\n        if (rightDelta > 0) {\n          this[scrollTarget].scrollLeft += rightDelta; // Scroll right\n        } else if (leftDelta < 0) {\n          this[scrollTarget].scrollLeft += Math.ceil(leftDelta); // Scroll left\n        }\n      }\n      if (orientation === \"vertical\" || orientation === \"both\") {\n        if (bottomDelta > 0) {\n          this[scrollTarget].scrollTop += bottomDelta; // Scroll down\n        } else if (topDelta < 0) {\n          this[scrollTarget].scrollTop += Math.ceil(topDelta); // Scroll up\n        }\n      }\n    }\n\n    /**\n     * The element that should be scrolled to get the selected item into view.\n     *\n     * By default, this uses the [defaultScrollTarget](defaultScrollTarget)\n     * helper to find the most likely candidate for scrolling. You can override\n     * this property to directly identify which element should be scrolled.\n     *\n     * See also [scrollTarget](internal#internal.scrollTarget).\n     */\n    get [scrollTarget]() {\n      const base = super[scrollTarget];\n      /** @type {any} */\n      const element = this;\n      return base || defaultScrollTarget(element);\n    }\n  }\n\n  return CursorInView;\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  goDown,\n  goEnd,\n  goFirst,\n  goLast,\n  goLeft,\n  goNext,\n  goPrevious,\n  goRight,\n  goStart,\n  goUp,\n  state,\n  stateEffects,\n} from \"./internal.js\";\n\n/**\n * Maps direction semantics to cursor semantics.\n *\n * This turns a movement in a direction (go left, go right) into a cursor\n * operation (go previous, go next).\n *\n * This mixin can be used in conjunction with\n * [KeyboardDirectionMixin](KeyboardDirectionMixin) (which maps keyboard events\n * to directions) and a mixin that handles cursor operations like\n * [ItemsCursorMixin](ItemsCursorMixin).\n *\n * @module DirectionCursorMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function DirectionCursorMixin(Base) {\n  // The class prototype added by the mixin.\n  class DirectionCursor extends Base {\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        canGoDown: null,\n        canGoLeft: null,\n        canGoRight: null,\n        canGoUp: null,\n      });\n    }\n\n    /**\n     * Interprets `goDown` to mean \"move to the next item\".\n     */\n    [goDown]() {\n      if (super[goDown]) {\n        super[goDown]();\n      }\n      return this[goNext]();\n    }\n\n    /**\n     * Interprets `goEnd` to mean \"move to the last item\".\n     */\n    [goEnd]() {\n      if (super[goEnd]) {\n        super[goEnd]();\n      }\n      return this[goLast]();\n    }\n\n    /**\n     * Interprets `goLeft` to mean \"move to the previous item\".\n     *\n     * If the element has a `rightToLeft` property and it is true, then this\n     * moves to the _next_ item.\n     */\n    [goLeft]() {\n      if (super[goLeft]) {\n        super[goLeft]();\n      }\n      return this[state] && this[state].rightToLeft\n        ? this[goNext]()\n        : this[goPrevious]();\n    }\n\n    /**\n     * Interprets `goRight` to mean \"move to the next item\".\n     *\n     * If the element has a `rightToLeft` property and it is true, then this\n     * moves to the _previous_ item.\n     */\n    [goRight]() {\n      if (super[goRight]) {\n        super[goRight]();\n      }\n      return this[state] && this[state].rightToLeft\n        ? this[goPrevious]()\n        : this[goNext]();\n    }\n\n    /**\n     * Interprets `goStart` to mean \"move to the first item\".\n     */\n    [goStart]() {\n      if (super[goStart]) {\n        super[goStart]();\n      }\n      return this[goFirst]();\n    }\n\n    /**\n     * Interprets `goUp` to mean \"move to the previous item\".\n     */\n    [goUp]() {\n      if (super[goUp]) {\n        super[goUp]();\n      }\n      return this[goPrevious]();\n    }\n\n    [stateEffects](state, changed) {\n      const effects = super[stateEffects]\n        ? super[stateEffects](state, changed)\n        : {};\n\n      // Update computed state members to track whether we can go\n      // down/left/right/up.\n      if (\n        changed.canGoNext ||\n        changed.canGoPrevious ||\n        changed.languageDirection ||\n        changed.orientation ||\n        changed.rightToLeft\n      ) {\n        const { canGoNext, canGoPrevious, orientation, rightToLeft } = state;\n        const horizontal =\n          orientation === \"horizontal\" || orientation === \"both\";\n        const vertical = orientation === \"vertical\" || orientation === \"both\";\n        const canGoDown = vertical && canGoNext;\n        const canGoLeft = !horizontal\n          ? false\n          : rightToLeft\n          ? canGoNext\n          : canGoPrevious;\n        const canGoRight = !horizontal\n          ? false\n          : rightToLeft\n          ? canGoPrevious\n          : canGoNext;\n        const canGoUp = vertical && canGoPrevious;\n        Object.assign(effects, {\n          canGoDown,\n          canGoLeft,\n          canGoRight,\n          canGoUp,\n        });\n      }\n\n      return effects;\n    }\n  }\n\n  return DirectionCursor;\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { firstRender, raiseChangeEvents, rendered, state } from \"./internal.js\";\n\n/**\n * Exposes a public API for the set of items in a list-like element\n *\n * @module ItemsAPIMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function ItemsAPIMixin(Base) {\n  // The class prototype added by the mixin.\n  class ItemsAPI extends Base {\n    /**\n     * The current set of items drawn from the element's current state.\n     *\n     * @type {ListItemElement[]} the element's current items\n     */\n    get items() {\n      return this[state] ? this[state].items : null;\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      // Raise items-changed if items changed after the initial render. We'll\n      // see changed.items on initial render, and raiseChangeEvents will be true\n      // if we're using SlotContentMixin, but we don't want to actually raise\n      // the event then because the items didn't change in response to user\n      // activity.\n      if (!this[firstRender] && changed.items && this[raiseChangeEvents]) {\n        const oldEvent = new CustomEvent(\"items-changed\", {\n          bubbles: true,\n        });\n        this.dispatchEvent(oldEvent);\n        /**\n         * Raised when the `items` property changes.\n         *\n         * @event itemschange\n         */\n        const event = new CustomEvent(\"itemschange\", {\n          bubbles: true,\n        });\n        this.dispatchEvent(event);\n      }\n    }\n  }\n\n  return ItemsAPI;\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { getDefaultText } from \"./content.js\";\nimport { defaultState, getItemText, stateEffects } from \"./internal.js\";\n\n/**\n * Exposes the text content of a list's items as an array of strings.\n *\n * @module ItemsTextMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function ItemsTextMixin(Base) {\n  // The class prototype added by the mixin.\n  class ItemsText extends Base {\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        texts: null,\n      });\n    }\n\n    /**\n     * Extract the text from the given item.\n     *\n     * The default implementation returns an item's `aria-label`, `alt`\n     * attribute, `innerText`, or `textContent`, in that order. You can override\n     * this to return the text that should be used.\n     *\n     * @param {Element} item\n     * @returns {string}\n     */\n    [getItemText](item) {\n      return super[getItemText]\n        ? super[getItemText](item)\n        : getDefaultText(item);\n    }\n\n    [stateEffects](state, changed) {\n      const effects = super[stateEffects]\n        ? super[stateEffects](state, changed)\n        : {};\n\n      // Regenerate texts when items change.\n      if (changed.items) {\n        const { items } = state;\n        const texts = getTextsFromItems(items, this[getItemText]);\n        if (texts) {\n          Object.freeze(texts);\n          Object.assign(effects, { texts });\n        }\n      }\n\n      return effects;\n    }\n  }\n\n  return ItemsText;\n}\n\n/**\n * Extract the text from the given items.\n *\n * @private\n * @param {Element[]} items\n */\nexport function getTextsFromItems(items, getText) {\n  return items ? Array.from(items, (item) => getText(item)) : null;\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  goDown,\n  goEnd,\n  goLeft,\n  goRight,\n  goStart,\n  goUp,\n  keydown,\n  state,\n} from \"./internal.js\";\n\n/**\n * Maps direction keys to direction semantics.\n *\n * This mixin is useful for components that want to map direction keys (Left,\n * Right, etc.) to movement in the indicated direction (go left, go right,\n * etc.).\n *\n * This mixin expects the component to invoke a `keydown` method when a key is\n * pressed. You can use [KeyboardMixin](KeyboardMixin) for that\n * purpose, or wire up your own keyboard handling and call `keydown` yourself.\n *\n * This mixin calls methods such as `goLeft` and `goRight`. You can define\n * what that means by implementing those methods yourself. If you want to use\n * direction keys to navigate a selection, use this mixin with\n * [DirectionCursorMixin](DirectionCursorMixin).\n *\n * If the component defines a property called `orientation`, the value of that\n * property will constrain navigation to the horizontal or vertical axis.\n *\n * @module KeyboardDirectionMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function KeyboardDirectionMixin(Base) {\n  // The class prototype added by the mixin.\n  class KeyboardDirection extends Base {\n    /**\n     * Invoked when the user wants to go/navigate down.\n     * The default implementation of this method does nothing.\n     */\n    [goDown]() {\n      if (super[goDown]) {\n        return super[goDown]();\n      }\n    }\n\n    /**\n     * Invoked when the user wants to go/navigate to the end (e.g., of a list).\n     * The default implementation of this method does nothing.\n     */\n    [goEnd]() {\n      if (super[goEnd]) {\n        return super[goEnd]();\n      }\n    }\n\n    /**\n     * Invoked when the user wants to go/navigate left.\n     * The default implementation of this method does nothing.\n     */\n    [goLeft]() {\n      if (super[goLeft]) {\n        return super[goLeft]();\n      }\n    }\n\n    /**\n     * Invoked when the user wants to go/navigate right.\n     * The default implementation of this method does nothing.\n     */\n    [goRight]() {\n      if (super[goRight]) {\n        return super[goRight]();\n      }\n    }\n\n    /**\n     * Invoked when the user wants to go/navigate to the start (e.g., of a\n     * list). The default implementation of this method does nothing.\n     */\n    [goStart]() {\n      if (super[goStart]) {\n        return super[goStart]();\n      }\n    }\n\n    /**\n     * Invoked when the user wants to go/navigate up.\n     * The default implementation of this method does nothing.\n     */\n    [goUp]() {\n      if (super[goUp]) {\n        return super[goUp]();\n      }\n    }\n\n    [keydown](/** @type {KeyboardEvent} */ event) {\n      let handled = false;\n\n      // Direction keys generally are low-priority keys: if a shadow element\n      // like an input has focus, we want to let that focused element handle\n      // direction keys. So we only handle the event if we're the target.\n      //\n      // (We'd really like to be able to provide direction key handling as a\n      // default  i.e., if the focused element doesn't handle a key, then we\n      // would handle it here. Unfortunately, there doesn't seem to be any\n      // general way for us to do that.)\n      if (event.target === this) {\n        // Respect orientation state if defined, otherwise assume \"both\".\n        const orientation = this[state].orientation || \"both\";\n        const horizontal =\n          orientation === \"horizontal\" || orientation === \"both\";\n        const vertical = orientation === \"vertical\" || orientation === \"both\";\n\n        // Ignore Left/Right keys when metaKey or altKey modifier is also pressed,\n        // as the user may be trying to navigate back or forward in the browser.\n        switch (event.key) {\n          case \"ArrowDown\":\n            if (vertical) {\n              handled = event.altKey ? this[goEnd]() : this[goDown]();\n            }\n            break;\n\n          case \"ArrowLeft\":\n            if (horizontal && !event.metaKey && !event.altKey) {\n              handled = this[goLeft]();\n            }\n            break;\n\n          case \"ArrowRight\":\n            if (horizontal && !event.metaKey && !event.altKey) {\n              handled = this[goRight]();\n            }\n            break;\n\n          case \"ArrowUp\":\n            if (vertical) {\n              handled = event.altKey ? this[goStart]() : this[goUp]();\n            }\n            break;\n\n          case \"End\":\n            handled = this[goEnd]();\n            break;\n\n          case \"Home\":\n            handled = this[goStart]();\n            break;\n        }\n      }\n\n      // Prefer mixin result if it's defined, otherwise use base result.\n      return handled || (super[keydown] && super[keydown](event)) || false;\n    }\n  }\n\n  return KeyboardDirection;\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport ContentItemsMixin from \"./ContentItemsMixin.js\";\nimport SlotContentMixin from \"./SlotContentMixin.js\";\n\n/**\n * Treats the elements assigned to the default slot as list items\n *\n * This is simply a combination of\n * [ContentItemsMixin](ContentItemsMixin) and\n * [SlotContentMixin](SlotContentMixin).\n *\n * @module SlotItemsMixin\n * @mixes ContentItemsMixin\n * @mixes SlotContentMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function SlotItemsMixin(Base) {\n  return ContentItemsMixin(SlotContentMixin(Base));\n}\n","import { indexOfItemContainingTarget } from \"../core/dom.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  firstRender,\n  raiseChangeEvents,\n  render,\n  setState,\n  state,\n  tap,\n} from \"./internal.js\";\n\n/**\n * A tap/mousedown on a list item makes that item current.\n *\n * This simple mixin is useful in list-like elements like [ListBox](ListBox),\n * where a tap/mousedown on a list item implicitly selects it.\n *\n * The standard use for this mixin is in list-like elements. Native list\n * boxes don't appear to be consistent with regard to whether they select\n * on mousedown or click/mouseup. This mixin assumes the use of mousedown.\n * On touch devices, that event appears to trigger when the touch is *released*.\n *\n * This mixin only listens to mousedown events for the primary mouse button\n * (typically the left button). Right clicks are ignored so that the browser may\n * display a context menu.\n *\n * This mixin expects the component to provide an `state.items` member. It also\n * expects the component to define a `state.currentIndex` member; you can\n * provide that yourself, or use [ItemsCursorMixin](ItemsCursorMixin).\n *\n * If the component receives an event that doesn't correspond to an item (e.g.,\n * the user taps on the element background visible between items), the cursor\n * will be removed. However, if the component sets `state.currentItemRequired` to\n * true, a background tap will *not* remove the cursor.\n *\n * @module TapCursorMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function TapCursorMixin(Base) {\n  // The class prototype added by the mixin.\n  return class TapCursor extends Base {\n    constructor() {\n      // @ts-ignore\n      super();\n      this.addEventListener(\"mousedown\", (event) => {\n        // Only process events for the main (usually left) button.\n        if (event.button !== 0) {\n          return;\n        }\n        this[raiseChangeEvents] = true;\n        this[tap](event);\n        this[raiseChangeEvents] = false;\n      });\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n      if (this[firstRender]) {\n        Object.assign(this.style, {\n          touchAction: \"manipulation\", // for iOS Safari\n          mozUserSelect: \"none\",\n          msUserSelect: \"none\",\n          webkitUserSelect: \"none\",\n          userSelect: \"none\",\n        });\n      }\n    }\n\n    [tap](/** @type {MouseEvent} */ event) {\n      // In some situations, the event target will not be the child which was\n      // originally clicked on. E.g., if the item clicked on is a button, the\n      // event seems to be raised in phase 2 (AT_TARGET)  but the event target\n      // will be the component, not the item that was clicked on. Instead of\n      // using the event target, we get the first node in the event's composed\n      // path.\n      // @ts-ignore\n      const target = event.composedPath\n        ? event.composedPath()[0]\n        : event.target;\n\n      // Find which item was clicked on and, if found, make it current. Ignore\n      // clicks on disabled items.\n      //\n      // For elements which don't require a cursor, a background click will\n      // determine the item was null, in which we case we'll remove the cursor.\n      const { items, currentItemRequired } = this[state];\n      if (items && target instanceof Node) {\n        const targetIndex = indexOfItemContainingTarget(items, target);\n        const item = targetIndex >= 0 ? items[targetIndex] : null;\n        if ((item && !item.disabled) || (!item && !currentItemRequired)) {\n          this[setState]({\n            currentIndex: targetIndex,\n          });\n          event.stopPropagation();\n        }\n      }\n    }\n  };\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  ids,\n  raiseChangeEvents,\n  rendered,\n  setState,\n  shadowRoot,\n  state,\n  stateEffects,\n} from \"./internal.js\";\n\nconst documentMouseupListenerKey = Symbol(\"documentMouseupListener\");\n\n/**\n * Add drag-select behavior to an element with a popup.\n *\n * This allows a user to mouse down on a popup source, drag into the resulting\n * popup, and release the mouse to select something in the popup. This can be\n * used in conjunction with [PopupListMixin](PopupListMixin).\n *\n * @module PopupDragSelectMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function PopupDragSelectMixin(Base) {\n  // The class prototype added by the mixin.\n  class PopupDragSelect extends Base {\n    connectedCallback() {\n      super.connectedCallback();\n      // Handle edge case where component is opened, removed, then added back.\n      listenIfOpenAndConnected(this);\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        dragSelect: true,\n      });\n    }\n\n    disconnectedCallback() {\n      if (super.disconnectedCallback) {\n        super.disconnectedCallback();\n      }\n      listenIfOpenAndConnected(this);\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      super[rendered](changed);\n\n      if (changed.opened) {\n        listenIfOpenAndConnected(this);\n      }\n    }\n\n    [stateEffects](state, changed) {\n      const effects = super[stateEffects](state, changed);\n\n      // Set things when opening, or reset things when closing.\n      if (changed.opened) {\n        if (state.opened) {\n          // Opening\n          Object.assign(effects, {\n            // Until we get a mouseup, we're doing a drag-select.\n            dragSelect: true,\n          });\n        }\n      }\n\n      return effects;\n    }\n  }\n\n  return PopupDragSelect;\n}\n\nasync function handleMouseup(/** @type {MouseEvent} */ event) {\n  // @ts-ignore\n  const element = this;\n  const hitTargets = element[shadowRoot].elementsFromPoint(\n    event.clientX,\n    event.clientY\n  );\n  if (element.opened) {\n    // Was mouseup over source part?\n    const overSource = hitTargets.indexOf(element[ids].source) >= 0;\n\n    // Was mouseup over the popup or popup frame?\n    const popup = element[ids].popup;\n    const overPopup = hitTargets.indexOf(popup) >= 0;\n    const overPopupFrame = popup.frame && hitTargets.indexOf(popup.frame) >= 0;\n\n    if (overSource) {\n      // User released the mouse over the source button (behind the\n      // backdrop), so we're no longer doing a drag-select.\n      if (element[state].dragSelect) {\n        element[raiseChangeEvents] = true;\n        element[setState]({\n          dragSelect: false,\n        });\n        element[raiseChangeEvents] = false;\n      }\n    } else if (!(overPopup || overPopupFrame)) {\n      // If we get to this point, the user released over the backdrop with\n      // the popup open, so close.\n      element[raiseChangeEvents] = true;\n      await element.close();\n      element[raiseChangeEvents] = false;\n    }\n  }\n}\n\nfunction listenIfOpenAndConnected(element) {\n  if (element[state].opened && element.isConnected) {\n    // If the popup is open and user releases the mouse over the backdrop, we\n    // want to close the popup. We need to listen to mouseup on the document,\n    // not this element. If the user mouses down on the source, then moves the\n    // mouse off the document before releasing the mouse, the element itself\n    // won't get the mouseup. The document will, however, so it's a more\n    // reliable source of mouse state.\n    //\n    // Coincidentally, we *also* need to listen to mouseup on the document to\n    // tell whether the user released the mouse over the source button. When the\n    // user mouses down, the backdrop will appear and cover the source, so from\n    // that point on the source won't receive a mouseup event. Again, we can\n    // listen to mouseup on the document and do our own hit-testing to see if\n    // the user released the mouse over the source.\n    if (!element[documentMouseupListenerKey]) {\n      // Not listening yet; start.\n      element[documentMouseupListenerKey] = handleMouseup.bind(element);\n      document.addEventListener(\"mouseup\", element[documentMouseupListenerKey]);\n    }\n  } else if (element[documentMouseupListenerKey]) {\n    // Currently listening; stop.\n    document.removeEventListener(\n      \"mouseup\",\n      element[documentMouseupListenerKey]\n    );\n    element[documentMouseupListenerKey] = null;\n  }\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  raiseChangeEvents,\n  rendered,\n  setState,\n  state,\n} from \"./internal.js\";\n\n/**\n * Tracks the disabled state of a component that can be disabled\n *\n * @module DisabledMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function DisabledMixin(Base) {\n  // The class prototype added by the mixin.\n  class Disabled extends Base {\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        disabled: false,\n      });\n    }\n\n    /**\n     * True if the component is disabled, false (the default) if not.\n     *\n     * The value of this property will be reflected to the `disabled` attribute\n     * so that it can be referenced in CSS. Note that this non-native\n     * implementation of the `disabled` attribute will *not* trigger the\n     * `:disabled` CSS pseudo-class, so your style rules will have to reference\n     * the presence or absence of the `disabled` attribute. That is, instead\n     * of writing\n     *\n     *     my-component:disabled { ... }\n     *\n     * write this instead\n     *\n     *     my-component[disabled] { ... }\n     *\n     * Like the native `disabled` attribute, this attribute is boolean. That\n     * means that it's *existence* in markup sets the attribute, even if set to\n     * an empty string or a string like \"false\".\n     *\n     * @type {boolean}\n     * @default false\n     */\n    get disabled() {\n      return this[state].disabled;\n    }\n    // AttributeMarshallingMixin should parse this as a boolean attribute for us.\n    set disabled(disabled) {\n      this[setState]({ disabled });\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      if (changed.disabled) {\n        // Reflect value of disabled property to the corresponding attribute.\n        this.toggleAttribute(\"disabled\", this.disabled);\n\n        if (this[raiseChangeEvents]) {\n          const oldEvent = new CustomEvent(\"disabled-changed\", {\n            bubbles: true,\n          });\n          this.dispatchEvent(oldEvent);\n          /**\n           * Raised when the `disabled` property changes.\n           *\n           * @event disabledchange\n           */\n          const event = new CustomEvent(\"disabledchange\", {\n            bubbles: true,\n          });\n          this.dispatchEvent(event);\n        }\n      }\n    }\n  }\n\n  return Disabled;\n}\n","/**\n * Function for positioning a popup relative to a source element.\n *\n * @module positionPopup\n */\n\n/**\n * Given an (x, y) origin point, a bounding rectangle, and a layout, return the\n * height and width of the available space in the quadrant used by that layout.\n *\n * @private\n * @param {DOMRect} sourceRect\n * @param {DOMRect} boundsRect\n */\nfunction availableSpace(sourceRect, boundsRect, direction, align) {\n  const sourceOrigin = getSourceOrigin(sourceRect, direction, align);\n\n  let height = 0;\n  let width = 0;\n  const vertical = direction === \"above\" || direction === \"below\";\n  switch (direction) {\n    case \"above\":\n      height = sourceOrigin.y - boundsRect.top;\n      break;\n    case \"below\":\n      height = boundsRect.bottom - sourceOrigin.y;\n      break;\n    case \"left\":\n      width = sourceOrigin.x - boundsRect.left;\n      break;\n    case \"right\":\n      width = boundsRect.right - sourceOrigin.x;\n      break;\n  }\n  switch (align) {\n    case \"bottom\":\n      height = sourceOrigin.y - boundsRect.top;\n      break;\n    case \"center\":\n      if (vertical) {\n        width = boundsRect.width;\n      } else {\n        height = boundsRect.height;\n      }\n      break;\n    case \"stretch\":\n      if (vertical) {\n        width = sourceRect.width;\n      } else {\n        height = sourceRect.height;\n      }\n      break;\n    case \"left\":\n      width = boundsRect.right - sourceOrigin.x;\n      break;\n    case \"right\":\n      width = sourceOrigin.x - boundsRect.left;\n      break;\n    case \"top\":\n      height = boundsRect.bottom - sourceOrigin.y;\n      break;\n  }\n  height = Math.max(0, height);\n  width = Math.max(0, width);\n  return { height, width };\n}\n\n/**\n * Given two layouts, return -1 if the first is better, 1 if the second is\n * better, and 0 if they're equally good.\n *\n * Our comparison uses a heuristic that looks to see whether a layout can fit\n * the popup in height, width, or both. A layout is best if it fits both height\n * and width. If each layout only fits one dimension, then the layout that gives\n * the popup more space is preferred.\n *\n * @private\n * @param {DOMRect} sourceRect\n * @param {DOMRect} popupRect\n * @param {DOMRect} boundsRect\n */\nfunction compareLayouts(layout1, layout2, sourceRect, popupRect, boundsRect) {\n  const space1 = availableSpace(\n    sourceRect,\n    boundsRect,\n    layout1.direction,\n    layout1.align\n  );\n  const space2 = availableSpace(\n    sourceRect,\n    boundsRect,\n    layout2.direction,\n    layout2.align\n  );\n  const fitsWidth1 = popupRect.width <= space1.width;\n  const fitsHeight1 = popupRect.height <= space1.height;\n  const fitsEither1 = fitsWidth1 || fitsHeight1;\n  const fitsBoth1 = fitsWidth1 && fitsHeight1;\n  const fitsWidth2 = popupRect.width <= space2.width;\n  const fitsHeight2 = popupRect.height <= space2.height;\n  const fitsEither2 = fitsWidth2 || fitsHeight2;\n  const fitsBoth2 = fitsWidth2 && fitsHeight2;\n  const area1 = space1.width * space1.height;\n  const area2 = space2.width * space2.height;\n  if (fitsBoth1 && fitsBoth2) {\n    // Both layouts can fit in both dimensions; they're equally good.\n    return 0;\n  } else if (fitsBoth1) {\n    // Layout 1 has space for popup in both dimensions.\n    return -1;\n  } else if (fitsBoth2) {\n    // Layout 2 has space for popup in both dimensions.\n    return 1;\n  } else if (fitsEither1 && !fitsEither2) {\n    // Layout 1 fits in one dimension, layout 2 doesn't fit either.\n    return -1;\n  } else if (fitsEither2 && !fitsEither1) {\n    // Layout 2 fits in one dimensions, layout 1 doesn't fit either.\n    return 1;\n  } else if (fitsEither1 && area1 > area2) {\n    // Layout 1 fits in one dimension and gives popup more space.\n    return -1;\n  } else if (fitsEither2 && area2 > area1) {\n    // Layout 2 fits in one dimension and gives popup more space.\n    return 1;\n  } else if (area1 > area2) {\n    // Layout 1 gives popup more space.\n    return -1;\n  } else if (area2 > area1) {\n    // Layout 2 gives popup more space.\n    return 1;\n  } else {\n    // Layouts equally good or bad.\n    return 0;\n  }\n}\n\n/**\n * Determine the (x, y) location at which the popup should be positioned to\n * touch the indicated source origin point.\n *\n * @private\n * @param {DOMRect} sourceRect\n * @param {DOMRect} popupRect\n * @param {DOMRect} boundsRect\n */\nfunction getPositionedRect(\n  sourceRect,\n  popupRect,\n  boundsRect,\n  direction,\n  align\n) {\n  // With respect to which point on the source will we position the popup?\n  const sourceOrigin = getSourceOrigin(sourceRect, direction, align);\n\n  // We'll adjust our bounds depending upon the layout.\n  let {\n    x: boundsLeft,\n    y: boundsTop,\n    bottom: boundsBottom,\n    right: boundsRight,\n  } = boundsRect;\n\n  let x = 0;\n  let y = 0;\n  let height = popupRect.height;\n  let width = popupRect.width;\n  const vertical = direction === \"above\" || direction === \"below\";\n  switch (direction) {\n    case \"above\":\n      y = sourceOrigin.y - popupRect.height;\n      boundsBottom = sourceOrigin.y;\n      break;\n    case \"below\":\n      y = sourceOrigin.y;\n      boundsTop = sourceOrigin.y;\n      break;\n    case \"left\":\n      x = sourceOrigin.x - popupRect.width;\n      boundsRight = sourceOrigin.x;\n      break;\n    case \"right\":\n      x = sourceOrigin.x;\n      boundsLeft = sourceOrigin.x;\n      break;\n  }\n  switch (align) {\n    case \"bottom\":\n      y = sourceOrigin.y - popupRect.height;\n      boundsBottom = sourceOrigin.y;\n      break;\n    case \"left\":\n      x = sourceOrigin.x;\n      boundsLeft = sourceOrigin.x;\n      break;\n    case \"center\":\n      if (vertical) {\n        x = sourceOrigin.x - popupRect.width / 2;\n      } else {\n        y = sourceOrigin.y - popupRect.height / 2;\n      }\n      break;\n    case \"right\":\n      x = sourceOrigin.x - popupRect.width;\n      boundsRight = sourceOrigin.x;\n      break;\n    case \"stretch\":\n      if (vertical) {\n        x = sourceOrigin.x;\n        width = sourceRect.width;\n      } else {\n        y = sourceOrigin.y;\n        height = sourceRect.height;\n      }\n      break;\n    case \"top\":\n      y = sourceOrigin.y;\n      boundsTop = sourceOrigin.y;\n      break;\n  }\n\n  // Force the desired rectangle to fit within the bounds.\n  x = Math.max(x, boundsLeft);\n  y = Math.max(y, boundsTop);\n  width = Math.min(width, boundsRight - x);\n  height = Math.min(height, boundsBottom - y);\n\n  return new DOMRect(x, y, width, height);\n}\n\n/**\n * For a given layout, we will use a different point on the source element as a\n * reference point to position the popup. Return that (x, y) point.\n *\n * @private\n * @param {DOMRect} sourceRect\n */\nfunction getSourceOrigin(sourceRect, direction, align) {\n  let x = 0;\n  let y = 0;\n  const vertical = direction === \"above\" || direction === \"below\";\n  switch (direction) {\n    case \"above\":\n      y = sourceRect.top;\n      break;\n    case \"below\":\n      y = sourceRect.bottom;\n      break;\n    case \"left\":\n    case \"right\":\n      x = sourceRect[direction];\n      break;\n  }\n  switch (align) {\n    case \"bottom\":\n    case \"top\":\n      y = sourceRect[align];\n      break;\n    case \"left\":\n    case \"right\":\n      x = sourceRect[align];\n      break;\n    case \"center\":\n      if (vertical) {\n        x = sourceRect.left + sourceRect.width / 2;\n      } else {\n        y = sourceRect.top + sourceRect.height / 2;\n      }\n      break;\n    case \"stretch\":\n      if (vertical) {\n        x = sourceRect.left;\n      } else {\n        y = sourceRect.top;\n      }\n      break;\n  }\n  return { x, y };\n}\n\n/**\n * Return the optimum layout for the popup element with respect to a source\n * element that fits in the given bounds.\n *\n * @param {DOMRect} sourceRect\n * @param {DOMRect} popupRect\n * @param {DOMRect} boundsRect\n * @param {any} options\n */\nexport default function layoutPopup(\n  sourceRect,\n  popupRect,\n  boundsRect,\n  options\n) {\n  const normalized = normalizeOptions(options);\n\n  // Given the direction and alignment, which layouts do we want to consider?\n  const layouts = prioritizedLayouts(normalized.direction, normalized.align);\n\n  // Sort layouts by our heuristic.\n  layouts.sort((layout1, layout2) =>\n    compareLayouts(layout1, layout2, sourceRect, popupRect, boundsRect)\n  );\n\n  // Take the best layout.\n  const layout = layouts[0];\n\n  // Find the positioned rect with respect to the source origin.\n  layout.rect = getPositionedRect(\n    sourceRect,\n    popupRect,\n    boundsRect,\n    layout.direction,\n    layout.align\n  );\n\n  return layout;\n}\n\n// Normalize the popup options. Convert any logical layout options (start, end)\n// to physical options (e.g., left, right). Replace any unknown option values\n// with defaults.\nfunction normalizeOptions(options) {\n  const {\n    align: logicalAlign,\n    direction: logicalDirection,\n    rightToLeft,\n  } = options;\n  const defaultDirection = \"below\";\n  const physicalDirection =\n    {\n      above: \"above\",\n      below: \"below\",\n      column: \"below\",\n      \"column-reverse\": \"above\",\n      left: \"left\",\n      right: \"right\",\n      row: rightToLeft ? \"left\" : \"right\",\n      \"row-reverse\": rightToLeft ? \"right\" : \"left\",\n    }[logicalDirection] || defaultDirection;\n  const crossAxis = {\n    above: \"horizontal\",\n    below: \"horizontal\",\n    left: \"vertical\",\n    right: \"vertical\",\n  }[physicalDirection];\n  const defaultAlign = {\n    horizontal: \"left\",\n    vertical: \"top\",\n  }[crossAxis];\n  const physicalAlign =\n    {\n      horizontal: {\n        center: \"center\",\n        end: rightToLeft ? \"left\" : \"right\",\n        left: \"left\",\n        right: \"right\",\n        start: rightToLeft ? \"right\" : \"left\",\n        stretch: \"stretch\",\n      },\n      vertical: {\n        bottom: \"bottom\",\n        center: \"center\",\n        end: \"bottom\",\n        start: \"top\",\n        stretch: \"stretch\",\n        top: \"top\",\n      },\n    }[crossAxis][logicalAlign] || defaultAlign;\n  return {\n    align: physicalAlign,\n    direction: physicalDirection,\n    rightToLeft,\n  };\n}\n\n// Given a preferred direction and alignment, determine the set of 2 or 4 layout\n// alternatives that should be considered, in priority order.\nfunction prioritizedLayouts(preferredDirection, preferredAlign) {\n  const flipDirection = {\n    above: \"below\",\n    below: \"above\",\n    left: \"right\",\n    right: \"left\",\n  };\n  const flipAlign = {\n    top: \"bottom\",\n    bottom: \"top\",\n    left: \"right\",\n    right: \"left\",\n  };\n\n  // Our first choice of layout will be the preferred options.\n  const possibilties = [\n    { align: preferredAlign, direction: preferredDirection },\n  ];\n\n  if (preferredAlign === \"center\" || preferredAlign === \"stretch\") {\n    // Center/stretch align only needs to consider flipping over main axis.\n    possibilties.push({\n      align: preferredAlign,\n      direction: flipDirection[preferredDirection],\n    });\n  } else {\n    // Consider possibilities of flipping on either axis or both.\n    possibilties.push({\n      align: flipAlign[preferredAlign],\n      direction: preferredDirection,\n    });\n    possibilties.push({\n      align: preferredAlign,\n      direction: flipDirection[preferredDirection],\n    });\n    possibilties.push({\n      align: flipAlign[preferredAlign],\n      direction: flipDirection[preferredDirection],\n    });\n  }\n\n  return possibilties;\n}\n","import { deepContains, ownEvent } from \"../core/dom.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  firstRender,\n  keydown,\n  raiseChangeEvents,\n  render,\n  rendered,\n  rendering,\n  setState,\n  state,\n} from \"./internal.js\";\n\n/** @type {any} */\nconst implicitCloseListenerKey = Symbol(\"implicitCloseListener\");\n\n/**\n * Gives an overlay lightweight popup-style behavior.\n *\n * This mixin expects the component to provide:\n *\n * * An open/close API compatible with `OpenCloseMixin`.\n *\n * The mixin provides these features to the component:\n *\n * * Event handlers that close the element presses the Esc key, moves the focus\n *   outside the element, scrolls the document, resizes the document, or\n *   switches focus away from the document.\n * * A default ARIA role of `alert`.\n *\n * For modal overlays, use `DialogModalityMixin` instead. See the documentation\n * of that mixin for a comparison of modality behaviors.\n *\n * @module PopupModalityMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function PopupModalityMixin(Base) {\n  // The class prototype added by the mixin.\n  class PopupModality extends Base {\n    /**\n     * True if the popup should close if the user resizes the window.\n     *\n     * @type {boolean}\n     * @default true\n     */\n    get closeOnWindowResize() {\n      return this[state].closeOnWindowResize;\n    }\n    set closeOnWindowResize(closeOnWindowResize) {\n      this[setState]({ closeOnWindowResize });\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        closeOnWindowResize: true,\n        role: \"alert\",\n      });\n    }\n\n    // Close on Esc key.\n    [keydown](/** @type {KeyboardEvent} */ event) {\n      let handled = false;\n\n      switch (event.key) {\n        case \"Escape\":\n          this.close({\n            canceled: \"Escape\",\n          });\n          handled = true;\n          break;\n      }\n\n      // Prefer mixin result if it's defined, otherwise use base result.\n      return handled || (super.keydown && super.keydown(event)) || false;\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n\n      if (this[firstRender]) {\n        // If we lose focus, and the new focus isn't inside us, then close.\n        this.addEventListener(\"blur\", blurHandler.bind(this));\n      }\n\n      if (changed.role) {\n        // Apply top-level role.\n        const { role } = this[state];\n        this.setAttribute(\"role\", role);\n      }\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      if (changed.opened) {\n        if (this.opened) {\n          // Wait before wiring up events  if the popup was opened because the\n          // user clicked something, that opening click event may still be\n          // bubbling up, and we only want to start listening after it's been\n          // processed. Alternatively, if the popup caused the page to scroll, we\n          // don't want to immediately close because the page scrolled (only if\n          // the user scrolls).\n          const callback =\n            \"requestIdleCallback\" in window\n              ? window[\"requestIdleCallback\"]\n              : setTimeout;\n          callback(() => {\n            // It's conceivable the popup was closed before the timeout completed,\n            // so double-check that it's still opened before listening to events.\n            if (this.opened) {\n              addEventListeners(this);\n            }\n          });\n        } else {\n          removeEventListeners(this);\n        }\n      }\n    }\n\n    // Setting the standard role attribute will invoke this property setter,\n    // which will allow us to update our state.\n    get role() {\n      return super.role;\n    }\n    set role(role) {\n      super.role = role;\n      if (!this[rendering]) {\n        this[setState]({ role });\n      }\n    }\n  }\n\n  return PopupModality;\n}\n\nfunction addEventListeners(/** @type {ReactiveElement} */ element) {\n  // Close handlers for window events.\n  element[implicitCloseListenerKey] = closeHandler.bind(element);\n\n  // Window blur event tracks loss of focus of *window*, not just element.\n  window.addEventListener(\"blur\", element[implicitCloseListenerKey]);\n  window.addEventListener(\"resize\", element[implicitCloseListenerKey]);\n  window.addEventListener(\"scroll\", element[implicitCloseListenerKey]);\n}\n\nfunction removeEventListeners(/** @type {ReactiveElement} */ element) {\n  if (element[implicitCloseListenerKey]) {\n    window.removeEventListener(\"blur\", element[implicitCloseListenerKey]);\n    window.removeEventListener(\"resize\", element[implicitCloseListenerKey]);\n    window.removeEventListener(\"scroll\", element[implicitCloseListenerKey]);\n    element[implicitCloseListenerKey] = null;\n  }\n}\n\n// Note: This routine also exists in PopupButton, may want to eventually\n// share that. Note that PopupButton handles blur on the *button*; here\n// we're dealing with the popup.\nasync function blurHandler(/** @type {Event} */ event) {\n  // @ts-ignore\n  /** @type {any} */ const element = this;\n  // What has the focus now?\n  const newFocusedElement =\n    /** @type {any} */ (event).relatedTarget || document.activeElement;\n  /** @type {any} */\n  if (\n    newFocusedElement instanceof Element &&\n    !deepContains(element, newFocusedElement)\n  ) {\n    element[raiseChangeEvents] = true;\n    await element.close({ canceled: \"window blur\" });\n    element[raiseChangeEvents] = false;\n  }\n}\n\nasync function closeHandler(/** @type {Event} */ event) {\n  // @ts-ignore\n  /** @type {any} */ const element = this;\n  const handleEvent =\n    event.type !== \"resize\" || element[state].closeOnWindowResize;\n  if (!ownEvent(element, event) && handleEvent) {\n    element[raiseChangeEvents] = true;\n    await element.close({\n      canceled: `window ${event.type}`,\n    });\n    element[raiseChangeEvents] = false;\n  }\n}\n","import { ids, raiseChangeEvents, render } from \"./internal.js\";\nimport KeyboardMixin from \"./KeyboardMixin.js\";\nimport Overlay from \"./Overlay.js\";\nimport PopupModalityMixin from \"./PopupModalityMixin.js\";\n\nconst Base = KeyboardMixin(PopupModalityMixin(Overlay));\n\n/**\n * Lightweight form of modeless overlay that can be easily dismissed\n *\n * When opened, the popup displays its children on top of other page elements.\n *\n * @inherits Overlay\n * @mixes KeyboardMixin\n * @mixes PopupModalityMixin\n */\nclass Popup extends Base {\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n    if (changed.backdropPartType) {\n      this[ids].backdrop.addEventListener(\n        \"mousedown\",\n        mousedownHandler.bind(this)\n      );\n\n      // Mobile Safari doesn't seem to generate a mousedown handler on the\n      // backdrop in some cases that Mobile Chrome handles. For completeness, we\n      // also listen to touchend.\n      if (!(\"PointerEvent\" in window)) {\n        this[ids].backdrop.addEventListener(\"touchend\", mousedownHandler);\n      }\n    }\n  }\n}\n\n/**\n * @private\n * @param {Event} event\n */\nasync function mousedownHandler(event) {\n  // @ts-ignore\n  const element = this;\n  element[raiseChangeEvents] = true;\n  await element.close({\n    canceled: \"mousedown outside\",\n  });\n  element[raiseChangeEvents] = false;\n  event.preventDefault();\n  event.stopPropagation();\n}\n\nexport default Popup;\n","import { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\";\nimport { transmute } from \"../core/template.js\";\nimport DisabledMixin from \"./DisabledMixin.js\";\nimport FocusVisibleMixin from \"./FocusVisibleMixin.js\";\nimport {\n  defaultState,\n  firstRender,\n  ids,\n  inputDelegate,\n  raiseChangeEvents,\n  render,\n  rendered,\n  setState,\n  shadowRoot,\n  state,\n  stateEffects,\n  template,\n} from \"./internal.js\";\nimport LanguageDirectionMixin from \"./LanguageDirectionMixin.js\";\nimport layoutPopup from \"./layoutPopup.js\";\nimport OpenCloseMixin from \"./OpenCloseMixin.js\";\nimport Popup from \"./Popup.js\";\n\nconst resizeListenerKey = Symbol(\"resizeListener\");\n\nconst Base = DisabledMixin(\n  FocusVisibleMixin(LanguageDirectionMixin(OpenCloseMixin(ReactiveElement)))\n);\n\n/**\n * Positions a popup with respect to a source element\n *\n * @inherits ReactiveElement\n * @mixes DisabledMixin\n * @mixes FocusVisibleMixin\n * @mixes OpenCloseMixin\n * @part {Popup} popup - the popup element\n * @part {button} source - the element used as the reference point for positioning the popup, generally the element that invokes the popup\n */\nclass PopupSource extends Base {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      ariaHasPopup: \"true\",\n      popupAlign: \"start\",\n      popupDirection: \"column\",\n      popupLayout: null,\n      popupPartType: Popup,\n      sourcePartType: \"div\",\n    });\n  }\n\n  // By default, assume that the source part is an input-like element that will\n  // get the foucs.\n  get [inputDelegate]() {\n    return this[ids].source;\n  }\n\n  get frame() {\n    return /** @type {any} */ (this[ids].popup).frame;\n  }\n\n  // TODO: Remove this deprecated property.\n  get horizontalAlign() {\n    return this[state].popupAlign;\n  }\n  set horizontalAlign(horizontalAlign) {\n    console.warn(\n      `The \"horizontalAlign\" property has been renamed to \"popupAlign\"; the \"horizontal-align\" attribute is now \"popup-align\".`\n    );\n    this[setState]({ popupAlign: horizontalAlign });\n  }\n\n  /**\n   * The alignment of the popup with respect to the source button.\n   *\n   * * `bottom`: popup and source are bottom-aligned\n   * * `end`: popup and source are aligned on the trailing edge according to the\n   *   text direction\n   * * `left`: popup and source are left-aligned\n   * * `right`: popup and source are right-aligned\n   * * `start`: popup and source are aligned on the leading edge according to\n   *   the text direction\n   * * `stretch`: both left and right edges are aligned\n   * * `top`: popup and source are top-aligned\n   *\n   * @type {('bottom'|'end'|'left'|'right'|'start'|'stretch'|'top')}\n   * @default 'start'\n   */\n  get popupAlign() {\n    return this[state].popupAlign;\n  }\n  set popupAlign(popupAlign) {\n    this[setState]({ popupAlign });\n  }\n\n  /**\n   * The preferred direction for the popup.\n   *\n   * * `above`: popup appears above the source\n   * * `below`: popup appears below the source\n   * * `column-reverse`: popup appears before the source in the block axis\n   * * `column`: popup appears after the source in the block axis\n   * * `left`: popup appears to the left of the source\n   * * `right`: popup appears to the right of the source\n   * * `row-reverse`: popup appears before the source in the inline axis\n   * * `row`: popup appears after the source in the inline axis\n   *\n   * @type {('above'|'below'|'column-reverse'|'column'|'left'|'right'|'row-reverse'|'row')}\n   * @default 'column'\n   */\n  get popupDirection() {\n    return this[state].popupDirection;\n  }\n  set popupDirection(popupDirection) {\n    this[setState]({ popupDirection });\n  }\n\n  // TODO: Remove this deprecated property.\n  get popupPosition() {\n    return this[state].popupPosition;\n  }\n  set popupPosition(popupPosition) {\n    console.warn(\n      `The \"popupPosition\" property has been renamed to \"popupDirection\"; the \"popup-position\" attribute is now \"popup-direction\".`\n    );\n    this[setState]({ popupPosition });\n  }\n\n  /**\n   * The class or tag used to create the `popup` part  the element\n   * responsible for displaying the popup and handling overlay behavior.\n   *\n   * @type {PartDescriptor}\n   * @default Popup\n   */\n  get popupPartType() {\n    return this[state].popupPartType;\n  }\n  set popupPartType(popupPartType) {\n    this[setState]({ popupPartType });\n  }\n\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n\n    renderParts(this[shadowRoot], this[state], changed);\n\n    if (this[firstRender] || changed.ariaHasPopup) {\n      const { ariaHasPopup } = this[state];\n      if (ariaHasPopup === null) {\n        this[inputDelegate].removeAttribute(\"aria-haspopup\");\n      } else {\n        this[inputDelegate].setAttribute(\n          \"aria-haspopup\",\n          this[state].ariaHasPopup\n        );\n      }\n    }\n\n    if (changed.popupPartType) {\n      // Popup's opened state becomes our own opened state.\n      this[ids].popup.addEventListener(\"open\", () => {\n        if (!this.opened) {\n          this[raiseChangeEvents] = true;\n          this.open();\n          this[raiseChangeEvents] = false;\n        }\n      });\n\n      // Popup's closed state becomes our own closed state.\n      this[ids].popup.addEventListener(\"close\", (event) => {\n        if (!this.closed) {\n          this[raiseChangeEvents] = true;\n          /** @type {any} */\n\n          const cast = event;\n          const closeResult = cast.detail.closeResult;\n          this.close(closeResult);\n          this[raiseChangeEvents] = false;\n        }\n      });\n    }\n\n    if (changed.opened || changed.popupLayout) {\n      const { opened, popupLayout } = this[state];\n\n      if (!opened) {\n        // Popup closed. Reset the styles used to position it.\n        Object.assign(this[ids].popup.style, {\n          bottom: \"\",\n          left: \"\",\n          opacity: \"\",\n          right: \"\",\n          top: \"\",\n        });\n      } else if (!popupLayout) {\n        // Popup opened but not yet laid out.\n        //\n        // Render the component invisibly so we can measure it before showing\n        // it. We hide it by giving it zero opacity. If we use `visibility:\n        // hidden` for this purpose, the popup won't be able to receive the\n        // focus, which would complicate our overlay focus handling.\n        //\n        // In case the popup is being relayed out because a layout-affecting\n        // property changed while the popup is open, we reset the positiong\n        // styles too.\n        Object.assign(this[ids].popup.style, {\n          bottom: \"\",\n          left: \"\",\n          opacity: 0,\n          right: \"\",\n          top: \"\",\n        });\n      } else {\n        // Popup opened and laid out. Position the popup using only the edges\n        // implicated in the layout.\n        const popup = this[ids].popup;\n        const positionStyling = getPositiongStylingForLayout(popupLayout);\n        Object.assign(popup.style, positionStyling, {\n          opacity: \"\",\n        });\n      }\n    }\n\n    if (changed.opened) {\n      const { opened } = this[state];\n      /** @type {any} */ (this[ids].popup).opened = opened;\n    }\n\n    if (changed.disabled) {\n      if (\"disabled\" in this[ids].source) {\n        const { disabled } = this[state];\n        /** @type {any} */ (this[ids].source).disabled = disabled;\n      }\n    }\n\n    // Let the popup know its position relative to the source.\n    if (changed.popupLayout) {\n      const { popupLayout } = this[state];\n      if (popupLayout) {\n        const { align, direction } = popupLayout;\n        /** @type {any} */ const popup = this[ids].popup;\n        if (\"position\" in popup) {\n          popup.position = direction;\n        }\n        if (\"align\" in popup) {\n          popup.align = align;\n        }\n      }\n    }\n  }\n\n  [rendered](/** @type {ChangedFlags} */ changed) {\n    super[rendered](changed);\n    const { opened } = this[state];\n    if (changed.opened) {\n      if (opened) {\n        // Worth noting that's possible (but unusual) for a popup to render\n        // opened on first render.\n        waitThenRenderOpened(this);\n      } else {\n        removeEventListeners(this);\n      }\n    } else if (\n      changed.popupLayout &&\n      this[state].opened &&\n      !this[state].popupLayout\n    ) {\n      // A layout-affecting property changed while the popup is open; do layout\n      // again.\n      choosePopupLayout(this);\n    }\n  }\n\n  /**\n   * The class or tag used to create the `source` part - the button\n   * (or other element) the user can tap/click to invoke the popup.\n   *\n   * @type {PartDescriptor}\n   * @default 'button'\n   */\n  get sourcePartType() {\n    return this[state].sourcePartType;\n  }\n  set sourcePartType(sourcePartType) {\n    this[setState]({ sourcePartType });\n  }\n\n  [stateEffects](state, changed) {\n    const effects = super[stateEffects](state, changed);\n\n    // We reset our popup calculations when the popup closes, or if it's open\n    // and state that affects positioning has changed.\n    if (\n      (changed.opened && !state.opened) ||\n      (state.opened &&\n        (changed.popupAlign || changed.popupDirection || changed.rightToLeft))\n    ) {\n      Object.assign(effects, {\n        popupLayout: null,\n      });\n    }\n\n    return effects;\n  }\n\n  get [template]() {\n    const result = super[template];\n    result.content.append(fragmentFrom.html`\n      <style>\n        :host {\n          display: inline-block;\n          position: relative;\n        }\n\n        [part~=\"source\"] {\n          height: 100%;\n          -webkit-tap-highlight-color: transparent;\n          touch-action: manipulation;\n          width: 100%;\n        }\n\n        [part~=\"popup\"] {\n          max-height: 100%;\n          max-width: 100%;\n          outline: none;\n          position: fixed;\n        }\n      </style>\n      <div id=\"source\" part=\"source\">\n        <slot name=\"source\"></slot>\n      </div>\n      <div id=\"popup\" part=\"popup\" exportparts=\"backdrop, frame\" role=\"none\">\n        <slot></slot>\n      </div>\n    `);\n\n    renderParts(result.content, this[state]);\n\n    return result;\n  }\n}\n\nfunction addEventListeners(/** @type {PopupSource} */ element) {\n  /** @type {any} */ const cast = element;\n  cast[resizeListenerKey] = () => {\n    // If viewport resizes while the popup is open, we may want to change which\n    // layout we're using for the popup.\n    choosePopupLayout(element);\n  };\n  const viewport = window.visualViewport || window;\n  viewport.addEventListener(\"resize\", cast[resizeListenerKey]);\n}\n\n/**\n * Based on the current size of the source, popup, and viewport, determine which\n * layout we'll use for the popup.\n *\n * @private\n * @param {PopupSource} element\n */\nfunction choosePopupLayout(element) {\n  const { popupAlign, popupDirection, rightToLeft } = element[state];\n  const sourceRect = element[ids].source.getBoundingClientRect();\n  const popupRect = element[ids].popup.getBoundingClientRect();\n  const boundsRect = viewportBounds();\n\n  const popupLayout = layoutPopup(sourceRect, popupRect, boundsRect, {\n    align: popupAlign,\n    direction: popupDirection,\n    rightToLeft,\n  });\n\n  element[setState]({ popupLayout });\n}\n\n// Given a complete layout for a popup (including the rect), determine the\n// styling that should be applied to the popup.\nfunction getPositiongStylingForLayout(layout) {\n  const { align, direction, rect } = layout;\n  const bounds = viewportBounds();\n  const styling = {};\n  const vertical = direction === \"above\" || direction === \"below\";\n  switch (direction) {\n    case \"above\":\n      styling.bottom = `${bounds.bottom - rect.bottom}px`;\n      break;\n    case \"below\":\n      styling.top = `${rect.top}px`;\n      break;\n    case \"left\":\n      styling.right = `${bounds.right - rect.right}px`;\n      break;\n    case \"right\":\n      styling.left = `${rect.left}px`;\n      break;\n  }\n  switch (align) {\n    case \"bottom\":\n      styling.bottom = `${bounds.bottom - rect.bottom}px`;\n      break;\n    case \"center\":\n    case \"stretch\":\n      if (vertical) {\n        styling.left = `${rect.left}px`;\n        styling.right = `${bounds.right - rect.right}px`;\n      } else {\n        styling.bottom = `${bounds.bottom - rect.bottom}px`;\n        styling.top = `${rect.top}px`;\n      }\n      break;\n    case \"left\":\n      styling.left = `${rect.left}px`;\n      break;\n    case \"right\":\n      styling.right = `${bounds.right - rect.right}px`;\n      break;\n    case \"top\":\n      styling.top = `${rect.top}px`;\n      break;\n  }\n  return styling;\n}\n\nfunction removeEventListeners(/** @type {PopupSource} */ element) {\n  /** @type {any} */ const cast = element;\n  if (cast[resizeListenerKey]) {\n    const viewport = window.visualViewport || window;\n    viewport.removeEventListener(\"resize\", cast[resizeListenerKey]);\n    cast[resizeListenerKey] = null;\n  }\n}\n\n/**\n * Render parts for the template or an instance.\n *\n * @private\n * @param {DocumentFragment} root\n * @param {PlainObject} state\n * @param {ChangedFlags} [changed]\n */\nfunction renderParts(root, state, changed) {\n  if (!changed || changed.popupPartType) {\n    const { popupPartType } = state;\n    const popup = root.getElementById(\"popup\");\n    if (popup) {\n      transmute(popup, popupPartType);\n    }\n  }\n  if (!changed || changed.sourcePartType) {\n    const { sourcePartType } = state;\n    const source = root.getElementById(\"source\");\n    if (source) {\n      transmute(source, sourcePartType);\n    }\n  }\n}\n\n// Determine the bounding rectangle of the viewport. We prefer the\n// VisualViewport API where that's available, as that handles a pinch-zoomed\n// viewport on mobile. If not availble (as of October 2020, Firefox), we fall\n// back to using the window as the viewport.\nfunction viewportBounds() {\n  // @ts-ignore\n  const viewport = window.visualViewport;\n  const boundsRect = viewport\n    ? new DOMRect(\n        viewport.offsetLeft,\n        viewport.offsetTop,\n        viewport.width,\n        viewport.height\n      )\n    : new DOMRect(0, 0, window.innerWidth, window.innerHeight);\n  return boundsRect;\n}\n\n/**\n *\n * When a popup is first rendered, we let it render invisibly so that it doesn't\n * affect the page layout.\n *\n * We then wait, for two reasons:\n *\n * 1) We need to give the popup time to render invisibly. That lets us get the\n *    true size of the popup content.\n *\n * 2) Wire up events that can dismiss the popup. If the popup was opened because\n *    the user clicked something, that opening click event may still be bubbling\n *    up, and we only want to start listening after it's been processed.\n *    Along the same lines, if the popup caused the page to scroll, we don't\n *    want to immediately close because the page scrolled (only if the user\n *    scrolls).\n *\n * After waiting, we can take care of both of the above tasks.\n *\n * @private\n * @param {PopupSource} element\n */\nfunction waitThenRenderOpened(element) {\n  // Wait a tick to let the newly-opened component actually render.\n  setTimeout(() => {\n    // It's conceivable the popup was closed before the timeout completed,\n    // so double-check that it's still opened before listening to events.\n    if (element[state].opened) {\n      choosePopupLayout(element);\n      addEventListeners(element);\n    }\n  });\n}\n\nexport default PopupSource;\n","import { deepContains, ownEvent } from \"../core/dom.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport DelegateFocusMixin from \"./DelegateFocusMixin.js\";\nimport {\n  defaultState,\n  firstRender,\n  ids,\n  keydown,\n  raiseChangeEvents,\n  render,\n  state,\n  template,\n} from \"./internal.js\";\nimport KeyboardMixin from \"./KeyboardMixin.js\";\nimport PopupDragSelectMixin from \"./PopupDragSelectMixin.js\";\nimport PopupSource from \"./PopupSource.js\";\n\nconst Base = DelegateFocusMixin(\n  KeyboardMixin(PopupDragSelectMixin(PopupSource))\n);\n\n/**\n * A button that invokes an attached popup\n *\n * @inherits PopupSource\n * @mixes DelegateFocusMixin\n * @mixes KeyboardMixin\n * @mixes PopupDragSelectMixin\n */\nclass PopupButton extends Base {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      sourcePartType: \"button\",\n    });\n  }\n\n  [keydown](/** @type {KeyboardEvent} */ event) {\n    let handled;\n\n    switch (event.key) {\n      // Space or Up/Down arrow keys open the popup.\n      case \" \":\n      case \"ArrowDown\":\n      case \"ArrowUp\":\n        if (this.closed) {\n          this.open();\n          handled = true;\n        }\n        break;\n\n      // Enter opens popup.\n      case \"Enter\":\n        if (!this.opened) {\n          this.open();\n          handled = true;\n        }\n        break;\n\n      // If popup is open, pressing Esc should close popup.\n      // This code exists to handle cases where the popup does not take the\n      // focus (autoFocus is false). In cases where the popup takes focus, it\n      // will be up to the popup to handle closing when Esc is pressed.\n      case \"Escape\":\n        if (this.opened) {\n          this.close({\n            canceled: \"Escape\",\n          });\n          handled = true;\n        }\n        break;\n    }\n\n    // Give superclass a chance to handle.\n    handled = super[keydown] && super[keydown](event);\n\n    if (!handled && this.opened && !event.metaKey && !event.altKey) {\n      // If they haven't already been handled, absorb keys that might cause the\n      // page to scroll in the background, which would in turn cause the popup to\n      // inadvertently close.\n      switch (event.key) {\n        case \"ArrowDown\":\n        case \"ArrowLeft\":\n        case \"ArrowRight\":\n        case \"ArrowUp\":\n        case \"End\":\n        case \"Home\":\n        case \"PageDown\":\n        case \"PageUp\":\n        case \" \":\n          handled = true;\n      }\n    }\n\n    return handled;\n  }\n\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n\n    if (this[firstRender]) {\n      // Close the popup if we're opened and lose focus. A typical popup using\n      // PopupModalityMixin will have its own logic to close on blur -- but in\n      // cases where the popup itself doesn't get focus (e.g., TooltipButton),\n      // that logic won't apply.\n      this.addEventListener(\"blur\", blurHandler.bind(this));\n\n      // If the source element gets the focus while the popup is open, the\n      // most likely expanation is that the user hit Shift+Tab to back up out of\n      // the popup. In that case, we should close.\n      this[ids].source.addEventListener(\"focus\", async (event) => {\n        const popupFocused = ownEvent(this[ids].popup, event);\n        // It's possible to get a focus event in the initial mousedown on the\n        // source button before the popup is even rendered. We don't want to\n        // close in that case, so we check to see if we've already measured the\n        // popup dimensions (which will be true if the popup fully completed\n        // rendering).\n        const measured = this[state].popupHeight !== null;\n        if (!popupFocused && this.opened && measured) {\n          this[raiseChangeEvents] = true;\n          await this.close();\n          this[raiseChangeEvents] = false;\n        }\n      });\n    }\n\n    if (changed.opened) {\n      // Reflect opened state to attribute for styling.\n      const { opened } = this[state];\n      this.toggleAttribute(\"opened\", opened);\n    }\n\n    if (changed.sourcePartType) {\n      // Desktop popups generally open on mousedown, not click/mouseup. On mobile,\n      // mousedown won't fire until the user releases their finger, so it behaves\n      // like a click.\n      const source = this[ids].source;\n      source.addEventListener(\"mousedown\", (event) => {\n        // mousedown events fire even if button is disabled, so we need\n        // to explicitly ignore those.\n        if (this.disabled) {\n          event.preventDefault();\n          return;\n        }\n        // Only handle primary button mouse down to avoid interfering with\n        // right-click behavior.\n        /** @type {any} */\n        const cast = event;\n        if (cast.button && cast.button !== 0) {\n          return;\n        }\n        // We give the default focus behavior time to run before opening the\n        // popup. See note below.\n        setTimeout(() => {\n          if (!this.opened) {\n            this[raiseChangeEvents] = true;\n            this.open();\n            this[raiseChangeEvents] = false;\n          }\n        });\n        event.stopPropagation();\n        // We don't prevent the default behavior for mousedown. Among other\n        // things, it sets the focus to the element the user moused down on.\n        // That's important for us, because OverlayMixin will remember that\n        // focused element (i.e., this element) when opening, and restore focus to\n        // it when the popup closes.\n      });\n    }\n\n    if (changed.popupPartType) {\n      this[ids].popup.removeAttribute(\"tabindex\");\n    }\n  }\n\n  get [template]() {\n    const result = super[template];\n    // When popup is open, it will have focus; don't show focus ring on host.\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          [part~=\"source\"] {\n            cursor: default;\n            outline: none;\n            -webkit-tap-highlight-color: transparent;\n            touch-action: manipulation;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            -webkit-user-select: none;\n            user-select: none;\n          }\n\n          :host([opened][focus-visible]) {\n            outline: none;\n          }\n        </style>\n      `\n    );\n    return result;\n  }\n}\n\n// Note: This routine also exists in PopupModalityMixin, may want to eventually\n// share that. Note that PopupModalityMixin handles blur on the *popup*; here\n// we're dealing with the source button.\nasync function blurHandler(/** @type {Event} */ event) {\n  // @ts-ignore\n  /** @type {any} */ const element = this;\n  // What has the focus now?\n  const newFocusedElement =\n    /** @type {any} */ (event).relatedTarget || document.activeElement;\n  /** @type {any} */\n  if (\n    newFocusedElement instanceof Element &&\n    !deepContains(element, newFocusedElement)\n  ) {\n    element[raiseChangeEvents] = true;\n    await element.close({ canceled: \"blur\" });\n    element[raiseChangeEvents] = false;\n  }\n}\n\nexport default PopupButton;\n","import { indexOfItemContainingTarget } from \"../core/dom.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  keydown,\n  raiseChangeEvents,\n  render,\n  rendered,\n  setState,\n  state,\n  stateEffects,\n} from \"./internal.js\";\n\nconst documentMousemoveListenerKey = Symbol(\"documentMousemoveListener\");\n\n/**\n * Syncs the cursor a popup source and a list-like element inside the popup.\n *\n * This includes support for drag-select operations: the user can mouse down on\n * the source to produce the popup, drag into the popup to highlight an item,\n * then release the mouse to select that item.\n *\n * @module PopupListMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function PopupListMixin(Base) {\n  // The class prototype added by the mixin.\n  class PopupList extends Base {\n    connectedCallback() {\n      super.connectedCallback();\n      // Handle edge case where component is opened, removed, then added back.\n      listenIfOpenAndConnected(this);\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        currentIndex: -1,\n        hasHoveredOverItemSinceOpened: false,\n        popupList: null,\n      });\n    }\n\n    disconnectedCallback() {\n      if (super.disconnectedCallback) {\n        super.disconnectedCallback();\n      }\n      listenIfOpenAndConnected(this);\n    }\n\n    [keydown](/** @type {KeyboardEvent} */ event) {\n      let handled = false;\n\n      switch (event.key) {\n        // Enter closes popup.\n        case \"Enter\":\n          if (this.opened) {\n            selectCurrentItemAndClose(this);\n            handled = true;\n          }\n      }\n\n      // Prefer our result if it's defined, otherwise use base result.\n      return handled || (super[keydown] && super[keydown](event)) || false;\n    }\n\n    [render](changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n\n      if (changed.popupList) {\n        const { popupList } = this[state];\n        if (popupList) {\n          // If the user mouses up on a list item, close the list with that item as\n          // the close result.\n          popupList.addEventListener(\"mouseup\", async (event) => {\n            // If we're doing a drag-select (user moused down on button, dragged\n            // mouse into list, and released), we close. If we're not doing a\n            // drag-select (the user opened the list with a complete click), and\n            // there's a selection, they clicked on an item, so also close.\n            // Otherwise, the user clicked the list open, then clicked on a list\n            // separator or list padding; stay open.\n            const currentIndex = this[state].currentIndex;\n            if (this[state].dragSelect || currentIndex >= 0) {\n              // We don't want the document mouseup handler in\n              // PopupDragSelectMixin to close the popup before we've asked the\n              // list to highlight the selection. We stop event propagation\n              // here, before we enter any async code, to actually stop\n              // propagation.\n              event.stopPropagation();\n              this[raiseChangeEvents] = true;\n              await selectCurrentItemAndClose(this);\n              this[raiseChangeEvents] = false;\n            } else {\n              event.stopPropagation();\n            }\n          });\n\n          // Track changes in the list's cursor.\n          popupList.addEventListener(\"currentindexchange\", (event) => {\n            this[raiseChangeEvents] = true;\n            /** @type {any} */\n            const cast = event;\n            this[setState]({\n              currentIndex: cast.detail.currentIndex,\n            });\n            this[raiseChangeEvents] = false;\n          });\n        }\n      }\n\n      // The popup's current item is represented in the visible list.\n      if (changed.currentIndex || changed.popupList) {\n        const { currentIndex, popupList } = this[state];\n        if (popupList && \"currentIndex\" in popupList) {\n          popupList.currentIndex = currentIndex;\n        }\n      }\n    }\n\n    [rendered](changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      if (changed.opened) {\n        if (this[state].opened) {\n          // Ensure the list's cursor is visible. If the cursor moved while the\n          // list was closed, the cursor may not be in view yet.\n          const { popupList } = this[state];\n          if (popupList.scrollCurrentItemIntoView) {\n            // Give popup time to render.\n            setTimeout(() => {\n              popupList.scrollCurrentItemIntoView();\n            });\n          }\n        }\n        listenIfOpenAndConnected(this);\n      }\n    }\n\n    [stateEffects](state, changed) {\n      const effects = super[stateEffects]\n        ? super[stateEffects](state, changed)\n        : {};\n\n      // When opening, reset out notion of whether the user has hovered over an\n      // item since the list was opened.\n      if (changed.opened && state.opened) {\n        Object.assign(effects, {\n          hasHoveredOverItemSinceOpened: false,\n        });\n      }\n\n      return effects;\n    }\n  }\n\n  return PopupList;\n}\n\n// Handle a mouse hover select operation.\nfunction handleMousemove(/** @type {MouseEvent} */ event) {\n  // @ts-ignore\n  const element = this;\n  const { hasHoveredOverItemSinceOpened, opened } = element[state];\n  if (opened) {\n    // Treat the deepest element in the composed event path as the target.\n    const target = event.composedPath ? event.composedPath()[0] : event.target;\n    const items = element.items;\n\n    if (target && target instanceof Node && items) {\n      const hoverIndex = indexOfItemContainingTarget(items, target);\n      const item = items[hoverIndex];\n\n      // If the user is hovering over an enabled item, make it current.\n      // If the user is not hovering over an enabled item, but has\n      // hovered over such an item at least once since the list was\n      // opened, then clear cursor.\n      const currentIndex = item && !item.disabled ? hoverIndex : -1;\n\n      if (\n        (hasHoveredOverItemSinceOpened || currentIndex >= 0) &&\n        currentIndex !== element[state].currentIndex\n      ) {\n        element[raiseChangeEvents] = true;\n        element[setState]({ currentIndex });\n        if (currentIndex >= 0 && !hasHoveredOverItemSinceOpened) {\n          element[setState]({ hasHoveredOverItemSinceOpened: true });\n        }\n        element[raiseChangeEvents] = false;\n      }\n    }\n  }\n}\n\nfunction listenIfOpenAndConnected(element) {\n  if (element[state].opened && element.isConnected) {\n    if (!element[documentMousemoveListenerKey]) {\n      // Not listening yet; start.\n      element[documentMousemoveListenerKey] = handleMousemove.bind(element);\n      document.addEventListener(\n        \"mousemove\",\n        element[documentMousemoveListenerKey]\n      );\n    }\n  } else if (element[documentMousemoveListenerKey]) {\n    // Currently listening; stop.\n    document.removeEventListener(\n      \"mousemove\",\n      element[documentMousemoveListenerKey]\n    );\n    element[documentMousemoveListenerKey] = null;\n  }\n}\n\n/**\n * Highlight the current item (if one exists), then close the menu.\n */\nasync function selectCurrentItemAndClose(element) {\n  const originalRaiseChangeEvents = element[raiseChangeEvents];\n  const cursorDefined = element[state].currentIndex >= 0;\n  const items = element.items;\n  if (items) {\n    const closeResult = cursorDefined\n      ? items[element[state].currentIndex]\n      : undefined;\n\n    const list = element[state].popupList;\n    if (cursorDefined && \"flashCurrentItem\" in list) {\n      await list.flashCurrentItem();\n    }\n    const saveRaiseChangeEvents = element[raiseChangeEvents];\n    element[raiseChangeEvents] = originalRaiseChangeEvents;\n    await element.close(closeResult);\n    element[raiseChangeEvents] = saveRaiseChangeEvents;\n  }\n}\n","import { deepContains } from \"../core/dom.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport { transmute } from \"../core/template.js\";\nimport {\n  defaultState,\n  ids,\n  raiseChangeEvents,\n  render,\n  rendered,\n  setState,\n  shadowRoot,\n  state,\n  stateEffects,\n  template,\n} from \"./internal.js\";\nimport Menu from \"./Menu.js\";\nimport PopupButton from \"./PopupButton.js\";\nimport PopupListMixin from \"./PopupListMixin.js\";\n\nconst Base = PopupListMixin(PopupButton);\n\n/**\n * A button that invokes a menu.\n *\n * @inherits PopupButton\n * @mixes PopupListMixin\n * @part {Menu} menu - the menu shown in the popup\n */\nclass MenuButton extends Base {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      menuPartType: Menu,\n    });\n  }\n\n  get items() {\n    /** @type {any} */\n    const menu = this[ids] && this[ids].menu;\n    return menu ? menu.items : null;\n  }\n\n  /**\n   * The class or tag used to define the `menu` part  the element\n   * presenting the menu items and handling navigation between them.\n   *\n   * @type {PartDescriptor}\n   * @default Menu\n   */\n  get menuPartType() {\n    return this[state].menuPartType;\n  }\n  set menuPartType(menuPartType) {\n    this[setState]({ menuPartType });\n  }\n\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n\n    renderParts(this[shadowRoot], this[state], changed);\n\n    if (changed.menuPartType) {\n      // Close the popup if menu loses focus.\n      this[ids].menu.addEventListener(\"blur\", async (event) => {\n        /** @type {any} */\n        const cast = event;\n        const newFocusedElement = cast.relatedTarget || document.activeElement;\n        if (this.opened && !deepContains(this[ids].menu, newFocusedElement)) {\n          this[raiseChangeEvents] = true;\n          await this.close();\n          this[raiseChangeEvents] = false;\n        }\n      });\n\n      // mousedown events on the menu will propagate up to the top-level element,\n      // which will then steal the focus. We want to keep the focus on the menu,\n      // both to permit keyboard use, and to avoid closing the menu on blur (see\n      // separate blur handler). To keep the focus on the menu, we prevent the\n      // default event behavior.\n      this[ids].menu.addEventListener(\"mousedown\", (event) => {\n        // Only process events for the main (usually left) button.\n        if (/** @type {MouseEvent} */ (event).button !== 0) {\n          return;\n        }\n        if (this.opened) {\n          event.stopPropagation();\n          event.preventDefault();\n        }\n      });\n    }\n\n    if (changed.opened) {\n      // Reflect opened state to source for ARIA.\n      const { opened } = this[state];\n      this[ids].source.setAttribute(\"aria-expanded\", opened.toString());\n    }\n  }\n\n  [rendered](changed) {\n    super[rendered](changed);\n\n    if (changed.menuPartType) {\n      this[setState]({\n        popupList: this[ids].menu,\n      });\n    }\n  }\n\n  [stateEffects](state, changed) {\n    const effects = super[stateEffects](state, changed);\n\n    // When closing, clear menu selection.\n    if (changed.opened && !state.opened) {\n      Object.assign(effects, {\n        currentIndex: -1,\n      });\n    }\n\n    return effects;\n  }\n\n  get [template]() {\n    const result = super[template];\n\n    // Wrap default slot with a menu.\n    const defaultSlot = result.content.querySelector(\"slot:not([name])\");\n    if (defaultSlot) {\n      defaultSlot.replaceWith(fragmentFrom.html`\n        <div id=\"menu\" part=\"menu\">\n          <slot></slot>\n        </div>\n      `);\n    }\n\n    renderParts(result.content, this[state]);\n\n    result.content.append(fragmentFrom.html`\n      <style>\n        [part~=\"menu\"] {\n          max-height: 100%;\n        }\n      </style>\n    `);\n\n    return result;\n  }\n}\n\n/**\n * Render parts for the template or an instance.\n *\n * @private\n * @param {DocumentFragment} root\n * @param {PlainObject} state\n * @param {ChangedFlags} [changed]\n */\nfunction renderParts(root, state, changed) {\n  if (!changed || changed.menuPartType) {\n    const { menuPartType } = state;\n    const menu = root.getElementById(\"menu\");\n    if (menu) {\n      transmute(menu, menuPartType);\n    }\n  }\n}\n\nexport default MenuButton;\n","import { templateFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\";\nimport DisabledMixin from \"./DisabledMixin.js\";\nimport {\n  defaultState,\n  ids,\n  render,\n  setState,\n  state,\n  template,\n} from \"./internal.js\";\n\nconst Base = DisabledMixin(ReactiveElement);\n\n/**\n * An element that can point up or down.\n *\n * @inherits ReactiveElement\n * @mixes DisabledMixin\n * @part down-icon - the icon shown in the toggle if the popup will open or close in the down direction\n * @part toggle-icon - both the up and down icons\n * @part up-icon - the icon shown in the toggle if the popup will open or close in the up direction\n */\nclass UpDownToggle extends Base {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      direction: \"down\",\n    });\n  }\n\n  /**\n   * Indicates which direction the element should point to.\n   *\n   * @type {'down'|'up'}\n   * @default 'down'\n   */\n  get direction() {\n    return this[state].direction;\n  }\n  set direction(direction) {\n    this[setState]({ direction });\n  }\n\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n\n    if (changed.direction) {\n      const { direction } = this[state];\n      this[ids].downIcon.style.display =\n        direction === \"down\" ? \"block\" : \"none\";\n      this[ids].upIcon.style.display = direction === \"up\" ? \"block\" : \"none\";\n    }\n  }\n\n  get [template]() {\n    return templateFrom.html`\n      <style>\n        :host {\n          display: inline-block;\n        }\n      </style>\n      <div id=\"downIcon\" part=\"toggle-icon down-icon\">\n        <slot name=\"down-icon\"></slot>\n      </div>\n      <div id=\"upIcon\" part=\"toggle-icon up-icon\">\n        <slot name=\"up-icon\"></slot>\n      </div>\n    `;\n  }\n}\n\nexport default UpDownToggle;\n","import { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { transmute } from \"../core/template.js\";\nimport {\n  defaultState,\n  ids,\n  render,\n  setState,\n  shadowRoot,\n  state,\n  template,\n} from \"./internal.js\";\nimport UpDownToggle from \"./UpDownToggle.js\";\n\n/**\n * Manages a popup toggle part for a popup source.\n *\n * @module PopupToggleMixin\n * @part {UpDownToggle} popup-toggle - the element that lets the user know they can open the popup\n * @part down-icon - the icon shown in the toggle if the popup will open or close in the down direction\n * @part up-icon - the icon shown in the toggle if the popup will open or close in the up direction\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function PopupToggleMixin(Base) {\n  // The class prototype added by the mixin.\n  class PopupToggle extends Base {\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        popupTogglePartType: UpDownToggle,\n      });\n    }\n\n    /**\n     * The class or tag used to create the `popup-toggle` part  the\n     * element that lets the user know they can open the popup.\n     *\n     * @type {PartDescriptor}\n     * @default UpDownToggle\n     */\n    get popupTogglePartType() {\n      return this[state].popupTogglePartType;\n    }\n    set popupTogglePartType(popupTogglePartType) {\n      this[setState]({ popupTogglePartType });\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      super[render](changed);\n\n      renderParts(this[shadowRoot], this[state], changed);\n\n      // Tell the toggle which direction it should point to depending on which\n      // direction the popup will open. Since we assume this is used for up/down\n      // popup directions, we don't handle left/right directions.\n      if (changed.popupDirection || changed.popupTogglePartType) {\n        const { popupDirection } = this[state];\n        const toggleDirection =\n          popupDirection === \"above\" || popupDirection === \"column-reverse\"\n            ? \"up\"\n            : \"down\";\n        /** @type {any} */ const popupToggle = this[ids].popupToggle;\n        if (\"direction\" in popupToggle) {\n          popupToggle.direction = toggleDirection;\n        }\n      }\n\n      if (changed.disabled) {\n        const { disabled } = this[state];\n        /** @type {any} */ (this[ids].popupToggle).disabled = disabled;\n      }\n    }\n\n    get [template]() {\n      const result = super[template];\n\n      // Append a toggle button to the source.\n      const source = result.content.querySelector('[part~=\"source\"]');\n      if (source) {\n        source.append(fragmentFrom.html`\n          <div\n            id=\"popupToggle\"\n            part=\"popup-toggle\"\n            exportparts=\"toggle-icon, down-icon, up-icon\"\n            tabindex=\"-1\"\n          ></div>\n      `);\n      }\n\n      renderParts(result.content, this[state]);\n\n      result.content.append(fragmentFrom.html`\n      <style>\n        [part~=\"popup-toggle\"] {\n          outline: none;\n        }\n\n        [part~=\"source\"] {\n          align-items: center;\n          display: flex;\n        }\n      </style>\n    `);\n\n      return result;\n    }\n  }\n\n  return PopupToggle;\n}\n\n/**\n * Render parts for the template or an instance.\n *\n * @private\n * @param {DocumentFragment} root\n * @param {PlainObject} state\n * @param {ChangedFlags} [changed]\n */\nfunction renderParts(root, state, changed) {\n  if (!changed || changed.popupTogglePartType) {\n    const { popupTogglePartType } = state;\n    const popupToggle = root.getElementById(\"popupToggle\");\n    if (popupToggle) {\n      transmute(popupToggle, popupTogglePartType);\n    }\n  }\n}\n","import { template } from \"../base/internal.js\";\nimport Menu from \"../base/Menu.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\n\n/**\n * Menu component in the Plain reference design system\n *\n * @inherits Menu\n */\nclass PlainMenu extends Menu {\n  get [template]() {\n    const result = super[template];\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          :host ::slotted(*) {\n            padding: 0.25em 1em;\n          }\n          \n          :host ::slotted([current]) {\n            background: highlight;\n            color: highlighttext;\n          }\n\n          @media (pointer: coarse) {\n            ::slotted(*) {\n              padding: 1em;\n            }\n          }\n        </style>\n      `\n    );\n    return result;\n  }\n}\n\nexport default PlainMenu;\n","import { template } from \"../base/internal.js\";\nimport UpDownToggle from \"../base/UpDownToggle.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport { replace } from \"../core/template.js\";\n\n/**\n * OpenCloseToggle component in the Plain reference design system\n *\n * @inherits OpenCloseToggle\n */\nclass PlainOpenCloseToggle extends UpDownToggle {\n  get [template]() {\n    const result = super[template];\n\n    // Replace the icons with our up/down glyphs.\n    const downIcon = result.content.getElementById(\"downIcon\");\n    const downIconGlyph = fragmentFrom.html`\n      <svg\n        id=\"downIcon\"\n        part=\"toggle-icon down-icon\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 10 5\"\n      >\n        <path d=\"M 0 0 l5 5 5 -5 z\" />\n      </svg>\n    `.firstElementChild;\n    if (downIcon && downIconGlyph) {\n      replace(downIcon, downIconGlyph);\n    }\n    const upIcon = result.content.getElementById(\"upIcon\");\n    const upIconGlyph = fragmentFrom.html`\n      <svg\n        id=\"upIcon\"\n        part=\"toggle-icon up-icon\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 10 5\"\n      >\n        <path d=\"M 0 5 l5 -5 5 5 z\" />\n      </svg>\n    `.firstElementChild;\n    if (upIcon && upIconGlyph) {\n      replace(upIcon, upIconGlyph);\n    }\n\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          :host {\n            align-items: center;\n            display: inline-flex;\n            padding: 2px;\n          }\n\n          :host(:not([disabled])):hover {\n            background: #eee;\n          }\n\n          [part~=\"toggle-icon\"] {\n            fill: currentColor;\n            height: 10px;\n            margin: 0.25em;\n            width: 10px;\n          }\n        </style>\n      `\n    );\n    return result;\n  }\n}\n\nexport default PlainOpenCloseToggle;\n","import Backdrop from \"../base/Backdrop.js\";\n\n/**\n * Backdrop component in the Plain reference design system\n *\n * @inherits Backdrop\n */\nclass PlainBackdrop extends Backdrop {}\n\nexport default PlainBackdrop;\n","import { defaultState } from \"../base/internal.js\";\nimport Popup from \"../base/Popup.js\";\nimport PlainBackdrop from \"./PlainBackdrop.js\";\nimport PlainOverlayFrame from \"./PlainOverlayFrame.js\";\n\n/**\n * Popup component in the Plain reference design system\n *\n * @inherits Popup\n * @part {PlainBackdrop} backdrop\n * @part {PlainOverlayFrame} frame\n */\nclass PlainPopup extends Popup {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      backdropPartType: PlainBackdrop,\n      framePartType: PlainOverlayFrame,\n    });\n  }\n}\n\nexport default PlainPopup;\n","import { defaultState, template } from \"../base/internal.js\";\nimport MenuButton from \"../base/MenuButton.js\";\nimport PopupToggleMixin from \"../base/PopupToggleMixin.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport PlainBorderButton from \"./PlainBorderButton.js\";\nimport PlainMenu from \"./PlainMenu.js\";\nimport PlainOpenCloseToggle from \"./PlainOpenCloseToggle.js\";\nimport PlainPopup from \"./PlainPopup.js\";\n\n/**\n * MenuButton component in the Plain reference design system\n *\n * @inherits MenuButton\n * @part {PlainMenu} menu\n * @part {PlainPopup} popup\n * @part {PlainOpenCloseToggle} popup-toggle\n * @part {PlainBorderButton} source\n * @mixes PopupToggleMixin\n */\nclass PlainMenuButton extends PopupToggleMixin(MenuButton) {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      menuPartType: PlainMenu,\n      popupPartType: PlainPopup,\n      popupTogglePartType: PlainOpenCloseToggle,\n      sourcePartType: PlainBorderButton,\n    });\n  }\n\n  get [template]() {\n    const result = super[template];\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          [part~=\"menu\"] {\n            background: window;\n            border: none;\n            padding: 0.5em 0;\n          }\n        </style>\n      `\n    );\n    return result;\n  }\n}\n\nexport default PlainMenuButton;\n","import PlainMenuButton from \"../src/plain/PlainMenuButton.js\";\nexport default class ElixMenuButton extends PlainMenuButton {}\ncustomElements.define(\"elix-menu-button\", ElixMenuButton);\n","import ReactiveElement from \"../core/ReactiveElement.js\";\nimport CurrentMixin from \"./CurrentMixin.js\";\nimport DisabledMixin from \"./DisabledMixin.js\";\nimport SelectableMixin from \"./SelectableMixin.js\";\n\n/**\n * A choice in a menu\n *\n * This class is a convenient way to popuplate a [Menu](Menu) with items that\n * exhibit an appearance roughly consistent with operating system menu items.\n * Use of this class is not required, however -- a `Menu` can contain any type\n * of item you want.\n *\n * @inherits ReactiveElement\n * @mixes CurrentMixin\n * @mixes DisabledMixin\n * @mixes SelectableMixin\n */\nclass MenuItem extends CurrentMixin(\n  DisabledMixin(SelectableMixin(ReactiveElement))\n) {}\n\nexport default MenuItem;\n","import { booleanAttributeValue, setInternalState } from \"../core/dom.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  nativeInternals,\n  render,\n  rendered,\n  setState,\n  state,\n} from \"./internal.js\";\n\n/**\n * Tracks whether an item is the current item.\n *\n * @module CurrentMixin\n * @state current\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function CurrentMixin(Base) {\n  // The class prototype added by the mixin.\n  return class Current extends Base {\n    constructor() {\n      super();\n      /** @type {any} */ const cast = this;\n      if (!this[nativeInternals] && cast.attachInternals) {\n        this[nativeInternals] = cast.attachInternals();\n      }\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n      if (name === \"current\") {\n        const value = booleanAttributeValue(name, newValue);\n        if (this.current !== value) {\n          this.current = value;\n        }\n      } else {\n        super.attributeChangedCallback(name, oldValue, newValue);\n      }\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        current: false,\n      });\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      super[render](changed);\n      if (changed.current) {\n        const { current } = this[state];\n        setInternalState(this, \"current\", current);\n      }\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      // TODO: How do we know whether to raise this if selection is set by Menu? */\n      if (changed.current /* && this[raiseChangeEvents] */) {\n        const { current } = this[state];\n        const oldEvent = new CustomEvent(\"current-changed\", {\n          bubbles: true,\n          detail: { current },\n        });\n        this.dispatchEvent(oldEvent);\n        /**\n         * Raised when the `current` property changes.\n         *\n         * @event currentchange\n         */\n        const event = new CustomEvent(\"currentchange\", {\n          bubbles: true,\n          detail: { current },\n        });\n        this.dispatchEvent(event);\n      }\n    }\n\n    /**\n     * True if the element is currently current.\n     *\n     * @type {boolean}\n     * @default false\n     */\n    get current() {\n      return this[state].current;\n    }\n    set current(current) {\n      // Note: AttributeMarshallingMixin will recognize `current` as the name of\n      // attribute that should be parsed as a boolean attribute, and so will\n      // handling parsing it for us.\n      this[setState]({ current });\n    }\n  };\n}\n","import { setInternalState } from \"../core/dom.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  nativeInternals,\n  render,\n  rendered,\n  setState,\n  state,\n} from \"./internal.js\";\n\n/**\n * Tracks whether the element is currently selected.\n *\n * @module SelectableMixin\n * @state selected\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function SelectableMixin(Base) {\n  // The class prototype added by the mixin.\n  return class Selectable extends Base {\n    constructor() {\n      super();\n      /** @type {any} */ const cast = this;\n      if (!this[nativeInternals] && cast.attachInternals) {\n        this[nativeInternals] = cast.attachInternals();\n      }\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        selected: false,\n      });\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      super[render](changed);\n      if (changed.selected) {\n        const { selected } = this[state];\n        setInternalState(this, \"selected\", selected);\n      }\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      // TODO: How do we know whether to raise this if selection is set by Menu? */\n      if (changed.selected /* && this[raiseChangeEvents] */) {\n        const { selected } = this[state];\n        const oldEvent = new CustomEvent(\"selected-changed\", {\n          bubbles: true,\n          detail: { selected },\n        });\n        this.dispatchEvent(oldEvent);\n        /**\n         * Raised when the `selected` property changes.\n         *\n         * @event selectedchange\n         */\n        const event = new CustomEvent(\"selectedchange\", {\n          bubbles: true,\n          detail: { selected },\n        });\n        this.dispatchEvent(event);\n      }\n    }\n\n    /**\n     * True if the element is currently selected.\n     *\n     * @type {boolean}\n     * @default false\n     */\n    get selected() {\n      return this[state].selected;\n    }\n    set selected(selected) {\n      // Note: AttributeMarshallingMixin will recognize `selected` as the name of\n      // attribute that should be parsed as a boolean attribute, and so will\n      // handling parsing it for us.\n      this[setState]({ selected });\n    }\n  };\n}\n","import { template } from \"../base/internal.js\";\nimport MenuItem from \"../base/MenuItem.js\";\nimport { templateFrom } from \"../core/htmlLiterals.js\";\n\n/**\n * MenuItem component in the Plain reference design system\n *\n * @inherits MenuItem\n */\nclass PlainMenuItem extends MenuItem {\n  get [template]() {\n    // Apply variety of system fonts.\n    // Checkmark icon from Material Design.\n    return templateFrom.html`\n      <style>\n        :host {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n          font-size: 10pt;\n          white-space: nowrap;\n        }\n\n        :host([disabled]) {\n          opacity: 0.5;\n        }\n\n        #checkmark {\n          height: 1em;\n          visibility: hidden;\n          width: 1em;\n        }\n\n        :host([selected]) #checkmark {\n          visibility: visible;\n        }\n      </style>\n      <svg id=\"checkmark\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"4 6 18 12\">\n        <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n        <path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z\"/>\n      </svg>\n      <slot></slot>\n    `;\n  }\n}\n\nexport default PlainMenuItem;\n","import PlainMenuItem from \"../src/plain/PlainMenuItem.js\";\nexport default class ElixMenuItem extends PlainMenuItem {}\ncustomElements.define(\"elix-menu-item\", ElixMenuItem);\n","import ReactiveElement from \"../core/ReactiveElement.js\";\nimport { firstRender, render } from \"./internal.js\";\n\n/**\n * Inactive item that helps group related menu items\n *\n * See [Menu](Menu) for sample usage.\n *\n * @inherits ReactiveElement\n */\nclass MenuSeparator extends ReactiveElement {\n  get disabled() {\n    return true;\n  }\n\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n    if (this[firstRender]) {\n      this.setAttribute(\"aria-hidden\", \"true\");\n    }\n  }\n}\n\nexport default MenuSeparator;\n","import { template } from \"../base/internal.js\";\nimport MenuSeparator from \"../base/MenuSeparator.js\";\nimport { templateFrom } from \"../core/htmlLiterals.js\";\n\n/**\n * MenuSeparator component in the Plain reference design system\n *\n * @inherits MenuSeparator\n */\nclass PlainMenuSeparator extends MenuSeparator {\n  get [template]() {\n    return templateFrom.html`\n      <style>\n        :host {\n          padding: 0 !important;\n        }\n\n        hr {\n          border-bottom-width: 0px;\n          border-color: #fff; /* Ends up as light gray */\n          border-top-width: 1px;\n          margin: 0.25em 0;\n        }\n      </style>\n      <hr>\n    `;\n  }\n}\n\nexport default PlainMenuSeparator;\n","import PlainMenuSeparator from \"../src/plain/PlainMenuSeparator.js\";\nexport default class ElixMenuSeparator extends PlainMenuSeparator {}\ncustomElements.define(\"elix-menu-separator\", ElixMenuSeparator);\n","import {\n  defaultState,\n  effectEndTarget,\n  ids,\n  render,\n  rendered,\n  setState,\n  state,\n} from \"./internal.js\";\nimport LanguageDirectionMixin from \"./LanguageDirectionMixin.js\";\nimport Popup from \"./Popup.js\";\nimport TransitionEffectMixin from \"./TransitionEffectMixin.js\";\n\nconst timeoutKey = Symbol(\"timeout\");\n\nconst Base = LanguageDirectionMixin(TransitionEffectMixin(Popup));\n\n/**\n * Lightweight popup intended to display a short, non-critical message\n *\n * The message remains until  the user dismisses it or a specified `duration`\n * elapses.\n *\n * @inherits Popup\n * @mixes LanguageDirectionMixin\n * @mixes TransitionEffectMixin\n */\nclass Toast extends Base {\n  constructor() {\n    super();\n    this.addEventListener(\"mouseout\", () => {\n      startTimerIfOpened(this);\n    });\n    this.addEventListener(\"mouseover\", () => {\n      clearTimer(this);\n    });\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === \"duration\") {\n      this.duration = Number(newValue);\n    } else {\n      super.attributeChangedCallback(name, oldValue, newValue);\n    }\n  }\n\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      duration: null,\n      fromEdge: \"bottom\",\n    });\n  }\n\n  /**\n   * The duration, in milliseconds, for which the toast will appear on screen.\n   *\n   * The `duration` value refers to the duration of time in which the toast\n   * will appear on the screen. In other words, this is the time between\n   * the `opened` and `closed` event for the toast.\n   *\n   * @type {number}\n   * @default null\n   */\n  get duration() {\n    return this[state].duration;\n  }\n  set duration(duration) {\n    if (!isNaN(duration)) {\n      this[setState]({ duration });\n    }\n  }\n\n  // @ts-ignore\n  get [effectEndTarget]() {\n    return this[ids].frame;\n  }\n\n  /**\n   * The edge of the viewport from which the toast will appear.\n   *\n   * The `start` and `end` values refer to text direction: in left-to-right\n   * languages such as English, these are equivalent to `left` and `right`,\n   * respectively.\n   *\n   * @type {('bottom'|'end'|'left'|'right'|'start'|'top')}\n   * @default 'bottom'\n   */\n  get fromEdge() {\n    return this[state].fromEdge;\n  }\n  set fromEdge(fromEdge) {\n    this[setState]({ fromEdge });\n  }\n\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n    if (changed.fromEdge) {\n      // Host\n      /** @type {IndexedObject<any>} */\n      const hostEdgeStyles = {\n        bottom: {\n          alignItems: \"center\",\n          justifyContent: \"flex-end\",\n        },\n        \"bottom-left\": {\n          alignItems: \"flex-start\",\n          justifyContent: \"flex-end\",\n        },\n        \"bottom-right\": {\n          alignItems: \"flex-end\",\n          justifyContent: \"flex-end\",\n        },\n        top: {\n          alignItems: \"center\",\n          justifyContent: null,\n        },\n        \"top-left\": {\n          alignItems: \"flex-start\",\n          justifyContent: null,\n        },\n        \"top-right\": {\n          alignItems: \"flex-end\",\n          justifyContent: null,\n        },\n      };\n      Object.assign(this.style, hostEdgeStyles[this[state].fromEdge]);\n    }\n    if (\n      changed.effect ||\n      changed.effectPhase ||\n      changed.fromEdge ||\n      changed.rightToLeft\n    ) {\n      const { effect, effectPhase, fromEdge, rightToLeft } = this[state];\n      /** @type {IndexedObject<string>} */\n      const oppositeEdge = {\n        \"bottom-left\": \"bottom-right\",\n        \"bottom-right\": \"bottom-left\",\n        \"top-left\": \"top-right\",\n        \"top-right\": \"top-left\",\n      };\n      const languageAdjustedEdge = rightToLeft\n        ? oppositeEdge[fromEdge] || fromEdge\n        : fromEdge;\n\n      /** @type {IndexedObject<string>} */\n      const edgeTransforms = {\n        bottom: \"translateY(100%)\",\n        \"bottom-left\": \"translateX(-100%)\",\n        \"bottom-right\": \"translateX(100%)\",\n        top: \"translateY(-100%)\",\n        \"top-left\": \"translateX(-100%)\",\n        \"top-right\": \"translateX(100%)\",\n      };\n\n      /** @type {IndexedObject<string>} */\n      const openEdgeTransforms = {\n        bottom: \"translateY(0)\",\n        \"bottom-left\": \"translateX(0)\",\n        \"bottom-right\": \"translateX(0)\",\n        top: \"translateY(0)\",\n        \"top-left\": \"translateX(0)\",\n        \"top-right\": \"translateX(0)\",\n      };\n\n      const opened =\n        (effect === \"open\" && effectPhase !== \"before\") ||\n        (effect === \"close\" && effectPhase === \"before\");\n\n      const opacity = opened ? 1 : 0;\n      const transform = opened\n        ? openEdgeTransforms[languageAdjustedEdge]\n        : edgeTransforms[languageAdjustedEdge];\n\n      Object.assign(this[ids].frame.style, {\n        opacity,\n        transform,\n      });\n    }\n  }\n\n  [rendered](/** @type {ChangedFlags} */ changed) {\n    super[rendered](changed);\n    startTimerIfOpened(this);\n  }\n}\n\nfunction clearTimer(/** @type {Toast} */ element) {\n  /** @type {any} */ const cast = element;\n  if (cast[timeoutKey]) {\n    clearTimeout(cast[timeoutKey]);\n    cast[timeoutKey] = null;\n  }\n}\n\nfunction startTimer(/** @type {Toast} */ element) {\n  clearTimer(element);\n  const duration = element[state].duration;\n  if (duration !== null && duration > 0) {\n    /** @type {any} */ (element)[timeoutKey] = setTimeout(() => {\n      element.close();\n    }, duration);\n  }\n}\n\nfunction startTimerIfOpened(/** @type {Toast} */ element) {\n  if (element.opened) {\n    startTimer(element);\n  }\n}\n\nexport default Toast;\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  effectEndTarget,\n  firstRender,\n  render,\n  rendered,\n  setState,\n  shadowRoot,\n  startEffect,\n  state,\n} from \"./internal.js\";\n\n/**\n * Update state before, during, and after CSS transitions\n *\n * @module TransitionEffectMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function TransitionEffectMixin(Base) {\n  // The class prototype added by the mixin.\n  class TransitionEffect extends Base {\n    /**\n     * Return the elements that use CSS transitions to provide visual effects.\n     *\n     * By default, this assumes the host element itself will have a CSS\n     * transition applied to it, and so returns an array containing the element.\n     * If you will be applying CSS transitions to other elements, override this\n     * property and return an array containing the implicated elements.\n     *\n     * See [effectEndTarget](internal#internal.effectEndTarget)\n     * for details.\n     *\n     * @type {HTMLElement}\n     */\n    get [effectEndTarget]() {\n      return super[effectEndTarget] || this;\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n      if (this[firstRender]) {\n        // Listen for `transitionend` events so we can check to see whether an\n        // effect has completed. If the component defines an `effectEndTarget`\n        // that's the host, listen to events on that. Otherwise, we assume the\n        // target is either in the shadow or an element that will be slotted into\n        // a slot in the shadow, so we'll listen to events that reach the shadow\n        // root.\n        const target = this[effectEndTarget] === this ? this : this[shadowRoot];\n        target.addEventListener(\"transitionend\", (event) => {\n          // See if the event target is our expected `effectEndTarget`. If the\n          // component defines a `effectEndTarget` state, we use that; otherwise,\n          // we use the element identified with `internal.effectEndTarget`.\n          const effectTarget =\n            this[state].effectEndTarget || this[effectEndTarget];\n          if (event.target === effectTarget) {\n            // Advance to the next phase.\n            this[setState]({\n              effectPhase: \"after\",\n            });\n          }\n        });\n      }\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n      if (changed.effect || changed.effectPhase) {\n        const { effect, effectPhase } = this[state];\n        const oldEvent = new CustomEvent(\"effect-phase-changed\", {\n          bubbles: true,\n          detail: {\n            effect,\n            effectPhase,\n          },\n        });\n        this.dispatchEvent(oldEvent);\n        /**\n         * Raised when [state.effect](TransitionEffectMixin#effect-phases) or\n         * [state.effectPhase](TransitionEffectMixin#effect-phases) changes.\n         *\n         * Note: In general, Elix components do not raise events in response to\n         * outside manipulation. (See\n         * [raiseChangeEvents](internal#internal.raiseChangeEvents).) However, for\n         * a component using `TransitionEffectMixin`, a single invocation of the\n         * `startEffect` method will cause the element to pass through multiple\n         * visual states. This makes it hard for external hosts of this\n         * component to know what visual state the component is in. Accordingly,\n         * the mixin raises the `effectphasechange` event whenever the effect or\n         * phase changes, even if `internal.raiseChangeEvents` is false.\n         *\n         * @event effectphasechange\n         */\n        const event = new CustomEvent(\"effectphasechange\", {\n          bubbles: true,\n          detail: {\n            effect,\n            effectPhase,\n          },\n        });\n        this.dispatchEvent(event);\n\n        if (effect) {\n          if (effectPhase !== \"after\") {\n            // We read a layout property to force the browser to render the component\n            // with its current styles before we move to the next state. This ensures\n            // animated values will actually be applied before we move to the next\n            // state.\n            this.offsetHeight;\n          }\n          if (effectPhase === \"before\") {\n            // Advance to the next phase.\n            this[setState]({\n              effectPhase: \"during\",\n            });\n          }\n        }\n      }\n    }\n\n    /**\n     * See [startEffect](internal#internal.startEffect).\n     *\n     * @param {string} effect\n     */\n    async [startEffect](effect) {\n      await this[setState]({\n        effect,\n        effectPhase: \"before\",\n      });\n    }\n  }\n\n  return TransitionEffect;\n}\n","import { defaultState, template } from \"../base/internal.js\";\nimport Toast from \"../base/Toast.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport PlainOverlayFrame from \"./PlainOverlayFrame.js\";\n\n/**\n * @inherits Toast\n * @part {PlainOverlayFrame} frame\n */\nclass PlainToast extends Toast {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      framePartType: PlainOverlayFrame,\n    });\n  }\n\n  get [template]() {\n    const result = super[template];\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          :host {\n            align-items: initial;\n            display: flex;\n            flex-direction: column;\n            height: 100%;\n            justify-content: initial;\n            left: 0;\n            outline: none;\n            pointer-events: none;\n            top: 0;\n            -webkit-tap-highlight-color: transparent;\n            width: 100%;\n          }\n\n          [part~=\"frame\"] {\n            margin: 1em;\n            transition-duration: 0.25s;\n            transition-property: opacity, transform;\n            will-change: opacity, transform;\n          }\n        </style>\n      `\n    );\n    return result;\n  }\n}\n\nexport default PlainToast;\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import PlainToast from \"../src/plain/PlainToast.js\";\nexport default class ElixToast extends PlainToast {}\ncustomElements.define(\"elix-toast\", ElixToast);\n","/*!\n * Quill Editor v1.3.7\n * https://quilljs.com/\n * Copyright (c) 2014, Jason Chen\n * Copyright (c) 2013, salesforce.com\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Quill\"] = factory();\n\telse\n\t\troot[\"Quill\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 109);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar container_1 = __webpack_require__(17);\nvar format_1 = __webpack_require__(18);\nvar leaf_1 = __webpack_require__(19);\nvar scroll_1 = __webpack_require__(45);\nvar inline_1 = __webpack_require__(46);\nvar block_1 = __webpack_require__(47);\nvar embed_1 = __webpack_require__(48);\nvar text_1 = __webpack_require__(49);\nvar attributor_1 = __webpack_require__(12);\nvar class_1 = __webpack_require__(32);\nvar style_1 = __webpack_require__(33);\nvar store_1 = __webpack_require__(31);\nvar Registry = __webpack_require__(1);\nvar Parchment = {\n    Scope: Registry.Scope,\n    create: Registry.create,\n    find: Registry.find,\n    query: Registry.query,\n    register: Registry.register,\n    Container: container_1.default,\n    Format: format_1.default,\n    Leaf: leaf_1.default,\n    Embed: embed_1.default,\n    Scroll: scroll_1.default,\n    Block: block_1.default,\n    Inline: inline_1.default,\n    Text: text_1.default,\n    Attributor: {\n        Attribute: attributor_1.default,\n        Class: class_1.default,\n        Style: style_1.default,\n        Store: store_1.default,\n    },\n};\nexports.default = Parchment;\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ParchmentError = /** @class */ (function (_super) {\n    __extends(ParchmentError, _super);\n    function ParchmentError(message) {\n        var _this = this;\n        message = '[Parchment] ' + message;\n        _this = _super.call(this, message) || this;\n        _this.message = message;\n        _this.name = _this.constructor.name;\n        return _this;\n    }\n    return ParchmentError;\n}(Error));\nexports.ParchmentError = ParchmentError;\nvar attributes = {};\nvar classes = {};\nvar tags = {};\nvar types = {};\nexports.DATA_KEY = '__blot';\nvar Scope;\n(function (Scope) {\n    Scope[Scope[\"TYPE\"] = 3] = \"TYPE\";\n    Scope[Scope[\"LEVEL\"] = 12] = \"LEVEL\";\n    Scope[Scope[\"ATTRIBUTE\"] = 13] = \"ATTRIBUTE\";\n    Scope[Scope[\"BLOT\"] = 14] = \"BLOT\";\n    Scope[Scope[\"INLINE\"] = 7] = \"INLINE\";\n    Scope[Scope[\"BLOCK\"] = 11] = \"BLOCK\";\n    Scope[Scope[\"BLOCK_BLOT\"] = 10] = \"BLOCK_BLOT\";\n    Scope[Scope[\"INLINE_BLOT\"] = 6] = \"INLINE_BLOT\";\n    Scope[Scope[\"BLOCK_ATTRIBUTE\"] = 9] = \"BLOCK_ATTRIBUTE\";\n    Scope[Scope[\"INLINE_ATTRIBUTE\"] = 5] = \"INLINE_ATTRIBUTE\";\n    Scope[Scope[\"ANY\"] = 15] = \"ANY\";\n})(Scope = exports.Scope || (exports.Scope = {}));\nfunction create(input, value) {\n    var match = query(input);\n    if (match == null) {\n        throw new ParchmentError(\"Unable to create \" + input + \" blot\");\n    }\n    var BlotClass = match;\n    var node = \n    // @ts-ignore\n    input instanceof Node || input['nodeType'] === Node.TEXT_NODE ? input : BlotClass.create(value);\n    return new BlotClass(node, value);\n}\nexports.create = create;\nfunction find(node, bubble) {\n    if (bubble === void 0) { bubble = false; }\n    if (node == null)\n        return null;\n    // @ts-ignore\n    if (node[exports.DATA_KEY] != null)\n        return node[exports.DATA_KEY].blot;\n    if (bubble)\n        return find(node.parentNode, bubble);\n    return null;\n}\nexports.find = find;\nfunction query(query, scope) {\n    if (scope === void 0) { scope = Scope.ANY; }\n    var match;\n    if (typeof query === 'string') {\n        match = types[query] || attributes[query];\n        // @ts-ignore\n    }\n    else if (query instanceof Text || query['nodeType'] === Node.TEXT_NODE) {\n        match = types['text'];\n    }\n    else if (typeof query === 'number') {\n        if (query & Scope.LEVEL & Scope.BLOCK) {\n            match = types['block'];\n        }\n        else if (query & Scope.LEVEL & Scope.INLINE) {\n            match = types['inline'];\n        }\n    }\n    else if (query instanceof HTMLElement) {\n        var names = (query.getAttribute('class') || '').split(/\\s+/);\n        for (var i in names) {\n            match = classes[names[i]];\n            if (match)\n                break;\n        }\n        match = match || tags[query.tagName];\n    }\n    if (match == null)\n        return null;\n    // @ts-ignore\n    if (scope & Scope.LEVEL & match.scope && scope & Scope.TYPE & match.scope)\n        return match;\n    return null;\n}\nexports.query = query;\nfunction register() {\n    var Definitions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        Definitions[_i] = arguments[_i];\n    }\n    if (Definitions.length > 1) {\n        return Definitions.map(function (d) {\n            return register(d);\n        });\n    }\n    var Definition = Definitions[0];\n    if (typeof Definition.blotName !== 'string' && typeof Definition.attrName !== 'string') {\n        throw new ParchmentError('Invalid definition');\n    }\n    else if (Definition.blotName === 'abstract') {\n        throw new ParchmentError('Cannot register abstract class');\n    }\n    types[Definition.blotName || Definition.attrName] = Definition;\n    if (typeof Definition.keyName === 'string') {\n        attributes[Definition.keyName] = Definition;\n    }\n    else {\n        if (Definition.className != null) {\n            classes[Definition.className] = Definition;\n        }\n        if (Definition.tagName != null) {\n            if (Array.isArray(Definition.tagName)) {\n                Definition.tagName = Definition.tagName.map(function (tagName) {\n                    return tagName.toUpperCase();\n                });\n            }\n            else {\n                Definition.tagName = Definition.tagName.toUpperCase();\n            }\n            var tagNames = Array.isArray(Definition.tagName) ? Definition.tagName : [Definition.tagName];\n            tagNames.forEach(function (tag) {\n                if (tags[tag] == null || Definition.className == null) {\n                    tags[tag] = Definition;\n                }\n            });\n        }\n    }\n    return Definition;\n}\nexports.register = register;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar diff = __webpack_require__(51);\nvar equal = __webpack_require__(11);\nvar extend = __webpack_require__(3);\nvar op = __webpack_require__(20);\n\n\nvar NULL_CHARACTER = String.fromCharCode(0);  // Placeholder char for embed in diff()\n\n\nvar Delta = function (ops) {\n  // Assume we are given a well formed ops\n  if (Array.isArray(ops)) {\n    this.ops = ops;\n  } else if (ops != null && Array.isArray(ops.ops)) {\n    this.ops = ops.ops;\n  } else {\n    this.ops = [];\n  }\n};\n\n\nDelta.prototype.insert = function (text, attributes) {\n  var newOp = {};\n  if (text.length === 0) return this;\n  newOp.insert = text;\n  if (attributes != null && typeof attributes === 'object' && Object.keys(attributes).length > 0) {\n    newOp.attributes = attributes;\n  }\n  return this.push(newOp);\n};\n\nDelta.prototype['delete'] = function (length) {\n  if (length <= 0) return this;\n  return this.push({ 'delete': length });\n};\n\nDelta.prototype.retain = function (length, attributes) {\n  if (length <= 0) return this;\n  var newOp = { retain: length };\n  if (attributes != null && typeof attributes === 'object' && Object.keys(attributes).length > 0) {\n    newOp.attributes = attributes;\n  }\n  return this.push(newOp);\n};\n\nDelta.prototype.push = function (newOp) {\n  var index = this.ops.length;\n  var lastOp = this.ops[index - 1];\n  newOp = extend(true, {}, newOp);\n  if (typeof lastOp === 'object') {\n    if (typeof newOp['delete'] === 'number' && typeof lastOp['delete'] === 'number') {\n      this.ops[index - 1] = { 'delete': lastOp['delete'] + newOp['delete'] };\n      return this;\n    }\n    // Since it does not matter if we insert before or after deleting at the same index,\n    // always prefer to insert first\n    if (typeof lastOp['delete'] === 'number' && newOp.insert != null) {\n      index -= 1;\n      lastOp = this.ops[index - 1];\n      if (typeof lastOp !== 'object') {\n        this.ops.unshift(newOp);\n        return this;\n      }\n    }\n    if (equal(newOp.attributes, lastOp.attributes)) {\n      if (typeof newOp.insert === 'string' && typeof lastOp.insert === 'string') {\n        this.ops[index - 1] = { insert: lastOp.insert + newOp.insert };\n        if (typeof newOp.attributes === 'object') this.ops[index - 1].attributes = newOp.attributes\n        return this;\n      } else if (typeof newOp.retain === 'number' && typeof lastOp.retain === 'number') {\n        this.ops[index - 1] = { retain: lastOp.retain + newOp.retain };\n        if (typeof newOp.attributes === 'object') this.ops[index - 1].attributes = newOp.attributes\n        return this;\n      }\n    }\n  }\n  if (index === this.ops.length) {\n    this.ops.push(newOp);\n  } else {\n    this.ops.splice(index, 0, newOp);\n  }\n  return this;\n};\n\nDelta.prototype.chop = function () {\n  var lastOp = this.ops[this.ops.length - 1];\n  if (lastOp && lastOp.retain && !lastOp.attributes) {\n    this.ops.pop();\n  }\n  return this;\n};\n\nDelta.prototype.filter = function (predicate) {\n  return this.ops.filter(predicate);\n};\n\nDelta.prototype.forEach = function (predicate) {\n  this.ops.forEach(predicate);\n};\n\nDelta.prototype.map = function (predicate) {\n  return this.ops.map(predicate);\n};\n\nDelta.prototype.partition = function (predicate) {\n  var passed = [], failed = [];\n  this.forEach(function(op) {\n    var target = predicate(op) ? passed : failed;\n    target.push(op);\n  });\n  return [passed, failed];\n};\n\nDelta.prototype.reduce = function (predicate, initial) {\n  return this.ops.reduce(predicate, initial);\n};\n\nDelta.prototype.changeLength = function () {\n  return this.reduce(function (length, elem) {\n    if (elem.insert) {\n      return length + op.length(elem);\n    } else if (elem.delete) {\n      return length - elem.delete;\n    }\n    return length;\n  }, 0);\n};\n\nDelta.prototype.length = function () {\n  return this.reduce(function (length, elem) {\n    return length + op.length(elem);\n  }, 0);\n};\n\nDelta.prototype.slice = function (start, end) {\n  start = start || 0;\n  if (typeof end !== 'number') end = Infinity;\n  var ops = [];\n  var iter = op.iterator(this.ops);\n  var index = 0;\n  while (index < end && iter.hasNext()) {\n    var nextOp;\n    if (index < start) {\n      nextOp = iter.next(start - index);\n    } else {\n      nextOp = iter.next(end - index);\n      ops.push(nextOp);\n    }\n    index += op.length(nextOp);\n  }\n  return new Delta(ops);\n};\n\n\nDelta.prototype.compose = function (other) {\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  var ops = [];\n  var firstOther = otherIter.peek();\n  if (firstOther != null && typeof firstOther.retain === 'number' && firstOther.attributes == null) {\n    var firstLeft = firstOther.retain;\n    while (thisIter.peekType() === 'insert' && thisIter.peekLength() <= firstLeft) {\n      firstLeft -= thisIter.peekLength();\n      ops.push(thisIter.next());\n    }\n    if (firstOther.retain - firstLeft > 0) {\n      otherIter.next(firstOther.retain - firstLeft);\n    }\n  }\n  var delta = new Delta(ops);\n  while (thisIter.hasNext() || otherIter.hasNext()) {\n    if (otherIter.peekType() === 'insert') {\n      delta.push(otherIter.next());\n    } else if (thisIter.peekType() === 'delete') {\n      delta.push(thisIter.next());\n    } else {\n      var length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n      var thisOp = thisIter.next(length);\n      var otherOp = otherIter.next(length);\n      if (typeof otherOp.retain === 'number') {\n        var newOp = {};\n        if (typeof thisOp.retain === 'number') {\n          newOp.retain = length;\n        } else {\n          newOp.insert = thisOp.insert;\n        }\n        // Preserve null when composing with a retain, otherwise remove it for inserts\n        var attributes = op.attributes.compose(thisOp.attributes, otherOp.attributes, typeof thisOp.retain === 'number');\n        if (attributes) newOp.attributes = attributes;\n        delta.push(newOp);\n\n        // Optimization if rest of other is just retain\n        if (!otherIter.hasNext() && equal(delta.ops[delta.ops.length - 1], newOp)) {\n          var rest = new Delta(thisIter.rest());\n          return delta.concat(rest).chop();\n        }\n\n      // Other op should be delete, we could be an insert or retain\n      // Insert + delete cancels out\n      } else if (typeof otherOp['delete'] === 'number' && typeof thisOp.retain === 'number') {\n        delta.push(otherOp);\n      }\n    }\n  }\n  return delta.chop();\n};\n\nDelta.prototype.concat = function (other) {\n  var delta = new Delta(this.ops.slice());\n  if (other.ops.length > 0) {\n    delta.push(other.ops[0]);\n    delta.ops = delta.ops.concat(other.ops.slice(1));\n  }\n  return delta;\n};\n\nDelta.prototype.diff = function (other, index) {\n  if (this.ops === other.ops) {\n    return new Delta();\n  }\n  var strings = [this, other].map(function (delta) {\n    return delta.map(function (op) {\n      if (op.insert != null) {\n        return typeof op.insert === 'string' ? op.insert : NULL_CHARACTER;\n      }\n      var prep = (delta === other) ? 'on' : 'with';\n      throw new Error('diff() called ' + prep + ' non-document');\n    }).join('');\n  });\n  var delta = new Delta();\n  var diffResult = diff(strings[0], strings[1], index);\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  diffResult.forEach(function (component) {\n    var length = component[1].length;\n    while (length > 0) {\n      var opLength = 0;\n      switch (component[0]) {\n        case diff.INSERT:\n          opLength = Math.min(otherIter.peekLength(), length);\n          delta.push(otherIter.next(opLength));\n          break;\n        case diff.DELETE:\n          opLength = Math.min(length, thisIter.peekLength());\n          thisIter.next(opLength);\n          delta['delete'](opLength);\n          break;\n        case diff.EQUAL:\n          opLength = Math.min(thisIter.peekLength(), otherIter.peekLength(), length);\n          var thisOp = thisIter.next(opLength);\n          var otherOp = otherIter.next(opLength);\n          if (equal(thisOp.insert, otherOp.insert)) {\n            delta.retain(opLength, op.attributes.diff(thisOp.attributes, otherOp.attributes));\n          } else {\n            delta.push(otherOp)['delete'](opLength);\n          }\n          break;\n      }\n      length -= opLength;\n    }\n  });\n  return delta.chop();\n};\n\nDelta.prototype.eachLine = function (predicate, newline) {\n  newline = newline || '\\n';\n  var iter = op.iterator(this.ops);\n  var line = new Delta();\n  var i = 0;\n  while (iter.hasNext()) {\n    if (iter.peekType() !== 'insert') return;\n    var thisOp = iter.peek();\n    var start = op.length(thisOp) - iter.peekLength();\n    var index = typeof thisOp.insert === 'string' ?\n      thisOp.insert.indexOf(newline, start) - start : -1;\n    if (index < 0) {\n      line.push(iter.next());\n    } else if (index > 0) {\n      line.push(iter.next(index));\n    } else {\n      if (predicate(line, iter.next(1).attributes || {}, i) === false) {\n        return;\n      }\n      i += 1;\n      line = new Delta();\n    }\n  }\n  if (line.length() > 0) {\n    predicate(line, {}, i);\n  }\n};\n\nDelta.prototype.transform = function (other, priority) {\n  priority = !!priority;\n  if (typeof other === 'number') {\n    return this.transformPosition(other, priority);\n  }\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  var delta = new Delta();\n  while (thisIter.hasNext() || otherIter.hasNext()) {\n    if (thisIter.peekType() === 'insert' && (priority || otherIter.peekType() !== 'insert')) {\n      delta.retain(op.length(thisIter.next()));\n    } else if (otherIter.peekType() === 'insert') {\n      delta.push(otherIter.next());\n    } else {\n      var length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n      var thisOp = thisIter.next(length);\n      var otherOp = otherIter.next(length);\n      if (thisOp['delete']) {\n        // Our delete either makes their delete redundant or removes their retain\n        continue;\n      } else if (otherOp['delete']) {\n        delta.push(otherOp);\n      } else {\n        // We retain either their retain or insert\n        delta.retain(length, op.attributes.transform(thisOp.attributes, otherOp.attributes, priority));\n      }\n    }\n  }\n  return delta.chop();\n};\n\nDelta.prototype.transformPosition = function (index, priority) {\n  priority = !!priority;\n  var thisIter = op.iterator(this.ops);\n  var offset = 0;\n  while (thisIter.hasNext() && offset <= index) {\n    var length = thisIter.peekLength();\n    var nextType = thisIter.peekType();\n    thisIter.next();\n    if (nextType === 'delete') {\n      index -= Math.min(length, index - offset);\n      continue;\n    } else if (nextType === 'insert' && (offset < index || !priority)) {\n      index += length;\n    }\n    offset += length;\n  }\n  return index;\n};\n\n\nmodule.exports = Delta;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.BlockEmbed = exports.bubbleFormats = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _extend = __webpack_require__(3);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _break = __webpack_require__(16);\n\nvar _break2 = _interopRequireDefault(_break);\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nvar _text = __webpack_require__(7);\n\nvar _text2 = _interopRequireDefault(_text);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar NEWLINE_LENGTH = 1;\n\nvar BlockEmbed = function (_Parchment$Embed) {\n  _inherits(BlockEmbed, _Parchment$Embed);\n\n  function BlockEmbed() {\n    _classCallCheck(this, BlockEmbed);\n\n    return _possibleConstructorReturn(this, (BlockEmbed.__proto__ || Object.getPrototypeOf(BlockEmbed)).apply(this, arguments));\n  }\n\n  _createClass(BlockEmbed, [{\n    key: 'attach',\n    value: function attach() {\n      _get(BlockEmbed.prototype.__proto__ || Object.getPrototypeOf(BlockEmbed.prototype), 'attach', this).call(this);\n      this.attributes = new _parchment2.default.Attributor.Store(this.domNode);\n    }\n  }, {\n    key: 'delta',\n    value: function delta() {\n      return new _quillDelta2.default().insert(this.value(), (0, _extend2.default)(this.formats(), this.attributes.values()));\n    }\n  }, {\n    key: 'format',\n    value: function format(name, value) {\n      var attribute = _parchment2.default.query(name, _parchment2.default.Scope.BLOCK_ATTRIBUTE);\n      if (attribute != null) {\n        this.attributes.attribute(attribute, value);\n      }\n    }\n  }, {\n    key: 'formatAt',\n    value: function formatAt(index, length, name, value) {\n      this.format(name, value);\n    }\n  }, {\n    key: 'insertAt',\n    value: function insertAt(index, value, def) {\n      if (typeof value === 'string' && value.endsWith('\\n')) {\n        var block = _parchment2.default.create(Block.blotName);\n        this.parent.insertBefore(block, index === 0 ? this : this.next);\n        block.insertAt(0, value.slice(0, -1));\n      } else {\n        _get(BlockEmbed.prototype.__proto__ || Object.getPrototypeOf(BlockEmbed.prototype), 'insertAt', this).call(this, index, value, def);\n      }\n    }\n  }]);\n\n  return BlockEmbed;\n}(_parchment2.default.Embed);\n\nBlockEmbed.scope = _parchment2.default.Scope.BLOCK_BLOT;\n// It is important for cursor behavior BlockEmbeds use tags that are block level elements\n\n\nvar Block = function (_Parchment$Block) {\n  _inherits(Block, _Parchment$Block);\n\n  function Block(domNode) {\n    _classCallCheck(this, Block);\n\n    var _this2 = _possibleConstructorReturn(this, (Block.__proto__ || Object.getPrototypeOf(Block)).call(this, domNode));\n\n    _this2.cache = {};\n    return _this2;\n  }\n\n  _createClass(Block, [{\n    key: 'delta',\n    value: function delta() {\n      if (this.cache.delta == null) {\n        this.cache.delta = this.descendants(_parchment2.default.Leaf).reduce(function (delta, leaf) {\n          if (leaf.length() === 0) {\n            return delta;\n          } else {\n            return delta.insert(leaf.value(), bubbleFormats(leaf));\n          }\n        }, new _quillDelta2.default()).insert('\\n', bubbleFormats(this));\n      }\n      return this.cache.delta;\n    }\n  }, {\n    key: 'deleteAt',\n    value: function deleteAt(index, length) {\n      _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'deleteAt', this).call(this, index, length);\n      this.cache = {};\n    }\n  }, {\n    key: 'formatAt',\n    value: function formatAt(index, length, name, value) {\n      if (length <= 0) return;\n      if (_parchment2.default.query(name, _parchment2.default.Scope.BLOCK)) {\n        if (index + length === this.length()) {\n          this.format(name, value);\n        }\n      } else {\n        _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'formatAt', this).call(this, index, Math.min(length, this.length() - index - 1), name, value);\n      }\n      this.cache = {};\n    }\n  }, {\n    key: 'insertAt',\n    value: function insertAt(index, value, def) {\n      if (def != null) return _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'insertAt', this).call(this, index, value, def);\n      if (value.length === 0) return;\n      var lines = value.split('\\n');\n      var text = lines.shift();\n      if (text.length > 0) {\n        if (index < this.length() - 1 || this.children.tail == null) {\n          _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'insertAt', this).call(this, Math.min(index, this.length() - 1), text);\n        } else {\n          this.children.tail.insertAt(this.children.tail.length(), text);\n        }\n        this.cache = {};\n      }\n      var block = this;\n      lines.reduce(function (index, line) {\n        block = block.split(index, true);\n        block.insertAt(0, line);\n        return line.length;\n      }, index + text.length);\n    }\n  }, {\n    key: 'insertBefore',\n    value: function insertBefore(blot, ref) {\n      var head = this.children.head;\n      _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'insertBefore', this).call(this, blot, ref);\n      if (head instanceof _break2.default) {\n        head.remove();\n      }\n      this.cache = {};\n    }\n  }, {\n    key: 'length',\n    value: function length() {\n      if (this.cache.length == null) {\n        this.cache.length = _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'length', this).call(this) + NEWLINE_LENGTH;\n      }\n      return this.cache.length;\n    }\n  }, {\n    key: 'moveChildren',\n    value: function moveChildren(target, ref) {\n      _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'moveChildren', this).call(this, target, ref);\n      this.cache = {};\n    }\n  }, {\n    key: 'optimize',\n    value: function optimize(context) {\n      _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'optimize', this).call(this, context);\n      this.cache = {};\n    }\n  }, {\n    key: 'path',\n    value: function path(index) {\n      return _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'path', this).call(this, index, true);\n    }\n  }, {\n    key: 'removeChild',\n    value: function removeChild(child) {\n      _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'removeChild', this).call(this, child);\n      this.cache = {};\n    }\n  }, {\n    key: 'split',\n    value: function split(index) {\n      var force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (force && (index === 0 || index >= this.length() - NEWLINE_LENGTH)) {\n        var clone = this.clone();\n        if (index === 0) {\n          this.parent.insertBefore(clone, this);\n          return this;\n        } else {\n          this.parent.insertBefore(clone, this.next);\n          return clone;\n        }\n      } else {\n        var next = _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'split', this).call(this, index, force);\n        this.cache = {};\n        return next;\n      }\n    }\n  }]);\n\n  return Block;\n}(_parchment2.default.Block);\n\nBlock.blotName = 'block';\nBlock.tagName = 'P';\nBlock.defaultChild = 'break';\nBlock.allowedChildren = [_inline2.default, _parchment2.default.Embed, _text2.default];\n\nfunction bubbleFormats(blot) {\n  var formats = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (blot == null) return formats;\n  if (typeof blot.formats === 'function') {\n    formats = (0, _extend2.default)(formats, blot.formats());\n  }\n  if (blot.parent == null || blot.parent.blotName == 'scroll' || blot.parent.statics.scope !== blot.statics.scope) {\n    return formats;\n  }\n  return bubbleFormats(blot.parent, formats);\n}\n\nexports.bubbleFormats = bubbleFormats;\nexports.BlockEmbed = BlockEmbed;\nexports.default = Block;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.overload = exports.expandConfig = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n__webpack_require__(50);\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _editor = __webpack_require__(14);\n\nvar _editor2 = _interopRequireDefault(_editor);\n\nvar _emitter3 = __webpack_require__(8);\n\nvar _emitter4 = _interopRequireDefault(_emitter3);\n\nvar _module = __webpack_require__(9);\n\nvar _module2 = _interopRequireDefault(_module);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _selection = __webpack_require__(15);\n\nvar _selection2 = _interopRequireDefault(_selection);\n\nvar _extend = __webpack_require__(3);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nvar _logger = __webpack_require__(10);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _theme = __webpack_require__(34);\n\nvar _theme2 = _interopRequireDefault(_theme);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar debug = (0, _logger2.default)('quill');\n\nvar Quill = function () {\n  _createClass(Quill, null, [{\n    key: 'debug',\n    value: function debug(limit) {\n      if (limit === true) {\n        limit = 'log';\n      }\n      _logger2.default.level(limit);\n    }\n  }, {\n    key: 'find',\n    value: function find(node) {\n      return node.__quill || _parchment2.default.find(node);\n    }\n  }, {\n    key: 'import',\n    value: function _import(name) {\n      if (this.imports[name] == null) {\n        debug.error('Cannot import ' + name + '. Are you sure it was registered?');\n      }\n      return this.imports[name];\n    }\n  }, {\n    key: 'register',\n    value: function register(path, target) {\n      var _this = this;\n\n      var overwrite = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (typeof path !== 'string') {\n        var name = path.attrName || path.blotName;\n        if (typeof name === 'string') {\n          // register(Blot | Attributor, overwrite)\n          this.register('formats/' + name, path, target);\n        } else {\n          Object.keys(path).forEach(function (key) {\n            _this.register(key, path[key], target);\n          });\n        }\n      } else {\n        if (this.imports[path] != null && !overwrite) {\n          debug.warn('Overwriting ' + path + ' with', target);\n        }\n        this.imports[path] = target;\n        if ((path.startsWith('blots/') || path.startsWith('formats/')) && target.blotName !== 'abstract') {\n          _parchment2.default.register(target);\n        } else if (path.startsWith('modules') && typeof target.register === 'function') {\n          target.register();\n        }\n      }\n    }\n  }]);\n\n  function Quill(container) {\n    var _this2 = this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Quill);\n\n    this.options = expandConfig(container, options);\n    this.container = this.options.container;\n    if (this.container == null) {\n      return debug.error('Invalid Quill container', container);\n    }\n    if (this.options.debug) {\n      Quill.debug(this.options.debug);\n    }\n    var html = this.container.innerHTML.trim();\n    this.container.classList.add('ql-container');\n    this.container.innerHTML = '';\n    this.container.__quill = this;\n    this.root = this.addContainer('ql-editor');\n    this.root.classList.add('ql-blank');\n    this.root.setAttribute('data-gramm', false);\n    this.scrollingContainer = this.options.scrollingContainer || this.root;\n    this.emitter = new _emitter4.default();\n    this.scroll = _parchment2.default.create(this.root, {\n      emitter: this.emitter,\n      whitelist: this.options.formats\n    });\n    this.editor = new _editor2.default(this.scroll);\n    this.selection = new _selection2.default(this.scroll, this.emitter);\n    this.theme = new this.options.theme(this, this.options);\n    this.keyboard = this.theme.addModule('keyboard');\n    this.clipboard = this.theme.addModule('clipboard');\n    this.history = this.theme.addModule('history');\n    this.theme.init();\n    this.emitter.on(_emitter4.default.events.EDITOR_CHANGE, function (type) {\n      if (type === _emitter4.default.events.TEXT_CHANGE) {\n        _this2.root.classList.toggle('ql-blank', _this2.editor.isBlank());\n      }\n    });\n    this.emitter.on(_emitter4.default.events.SCROLL_UPDATE, function (source, mutations) {\n      var range = _this2.selection.lastRange;\n      var index = range && range.length === 0 ? range.index : undefined;\n      modify.call(_this2, function () {\n        return _this2.editor.update(null, mutations, index);\n      }, source);\n    });\n    var contents = this.clipboard.convert('<div class=\\'ql-editor\\' style=\"white-space: normal;\">' + html + '<p><br></p></div>');\n    this.setContents(contents);\n    this.history.clear();\n    if (this.options.placeholder) {\n      this.root.setAttribute('data-placeholder', this.options.placeholder);\n    }\n    if (this.options.readOnly) {\n      this.disable();\n    }\n  }\n\n  _createClass(Quill, [{\n    key: 'addContainer',\n    value: function addContainer(container) {\n      var refNode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      if (typeof container === 'string') {\n        var className = container;\n        container = document.createElement('div');\n        container.classList.add(className);\n      }\n      this.container.insertBefore(container, refNode);\n      return container;\n    }\n  }, {\n    key: 'blur',\n    value: function blur() {\n      this.selection.setRange(null);\n    }\n  }, {\n    key: 'deleteText',\n    value: function deleteText(index, length, source) {\n      var _this3 = this;\n\n      var _overload = overload(index, length, source);\n\n      var _overload2 = _slicedToArray(_overload, 4);\n\n      index = _overload2[0];\n      length = _overload2[1];\n      source = _overload2[3];\n\n      return modify.call(this, function () {\n        return _this3.editor.deleteText(index, length);\n      }, source, index, -1 * length);\n    }\n  }, {\n    key: 'disable',\n    value: function disable() {\n      this.enable(false);\n    }\n  }, {\n    key: 'enable',\n    value: function enable() {\n      var enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      this.scroll.enable(enabled);\n      this.container.classList.toggle('ql-disabled', !enabled);\n    }\n  }, {\n    key: 'focus',\n    value: function focus() {\n      var scrollTop = this.scrollingContainer.scrollTop;\n      this.selection.focus();\n      this.scrollingContainer.scrollTop = scrollTop;\n      this.scrollIntoView();\n    }\n  }, {\n    key: 'format',\n    value: function format(name, value) {\n      var _this4 = this;\n\n      var source = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _emitter4.default.sources.API;\n\n      return modify.call(this, function () {\n        var range = _this4.getSelection(true);\n        var change = new _quillDelta2.default();\n        if (range == null) {\n          return change;\n        } else if (_parchment2.default.query(name, _parchment2.default.Scope.BLOCK)) {\n          change = _this4.editor.formatLine(range.index, range.length, _defineProperty({}, name, value));\n        } else if (range.length === 0) {\n          _this4.selection.format(name, value);\n          return change;\n        } else {\n          change = _this4.editor.formatText(range.index, range.length, _defineProperty({}, name, value));\n        }\n        _this4.setSelection(range, _emitter4.default.sources.SILENT);\n        return change;\n      }, source);\n    }\n  }, {\n    key: 'formatLine',\n    value: function formatLine(index, length, name, value, source) {\n      var _this5 = this;\n\n      var formats = void 0;\n\n      var _overload3 = overload(index, length, name, value, source);\n\n      var _overload4 = _slicedToArray(_overload3, 4);\n\n      index = _overload4[0];\n      length = _overload4[1];\n      formats = _overload4[2];\n      source = _overload4[3];\n\n      return modify.call(this, function () {\n        return _this5.editor.formatLine(index, length, formats);\n      }, source, index, 0);\n    }\n  }, {\n    key: 'formatText',\n    value: function formatText(index, length, name, value, source) {\n      var _this6 = this;\n\n      var formats = void 0;\n\n      var _overload5 = overload(index, length, name, value, source);\n\n      var _overload6 = _slicedToArray(_overload5, 4);\n\n      index = _overload6[0];\n      length = _overload6[1];\n      formats = _overload6[2];\n      source = _overload6[3];\n\n      return modify.call(this, function () {\n        return _this6.editor.formatText(index, length, formats);\n      }, source, index, 0);\n    }\n  }, {\n    key: 'getBounds',\n    value: function getBounds(index) {\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      var bounds = void 0;\n      if (typeof index === 'number') {\n        bounds = this.selection.getBounds(index, length);\n      } else {\n        bounds = this.selection.getBounds(index.index, index.length);\n      }\n      var containerBounds = this.container.getBoundingClientRect();\n      return {\n        bottom: bounds.bottom - containerBounds.top,\n        height: bounds.height,\n        left: bounds.left - containerBounds.left,\n        right: bounds.right - containerBounds.left,\n        top: bounds.top - containerBounds.top,\n        width: bounds.width\n      };\n    }\n  }, {\n    key: 'getContents',\n    value: function getContents() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.getLength() - index;\n\n      var _overload7 = overload(index, length);\n\n      var _overload8 = _slicedToArray(_overload7, 2);\n\n      index = _overload8[0];\n      length = _overload8[1];\n\n      return this.editor.getContents(index, length);\n    }\n  }, {\n    key: 'getFormat',\n    value: function getFormat() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.getSelection(true);\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      if (typeof index === 'number') {\n        return this.editor.getFormat(index, length);\n      } else {\n        return this.editor.getFormat(index.index, index.length);\n      }\n    }\n  }, {\n    key: 'getIndex',\n    value: function getIndex(blot) {\n      return blot.offset(this.scroll);\n    }\n  }, {\n    key: 'getLength',\n    value: function getLength() {\n      return this.scroll.length();\n    }\n  }, {\n    key: 'getLeaf',\n    value: function getLeaf(index) {\n      return this.scroll.leaf(index);\n    }\n  }, {\n    key: 'getLine',\n    value: function getLine(index) {\n      return this.scroll.line(index);\n    }\n  }, {\n    key: 'getLines',\n    value: function getLines() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Number.MAX_VALUE;\n\n      if (typeof index !== 'number') {\n        return this.scroll.lines(index.index, index.length);\n      } else {\n        return this.scroll.lines(index, length);\n      }\n    }\n  }, {\n    key: 'getModule',\n    value: function getModule(name) {\n      return this.theme.modules[name];\n    }\n  }, {\n    key: 'getSelection',\n    value: function getSelection() {\n      var focus = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (focus) this.focus();\n      this.update(); // Make sure we access getRange with editor in consistent state\n      return this.selection.getRange()[0];\n    }\n  }, {\n    key: 'getText',\n    value: function getText() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.getLength() - index;\n\n      var _overload9 = overload(index, length);\n\n      var _overload10 = _slicedToArray(_overload9, 2);\n\n      index = _overload10[0];\n      length = _overload10[1];\n\n      return this.editor.getText(index, length);\n    }\n  }, {\n    key: 'hasFocus',\n    value: function hasFocus() {\n      return this.selection.hasFocus();\n    }\n  }, {\n    key: 'insertEmbed',\n    value: function insertEmbed(index, embed, value) {\n      var _this7 = this;\n\n      var source = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : Quill.sources.API;\n\n      return modify.call(this, function () {\n        return _this7.editor.insertEmbed(index, embed, value);\n      }, source, index);\n    }\n  }, {\n    key: 'insertText',\n    value: function insertText(index, text, name, value, source) {\n      var _this8 = this;\n\n      var formats = void 0;\n\n      var _overload11 = overload(index, 0, name, value, source);\n\n      var _overload12 = _slicedToArray(_overload11, 4);\n\n      index = _overload12[0];\n      formats = _overload12[2];\n      source = _overload12[3];\n\n      return modify.call(this, function () {\n        return _this8.editor.insertText(index, text, formats);\n      }, source, index, text.length);\n    }\n  }, {\n    key: 'isEnabled',\n    value: function isEnabled() {\n      return !this.container.classList.contains('ql-disabled');\n    }\n  }, {\n    key: 'off',\n    value: function off() {\n      return this.emitter.off.apply(this.emitter, arguments);\n    }\n  }, {\n    key: 'on',\n    value: function on() {\n      return this.emitter.on.apply(this.emitter, arguments);\n    }\n  }, {\n    key: 'once',\n    value: function once() {\n      return this.emitter.once.apply(this.emitter, arguments);\n    }\n  }, {\n    key: 'pasteHTML',\n    value: function pasteHTML(index, html, source) {\n      this.clipboard.dangerouslyPasteHTML(index, html, source);\n    }\n  }, {\n    key: 'removeFormat',\n    value: function removeFormat(index, length, source) {\n      var _this9 = this;\n\n      var _overload13 = overload(index, length, source);\n\n      var _overload14 = _slicedToArray(_overload13, 4);\n\n      index = _overload14[0];\n      length = _overload14[1];\n      source = _overload14[3];\n\n      return modify.call(this, function () {\n        return _this9.editor.removeFormat(index, length);\n      }, source, index);\n    }\n  }, {\n    key: 'scrollIntoView',\n    value: function scrollIntoView() {\n      this.selection.scrollIntoView(this.scrollingContainer);\n    }\n  }, {\n    key: 'setContents',\n    value: function setContents(delta) {\n      var _this10 = this;\n\n      var source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _emitter4.default.sources.API;\n\n      return modify.call(this, function () {\n        delta = new _quillDelta2.default(delta);\n        var length = _this10.getLength();\n        var deleted = _this10.editor.deleteText(0, length);\n        var applied = _this10.editor.applyDelta(delta);\n        var lastOp = applied.ops[applied.ops.length - 1];\n        if (lastOp != null && typeof lastOp.insert === 'string' && lastOp.insert[lastOp.insert.length - 1] === '\\n') {\n          _this10.editor.deleteText(_this10.getLength() - 1, 1);\n          applied.delete(1);\n        }\n        var ret = deleted.compose(applied);\n        return ret;\n      }, source);\n    }\n  }, {\n    key: 'setSelection',\n    value: function setSelection(index, length, source) {\n      if (index == null) {\n        this.selection.setRange(null, length || Quill.sources.API);\n      } else {\n        var _overload15 = overload(index, length, source);\n\n        var _overload16 = _slicedToArray(_overload15, 4);\n\n        index = _overload16[0];\n        length = _overload16[1];\n        source = _overload16[3];\n\n        this.selection.setRange(new _selection.Range(index, length), source);\n        if (source !== _emitter4.default.sources.SILENT) {\n          this.selection.scrollIntoView(this.scrollingContainer);\n        }\n      }\n    }\n  }, {\n    key: 'setText',\n    value: function setText(text) {\n      var source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _emitter4.default.sources.API;\n\n      var delta = new _quillDelta2.default().insert(text);\n      return this.setContents(delta, source);\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _emitter4.default.sources.USER;\n\n      var change = this.scroll.update(source); // Will update selection before selection.update() does if text changes\n      this.selection.update(source);\n      return change;\n    }\n  }, {\n    key: 'updateContents',\n    value: function updateContents(delta) {\n      var _this11 = this;\n\n      var source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _emitter4.default.sources.API;\n\n      return modify.call(this, function () {\n        delta = new _quillDelta2.default(delta);\n        return _this11.editor.applyDelta(delta, source);\n      }, source, true);\n    }\n  }]);\n\n  return Quill;\n}();\n\nQuill.DEFAULTS = {\n  bounds: null,\n  formats: null,\n  modules: {},\n  placeholder: '',\n  readOnly: false,\n  scrollingContainer: null,\n  strict: true,\n  theme: 'default'\n};\nQuill.events = _emitter4.default.events;\nQuill.sources = _emitter4.default.sources;\n// eslint-disable-next-line no-undef\nQuill.version =  false ? 'dev' : \"1.3.7\";\n\nQuill.imports = {\n  'delta': _quillDelta2.default,\n  'parchment': _parchment2.default,\n  'core/module': _module2.default,\n  'core/theme': _theme2.default\n};\n\nfunction expandConfig(container, userConfig) {\n  userConfig = (0, _extend2.default)(true, {\n    container: container,\n    modules: {\n      clipboard: true,\n      keyboard: true,\n      history: true\n    }\n  }, userConfig);\n  if (!userConfig.theme || userConfig.theme === Quill.DEFAULTS.theme) {\n    userConfig.theme = _theme2.default;\n  } else {\n    userConfig.theme = Quill.import('themes/' + userConfig.theme);\n    if (userConfig.theme == null) {\n      throw new Error('Invalid theme ' + userConfig.theme + '. Did you register it?');\n    }\n  }\n  var themeConfig = (0, _extend2.default)(true, {}, userConfig.theme.DEFAULTS);\n  [themeConfig, userConfig].forEach(function (config) {\n    config.modules = config.modules || {};\n    Object.keys(config.modules).forEach(function (module) {\n      if (config.modules[module] === true) {\n        config.modules[module] = {};\n      }\n    });\n  });\n  var moduleNames = Object.keys(themeConfig.modules).concat(Object.keys(userConfig.modules));\n  var moduleConfig = moduleNames.reduce(function (config, name) {\n    var moduleClass = Quill.import('modules/' + name);\n    if (moduleClass == null) {\n      debug.error('Cannot load ' + name + ' module. Are you sure you registered it?');\n    } else {\n      config[name] = moduleClass.DEFAULTS || {};\n    }\n    return config;\n  }, {});\n  // Special case toolbar shorthand\n  if (userConfig.modules != null && userConfig.modules.toolbar && userConfig.modules.toolbar.constructor !== Object) {\n    userConfig.modules.toolbar = {\n      container: userConfig.modules.toolbar\n    };\n  }\n  userConfig = (0, _extend2.default)(true, {}, Quill.DEFAULTS, { modules: moduleConfig }, themeConfig, userConfig);\n  ['bounds', 'container', 'scrollingContainer'].forEach(function (key) {\n    if (typeof userConfig[key] === 'string') {\n      userConfig[key] = document.querySelector(userConfig[key]);\n    }\n  });\n  userConfig.modules = Object.keys(userConfig.modules).reduce(function (config, name) {\n    if (userConfig.modules[name]) {\n      config[name] = userConfig.modules[name];\n    }\n    return config;\n  }, {});\n  return userConfig;\n}\n\n// Handle selection preservation and TEXT_CHANGE emission\n// common to modification APIs\nfunction modify(modifier, source, index, shift) {\n  if (this.options.strict && !this.isEnabled() && source === _emitter4.default.sources.USER) {\n    return new _quillDelta2.default();\n  }\n  var range = index == null ? null : this.getSelection();\n  var oldDelta = this.editor.delta;\n  var change = modifier();\n  if (range != null) {\n    if (index === true) index = range.index;\n    if (shift == null) {\n      range = shiftRange(range, change, source);\n    } else if (shift !== 0) {\n      range = shiftRange(range, index, shift, source);\n    }\n    this.setSelection(range, _emitter4.default.sources.SILENT);\n  }\n  if (change.length() > 0) {\n    var _emitter;\n\n    var args = [_emitter4.default.events.TEXT_CHANGE, change, oldDelta, source];\n    (_emitter = this.emitter).emit.apply(_emitter, [_emitter4.default.events.EDITOR_CHANGE].concat(args));\n    if (source !== _emitter4.default.sources.SILENT) {\n      var _emitter2;\n\n      (_emitter2 = this.emitter).emit.apply(_emitter2, args);\n    }\n  }\n  return change;\n}\n\nfunction overload(index, length, name, value, source) {\n  var formats = {};\n  if (typeof index.index === 'number' && typeof index.length === 'number') {\n    // Allow for throwaway end (used by insertText/insertEmbed)\n    if (typeof length !== 'number') {\n      source = value, value = name, name = length, length = index.length, index = index.index;\n    } else {\n      length = index.length, index = index.index;\n    }\n  } else if (typeof length !== 'number') {\n    source = value, value = name, name = length, length = 0;\n  }\n  // Handle format being object, two format name/value strings or excluded\n  if ((typeof name === 'undefined' ? 'undefined' : _typeof(name)) === 'object') {\n    formats = name;\n    source = value;\n  } else if (typeof name === 'string') {\n    if (value != null) {\n      formats[name] = value;\n    } else {\n      source = name;\n    }\n  }\n  // Handle optional source\n  source = source || _emitter4.default.sources.API;\n  return [index, length, formats, source];\n}\n\nfunction shiftRange(range, index, length, source) {\n  if (range == null) return null;\n  var start = void 0,\n      end = void 0;\n  if (index instanceof _quillDelta2.default) {\n    var _map = [range.index, range.index + range.length].map(function (pos) {\n      return index.transformPosition(pos, source !== _emitter4.default.sources.USER);\n    });\n\n    var _map2 = _slicedToArray(_map, 2);\n\n    start = _map2[0];\n    end = _map2[1];\n  } else {\n    var _map3 = [range.index, range.index + range.length].map(function (pos) {\n      if (pos < index || pos === index && source === _emitter4.default.sources.USER) return pos;\n      if (length >= 0) {\n        return pos + length;\n      } else {\n        return Math.max(index, pos + length);\n      }\n    });\n\n    var _map4 = _slicedToArray(_map3, 2);\n\n    start = _map4[0];\n    end = _map4[1];\n  }\n  return new _selection.Range(start, end - start);\n}\n\nexports.expandConfig = expandConfig;\nexports.overload = overload;\nexports.default = Quill;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _text = __webpack_require__(7);\n\nvar _text2 = _interopRequireDefault(_text);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Inline = function (_Parchment$Inline) {\n  _inherits(Inline, _Parchment$Inline);\n\n  function Inline() {\n    _classCallCheck(this, Inline);\n\n    return _possibleConstructorReturn(this, (Inline.__proto__ || Object.getPrototypeOf(Inline)).apply(this, arguments));\n  }\n\n  _createClass(Inline, [{\n    key: 'formatAt',\n    value: function formatAt(index, length, name, value) {\n      if (Inline.compare(this.statics.blotName, name) < 0 && _parchment2.default.query(name, _parchment2.default.Scope.BLOT)) {\n        var blot = this.isolate(index, length);\n        if (value) {\n          blot.wrap(name, value);\n        }\n      } else {\n        _get(Inline.prototype.__proto__ || Object.getPrototypeOf(Inline.prototype), 'formatAt', this).call(this, index, length, name, value);\n      }\n    }\n  }, {\n    key: 'optimize',\n    value: function optimize(context) {\n      _get(Inline.prototype.__proto__ || Object.getPrototypeOf(Inline.prototype), 'optimize', this).call(this, context);\n      if (this.parent instanceof Inline && Inline.compare(this.statics.blotName, this.parent.statics.blotName) > 0) {\n        var parent = this.parent.isolate(this.offset(), this.length());\n        this.moveChildren(parent);\n        parent.wrap(this);\n      }\n    }\n  }], [{\n    key: 'compare',\n    value: function compare(self, other) {\n      var selfIndex = Inline.order.indexOf(self);\n      var otherIndex = Inline.order.indexOf(other);\n      if (selfIndex >= 0 || otherIndex >= 0) {\n        return selfIndex - otherIndex;\n      } else if (self === other) {\n        return 0;\n      } else if (self < other) {\n        return -1;\n      } else {\n        return 1;\n      }\n    }\n  }]);\n\n  return Inline;\n}(_parchment2.default.Inline);\n\nInline.allowedChildren = [Inline, _parchment2.default.Embed, _text2.default];\n// Lower index means deeper in the DOM tree, since not found (-1) is for embeds\nInline.order = ['cursor', 'inline', // Must be lower\n'underline', 'strike', 'italic', 'bold', 'script', 'link', 'code' // Must be higher\n];\n\nexports.default = Inline;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar TextBlot = function (_Parchment$Text) {\n  _inherits(TextBlot, _Parchment$Text);\n\n  function TextBlot() {\n    _classCallCheck(this, TextBlot);\n\n    return _possibleConstructorReturn(this, (TextBlot.__proto__ || Object.getPrototypeOf(TextBlot)).apply(this, arguments));\n  }\n\n  return TextBlot;\n}(_parchment2.default.Text);\n\nexports.default = TextBlot;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _eventemitter = __webpack_require__(54);\n\nvar _eventemitter2 = _interopRequireDefault(_eventemitter);\n\nvar _logger = __webpack_require__(10);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar debug = (0, _logger2.default)('quill:events');\n\nvar EVENTS = ['selectionchange', 'mousedown', 'mouseup', 'click'];\n\nEVENTS.forEach(function (eventName) {\n  document.addEventListener(eventName, function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    [].slice.call(document.querySelectorAll('.ql-container')).forEach(function (node) {\n      // TODO use WeakMap\n      if (node.__quill && node.__quill.emitter) {\n        var _node$__quill$emitter;\n\n        (_node$__quill$emitter = node.__quill.emitter).handleDOM.apply(_node$__quill$emitter, args);\n      }\n    });\n  });\n});\n\nvar Emitter = function (_EventEmitter) {\n  _inherits(Emitter, _EventEmitter);\n\n  function Emitter() {\n    _classCallCheck(this, Emitter);\n\n    var _this = _possibleConstructorReturn(this, (Emitter.__proto__ || Object.getPrototypeOf(Emitter)).call(this));\n\n    _this.listeners = {};\n    _this.on('error', debug.error);\n    return _this;\n  }\n\n  _createClass(Emitter, [{\n    key: 'emit',\n    value: function emit() {\n      debug.log.apply(debug, arguments);\n      _get(Emitter.prototype.__proto__ || Object.getPrototypeOf(Emitter.prototype), 'emit', this).apply(this, arguments);\n    }\n  }, {\n    key: 'handleDOM',\n    value: function handleDOM(event) {\n      for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      (this.listeners[event.type] || []).forEach(function (_ref) {\n        var node = _ref.node,\n            handler = _ref.handler;\n\n        if (event.target === node || node.contains(event.target)) {\n          handler.apply(undefined, [event].concat(args));\n        }\n      });\n    }\n  }, {\n    key: 'listenDOM',\n    value: function listenDOM(eventName, node, handler) {\n      if (!this.listeners[eventName]) {\n        this.listeners[eventName] = [];\n      }\n      this.listeners[eventName].push({ node: node, handler: handler });\n    }\n  }]);\n\n  return Emitter;\n}(_eventemitter2.default);\n\nEmitter.events = {\n  EDITOR_CHANGE: 'editor-change',\n  SCROLL_BEFORE_UPDATE: 'scroll-before-update',\n  SCROLL_OPTIMIZE: 'scroll-optimize',\n  SCROLL_UPDATE: 'scroll-update',\n  SELECTION_CHANGE: 'selection-change',\n  TEXT_CHANGE: 'text-change'\n};\nEmitter.sources = {\n  API: 'api',\n  SILENT: 'silent',\n  USER: 'user'\n};\n\nexports.default = Emitter;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Module = function Module(quill) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  _classCallCheck(this, Module);\n\n  this.quill = quill;\n  this.options = options;\n};\n\nModule.DEFAULTS = {};\n\nexports.default = Module;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar levels = ['error', 'warn', 'log', 'info'];\nvar level = 'warn';\n\nfunction debug(method) {\n  if (levels.indexOf(method) <= levels.indexOf(level)) {\n    var _console;\n\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    (_console = console)[method].apply(_console, args); // eslint-disable-line no-console\n  }\n}\n\nfunction namespace(ns) {\n  return levels.reduce(function (logger, method) {\n    logger[method] = debug.bind(console, method, ns);\n    return logger;\n  }, {});\n}\n\ndebug.level = namespace.level = function (newLevel) {\n  level = newLevel;\n};\n\nexports.default = namespace;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar pSlice = Array.prototype.slice;\nvar objectKeys = __webpack_require__(52);\nvar isArguments = __webpack_require__(53);\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Registry = __webpack_require__(1);\nvar Attributor = /** @class */ (function () {\n    function Attributor(attrName, keyName, options) {\n        if (options === void 0) { options = {}; }\n        this.attrName = attrName;\n        this.keyName = keyName;\n        var attributeBit = Registry.Scope.TYPE & Registry.Scope.ATTRIBUTE;\n        if (options.scope != null) {\n            // Ignore type bits, force attribute bit\n            this.scope = (options.scope & Registry.Scope.LEVEL) | attributeBit;\n        }\n        else {\n            this.scope = Registry.Scope.ATTRIBUTE;\n        }\n        if (options.whitelist != null)\n            this.whitelist = options.whitelist;\n    }\n    Attributor.keys = function (node) {\n        return [].map.call(node.attributes, function (item) {\n            return item.name;\n        });\n    };\n    Attributor.prototype.add = function (node, value) {\n        if (!this.canAdd(node, value))\n            return false;\n        node.setAttribute(this.keyName, value);\n        return true;\n    };\n    Attributor.prototype.canAdd = function (node, value) {\n        var match = Registry.query(node, Registry.Scope.BLOT & (this.scope | Registry.Scope.TYPE));\n        if (match == null)\n            return false;\n        if (this.whitelist == null)\n            return true;\n        if (typeof value === 'string') {\n            return this.whitelist.indexOf(value.replace(/[\"']/g, '')) > -1;\n        }\n        else {\n            return this.whitelist.indexOf(value) > -1;\n        }\n    };\n    Attributor.prototype.remove = function (node) {\n        node.removeAttribute(this.keyName);\n    };\n    Attributor.prototype.value = function (node) {\n        var value = node.getAttribute(this.keyName);\n        if (this.canAdd(node, value) && value) {\n            return value;\n        }\n        return '';\n    };\n    return Attributor;\n}());\nexports.default = Attributor;\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.Code = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nvar _text = __webpack_require__(7);\n\nvar _text2 = _interopRequireDefault(_text);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Code = function (_Inline) {\n  _inherits(Code, _Inline);\n\n  function Code() {\n    _classCallCheck(this, Code);\n\n    return _possibleConstructorReturn(this, (Code.__proto__ || Object.getPrototypeOf(Code)).apply(this, arguments));\n  }\n\n  return Code;\n}(_inline2.default);\n\nCode.blotName = 'code';\nCode.tagName = 'CODE';\n\nvar CodeBlock = function (_Block) {\n  _inherits(CodeBlock, _Block);\n\n  function CodeBlock() {\n    _classCallCheck(this, CodeBlock);\n\n    return _possibleConstructorReturn(this, (CodeBlock.__proto__ || Object.getPrototypeOf(CodeBlock)).apply(this, arguments));\n  }\n\n  _createClass(CodeBlock, [{\n    key: 'delta',\n    value: function delta() {\n      var _this3 = this;\n\n      var text = this.domNode.textContent;\n      if (text.endsWith('\\n')) {\n        // Should always be true\n        text = text.slice(0, -1);\n      }\n      return text.split('\\n').reduce(function (delta, frag) {\n        return delta.insert(frag).insert('\\n', _this3.formats());\n      }, new _quillDelta2.default());\n    }\n  }, {\n    key: 'format',\n    value: function format(name, value) {\n      if (name === this.statics.blotName && value) return;\n\n      var _descendant = this.descendant(_text2.default, this.length() - 1),\n          _descendant2 = _slicedToArray(_descendant, 1),\n          text = _descendant2[0];\n\n      if (text != null) {\n        text.deleteAt(text.length() - 1, 1);\n      }\n      _get(CodeBlock.prototype.__proto__ || Object.getPrototypeOf(CodeBlock.prototype), 'format', this).call(this, name, value);\n    }\n  }, {\n    key: 'formatAt',\n    value: function formatAt(index, length, name, value) {\n      if (length === 0) return;\n      if (_parchment2.default.query(name, _parchment2.default.Scope.BLOCK) == null || name === this.statics.blotName && value === this.statics.formats(this.domNode)) {\n        return;\n      }\n      var nextNewline = this.newlineIndex(index);\n      if (nextNewline < 0 || nextNewline >= index + length) return;\n      var prevNewline = this.newlineIndex(index, true) + 1;\n      var isolateLength = nextNewline - prevNewline + 1;\n      var blot = this.isolate(prevNewline, isolateLength);\n      var next = blot.next;\n      blot.format(name, value);\n      if (next instanceof CodeBlock) {\n        next.formatAt(0, index - prevNewline + length - isolateLength, name, value);\n      }\n    }\n  }, {\n    key: 'insertAt',\n    value: function insertAt(index, value, def) {\n      if (def != null) return;\n\n      var _descendant3 = this.descendant(_text2.default, index),\n          _descendant4 = _slicedToArray(_descendant3, 2),\n          text = _descendant4[0],\n          offset = _descendant4[1];\n\n      text.insertAt(offset, value);\n    }\n  }, {\n    key: 'length',\n    value: function length() {\n      var length = this.domNode.textContent.length;\n      if (!this.domNode.textContent.endsWith('\\n')) {\n        return length + 1;\n      }\n      return length;\n    }\n  }, {\n    key: 'newlineIndex',\n    value: function newlineIndex(searchIndex) {\n      var reverse = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!reverse) {\n        var offset = this.domNode.textContent.slice(searchIndex).indexOf('\\n');\n        return offset > -1 ? searchIndex + offset : -1;\n      } else {\n        return this.domNode.textContent.slice(0, searchIndex).lastIndexOf('\\n');\n      }\n    }\n  }, {\n    key: 'optimize',\n    value: function optimize(context) {\n      if (!this.domNode.textContent.endsWith('\\n')) {\n        this.appendChild(_parchment2.default.create('text', '\\n'));\n      }\n      _get(CodeBlock.prototype.__proto__ || Object.getPrototypeOf(CodeBlock.prototype), 'optimize', this).call(this, context);\n      var next = this.next;\n      if (next != null && next.prev === this && next.statics.blotName === this.statics.blotName && this.statics.formats(this.domNode) === next.statics.formats(next.domNode)) {\n        next.optimize(context);\n        next.moveChildren(this);\n        next.remove();\n      }\n    }\n  }, {\n    key: 'replace',\n    value: function replace(target) {\n      _get(CodeBlock.prototype.__proto__ || Object.getPrototypeOf(CodeBlock.prototype), 'replace', this).call(this, target);\n      [].slice.call(this.domNode.querySelectorAll('*')).forEach(function (node) {\n        var blot = _parchment2.default.find(node);\n        if (blot == null) {\n          node.parentNode.removeChild(node);\n        } else if (blot instanceof _parchment2.default.Embed) {\n          blot.remove();\n        } else {\n          blot.unwrap();\n        }\n      });\n    }\n  }], [{\n    key: 'create',\n    value: function create(value) {\n      var domNode = _get(CodeBlock.__proto__ || Object.getPrototypeOf(CodeBlock), 'create', this).call(this, value);\n      domNode.setAttribute('spellcheck', false);\n      return domNode;\n    }\n  }, {\n    key: 'formats',\n    value: function formats() {\n      return true;\n    }\n  }]);\n\n  return CodeBlock;\n}(_block2.default);\n\nCodeBlock.blotName = 'code-block';\nCodeBlock.tagName = 'PRE';\nCodeBlock.TAB = '  ';\n\nexports.Code = Code;\nexports.default = CodeBlock;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _op = __webpack_require__(20);\n\nvar _op2 = _interopRequireDefault(_op);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _code = __webpack_require__(13);\n\nvar _code2 = _interopRequireDefault(_code);\n\nvar _cursor = __webpack_require__(24);\n\nvar _cursor2 = _interopRequireDefault(_cursor);\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nvar _break = __webpack_require__(16);\n\nvar _break2 = _interopRequireDefault(_break);\n\nvar _clone = __webpack_require__(21);\n\nvar _clone2 = _interopRequireDefault(_clone);\n\nvar _deepEqual = __webpack_require__(11);\n\nvar _deepEqual2 = _interopRequireDefault(_deepEqual);\n\nvar _extend = __webpack_require__(3);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ASCII = /^[ -~]*$/;\n\nvar Editor = function () {\n  function Editor(scroll) {\n    _classCallCheck(this, Editor);\n\n    this.scroll = scroll;\n    this.delta = this.getDelta();\n  }\n\n  _createClass(Editor, [{\n    key: 'applyDelta',\n    value: function applyDelta(delta) {\n      var _this = this;\n\n      var consumeNextNewline = false;\n      this.scroll.update();\n      var scrollLength = this.scroll.length();\n      this.scroll.batchStart();\n      delta = normalizeDelta(delta);\n      delta.reduce(function (index, op) {\n        var length = op.retain || op.delete || op.insert.length || 1;\n        var attributes = op.attributes || {};\n        if (op.insert != null) {\n          if (typeof op.insert === 'string') {\n            var text = op.insert;\n            if (text.endsWith('\\n') && consumeNextNewline) {\n              consumeNextNewline = false;\n              text = text.slice(0, -1);\n            }\n            if (index >= scrollLength && !text.endsWith('\\n')) {\n              consumeNextNewline = true;\n            }\n            _this.scroll.insertAt(index, text);\n\n            var _scroll$line = _this.scroll.line(index),\n                _scroll$line2 = _slicedToArray(_scroll$line, 2),\n                line = _scroll$line2[0],\n                offset = _scroll$line2[1];\n\n            var formats = (0, _extend2.default)({}, (0, _block.bubbleFormats)(line));\n            if (line instanceof _block2.default) {\n              var _line$descendant = line.descendant(_parchment2.default.Leaf, offset),\n                  _line$descendant2 = _slicedToArray(_line$descendant, 1),\n                  leaf = _line$descendant2[0];\n\n              formats = (0, _extend2.default)(formats, (0, _block.bubbleFormats)(leaf));\n            }\n            attributes = _op2.default.attributes.diff(formats, attributes) || {};\n          } else if (_typeof(op.insert) === 'object') {\n            var key = Object.keys(op.insert)[0]; // There should only be one key\n            if (key == null) return index;\n            _this.scroll.insertAt(index, key, op.insert[key]);\n          }\n          scrollLength += length;\n        }\n        Object.keys(attributes).forEach(function (name) {\n          _this.scroll.formatAt(index, length, name, attributes[name]);\n        });\n        return index + length;\n      }, 0);\n      delta.reduce(function (index, op) {\n        if (typeof op.delete === 'number') {\n          _this.scroll.deleteAt(index, op.delete);\n          return index;\n        }\n        return index + (op.retain || op.insert.length || 1);\n      }, 0);\n      this.scroll.batchEnd();\n      return this.update(delta);\n    }\n  }, {\n    key: 'deleteText',\n    value: function deleteText(index, length) {\n      this.scroll.deleteAt(index, length);\n      return this.update(new _quillDelta2.default().retain(index).delete(length));\n    }\n  }, {\n    key: 'formatLine',\n    value: function formatLine(index, length) {\n      var _this2 = this;\n\n      var formats = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      this.scroll.update();\n      Object.keys(formats).forEach(function (format) {\n        if (_this2.scroll.whitelist != null && !_this2.scroll.whitelist[format]) return;\n        var lines = _this2.scroll.lines(index, Math.max(length, 1));\n        var lengthRemaining = length;\n        lines.forEach(function (line) {\n          var lineLength = line.length();\n          if (!(line instanceof _code2.default)) {\n            line.format(format, formats[format]);\n          } else {\n            var codeIndex = index - line.offset(_this2.scroll);\n            var codeLength = line.newlineIndex(codeIndex + lengthRemaining) - codeIndex + 1;\n            line.formatAt(codeIndex, codeLength, format, formats[format]);\n          }\n          lengthRemaining -= lineLength;\n        });\n      });\n      this.scroll.optimize();\n      return this.update(new _quillDelta2.default().retain(index).retain(length, (0, _clone2.default)(formats)));\n    }\n  }, {\n    key: 'formatText',\n    value: function formatText(index, length) {\n      var _this3 = this;\n\n      var formats = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      Object.keys(formats).forEach(function (format) {\n        _this3.scroll.formatAt(index, length, format, formats[format]);\n      });\n      return this.update(new _quillDelta2.default().retain(index).retain(length, (0, _clone2.default)(formats)));\n    }\n  }, {\n    key: 'getContents',\n    value: function getContents(index, length) {\n      return this.delta.slice(index, index + length);\n    }\n  }, {\n    key: 'getDelta',\n    value: function getDelta() {\n      return this.scroll.lines().reduce(function (delta, line) {\n        return delta.concat(line.delta());\n      }, new _quillDelta2.default());\n    }\n  }, {\n    key: 'getFormat',\n    value: function getFormat(index) {\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      var lines = [],\n          leaves = [];\n      if (length === 0) {\n        this.scroll.path(index).forEach(function (path) {\n          var _path = _slicedToArray(path, 1),\n              blot = _path[0];\n\n          if (blot instanceof _block2.default) {\n            lines.push(blot);\n          } else if (blot instanceof _parchment2.default.Leaf) {\n            leaves.push(blot);\n          }\n        });\n      } else {\n        lines = this.scroll.lines(index, length);\n        leaves = this.scroll.descendants(_parchment2.default.Leaf, index, length);\n      }\n      var formatsArr = [lines, leaves].map(function (blots) {\n        if (blots.length === 0) return {};\n        var formats = (0, _block.bubbleFormats)(blots.shift());\n        while (Object.keys(formats).length > 0) {\n          var blot = blots.shift();\n          if (blot == null) return formats;\n          formats = combineFormats((0, _block.bubbleFormats)(blot), formats);\n        }\n        return formats;\n      });\n      return _extend2.default.apply(_extend2.default, formatsArr);\n    }\n  }, {\n    key: 'getText',\n    value: function getText(index, length) {\n      return this.getContents(index, length).filter(function (op) {\n        return typeof op.insert === 'string';\n      }).map(function (op) {\n        return op.insert;\n      }).join('');\n    }\n  }, {\n    key: 'insertEmbed',\n    value: function insertEmbed(index, embed, value) {\n      this.scroll.insertAt(index, embed, value);\n      return this.update(new _quillDelta2.default().retain(index).insert(_defineProperty({}, embed, value)));\n    }\n  }, {\n    key: 'insertText',\n    value: function insertText(index, text) {\n      var _this4 = this;\n\n      var formats = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      text = text.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n      this.scroll.insertAt(index, text);\n      Object.keys(formats).forEach(function (format) {\n        _this4.scroll.formatAt(index, text.length, format, formats[format]);\n      });\n      return this.update(new _quillDelta2.default().retain(index).insert(text, (0, _clone2.default)(formats)));\n    }\n  }, {\n    key: 'isBlank',\n    value: function isBlank() {\n      if (this.scroll.children.length == 0) return true;\n      if (this.scroll.children.length > 1) return false;\n      var block = this.scroll.children.head;\n      if (block.statics.blotName !== _block2.default.blotName) return false;\n      if (block.children.length > 1) return false;\n      return block.children.head instanceof _break2.default;\n    }\n  }, {\n    key: 'removeFormat',\n    value: function removeFormat(index, length) {\n      var text = this.getText(index, length);\n\n      var _scroll$line3 = this.scroll.line(index + length),\n          _scroll$line4 = _slicedToArray(_scroll$line3, 2),\n          line = _scroll$line4[0],\n          offset = _scroll$line4[1];\n\n      var suffixLength = 0,\n          suffix = new _quillDelta2.default();\n      if (line != null) {\n        if (!(line instanceof _code2.default)) {\n          suffixLength = line.length() - offset;\n        } else {\n          suffixLength = line.newlineIndex(offset) - offset + 1;\n        }\n        suffix = line.delta().slice(offset, offset + suffixLength - 1).insert('\\n');\n      }\n      var contents = this.getContents(index, length + suffixLength);\n      var diff = contents.diff(new _quillDelta2.default().insert(text).concat(suffix));\n      var delta = new _quillDelta2.default().retain(index).concat(diff);\n      return this.applyDelta(delta);\n    }\n  }, {\n    key: 'update',\n    value: function update(change) {\n      var mutations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      var cursorIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n\n      var oldDelta = this.delta;\n      if (mutations.length === 1 && mutations[0].type === 'characterData' && mutations[0].target.data.match(ASCII) && _parchment2.default.find(mutations[0].target)) {\n        // Optimization for character changes\n        var textBlot = _parchment2.default.find(mutations[0].target);\n        var formats = (0, _block.bubbleFormats)(textBlot);\n        var index = textBlot.offset(this.scroll);\n        var oldValue = mutations[0].oldValue.replace(_cursor2.default.CONTENTS, '');\n        var oldText = new _quillDelta2.default().insert(oldValue);\n        var newText = new _quillDelta2.default().insert(textBlot.value());\n        var diffDelta = new _quillDelta2.default().retain(index).concat(oldText.diff(newText, cursorIndex));\n        change = diffDelta.reduce(function (delta, op) {\n          if (op.insert) {\n            return delta.insert(op.insert, formats);\n          } else {\n            return delta.push(op);\n          }\n        }, new _quillDelta2.default());\n        this.delta = oldDelta.compose(change);\n      } else {\n        this.delta = this.getDelta();\n        if (!change || !(0, _deepEqual2.default)(oldDelta.compose(change), this.delta)) {\n          change = oldDelta.diff(this.delta, cursorIndex);\n        }\n      }\n      return change;\n    }\n  }]);\n\n  return Editor;\n}();\n\nfunction combineFormats(formats, combined) {\n  return Object.keys(combined).reduce(function (merged, name) {\n    if (formats[name] == null) return merged;\n    if (combined[name] === formats[name]) {\n      merged[name] = combined[name];\n    } else if (Array.isArray(combined[name])) {\n      if (combined[name].indexOf(formats[name]) < 0) {\n        merged[name] = combined[name].concat([formats[name]]);\n      }\n    } else {\n      merged[name] = [combined[name], formats[name]];\n    }\n    return merged;\n  }, {});\n}\n\nfunction normalizeDelta(delta) {\n  return delta.reduce(function (delta, op) {\n    if (op.insert === 1) {\n      var attributes = (0, _clone2.default)(op.attributes);\n      delete attributes['image'];\n      return delta.insert({ image: op.attributes.image }, attributes);\n    }\n    if (op.attributes != null && (op.attributes.list === true || op.attributes.bullet === true)) {\n      op = (0, _clone2.default)(op);\n      if (op.attributes.list) {\n        op.attributes.list = 'ordered';\n      } else {\n        op.attributes.list = 'bullet';\n        delete op.attributes.bullet;\n      }\n    }\n    if (typeof op.insert === 'string') {\n      var text = op.insert.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n      return delta.insert(text, op.attributes);\n    }\n    return delta.push(op);\n  }, new _quillDelta2.default());\n}\n\nexports.default = Editor;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.Range = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _clone = __webpack_require__(21);\n\nvar _clone2 = _interopRequireDefault(_clone);\n\nvar _deepEqual = __webpack_require__(11);\n\nvar _deepEqual2 = _interopRequireDefault(_deepEqual);\n\nvar _emitter3 = __webpack_require__(8);\n\nvar _emitter4 = _interopRequireDefault(_emitter3);\n\nvar _logger = __webpack_require__(10);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar debug = (0, _logger2.default)('quill:selection');\n\nvar Range = function Range(index) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n  _classCallCheck(this, Range);\n\n  this.index = index;\n  this.length = length;\n};\n\nvar Selection = function () {\n  function Selection(scroll, emitter) {\n    var _this = this;\n\n    _classCallCheck(this, Selection);\n\n    this.emitter = emitter;\n    this.scroll = scroll;\n    this.composing = false;\n    this.mouseDown = false;\n    this.root = this.scroll.domNode;\n    this.cursor = _parchment2.default.create('cursor', this);\n    // savedRange is last non-null range\n    this.lastRange = this.savedRange = new Range(0, 0);\n    this.handleComposition();\n    this.handleDragging();\n    this.emitter.listenDOM('selectionchange', document, function () {\n      if (!_this.mouseDown) {\n        setTimeout(_this.update.bind(_this, _emitter4.default.sources.USER), 1);\n      }\n    });\n    this.emitter.on(_emitter4.default.events.EDITOR_CHANGE, function (type, delta) {\n      if (type === _emitter4.default.events.TEXT_CHANGE && delta.length() > 0) {\n        _this.update(_emitter4.default.sources.SILENT);\n      }\n    });\n    this.emitter.on(_emitter4.default.events.SCROLL_BEFORE_UPDATE, function () {\n      if (!_this.hasFocus()) return;\n      var native = _this.getNativeRange();\n      if (native == null) return;\n      if (native.start.node === _this.cursor.textNode) return; // cursor.restore() will handle\n      // TODO unclear if this has negative side effects\n      _this.emitter.once(_emitter4.default.events.SCROLL_UPDATE, function () {\n        try {\n          _this.setNativeRange(native.start.node, native.start.offset, native.end.node, native.end.offset);\n        } catch (ignored) {}\n      });\n    });\n    this.emitter.on(_emitter4.default.events.SCROLL_OPTIMIZE, function (mutations, context) {\n      if (context.range) {\n        var _context$range = context.range,\n            startNode = _context$range.startNode,\n            startOffset = _context$range.startOffset,\n            endNode = _context$range.endNode,\n            endOffset = _context$range.endOffset;\n\n        _this.setNativeRange(startNode, startOffset, endNode, endOffset);\n      }\n    });\n    this.update(_emitter4.default.sources.SILENT);\n  }\n\n  _createClass(Selection, [{\n    key: 'handleComposition',\n    value: function handleComposition() {\n      var _this2 = this;\n\n      this.root.addEventListener('compositionstart', function () {\n        _this2.composing = true;\n      });\n      this.root.addEventListener('compositionend', function () {\n        _this2.composing = false;\n        if (_this2.cursor.parent) {\n          var range = _this2.cursor.restore();\n          if (!range) return;\n          setTimeout(function () {\n            _this2.setNativeRange(range.startNode, range.startOffset, range.endNode, range.endOffset);\n          }, 1);\n        }\n      });\n    }\n  }, {\n    key: 'handleDragging',\n    value: function handleDragging() {\n      var _this3 = this;\n\n      this.emitter.listenDOM('mousedown', document.body, function () {\n        _this3.mouseDown = true;\n      });\n      this.emitter.listenDOM('mouseup', document.body, function () {\n        _this3.mouseDown = false;\n        _this3.update(_emitter4.default.sources.USER);\n      });\n    }\n  }, {\n    key: 'focus',\n    value: function focus() {\n      if (this.hasFocus()) return;\n      this.root.focus();\n      this.setRange(this.savedRange);\n    }\n  }, {\n    key: 'format',\n    value: function format(_format, value) {\n      if (this.scroll.whitelist != null && !this.scroll.whitelist[_format]) return;\n      this.scroll.update();\n      var nativeRange = this.getNativeRange();\n      if (nativeRange == null || !nativeRange.native.collapsed || _parchment2.default.query(_format, _parchment2.default.Scope.BLOCK)) return;\n      if (nativeRange.start.node !== this.cursor.textNode) {\n        var blot = _parchment2.default.find(nativeRange.start.node, false);\n        if (blot == null) return;\n        // TODO Give blot ability to not split\n        if (blot instanceof _parchment2.default.Leaf) {\n          var after = blot.split(nativeRange.start.offset);\n          blot.parent.insertBefore(this.cursor, after);\n        } else {\n          blot.insertBefore(this.cursor, nativeRange.start.node); // Should never happen\n        }\n        this.cursor.attach();\n      }\n      this.cursor.format(_format, value);\n      this.scroll.optimize();\n      this.setNativeRange(this.cursor.textNode, this.cursor.textNode.data.length);\n      this.update();\n    }\n  }, {\n    key: 'getBounds',\n    value: function getBounds(index) {\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      var scrollLength = this.scroll.length();\n      index = Math.min(index, scrollLength - 1);\n      length = Math.min(index + length, scrollLength - 1) - index;\n      var node = void 0,\n          _scroll$leaf = this.scroll.leaf(index),\n          _scroll$leaf2 = _slicedToArray(_scroll$leaf, 2),\n          leaf = _scroll$leaf2[0],\n          offset = _scroll$leaf2[1];\n      if (leaf == null) return null;\n\n      var _leaf$position = leaf.position(offset, true);\n\n      var _leaf$position2 = _slicedToArray(_leaf$position, 2);\n\n      node = _leaf$position2[0];\n      offset = _leaf$position2[1];\n\n      var range = document.createRange();\n      if (length > 0) {\n        range.setStart(node, offset);\n\n        var _scroll$leaf3 = this.scroll.leaf(index + length);\n\n        var _scroll$leaf4 = _slicedToArray(_scroll$leaf3, 2);\n\n        leaf = _scroll$leaf4[0];\n        offset = _scroll$leaf4[1];\n\n        if (leaf == null) return null;\n\n        var _leaf$position3 = leaf.position(offset, true);\n\n        var _leaf$position4 = _slicedToArray(_leaf$position3, 2);\n\n        node = _leaf$position4[0];\n        offset = _leaf$position4[1];\n\n        range.setEnd(node, offset);\n        return range.getBoundingClientRect();\n      } else {\n        var side = 'left';\n        var rect = void 0;\n        if (node instanceof Text) {\n          if (offset < node.data.length) {\n            range.setStart(node, offset);\n            range.setEnd(node, offset + 1);\n          } else {\n            range.setStart(node, offset - 1);\n            range.setEnd(node, offset);\n            side = 'right';\n          }\n          rect = range.getBoundingClientRect();\n        } else {\n          rect = leaf.domNode.getBoundingClientRect();\n          if (offset > 0) side = 'right';\n        }\n        return {\n          bottom: rect.top + rect.height,\n          height: rect.height,\n          left: rect[side],\n          right: rect[side],\n          top: rect.top,\n          width: 0\n        };\n      }\n    }\n  }, {\n    key: 'getNativeRange',\n    value: function getNativeRange() {\n      var selection = document.getSelection();\n      if (selection == null || selection.rangeCount <= 0) return null;\n      var nativeRange = selection.getRangeAt(0);\n      if (nativeRange == null) return null;\n      var range = this.normalizeNative(nativeRange);\n      debug.info('getNativeRange', range);\n      return range;\n    }\n  }, {\n    key: 'getRange',\n    value: function getRange() {\n      var normalized = this.getNativeRange();\n      if (normalized == null) return [null, null];\n      var range = this.normalizedToRange(normalized);\n      return [range, normalized];\n    }\n  }, {\n    key: 'hasFocus',\n    value: function hasFocus() {\n      return document.activeElement === this.root;\n    }\n  }, {\n    key: 'normalizedToRange',\n    value: function normalizedToRange(range) {\n      var _this4 = this;\n\n      var positions = [[range.start.node, range.start.offset]];\n      if (!range.native.collapsed) {\n        positions.push([range.end.node, range.end.offset]);\n      }\n      var indexes = positions.map(function (position) {\n        var _position = _slicedToArray(position, 2),\n            node = _position[0],\n            offset = _position[1];\n\n        var blot = _parchment2.default.find(node, true);\n        var index = blot.offset(_this4.scroll);\n        if (offset === 0) {\n          return index;\n        } else if (blot instanceof _parchment2.default.Container) {\n          return index + blot.length();\n        } else {\n          return index + blot.index(node, offset);\n        }\n      });\n      var end = Math.min(Math.max.apply(Math, _toConsumableArray(indexes)), this.scroll.length() - 1);\n      var start = Math.min.apply(Math, [end].concat(_toConsumableArray(indexes)));\n      return new Range(start, end - start);\n    }\n  }, {\n    key: 'normalizeNative',\n    value: function normalizeNative(nativeRange) {\n      if (!contains(this.root, nativeRange.startContainer) || !nativeRange.collapsed && !contains(this.root, nativeRange.endContainer)) {\n        return null;\n      }\n      var range = {\n        start: { node: nativeRange.startContainer, offset: nativeRange.startOffset },\n        end: { node: nativeRange.endContainer, offset: nativeRange.endOffset },\n        native: nativeRange\n      };\n      [range.start, range.end].forEach(function (position) {\n        var node = position.node,\n            offset = position.offset;\n        while (!(node instanceof Text) && node.childNodes.length > 0) {\n          if (node.childNodes.length > offset) {\n            node = node.childNodes[offset];\n            offset = 0;\n          } else if (node.childNodes.length === offset) {\n            node = node.lastChild;\n            offset = node instanceof Text ? node.data.length : node.childNodes.length + 1;\n          } else {\n            break;\n          }\n        }\n        position.node = node, position.offset = offset;\n      });\n      return range;\n    }\n  }, {\n    key: 'rangeToNative',\n    value: function rangeToNative(range) {\n      var _this5 = this;\n\n      var indexes = range.collapsed ? [range.index] : [range.index, range.index + range.length];\n      var args = [];\n      var scrollLength = this.scroll.length();\n      indexes.forEach(function (index, i) {\n        index = Math.min(scrollLength - 1, index);\n        var node = void 0,\n            _scroll$leaf5 = _this5.scroll.leaf(index),\n            _scroll$leaf6 = _slicedToArray(_scroll$leaf5, 2),\n            leaf = _scroll$leaf6[0],\n            offset = _scroll$leaf6[1];\n        var _leaf$position5 = leaf.position(offset, i !== 0);\n\n        var _leaf$position6 = _slicedToArray(_leaf$position5, 2);\n\n        node = _leaf$position6[0];\n        offset = _leaf$position6[1];\n\n        args.push(node, offset);\n      });\n      if (args.length < 2) {\n        args = args.concat(args);\n      }\n      return args;\n    }\n  }, {\n    key: 'scrollIntoView',\n    value: function scrollIntoView(scrollingContainer) {\n      var range = this.lastRange;\n      if (range == null) return;\n      var bounds = this.getBounds(range.index, range.length);\n      if (bounds == null) return;\n      var limit = this.scroll.length() - 1;\n\n      var _scroll$line = this.scroll.line(Math.min(range.index, limit)),\n          _scroll$line2 = _slicedToArray(_scroll$line, 1),\n          first = _scroll$line2[0];\n\n      var last = first;\n      if (range.length > 0) {\n        var _scroll$line3 = this.scroll.line(Math.min(range.index + range.length, limit));\n\n        var _scroll$line4 = _slicedToArray(_scroll$line3, 1);\n\n        last = _scroll$line4[0];\n      }\n      if (first == null || last == null) return;\n      var scrollBounds = scrollingContainer.getBoundingClientRect();\n      if (bounds.top < scrollBounds.top) {\n        scrollingContainer.scrollTop -= scrollBounds.top - bounds.top;\n      } else if (bounds.bottom > scrollBounds.bottom) {\n        scrollingContainer.scrollTop += bounds.bottom - scrollBounds.bottom;\n      }\n    }\n  }, {\n    key: 'setNativeRange',\n    value: function setNativeRange(startNode, startOffset) {\n      var endNode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : startNode;\n      var endOffset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : startOffset;\n      var force = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n      debug.info('setNativeRange', startNode, startOffset, endNode, endOffset);\n      if (startNode != null && (this.root.parentNode == null || startNode.parentNode == null || endNode.parentNode == null)) {\n        return;\n      }\n      var selection = document.getSelection();\n      if (selection == null) return;\n      if (startNode != null) {\n        if (!this.hasFocus()) this.root.focus();\n        var native = (this.getNativeRange() || {}).native;\n        if (native == null || force || startNode !== native.startContainer || startOffset !== native.startOffset || endNode !== native.endContainer || endOffset !== native.endOffset) {\n\n          if (startNode.tagName == \"BR\") {\n            startOffset = [].indexOf.call(startNode.parentNode.childNodes, startNode);\n            startNode = startNode.parentNode;\n          }\n          if (endNode.tagName == \"BR\") {\n            endOffset = [].indexOf.call(endNode.parentNode.childNodes, endNode);\n            endNode = endNode.parentNode;\n          }\n          var range = document.createRange();\n          range.setStart(startNode, startOffset);\n          range.setEnd(endNode, endOffset);\n          selection.removeAllRanges();\n          selection.addRange(range);\n        }\n      } else {\n        selection.removeAllRanges();\n        this.root.blur();\n        document.body.focus(); // root.blur() not enough on IE11+Travis+SauceLabs (but not local VMs)\n      }\n    }\n  }, {\n    key: 'setRange',\n    value: function setRange(range) {\n      var force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var source = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _emitter4.default.sources.API;\n\n      if (typeof force === 'string') {\n        source = force;\n        force = false;\n      }\n      debug.info('setRange', range);\n      if (range != null) {\n        var args = this.rangeToNative(range);\n        this.setNativeRange.apply(this, _toConsumableArray(args).concat([force]));\n      } else {\n        this.setNativeRange(null);\n      }\n      this.update(source);\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _emitter4.default.sources.USER;\n\n      var oldRange = this.lastRange;\n\n      var _getRange = this.getRange(),\n          _getRange2 = _slicedToArray(_getRange, 2),\n          lastRange = _getRange2[0],\n          nativeRange = _getRange2[1];\n\n      this.lastRange = lastRange;\n      if (this.lastRange != null) {\n        this.savedRange = this.lastRange;\n      }\n      if (!(0, _deepEqual2.default)(oldRange, this.lastRange)) {\n        var _emitter;\n\n        if (!this.composing && nativeRange != null && nativeRange.native.collapsed && nativeRange.start.node !== this.cursor.textNode) {\n          this.cursor.restore();\n        }\n        var args = [_emitter4.default.events.SELECTION_CHANGE, (0, _clone2.default)(this.lastRange), (0, _clone2.default)(oldRange), source];\n        (_emitter = this.emitter).emit.apply(_emitter, [_emitter4.default.events.EDITOR_CHANGE].concat(args));\n        if (source !== _emitter4.default.sources.SILENT) {\n          var _emitter2;\n\n          (_emitter2 = this.emitter).emit.apply(_emitter2, args);\n        }\n      }\n    }\n  }]);\n\n  return Selection;\n}();\n\nfunction contains(parent, descendant) {\n  try {\n    // Firefox inserts inaccessible nodes around video elements\n    descendant.parentNode;\n  } catch (e) {\n    return false;\n  }\n  // IE11 has bug with Text nodes\n  // https://connect.microsoft.com/IE/feedback/details/780874/node-contains-is-incorrect\n  if (descendant instanceof Text) {\n    descendant = descendant.parentNode;\n  }\n  return parent.contains(descendant);\n}\n\nexports.Range = Range;\nexports.default = Selection;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Break = function (_Parchment$Embed) {\n  _inherits(Break, _Parchment$Embed);\n\n  function Break() {\n    _classCallCheck(this, Break);\n\n    return _possibleConstructorReturn(this, (Break.__proto__ || Object.getPrototypeOf(Break)).apply(this, arguments));\n  }\n\n  _createClass(Break, [{\n    key: 'insertInto',\n    value: function insertInto(parent, ref) {\n      if (parent.children.length === 0) {\n        _get(Break.prototype.__proto__ || Object.getPrototypeOf(Break.prototype), 'insertInto', this).call(this, parent, ref);\n      } else {\n        this.remove();\n      }\n    }\n  }, {\n    key: 'length',\n    value: function length() {\n      return 0;\n    }\n  }, {\n    key: 'value',\n    value: function value() {\n      return '';\n    }\n  }], [{\n    key: 'value',\n    value: function value() {\n      return undefined;\n    }\n  }]);\n\n  return Break;\n}(_parchment2.default.Embed);\n\nBreak.blotName = 'break';\nBreak.tagName = 'BR';\n\nexports.default = Break;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar linked_list_1 = __webpack_require__(44);\nvar shadow_1 = __webpack_require__(30);\nvar Registry = __webpack_require__(1);\nvar ContainerBlot = /** @class */ (function (_super) {\n    __extends(ContainerBlot, _super);\n    function ContainerBlot(domNode) {\n        var _this = _super.call(this, domNode) || this;\n        _this.build();\n        return _this;\n    }\n    ContainerBlot.prototype.appendChild = function (other) {\n        this.insertBefore(other);\n    };\n    ContainerBlot.prototype.attach = function () {\n        _super.prototype.attach.call(this);\n        this.children.forEach(function (child) {\n            child.attach();\n        });\n    };\n    ContainerBlot.prototype.build = function () {\n        var _this = this;\n        this.children = new linked_list_1.default();\n        // Need to be reversed for if DOM nodes already in order\n        [].slice\n            .call(this.domNode.childNodes)\n            .reverse()\n            .forEach(function (node) {\n            try {\n                var child = makeBlot(node);\n                _this.insertBefore(child, _this.children.head || undefined);\n            }\n            catch (err) {\n                if (err instanceof Registry.ParchmentError)\n                    return;\n                else\n                    throw err;\n            }\n        });\n    };\n    ContainerBlot.prototype.deleteAt = function (index, length) {\n        if (index === 0 && length === this.length()) {\n            return this.remove();\n        }\n        this.children.forEachAt(index, length, function (child, offset, length) {\n            child.deleteAt(offset, length);\n        });\n    };\n    ContainerBlot.prototype.descendant = function (criteria, index) {\n        var _a = this.children.find(index), child = _a[0], offset = _a[1];\n        if ((criteria.blotName == null && criteria(child)) ||\n            (criteria.blotName != null && child instanceof criteria)) {\n            return [child, offset];\n        }\n        else if (child instanceof ContainerBlot) {\n            return child.descendant(criteria, offset);\n        }\n        else {\n            return [null, -1];\n        }\n    };\n    ContainerBlot.prototype.descendants = function (criteria, index, length) {\n        if (index === void 0) { index = 0; }\n        if (length === void 0) { length = Number.MAX_VALUE; }\n        var descendants = [];\n        var lengthLeft = length;\n        this.children.forEachAt(index, length, function (child, index, length) {\n            if ((criteria.blotName == null && criteria(child)) ||\n                (criteria.blotName != null && child instanceof criteria)) {\n                descendants.push(child);\n            }\n            if (child instanceof ContainerBlot) {\n                descendants = descendants.concat(child.descendants(criteria, index, lengthLeft));\n            }\n            lengthLeft -= length;\n        });\n        return descendants;\n    };\n    ContainerBlot.prototype.detach = function () {\n        this.children.forEach(function (child) {\n            child.detach();\n        });\n        _super.prototype.detach.call(this);\n    };\n    ContainerBlot.prototype.formatAt = function (index, length, name, value) {\n        this.children.forEachAt(index, length, function (child, offset, length) {\n            child.formatAt(offset, length, name, value);\n        });\n    };\n    ContainerBlot.prototype.insertAt = function (index, value, def) {\n        var _a = this.children.find(index), child = _a[0], offset = _a[1];\n        if (child) {\n            child.insertAt(offset, value, def);\n        }\n        else {\n            var blot = def == null ? Registry.create('text', value) : Registry.create(value, def);\n            this.appendChild(blot);\n        }\n    };\n    ContainerBlot.prototype.insertBefore = function (childBlot, refBlot) {\n        if (this.statics.allowedChildren != null &&\n            !this.statics.allowedChildren.some(function (child) {\n                return childBlot instanceof child;\n            })) {\n            throw new Registry.ParchmentError(\"Cannot insert \" + childBlot.statics.blotName + \" into \" + this.statics.blotName);\n        }\n        childBlot.insertInto(this, refBlot);\n    };\n    ContainerBlot.prototype.length = function () {\n        return this.children.reduce(function (memo, child) {\n            return memo + child.length();\n        }, 0);\n    };\n    ContainerBlot.prototype.moveChildren = function (targetParent, refNode) {\n        this.children.forEach(function (child) {\n            targetParent.insertBefore(child, refNode);\n        });\n    };\n    ContainerBlot.prototype.optimize = function (context) {\n        _super.prototype.optimize.call(this, context);\n        if (this.children.length === 0) {\n            if (this.statics.defaultChild != null) {\n                var child = Registry.create(this.statics.defaultChild);\n                this.appendChild(child);\n                child.optimize(context);\n            }\n            else {\n                this.remove();\n            }\n        }\n    };\n    ContainerBlot.prototype.path = function (index, inclusive) {\n        if (inclusive === void 0) { inclusive = false; }\n        var _a = this.children.find(index, inclusive), child = _a[0], offset = _a[1];\n        var position = [[this, index]];\n        if (child instanceof ContainerBlot) {\n            return position.concat(child.path(offset, inclusive));\n        }\n        else if (child != null) {\n            position.push([child, offset]);\n        }\n        return position;\n    };\n    ContainerBlot.prototype.removeChild = function (child) {\n        this.children.remove(child);\n    };\n    ContainerBlot.prototype.replace = function (target) {\n        if (target instanceof ContainerBlot) {\n            target.moveChildren(this);\n        }\n        _super.prototype.replace.call(this, target);\n    };\n    ContainerBlot.prototype.split = function (index, force) {\n        if (force === void 0) { force = false; }\n        if (!force) {\n            if (index === 0)\n                return this;\n            if (index === this.length())\n                return this.next;\n        }\n        var after = this.clone();\n        this.parent.insertBefore(after, this.next);\n        this.children.forEachAt(index, this.length(), function (child, offset, length) {\n            child = child.split(offset, force);\n            after.appendChild(child);\n        });\n        return after;\n    };\n    ContainerBlot.prototype.unwrap = function () {\n        this.moveChildren(this.parent, this.next);\n        this.remove();\n    };\n    ContainerBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        var addedNodes = [];\n        var removedNodes = [];\n        mutations.forEach(function (mutation) {\n            if (mutation.target === _this.domNode && mutation.type === 'childList') {\n                addedNodes.push.apply(addedNodes, mutation.addedNodes);\n                removedNodes.push.apply(removedNodes, mutation.removedNodes);\n            }\n        });\n        removedNodes.forEach(function (node) {\n            // Check node has actually been removed\n            // One exception is Chrome does not immediately remove IFRAMEs\n            // from DOM but MutationRecord is correct in its reported removal\n            if (node.parentNode != null &&\n                // @ts-ignore\n                node.tagName !== 'IFRAME' &&\n                document.body.compareDocumentPosition(node) & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n                return;\n            }\n            var blot = Registry.find(node);\n            if (blot == null)\n                return;\n            if (blot.domNode.parentNode == null || blot.domNode.parentNode === _this.domNode) {\n                blot.detach();\n            }\n        });\n        addedNodes\n            .filter(function (node) {\n            return node.parentNode == _this.domNode;\n        })\n            .sort(function (a, b) {\n            if (a === b)\n                return 0;\n            if (a.compareDocumentPosition(b) & Node.DOCUMENT_POSITION_FOLLOWING) {\n                return 1;\n            }\n            return -1;\n        })\n            .forEach(function (node) {\n            var refBlot = null;\n            if (node.nextSibling != null) {\n                refBlot = Registry.find(node.nextSibling);\n            }\n            var blot = makeBlot(node);\n            if (blot.next != refBlot || blot.next == null) {\n                if (blot.parent != null) {\n                    blot.parent.removeChild(_this);\n                }\n                _this.insertBefore(blot, refBlot || undefined);\n            }\n        });\n    };\n    return ContainerBlot;\n}(shadow_1.default));\nfunction makeBlot(node) {\n    var blot = Registry.find(node);\n    if (blot == null) {\n        try {\n            blot = Registry.create(node);\n        }\n        catch (e) {\n            blot = Registry.create(Registry.Scope.INLINE);\n            [].slice.call(node.childNodes).forEach(function (child) {\n                // @ts-ignore\n                blot.domNode.appendChild(child);\n            });\n            if (node.parentNode) {\n                node.parentNode.replaceChild(blot.domNode, node);\n            }\n            blot.attach();\n        }\n    }\n    return blot;\n}\nexports.default = ContainerBlot;\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = __webpack_require__(12);\nvar store_1 = __webpack_require__(31);\nvar container_1 = __webpack_require__(17);\nvar Registry = __webpack_require__(1);\nvar FormatBlot = /** @class */ (function (_super) {\n    __extends(FormatBlot, _super);\n    function FormatBlot(domNode) {\n        var _this = _super.call(this, domNode) || this;\n        _this.attributes = new store_1.default(_this.domNode);\n        return _this;\n    }\n    FormatBlot.formats = function (domNode) {\n        if (typeof this.tagName === 'string') {\n            return true;\n        }\n        else if (Array.isArray(this.tagName)) {\n            return domNode.tagName.toLowerCase();\n        }\n        return undefined;\n    };\n    FormatBlot.prototype.format = function (name, value) {\n        var format = Registry.query(name);\n        if (format instanceof attributor_1.default) {\n            this.attributes.attribute(format, value);\n        }\n        else if (value) {\n            if (format != null && (name !== this.statics.blotName || this.formats()[name] !== value)) {\n                this.replaceWith(name, value);\n            }\n        }\n    };\n    FormatBlot.prototype.formats = function () {\n        var formats = this.attributes.values();\n        var format = this.statics.formats(this.domNode);\n        if (format != null) {\n            formats[this.statics.blotName] = format;\n        }\n        return formats;\n    };\n    FormatBlot.prototype.replaceWith = function (name, value) {\n        var replacement = _super.prototype.replaceWith.call(this, name, value);\n        this.attributes.copy(replacement);\n        return replacement;\n    };\n    FormatBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        _super.prototype.update.call(this, mutations, context);\n        if (mutations.some(function (mutation) {\n            return mutation.target === _this.domNode && mutation.type === 'attributes';\n        })) {\n            this.attributes.build();\n        }\n    };\n    FormatBlot.prototype.wrap = function (name, value) {\n        var wrapper = _super.prototype.wrap.call(this, name, value);\n        if (wrapper instanceof FormatBlot && wrapper.statics.scope === this.statics.scope) {\n            this.attributes.move(wrapper);\n        }\n        return wrapper;\n    };\n    return FormatBlot;\n}(container_1.default));\nexports.default = FormatBlot;\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar shadow_1 = __webpack_require__(30);\nvar Registry = __webpack_require__(1);\nvar LeafBlot = /** @class */ (function (_super) {\n    __extends(LeafBlot, _super);\n    function LeafBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LeafBlot.value = function (domNode) {\n        return true;\n    };\n    LeafBlot.prototype.index = function (node, offset) {\n        if (this.domNode === node ||\n            this.domNode.compareDocumentPosition(node) & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n            return Math.min(offset, 1);\n        }\n        return -1;\n    };\n    LeafBlot.prototype.position = function (index, inclusive) {\n        var offset = [].indexOf.call(this.parent.domNode.childNodes, this.domNode);\n        if (index > 0)\n            offset += 1;\n        return [this.parent.domNode, offset];\n    };\n    LeafBlot.prototype.value = function () {\n        var _a;\n        return _a = {}, _a[this.statics.blotName] = this.statics.value(this.domNode) || true, _a;\n    };\n    LeafBlot.scope = Registry.Scope.INLINE_BLOT;\n    return LeafBlot;\n}(shadow_1.default));\nexports.default = LeafBlot;\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar equal = __webpack_require__(11);\nvar extend = __webpack_require__(3);\n\n\nvar lib = {\n  attributes: {\n    compose: function (a, b, keepNull) {\n      if (typeof a !== 'object') a = {};\n      if (typeof b !== 'object') b = {};\n      var attributes = extend(true, {}, b);\n      if (!keepNull) {\n        attributes = Object.keys(attributes).reduce(function (copy, key) {\n          if (attributes[key] != null) {\n            copy[key] = attributes[key];\n          }\n          return copy;\n        }, {});\n      }\n      for (var key in a) {\n        if (a[key] !== undefined && b[key] === undefined) {\n          attributes[key] = a[key];\n        }\n      }\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    },\n\n    diff: function(a, b) {\n      if (typeof a !== 'object') a = {};\n      if (typeof b !== 'object') b = {};\n      var attributes = Object.keys(a).concat(Object.keys(b)).reduce(function (attributes, key) {\n        if (!equal(a[key], b[key])) {\n          attributes[key] = b[key] === undefined ? null : b[key];\n        }\n        return attributes;\n      }, {});\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    },\n\n    transform: function (a, b, priority) {\n      if (typeof a !== 'object') return b;\n      if (typeof b !== 'object') return undefined;\n      if (!priority) return b;  // b simply overwrites us without priority\n      var attributes = Object.keys(b).reduce(function (attributes, key) {\n        if (a[key] === undefined) attributes[key] = b[key];  // null is a valid value\n        return attributes;\n      }, {});\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n  },\n\n  iterator: function (ops) {\n    return new Iterator(ops);\n  },\n\n  length: function (op) {\n    if (typeof op['delete'] === 'number') {\n      return op['delete'];\n    } else if (typeof op.retain === 'number') {\n      return op.retain;\n    } else {\n      return typeof op.insert === 'string' ? op.insert.length : 1;\n    }\n  }\n};\n\n\nfunction Iterator(ops) {\n  this.ops = ops;\n  this.index = 0;\n  this.offset = 0;\n};\n\nIterator.prototype.hasNext = function () {\n  return this.peekLength() < Infinity;\n};\n\nIterator.prototype.next = function (length) {\n  if (!length) length = Infinity;\n  var nextOp = this.ops[this.index];\n  if (nextOp) {\n    var offset = this.offset;\n    var opLength = lib.length(nextOp)\n    if (length >= opLength - offset) {\n      length = opLength - offset;\n      this.index += 1;\n      this.offset = 0;\n    } else {\n      this.offset += length;\n    }\n    if (typeof nextOp['delete'] === 'number') {\n      return { 'delete': length };\n    } else {\n      var retOp = {};\n      if (nextOp.attributes) {\n        retOp.attributes = nextOp.attributes;\n      }\n      if (typeof nextOp.retain === 'number') {\n        retOp.retain = length;\n      } else if (typeof nextOp.insert === 'string') {\n        retOp.insert = nextOp.insert.substr(offset, length);\n      } else {\n        // offset should === 0, length should === 1\n        retOp.insert = nextOp.insert;\n      }\n      return retOp;\n    }\n  } else {\n    return { retain: Infinity };\n  }\n};\n\nIterator.prototype.peek = function () {\n  return this.ops[this.index];\n};\n\nIterator.prototype.peekLength = function () {\n  if (this.ops[this.index]) {\n    // Should never return 0 if our index is being managed correctly\n    return lib.length(this.ops[this.index]) - this.offset;\n  } else {\n    return Infinity;\n  }\n};\n\nIterator.prototype.peekType = function () {\n  if (this.ops[this.index]) {\n    if (typeof this.ops[this.index]['delete'] === 'number') {\n      return 'delete';\n    } else if (typeof this.ops[this.index].retain === 'number') {\n      return 'retain';\n    } else {\n      return 'insert';\n    }\n  }\n  return 'retain';\n};\n\nIterator.prototype.rest = function () {\n  if (!this.hasNext()) {\n    return [];\n  } else if (this.offset === 0) {\n    return this.ops.slice(this.index);\n  } else {\n    var offset = this.offset;\n    var index = this.index;\n    var next = this.next();\n    var rest = this.ops.slice(this.index);\n    this.offset = offset;\n    this.index = index;\n    return [next].concat(rest);\n  }\n};\n\n\nmodule.exports = lib;\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports) {\n\nvar clone = (function() {\n'use strict';\n\nfunction _instanceof(obj, type) {\n  return type != null && obj instanceof type;\n}\n\nvar nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nvar nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nvar nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      child = new nativeMap();\n    } else if (_instanceof(parent, nativeSet)) {\n      child = new nativeSet();\n    } else if (_instanceof(parent, nativePromise)) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      if (Buffer.allocUnsafe) {\n        // Node.js >= 4.5.0\n        child = Buffer.allocUnsafe(parent.length);\n      } else {\n        // Older Node.js versions\n        child = new Buffer(parent.length);\n      }\n      parent.copy(child);\n      return child;\n    } else if (_instanceof(parent, Error)) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      parent.forEach(function(value, key) {\n        var keyChild = _clone(key, depth - 1);\n        var valueChild = _clone(value, depth - 1);\n        child.set(keyChild, valueChild);\n      });\n    }\n    if (_instanceof(parent, nativeSet)) {\n      parent.forEach(function(value) {\n        var entryChild = _clone(value, depth - 1);\n        child.add(entryChild);\n      });\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(parent);\n      for (var i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        var symbol = symbols[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      var allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (var i = 0; i < allPropertyNames.length; i++) {\n        var propertyName = allPropertyNames[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n})();\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = clone;\n}\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _emitter = __webpack_require__(8);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nvar _break = __webpack_require__(16);\n\nvar _break2 = _interopRequireDefault(_break);\n\nvar _code = __webpack_require__(13);\n\nvar _code2 = _interopRequireDefault(_code);\n\nvar _container = __webpack_require__(25);\n\nvar _container2 = _interopRequireDefault(_container);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction isLine(blot) {\n  return blot instanceof _block2.default || blot instanceof _block.BlockEmbed;\n}\n\nvar Scroll = function (_Parchment$Scroll) {\n  _inherits(Scroll, _Parchment$Scroll);\n\n  function Scroll(domNode, config) {\n    _classCallCheck(this, Scroll);\n\n    var _this = _possibleConstructorReturn(this, (Scroll.__proto__ || Object.getPrototypeOf(Scroll)).call(this, domNode));\n\n    _this.emitter = config.emitter;\n    if (Array.isArray(config.whitelist)) {\n      _this.whitelist = config.whitelist.reduce(function (whitelist, format) {\n        whitelist[format] = true;\n        return whitelist;\n      }, {});\n    }\n    // Some reason fixes composition issues with character languages in Windows/Chrome, Safari\n    _this.domNode.addEventListener('DOMNodeInserted', function () {});\n    _this.optimize();\n    _this.enable();\n    return _this;\n  }\n\n  _createClass(Scroll, [{\n    key: 'batchStart',\n    value: function batchStart() {\n      this.batch = true;\n    }\n  }, {\n    key: 'batchEnd',\n    value: function batchEnd() {\n      this.batch = false;\n      this.optimize();\n    }\n  }, {\n    key: 'deleteAt',\n    value: function deleteAt(index, length) {\n      var _line = this.line(index),\n          _line2 = _slicedToArray(_line, 2),\n          first = _line2[0],\n          offset = _line2[1];\n\n      var _line3 = this.line(index + length),\n          _line4 = _slicedToArray(_line3, 1),\n          last = _line4[0];\n\n      _get(Scroll.prototype.__proto__ || Object.getPrototypeOf(Scroll.prototype), 'deleteAt', this).call(this, index, length);\n      if (last != null && first !== last && offset > 0) {\n        if (first instanceof _block.BlockEmbed || last instanceof _block.BlockEmbed) {\n          this.optimize();\n          return;\n        }\n        if (first instanceof _code2.default) {\n          var newlineIndex = first.newlineIndex(first.length(), true);\n          if (newlineIndex > -1) {\n            first = first.split(newlineIndex + 1);\n            if (first === last) {\n              this.optimize();\n              return;\n            }\n          }\n        } else if (last instanceof _code2.default) {\n          var _newlineIndex = last.newlineIndex(0);\n          if (_newlineIndex > -1) {\n            last.split(_newlineIndex + 1);\n          }\n        }\n        var ref = last.children.head instanceof _break2.default ? null : last.children.head;\n        first.moveChildren(last, ref);\n        first.remove();\n      }\n      this.optimize();\n    }\n  }, {\n    key: 'enable',\n    value: function enable() {\n      var enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      this.domNode.setAttribute('contenteditable', enabled);\n    }\n  }, {\n    key: 'formatAt',\n    value: function formatAt(index, length, format, value) {\n      if (this.whitelist != null && !this.whitelist[format]) return;\n      _get(Scroll.prototype.__proto__ || Object.getPrototypeOf(Scroll.prototype), 'formatAt', this).call(this, index, length, format, value);\n      this.optimize();\n    }\n  }, {\n    key: 'insertAt',\n    value: function insertAt(index, value, def) {\n      if (def != null && this.whitelist != null && !this.whitelist[value]) return;\n      if (index >= this.length()) {\n        if (def == null || _parchment2.default.query(value, _parchment2.default.Scope.BLOCK) == null) {\n          var blot = _parchment2.default.create(this.statics.defaultChild);\n          this.appendChild(blot);\n          if (def == null && value.endsWith('\\n')) {\n            value = value.slice(0, -1);\n          }\n          blot.insertAt(0, value, def);\n        } else {\n          var embed = _parchment2.default.create(value, def);\n          this.appendChild(embed);\n        }\n      } else {\n        _get(Scroll.prototype.__proto__ || Object.getPrototypeOf(Scroll.prototype), 'insertAt', this).call(this, index, value, def);\n      }\n      this.optimize();\n    }\n  }, {\n    key: 'insertBefore',\n    value: function insertBefore(blot, ref) {\n      if (blot.statics.scope === _parchment2.default.Scope.INLINE_BLOT) {\n        var wrapper = _parchment2.default.create(this.statics.defaultChild);\n        wrapper.appendChild(blot);\n        blot = wrapper;\n      }\n      _get(Scroll.prototype.__proto__ || Object.getPrototypeOf(Scroll.prototype), 'insertBefore', this).call(this, blot, ref);\n    }\n  }, {\n    key: 'leaf',\n    value: function leaf(index) {\n      return this.path(index).pop() || [null, -1];\n    }\n  }, {\n    key: 'line',\n    value: function line(index) {\n      if (index === this.length()) {\n        return this.line(index - 1);\n      }\n      return this.descendant(isLine, index);\n    }\n  }, {\n    key: 'lines',\n    value: function lines() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Number.MAX_VALUE;\n\n      var getLines = function getLines(blot, index, length) {\n        var lines = [],\n            lengthLeft = length;\n        blot.children.forEachAt(index, length, function (child, index, length) {\n          if (isLine(child)) {\n            lines.push(child);\n          } else if (child instanceof _parchment2.default.Container) {\n            lines = lines.concat(getLines(child, index, lengthLeft));\n          }\n          lengthLeft -= length;\n        });\n        return lines;\n      };\n      return getLines(this, index, length);\n    }\n  }, {\n    key: 'optimize',\n    value: function optimize() {\n      var mutations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (this.batch === true) return;\n      _get(Scroll.prototype.__proto__ || Object.getPrototypeOf(Scroll.prototype), 'optimize', this).call(this, mutations, context);\n      if (mutations.length > 0) {\n        this.emitter.emit(_emitter2.default.events.SCROLL_OPTIMIZE, mutations, context);\n      }\n    }\n  }, {\n    key: 'path',\n    value: function path(index) {\n      return _get(Scroll.prototype.__proto__ || Object.getPrototypeOf(Scroll.prototype), 'path', this).call(this, index).slice(1); // Exclude self\n    }\n  }, {\n    key: 'update',\n    value: function update(mutations) {\n      if (this.batch === true) return;\n      var source = _emitter2.default.sources.USER;\n      if (typeof mutations === 'string') {\n        source = mutations;\n      }\n      if (!Array.isArray(mutations)) {\n        mutations = this.observer.takeRecords();\n      }\n      if (mutations.length > 0) {\n        this.emitter.emit(_emitter2.default.events.SCROLL_BEFORE_UPDATE, source, mutations);\n      }\n      _get(Scroll.prototype.__proto__ || Object.getPrototypeOf(Scroll.prototype), 'update', this).call(this, mutations.concat([])); // pass copy\n      if (mutations.length > 0) {\n        this.emitter.emit(_emitter2.default.events.SCROLL_UPDATE, source, mutations);\n      }\n    }\n  }]);\n\n  return Scroll;\n}(_parchment2.default.Scroll);\n\nScroll.blotName = 'scroll';\nScroll.className = 'ql-editor';\nScroll.tagName = 'DIV';\nScroll.defaultChild = 'block';\nScroll.allowedChildren = [_block2.default, _block.BlockEmbed, _container2.default];\n\nexports.default = Scroll;\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SHORTKEY = exports.default = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _clone = __webpack_require__(21);\n\nvar _clone2 = _interopRequireDefault(_clone);\n\nvar _deepEqual = __webpack_require__(11);\n\nvar _deepEqual2 = _interopRequireDefault(_deepEqual);\n\nvar _extend = __webpack_require__(3);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _op = __webpack_require__(20);\n\nvar _op2 = _interopRequireDefault(_op);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _quill = __webpack_require__(5);\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nvar _logger = __webpack_require__(10);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _module = __webpack_require__(9);\n\nvar _module2 = _interopRequireDefault(_module);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar debug = (0, _logger2.default)('quill:keyboard');\n\nvar SHORTKEY = /Mac/i.test(navigator.platform) ? 'metaKey' : 'ctrlKey';\n\nvar Keyboard = function (_Module) {\n  _inherits(Keyboard, _Module);\n\n  _createClass(Keyboard, null, [{\n    key: 'match',\n    value: function match(evt, binding) {\n      binding = normalize(binding);\n      if (['altKey', 'ctrlKey', 'metaKey', 'shiftKey'].some(function (key) {\n        return !!binding[key] !== evt[key] && binding[key] !== null;\n      })) {\n        return false;\n      }\n      return binding.key === (evt.which || evt.keyCode);\n    }\n  }]);\n\n  function Keyboard(quill, options) {\n    _classCallCheck(this, Keyboard);\n\n    var _this = _possibleConstructorReturn(this, (Keyboard.__proto__ || Object.getPrototypeOf(Keyboard)).call(this, quill, options));\n\n    _this.bindings = {};\n    Object.keys(_this.options.bindings).forEach(function (name) {\n      if (name === 'list autofill' && quill.scroll.whitelist != null && !quill.scroll.whitelist['list']) {\n        return;\n      }\n      if (_this.options.bindings[name]) {\n        _this.addBinding(_this.options.bindings[name]);\n      }\n    });\n    _this.addBinding({ key: Keyboard.keys.ENTER, shiftKey: null }, handleEnter);\n    _this.addBinding({ key: Keyboard.keys.ENTER, metaKey: null, ctrlKey: null, altKey: null }, function () {});\n    if (/Firefox/i.test(navigator.userAgent)) {\n      // Need to handle delete and backspace for Firefox in the general case #1171\n      _this.addBinding({ key: Keyboard.keys.BACKSPACE }, { collapsed: true }, handleBackspace);\n      _this.addBinding({ key: Keyboard.keys.DELETE }, { collapsed: true }, handleDelete);\n    } else {\n      _this.addBinding({ key: Keyboard.keys.BACKSPACE }, { collapsed: true, prefix: /^.?$/ }, handleBackspace);\n      _this.addBinding({ key: Keyboard.keys.DELETE }, { collapsed: true, suffix: /^.?$/ }, handleDelete);\n    }\n    _this.addBinding({ key: Keyboard.keys.BACKSPACE }, { collapsed: false }, handleDeleteRange);\n    _this.addBinding({ key: Keyboard.keys.DELETE }, { collapsed: false }, handleDeleteRange);\n    _this.addBinding({ key: Keyboard.keys.BACKSPACE, altKey: null, ctrlKey: null, metaKey: null, shiftKey: null }, { collapsed: true, offset: 0 }, handleBackspace);\n    _this.listen();\n    return _this;\n  }\n\n  _createClass(Keyboard, [{\n    key: 'addBinding',\n    value: function addBinding(key) {\n      var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var handler = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      var binding = normalize(key);\n      if (binding == null || binding.key == null) {\n        return debug.warn('Attempted to add invalid keyboard binding', binding);\n      }\n      if (typeof context === 'function') {\n        context = { handler: context };\n      }\n      if (typeof handler === 'function') {\n        handler = { handler: handler };\n      }\n      binding = (0, _extend2.default)(binding, context, handler);\n      this.bindings[binding.key] = this.bindings[binding.key] || [];\n      this.bindings[binding.key].push(binding);\n    }\n  }, {\n    key: 'listen',\n    value: function listen() {\n      var _this2 = this;\n\n      this.quill.root.addEventListener('keydown', function (evt) {\n        if (evt.defaultPrevented) return;\n        var which = evt.which || evt.keyCode;\n        var bindings = (_this2.bindings[which] || []).filter(function (binding) {\n          return Keyboard.match(evt, binding);\n        });\n        if (bindings.length === 0) return;\n        var range = _this2.quill.getSelection();\n        if (range == null || !_this2.quill.hasFocus()) return;\n\n        var _quill$getLine = _this2.quill.getLine(range.index),\n            _quill$getLine2 = _slicedToArray(_quill$getLine, 2),\n            line = _quill$getLine2[0],\n            offset = _quill$getLine2[1];\n\n        var _quill$getLeaf = _this2.quill.getLeaf(range.index),\n            _quill$getLeaf2 = _slicedToArray(_quill$getLeaf, 2),\n            leafStart = _quill$getLeaf2[0],\n            offsetStart = _quill$getLeaf2[1];\n\n        var _ref = range.length === 0 ? [leafStart, offsetStart] : _this2.quill.getLeaf(range.index + range.length),\n            _ref2 = _slicedToArray(_ref, 2),\n            leafEnd = _ref2[0],\n            offsetEnd = _ref2[1];\n\n        var prefixText = leafStart instanceof _parchment2.default.Text ? leafStart.value().slice(0, offsetStart) : '';\n        var suffixText = leafEnd instanceof _parchment2.default.Text ? leafEnd.value().slice(offsetEnd) : '';\n        var curContext = {\n          collapsed: range.length === 0,\n          empty: range.length === 0 && line.length() <= 1,\n          format: _this2.quill.getFormat(range),\n          offset: offset,\n          prefix: prefixText,\n          suffix: suffixText\n        };\n        var prevented = bindings.some(function (binding) {\n          if (binding.collapsed != null && binding.collapsed !== curContext.collapsed) return false;\n          if (binding.empty != null && binding.empty !== curContext.empty) return false;\n          if (binding.offset != null && binding.offset !== curContext.offset) return false;\n          if (Array.isArray(binding.format)) {\n            // any format is present\n            if (binding.format.every(function (name) {\n              return curContext.format[name] == null;\n            })) {\n              return false;\n            }\n          } else if (_typeof(binding.format) === 'object') {\n            // all formats must match\n            if (!Object.keys(binding.format).every(function (name) {\n              if (binding.format[name] === true) return curContext.format[name] != null;\n              if (binding.format[name] === false) return curContext.format[name] == null;\n              return (0, _deepEqual2.default)(binding.format[name], curContext.format[name]);\n            })) {\n              return false;\n            }\n          }\n          if (binding.prefix != null && !binding.prefix.test(curContext.prefix)) return false;\n          if (binding.suffix != null && !binding.suffix.test(curContext.suffix)) return false;\n          return binding.handler.call(_this2, range, curContext) !== true;\n        });\n        if (prevented) {\n          evt.preventDefault();\n        }\n      });\n    }\n  }]);\n\n  return Keyboard;\n}(_module2.default);\n\nKeyboard.keys = {\n  BACKSPACE: 8,\n  TAB: 9,\n  ENTER: 13,\n  ESCAPE: 27,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n  DELETE: 46\n};\n\nKeyboard.DEFAULTS = {\n  bindings: {\n    'bold': makeFormatHandler('bold'),\n    'italic': makeFormatHandler('italic'),\n    'underline': makeFormatHandler('underline'),\n    'indent': {\n      // highlight tab or tab at beginning of list, indent or blockquote\n      key: Keyboard.keys.TAB,\n      format: ['blockquote', 'indent', 'list'],\n      handler: function handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '+1', _quill2.default.sources.USER);\n      }\n    },\n    'outdent': {\n      key: Keyboard.keys.TAB,\n      shiftKey: true,\n      format: ['blockquote', 'indent', 'list'],\n      // highlight tab or tab at beginning of list, indent or blockquote\n      handler: function handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '-1', _quill2.default.sources.USER);\n      }\n    },\n    'outdent backspace': {\n      key: Keyboard.keys.BACKSPACE,\n      collapsed: true,\n      shiftKey: null,\n      metaKey: null,\n      ctrlKey: null,\n      altKey: null,\n      format: ['indent', 'list'],\n      offset: 0,\n      handler: function handler(range, context) {\n        if (context.format.indent != null) {\n          this.quill.format('indent', '-1', _quill2.default.sources.USER);\n        } else if (context.format.list != null) {\n          this.quill.format('list', false, _quill2.default.sources.USER);\n        }\n      }\n    },\n    'indent code-block': makeCodeBlockHandler(true),\n    'outdent code-block': makeCodeBlockHandler(false),\n    'remove tab': {\n      key: Keyboard.keys.TAB,\n      shiftKey: true,\n      collapsed: true,\n      prefix: /\\t$/,\n      handler: function handler(range) {\n        this.quill.deleteText(range.index - 1, 1, _quill2.default.sources.USER);\n      }\n    },\n    'tab': {\n      key: Keyboard.keys.TAB,\n      handler: function handler(range) {\n        this.quill.history.cutoff();\n        var delta = new _quillDelta2.default().retain(range.index).delete(range.length).insert('\\t');\n        this.quill.updateContents(delta, _quill2.default.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index + 1, _quill2.default.sources.SILENT);\n      }\n    },\n    'list empty enter': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: ['list'],\n      empty: true,\n      handler: function handler(range, context) {\n        this.quill.format('list', false, _quill2.default.sources.USER);\n        if (context.format.indent) {\n          this.quill.format('indent', false, _quill2.default.sources.USER);\n        }\n      }\n    },\n    'checklist enter': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: { list: 'checked' },\n      handler: function handler(range) {\n        var _quill$getLine3 = this.quill.getLine(range.index),\n            _quill$getLine4 = _slicedToArray(_quill$getLine3, 2),\n            line = _quill$getLine4[0],\n            offset = _quill$getLine4[1];\n\n        var formats = (0, _extend2.default)({}, line.formats(), { list: 'checked' });\n        var delta = new _quillDelta2.default().retain(range.index).insert('\\n', formats).retain(line.length() - offset - 1).retain(1, { list: 'unchecked' });\n        this.quill.updateContents(delta, _quill2.default.sources.USER);\n        this.quill.setSelection(range.index + 1, _quill2.default.sources.SILENT);\n        this.quill.scrollIntoView();\n      }\n    },\n    'header enter': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: ['header'],\n      suffix: /^$/,\n      handler: function handler(range, context) {\n        var _quill$getLine5 = this.quill.getLine(range.index),\n            _quill$getLine6 = _slicedToArray(_quill$getLine5, 2),\n            line = _quill$getLine6[0],\n            offset = _quill$getLine6[1];\n\n        var delta = new _quillDelta2.default().retain(range.index).insert('\\n', context.format).retain(line.length() - offset - 1).retain(1, { header: null });\n        this.quill.updateContents(delta, _quill2.default.sources.USER);\n        this.quill.setSelection(range.index + 1, _quill2.default.sources.SILENT);\n        this.quill.scrollIntoView();\n      }\n    },\n    'list autofill': {\n      key: ' ',\n      collapsed: true,\n      format: { list: false },\n      prefix: /^\\s*?(\\d+\\.|-|\\*|\\[ ?\\]|\\[x\\])$/,\n      handler: function handler(range, context) {\n        var length = context.prefix.length;\n\n        var _quill$getLine7 = this.quill.getLine(range.index),\n            _quill$getLine8 = _slicedToArray(_quill$getLine7, 2),\n            line = _quill$getLine8[0],\n            offset = _quill$getLine8[1];\n\n        if (offset > length) return true;\n        var value = void 0;\n        switch (context.prefix.trim()) {\n          case '[]':case '[ ]':\n            value = 'unchecked';\n            break;\n          case '[x]':\n            value = 'checked';\n            break;\n          case '-':case '*':\n            value = 'bullet';\n            break;\n          default:\n            value = 'ordered';\n        }\n        this.quill.insertText(range.index, ' ', _quill2.default.sources.USER);\n        this.quill.history.cutoff();\n        var delta = new _quillDelta2.default().retain(range.index - offset).delete(length + 1).retain(line.length() - 2 - offset).retain(1, { list: value });\n        this.quill.updateContents(delta, _quill2.default.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index - length, _quill2.default.sources.SILENT);\n      }\n    },\n    'code exit': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: ['code-block'],\n      prefix: /\\n\\n$/,\n      suffix: /^\\s+$/,\n      handler: function handler(range) {\n        var _quill$getLine9 = this.quill.getLine(range.index),\n            _quill$getLine10 = _slicedToArray(_quill$getLine9, 2),\n            line = _quill$getLine10[0],\n            offset = _quill$getLine10[1];\n\n        var delta = new _quillDelta2.default().retain(range.index + line.length() - offset - 2).retain(1, { 'code-block': null }).delete(1);\n        this.quill.updateContents(delta, _quill2.default.sources.USER);\n      }\n    },\n    'embed left': makeEmbedArrowHandler(Keyboard.keys.LEFT, false),\n    'embed left shift': makeEmbedArrowHandler(Keyboard.keys.LEFT, true),\n    'embed right': makeEmbedArrowHandler(Keyboard.keys.RIGHT, false),\n    'embed right shift': makeEmbedArrowHandler(Keyboard.keys.RIGHT, true)\n  }\n};\n\nfunction makeEmbedArrowHandler(key, shiftKey) {\n  var _ref3;\n\n  var where = key === Keyboard.keys.LEFT ? 'prefix' : 'suffix';\n  return _ref3 = {\n    key: key,\n    shiftKey: shiftKey,\n    altKey: null\n  }, _defineProperty(_ref3, where, /^$/), _defineProperty(_ref3, 'handler', function handler(range) {\n    var index = range.index;\n    if (key === Keyboard.keys.RIGHT) {\n      index += range.length + 1;\n    }\n\n    var _quill$getLeaf3 = this.quill.getLeaf(index),\n        _quill$getLeaf4 = _slicedToArray(_quill$getLeaf3, 1),\n        leaf = _quill$getLeaf4[0];\n\n    if (!(leaf instanceof _parchment2.default.Embed)) return true;\n    if (key === Keyboard.keys.LEFT) {\n      if (shiftKey) {\n        this.quill.setSelection(range.index - 1, range.length + 1, _quill2.default.sources.USER);\n      } else {\n        this.quill.setSelection(range.index - 1, _quill2.default.sources.USER);\n      }\n    } else {\n      if (shiftKey) {\n        this.quill.setSelection(range.index, range.length + 1, _quill2.default.sources.USER);\n      } else {\n        this.quill.setSelection(range.index + range.length + 1, _quill2.default.sources.USER);\n      }\n    }\n    return false;\n  }), _ref3;\n}\n\nfunction handleBackspace(range, context) {\n  if (range.index === 0 || this.quill.getLength() <= 1) return;\n\n  var _quill$getLine11 = this.quill.getLine(range.index),\n      _quill$getLine12 = _slicedToArray(_quill$getLine11, 1),\n      line = _quill$getLine12[0];\n\n  var formats = {};\n  if (context.offset === 0) {\n    var _quill$getLine13 = this.quill.getLine(range.index - 1),\n        _quill$getLine14 = _slicedToArray(_quill$getLine13, 1),\n        prev = _quill$getLine14[0];\n\n    if (prev != null && prev.length() > 1) {\n      var curFormats = line.formats();\n      var prevFormats = this.quill.getFormat(range.index - 1, 1);\n      formats = _op2.default.attributes.diff(curFormats, prevFormats) || {};\n    }\n  }\n  // Check for astral symbols\n  var length = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]$/.test(context.prefix) ? 2 : 1;\n  this.quill.deleteText(range.index - length, length, _quill2.default.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    this.quill.formatLine(range.index - length, length, formats, _quill2.default.sources.USER);\n  }\n  this.quill.focus();\n}\n\nfunction handleDelete(range, context) {\n  // Check for astral symbols\n  var length = /^[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/.test(context.suffix) ? 2 : 1;\n  if (range.index >= this.quill.getLength() - length) return;\n  var formats = {},\n      nextLength = 0;\n\n  var _quill$getLine15 = this.quill.getLine(range.index),\n      _quill$getLine16 = _slicedToArray(_quill$getLine15, 1),\n      line = _quill$getLine16[0];\n\n  if (context.offset >= line.length() - 1) {\n    var _quill$getLine17 = this.quill.getLine(range.index + 1),\n        _quill$getLine18 = _slicedToArray(_quill$getLine17, 1),\n        next = _quill$getLine18[0];\n\n    if (next) {\n      var curFormats = line.formats();\n      var nextFormats = this.quill.getFormat(range.index, 1);\n      formats = _op2.default.attributes.diff(curFormats, nextFormats) || {};\n      nextLength = next.length();\n    }\n  }\n  this.quill.deleteText(range.index, length, _quill2.default.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    this.quill.formatLine(range.index + nextLength - 1, length, formats, _quill2.default.sources.USER);\n  }\n}\n\nfunction handleDeleteRange(range) {\n  var lines = this.quill.getLines(range);\n  var formats = {};\n  if (lines.length > 1) {\n    var firstFormats = lines[0].formats();\n    var lastFormats = lines[lines.length - 1].formats();\n    formats = _op2.default.attributes.diff(lastFormats, firstFormats) || {};\n  }\n  this.quill.deleteText(range, _quill2.default.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    this.quill.formatLine(range.index, 1, formats, _quill2.default.sources.USER);\n  }\n  this.quill.setSelection(range.index, _quill2.default.sources.SILENT);\n  this.quill.focus();\n}\n\nfunction handleEnter(range, context) {\n  var _this3 = this;\n\n  if (range.length > 0) {\n    this.quill.scroll.deleteAt(range.index, range.length); // So we do not trigger text-change\n  }\n  var lineFormats = Object.keys(context.format).reduce(function (lineFormats, format) {\n    if (_parchment2.default.query(format, _parchment2.default.Scope.BLOCK) && !Array.isArray(context.format[format])) {\n      lineFormats[format] = context.format[format];\n    }\n    return lineFormats;\n  }, {});\n  this.quill.insertText(range.index, '\\n', lineFormats, _quill2.default.sources.USER);\n  // Earlier scroll.deleteAt might have messed up our selection,\n  // so insertText's built in selection preservation is not reliable\n  this.quill.setSelection(range.index + 1, _quill2.default.sources.SILENT);\n  this.quill.focus();\n  Object.keys(context.format).forEach(function (name) {\n    if (lineFormats[name] != null) return;\n    if (Array.isArray(context.format[name])) return;\n    if (name === 'link') return;\n    _this3.quill.format(name, context.format[name], _quill2.default.sources.USER);\n  });\n}\n\nfunction makeCodeBlockHandler(indent) {\n  return {\n    key: Keyboard.keys.TAB,\n    shiftKey: !indent,\n    format: { 'code-block': true },\n    handler: function handler(range) {\n      var CodeBlock = _parchment2.default.query('code-block');\n      var index = range.index,\n          length = range.length;\n\n      var _quill$scroll$descend = this.quill.scroll.descendant(CodeBlock, index),\n          _quill$scroll$descend2 = _slicedToArray(_quill$scroll$descend, 2),\n          block = _quill$scroll$descend2[0],\n          offset = _quill$scroll$descend2[1];\n\n      if (block == null) return;\n      var scrollIndex = this.quill.getIndex(block);\n      var start = block.newlineIndex(offset, true) + 1;\n      var end = block.newlineIndex(scrollIndex + offset + length);\n      var lines = block.domNode.textContent.slice(start, end).split('\\n');\n      offset = 0;\n      lines.forEach(function (line, i) {\n        if (indent) {\n          block.insertAt(start + offset, CodeBlock.TAB);\n          offset += CodeBlock.TAB.length;\n          if (i === 0) {\n            index += CodeBlock.TAB.length;\n          } else {\n            length += CodeBlock.TAB.length;\n          }\n        } else if (line.startsWith(CodeBlock.TAB)) {\n          block.deleteAt(start + offset, CodeBlock.TAB.length);\n          offset -= CodeBlock.TAB.length;\n          if (i === 0) {\n            index -= CodeBlock.TAB.length;\n          } else {\n            length -= CodeBlock.TAB.length;\n          }\n        }\n        offset += line.length + 1;\n      });\n      this.quill.update(_quill2.default.sources.USER);\n      this.quill.setSelection(index, length, _quill2.default.sources.SILENT);\n    }\n  };\n}\n\nfunction makeFormatHandler(format) {\n  return {\n    key: format[0].toUpperCase(),\n    shortKey: true,\n    handler: function handler(range, context) {\n      this.quill.format(format, !context.format[format], _quill2.default.sources.USER);\n    }\n  };\n}\n\nfunction normalize(binding) {\n  if (typeof binding === 'string' || typeof binding === 'number') {\n    return normalize({ key: binding });\n  }\n  if ((typeof binding === 'undefined' ? 'undefined' : _typeof(binding)) === 'object') {\n    binding = (0, _clone2.default)(binding, false);\n  }\n  if (typeof binding.key === 'string') {\n    if (Keyboard.keys[binding.key.toUpperCase()] != null) {\n      binding.key = Keyboard.keys[binding.key.toUpperCase()];\n    } else if (binding.key.length === 1) {\n      binding.key = binding.key.toUpperCase().charCodeAt(0);\n    } else {\n      return null;\n    }\n  }\n  if (binding.shortKey) {\n    binding[SHORTKEY] = binding.shortKey;\n    delete binding.shortKey;\n  }\n  return binding;\n}\n\nexports.default = Keyboard;\nexports.SHORTKEY = SHORTKEY;\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _text = __webpack_require__(7);\n\nvar _text2 = _interopRequireDefault(_text);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Cursor = function (_Parchment$Embed) {\n  _inherits(Cursor, _Parchment$Embed);\n\n  _createClass(Cursor, null, [{\n    key: 'value',\n    value: function value() {\n      return undefined;\n    }\n  }]);\n\n  function Cursor(domNode, selection) {\n    _classCallCheck(this, Cursor);\n\n    var _this = _possibleConstructorReturn(this, (Cursor.__proto__ || Object.getPrototypeOf(Cursor)).call(this, domNode));\n\n    _this.selection = selection;\n    _this.textNode = document.createTextNode(Cursor.CONTENTS);\n    _this.domNode.appendChild(_this.textNode);\n    _this._length = 0;\n    return _this;\n  }\n\n  _createClass(Cursor, [{\n    key: 'detach',\n    value: function detach() {\n      // super.detach() will also clear domNode.__blot\n      if (this.parent != null) this.parent.removeChild(this);\n    }\n  }, {\n    key: 'format',\n    value: function format(name, value) {\n      if (this._length !== 0) {\n        return _get(Cursor.prototype.__proto__ || Object.getPrototypeOf(Cursor.prototype), 'format', this).call(this, name, value);\n      }\n      var target = this,\n          index = 0;\n      while (target != null && target.statics.scope !== _parchment2.default.Scope.BLOCK_BLOT) {\n        index += target.offset(target.parent);\n        target = target.parent;\n      }\n      if (target != null) {\n        this._length = Cursor.CONTENTS.length;\n        target.optimize();\n        target.formatAt(index, Cursor.CONTENTS.length, name, value);\n        this._length = 0;\n      }\n    }\n  }, {\n    key: 'index',\n    value: function index(node, offset) {\n      if (node === this.textNode) return 0;\n      return _get(Cursor.prototype.__proto__ || Object.getPrototypeOf(Cursor.prototype), 'index', this).call(this, node, offset);\n    }\n  }, {\n    key: 'length',\n    value: function length() {\n      return this._length;\n    }\n  }, {\n    key: 'position',\n    value: function position() {\n      return [this.textNode, this.textNode.data.length];\n    }\n  }, {\n    key: 'remove',\n    value: function remove() {\n      _get(Cursor.prototype.__proto__ || Object.getPrototypeOf(Cursor.prototype), 'remove', this).call(this);\n      this.parent = null;\n    }\n  }, {\n    key: 'restore',\n    value: function restore() {\n      if (this.selection.composing || this.parent == null) return;\n      var textNode = this.textNode;\n      var range = this.selection.getNativeRange();\n      var restoreText = void 0,\n          start = void 0,\n          end = void 0;\n      if (range != null && range.start.node === textNode && range.end.node === textNode) {\n        var _ref = [textNode, range.start.offset, range.end.offset];\n        restoreText = _ref[0];\n        start = _ref[1];\n        end = _ref[2];\n      }\n      // Link format will insert text outside of anchor tag\n      while (this.domNode.lastChild != null && this.domNode.lastChild !== this.textNode) {\n        this.domNode.parentNode.insertBefore(this.domNode.lastChild, this.domNode);\n      }\n      if (this.textNode.data !== Cursor.CONTENTS) {\n        var text = this.textNode.data.split(Cursor.CONTENTS).join('');\n        if (this.next instanceof _text2.default) {\n          restoreText = this.next.domNode;\n          this.next.insertAt(0, text);\n          this.textNode.data = Cursor.CONTENTS;\n        } else {\n          this.textNode.data = text;\n          this.parent.insertBefore(_parchment2.default.create(this.textNode), this);\n          this.textNode = document.createTextNode(Cursor.CONTENTS);\n          this.domNode.appendChild(this.textNode);\n        }\n      }\n      this.remove();\n      if (start != null) {\n        var _map = [start, end].map(function (offset) {\n          return Math.max(0, Math.min(restoreText.data.length, offset - 1));\n        });\n\n        var _map2 = _slicedToArray(_map, 2);\n\n        start = _map2[0];\n        end = _map2[1];\n\n        return {\n          startNode: restoreText,\n          startOffset: start,\n          endNode: restoreText,\n          endOffset: end\n        };\n      }\n    }\n  }, {\n    key: 'update',\n    value: function update(mutations, context) {\n      var _this2 = this;\n\n      if (mutations.some(function (mutation) {\n        return mutation.type === 'characterData' && mutation.target === _this2.textNode;\n      })) {\n        var range = this.restore();\n        if (range) context.range = range;\n      }\n    }\n  }, {\n    key: 'value',\n    value: function value() {\n      return '';\n    }\n  }]);\n\n  return Cursor;\n}(_parchment2.default.Embed);\n\nCursor.blotName = 'cursor';\nCursor.className = 'ql-cursor';\nCursor.tagName = 'span';\nCursor.CONTENTS = '\\uFEFF'; // Zero width no break space\n\n\nexports.default = Cursor;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Container = function (_Parchment$Container) {\n  _inherits(Container, _Parchment$Container);\n\n  function Container() {\n    _classCallCheck(this, Container);\n\n    return _possibleConstructorReturn(this, (Container.__proto__ || Object.getPrototypeOf(Container)).apply(this, arguments));\n  }\n\n  return Container;\n}(_parchment2.default.Container);\n\nContainer.allowedChildren = [_block2.default, _block.BlockEmbed, Container];\n\nexports.default = Container;\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ColorStyle = exports.ColorClass = exports.ColorAttributor = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ColorAttributor = function (_Parchment$Attributor) {\n  _inherits(ColorAttributor, _Parchment$Attributor);\n\n  function ColorAttributor() {\n    _classCallCheck(this, ColorAttributor);\n\n    return _possibleConstructorReturn(this, (ColorAttributor.__proto__ || Object.getPrototypeOf(ColorAttributor)).apply(this, arguments));\n  }\n\n  _createClass(ColorAttributor, [{\n    key: 'value',\n    value: function value(domNode) {\n      var value = _get(ColorAttributor.prototype.__proto__ || Object.getPrototypeOf(ColorAttributor.prototype), 'value', this).call(this, domNode);\n      if (!value.startsWith('rgb(')) return value;\n      value = value.replace(/^[^\\d]+/, '').replace(/[^\\d]+$/, '');\n      return '#' + value.split(',').map(function (component) {\n        return ('00' + parseInt(component).toString(16)).slice(-2);\n      }).join('');\n    }\n  }]);\n\n  return ColorAttributor;\n}(_parchment2.default.Attributor.Style);\n\nvar ColorClass = new _parchment2.default.Attributor.Class('color', 'ql-color', {\n  scope: _parchment2.default.Scope.INLINE\n});\nvar ColorStyle = new ColorAttributor('color', 'color', {\n  scope: _parchment2.default.Scope.INLINE\n});\n\nexports.ColorAttributor = ColorAttributor;\nexports.ColorClass = ColorClass;\nexports.ColorStyle = ColorStyle;\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sanitize = exports.default = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Link = function (_Inline) {\n  _inherits(Link, _Inline);\n\n  function Link() {\n    _classCallCheck(this, Link);\n\n    return _possibleConstructorReturn(this, (Link.__proto__ || Object.getPrototypeOf(Link)).apply(this, arguments));\n  }\n\n  _createClass(Link, [{\n    key: 'format',\n    value: function format(name, value) {\n      if (name !== this.statics.blotName || !value) return _get(Link.prototype.__proto__ || Object.getPrototypeOf(Link.prototype), 'format', this).call(this, name, value);\n      value = this.constructor.sanitize(value);\n      this.domNode.setAttribute('href', value);\n    }\n  }], [{\n    key: 'create',\n    value: function create(value) {\n      var node = _get(Link.__proto__ || Object.getPrototypeOf(Link), 'create', this).call(this, value);\n      value = this.sanitize(value);\n      node.setAttribute('href', value);\n      node.setAttribute('rel', 'noopener noreferrer');\n      node.setAttribute('target', '_blank');\n      return node;\n    }\n  }, {\n    key: 'formats',\n    value: function formats(domNode) {\n      return domNode.getAttribute('href');\n    }\n  }, {\n    key: 'sanitize',\n    value: function sanitize(url) {\n      return _sanitize(url, this.PROTOCOL_WHITELIST) ? url : this.SANITIZED_URL;\n    }\n  }]);\n\n  return Link;\n}(_inline2.default);\n\nLink.blotName = 'link';\nLink.tagName = 'A';\nLink.SANITIZED_URL = 'about:blank';\nLink.PROTOCOL_WHITELIST = ['http', 'https', 'mailto', 'tel'];\n\nfunction _sanitize(url, protocols) {\n  var anchor = document.createElement('a');\n  anchor.href = url;\n  var protocol = anchor.href.slice(0, anchor.href.indexOf(':'));\n  return protocols.indexOf(protocol) > -1;\n}\n\nexports.default = Link;\nexports.sanitize = _sanitize;\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _keyboard = __webpack_require__(23);\n\nvar _keyboard2 = _interopRequireDefault(_keyboard);\n\nvar _dropdown = __webpack_require__(107);\n\nvar _dropdown2 = _interopRequireDefault(_dropdown);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar optionsCounter = 0;\n\nfunction toggleAriaAttribute(element, attribute) {\n  element.setAttribute(attribute, !(element.getAttribute(attribute) === 'true'));\n}\n\nvar Picker = function () {\n  function Picker(select) {\n    var _this = this;\n\n    _classCallCheck(this, Picker);\n\n    this.select = select;\n    this.container = document.createElement('span');\n    this.buildPicker();\n    this.select.style.display = 'none';\n    this.select.parentNode.insertBefore(this.container, this.select);\n\n    this.label.addEventListener('mousedown', function () {\n      _this.togglePicker();\n    });\n    this.label.addEventListener('keydown', function (event) {\n      switch (event.keyCode) {\n        // Allows the \"Enter\" key to open the picker\n        case _keyboard2.default.keys.ENTER:\n          _this.togglePicker();\n          break;\n\n        // Allows the \"Escape\" key to close the picker\n        case _keyboard2.default.keys.ESCAPE:\n          _this.escape();\n          event.preventDefault();\n          break;\n        default:\n      }\n    });\n    this.select.addEventListener('change', this.update.bind(this));\n  }\n\n  _createClass(Picker, [{\n    key: 'togglePicker',\n    value: function togglePicker() {\n      this.container.classList.toggle('ql-expanded');\n      // Toggle aria-expanded and aria-hidden to make the picker accessible\n      toggleAriaAttribute(this.label, 'aria-expanded');\n      toggleAriaAttribute(this.options, 'aria-hidden');\n    }\n  }, {\n    key: 'buildItem',\n    value: function buildItem(option) {\n      var _this2 = this;\n\n      var item = document.createElement('span');\n      item.tabIndex = '0';\n      item.setAttribute('role', 'button');\n\n      item.classList.add('ql-picker-item');\n      if (option.hasAttribute('value')) {\n        item.setAttribute('data-value', option.getAttribute('value'));\n      }\n      if (option.textContent) {\n        item.setAttribute('data-label', option.textContent);\n      }\n      item.addEventListener('click', function () {\n        _this2.selectItem(item, true);\n      });\n      item.addEventListener('keydown', function (event) {\n        switch (event.keyCode) {\n          // Allows the \"Enter\" key to select an item\n          case _keyboard2.default.keys.ENTER:\n            _this2.selectItem(item, true);\n            event.preventDefault();\n            break;\n\n          // Allows the \"Escape\" key to close the picker\n          case _keyboard2.default.keys.ESCAPE:\n            _this2.escape();\n            event.preventDefault();\n            break;\n          default:\n        }\n      });\n\n      return item;\n    }\n  }, {\n    key: 'buildLabel',\n    value: function buildLabel() {\n      var label = document.createElement('span');\n      label.classList.add('ql-picker-label');\n      label.innerHTML = _dropdown2.default;\n      label.tabIndex = '0';\n      label.setAttribute('role', 'button');\n      label.setAttribute('aria-expanded', 'false');\n      this.container.appendChild(label);\n      return label;\n    }\n  }, {\n    key: 'buildOptions',\n    value: function buildOptions() {\n      var _this3 = this;\n\n      var options = document.createElement('span');\n      options.classList.add('ql-picker-options');\n\n      // Don't want screen readers to read this until options are visible\n      options.setAttribute('aria-hidden', 'true');\n      options.tabIndex = '-1';\n\n      // Need a unique id for aria-controls\n      options.id = 'ql-picker-options-' + optionsCounter;\n      optionsCounter += 1;\n      this.label.setAttribute('aria-controls', options.id);\n\n      this.options = options;\n\n      [].slice.call(this.select.options).forEach(function (option) {\n        var item = _this3.buildItem(option);\n        options.appendChild(item);\n        if (option.selected === true) {\n          _this3.selectItem(item);\n        }\n      });\n      this.container.appendChild(options);\n    }\n  }, {\n    key: 'buildPicker',\n    value: function buildPicker() {\n      var _this4 = this;\n\n      [].slice.call(this.select.attributes).forEach(function (item) {\n        _this4.container.setAttribute(item.name, item.value);\n      });\n      this.container.classList.add('ql-picker');\n      this.label = this.buildLabel();\n      this.buildOptions();\n    }\n  }, {\n    key: 'escape',\n    value: function escape() {\n      var _this5 = this;\n\n      // Close menu and return focus to trigger label\n      this.close();\n      // Need setTimeout for accessibility to ensure that the browser executes\n      // focus on the next process thread and after any DOM content changes\n      setTimeout(function () {\n        return _this5.label.focus();\n      }, 1);\n    }\n  }, {\n    key: 'close',\n    value: function close() {\n      this.container.classList.remove('ql-expanded');\n      this.label.setAttribute('aria-expanded', 'false');\n      this.options.setAttribute('aria-hidden', 'true');\n    }\n  }, {\n    key: 'selectItem',\n    value: function selectItem(item) {\n      var trigger = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var selected = this.container.querySelector('.ql-selected');\n      if (item === selected) return;\n      if (selected != null) {\n        selected.classList.remove('ql-selected');\n      }\n      if (item == null) return;\n      item.classList.add('ql-selected');\n      this.select.selectedIndex = [].indexOf.call(item.parentNode.children, item);\n      if (item.hasAttribute('data-value')) {\n        this.label.setAttribute('data-value', item.getAttribute('data-value'));\n      } else {\n        this.label.removeAttribute('data-value');\n      }\n      if (item.hasAttribute('data-label')) {\n        this.label.setAttribute('data-label', item.getAttribute('data-label'));\n      } else {\n        this.label.removeAttribute('data-label');\n      }\n      if (trigger) {\n        if (typeof Event === 'function') {\n          this.select.dispatchEvent(new Event('change'));\n        } else if ((typeof Event === 'undefined' ? 'undefined' : _typeof(Event)) === 'object') {\n          // IE11\n          var event = document.createEvent('Event');\n          event.initEvent('change', true, true);\n          this.select.dispatchEvent(event);\n        }\n        this.close();\n      }\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var option = void 0;\n      if (this.select.selectedIndex > -1) {\n        var item = this.container.querySelector('.ql-picker-options').children[this.select.selectedIndex];\n        option = this.select.options[this.select.selectedIndex];\n        this.selectItem(item);\n      } else {\n        this.selectItem(null);\n      }\n      var isActive = option != null && option !== this.select.querySelector('option[selected]');\n      this.label.classList.toggle('ql-active', isActive);\n    }\n  }]);\n\n  return Picker;\n}();\n\nexports.default = Picker;\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _quill = __webpack_require__(5);\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nvar _break = __webpack_require__(16);\n\nvar _break2 = _interopRequireDefault(_break);\n\nvar _container = __webpack_require__(25);\n\nvar _container2 = _interopRequireDefault(_container);\n\nvar _cursor = __webpack_require__(24);\n\nvar _cursor2 = _interopRequireDefault(_cursor);\n\nvar _embed = __webpack_require__(35);\n\nvar _embed2 = _interopRequireDefault(_embed);\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nvar _scroll = __webpack_require__(22);\n\nvar _scroll2 = _interopRequireDefault(_scroll);\n\nvar _text = __webpack_require__(7);\n\nvar _text2 = _interopRequireDefault(_text);\n\nvar _clipboard = __webpack_require__(55);\n\nvar _clipboard2 = _interopRequireDefault(_clipboard);\n\nvar _history = __webpack_require__(42);\n\nvar _history2 = _interopRequireDefault(_history);\n\nvar _keyboard = __webpack_require__(23);\n\nvar _keyboard2 = _interopRequireDefault(_keyboard);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_quill2.default.register({\n  'blots/block': _block2.default,\n  'blots/block/embed': _block.BlockEmbed,\n  'blots/break': _break2.default,\n  'blots/container': _container2.default,\n  'blots/cursor': _cursor2.default,\n  'blots/embed': _embed2.default,\n  'blots/inline': _inline2.default,\n  'blots/scroll': _scroll2.default,\n  'blots/text': _text2.default,\n\n  'modules/clipboard': _clipboard2.default,\n  'modules/history': _history2.default,\n  'modules/keyboard': _keyboard2.default\n});\n\n_parchment2.default.register(_block2.default, _break2.default, _cursor2.default, _inline2.default, _scroll2.default, _text2.default);\n\nexports.default = _quill2.default;\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Registry = __webpack_require__(1);\nvar ShadowBlot = /** @class */ (function () {\n    function ShadowBlot(domNode) {\n        this.domNode = domNode;\n        // @ts-ignore\n        this.domNode[Registry.DATA_KEY] = { blot: this };\n    }\n    Object.defineProperty(ShadowBlot.prototype, \"statics\", {\n        // Hack for accessing inherited static methods\n        get: function () {\n            return this.constructor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ShadowBlot.create = function (value) {\n        if (this.tagName == null) {\n            throw new Registry.ParchmentError('Blot definition missing tagName');\n        }\n        var node;\n        if (Array.isArray(this.tagName)) {\n            if (typeof value === 'string') {\n                value = value.toUpperCase();\n                if (parseInt(value).toString() === value) {\n                    value = parseInt(value);\n                }\n            }\n            if (typeof value === 'number') {\n                node = document.createElement(this.tagName[value - 1]);\n            }\n            else if (this.tagName.indexOf(value) > -1) {\n                node = document.createElement(value);\n            }\n            else {\n                node = document.createElement(this.tagName[0]);\n            }\n        }\n        else {\n            node = document.createElement(this.tagName);\n        }\n        if (this.className) {\n            node.classList.add(this.className);\n        }\n        return node;\n    };\n    ShadowBlot.prototype.attach = function () {\n        if (this.parent != null) {\n            this.scroll = this.parent.scroll;\n        }\n    };\n    ShadowBlot.prototype.clone = function () {\n        var domNode = this.domNode.cloneNode(false);\n        return Registry.create(domNode);\n    };\n    ShadowBlot.prototype.detach = function () {\n        if (this.parent != null)\n            this.parent.removeChild(this);\n        // @ts-ignore\n        delete this.domNode[Registry.DATA_KEY];\n    };\n    ShadowBlot.prototype.deleteAt = function (index, length) {\n        var blot = this.isolate(index, length);\n        blot.remove();\n    };\n    ShadowBlot.prototype.formatAt = function (index, length, name, value) {\n        var blot = this.isolate(index, length);\n        if (Registry.query(name, Registry.Scope.BLOT) != null && value) {\n            blot.wrap(name, value);\n        }\n        else if (Registry.query(name, Registry.Scope.ATTRIBUTE) != null) {\n            var parent = Registry.create(this.statics.scope);\n            blot.wrap(parent);\n            parent.format(name, value);\n        }\n    };\n    ShadowBlot.prototype.insertAt = function (index, value, def) {\n        var blot = def == null ? Registry.create('text', value) : Registry.create(value, def);\n        var ref = this.split(index);\n        this.parent.insertBefore(blot, ref);\n    };\n    ShadowBlot.prototype.insertInto = function (parentBlot, refBlot) {\n        if (refBlot === void 0) { refBlot = null; }\n        if (this.parent != null) {\n            this.parent.children.remove(this);\n        }\n        var refDomNode = null;\n        parentBlot.children.insertBefore(this, refBlot);\n        if (refBlot != null) {\n            refDomNode = refBlot.domNode;\n        }\n        if (this.domNode.parentNode != parentBlot.domNode ||\n            this.domNode.nextSibling != refDomNode) {\n            parentBlot.domNode.insertBefore(this.domNode, refDomNode);\n        }\n        this.parent = parentBlot;\n        this.attach();\n    };\n    ShadowBlot.prototype.isolate = function (index, length) {\n        var target = this.split(index);\n        target.split(length);\n        return target;\n    };\n    ShadowBlot.prototype.length = function () {\n        return 1;\n    };\n    ShadowBlot.prototype.offset = function (root) {\n        if (root === void 0) { root = this.parent; }\n        if (this.parent == null || this == root)\n            return 0;\n        return this.parent.children.offset(this) + this.parent.offset(root);\n    };\n    ShadowBlot.prototype.optimize = function (context) {\n        // TODO clean up once we use WeakMap\n        // @ts-ignore\n        if (this.domNode[Registry.DATA_KEY] != null) {\n            // @ts-ignore\n            delete this.domNode[Registry.DATA_KEY].mutations;\n        }\n    };\n    ShadowBlot.prototype.remove = function () {\n        if (this.domNode.parentNode != null) {\n            this.domNode.parentNode.removeChild(this.domNode);\n        }\n        this.detach();\n    };\n    ShadowBlot.prototype.replace = function (target) {\n        if (target.parent == null)\n            return;\n        target.parent.insertBefore(this, target.next);\n        target.remove();\n    };\n    ShadowBlot.prototype.replaceWith = function (name, value) {\n        var replacement = typeof name === 'string' ? Registry.create(name, value) : name;\n        replacement.replace(this);\n        return replacement;\n    };\n    ShadowBlot.prototype.split = function (index, force) {\n        return index === 0 ? this : this.next;\n    };\n    ShadowBlot.prototype.update = function (mutations, context) {\n        // Nothing to do by default\n    };\n    ShadowBlot.prototype.wrap = function (name, value) {\n        var wrapper = typeof name === 'string' ? Registry.create(name, value) : name;\n        if (this.parent != null) {\n            this.parent.insertBefore(wrapper, this.next);\n        }\n        wrapper.appendChild(this);\n        return wrapper;\n    };\n    ShadowBlot.blotName = 'abstract';\n    return ShadowBlot;\n}());\nexports.default = ShadowBlot;\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = __webpack_require__(12);\nvar class_1 = __webpack_require__(32);\nvar style_1 = __webpack_require__(33);\nvar Registry = __webpack_require__(1);\nvar AttributorStore = /** @class */ (function () {\n    function AttributorStore(domNode) {\n        this.attributes = {};\n        this.domNode = domNode;\n        this.build();\n    }\n    AttributorStore.prototype.attribute = function (attribute, value) {\n        // verb\n        if (value) {\n            if (attribute.add(this.domNode, value)) {\n                if (attribute.value(this.domNode) != null) {\n                    this.attributes[attribute.attrName] = attribute;\n                }\n                else {\n                    delete this.attributes[attribute.attrName];\n                }\n            }\n        }\n        else {\n            attribute.remove(this.domNode);\n            delete this.attributes[attribute.attrName];\n        }\n    };\n    AttributorStore.prototype.build = function () {\n        var _this = this;\n        this.attributes = {};\n        var attributes = attributor_1.default.keys(this.domNode);\n        var classes = class_1.default.keys(this.domNode);\n        var styles = style_1.default.keys(this.domNode);\n        attributes\n            .concat(classes)\n            .concat(styles)\n            .forEach(function (name) {\n            var attr = Registry.query(name, Registry.Scope.ATTRIBUTE);\n            if (attr instanceof attributor_1.default) {\n                _this.attributes[attr.attrName] = attr;\n            }\n        });\n    };\n    AttributorStore.prototype.copy = function (target) {\n        var _this = this;\n        Object.keys(this.attributes).forEach(function (key) {\n            var value = _this.attributes[key].value(_this.domNode);\n            target.format(key, value);\n        });\n    };\n    AttributorStore.prototype.move = function (target) {\n        var _this = this;\n        this.copy(target);\n        Object.keys(this.attributes).forEach(function (key) {\n            _this.attributes[key].remove(_this.domNode);\n        });\n        this.attributes = {};\n    };\n    AttributorStore.prototype.values = function () {\n        var _this = this;\n        return Object.keys(this.attributes).reduce(function (attributes, name) {\n            attributes[name] = _this.attributes[name].value(_this.domNode);\n            return attributes;\n        }, {});\n    };\n    return AttributorStore;\n}());\nexports.default = AttributorStore;\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = __webpack_require__(12);\nfunction match(node, prefix) {\n    var className = node.getAttribute('class') || '';\n    return className.split(/\\s+/).filter(function (name) {\n        return name.indexOf(prefix + \"-\") === 0;\n    });\n}\nvar ClassAttributor = /** @class */ (function (_super) {\n    __extends(ClassAttributor, _super);\n    function ClassAttributor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ClassAttributor.keys = function (node) {\n        return (node.getAttribute('class') || '').split(/\\s+/).map(function (name) {\n            return name\n                .split('-')\n                .slice(0, -1)\n                .join('-');\n        });\n    };\n    ClassAttributor.prototype.add = function (node, value) {\n        if (!this.canAdd(node, value))\n            return false;\n        this.remove(node);\n        node.classList.add(this.keyName + \"-\" + value);\n        return true;\n    };\n    ClassAttributor.prototype.remove = function (node) {\n        var matches = match(node, this.keyName);\n        matches.forEach(function (name) {\n            node.classList.remove(name);\n        });\n        if (node.classList.length === 0) {\n            node.removeAttribute('class');\n        }\n    };\n    ClassAttributor.prototype.value = function (node) {\n        var result = match(node, this.keyName)[0] || '';\n        var value = result.slice(this.keyName.length + 1); // +1 for hyphen\n        return this.canAdd(node, value) ? value : '';\n    };\n    return ClassAttributor;\n}(attributor_1.default));\nexports.default = ClassAttributor;\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = __webpack_require__(12);\nfunction camelize(name) {\n    var parts = name.split('-');\n    var rest = parts\n        .slice(1)\n        .map(function (part) {\n        return part[0].toUpperCase() + part.slice(1);\n    })\n        .join('');\n    return parts[0] + rest;\n}\nvar StyleAttributor = /** @class */ (function (_super) {\n    __extends(StyleAttributor, _super);\n    function StyleAttributor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    StyleAttributor.keys = function (node) {\n        return (node.getAttribute('style') || '').split(';').map(function (value) {\n            var arr = value.split(':');\n            return arr[0].trim();\n        });\n    };\n    StyleAttributor.prototype.add = function (node, value) {\n        if (!this.canAdd(node, value))\n            return false;\n        // @ts-ignore\n        node.style[camelize(this.keyName)] = value;\n        return true;\n    };\n    StyleAttributor.prototype.remove = function (node) {\n        // @ts-ignore\n        node.style[camelize(this.keyName)] = '';\n        if (!node.getAttribute('style')) {\n            node.removeAttribute('style');\n        }\n    };\n    StyleAttributor.prototype.value = function (node) {\n        // @ts-ignore\n        var value = node.style[camelize(this.keyName)];\n        return this.canAdd(node, value) ? value : '';\n    };\n    return StyleAttributor;\n}(attributor_1.default));\nexports.default = StyleAttributor;\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Theme = function () {\n  function Theme(quill, options) {\n    _classCallCheck(this, Theme);\n\n    this.quill = quill;\n    this.options = options;\n    this.modules = {};\n  }\n\n  _createClass(Theme, [{\n    key: 'init',\n    value: function init() {\n      var _this = this;\n\n      Object.keys(this.options.modules).forEach(function (name) {\n        if (_this.modules[name] == null) {\n          _this.addModule(name);\n        }\n      });\n    }\n  }, {\n    key: 'addModule',\n    value: function addModule(name) {\n      var moduleClass = this.quill.constructor.import('modules/' + name);\n      this.modules[name] = new moduleClass(this.quill, this.options.modules[name] || {});\n      return this.modules[name];\n    }\n  }]);\n\n  return Theme;\n}();\n\nTheme.DEFAULTS = {\n  modules: {}\n};\nTheme.themes = {\n  'default': Theme\n};\n\nexports.default = Theme;\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _text = __webpack_require__(7);\n\nvar _text2 = _interopRequireDefault(_text);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar GUARD_TEXT = '\\uFEFF';\n\nvar Embed = function (_Parchment$Embed) {\n  _inherits(Embed, _Parchment$Embed);\n\n  function Embed(node) {\n    _classCallCheck(this, Embed);\n\n    var _this = _possibleConstructorReturn(this, (Embed.__proto__ || Object.getPrototypeOf(Embed)).call(this, node));\n\n    _this.contentNode = document.createElement('span');\n    _this.contentNode.setAttribute('contenteditable', false);\n    [].slice.call(_this.domNode.childNodes).forEach(function (childNode) {\n      _this.contentNode.appendChild(childNode);\n    });\n    _this.leftGuard = document.createTextNode(GUARD_TEXT);\n    _this.rightGuard = document.createTextNode(GUARD_TEXT);\n    _this.domNode.appendChild(_this.leftGuard);\n    _this.domNode.appendChild(_this.contentNode);\n    _this.domNode.appendChild(_this.rightGuard);\n    return _this;\n  }\n\n  _createClass(Embed, [{\n    key: 'index',\n    value: function index(node, offset) {\n      if (node === this.leftGuard) return 0;\n      if (node === this.rightGuard) return 1;\n      return _get(Embed.prototype.__proto__ || Object.getPrototypeOf(Embed.prototype), 'index', this).call(this, node, offset);\n    }\n  }, {\n    key: 'restore',\n    value: function restore(node) {\n      var range = void 0,\n          textNode = void 0;\n      var text = node.data.split(GUARD_TEXT).join('');\n      if (node === this.leftGuard) {\n        if (this.prev instanceof _text2.default) {\n          var prevLength = this.prev.length();\n          this.prev.insertAt(prevLength, text);\n          range = {\n            startNode: this.prev.domNode,\n            startOffset: prevLength + text.length\n          };\n        } else {\n          textNode = document.createTextNode(text);\n          this.parent.insertBefore(_parchment2.default.create(textNode), this);\n          range = {\n            startNode: textNode,\n            startOffset: text.length\n          };\n        }\n      } else if (node === this.rightGuard) {\n        if (this.next instanceof _text2.default) {\n          this.next.insertAt(0, text);\n          range = {\n            startNode: this.next.domNode,\n            startOffset: text.length\n          };\n        } else {\n          textNode = document.createTextNode(text);\n          this.parent.insertBefore(_parchment2.default.create(textNode), this.next);\n          range = {\n            startNode: textNode,\n            startOffset: text.length\n          };\n        }\n      }\n      node.data = GUARD_TEXT;\n      return range;\n    }\n  }, {\n    key: 'update',\n    value: function update(mutations, context) {\n      var _this2 = this;\n\n      mutations.forEach(function (mutation) {\n        if (mutation.type === 'characterData' && (mutation.target === _this2.leftGuard || mutation.target === _this2.rightGuard)) {\n          var range = _this2.restore(mutation.target);\n          if (range) context.range = range;\n        }\n      });\n    }\n  }]);\n\n  return Embed;\n}(_parchment2.default.Embed);\n\nexports.default = Embed;\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AlignStyle = exports.AlignClass = exports.AlignAttribute = undefined;\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar config = {\n  scope: _parchment2.default.Scope.BLOCK,\n  whitelist: ['right', 'center', 'justify']\n};\n\nvar AlignAttribute = new _parchment2.default.Attributor.Attribute('align', 'align', config);\nvar AlignClass = new _parchment2.default.Attributor.Class('align', 'ql-align', config);\nvar AlignStyle = new _parchment2.default.Attributor.Style('align', 'text-align', config);\n\nexports.AlignAttribute = AlignAttribute;\nexports.AlignClass = AlignClass;\nexports.AlignStyle = AlignStyle;\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BackgroundStyle = exports.BackgroundClass = undefined;\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _color = __webpack_require__(26);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar BackgroundClass = new _parchment2.default.Attributor.Class('background', 'ql-bg', {\n  scope: _parchment2.default.Scope.INLINE\n});\nvar BackgroundStyle = new _color.ColorAttributor('background', 'background-color', {\n  scope: _parchment2.default.Scope.INLINE\n});\n\nexports.BackgroundClass = BackgroundClass;\nexports.BackgroundStyle = BackgroundStyle;\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DirectionStyle = exports.DirectionClass = exports.DirectionAttribute = undefined;\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar config = {\n  scope: _parchment2.default.Scope.BLOCK,\n  whitelist: ['rtl']\n};\n\nvar DirectionAttribute = new _parchment2.default.Attributor.Attribute('direction', 'dir', config);\nvar DirectionClass = new _parchment2.default.Attributor.Class('direction', 'ql-direction', config);\nvar DirectionStyle = new _parchment2.default.Attributor.Style('direction', 'direction', config);\n\nexports.DirectionAttribute = DirectionAttribute;\nexports.DirectionClass = DirectionClass;\nexports.DirectionStyle = DirectionStyle;\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FontClass = exports.FontStyle = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar config = {\n  scope: _parchment2.default.Scope.INLINE,\n  whitelist: ['serif', 'monospace']\n};\n\nvar FontClass = new _parchment2.default.Attributor.Class('font', 'ql-font', config);\n\nvar FontStyleAttributor = function (_Parchment$Attributor) {\n  _inherits(FontStyleAttributor, _Parchment$Attributor);\n\n  function FontStyleAttributor() {\n    _classCallCheck(this, FontStyleAttributor);\n\n    return _possibleConstructorReturn(this, (FontStyleAttributor.__proto__ || Object.getPrototypeOf(FontStyleAttributor)).apply(this, arguments));\n  }\n\n  _createClass(FontStyleAttributor, [{\n    key: 'value',\n    value: function value(node) {\n      return _get(FontStyleAttributor.prototype.__proto__ || Object.getPrototypeOf(FontStyleAttributor.prototype), 'value', this).call(this, node).replace(/[\"']/g, '');\n    }\n  }]);\n\n  return FontStyleAttributor;\n}(_parchment2.default.Attributor.Style);\n\nvar FontStyle = new FontStyleAttributor('font', 'font-family', config);\n\nexports.FontStyle = FontStyle;\nexports.FontClass = FontClass;\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SizeStyle = exports.SizeClass = undefined;\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SizeClass = new _parchment2.default.Attributor.Class('size', 'ql-size', {\n  scope: _parchment2.default.Scope.INLINE,\n  whitelist: ['small', 'large', 'huge']\n});\nvar SizeStyle = new _parchment2.default.Attributor.Style('size', 'font-size', {\n  scope: _parchment2.default.Scope.INLINE,\n  whitelist: ['10px', '18px', '32px']\n});\n\nexports.SizeClass = SizeClass;\nexports.SizeStyle = SizeStyle;\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = {\n  'align': {\n    '': __webpack_require__(76),\n    'center': __webpack_require__(77),\n    'right': __webpack_require__(78),\n    'justify': __webpack_require__(79)\n  },\n  'background': __webpack_require__(80),\n  'blockquote': __webpack_require__(81),\n  'bold': __webpack_require__(82),\n  'clean': __webpack_require__(83),\n  'code': __webpack_require__(58),\n  'code-block': __webpack_require__(58),\n  'color': __webpack_require__(84),\n  'direction': {\n    '': __webpack_require__(85),\n    'rtl': __webpack_require__(86)\n  },\n  'float': {\n    'center': __webpack_require__(87),\n    'full': __webpack_require__(88),\n    'left': __webpack_require__(89),\n    'right': __webpack_require__(90)\n  },\n  'formula': __webpack_require__(91),\n  'header': {\n    '1': __webpack_require__(92),\n    '2': __webpack_require__(93)\n  },\n  'italic': __webpack_require__(94),\n  'image': __webpack_require__(95),\n  'indent': {\n    '+1': __webpack_require__(96),\n    '-1': __webpack_require__(97)\n  },\n  'link': __webpack_require__(98),\n  'list': {\n    'ordered': __webpack_require__(99),\n    'bullet': __webpack_require__(100),\n    'check': __webpack_require__(101)\n  },\n  'script': {\n    'sub': __webpack_require__(102),\n    'super': __webpack_require__(103)\n  },\n  'strike': __webpack_require__(104),\n  'underline': __webpack_require__(105),\n  'video': __webpack_require__(106)\n};\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getLastChangeIndex = exports.default = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _quill = __webpack_require__(5);\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nvar _module = __webpack_require__(9);\n\nvar _module2 = _interopRequireDefault(_module);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar History = function (_Module) {\n  _inherits(History, _Module);\n\n  function History(quill, options) {\n    _classCallCheck(this, History);\n\n    var _this = _possibleConstructorReturn(this, (History.__proto__ || Object.getPrototypeOf(History)).call(this, quill, options));\n\n    _this.lastRecorded = 0;\n    _this.ignoreChange = false;\n    _this.clear();\n    _this.quill.on(_quill2.default.events.EDITOR_CHANGE, function (eventName, delta, oldDelta, source) {\n      if (eventName !== _quill2.default.events.TEXT_CHANGE || _this.ignoreChange) return;\n      if (!_this.options.userOnly || source === _quill2.default.sources.USER) {\n        _this.record(delta, oldDelta);\n      } else {\n        _this.transform(delta);\n      }\n    });\n    _this.quill.keyboard.addBinding({ key: 'Z', shortKey: true }, _this.undo.bind(_this));\n    _this.quill.keyboard.addBinding({ key: 'Z', shortKey: true, shiftKey: true }, _this.redo.bind(_this));\n    if (/Win/i.test(navigator.platform)) {\n      _this.quill.keyboard.addBinding({ key: 'Y', shortKey: true }, _this.redo.bind(_this));\n    }\n    return _this;\n  }\n\n  _createClass(History, [{\n    key: 'change',\n    value: function change(source, dest) {\n      if (this.stack[source].length === 0) return;\n      var delta = this.stack[source].pop();\n      this.stack[dest].push(delta);\n      this.lastRecorded = 0;\n      this.ignoreChange = true;\n      this.quill.updateContents(delta[source], _quill2.default.sources.USER);\n      this.ignoreChange = false;\n      var index = getLastChangeIndex(delta[source]);\n      this.quill.setSelection(index);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.stack = { undo: [], redo: [] };\n    }\n  }, {\n    key: 'cutoff',\n    value: function cutoff() {\n      this.lastRecorded = 0;\n    }\n  }, {\n    key: 'record',\n    value: function record(changeDelta, oldDelta) {\n      if (changeDelta.ops.length === 0) return;\n      this.stack.redo = [];\n      var undoDelta = this.quill.getContents().diff(oldDelta);\n      var timestamp = Date.now();\n      if (this.lastRecorded + this.options.delay > timestamp && this.stack.undo.length > 0) {\n        var delta = this.stack.undo.pop();\n        undoDelta = undoDelta.compose(delta.undo);\n        changeDelta = delta.redo.compose(changeDelta);\n      } else {\n        this.lastRecorded = timestamp;\n      }\n      this.stack.undo.push({\n        redo: changeDelta,\n        undo: undoDelta\n      });\n      if (this.stack.undo.length > this.options.maxStack) {\n        this.stack.undo.shift();\n      }\n    }\n  }, {\n    key: 'redo',\n    value: function redo() {\n      this.change('redo', 'undo');\n    }\n  }, {\n    key: 'transform',\n    value: function transform(delta) {\n      this.stack.undo.forEach(function (change) {\n        change.undo = delta.transform(change.undo, true);\n        change.redo = delta.transform(change.redo, true);\n      });\n      this.stack.redo.forEach(function (change) {\n        change.undo = delta.transform(change.undo, true);\n        change.redo = delta.transform(change.redo, true);\n      });\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      this.change('undo', 'redo');\n    }\n  }]);\n\n  return History;\n}(_module2.default);\n\nHistory.DEFAULTS = {\n  delay: 1000,\n  maxStack: 100,\n  userOnly: false\n};\n\nfunction endsWithNewlineChange(delta) {\n  var lastOp = delta.ops[delta.ops.length - 1];\n  if (lastOp == null) return false;\n  if (lastOp.insert != null) {\n    return typeof lastOp.insert === 'string' && lastOp.insert.endsWith('\\n');\n  }\n  if (lastOp.attributes != null) {\n    return Object.keys(lastOp.attributes).some(function (attr) {\n      return _parchment2.default.query(attr, _parchment2.default.Scope.BLOCK) != null;\n    });\n  }\n  return false;\n}\n\nfunction getLastChangeIndex(delta) {\n  var deleteLength = delta.reduce(function (length, op) {\n    length += op.delete || 0;\n    return length;\n  }, 0);\n  var changeIndex = delta.length() - deleteLength;\n  if (endsWithNewlineChange(delta)) {\n    changeIndex -= 1;\n  }\n  return changeIndex;\n}\n\nexports.default = History;\nexports.getLastChangeIndex = getLastChangeIndex;\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.BaseTooltip = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _extend = __webpack_require__(3);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _emitter = __webpack_require__(8);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nvar _keyboard = __webpack_require__(23);\n\nvar _keyboard2 = _interopRequireDefault(_keyboard);\n\nvar _theme = __webpack_require__(34);\n\nvar _theme2 = _interopRequireDefault(_theme);\n\nvar _colorPicker = __webpack_require__(59);\n\nvar _colorPicker2 = _interopRequireDefault(_colorPicker);\n\nvar _iconPicker = __webpack_require__(60);\n\nvar _iconPicker2 = _interopRequireDefault(_iconPicker);\n\nvar _picker = __webpack_require__(28);\n\nvar _picker2 = _interopRequireDefault(_picker);\n\nvar _tooltip = __webpack_require__(61);\n\nvar _tooltip2 = _interopRequireDefault(_tooltip);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ALIGNS = [false, 'center', 'right', 'justify'];\n\nvar COLORS = [\"#000000\", \"#e60000\", \"#ff9900\", \"#ffff00\", \"#008a00\", \"#0066cc\", \"#9933ff\", \"#ffffff\", \"#facccc\", \"#ffebcc\", \"#ffffcc\", \"#cce8cc\", \"#cce0f5\", \"#ebd6ff\", \"#bbbbbb\", \"#f06666\", \"#ffc266\", \"#ffff66\", \"#66b966\", \"#66a3e0\", \"#c285ff\", \"#888888\", \"#a10000\", \"#b26b00\", \"#b2b200\", \"#006100\", \"#0047b2\", \"#6b24b2\", \"#444444\", \"#5c0000\", \"#663d00\", \"#666600\", \"#003700\", \"#002966\", \"#3d1466\"];\n\nvar FONTS = [false, 'serif', 'monospace'];\n\nvar HEADERS = ['1', '2', '3', false];\n\nvar SIZES = ['small', false, 'large', 'huge'];\n\nvar BaseTheme = function (_Theme) {\n  _inherits(BaseTheme, _Theme);\n\n  function BaseTheme(quill, options) {\n    _classCallCheck(this, BaseTheme);\n\n    var _this = _possibleConstructorReturn(this, (BaseTheme.__proto__ || Object.getPrototypeOf(BaseTheme)).call(this, quill, options));\n\n    var listener = function listener(e) {\n      if (!document.body.contains(quill.root)) {\n        return document.body.removeEventListener('click', listener);\n      }\n      if (_this.tooltip != null && !_this.tooltip.root.contains(e.target) && document.activeElement !== _this.tooltip.textbox && !_this.quill.hasFocus()) {\n        _this.tooltip.hide();\n      }\n      if (_this.pickers != null) {\n        _this.pickers.forEach(function (picker) {\n          if (!picker.container.contains(e.target)) {\n            picker.close();\n          }\n        });\n      }\n    };\n    quill.emitter.listenDOM('click', document.body, listener);\n    return _this;\n  }\n\n  _createClass(BaseTheme, [{\n    key: 'addModule',\n    value: function addModule(name) {\n      var module = _get(BaseTheme.prototype.__proto__ || Object.getPrototypeOf(BaseTheme.prototype), 'addModule', this).call(this, name);\n      if (name === 'toolbar') {\n        this.extendToolbar(module);\n      }\n      return module;\n    }\n  }, {\n    key: 'buildButtons',\n    value: function buildButtons(buttons, icons) {\n      buttons.forEach(function (button) {\n        var className = button.getAttribute('class') || '';\n        className.split(/\\s+/).forEach(function (name) {\n          if (!name.startsWith('ql-')) return;\n          name = name.slice('ql-'.length);\n          if (icons[name] == null) return;\n          if (name === 'direction') {\n            button.innerHTML = icons[name][''] + icons[name]['rtl'];\n          } else if (typeof icons[name] === 'string') {\n            button.innerHTML = icons[name];\n          } else {\n            var value = button.value || '';\n            if (value != null && icons[name][value]) {\n              button.innerHTML = icons[name][value];\n            }\n          }\n        });\n      });\n    }\n  }, {\n    key: 'buildPickers',\n    value: function buildPickers(selects, icons) {\n      var _this2 = this;\n\n      this.pickers = selects.map(function (select) {\n        if (select.classList.contains('ql-align')) {\n          if (select.querySelector('option') == null) {\n            fillSelect(select, ALIGNS);\n          }\n          return new _iconPicker2.default(select, icons.align);\n        } else if (select.classList.contains('ql-background') || select.classList.contains('ql-color')) {\n          var format = select.classList.contains('ql-background') ? 'background' : 'color';\n          if (select.querySelector('option') == null) {\n            fillSelect(select, COLORS, format === 'background' ? '#ffffff' : '#000000');\n          }\n          return new _colorPicker2.default(select, icons[format]);\n        } else {\n          if (select.querySelector('option') == null) {\n            if (select.classList.contains('ql-font')) {\n              fillSelect(select, FONTS);\n            } else if (select.classList.contains('ql-header')) {\n              fillSelect(select, HEADERS);\n            } else if (select.classList.contains('ql-size')) {\n              fillSelect(select, SIZES);\n            }\n          }\n          return new _picker2.default(select);\n        }\n      });\n      var update = function update() {\n        _this2.pickers.forEach(function (picker) {\n          picker.update();\n        });\n      };\n      this.quill.on(_emitter2.default.events.EDITOR_CHANGE, update);\n    }\n  }]);\n\n  return BaseTheme;\n}(_theme2.default);\n\nBaseTheme.DEFAULTS = (0, _extend2.default)(true, {}, _theme2.default.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        formula: function formula() {\n          this.quill.theme.tooltip.edit('formula');\n        },\n        image: function image() {\n          var _this3 = this;\n\n          var fileInput = this.container.querySelector('input.ql-image[type=file]');\n          if (fileInput == null) {\n            fileInput = document.createElement('input');\n            fileInput.setAttribute('type', 'file');\n            fileInput.setAttribute('accept', 'image/png, image/gif, image/jpeg, image/bmp, image/x-icon');\n            fileInput.classList.add('ql-image');\n            fileInput.addEventListener('change', function () {\n              if (fileInput.files != null && fileInput.files[0] != null) {\n                var reader = new FileReader();\n                reader.onload = function (e) {\n                  var range = _this3.quill.getSelection(true);\n                  _this3.quill.updateContents(new _quillDelta2.default().retain(range.index).delete(range.length).insert({ image: e.target.result }), _emitter2.default.sources.USER);\n                  _this3.quill.setSelection(range.index + 1, _emitter2.default.sources.SILENT);\n                  fileInput.value = \"\";\n                };\n                reader.readAsDataURL(fileInput.files[0]);\n              }\n            });\n            this.container.appendChild(fileInput);\n          }\n          fileInput.click();\n        },\n        video: function video() {\n          this.quill.theme.tooltip.edit('video');\n        }\n      }\n    }\n  }\n});\n\nvar BaseTooltip = function (_Tooltip) {\n  _inherits(BaseTooltip, _Tooltip);\n\n  function BaseTooltip(quill, boundsContainer) {\n    _classCallCheck(this, BaseTooltip);\n\n    var _this4 = _possibleConstructorReturn(this, (BaseTooltip.__proto__ || Object.getPrototypeOf(BaseTooltip)).call(this, quill, boundsContainer));\n\n    _this4.textbox = _this4.root.querySelector('input[type=\"text\"]');\n    _this4.listen();\n    return _this4;\n  }\n\n  _createClass(BaseTooltip, [{\n    key: 'listen',\n    value: function listen() {\n      var _this5 = this;\n\n      this.textbox.addEventListener('keydown', function (event) {\n        if (_keyboard2.default.match(event, 'enter')) {\n          _this5.save();\n          event.preventDefault();\n        } else if (_keyboard2.default.match(event, 'escape')) {\n          _this5.cancel();\n          event.preventDefault();\n        }\n      });\n    }\n  }, {\n    key: 'cancel',\n    value: function cancel() {\n      this.hide();\n    }\n  }, {\n    key: 'edit',\n    value: function edit() {\n      var mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'link';\n      var preview = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      this.root.classList.remove('ql-hidden');\n      this.root.classList.add('ql-editing');\n      if (preview != null) {\n        this.textbox.value = preview;\n      } else if (mode !== this.root.getAttribute('data-mode')) {\n        this.textbox.value = '';\n      }\n      this.position(this.quill.getBounds(this.quill.selection.savedRange));\n      this.textbox.select();\n      this.textbox.setAttribute('placeholder', this.textbox.getAttribute('data-' + mode) || '');\n      this.root.setAttribute('data-mode', mode);\n    }\n  }, {\n    key: 'restoreFocus',\n    value: function restoreFocus() {\n      var scrollTop = this.quill.scrollingContainer.scrollTop;\n      this.quill.focus();\n      this.quill.scrollingContainer.scrollTop = scrollTop;\n    }\n  }, {\n    key: 'save',\n    value: function save() {\n      var value = this.textbox.value;\n      switch (this.root.getAttribute('data-mode')) {\n        case 'link':\n          {\n            var scrollTop = this.quill.root.scrollTop;\n            if (this.linkRange) {\n              this.quill.formatText(this.linkRange, 'link', value, _emitter2.default.sources.USER);\n              delete this.linkRange;\n            } else {\n              this.restoreFocus();\n              this.quill.format('link', value, _emitter2.default.sources.USER);\n            }\n            this.quill.root.scrollTop = scrollTop;\n            break;\n          }\n        case 'video':\n          {\n            value = extractVideoUrl(value);\n          } // eslint-disable-next-line no-fallthrough\n        case 'formula':\n          {\n            if (!value) break;\n            var range = this.quill.getSelection(true);\n            if (range != null) {\n              var index = range.index + range.length;\n              this.quill.insertEmbed(index, this.root.getAttribute('data-mode'), value, _emitter2.default.sources.USER);\n              if (this.root.getAttribute('data-mode') === 'formula') {\n                this.quill.insertText(index + 1, ' ', _emitter2.default.sources.USER);\n              }\n              this.quill.setSelection(index + 2, _emitter2.default.sources.USER);\n            }\n            break;\n          }\n        default:\n      }\n      this.textbox.value = '';\n      this.hide();\n    }\n  }]);\n\n  return BaseTooltip;\n}(_tooltip2.default);\n\nfunction extractVideoUrl(url) {\n  var match = url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtube\\.com\\/watch.*v=([a-zA-Z0-9_-]+)/) || url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtu\\.be\\/([a-zA-Z0-9_-]+)/);\n  if (match) {\n    return (match[1] || 'https') + '://www.youtube.com/embed/' + match[2] + '?showinfo=0';\n  }\n  if (match = url.match(/^(?:(https?):\\/\\/)?(?:www\\.)?vimeo\\.com\\/(\\d+)/)) {\n    // eslint-disable-line no-cond-assign\n    return (match[1] || 'https') + '://player.vimeo.com/video/' + match[2] + '/';\n  }\n  return url;\n}\n\nfunction fillSelect(select, values) {\n  var defaultValue = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  values.forEach(function (value) {\n    var option = document.createElement('option');\n    if (value === defaultValue) {\n      option.setAttribute('selected', 'selected');\n    } else {\n      option.setAttribute('value', value);\n    }\n    select.appendChild(option);\n  });\n}\n\nexports.BaseTooltip = BaseTooltip;\nexports.default = BaseTheme;\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LinkedList = /** @class */ (function () {\n    function LinkedList() {\n        this.head = this.tail = null;\n        this.length = 0;\n    }\n    LinkedList.prototype.append = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        this.insertBefore(nodes[0], null);\n        if (nodes.length > 1) {\n            this.append.apply(this, nodes.slice(1));\n        }\n    };\n    LinkedList.prototype.contains = function (node) {\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            if (cur === node)\n                return true;\n        }\n        return false;\n    };\n    LinkedList.prototype.insertBefore = function (node, refNode) {\n        if (!node)\n            return;\n        node.next = refNode;\n        if (refNode != null) {\n            node.prev = refNode.prev;\n            if (refNode.prev != null) {\n                refNode.prev.next = node;\n            }\n            refNode.prev = node;\n            if (refNode === this.head) {\n                this.head = node;\n            }\n        }\n        else if (this.tail != null) {\n            this.tail.next = node;\n            node.prev = this.tail;\n            this.tail = node;\n        }\n        else {\n            node.prev = null;\n            this.head = this.tail = node;\n        }\n        this.length += 1;\n    };\n    LinkedList.prototype.offset = function (target) {\n        var index = 0, cur = this.head;\n        while (cur != null) {\n            if (cur === target)\n                return index;\n            index += cur.length();\n            cur = cur.next;\n        }\n        return -1;\n    };\n    LinkedList.prototype.remove = function (node) {\n        if (!this.contains(node))\n            return;\n        if (node.prev != null)\n            node.prev.next = node.next;\n        if (node.next != null)\n            node.next.prev = node.prev;\n        if (node === this.head)\n            this.head = node.next;\n        if (node === this.tail)\n            this.tail = node.prev;\n        this.length -= 1;\n    };\n    LinkedList.prototype.iterator = function (curNode) {\n        if (curNode === void 0) { curNode = this.head; }\n        // TODO use yield when we can\n        return function () {\n            var ret = curNode;\n            if (curNode != null)\n                curNode = curNode.next;\n            return ret;\n        };\n    };\n    LinkedList.prototype.find = function (index, inclusive) {\n        if (inclusive === void 0) { inclusive = false; }\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            var length = cur.length();\n            if (index < length ||\n                (inclusive && index === length && (cur.next == null || cur.next.length() !== 0))) {\n                return [cur, index];\n            }\n            index -= length;\n        }\n        return [null, 0];\n    };\n    LinkedList.prototype.forEach = function (callback) {\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            callback(cur);\n        }\n    };\n    LinkedList.prototype.forEachAt = function (index, length, callback) {\n        if (length <= 0)\n            return;\n        var _a = this.find(index), startNode = _a[0], offset = _a[1];\n        var cur, curIndex = index - offset, next = this.iterator(startNode);\n        while ((cur = next()) && curIndex < index + length) {\n            var curLength = cur.length();\n            if (index > curIndex) {\n                callback(cur, index - curIndex, Math.min(length, curIndex + curLength - index));\n            }\n            else {\n                callback(cur, 0, Math.min(curLength, index + length - curIndex));\n            }\n            curIndex += curLength;\n        }\n    };\n    LinkedList.prototype.map = function (callback) {\n        return this.reduce(function (memo, cur) {\n            memo.push(callback(cur));\n            return memo;\n        }, []);\n    };\n    LinkedList.prototype.reduce = function (callback, memo) {\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            memo = callback(memo, cur);\n        }\n        return memo;\n    };\n    return LinkedList;\n}());\nexports.default = LinkedList;\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar container_1 = __webpack_require__(17);\nvar Registry = __webpack_require__(1);\nvar OBSERVER_CONFIG = {\n    attributes: true,\n    characterData: true,\n    characterDataOldValue: true,\n    childList: true,\n    subtree: true,\n};\nvar MAX_OPTIMIZE_ITERATIONS = 100;\nvar ScrollBlot = /** @class */ (function (_super) {\n    __extends(ScrollBlot, _super);\n    function ScrollBlot(node) {\n        var _this = _super.call(this, node) || this;\n        _this.scroll = _this;\n        _this.observer = new MutationObserver(function (mutations) {\n            _this.update(mutations);\n        });\n        _this.observer.observe(_this.domNode, OBSERVER_CONFIG);\n        _this.attach();\n        return _this;\n    }\n    ScrollBlot.prototype.detach = function () {\n        _super.prototype.detach.call(this);\n        this.observer.disconnect();\n    };\n    ScrollBlot.prototype.deleteAt = function (index, length) {\n        this.update();\n        if (index === 0 && length === this.length()) {\n            this.children.forEach(function (child) {\n                child.remove();\n            });\n        }\n        else {\n            _super.prototype.deleteAt.call(this, index, length);\n        }\n    };\n    ScrollBlot.prototype.formatAt = function (index, length, name, value) {\n        this.update();\n        _super.prototype.formatAt.call(this, index, length, name, value);\n    };\n    ScrollBlot.prototype.insertAt = function (index, value, def) {\n        this.update();\n        _super.prototype.insertAt.call(this, index, value, def);\n    };\n    ScrollBlot.prototype.optimize = function (mutations, context) {\n        var _this = this;\n        if (mutations === void 0) { mutations = []; }\n        if (context === void 0) { context = {}; }\n        _super.prototype.optimize.call(this, context);\n        // We must modify mutations directly, cannot make copy and then modify\n        var records = [].slice.call(this.observer.takeRecords());\n        // Array.push currently seems to be implemented by a non-tail recursive function\n        // so we cannot just mutations.push.apply(mutations, this.observer.takeRecords());\n        while (records.length > 0)\n            mutations.push(records.pop());\n        // TODO use WeakMap\n        var mark = function (blot, markParent) {\n            if (markParent === void 0) { markParent = true; }\n            if (blot == null || blot === _this)\n                return;\n            if (blot.domNode.parentNode == null)\n                return;\n            // @ts-ignore\n            if (blot.domNode[Registry.DATA_KEY].mutations == null) {\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations = [];\n            }\n            if (markParent)\n                mark(blot.parent);\n        };\n        var optimize = function (blot) {\n            // Post-order traversal\n            if (\n            // @ts-ignore\n            blot.domNode[Registry.DATA_KEY] == null ||\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations == null) {\n                return;\n            }\n            if (blot instanceof container_1.default) {\n                blot.children.forEach(optimize);\n            }\n            blot.optimize(context);\n        };\n        var remaining = mutations;\n        for (var i = 0; remaining.length > 0; i += 1) {\n            if (i >= MAX_OPTIMIZE_ITERATIONS) {\n                throw new Error('[Parchment] Maximum optimize iterations reached');\n            }\n            remaining.forEach(function (mutation) {\n                var blot = Registry.find(mutation.target, true);\n                if (blot == null)\n                    return;\n                if (blot.domNode === mutation.target) {\n                    if (mutation.type === 'childList') {\n                        mark(Registry.find(mutation.previousSibling, false));\n                        [].forEach.call(mutation.addedNodes, function (node) {\n                            var child = Registry.find(node, false);\n                            mark(child, false);\n                            if (child instanceof container_1.default) {\n                                child.children.forEach(function (grandChild) {\n                                    mark(grandChild, false);\n                                });\n                            }\n                        });\n                    }\n                    else if (mutation.type === 'attributes') {\n                        mark(blot.prev);\n                    }\n                }\n                mark(blot);\n            });\n            this.children.forEach(optimize);\n            remaining = [].slice.call(this.observer.takeRecords());\n            records = remaining.slice();\n            while (records.length > 0)\n                mutations.push(records.pop());\n        }\n    };\n    ScrollBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        if (context === void 0) { context = {}; }\n        mutations = mutations || this.observer.takeRecords();\n        // TODO use WeakMap\n        mutations\n            .map(function (mutation) {\n            var blot = Registry.find(mutation.target, true);\n            if (blot == null)\n                return null;\n            // @ts-ignore\n            if (blot.domNode[Registry.DATA_KEY].mutations == null) {\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations = [mutation];\n                return blot;\n            }\n            else {\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations.push(mutation);\n                return null;\n            }\n        })\n            .forEach(function (blot) {\n            if (blot == null ||\n                blot === _this ||\n                //@ts-ignore\n                blot.domNode[Registry.DATA_KEY] == null)\n                return;\n            // @ts-ignore\n            blot.update(blot.domNode[Registry.DATA_KEY].mutations || [], context);\n        });\n        // @ts-ignore\n        if (this.domNode[Registry.DATA_KEY].mutations != null) {\n            // @ts-ignore\n            _super.prototype.update.call(this, this.domNode[Registry.DATA_KEY].mutations, context);\n        }\n        this.optimize(mutations, context);\n    };\n    ScrollBlot.blotName = 'scroll';\n    ScrollBlot.defaultChild = 'block';\n    ScrollBlot.scope = Registry.Scope.BLOCK_BLOT;\n    ScrollBlot.tagName = 'DIV';\n    return ScrollBlot;\n}(container_1.default));\nexports.default = ScrollBlot;\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar format_1 = __webpack_require__(18);\nvar Registry = __webpack_require__(1);\n// Shallow object comparison\nfunction isEqual(obj1, obj2) {\n    if (Object.keys(obj1).length !== Object.keys(obj2).length)\n        return false;\n    // @ts-ignore\n    for (var prop in obj1) {\n        // @ts-ignore\n        if (obj1[prop] !== obj2[prop])\n            return false;\n    }\n    return true;\n}\nvar InlineBlot = /** @class */ (function (_super) {\n    __extends(InlineBlot, _super);\n    function InlineBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    InlineBlot.formats = function (domNode) {\n        if (domNode.tagName === InlineBlot.tagName)\n            return undefined;\n        return _super.formats.call(this, domNode);\n    };\n    InlineBlot.prototype.format = function (name, value) {\n        var _this = this;\n        if (name === this.statics.blotName && !value) {\n            this.children.forEach(function (child) {\n                if (!(child instanceof format_1.default)) {\n                    child = child.wrap(InlineBlot.blotName, true);\n                }\n                _this.attributes.copy(child);\n            });\n            this.unwrap();\n        }\n        else {\n            _super.prototype.format.call(this, name, value);\n        }\n    };\n    InlineBlot.prototype.formatAt = function (index, length, name, value) {\n        if (this.formats()[name] != null || Registry.query(name, Registry.Scope.ATTRIBUTE)) {\n            var blot = this.isolate(index, length);\n            blot.format(name, value);\n        }\n        else {\n            _super.prototype.formatAt.call(this, index, length, name, value);\n        }\n    };\n    InlineBlot.prototype.optimize = function (context) {\n        _super.prototype.optimize.call(this, context);\n        var formats = this.formats();\n        if (Object.keys(formats).length === 0) {\n            return this.unwrap(); // unformatted span\n        }\n        var next = this.next;\n        if (next instanceof InlineBlot && next.prev === this && isEqual(formats, next.formats())) {\n            next.moveChildren(this);\n            next.remove();\n        }\n    };\n    InlineBlot.blotName = 'inline';\n    InlineBlot.scope = Registry.Scope.INLINE_BLOT;\n    InlineBlot.tagName = 'SPAN';\n    return InlineBlot;\n}(format_1.default));\nexports.default = InlineBlot;\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar format_1 = __webpack_require__(18);\nvar Registry = __webpack_require__(1);\nvar BlockBlot = /** @class */ (function (_super) {\n    __extends(BlockBlot, _super);\n    function BlockBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    BlockBlot.formats = function (domNode) {\n        var tagName = Registry.query(BlockBlot.blotName).tagName;\n        if (domNode.tagName === tagName)\n            return undefined;\n        return _super.formats.call(this, domNode);\n    };\n    BlockBlot.prototype.format = function (name, value) {\n        if (Registry.query(name, Registry.Scope.BLOCK) == null) {\n            return;\n        }\n        else if (name === this.statics.blotName && !value) {\n            this.replaceWith(BlockBlot.blotName);\n        }\n        else {\n            _super.prototype.format.call(this, name, value);\n        }\n    };\n    BlockBlot.prototype.formatAt = function (index, length, name, value) {\n        if (Registry.query(name, Registry.Scope.BLOCK) != null) {\n            this.format(name, value);\n        }\n        else {\n            _super.prototype.formatAt.call(this, index, length, name, value);\n        }\n    };\n    BlockBlot.prototype.insertAt = function (index, value, def) {\n        if (def == null || Registry.query(value, Registry.Scope.INLINE) != null) {\n            // Insert text or inline\n            _super.prototype.insertAt.call(this, index, value, def);\n        }\n        else {\n            var after = this.split(index);\n            var blot = Registry.create(value, def);\n            after.parent.insertBefore(blot, after);\n        }\n    };\n    BlockBlot.prototype.update = function (mutations, context) {\n        if (navigator.userAgent.match(/Trident/)) {\n            this.build();\n        }\n        else {\n            _super.prototype.update.call(this, mutations, context);\n        }\n    };\n    BlockBlot.blotName = 'block';\n    BlockBlot.scope = Registry.Scope.BLOCK_BLOT;\n    BlockBlot.tagName = 'P';\n    return BlockBlot;\n}(format_1.default));\nexports.default = BlockBlot;\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar leaf_1 = __webpack_require__(19);\nvar EmbedBlot = /** @class */ (function (_super) {\n    __extends(EmbedBlot, _super);\n    function EmbedBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EmbedBlot.formats = function (domNode) {\n        return undefined;\n    };\n    EmbedBlot.prototype.format = function (name, value) {\n        // super.formatAt wraps, which is what we want in general,\n        // but this allows subclasses to overwrite for formats\n        // that just apply to particular embeds\n        _super.prototype.formatAt.call(this, 0, this.length(), name, value);\n    };\n    EmbedBlot.prototype.formatAt = function (index, length, name, value) {\n        if (index === 0 && length === this.length()) {\n            this.format(name, value);\n        }\n        else {\n            _super.prototype.formatAt.call(this, index, length, name, value);\n        }\n    };\n    EmbedBlot.prototype.formats = function () {\n        return this.statics.formats(this.domNode);\n    };\n    return EmbedBlot;\n}(leaf_1.default));\nexports.default = EmbedBlot;\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar leaf_1 = __webpack_require__(19);\nvar Registry = __webpack_require__(1);\nvar TextBlot = /** @class */ (function (_super) {\n    __extends(TextBlot, _super);\n    function TextBlot(node) {\n        var _this = _super.call(this, node) || this;\n        _this.text = _this.statics.value(_this.domNode);\n        return _this;\n    }\n    TextBlot.create = function (value) {\n        return document.createTextNode(value);\n    };\n    TextBlot.value = function (domNode) {\n        var text = domNode.data;\n        // @ts-ignore\n        if (text['normalize'])\n            text = text['normalize']();\n        return text;\n    };\n    TextBlot.prototype.deleteAt = function (index, length) {\n        this.domNode.data = this.text = this.text.slice(0, index) + this.text.slice(index + length);\n    };\n    TextBlot.prototype.index = function (node, offset) {\n        if (this.domNode === node) {\n            return offset;\n        }\n        return -1;\n    };\n    TextBlot.prototype.insertAt = function (index, value, def) {\n        if (def == null) {\n            this.text = this.text.slice(0, index) + value + this.text.slice(index);\n            this.domNode.data = this.text;\n        }\n        else {\n            _super.prototype.insertAt.call(this, index, value, def);\n        }\n    };\n    TextBlot.prototype.length = function () {\n        return this.text.length;\n    };\n    TextBlot.prototype.optimize = function (context) {\n        _super.prototype.optimize.call(this, context);\n        this.text = this.statics.value(this.domNode);\n        if (this.text.length === 0) {\n            this.remove();\n        }\n        else if (this.next instanceof TextBlot && this.next.prev === this) {\n            this.insertAt(this.length(), this.next.value());\n            this.next.remove();\n        }\n    };\n    TextBlot.prototype.position = function (index, inclusive) {\n        if (inclusive === void 0) { inclusive = false; }\n        return [this.domNode, index];\n    };\n    TextBlot.prototype.split = function (index, force) {\n        if (force === void 0) { force = false; }\n        if (!force) {\n            if (index === 0)\n                return this;\n            if (index === this.length())\n                return this.next;\n        }\n        var after = Registry.create(this.domNode.splitText(index));\n        this.parent.insertBefore(after, this.next);\n        this.text = this.statics.value(this.domNode);\n        return after;\n    };\n    TextBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        if (mutations.some(function (mutation) {\n            return mutation.type === 'characterData' && mutation.target === _this.domNode;\n        })) {\n            this.text = this.statics.value(this.domNode);\n        }\n    };\n    TextBlot.prototype.value = function () {\n        return this.text;\n    };\n    TextBlot.blotName = 'text';\n    TextBlot.scope = Registry.Scope.INLINE_BLOT;\n    return TextBlot;\n}(leaf_1.default));\nexports.default = TextBlot;\n\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar elem = document.createElement('div');\nelem.classList.toggle('test-class', false);\nif (elem.classList.contains('test-class')) {\n  var _toggle = DOMTokenList.prototype.toggle;\n  DOMTokenList.prototype.toggle = function (token, force) {\n    if (arguments.length > 1 && !this.contains(token) === !force) {\n      return force;\n    } else {\n      return _toggle.call(this, token);\n    }\n  };\n}\n\nif (!String.prototype.startsWith) {\n  String.prototype.startsWith = function (searchString, position) {\n    position = position || 0;\n    return this.substr(position, searchString.length) === searchString;\n  };\n}\n\nif (!String.prototype.endsWith) {\n  String.prototype.endsWith = function (searchString, position) {\n    var subjectString = this.toString();\n    if (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\n      position = subjectString.length;\n    }\n    position -= searchString.length;\n    var lastIndex = subjectString.indexOf(searchString, position);\n    return lastIndex !== -1 && lastIndex === position;\n  };\n}\n\nif (!Array.prototype.find) {\n  Object.defineProperty(Array.prototype, \"find\", {\n    value: function value(predicate) {\n      if (this === null) {\n        throw new TypeError('Array.prototype.find called on null or undefined');\n      }\n      if (typeof predicate !== 'function') {\n        throw new TypeError('predicate must be a function');\n      }\n      var list = Object(this);\n      var length = list.length >>> 0;\n      var thisArg = arguments[1];\n      var value;\n\n      for (var i = 0; i < length; i++) {\n        value = list[i];\n        if (predicate.call(thisArg, value, i, list)) {\n          return value;\n        }\n      }\n      return undefined;\n    }\n  });\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  // Disable resizing in Firefox\n  document.execCommand(\"enableObjectResizing\", false, false);\n  // Disable automatic linkifying in IE11\n  document.execCommand(\"autoUrlDetect\", false, false);\n});\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports) {\n\n/**\n * This library modifies the diff-patch-match library by Neil Fraser\n * by removing the patch and match functionality and certain advanced\n * options in the diff function. The original license is as follows:\n *\n * ===\n *\n * Diff Match and Patch\n *\n * Copyright 2006 Google Inc.\n * http://code.google.com/p/google-diff-match-patch/\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {Int} cursor_pos Expected edit position in text1 (optional)\n * @return {Array} Array of diff tuples.\n */\nfunction diff_main(text1, text2, cursor_pos) {\n  // Check for equality (speedup).\n  if (text1 == text2) {\n    if (text1) {\n      return [[DIFF_EQUAL, text1]];\n    }\n    return [];\n  }\n\n  // Check cursor_pos within bounds\n  if (cursor_pos < 0 || text1.length < cursor_pos) {\n    cursor_pos = null;\n  }\n\n  // Trim off common prefix (speedup).\n  var commonlength = diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = diff_compute_(text1, text2);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\n  }\n  if (commonsuffix) {\n    diffs.push([DIFF_EQUAL, commonsuffix]);\n  }\n  diff_cleanupMerge(diffs);\n  if (cursor_pos != null) {\n    diffs = fix_cursor(diffs, cursor_pos);\n  }\n  diffs = fix_emoji(diffs);\n  return diffs;\n};\n\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_compute_(text1, text2) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [[DIFF_INSERT, text2]];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [[DIFF_DELETE, text1]];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i != -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [[DIFF_INSERT, longtext.substring(0, i)],\n             [DIFF_EQUAL, shorttext],\n             [DIFF_INSERT, longtext.substring(i + shorttext.length)]];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length == 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = diff_main(text1_a, text2_a);\n    var diffs_b = diff_main(text1_b, text2_b);\n    // Merge the results.\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\n  }\n\n  return diff_bisect_(text1, text2);\n};\n\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n * @private\n */\nfunction diff_bisect_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = (delta % 2 != 0);\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 == -d || (k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (x1 < text1_length && y1 < text2_length &&\n             text1.charAt(x1) == text2.charAt(y1)) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 == -d || (k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (x2 < text1_length && y2 < text2_length &&\n             text1.charAt(text1_length - x2 - 1) ==\n             text2.charAt(text2_length - y2 - 1)) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n};\n\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_bisectSplit_(text1, text2, x, y) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = diff_main(text1a, text2a);\n  var diffsb = diff_main(text1b, text2b);\n\n  return diffs.concat(diffsb);\n};\n\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\nfunction diff_commonPrefix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(pointerstart, pointermid) ==\n        text2.substring(pointerstart, pointermid)) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\nfunction diff_commonSuffix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 ||\n      text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n        text2.substring(text2.length - pointermid, text2.length - pointerend)) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n */\nfunction diff_halfMatch_(text1, text2) {\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null;  // Pointless.\n  }\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\n      var prefixLength = diff_commonPrefix(longtext.substring(i),\n                                           shorttext.substring(j));\n      var suffixLength = diff_commonSuffix(longtext.substring(0, i),\n                                           shorttext.substring(0, j));\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(j - suffixLength, j) +\n            shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [best_longtext_a, best_longtext_b,\n              best_shorttext_a, best_shorttext_b, best_common];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 4));\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 2));\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {Array} diffs Array of diff tuples.\n */\nfunction diff_cleanupMerge(diffs) {\n  diffs.push([DIFF_EQUAL, '']);  // Add a dummy entry at the end.\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete + count_insert > 1) {\n          if (count_delete !== 0 && count_insert !== 0) {\n            // Factor out any common prefixies.\n            commonlength = diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if ((pointer - count_delete - count_insert) > 0 &&\n                  diffs[pointer - count_delete - count_insert - 1][0] ==\n                  DIFF_EQUAL) {\n                diffs[pointer - count_delete - count_insert - 1][1] +=\n                    text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, [DIFF_EQUAL,\n                                    text_insert.substring(0, commonlength)]);\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixies.\n            commonlength = diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] = text_insert.substring(text_insert.length -\n                  commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length -\n                  commonlength);\n              text_delete = text_delete.substring(0, text_delete.length -\n                  commonlength);\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          if (count_delete === 0) {\n            diffs.splice(pointer - count_insert,\n                count_delete + count_insert, [DIFF_INSERT, text_insert]);\n          } else if (count_insert === 0) {\n            diffs.splice(pointer - count_delete,\n                count_delete + count_insert, [DIFF_DELETE, text_delete]);\n          } else {\n            diffs.splice(pointer - count_delete - count_insert,\n                count_delete + count_insert, [DIFF_DELETE, text_delete],\n                [DIFF_INSERT, text_insert]);\n          }\n          pointer = pointer - count_delete - count_insert +\n                    (count_delete ? 1 : 0) + (count_insert ? 1 : 0) + 1;\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop();  // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length -\n          diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] +\n            diffs[pointer][1].substring(0, diffs[pointer][1].length -\n                                        diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n          diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n            diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n            diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    diff_cleanupMerge(diffs);\n  }\n};\n\n\nvar diff = diff_main;\ndiff.INSERT = DIFF_INSERT;\ndiff.DELETE = DIFF_DELETE;\ndiff.EQUAL = DIFF_EQUAL;\n\nmodule.exports = diff;\n\n/*\n * Modify a diff such that the cursor position points to the start of a change:\n * E.g.\n *   cursor_normalize_diff([[DIFF_EQUAL, 'abc']], 1)\n *     => [1, [[DIFF_EQUAL, 'a'], [DIFF_EQUAL, 'bc']]]\n *   cursor_normalize_diff([[DIFF_INSERT, 'new'], [DIFF_DELETE, 'xyz']], 2)\n *     => [2, [[DIFF_INSERT, 'new'], [DIFF_DELETE, 'xy'], [DIFF_DELETE, 'z']]]\n *\n * @param {Array} diffs Array of diff tuples\n * @param {Int} cursor_pos Suggested edit position. Must not be out of bounds!\n * @return {Array} A tuple [cursor location in the modified diff, modified diff]\n */\nfunction cursor_normalize_diff (diffs, cursor_pos) {\n  if (cursor_pos === 0) {\n    return [DIFF_EQUAL, diffs];\n  }\n  for (var current_pos = 0, i = 0; i < diffs.length; i++) {\n    var d = diffs[i];\n    if (d[0] === DIFF_DELETE || d[0] === DIFF_EQUAL) {\n      var next_pos = current_pos + d[1].length;\n      if (cursor_pos === next_pos) {\n        return [i + 1, diffs];\n      } else if (cursor_pos < next_pos) {\n        // copy to prevent side effects\n        diffs = diffs.slice();\n        // split d into two diff changes\n        var split_pos = cursor_pos - current_pos;\n        var d_left = [d[0], d[1].slice(0, split_pos)];\n        var d_right = [d[0], d[1].slice(split_pos)];\n        diffs.splice(i, 1, d_left, d_right);\n        return [i + 1, diffs];\n      } else {\n        current_pos = next_pos;\n      }\n    }\n  }\n  throw new Error('cursor_pos is out of bounds!')\n}\n\n/*\n * Modify a diff such that the edit position is \"shifted\" to the proposed edit location (cursor_position).\n *\n * Case 1)\n *   Check if a naive shift is possible:\n *     [0, X], [ 1, Y] -> [ 1, Y], [0, X]    (if X + Y === Y + X)\n *     [0, X], [-1, Y] -> [-1, Y], [0, X]    (if X + Y === Y + X) - holds same result\n * Case 2)\n *   Check if the following shifts are possible:\n *     [0, 'pre'], [ 1, 'prefix'] -> [ 1, 'pre'], [0, 'pre'], [ 1, 'fix']\n *     [0, 'pre'], [-1, 'prefix'] -> [-1, 'pre'], [0, 'pre'], [-1, 'fix']\n *         ^            ^\n *         d          d_next\n *\n * @param {Array} diffs Array of diff tuples\n * @param {Int} cursor_pos Suggested edit position. Must not be out of bounds!\n * @return {Array} Array of diff tuples\n */\nfunction fix_cursor (diffs, cursor_pos) {\n  var norm = cursor_normalize_diff(diffs, cursor_pos);\n  var ndiffs = norm[1];\n  var cursor_pointer = norm[0];\n  var d = ndiffs[cursor_pointer];\n  var d_next = ndiffs[cursor_pointer + 1];\n\n  if (d == null) {\n    // Text was deleted from end of original string,\n    // cursor is now out of bounds in new string\n    return diffs;\n  } else if (d[0] !== DIFF_EQUAL) {\n    // A modification happened at the cursor location.\n    // This is the expected outcome, so we can return the original diff.\n    return diffs;\n  } else {\n    if (d_next != null && d[1] + d_next[1] === d_next[1] + d[1]) {\n      // Case 1)\n      // It is possible to perform a naive shift\n      ndiffs.splice(cursor_pointer, 2, d_next, d)\n      return merge_tuples(ndiffs, cursor_pointer, 2)\n    } else if (d_next != null && d_next[1].indexOf(d[1]) === 0) {\n      // Case 2)\n      // d[1] is a prefix of d_next[1]\n      // We can assume that d_next[0] !== 0, since d[0] === 0\n      // Shift edit locations..\n      ndiffs.splice(cursor_pointer, 2, [d_next[0], d[1]], [0, d[1]]);\n      var suffix = d_next[1].slice(d[1].length);\n      if (suffix.length > 0) {\n        ndiffs.splice(cursor_pointer + 2, 0, [d_next[0], suffix]);\n      }\n      return merge_tuples(ndiffs, cursor_pointer, 3)\n    } else {\n      // Not possible to perform any modification\n      return diffs;\n    }\n  }\n}\n\n/*\n * Check diff did not split surrogate pairs.\n * Ex. [0, '\\uD83D'], [-1, '\\uDC36'], [1, '\\uDC2F'] -> [-1, '\\uD83D\\uDC36'], [1, '\\uD83D\\uDC2F']\n *     '\\uD83D\\uDC36' === '', '\\uD83D\\uDC2F' === ''\n *\n * @param {Array} diffs Array of diff tuples\n * @return {Array} Array of diff tuples\n */\nfunction fix_emoji (diffs) {\n  var compact = false;\n  var starts_with_pair_end = function(str) {\n    return str.charCodeAt(0) >= 0xDC00 && str.charCodeAt(0) <= 0xDFFF;\n  }\n  var ends_with_pair_start = function(str) {\n    return str.charCodeAt(str.length-1) >= 0xD800 && str.charCodeAt(str.length-1) <= 0xDBFF;\n  }\n  for (var i = 2; i < diffs.length; i += 1) {\n    if (diffs[i-2][0] === DIFF_EQUAL && ends_with_pair_start(diffs[i-2][1]) &&\n        diffs[i-1][0] === DIFF_DELETE && starts_with_pair_end(diffs[i-1][1]) &&\n        diffs[i][0] === DIFF_INSERT && starts_with_pair_end(diffs[i][1])) {\n      compact = true;\n\n      diffs[i-1][1] = diffs[i-2][1].slice(-1) + diffs[i-1][1];\n      diffs[i][1] = diffs[i-2][1].slice(-1) + diffs[i][1];\n\n      diffs[i-2][1] = diffs[i-2][1].slice(0, -1);\n    }\n  }\n  if (!compact) {\n    return diffs;\n  }\n  var fixed_diffs = [];\n  for (var i = 0; i < diffs.length; i += 1) {\n    if (diffs[i][1].length > 0) {\n      fixed_diffs.push(diffs[i]);\n    }\n  }\n  return fixed_diffs;\n}\n\n/*\n * Try to merge tuples with their neigbors in a given range.\n * E.g. [0, 'a'], [0, 'b'] -> [0, 'ab']\n *\n * @param {Array} diffs Array of diff tuples.\n * @param {Int} start Position of the first element to merge (diffs[start] is also merged with diffs[start - 1]).\n * @param {Int} length Number of consecutive elements to check.\n * @return {Array} Array of merged diff tuples.\n */\nfunction merge_tuples (diffs, start, length) {\n  // Check from (start-1) to (start+length).\n  for (var i = start + length - 1; i >= 0 && i >= start - 1; i--) {\n    if (i + 1 < diffs.length) {\n      var left_d = diffs[i];\n      var right_d = diffs[i+1];\n      if (left_d[0] === right_d[1]) {\n        diffs.splice(i, 2, [left_d[0], left_d[1] + right_d[1]]);\n      }\n    }\n  }\n  return diffs;\n}\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports) {\n\nexports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports) {\n\nvar supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n};\n\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports) {\n\n'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @api private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {Mixed} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @api public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Boolean} exists Only check if there are listeners.\n * @returns {Array|Boolean}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event, exists) {\n  var evt = prefix ? prefix + event : event\n    , available = this._events[evt];\n\n  if (exists) return !!available;\n  if (!available) return [];\n  if (available.fn) return [available.fn];\n\n  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n    ee[i] = available[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn The listener function.\n * @param {Mixed} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n  else if (!this._events[evt].fn) this._events[evt].push(listener);\n  else this._events[evt] = [this._events[evt], listener];\n\n  return this;\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn The listener function.\n * @param {Mixed} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n  else if (!this._events[evt].fn) this._events[evt].push(listener);\n  else this._events[evt] = [this._events[evt], listener];\n\n  return this;\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {Mixed} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    if (--this._eventsCount === 0) this._events = new Events();\n    else delete this._events[evt];\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n         listeners.fn === fn\n      && (!once || listeners.once)\n      && (!context || listeners.context === context)\n    ) {\n      if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n           listeners[i].fn !== fn\n        || (once && !listeners[i].once)\n        || (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else if (--this._eventsCount === 0) this._events = new Events();\n    else delete this._events[evt];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {String|Symbol} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) {\n      if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n    }\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.matchText = exports.matchSpacing = exports.matchNewline = exports.matchBlot = exports.matchAttributor = exports.default = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _extend2 = __webpack_require__(3);\n\nvar _extend3 = _interopRequireDefault(_extend2);\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _quill = __webpack_require__(5);\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nvar _logger = __webpack_require__(10);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _module = __webpack_require__(9);\n\nvar _module2 = _interopRequireDefault(_module);\n\nvar _align = __webpack_require__(36);\n\nvar _background = __webpack_require__(37);\n\nvar _code = __webpack_require__(13);\n\nvar _code2 = _interopRequireDefault(_code);\n\nvar _color = __webpack_require__(26);\n\nvar _direction = __webpack_require__(38);\n\nvar _font = __webpack_require__(39);\n\nvar _size = __webpack_require__(40);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar debug = (0, _logger2.default)('quill:clipboard');\n\nvar DOM_KEY = '__ql-matcher';\n\nvar CLIPBOARD_CONFIG = [[Node.TEXT_NODE, matchText], [Node.TEXT_NODE, matchNewline], ['br', matchBreak], [Node.ELEMENT_NODE, matchNewline], [Node.ELEMENT_NODE, matchBlot], [Node.ELEMENT_NODE, matchSpacing], [Node.ELEMENT_NODE, matchAttributor], [Node.ELEMENT_NODE, matchStyles], ['li', matchIndent], ['b', matchAlias.bind(matchAlias, 'bold')], ['i', matchAlias.bind(matchAlias, 'italic')], ['style', matchIgnore]];\n\nvar ATTRIBUTE_ATTRIBUTORS = [_align.AlignAttribute, _direction.DirectionAttribute].reduce(function (memo, attr) {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\n\nvar STYLE_ATTRIBUTORS = [_align.AlignStyle, _background.BackgroundStyle, _color.ColorStyle, _direction.DirectionStyle, _font.FontStyle, _size.SizeStyle].reduce(function (memo, attr) {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\n\nvar Clipboard = function (_Module) {\n  _inherits(Clipboard, _Module);\n\n  function Clipboard(quill, options) {\n    _classCallCheck(this, Clipboard);\n\n    var _this = _possibleConstructorReturn(this, (Clipboard.__proto__ || Object.getPrototypeOf(Clipboard)).call(this, quill, options));\n\n    _this.quill.root.addEventListener('paste', _this.onPaste.bind(_this));\n    _this.container = _this.quill.addContainer('ql-clipboard');\n    _this.container.setAttribute('contenteditable', true);\n    _this.container.setAttribute('tabindex', -1);\n    _this.matchers = [];\n    CLIPBOARD_CONFIG.concat(_this.options.matchers).forEach(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          selector = _ref2[0],\n          matcher = _ref2[1];\n\n      if (!options.matchVisual && matcher === matchSpacing) return;\n      _this.addMatcher(selector, matcher);\n    });\n    return _this;\n  }\n\n  _createClass(Clipboard, [{\n    key: 'addMatcher',\n    value: function addMatcher(selector, matcher) {\n      this.matchers.push([selector, matcher]);\n    }\n  }, {\n    key: 'convert',\n    value: function convert(html) {\n      if (typeof html === 'string') {\n        this.container.innerHTML = html.replace(/\\>\\r?\\n +\\</g, '><'); // Remove spaces between tags\n        return this.convert();\n      }\n      var formats = this.quill.getFormat(this.quill.selection.savedRange.index);\n      if (formats[_code2.default.blotName]) {\n        var text = this.container.innerText;\n        this.container.innerHTML = '';\n        return new _quillDelta2.default().insert(text, _defineProperty({}, _code2.default.blotName, formats[_code2.default.blotName]));\n      }\n\n      var _prepareMatching = this.prepareMatching(),\n          _prepareMatching2 = _slicedToArray(_prepareMatching, 2),\n          elementMatchers = _prepareMatching2[0],\n          textMatchers = _prepareMatching2[1];\n\n      var delta = traverse(this.container, elementMatchers, textMatchers);\n      // Remove trailing newline\n      if (deltaEndsWith(delta, '\\n') && delta.ops[delta.ops.length - 1].attributes == null) {\n        delta = delta.compose(new _quillDelta2.default().retain(delta.length() - 1).delete(1));\n      }\n      debug.log('convert', this.container.innerHTML, delta);\n      this.container.innerHTML = '';\n      return delta;\n    }\n  }, {\n    key: 'dangerouslyPasteHTML',\n    value: function dangerouslyPasteHTML(index, html) {\n      var source = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _quill2.default.sources.API;\n\n      if (typeof index === 'string') {\n        this.quill.setContents(this.convert(index), html);\n        this.quill.setSelection(0, _quill2.default.sources.SILENT);\n      } else {\n        var paste = this.convert(html);\n        this.quill.updateContents(new _quillDelta2.default().retain(index).concat(paste), source);\n        this.quill.setSelection(index + paste.length(), _quill2.default.sources.SILENT);\n      }\n    }\n  }, {\n    key: 'onPaste',\n    value: function onPaste(e) {\n      var _this2 = this;\n\n      if (e.defaultPrevented || !this.quill.isEnabled()) return;\n      var range = this.quill.getSelection();\n      var delta = new _quillDelta2.default().retain(range.index);\n      var scrollTop = this.quill.scrollingContainer.scrollTop;\n      this.container.focus();\n      this.quill.selection.update(_quill2.default.sources.SILENT);\n      setTimeout(function () {\n        delta = delta.concat(_this2.convert()).delete(range.length);\n        _this2.quill.updateContents(delta, _quill2.default.sources.USER);\n        // range.length contributes to delta.length()\n        _this2.quill.setSelection(delta.length() - range.length, _quill2.default.sources.SILENT);\n        _this2.quill.scrollingContainer.scrollTop = scrollTop;\n        _this2.quill.focus();\n      }, 1);\n    }\n  }, {\n    key: 'prepareMatching',\n    value: function prepareMatching() {\n      var _this3 = this;\n\n      var elementMatchers = [],\n          textMatchers = [];\n      this.matchers.forEach(function (pair) {\n        var _pair = _slicedToArray(pair, 2),\n            selector = _pair[0],\n            matcher = _pair[1];\n\n        switch (selector) {\n          case Node.TEXT_NODE:\n            textMatchers.push(matcher);\n            break;\n          case Node.ELEMENT_NODE:\n            elementMatchers.push(matcher);\n            break;\n          default:\n            [].forEach.call(_this3.container.querySelectorAll(selector), function (node) {\n              // TODO use weakmap\n              node[DOM_KEY] = node[DOM_KEY] || [];\n              node[DOM_KEY].push(matcher);\n            });\n            break;\n        }\n      });\n      return [elementMatchers, textMatchers];\n    }\n  }]);\n\n  return Clipboard;\n}(_module2.default);\n\nClipboard.DEFAULTS = {\n  matchers: [],\n  matchVisual: true\n};\n\nfunction applyFormat(delta, format, value) {\n  if ((typeof format === 'undefined' ? 'undefined' : _typeof(format)) === 'object') {\n    return Object.keys(format).reduce(function (delta, key) {\n      return applyFormat(delta, key, format[key]);\n    }, delta);\n  } else {\n    return delta.reduce(function (delta, op) {\n      if (op.attributes && op.attributes[format]) {\n        return delta.push(op);\n      } else {\n        return delta.insert(op.insert, (0, _extend3.default)({}, _defineProperty({}, format, value), op.attributes));\n      }\n    }, new _quillDelta2.default());\n  }\n}\n\nfunction computeStyle(node) {\n  if (node.nodeType !== Node.ELEMENT_NODE) return {};\n  var DOM_KEY = '__ql-computed-style';\n  return node[DOM_KEY] || (node[DOM_KEY] = window.getComputedStyle(node));\n}\n\nfunction deltaEndsWith(delta, text) {\n  var endText = \"\";\n  for (var i = delta.ops.length - 1; i >= 0 && endText.length < text.length; --i) {\n    var op = delta.ops[i];\n    if (typeof op.insert !== 'string') break;\n    endText = op.insert + endText;\n  }\n  return endText.slice(-1 * text.length) === text;\n}\n\nfunction isLine(node) {\n  if (node.childNodes.length === 0) return false; // Exclude embed blocks\n  var style = computeStyle(node);\n  return ['block', 'list-item'].indexOf(style.display) > -1;\n}\n\nfunction traverse(node, elementMatchers, textMatchers) {\n  // Post-order\n  if (node.nodeType === node.TEXT_NODE) {\n    return textMatchers.reduce(function (delta, matcher) {\n      return matcher(node, delta);\n    }, new _quillDelta2.default());\n  } else if (node.nodeType === node.ELEMENT_NODE) {\n    return [].reduce.call(node.childNodes || [], function (delta, childNode) {\n      var childrenDelta = traverse(childNode, elementMatchers, textMatchers);\n      if (childNode.nodeType === node.ELEMENT_NODE) {\n        childrenDelta = elementMatchers.reduce(function (childrenDelta, matcher) {\n          return matcher(childNode, childrenDelta);\n        }, childrenDelta);\n        childrenDelta = (childNode[DOM_KEY] || []).reduce(function (childrenDelta, matcher) {\n          return matcher(childNode, childrenDelta);\n        }, childrenDelta);\n      }\n      return delta.concat(childrenDelta);\n    }, new _quillDelta2.default());\n  } else {\n    return new _quillDelta2.default();\n  }\n}\n\nfunction matchAlias(format, node, delta) {\n  return applyFormat(delta, format, true);\n}\n\nfunction matchAttributor(node, delta) {\n  var attributes = _parchment2.default.Attributor.Attribute.keys(node);\n  var classes = _parchment2.default.Attributor.Class.keys(node);\n  var styles = _parchment2.default.Attributor.Style.keys(node);\n  var formats = {};\n  attributes.concat(classes).concat(styles).forEach(function (name) {\n    var attr = _parchment2.default.query(name, _parchment2.default.Scope.ATTRIBUTE);\n    if (attr != null) {\n      formats[attr.attrName] = attr.value(node);\n      if (formats[attr.attrName]) return;\n    }\n    attr = ATTRIBUTE_ATTRIBUTORS[name];\n    if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n      formats[attr.attrName] = attr.value(node) || undefined;\n    }\n    attr = STYLE_ATTRIBUTORS[name];\n    if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n      attr = STYLE_ATTRIBUTORS[name];\n      formats[attr.attrName] = attr.value(node) || undefined;\n    }\n  });\n  if (Object.keys(formats).length > 0) {\n    delta = applyFormat(delta, formats);\n  }\n  return delta;\n}\n\nfunction matchBlot(node, delta) {\n  var match = _parchment2.default.query(node);\n  if (match == null) return delta;\n  if (match.prototype instanceof _parchment2.default.Embed) {\n    var embed = {};\n    var value = match.value(node);\n    if (value != null) {\n      embed[match.blotName] = value;\n      delta = new _quillDelta2.default().insert(embed, match.formats(node));\n    }\n  } else if (typeof match.formats === 'function') {\n    delta = applyFormat(delta, match.blotName, match.formats(node));\n  }\n  return delta;\n}\n\nfunction matchBreak(node, delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    delta.insert('\\n');\n  }\n  return delta;\n}\n\nfunction matchIgnore() {\n  return new _quillDelta2.default();\n}\n\nfunction matchIndent(node, delta) {\n  var match = _parchment2.default.query(node);\n  if (match == null || match.blotName !== 'list-item' || !deltaEndsWith(delta, '\\n')) {\n    return delta;\n  }\n  var indent = -1,\n      parent = node.parentNode;\n  while (!parent.classList.contains('ql-clipboard')) {\n    if ((_parchment2.default.query(parent) || {}).blotName === 'list') {\n      indent += 1;\n    }\n    parent = parent.parentNode;\n  }\n  if (indent <= 0) return delta;\n  return delta.compose(new _quillDelta2.default().retain(delta.length() - 1).retain(1, { indent: indent }));\n}\n\nfunction matchNewline(node, delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    if (isLine(node) || delta.length() > 0 && node.nextSibling && isLine(node.nextSibling)) {\n      delta.insert('\\n');\n    }\n  }\n  return delta;\n}\n\nfunction matchSpacing(node, delta) {\n  if (isLine(node) && node.nextElementSibling != null && !deltaEndsWith(delta, '\\n\\n')) {\n    var nodeHeight = node.offsetHeight + parseFloat(computeStyle(node).marginTop) + parseFloat(computeStyle(node).marginBottom);\n    if (node.nextElementSibling.offsetTop > node.offsetTop + nodeHeight * 1.5) {\n      delta.insert('\\n');\n    }\n  }\n  return delta;\n}\n\nfunction matchStyles(node, delta) {\n  var formats = {};\n  var style = node.style || {};\n  if (style.fontStyle && computeStyle(node).fontStyle === 'italic') {\n    formats.italic = true;\n  }\n  if (style.fontWeight && (computeStyle(node).fontWeight.startsWith('bold') || parseInt(computeStyle(node).fontWeight) >= 700)) {\n    formats.bold = true;\n  }\n  if (Object.keys(formats).length > 0) {\n    delta = applyFormat(delta, formats);\n  }\n  if (parseFloat(style.textIndent || 0) > 0) {\n    // Could be 0.5in\n    delta = new _quillDelta2.default().insert('\\t').concat(delta);\n  }\n  return delta;\n}\n\nfunction matchText(node, delta) {\n  var text = node.data;\n  // Word represents empty line with <o:p>&nbsp;</o:p>\n  if (node.parentNode.tagName === 'O:P') {\n    return delta.insert(text.trim());\n  }\n  if (text.trim().length === 0 && node.parentNode.classList.contains('ql-clipboard')) {\n    return delta;\n  }\n  if (!computeStyle(node.parentNode).whiteSpace.startsWith('pre')) {\n    // eslint-disable-next-line func-style\n    var replacer = function replacer(collapse, match) {\n      match = match.replace(/[^\\u00a0]/g, ''); // \\u00a0 is nbsp;\n      return match.length < 1 && collapse ? ' ' : match;\n    };\n    text = text.replace(/\\r\\n/g, ' ').replace(/\\n/g, ' ');\n    text = text.replace(/\\s\\s+/g, replacer.bind(replacer, true)); // collapse whitespace\n    if (node.previousSibling == null && isLine(node.parentNode) || node.previousSibling != null && isLine(node.previousSibling)) {\n      text = text.replace(/^\\s+/, replacer.bind(replacer, false));\n    }\n    if (node.nextSibling == null && isLine(node.parentNode) || node.nextSibling != null && isLine(node.nextSibling)) {\n      text = text.replace(/\\s+$/, replacer.bind(replacer, false));\n    }\n  }\n  return delta.insert(text);\n}\n\nexports.default = Clipboard;\nexports.matchAttributor = matchAttributor;\nexports.matchBlot = matchBlot;\nexports.matchNewline = matchNewline;\nexports.matchSpacing = matchSpacing;\nexports.matchText = matchText;\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Bold = function (_Inline) {\n  _inherits(Bold, _Inline);\n\n  function Bold() {\n    _classCallCheck(this, Bold);\n\n    return _possibleConstructorReturn(this, (Bold.__proto__ || Object.getPrototypeOf(Bold)).apply(this, arguments));\n  }\n\n  _createClass(Bold, [{\n    key: 'optimize',\n    value: function optimize(context) {\n      _get(Bold.prototype.__proto__ || Object.getPrototypeOf(Bold.prototype), 'optimize', this).call(this, context);\n      if (this.domNode.tagName !== this.statics.tagName[0]) {\n        this.replaceWith(this.statics.blotName);\n      }\n    }\n  }], [{\n    key: 'create',\n    value: function create() {\n      return _get(Bold.__proto__ || Object.getPrototypeOf(Bold), 'create', this).call(this);\n    }\n  }, {\n    key: 'formats',\n    value: function formats() {\n      return true;\n    }\n  }]);\n\n  return Bold;\n}(_inline2.default);\n\nBold.blotName = 'bold';\nBold.tagName = ['STRONG', 'B'];\n\nexports.default = Bold;\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addControls = exports.default = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _quill = __webpack_require__(5);\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nvar _logger = __webpack_require__(10);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _module = __webpack_require__(9);\n\nvar _module2 = _interopRequireDefault(_module);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar debug = (0, _logger2.default)('quill:toolbar');\n\nvar Toolbar = function (_Module) {\n  _inherits(Toolbar, _Module);\n\n  function Toolbar(quill, options) {\n    _classCallCheck(this, Toolbar);\n\n    var _this = _possibleConstructorReturn(this, (Toolbar.__proto__ || Object.getPrototypeOf(Toolbar)).call(this, quill, options));\n\n    if (Array.isArray(_this.options.container)) {\n      var container = document.createElement('div');\n      addControls(container, _this.options.container);\n      quill.container.parentNode.insertBefore(container, quill.container);\n      _this.container = container;\n    } else if (typeof _this.options.container === 'string') {\n      _this.container = document.querySelector(_this.options.container);\n    } else {\n      _this.container = _this.options.container;\n    }\n    if (!(_this.container instanceof HTMLElement)) {\n      var _ret;\n\n      return _ret = debug.error('Container required for toolbar', _this.options), _possibleConstructorReturn(_this, _ret);\n    }\n    _this.container.classList.add('ql-toolbar');\n    _this.controls = [];\n    _this.handlers = {};\n    Object.keys(_this.options.handlers).forEach(function (format) {\n      _this.addHandler(format, _this.options.handlers[format]);\n    });\n    [].forEach.call(_this.container.querySelectorAll('button, select'), function (input) {\n      _this.attach(input);\n    });\n    _this.quill.on(_quill2.default.events.EDITOR_CHANGE, function (type, range) {\n      if (type === _quill2.default.events.SELECTION_CHANGE) {\n        _this.update(range);\n      }\n    });\n    _this.quill.on(_quill2.default.events.SCROLL_OPTIMIZE, function () {\n      var _this$quill$selection = _this.quill.selection.getRange(),\n          _this$quill$selection2 = _slicedToArray(_this$quill$selection, 1),\n          range = _this$quill$selection2[0]; // quill.getSelection triggers update\n\n\n      _this.update(range);\n    });\n    return _this;\n  }\n\n  _createClass(Toolbar, [{\n    key: 'addHandler',\n    value: function addHandler(format, handler) {\n      this.handlers[format] = handler;\n    }\n  }, {\n    key: 'attach',\n    value: function attach(input) {\n      var _this2 = this;\n\n      var format = [].find.call(input.classList, function (className) {\n        return className.indexOf('ql-') === 0;\n      });\n      if (!format) return;\n      format = format.slice('ql-'.length);\n      if (input.tagName === 'BUTTON') {\n        input.setAttribute('type', 'button');\n      }\n      if (this.handlers[format] == null) {\n        if (this.quill.scroll.whitelist != null && this.quill.scroll.whitelist[format] == null) {\n          debug.warn('ignoring attaching to disabled format', format, input);\n          return;\n        }\n        if (_parchment2.default.query(format) == null) {\n          debug.warn('ignoring attaching to nonexistent format', format, input);\n          return;\n        }\n      }\n      var eventName = input.tagName === 'SELECT' ? 'change' : 'click';\n      input.addEventListener(eventName, function (e) {\n        var value = void 0;\n        if (input.tagName === 'SELECT') {\n          if (input.selectedIndex < 0) return;\n          var selected = input.options[input.selectedIndex];\n          if (selected.hasAttribute('selected')) {\n            value = false;\n          } else {\n            value = selected.value || false;\n          }\n        } else {\n          if (input.classList.contains('ql-active')) {\n            value = false;\n          } else {\n            value = input.value || !input.hasAttribute('value');\n          }\n          e.preventDefault();\n        }\n        _this2.quill.focus();\n\n        var _quill$selection$getR = _this2.quill.selection.getRange(),\n            _quill$selection$getR2 = _slicedToArray(_quill$selection$getR, 1),\n            range = _quill$selection$getR2[0];\n\n        if (_this2.handlers[format] != null) {\n          _this2.handlers[format].call(_this2, value);\n        } else if (_parchment2.default.query(format).prototype instanceof _parchment2.default.Embed) {\n          value = prompt('Enter ' + format);\n          if (!value) return;\n          _this2.quill.updateContents(new _quillDelta2.default().retain(range.index).delete(range.length).insert(_defineProperty({}, format, value)), _quill2.default.sources.USER);\n        } else {\n          _this2.quill.format(format, value, _quill2.default.sources.USER);\n        }\n        _this2.update(range);\n      });\n      // TODO use weakmap\n      this.controls.push([format, input]);\n    }\n  }, {\n    key: 'update',\n    value: function update(range) {\n      var formats = range == null ? {} : this.quill.getFormat(range);\n      this.controls.forEach(function (pair) {\n        var _pair = _slicedToArray(pair, 2),\n            format = _pair[0],\n            input = _pair[1];\n\n        if (input.tagName === 'SELECT') {\n          var option = void 0;\n          if (range == null) {\n            option = null;\n          } else if (formats[format] == null) {\n            option = input.querySelector('option[selected]');\n          } else if (!Array.isArray(formats[format])) {\n            var value = formats[format];\n            if (typeof value === 'string') {\n              value = value.replace(/\\\"/g, '\\\\\"');\n            }\n            option = input.querySelector('option[value=\"' + value + '\"]');\n          }\n          if (option == null) {\n            input.value = ''; // TODO make configurable?\n            input.selectedIndex = -1;\n          } else {\n            option.selected = true;\n          }\n        } else {\n          if (range == null) {\n            input.classList.remove('ql-active');\n          } else if (input.hasAttribute('value')) {\n            // both being null should match (default values)\n            // '1' should match with 1 (headers)\n            var isActive = formats[format] === input.getAttribute('value') || formats[format] != null && formats[format].toString() === input.getAttribute('value') || formats[format] == null && !input.getAttribute('value');\n            input.classList.toggle('ql-active', isActive);\n          } else {\n            input.classList.toggle('ql-active', formats[format] != null);\n          }\n        }\n      });\n    }\n  }]);\n\n  return Toolbar;\n}(_module2.default);\n\nToolbar.DEFAULTS = {};\n\nfunction addButton(container, format, value) {\n  var input = document.createElement('button');\n  input.setAttribute('type', 'button');\n  input.classList.add('ql-' + format);\n  if (value != null) {\n    input.value = value;\n  }\n  container.appendChild(input);\n}\n\nfunction addControls(container, groups) {\n  if (!Array.isArray(groups[0])) {\n    groups = [groups];\n  }\n  groups.forEach(function (controls) {\n    var group = document.createElement('span');\n    group.classList.add('ql-formats');\n    controls.forEach(function (control) {\n      if (typeof control === 'string') {\n        addButton(group, control);\n      } else {\n        var format = Object.keys(control)[0];\n        var value = control[format];\n        if (Array.isArray(value)) {\n          addSelect(group, format, value);\n        } else {\n          addButton(group, format, value);\n        }\n      }\n    });\n    container.appendChild(group);\n  });\n}\n\nfunction addSelect(container, format, values) {\n  var input = document.createElement('select');\n  input.classList.add('ql-' + format);\n  values.forEach(function (value) {\n    var option = document.createElement('option');\n    if (value !== false) {\n      option.setAttribute('value', value);\n    } else {\n      option.setAttribute('selected', 'selected');\n    }\n    input.appendChild(option);\n  });\n  container.appendChild(input);\n}\n\nToolbar.DEFAULTS = {\n  container: null,\n  handlers: {\n    clean: function clean() {\n      var _this3 = this;\n\n      var range = this.quill.getSelection();\n      if (range == null) return;\n      if (range.length == 0) {\n        var formats = this.quill.getFormat();\n        Object.keys(formats).forEach(function (name) {\n          // Clean functionality in existing apps only clean inline formats\n          if (_parchment2.default.query(name, _parchment2.default.Scope.INLINE) != null) {\n            _this3.quill.format(name, false);\n          }\n        });\n      } else {\n        this.quill.removeFormat(range, _quill2.default.sources.USER);\n      }\n    },\n    direction: function direction(value) {\n      var align = this.quill.getFormat()['align'];\n      if (value === 'rtl' && align == null) {\n        this.quill.format('align', 'right', _quill2.default.sources.USER);\n      } else if (!value && align === 'right') {\n        this.quill.format('align', false, _quill2.default.sources.USER);\n      }\n      this.quill.format('direction', value, _quill2.default.sources.USER);\n    },\n    indent: function indent(value) {\n      var range = this.quill.getSelection();\n      var formats = this.quill.getFormat(range);\n      var indent = parseInt(formats.indent || 0);\n      if (value === '+1' || value === '-1') {\n        var modifier = value === '+1' ? 1 : -1;\n        if (formats.direction === 'rtl') modifier *= -1;\n        this.quill.format('indent', indent + modifier, _quill2.default.sources.USER);\n      }\n    },\n    link: function link(value) {\n      if (value === true) {\n        value = prompt('Enter link URL:');\n      }\n      this.quill.format('link', value, _quill2.default.sources.USER);\n    },\n    list: function list(value) {\n      var range = this.quill.getSelection();\n      var formats = this.quill.getFormat(range);\n      if (value === 'check') {\n        if (formats['list'] === 'checked' || formats['list'] === 'unchecked') {\n          this.quill.format('list', false, _quill2.default.sources.USER);\n        } else {\n          this.quill.format('list', 'unchecked', _quill2.default.sources.USER);\n        }\n      } else {\n        this.quill.format('list', value, _quill2.default.sources.USER);\n      }\n    }\n  }\n};\n\nexports.default = Toolbar;\nexports.addControls = addControls;\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polyline class=\\\"ql-even ql-stroke\\\" points=\\\"5 7 3 9 5 11\\\"></polyline> <polyline class=\\\"ql-even ql-stroke\\\" points=\\\"13 7 15 9 13 11\\\"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>\";\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _picker = __webpack_require__(28);\n\nvar _picker2 = _interopRequireDefault(_picker);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ColorPicker = function (_Picker) {\n  _inherits(ColorPicker, _Picker);\n\n  function ColorPicker(select, label) {\n    _classCallCheck(this, ColorPicker);\n\n    var _this = _possibleConstructorReturn(this, (ColorPicker.__proto__ || Object.getPrototypeOf(ColorPicker)).call(this, select));\n\n    _this.label.innerHTML = label;\n    _this.container.classList.add('ql-color-picker');\n    [].slice.call(_this.container.querySelectorAll('.ql-picker-item'), 0, 7).forEach(function (item) {\n      item.classList.add('ql-primary');\n    });\n    return _this;\n  }\n\n  _createClass(ColorPicker, [{\n    key: 'buildItem',\n    value: function buildItem(option) {\n      var item = _get(ColorPicker.prototype.__proto__ || Object.getPrototypeOf(ColorPicker.prototype), 'buildItem', this).call(this, option);\n      item.style.backgroundColor = option.getAttribute('value') || '';\n      return item;\n    }\n  }, {\n    key: 'selectItem',\n    value: function selectItem(item, trigger) {\n      _get(ColorPicker.prototype.__proto__ || Object.getPrototypeOf(ColorPicker.prototype), 'selectItem', this).call(this, item, trigger);\n      var colorLabel = this.label.querySelector('.ql-color-label');\n      var value = item ? item.getAttribute('data-value') || '' : '';\n      if (colorLabel) {\n        if (colorLabel.tagName === 'line') {\n          colorLabel.style.stroke = value;\n        } else {\n          colorLabel.style.fill = value;\n        }\n      }\n    }\n  }]);\n\n  return ColorPicker;\n}(_picker2.default);\n\nexports.default = ColorPicker;\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _picker = __webpack_require__(28);\n\nvar _picker2 = _interopRequireDefault(_picker);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar IconPicker = function (_Picker) {\n  _inherits(IconPicker, _Picker);\n\n  function IconPicker(select, icons) {\n    _classCallCheck(this, IconPicker);\n\n    var _this = _possibleConstructorReturn(this, (IconPicker.__proto__ || Object.getPrototypeOf(IconPicker)).call(this, select));\n\n    _this.container.classList.add('ql-icon-picker');\n    [].forEach.call(_this.container.querySelectorAll('.ql-picker-item'), function (item) {\n      item.innerHTML = icons[item.getAttribute('data-value') || ''];\n    });\n    _this.defaultItem = _this.container.querySelector('.ql-selected');\n    _this.selectItem(_this.defaultItem);\n    return _this;\n  }\n\n  _createClass(IconPicker, [{\n    key: 'selectItem',\n    value: function selectItem(item, trigger) {\n      _get(IconPicker.prototype.__proto__ || Object.getPrototypeOf(IconPicker.prototype), 'selectItem', this).call(this, item, trigger);\n      item = item || this.defaultItem;\n      this.label.innerHTML = item.innerHTML;\n    }\n  }]);\n\n  return IconPicker;\n}(_picker2.default);\n\nexports.default = IconPicker;\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Tooltip = function () {\n  function Tooltip(quill, boundsContainer) {\n    var _this = this;\n\n    _classCallCheck(this, Tooltip);\n\n    this.quill = quill;\n    this.boundsContainer = boundsContainer || document.body;\n    this.root = quill.addContainer('ql-tooltip');\n    this.root.innerHTML = this.constructor.TEMPLATE;\n    if (this.quill.root === this.quill.scrollingContainer) {\n      this.quill.root.addEventListener('scroll', function () {\n        _this.root.style.marginTop = -1 * _this.quill.root.scrollTop + 'px';\n      });\n    }\n    this.hide();\n  }\n\n  _createClass(Tooltip, [{\n    key: 'hide',\n    value: function hide() {\n      this.root.classList.add('ql-hidden');\n    }\n  }, {\n    key: 'position',\n    value: function position(reference) {\n      var left = reference.left + reference.width / 2 - this.root.offsetWidth / 2;\n      // root.scrollTop should be 0 if scrollContainer !== root\n      var top = reference.bottom + this.quill.root.scrollTop;\n      this.root.style.left = left + 'px';\n      this.root.style.top = top + 'px';\n      this.root.classList.remove('ql-flip');\n      var containerBounds = this.boundsContainer.getBoundingClientRect();\n      var rootBounds = this.root.getBoundingClientRect();\n      var shift = 0;\n      if (rootBounds.right > containerBounds.right) {\n        shift = containerBounds.right - rootBounds.right;\n        this.root.style.left = left + shift + 'px';\n      }\n      if (rootBounds.left < containerBounds.left) {\n        shift = containerBounds.left - rootBounds.left;\n        this.root.style.left = left + shift + 'px';\n      }\n      if (rootBounds.bottom > containerBounds.bottom) {\n        var height = rootBounds.bottom - rootBounds.top;\n        var verticalShift = reference.bottom - reference.top + height;\n        this.root.style.top = top - verticalShift + 'px';\n        this.root.classList.add('ql-flip');\n      }\n      return shift;\n    }\n  }, {\n    key: 'show',\n    value: function show() {\n      this.root.classList.remove('ql-editing');\n      this.root.classList.remove('ql-hidden');\n    }\n  }]);\n\n  return Tooltip;\n}();\n\nexports.default = Tooltip;\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _extend = __webpack_require__(3);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nvar _emitter = __webpack_require__(8);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nvar _base = __webpack_require__(43);\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _link = __webpack_require__(27);\n\nvar _link2 = _interopRequireDefault(_link);\n\nvar _selection = __webpack_require__(15);\n\nvar _icons = __webpack_require__(41);\n\nvar _icons2 = _interopRequireDefault(_icons);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar TOOLBAR_CONFIG = [[{ header: ['1', '2', '3', false] }], ['bold', 'italic', 'underline', 'link'], [{ list: 'ordered' }, { list: 'bullet' }], ['clean']];\n\nvar SnowTheme = function (_BaseTheme) {\n  _inherits(SnowTheme, _BaseTheme);\n\n  function SnowTheme(quill, options) {\n    _classCallCheck(this, SnowTheme);\n\n    if (options.modules.toolbar != null && options.modules.toolbar.container == null) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n\n    var _this = _possibleConstructorReturn(this, (SnowTheme.__proto__ || Object.getPrototypeOf(SnowTheme)).call(this, quill, options));\n\n    _this.quill.container.classList.add('ql-snow');\n    return _this;\n  }\n\n  _createClass(SnowTheme, [{\n    key: 'extendToolbar',\n    value: function extendToolbar(toolbar) {\n      toolbar.container.classList.add('ql-snow');\n      this.buildButtons([].slice.call(toolbar.container.querySelectorAll('button')), _icons2.default);\n      this.buildPickers([].slice.call(toolbar.container.querySelectorAll('select')), _icons2.default);\n      this.tooltip = new SnowTooltip(this.quill, this.options.bounds);\n      if (toolbar.container.querySelector('.ql-link')) {\n        this.quill.keyboard.addBinding({ key: 'K', shortKey: true }, function (range, context) {\n          toolbar.handlers['link'].call(toolbar, !context.format.link);\n        });\n      }\n    }\n  }]);\n\n  return SnowTheme;\n}(_base2.default);\n\nSnowTheme.DEFAULTS = (0, _extend2.default)(true, {}, _base2.default.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link: function link(value) {\n          if (value) {\n            var range = this.quill.getSelection();\n            if (range == null || range.length == 0) return;\n            var preview = this.quill.getText(range);\n            if (/^\\S+@\\S+\\.\\S+$/.test(preview) && preview.indexOf('mailto:') !== 0) {\n              preview = 'mailto:' + preview;\n            }\n            var tooltip = this.quill.theme.tooltip;\n            tooltip.edit('link', preview);\n          } else {\n            this.quill.format('link', false);\n          }\n        }\n      }\n    }\n  }\n});\n\nvar SnowTooltip = function (_BaseTooltip) {\n  _inherits(SnowTooltip, _BaseTooltip);\n\n  function SnowTooltip(quill, bounds) {\n    _classCallCheck(this, SnowTooltip);\n\n    var _this2 = _possibleConstructorReturn(this, (SnowTooltip.__proto__ || Object.getPrototypeOf(SnowTooltip)).call(this, quill, bounds));\n\n    _this2.preview = _this2.root.querySelector('a.ql-preview');\n    return _this2;\n  }\n\n  _createClass(SnowTooltip, [{\n    key: 'listen',\n    value: function listen() {\n      var _this3 = this;\n\n      _get(SnowTooltip.prototype.__proto__ || Object.getPrototypeOf(SnowTooltip.prototype), 'listen', this).call(this);\n      this.root.querySelector('a.ql-action').addEventListener('click', function (event) {\n        if (_this3.root.classList.contains('ql-editing')) {\n          _this3.save();\n        } else {\n          _this3.edit('link', _this3.preview.textContent);\n        }\n        event.preventDefault();\n      });\n      this.root.querySelector('a.ql-remove').addEventListener('click', function (event) {\n        if (_this3.linkRange != null) {\n          var range = _this3.linkRange;\n          _this3.restoreFocus();\n          _this3.quill.formatText(range, 'link', false, _emitter2.default.sources.USER);\n          delete _this3.linkRange;\n        }\n        event.preventDefault();\n        _this3.hide();\n      });\n      this.quill.on(_emitter2.default.events.SELECTION_CHANGE, function (range, oldRange, source) {\n        if (range == null) return;\n        if (range.length === 0 && source === _emitter2.default.sources.USER) {\n          var _quill$scroll$descend = _this3.quill.scroll.descendant(_link2.default, range.index),\n              _quill$scroll$descend2 = _slicedToArray(_quill$scroll$descend, 2),\n              link = _quill$scroll$descend2[0],\n              offset = _quill$scroll$descend2[1];\n\n          if (link != null) {\n            _this3.linkRange = new _selection.Range(range.index - offset, link.length());\n            var preview = _link2.default.formats(link.domNode);\n            _this3.preview.textContent = preview;\n            _this3.preview.setAttribute('href', preview);\n            _this3.show();\n            _this3.position(_this3.quill.getBounds(_this3.linkRange));\n            return;\n          }\n        } else {\n          delete _this3.linkRange;\n        }\n        _this3.hide();\n      });\n    }\n  }, {\n    key: 'show',\n    value: function show() {\n      _get(SnowTooltip.prototype.__proto__ || Object.getPrototypeOf(SnowTooltip.prototype), 'show', this).call(this);\n      this.root.removeAttribute('data-mode');\n    }\n  }]);\n\n  return SnowTooltip;\n}(_base.BaseTooltip);\n\nSnowTooltip.TEMPLATE = ['<a class=\"ql-preview\" rel=\"noopener noreferrer\" target=\"_blank\" href=\"about:blank\"></a>', '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">', '<a class=\"ql-action\"></a>', '<a class=\"ql-remove\"></a>'].join('');\n\nexports.default = SnowTheme;\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _core = __webpack_require__(29);\n\nvar _core2 = _interopRequireDefault(_core);\n\nvar _align = __webpack_require__(36);\n\nvar _direction = __webpack_require__(38);\n\nvar _indent = __webpack_require__(64);\n\nvar _blockquote = __webpack_require__(65);\n\nvar _blockquote2 = _interopRequireDefault(_blockquote);\n\nvar _header = __webpack_require__(66);\n\nvar _header2 = _interopRequireDefault(_header);\n\nvar _list = __webpack_require__(67);\n\nvar _list2 = _interopRequireDefault(_list);\n\nvar _background = __webpack_require__(37);\n\nvar _color = __webpack_require__(26);\n\nvar _font = __webpack_require__(39);\n\nvar _size = __webpack_require__(40);\n\nvar _bold = __webpack_require__(56);\n\nvar _bold2 = _interopRequireDefault(_bold);\n\nvar _italic = __webpack_require__(68);\n\nvar _italic2 = _interopRequireDefault(_italic);\n\nvar _link = __webpack_require__(27);\n\nvar _link2 = _interopRequireDefault(_link);\n\nvar _script = __webpack_require__(69);\n\nvar _script2 = _interopRequireDefault(_script);\n\nvar _strike = __webpack_require__(70);\n\nvar _strike2 = _interopRequireDefault(_strike);\n\nvar _underline = __webpack_require__(71);\n\nvar _underline2 = _interopRequireDefault(_underline);\n\nvar _image = __webpack_require__(72);\n\nvar _image2 = _interopRequireDefault(_image);\n\nvar _video = __webpack_require__(73);\n\nvar _video2 = _interopRequireDefault(_video);\n\nvar _code = __webpack_require__(13);\n\nvar _code2 = _interopRequireDefault(_code);\n\nvar _formula = __webpack_require__(74);\n\nvar _formula2 = _interopRequireDefault(_formula);\n\nvar _syntax = __webpack_require__(75);\n\nvar _syntax2 = _interopRequireDefault(_syntax);\n\nvar _toolbar = __webpack_require__(57);\n\nvar _toolbar2 = _interopRequireDefault(_toolbar);\n\nvar _icons = __webpack_require__(41);\n\nvar _icons2 = _interopRequireDefault(_icons);\n\nvar _picker = __webpack_require__(28);\n\nvar _picker2 = _interopRequireDefault(_picker);\n\nvar _colorPicker = __webpack_require__(59);\n\nvar _colorPicker2 = _interopRequireDefault(_colorPicker);\n\nvar _iconPicker = __webpack_require__(60);\n\nvar _iconPicker2 = _interopRequireDefault(_iconPicker);\n\nvar _tooltip = __webpack_require__(61);\n\nvar _tooltip2 = _interopRequireDefault(_tooltip);\n\nvar _bubble = __webpack_require__(108);\n\nvar _bubble2 = _interopRequireDefault(_bubble);\n\nvar _snow = __webpack_require__(62);\n\nvar _snow2 = _interopRequireDefault(_snow);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_core2.default.register({\n  'attributors/attribute/direction': _direction.DirectionAttribute,\n\n  'attributors/class/align': _align.AlignClass,\n  'attributors/class/background': _background.BackgroundClass,\n  'attributors/class/color': _color.ColorClass,\n  'attributors/class/direction': _direction.DirectionClass,\n  'attributors/class/font': _font.FontClass,\n  'attributors/class/size': _size.SizeClass,\n\n  'attributors/style/align': _align.AlignStyle,\n  'attributors/style/background': _background.BackgroundStyle,\n  'attributors/style/color': _color.ColorStyle,\n  'attributors/style/direction': _direction.DirectionStyle,\n  'attributors/style/font': _font.FontStyle,\n  'attributors/style/size': _size.SizeStyle\n}, true);\n\n_core2.default.register({\n  'formats/align': _align.AlignClass,\n  'formats/direction': _direction.DirectionClass,\n  'formats/indent': _indent.IndentClass,\n\n  'formats/background': _background.BackgroundStyle,\n  'formats/color': _color.ColorStyle,\n  'formats/font': _font.FontClass,\n  'formats/size': _size.SizeClass,\n\n  'formats/blockquote': _blockquote2.default,\n  'formats/code-block': _code2.default,\n  'formats/header': _header2.default,\n  'formats/list': _list2.default,\n\n  'formats/bold': _bold2.default,\n  'formats/code': _code.Code,\n  'formats/italic': _italic2.default,\n  'formats/link': _link2.default,\n  'formats/script': _script2.default,\n  'formats/strike': _strike2.default,\n  'formats/underline': _underline2.default,\n\n  'formats/image': _image2.default,\n  'formats/video': _video2.default,\n\n  'formats/list/item': _list.ListItem,\n\n  'modules/formula': _formula2.default,\n  'modules/syntax': _syntax2.default,\n  'modules/toolbar': _toolbar2.default,\n\n  'themes/bubble': _bubble2.default,\n  'themes/snow': _snow2.default,\n\n  'ui/icons': _icons2.default,\n  'ui/picker': _picker2.default,\n  'ui/icon-picker': _iconPicker2.default,\n  'ui/color-picker': _colorPicker2.default,\n  'ui/tooltip': _tooltip2.default\n}, true);\n\nexports.default = _core2.default;\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.IndentClass = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar IdentAttributor = function (_Parchment$Attributor) {\n  _inherits(IdentAttributor, _Parchment$Attributor);\n\n  function IdentAttributor() {\n    _classCallCheck(this, IdentAttributor);\n\n    return _possibleConstructorReturn(this, (IdentAttributor.__proto__ || Object.getPrototypeOf(IdentAttributor)).apply(this, arguments));\n  }\n\n  _createClass(IdentAttributor, [{\n    key: 'add',\n    value: function add(node, value) {\n      if (value === '+1' || value === '-1') {\n        var indent = this.value(node) || 0;\n        value = value === '+1' ? indent + 1 : indent - 1;\n      }\n      if (value === 0) {\n        this.remove(node);\n        return true;\n      } else {\n        return _get(IdentAttributor.prototype.__proto__ || Object.getPrototypeOf(IdentAttributor.prototype), 'add', this).call(this, node, value);\n      }\n    }\n  }, {\n    key: 'canAdd',\n    value: function canAdd(node, value) {\n      return _get(IdentAttributor.prototype.__proto__ || Object.getPrototypeOf(IdentAttributor.prototype), 'canAdd', this).call(this, node, value) || _get(IdentAttributor.prototype.__proto__ || Object.getPrototypeOf(IdentAttributor.prototype), 'canAdd', this).call(this, node, parseInt(value));\n    }\n  }, {\n    key: 'value',\n    value: function value(node) {\n      return parseInt(_get(IdentAttributor.prototype.__proto__ || Object.getPrototypeOf(IdentAttributor.prototype), 'value', this).call(this, node)) || undefined; // Don't return NaN\n    }\n  }]);\n\n  return IdentAttributor;\n}(_parchment2.default.Attributor.Class);\n\nvar IndentClass = new IdentAttributor('indent', 'ql-indent', {\n  scope: _parchment2.default.Scope.BLOCK,\n  whitelist: [1, 2, 3, 4, 5, 6, 7, 8]\n});\n\nexports.IndentClass = IndentClass;\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Blockquote = function (_Block) {\n  _inherits(Blockquote, _Block);\n\n  function Blockquote() {\n    _classCallCheck(this, Blockquote);\n\n    return _possibleConstructorReturn(this, (Blockquote.__proto__ || Object.getPrototypeOf(Blockquote)).apply(this, arguments));\n  }\n\n  return Blockquote;\n}(_block2.default);\n\nBlockquote.blotName = 'blockquote';\nBlockquote.tagName = 'blockquote';\n\nexports.default = Blockquote;\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Header = function (_Block) {\n  _inherits(Header, _Block);\n\n  function Header() {\n    _classCallCheck(this, Header);\n\n    return _possibleConstructorReturn(this, (Header.__proto__ || Object.getPrototypeOf(Header)).apply(this, arguments));\n  }\n\n  _createClass(Header, null, [{\n    key: 'formats',\n    value: function formats(domNode) {\n      return this.tagName.indexOf(domNode.tagName) + 1;\n    }\n  }]);\n\n  return Header;\n}(_block2.default);\n\nHeader.blotName = 'header';\nHeader.tagName = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\n\nexports.default = Header;\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.ListItem = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nvar _container = __webpack_require__(25);\n\nvar _container2 = _interopRequireDefault(_container);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ListItem = function (_Block) {\n  _inherits(ListItem, _Block);\n\n  function ListItem() {\n    _classCallCheck(this, ListItem);\n\n    return _possibleConstructorReturn(this, (ListItem.__proto__ || Object.getPrototypeOf(ListItem)).apply(this, arguments));\n  }\n\n  _createClass(ListItem, [{\n    key: 'format',\n    value: function format(name, value) {\n      if (name === List.blotName && !value) {\n        this.replaceWith(_parchment2.default.create(this.statics.scope));\n      } else {\n        _get(ListItem.prototype.__proto__ || Object.getPrototypeOf(ListItem.prototype), 'format', this).call(this, name, value);\n      }\n    }\n  }, {\n    key: 'remove',\n    value: function remove() {\n      if (this.prev == null && this.next == null) {\n        this.parent.remove();\n      } else {\n        _get(ListItem.prototype.__proto__ || Object.getPrototypeOf(ListItem.prototype), 'remove', this).call(this);\n      }\n    }\n  }, {\n    key: 'replaceWith',\n    value: function replaceWith(name, value) {\n      this.parent.isolate(this.offset(this.parent), this.length());\n      if (name === this.parent.statics.blotName) {\n        this.parent.replaceWith(name, value);\n        return this;\n      } else {\n        this.parent.unwrap();\n        return _get(ListItem.prototype.__proto__ || Object.getPrototypeOf(ListItem.prototype), 'replaceWith', this).call(this, name, value);\n      }\n    }\n  }], [{\n    key: 'formats',\n    value: function formats(domNode) {\n      return domNode.tagName === this.tagName ? undefined : _get(ListItem.__proto__ || Object.getPrototypeOf(ListItem), 'formats', this).call(this, domNode);\n    }\n  }]);\n\n  return ListItem;\n}(_block2.default);\n\nListItem.blotName = 'list-item';\nListItem.tagName = 'LI';\n\nvar List = function (_Container) {\n  _inherits(List, _Container);\n\n  _createClass(List, null, [{\n    key: 'create',\n    value: function create(value) {\n      var tagName = value === 'ordered' ? 'OL' : 'UL';\n      var node = _get(List.__proto__ || Object.getPrototypeOf(List), 'create', this).call(this, tagName);\n      if (value === 'checked' || value === 'unchecked') {\n        node.setAttribute('data-checked', value === 'checked');\n      }\n      return node;\n    }\n  }, {\n    key: 'formats',\n    value: function formats(domNode) {\n      if (domNode.tagName === 'OL') return 'ordered';\n      if (domNode.tagName === 'UL') {\n        if (domNode.hasAttribute('data-checked')) {\n          return domNode.getAttribute('data-checked') === 'true' ? 'checked' : 'unchecked';\n        } else {\n          return 'bullet';\n        }\n      }\n      return undefined;\n    }\n  }]);\n\n  function List(domNode) {\n    _classCallCheck(this, List);\n\n    var _this2 = _possibleConstructorReturn(this, (List.__proto__ || Object.getPrototypeOf(List)).call(this, domNode));\n\n    var listEventHandler = function listEventHandler(e) {\n      if (e.target.parentNode !== domNode) return;\n      var format = _this2.statics.formats(domNode);\n      var blot = _parchment2.default.find(e.target);\n      if (format === 'checked') {\n        blot.format('list', 'unchecked');\n      } else if (format === 'unchecked') {\n        blot.format('list', 'checked');\n      }\n    };\n\n    domNode.addEventListener('touchstart', listEventHandler);\n    domNode.addEventListener('mousedown', listEventHandler);\n    return _this2;\n  }\n\n  _createClass(List, [{\n    key: 'format',\n    value: function format(name, value) {\n      if (this.children.length > 0) {\n        this.children.tail.format(name, value);\n      }\n    }\n  }, {\n    key: 'formats',\n    value: function formats() {\n      // We don't inherit from FormatBlot\n      return _defineProperty({}, this.statics.blotName, this.statics.formats(this.domNode));\n    }\n  }, {\n    key: 'insertBefore',\n    value: function insertBefore(blot, ref) {\n      if (blot instanceof ListItem) {\n        _get(List.prototype.__proto__ || Object.getPrototypeOf(List.prototype), 'insertBefore', this).call(this, blot, ref);\n      } else {\n        var index = ref == null ? this.length() : ref.offset(this);\n        var after = this.split(index);\n        after.parent.insertBefore(blot, after);\n      }\n    }\n  }, {\n    key: 'optimize',\n    value: function optimize(context) {\n      _get(List.prototype.__proto__ || Object.getPrototypeOf(List.prototype), 'optimize', this).call(this, context);\n      var next = this.next;\n      if (next != null && next.prev === this && next.statics.blotName === this.statics.blotName && next.domNode.tagName === this.domNode.tagName && next.domNode.getAttribute('data-checked') === this.domNode.getAttribute('data-checked')) {\n        next.moveChildren(this);\n        next.remove();\n      }\n    }\n  }, {\n    key: 'replace',\n    value: function replace(target) {\n      if (target.statics.blotName !== this.statics.blotName) {\n        var item = _parchment2.default.create(this.statics.defaultChild);\n        target.moveChildren(item);\n        this.appendChild(item);\n      }\n      _get(List.prototype.__proto__ || Object.getPrototypeOf(List.prototype), 'replace', this).call(this, target);\n    }\n  }]);\n\n  return List;\n}(_container2.default);\n\nList.blotName = 'list';\nList.scope = _parchment2.default.Scope.BLOCK_BLOT;\nList.tagName = ['OL', 'UL'];\nList.defaultChild = 'list-item';\nList.allowedChildren = [ListItem];\n\nexports.ListItem = ListItem;\nexports.default = List;\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _bold = __webpack_require__(56);\n\nvar _bold2 = _interopRequireDefault(_bold);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Italic = function (_Bold) {\n  _inherits(Italic, _Bold);\n\n  function Italic() {\n    _classCallCheck(this, Italic);\n\n    return _possibleConstructorReturn(this, (Italic.__proto__ || Object.getPrototypeOf(Italic)).apply(this, arguments));\n  }\n\n  return Italic;\n}(_bold2.default);\n\nItalic.blotName = 'italic';\nItalic.tagName = ['EM', 'I'];\n\nexports.default = Italic;\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Script = function (_Inline) {\n  _inherits(Script, _Inline);\n\n  function Script() {\n    _classCallCheck(this, Script);\n\n    return _possibleConstructorReturn(this, (Script.__proto__ || Object.getPrototypeOf(Script)).apply(this, arguments));\n  }\n\n  _createClass(Script, null, [{\n    key: 'create',\n    value: function create(value) {\n      if (value === 'super') {\n        return document.createElement('sup');\n      } else if (value === 'sub') {\n        return document.createElement('sub');\n      } else {\n        return _get(Script.__proto__ || Object.getPrototypeOf(Script), 'create', this).call(this, value);\n      }\n    }\n  }, {\n    key: 'formats',\n    value: function formats(domNode) {\n      if (domNode.tagName === 'SUB') return 'sub';\n      if (domNode.tagName === 'SUP') return 'super';\n      return undefined;\n    }\n  }]);\n\n  return Script;\n}(_inline2.default);\n\nScript.blotName = 'script';\nScript.tagName = ['SUB', 'SUP'];\n\nexports.default = Script;\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Strike = function (_Inline) {\n  _inherits(Strike, _Inline);\n\n  function Strike() {\n    _classCallCheck(this, Strike);\n\n    return _possibleConstructorReturn(this, (Strike.__proto__ || Object.getPrototypeOf(Strike)).apply(this, arguments));\n  }\n\n  return Strike;\n}(_inline2.default);\n\nStrike.blotName = 'strike';\nStrike.tagName = 'S';\n\nexports.default = Strike;\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Underline = function (_Inline) {\n  _inherits(Underline, _Inline);\n\n  function Underline() {\n    _classCallCheck(this, Underline);\n\n    return _possibleConstructorReturn(this, (Underline.__proto__ || Object.getPrototypeOf(Underline)).apply(this, arguments));\n  }\n\n  return Underline;\n}(_inline2.default);\n\nUnderline.blotName = 'underline';\nUnderline.tagName = 'U';\n\nexports.default = Underline;\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _link = __webpack_require__(27);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ATTRIBUTES = ['alt', 'height', 'width'];\n\nvar Image = function (_Parchment$Embed) {\n  _inherits(Image, _Parchment$Embed);\n\n  function Image() {\n    _classCallCheck(this, Image);\n\n    return _possibleConstructorReturn(this, (Image.__proto__ || Object.getPrototypeOf(Image)).apply(this, arguments));\n  }\n\n  _createClass(Image, [{\n    key: 'format',\n    value: function format(name, value) {\n      if (ATTRIBUTES.indexOf(name) > -1) {\n        if (value) {\n          this.domNode.setAttribute(name, value);\n        } else {\n          this.domNode.removeAttribute(name);\n        }\n      } else {\n        _get(Image.prototype.__proto__ || Object.getPrototypeOf(Image.prototype), 'format', this).call(this, name, value);\n      }\n    }\n  }], [{\n    key: 'create',\n    value: function create(value) {\n      var node = _get(Image.__proto__ || Object.getPrototypeOf(Image), 'create', this).call(this, value);\n      if (typeof value === 'string') {\n        node.setAttribute('src', this.sanitize(value));\n      }\n      return node;\n    }\n  }, {\n    key: 'formats',\n    value: function formats(domNode) {\n      return ATTRIBUTES.reduce(function (formats, attribute) {\n        if (domNode.hasAttribute(attribute)) {\n          formats[attribute] = domNode.getAttribute(attribute);\n        }\n        return formats;\n      }, {});\n    }\n  }, {\n    key: 'match',\n    value: function match(url) {\n      return (/\\.(jpe?g|gif|png)$/.test(url) || /^data:image\\/.+;base64/.test(url)\n      );\n    }\n  }, {\n    key: 'sanitize',\n    value: function sanitize(url) {\n      return (0, _link.sanitize)(url, ['http', 'https', 'data']) ? url : '//:0';\n    }\n  }, {\n    key: 'value',\n    value: function value(domNode) {\n      return domNode.getAttribute('src');\n    }\n  }]);\n\n  return Image;\n}(_parchment2.default.Embed);\n\nImage.blotName = 'image';\nImage.tagName = 'IMG';\n\nexports.default = Image;\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _block = __webpack_require__(4);\n\nvar _link = __webpack_require__(27);\n\nvar _link2 = _interopRequireDefault(_link);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ATTRIBUTES = ['height', 'width'];\n\nvar Video = function (_BlockEmbed) {\n  _inherits(Video, _BlockEmbed);\n\n  function Video() {\n    _classCallCheck(this, Video);\n\n    return _possibleConstructorReturn(this, (Video.__proto__ || Object.getPrototypeOf(Video)).apply(this, arguments));\n  }\n\n  _createClass(Video, [{\n    key: 'format',\n    value: function format(name, value) {\n      if (ATTRIBUTES.indexOf(name) > -1) {\n        if (value) {\n          this.domNode.setAttribute(name, value);\n        } else {\n          this.domNode.removeAttribute(name);\n        }\n      } else {\n        _get(Video.prototype.__proto__ || Object.getPrototypeOf(Video.prototype), 'format', this).call(this, name, value);\n      }\n    }\n  }], [{\n    key: 'create',\n    value: function create(value) {\n      var node = _get(Video.__proto__ || Object.getPrototypeOf(Video), 'create', this).call(this, value);\n      node.setAttribute('frameborder', '0');\n      node.setAttribute('allowfullscreen', true);\n      node.setAttribute('src', this.sanitize(value));\n      return node;\n    }\n  }, {\n    key: 'formats',\n    value: function formats(domNode) {\n      return ATTRIBUTES.reduce(function (formats, attribute) {\n        if (domNode.hasAttribute(attribute)) {\n          formats[attribute] = domNode.getAttribute(attribute);\n        }\n        return formats;\n      }, {});\n    }\n  }, {\n    key: 'sanitize',\n    value: function sanitize(url) {\n      return _link2.default.sanitize(url);\n    }\n  }, {\n    key: 'value',\n    value: function value(domNode) {\n      return domNode.getAttribute('src');\n    }\n  }]);\n\n  return Video;\n}(_block.BlockEmbed);\n\nVideo.blotName = 'video';\nVideo.className = 'ql-video';\nVideo.tagName = 'IFRAME';\n\nexports.default = Video;\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.FormulaBlot = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _embed = __webpack_require__(35);\n\nvar _embed2 = _interopRequireDefault(_embed);\n\nvar _quill = __webpack_require__(5);\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nvar _module = __webpack_require__(9);\n\nvar _module2 = _interopRequireDefault(_module);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar FormulaBlot = function (_Embed) {\n  _inherits(FormulaBlot, _Embed);\n\n  function FormulaBlot() {\n    _classCallCheck(this, FormulaBlot);\n\n    return _possibleConstructorReturn(this, (FormulaBlot.__proto__ || Object.getPrototypeOf(FormulaBlot)).apply(this, arguments));\n  }\n\n  _createClass(FormulaBlot, null, [{\n    key: 'create',\n    value: function create(value) {\n      var node = _get(FormulaBlot.__proto__ || Object.getPrototypeOf(FormulaBlot), 'create', this).call(this, value);\n      if (typeof value === 'string') {\n        window.katex.render(value, node, {\n          throwOnError: false,\n          errorColor: '#f00'\n        });\n        node.setAttribute('data-value', value);\n      }\n      return node;\n    }\n  }, {\n    key: 'value',\n    value: function value(domNode) {\n      return domNode.getAttribute('data-value');\n    }\n  }]);\n\n  return FormulaBlot;\n}(_embed2.default);\n\nFormulaBlot.blotName = 'formula';\nFormulaBlot.className = 'ql-formula';\nFormulaBlot.tagName = 'SPAN';\n\nvar Formula = function (_Module) {\n  _inherits(Formula, _Module);\n\n  _createClass(Formula, null, [{\n    key: 'register',\n    value: function register() {\n      _quill2.default.register(FormulaBlot, true);\n    }\n  }]);\n\n  function Formula() {\n    _classCallCheck(this, Formula);\n\n    var _this2 = _possibleConstructorReturn(this, (Formula.__proto__ || Object.getPrototypeOf(Formula)).call(this));\n\n    if (window.katex == null) {\n      throw new Error('Formula module requires KaTeX.');\n    }\n    return _this2;\n  }\n\n  return Formula;\n}(_module2.default);\n\nexports.FormulaBlot = FormulaBlot;\nexports.default = Formula;\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.CodeToken = exports.CodeBlock = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _quill = __webpack_require__(5);\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nvar _module = __webpack_require__(9);\n\nvar _module2 = _interopRequireDefault(_module);\n\nvar _code = __webpack_require__(13);\n\nvar _code2 = _interopRequireDefault(_code);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar SyntaxCodeBlock = function (_CodeBlock) {\n  _inherits(SyntaxCodeBlock, _CodeBlock);\n\n  function SyntaxCodeBlock() {\n    _classCallCheck(this, SyntaxCodeBlock);\n\n    return _possibleConstructorReturn(this, (SyntaxCodeBlock.__proto__ || Object.getPrototypeOf(SyntaxCodeBlock)).apply(this, arguments));\n  }\n\n  _createClass(SyntaxCodeBlock, [{\n    key: 'replaceWith',\n    value: function replaceWith(block) {\n      this.domNode.textContent = this.domNode.textContent;\n      this.attach();\n      _get(SyntaxCodeBlock.prototype.__proto__ || Object.getPrototypeOf(SyntaxCodeBlock.prototype), 'replaceWith', this).call(this, block);\n    }\n  }, {\n    key: 'highlight',\n    value: function highlight(_highlight) {\n      var text = this.domNode.textContent;\n      if (this.cachedText !== text) {\n        if (text.trim().length > 0 || this.cachedText == null) {\n          this.domNode.innerHTML = _highlight(text);\n          this.domNode.normalize();\n          this.attach();\n        }\n        this.cachedText = text;\n      }\n    }\n  }]);\n\n  return SyntaxCodeBlock;\n}(_code2.default);\n\nSyntaxCodeBlock.className = 'ql-syntax';\n\nvar CodeToken = new _parchment2.default.Attributor.Class('token', 'hljs', {\n  scope: _parchment2.default.Scope.INLINE\n});\n\nvar Syntax = function (_Module) {\n  _inherits(Syntax, _Module);\n\n  _createClass(Syntax, null, [{\n    key: 'register',\n    value: function register() {\n      _quill2.default.register(CodeToken, true);\n      _quill2.default.register(SyntaxCodeBlock, true);\n    }\n  }]);\n\n  function Syntax(quill, options) {\n    _classCallCheck(this, Syntax);\n\n    var _this2 = _possibleConstructorReturn(this, (Syntax.__proto__ || Object.getPrototypeOf(Syntax)).call(this, quill, options));\n\n    if (typeof _this2.options.highlight !== 'function') {\n      throw new Error('Syntax module requires highlight.js. Please include the library on the page before Quill.');\n    }\n    var timer = null;\n    _this2.quill.on(_quill2.default.events.SCROLL_OPTIMIZE, function () {\n      clearTimeout(timer);\n      timer = setTimeout(function () {\n        _this2.highlight();\n        timer = null;\n      }, _this2.options.interval);\n    });\n    _this2.highlight();\n    return _this2;\n  }\n\n  _createClass(Syntax, [{\n    key: 'highlight',\n    value: function highlight() {\n      var _this3 = this;\n\n      if (this.quill.selection.composing) return;\n      this.quill.update(_quill2.default.sources.USER);\n      var range = this.quill.getSelection();\n      this.quill.scroll.descendants(SyntaxCodeBlock).forEach(function (code) {\n        code.highlight(_this3.options.highlight);\n      });\n      this.quill.update(_quill2.default.sources.SILENT);\n      if (range != null) {\n        this.quill.setSelection(range, _quill2.default.sources.SILENT);\n      }\n    }\n  }]);\n\n  return Syntax;\n}(_module2.default);\n\nSyntax.DEFAULTS = {\n  highlight: function () {\n    if (window.hljs == null) return null;\n    return function (text) {\n      var result = window.hljs.highlightAuto(text);\n      return result.value;\n    };\n  }(),\n  interval: 1000\n};\n\nexports.CodeBlock = SyntaxCodeBlock;\nexports.CodeToken = CodeToken;\nexports.default = Syntax;\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>\";\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>\";\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>\";\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>\";\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <g class=\\\"ql-fill ql-color-label\\\"> <polygon points=\\\"6 6.868 6 6 5 6 5 7 5.942 7 6 6.868\\\"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points=\\\"6.817 5 6 5 6 6 6.38 6 6.817 5\\\"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points=\\\"4 11.439 4 11 3 11 3 12 3.755 12 4 11.439\\\"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points=\\\"4.63 10 4 10 4 11 4.192 11 4.63 10\\\"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points=\\\"13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174\\\"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points=\\\"12 6.868 12 6 11.62 6 12 6.868\\\"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points=\\\"12.933 9 13 9 13 8 12.495 8 12.933 9\\\"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points=\\\"5.5 13 9 5 12.5 13\\\"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>\";\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <rect class=\\\"ql-fill ql-stroke\\\" height=3 width=3 x=4 y=5></rect> <rect class=\\\"ql-fill ql-stroke\\\" height=3 width=3 x=11 y=5></rect> <path class=\\\"ql-even ql-fill ql-stroke\\\" d=M7,8c0,4.031-3,5-3,5></path> <path class=\\\"ql-even ql-fill ql-stroke\\\" d=M14,8c0,4.031-3,5-3,5></path> </svg>\";\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>\";\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg class=\\\"\\\" viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>\";\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=\\\"ql-color-label ql-stroke ql-transparent\\\" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points=\\\"5.5 11 9 3 12.5 11\\\"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>\";\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polygon class=\\\"ql-stroke ql-fill\\\" points=\\\"3 11 5 9 3 7 3 11\\\"></polygon> <line class=\\\"ql-stroke ql-fill\\\" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>\";\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polygon class=\\\"ql-stroke ql-fill\\\" points=\\\"15 12 13 10 15 8 15 12\\\"></polygon> <line class=\\\"ql-stroke ql-fill\\\" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>\";\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>\";\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>\";\n\n/***/ }),\n/* 89 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>\";\n\n/***/ }),\n/* 90 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform=\\\"translate(24 18) rotate(-180)\\\"/> </svg>\";\n\n/***/ }),\n/* 91 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>\";\n\n/***/ }),\n/* 92 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>\";\n\n/***/ }),\n/* 93 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>\";\n\n/***/ }),\n/* 94 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>\";\n\n/***/ }),\n/* 95 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class=\\\"ql-even ql-fill\\\" points=\\\"5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12\\\"></polyline> </svg>\";\n\n/***/ }),\n/* 96 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=\\\"ql-fill ql-stroke\\\" points=\\\"3 7 3 11 5 9 3 7\\\"></polyline> </svg>\";\n\n/***/ }),\n/* 97 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points=\\\"5 7 5 11 3 9 5 7\\\"></polyline> </svg>\";\n\n/***/ }),\n/* 98 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class=\\\"ql-even ql-stroke\\\" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class=\\\"ql-even ql-stroke\\\" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>\";\n\n/***/ }),\n/* 99 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class=\\\"ql-stroke ql-thin\\\" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class=\\\"ql-stroke ql-thin\\\" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class=\\\"ql-stroke ql-thin\\\" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>\";\n\n/***/ }),\n/* 100 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>\";\n\n/***/ }),\n/* 101 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg class=\\\"\\\" viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points=\\\"3 4 4 5 6 3\\\"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points=\\\"3 14 4 15 6 13\\\"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points=\\\"3 9 4 10 6 8\\\"></polyline> </svg>\";\n\n/***/ }),\n/* 102 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>\";\n\n/***/ }),\n/* 103 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>\";\n\n/***/ }),\n/* 104 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=\\\"ql-stroke ql-thin\\\" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>\";\n\n/***/ }),\n/* 105 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>\";\n\n/***/ }),\n/* 106 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>\";\n\n/***/ }),\n/* 107 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polygon class=ql-stroke points=\\\"7 11 9 13 11 11 7 11\\\"></polygon> <polygon class=ql-stroke points=\\\"7 7 9 5 11 7 7 7\\\"></polygon> </svg>\";\n\n/***/ }),\n/* 108 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.BubbleTooltip = undefined;\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _extend = __webpack_require__(3);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nvar _emitter = __webpack_require__(8);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nvar _base = __webpack_require__(43);\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _selection = __webpack_require__(15);\n\nvar _icons = __webpack_require__(41);\n\nvar _icons2 = _interopRequireDefault(_icons);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar TOOLBAR_CONFIG = [['bold', 'italic', 'link'], [{ header: 1 }, { header: 2 }, 'blockquote']];\n\nvar BubbleTheme = function (_BaseTheme) {\n  _inherits(BubbleTheme, _BaseTheme);\n\n  function BubbleTheme(quill, options) {\n    _classCallCheck(this, BubbleTheme);\n\n    if (options.modules.toolbar != null && options.modules.toolbar.container == null) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n\n    var _this = _possibleConstructorReturn(this, (BubbleTheme.__proto__ || Object.getPrototypeOf(BubbleTheme)).call(this, quill, options));\n\n    _this.quill.container.classList.add('ql-bubble');\n    return _this;\n  }\n\n  _createClass(BubbleTheme, [{\n    key: 'extendToolbar',\n    value: function extendToolbar(toolbar) {\n      this.tooltip = new BubbleTooltip(this.quill, this.options.bounds);\n      this.tooltip.root.appendChild(toolbar.container);\n      this.buildButtons([].slice.call(toolbar.container.querySelectorAll('button')), _icons2.default);\n      this.buildPickers([].slice.call(toolbar.container.querySelectorAll('select')), _icons2.default);\n    }\n  }]);\n\n  return BubbleTheme;\n}(_base2.default);\n\nBubbleTheme.DEFAULTS = (0, _extend2.default)(true, {}, _base2.default.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link: function link(value) {\n          if (!value) {\n            this.quill.format('link', false);\n          } else {\n            this.quill.theme.tooltip.edit();\n          }\n        }\n      }\n    }\n  }\n});\n\nvar BubbleTooltip = function (_BaseTooltip) {\n  _inherits(BubbleTooltip, _BaseTooltip);\n\n  function BubbleTooltip(quill, bounds) {\n    _classCallCheck(this, BubbleTooltip);\n\n    var _this2 = _possibleConstructorReturn(this, (BubbleTooltip.__proto__ || Object.getPrototypeOf(BubbleTooltip)).call(this, quill, bounds));\n\n    _this2.quill.on(_emitter2.default.events.EDITOR_CHANGE, function (type, range, oldRange, source) {\n      if (type !== _emitter2.default.events.SELECTION_CHANGE) return;\n      if (range != null && range.length > 0 && source === _emitter2.default.sources.USER) {\n        _this2.show();\n        // Lock our width so we will expand beyond our offsetParent boundaries\n        _this2.root.style.left = '0px';\n        _this2.root.style.width = '';\n        _this2.root.style.width = _this2.root.offsetWidth + 'px';\n        var lines = _this2.quill.getLines(range.index, range.length);\n        if (lines.length === 1) {\n          _this2.position(_this2.quill.getBounds(range));\n        } else {\n          var lastLine = lines[lines.length - 1];\n          var index = _this2.quill.getIndex(lastLine);\n          var length = Math.min(lastLine.length() - 1, range.index + range.length - index);\n          var _bounds = _this2.quill.getBounds(new _selection.Range(index, length));\n          _this2.position(_bounds);\n        }\n      } else if (document.activeElement !== _this2.textbox && _this2.quill.hasFocus()) {\n        _this2.hide();\n      }\n    });\n    return _this2;\n  }\n\n  _createClass(BubbleTooltip, [{\n    key: 'listen',\n    value: function listen() {\n      var _this3 = this;\n\n      _get(BubbleTooltip.prototype.__proto__ || Object.getPrototypeOf(BubbleTooltip.prototype), 'listen', this).call(this);\n      this.root.querySelector('.ql-close').addEventListener('click', function () {\n        _this3.root.classList.remove('ql-editing');\n      });\n      this.quill.on(_emitter2.default.events.SCROLL_OPTIMIZE, function () {\n        // Let selection be restored by toolbar handlers before repositioning\n        setTimeout(function () {\n          if (_this3.root.classList.contains('ql-hidden')) return;\n          var range = _this3.quill.getSelection();\n          if (range != null) {\n            _this3.position(_this3.quill.getBounds(range));\n          }\n        }, 1);\n      });\n    }\n  }, {\n    key: 'cancel',\n    value: function cancel() {\n      this.show();\n    }\n  }, {\n    key: 'position',\n    value: function position(reference) {\n      var shift = _get(BubbleTooltip.prototype.__proto__ || Object.getPrototypeOf(BubbleTooltip.prototype), 'position', this).call(this, reference);\n      var arrow = this.root.querySelector('.ql-tooltip-arrow');\n      arrow.style.marginLeft = '';\n      if (shift === 0) return shift;\n      arrow.style.marginLeft = -1 * shift - arrow.offsetWidth / 2 + 'px';\n    }\n  }]);\n\n  return BubbleTooltip;\n}(_base.BaseTooltip);\n\nBubbleTooltip.TEMPLATE = ['<span class=\"ql-tooltip-arrow\"></span>', '<div class=\"ql-tooltip-editor\">', '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">', '<a class=\"ql-close\"></a>', '</div>'].join('');\n\nexports.BubbleTooltip = BubbleTooltip;\nexports.default = BubbleTheme;\n\n/***/ }),\n/* 109 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(63);\n\n\n/***/ })\n/******/ ])[\"default\"];\n});","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * True if the custom elements polyfill is in use.\n */\nexport const isCEPolyfill = typeof window !== 'undefined' &&\n    window.customElements != null &&\n    window.customElements.polyfillWrapFlushCallback !==\n        undefined;\n/**\n * Reparents nodes, starting from `start` (inclusive) to `end` (exclusive),\n * into another container (could be the same container), before `before`. If\n * `before` is null, it appends the nodes to the container.\n */\nexport const reparentNodes = (container, start, end = null, before = null) => {\n    while (start !== end) {\n        const n = start.nextSibling;\n        container.insertBefore(start, before);\n        start = n;\n    }\n};\n/**\n * Removes nodes, starting from `start` (inclusive) to `end` (exclusive), from\n * `container`.\n */\nexport const removeNodes = (container, start, end = null) => {\n    while (start !== end) {\n        const n = start.nextSibling;\n        container.removeChild(start);\n        start = n;\n    }\n};\n//# sourceMappingURL=dom.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * An expression marker with embedded unique key to avoid collision with\n * possible text in templates.\n */\nexport const marker = `{{lit-${String(Math.random()).slice(2)}}}`;\n/**\n * An expression marker used text-positions, multi-binding attributes, and\n * attributes with markup-like text values.\n */\nexport const nodeMarker = `<!--${marker}-->`;\nexport const markerRegex = new RegExp(`${marker}|${nodeMarker}`);\n/**\n * Suffix appended to all bound attribute names.\n */\nexport const boundAttributeSuffix = '$lit$';\n/**\n * An updatable Template that tracks the location of dynamic parts.\n */\nexport class Template {\n    constructor(result, element) {\n        this.parts = [];\n        this.element = element;\n        const nodesToRemove = [];\n        const stack = [];\n        // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be null\n        const walker = document.createTreeWalker(element.content, 133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */, null, false);\n        // Keeps track of the last index associated with a part. We try to delete\n        // unnecessary nodes, but we never want to associate two different parts\n        // to the same index. They must have a constant node between.\n        let lastPartIndex = 0;\n        let index = -1;\n        let partIndex = 0;\n        const { strings, values: { length } } = result;\n        while (partIndex < length) {\n            const node = walker.nextNode();\n            if (node === null) {\n                // We've exhausted the content inside a nested template element.\n                // Because we still have parts (the outer for-loop), we know:\n                // - There is a template in the stack\n                // - The walker will find a nextNode outside the template\n                walker.currentNode = stack.pop();\n                continue;\n            }\n            index++;\n            if (node.nodeType === 1 /* Node.ELEMENT_NODE */) {\n                if (node.hasAttributes()) {\n                    const attributes = node.attributes;\n                    const { length } = attributes;\n                    // Per\n                    // https://developer.mozilla.org/en-US/docs/Web/API/NamedNodeMap,\n                    // attributes are not guaranteed to be returned in document order.\n                    // In particular, Edge/IE can return them out of order, so we cannot\n                    // assume a correspondence between part index and attribute index.\n                    let count = 0;\n                    for (let i = 0; i < length; i++) {\n                        if (endsWith(attributes[i].name, boundAttributeSuffix)) {\n                            count++;\n                        }\n                    }\n                    while (count-- > 0) {\n                        // Get the template literal section leading up to the first\n                        // expression in this attribute\n                        const stringForPart = strings[partIndex];\n                        // Find the attribute name\n                        const name = lastAttributeNameRegex.exec(stringForPart)[2];\n                        // Find the corresponding attribute\n                        // All bound attributes have had a suffix added in\n                        // TemplateResult#getHTML to opt out of special attribute\n                        // handling. To look up the attribute value we also need to add\n                        // the suffix.\n                        const attributeLookupName = name.toLowerCase() + boundAttributeSuffix;\n                        const attributeValue = node.getAttribute(attributeLookupName);\n                        node.removeAttribute(attributeLookupName);\n                        const statics = attributeValue.split(markerRegex);\n                        this.parts.push({ type: 'attribute', index, name, strings: statics });\n                        partIndex += statics.length - 1;\n                    }\n                }\n                if (node.tagName === 'TEMPLATE') {\n                    stack.push(node);\n                    walker.currentNode = node.content;\n                }\n            }\n            else if (node.nodeType === 3 /* Node.TEXT_NODE */) {\n                const data = node.data;\n                if (data.indexOf(marker) >= 0) {\n                    const parent = node.parentNode;\n                    const strings = data.split(markerRegex);\n                    const lastIndex = strings.length - 1;\n                    // Generate a new text node for each literal section\n                    // These nodes are also used as the markers for node parts\n                    for (let i = 0; i < lastIndex; i++) {\n                        let insert;\n                        let s = strings[i];\n                        if (s === '') {\n                            insert = createMarker();\n                        }\n                        else {\n                            const match = lastAttributeNameRegex.exec(s);\n                            if (match !== null && endsWith(match[2], boundAttributeSuffix)) {\n                                s = s.slice(0, match.index) + match[1] +\n                                    match[2].slice(0, -boundAttributeSuffix.length) + match[3];\n                            }\n                            insert = document.createTextNode(s);\n                        }\n                        parent.insertBefore(insert, node);\n                        this.parts.push({ type: 'node', index: ++index });\n                    }\n                    // If there's no text, we must insert a comment to mark our place.\n                    // Else, we can trust it will stick around after cloning.\n                    if (strings[lastIndex] === '') {\n                        parent.insertBefore(createMarker(), node);\n                        nodesToRemove.push(node);\n                    }\n                    else {\n                        node.data = strings[lastIndex];\n                    }\n                    // We have a part for each match found\n                    partIndex += lastIndex;\n                }\n            }\n            else if (node.nodeType === 8 /* Node.COMMENT_NODE */) {\n                if (node.data === marker) {\n                    const parent = node.parentNode;\n                    // Add a new marker node to be the startNode of the Part if any of\n                    // the following are true:\n                    //  * We don't have a previousSibling\n                    //  * The previousSibling is already the start of a previous part\n                    if (node.previousSibling === null || index === lastPartIndex) {\n                        index++;\n                        parent.insertBefore(createMarker(), node);\n                    }\n                    lastPartIndex = index;\n                    this.parts.push({ type: 'node', index });\n                    // If we don't have a nextSibling, keep this node so we have an end.\n                    // Else, we can remove it to save future costs.\n                    if (node.nextSibling === null) {\n                        node.data = '';\n                    }\n                    else {\n                        nodesToRemove.push(node);\n                        index--;\n                    }\n                    partIndex++;\n                }\n                else {\n                    let i = -1;\n                    while ((i = node.data.indexOf(marker, i + 1)) !== -1) {\n                        // Comment node has a binding marker inside, make an inactive part\n                        // The binding won't work, but subsequent bindings will\n                        // TODO (justinfagnani): consider whether it's even worth it to\n                        // make bindings in comments work\n                        this.parts.push({ type: 'node', index: -1 });\n                        partIndex++;\n                    }\n                }\n            }\n        }\n        // Remove text binding nodes after the walk to not disturb the TreeWalker\n        for (const n of nodesToRemove) {\n            n.parentNode.removeChild(n);\n        }\n    }\n}\nconst endsWith = (str, suffix) => {\n    const index = str.length - suffix.length;\n    return index >= 0 && str.slice(index) === suffix;\n};\nexport const isTemplatePartActive = (part) => part.index !== -1;\n// Allows `document.createComment('')` to be renamed for a\n// small manual size-savings.\nexport const createMarker = () => document.createComment('');\n/**\n * This regex extracts the attribute name preceding an attribute-position\n * expression. It does this by matching the syntax allowed for attributes\n * against the string literal directly preceding the expression, assuming that\n * the expression is in an attribute-value position.\n *\n * See attributes in the HTML spec:\n * https://www.w3.org/TR/html5/syntax.html#elements-attributes\n *\n * \" \\x09\\x0a\\x0c\\x0d\" are HTML space characters:\n * https://www.w3.org/TR/html5/infrastructure.html#space-characters\n *\n * \"\\0-\\x1F\\x7F-\\x9F\" are Unicode control characters, which includes every\n * space character except \" \".\n *\n * So an attribute is:\n *  * The name: any character except a control character, space character, ('),\n *    (\"), \">\", \"=\", or \"/\"\n *  * Followed by zero or more space characters\n *  * Followed by \"=\"\n *  * Followed by zero or more space characters\n *  * Followed by:\n *    * Any character except space, ('), (\"), \"<\", \">\", \"=\", (`), or\n *    * (\") then any non-(\"), or\n *    * (') then any non-(')\n */\nexport const lastAttributeNameRegex = \n// eslint-disable-next-line no-control-regex\n/([ \\x09\\x0a\\x0c\\x0d])([^\\0-\\x1F\\x7F-\\x9F \"'>=/]+)([ \\x09\\x0a\\x0c\\x0d]*=[ \\x09\\x0a\\x0c\\x0d]*(?:[^ \\x09\\x0a\\x0c\\x0d\"'`<>=]*|\"[^\"]*|'[^']*))$/;\n//# sourceMappingURL=template.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nimport { isTemplatePartActive } from './template.js';\nconst walkerNodeFilter = 133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */;\n/**\n * Removes the list of nodes from a Template safely. In addition to removing\n * nodes from the Template, the Template part indices are updated to match\n * the mutated Template DOM.\n *\n * As the template is walked the removal state is tracked and\n * part indices are adjusted as needed.\n *\n * div\n *   div#1 (remove) <-- start removing (removing node is div#1)\n *     div\n *       div#2 (remove)  <-- continue removing (removing node is still div#1)\n *         div\n * div <-- stop removing since previous sibling is the removing node (div#1,\n * removed 4 nodes)\n */\nexport function removeNodesFromTemplate(template, nodesToRemove) {\n    const { element: { content }, parts } = template;\n    const walker = document.createTreeWalker(content, walkerNodeFilter, null, false);\n    let partIndex = nextActiveIndexInTemplateParts(parts);\n    let part = parts[partIndex];\n    let nodeIndex = -1;\n    let removeCount = 0;\n    const nodesToRemoveInTemplate = [];\n    let currentRemovingNode = null;\n    while (walker.nextNode()) {\n        nodeIndex++;\n        const node = walker.currentNode;\n        // End removal if stepped past the removing node\n        if (node.previousSibling === currentRemovingNode) {\n            currentRemovingNode = null;\n        }\n        // A node to remove was found in the template\n        if (nodesToRemove.has(node)) {\n            nodesToRemoveInTemplate.push(node);\n            // Track node we're removing\n            if (currentRemovingNode === null) {\n                currentRemovingNode = node;\n            }\n        }\n        // When removing, increment count by which to adjust subsequent part indices\n        if (currentRemovingNode !== null) {\n            removeCount++;\n        }\n        while (part !== undefined && part.index === nodeIndex) {\n            // If part is in a removed node deactivate it by setting index to -1 or\n            // adjust the index as needed.\n            part.index = currentRemovingNode !== null ? -1 : part.index - removeCount;\n            // go to the next active part.\n            partIndex = nextActiveIndexInTemplateParts(parts, partIndex);\n            part = parts[partIndex];\n        }\n    }\n    nodesToRemoveInTemplate.forEach((n) => n.parentNode.removeChild(n));\n}\nconst countNodes = (node) => {\n    let count = (node.nodeType === 11 /* Node.DOCUMENT_FRAGMENT_NODE */) ? 0 : 1;\n    const walker = document.createTreeWalker(node, walkerNodeFilter, null, false);\n    while (walker.nextNode()) {\n        count++;\n    }\n    return count;\n};\nconst nextActiveIndexInTemplateParts = (parts, startIndex = -1) => {\n    for (let i = startIndex + 1; i < parts.length; i++) {\n        const part = parts[i];\n        if (isTemplatePartActive(part)) {\n            return i;\n        }\n    }\n    return -1;\n};\n/**\n * Inserts the given node into the Template, optionally before the given\n * refNode. In addition to inserting the node into the Template, the Template\n * part indices are updated to match the mutated Template DOM.\n */\nexport function insertNodeIntoTemplate(template, node, refNode = null) {\n    const { element: { content }, parts } = template;\n    // If there's no refNode, then put node at end of template.\n    // No part indices need to be shifted in this case.\n    if (refNode === null || refNode === undefined) {\n        content.appendChild(node);\n        return;\n    }\n    const walker = document.createTreeWalker(content, walkerNodeFilter, null, false);\n    let partIndex = nextActiveIndexInTemplateParts(parts);\n    let insertCount = 0;\n    let walkerIndex = -1;\n    while (walker.nextNode()) {\n        walkerIndex++;\n        const walkerNode = walker.currentNode;\n        if (walkerNode === refNode) {\n            insertCount = countNodes(node);\n            refNode.parentNode.insertBefore(node, refNode);\n        }\n        while (partIndex !== -1 && parts[partIndex].index === walkerIndex) {\n            // If we've inserted the node, simply adjust all subsequent parts\n            if (insertCount > 0) {\n                while (partIndex !== -1) {\n                    parts[partIndex].index += insertCount;\n                    partIndex = nextActiveIndexInTemplateParts(parts, partIndex);\n                }\n                return;\n            }\n            partIndex = nextActiveIndexInTemplateParts(parts, partIndex);\n        }\n    }\n}\n//# sourceMappingURL=modify-template.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nconst directives = new WeakMap();\n/**\n * Brands a function as a directive factory function so that lit-html will call\n * the function during template rendering, rather than passing as a value.\n *\n * A _directive_ is a function that takes a Part as an argument. It has the\n * signature: `(part: Part) => void`.\n *\n * A directive _factory_ is a function that takes arguments for data and\n * configuration and returns a directive. Users of directive usually refer to\n * the directive factory as the directive. For example, \"The repeat directive\".\n *\n * Usually a template author will invoke a directive factory in their template\n * with relevant arguments, which will then return a directive function.\n *\n * Here's an example of using the `repeat()` directive factory that takes an\n * array and a function to render an item:\n *\n * ```js\n * html`<ul><${repeat(items, (item) => html`<li>${item}</li>`)}</ul>`\n * ```\n *\n * When `repeat` is invoked, it returns a directive function that closes over\n * `items` and the template function. When the outer template is rendered, the\n * return directive function is called with the Part for the expression.\n * `repeat` then performs it's custom logic to render multiple items.\n *\n * @param f The directive factory function. Must be a function that returns a\n * function of the signature `(part: Part) => void`. The returned function will\n * be called with the part object.\n *\n * @example\n *\n * import {directive, html} from 'lit-html';\n *\n * const immutable = directive((v) => (part) => {\n *   if (part.value !== v) {\n *     part.setValue(v)\n *   }\n * });\n */\nexport const directive = (f) => ((...args) => {\n    const d = f(...args);\n    directives.set(d, true);\n    return d;\n});\nexport const isDirective = (o) => {\n    return typeof o === 'function' && directives.has(o);\n};\n//# sourceMappingURL=directive.js.map","/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * A sentinel value that signals that a value was handled by a directive and\n * should not be written to the DOM.\n */\nexport const noChange = {};\n/**\n * A sentinel value that signals a NodePart to fully clear its content.\n */\nexport const nothing = {};\n//# sourceMappingURL=part.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nimport { isCEPolyfill } from './dom.js';\nimport { isTemplatePartActive } from './template.js';\n/**\n * An instance of a `Template` that can be attached to the DOM and updated\n * with new values.\n */\nexport class TemplateInstance {\n    constructor(template, processor, options) {\n        this.__parts = [];\n        this.template = template;\n        this.processor = processor;\n        this.options = options;\n    }\n    update(values) {\n        let i = 0;\n        for (const part of this.__parts) {\n            if (part !== undefined) {\n                part.setValue(values[i]);\n            }\n            i++;\n        }\n        for (const part of this.__parts) {\n            if (part !== undefined) {\n                part.commit();\n            }\n        }\n    }\n    _clone() {\n        // There are a number of steps in the lifecycle of a template instance's\n        // DOM fragment:\n        //  1. Clone - create the instance fragment\n        //  2. Adopt - adopt into the main document\n        //  3. Process - find part markers and create parts\n        //  4. Upgrade - upgrade custom elements\n        //  5. Update - set node, attribute, property, etc., values\n        //  6. Connect - connect to the document. Optional and outside of this\n        //     method.\n        //\n        // We have a few constraints on the ordering of these steps:\n        //  * We need to upgrade before updating, so that property values will pass\n        //    through any property setters.\n        //  * We would like to process before upgrading so that we're sure that the\n        //    cloned fragment is inert and not disturbed by self-modifying DOM.\n        //  * We want custom elements to upgrade even in disconnected fragments.\n        //\n        // Given these constraints, with full custom elements support we would\n        // prefer the order: Clone, Process, Adopt, Upgrade, Update, Connect\n        //\n        // But Safari does not implement CustomElementRegistry#upgrade, so we\n        // can not implement that order and still have upgrade-before-update and\n        // upgrade disconnected fragments. So we instead sacrifice the\n        // process-before-upgrade constraint, since in Custom Elements v1 elements\n        // must not modify their light DOM in the constructor. We still have issues\n        // when co-existing with CEv0 elements like Polymer 1, and with polyfills\n        // that don't strictly adhere to the no-modification rule because shadow\n        // DOM, which may be created in the constructor, is emulated by being placed\n        // in the light DOM.\n        //\n        // The resulting order is on native is: Clone, Adopt, Upgrade, Process,\n        // Update, Connect. document.importNode() performs Clone, Adopt, and Upgrade\n        // in one step.\n        //\n        // The Custom Elements v1 polyfill supports upgrade(), so the order when\n        // polyfilled is the more ideal: Clone, Process, Adopt, Upgrade, Update,\n        // Connect.\n        const fragment = isCEPolyfill ?\n            this.template.element.content.cloneNode(true) :\n            document.importNode(this.template.element.content, true);\n        const stack = [];\n        const parts = this.template.parts;\n        // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be null\n        const walker = document.createTreeWalker(fragment, 133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */, null, false);\n        let partIndex = 0;\n        let nodeIndex = 0;\n        let part;\n        let node = walker.nextNode();\n        // Loop through all the nodes and parts of a template\n        while (partIndex < parts.length) {\n            part = parts[partIndex];\n            if (!isTemplatePartActive(part)) {\n                this.__parts.push(undefined);\n                partIndex++;\n                continue;\n            }\n            // Progress the tree walker until we find our next part's node.\n            // Note that multiple parts may share the same node (attribute parts\n            // on a single element), so this loop may not run at all.\n            while (nodeIndex < part.index) {\n                nodeIndex++;\n                if (node.nodeName === 'TEMPLATE') {\n                    stack.push(node);\n                    walker.currentNode = node.content;\n                }\n                if ((node = walker.nextNode()) === null) {\n                    // We've exhausted the content inside a nested template element.\n                    // Because we still have parts (the outer for-loop), we know:\n                    // - There is a template in the stack\n                    // - The walker will find a nextNode outside the template\n                    walker.currentNode = stack.pop();\n                    node = walker.nextNode();\n                }\n            }\n            // We've arrived at our part's node.\n            if (part.type === 'node') {\n                const part = this.processor.handleTextExpression(this.options);\n                part.insertAfterNode(node.previousSibling);\n                this.__parts.push(part);\n            }\n            else {\n                this.__parts.push(...this.processor.handleAttributeExpressions(node, part.name, part.strings, this.options));\n            }\n            partIndex++;\n        }\n        if (isCEPolyfill) {\n            document.adoptNode(fragment);\n            customElements.upgrade(fragment);\n        }\n        return fragment;\n    }\n}\n//# sourceMappingURL=template-instance.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * @module lit-html\n */\nimport { reparentNodes } from './dom.js';\nimport { boundAttributeSuffix, lastAttributeNameRegex, marker, nodeMarker } from './template.js';\n/**\n * Our TrustedTypePolicy for HTML which is declared using the html template\n * tag function.\n *\n * That HTML is a developer-authored constant, and is parsed with innerHTML\n * before any untrusted expressions have been mixed in. Therefor it is\n * considered safe by construction.\n */\nconst policy = window.trustedTypes &&\n    trustedTypes.createPolicy('lit-html', { createHTML: (s) => s });\nconst commentMarker = ` ${marker} `;\n/**\n * The return type of `html`, which holds a Template and the values from\n * interpolated expressions.\n */\nexport class TemplateResult {\n    constructor(strings, values, type, processor) {\n        this.strings = strings;\n        this.values = values;\n        this.type = type;\n        this.processor = processor;\n    }\n    /**\n     * Returns a string of HTML used to create a `<template>` element.\n     */\n    getHTML() {\n        const l = this.strings.length - 1;\n        let html = '';\n        let isCommentBinding = false;\n        for (let i = 0; i < l; i++) {\n            const s = this.strings[i];\n            // For each binding we want to determine the kind of marker to insert\n            // into the template source before it's parsed by the browser's HTML\n            // parser. The marker type is based on whether the expression is in an\n            // attribute, text, or comment position.\n            //   * For node-position bindings we insert a comment with the marker\n            //     sentinel as its text content, like <!--{{lit-guid}}-->.\n            //   * For attribute bindings we insert just the marker sentinel for the\n            //     first binding, so that we support unquoted attribute bindings.\n            //     Subsequent bindings can use a comment marker because multi-binding\n            //     attributes must be quoted.\n            //   * For comment bindings we insert just the marker sentinel so we don't\n            //     close the comment.\n            //\n            // The following code scans the template source, but is *not* an HTML\n            // parser. We don't need to track the tree structure of the HTML, only\n            // whether a binding is inside a comment, and if not, if it appears to be\n            // the first binding in an attribute.\n            const commentOpen = s.lastIndexOf('<!--');\n            // We're in comment position if we have a comment open with no following\n            // comment close. Because <-- can appear in an attribute value there can\n            // be false positives.\n            isCommentBinding = (commentOpen > -1 || isCommentBinding) &&\n                s.indexOf('-->', commentOpen + 1) === -1;\n            // Check to see if we have an attribute-like sequence preceding the\n            // expression. This can match \"name=value\" like structures in text,\n            // comments, and attribute values, so there can be false-positives.\n            const attributeMatch = lastAttributeNameRegex.exec(s);\n            if (attributeMatch === null) {\n                // We're only in this branch if we don't have a attribute-like\n                // preceding sequence. For comments, this guards against unusual\n                // attribute values like <div foo=\"<!--${'bar'}\">. Cases like\n                // <!-- foo=${'bar'}--> are handled correctly in the attribute branch\n                // below.\n                html += s + (isCommentBinding ? commentMarker : nodeMarker);\n            }\n            else {\n                // For attributes we use just a marker sentinel, and also append a\n                // $lit$ suffix to the name to opt-out of attribute-specific parsing\n                // that IE and Edge do for style and certain SVG attributes.\n                html += s.substr(0, attributeMatch.index) + attributeMatch[1] +\n                    attributeMatch[2] + boundAttributeSuffix + attributeMatch[3] +\n                    marker;\n            }\n        }\n        html += this.strings[l];\n        return html;\n    }\n    getTemplateElement() {\n        const template = document.createElement('template');\n        let value = this.getHTML();\n        if (policy !== undefined) {\n            // this is secure because `this.strings` is a TemplateStringsArray.\n            // TODO: validate this when\n            // https://github.com/tc39/proposal-array-is-template-object is\n            // implemented.\n            value = policy.createHTML(value);\n        }\n        template.innerHTML = value;\n        return template;\n    }\n}\n/**\n * A TemplateResult for SVG fragments.\n *\n * This class wraps HTML in an `<svg>` tag in order to parse its contents in the\n * SVG namespace, then modifies the template to remove the `<svg>` tag so that\n * clones only container the original fragment.\n */\nexport class SVGTemplateResult extends TemplateResult {\n    getHTML() {\n        return `<svg>${super.getHTML()}</svg>`;\n    }\n    getTemplateElement() {\n        const template = super.getTemplateElement();\n        const content = template.content;\n        const svgElement = content.firstChild;\n        content.removeChild(svgElement);\n        reparentNodes(content, svgElement.firstChild);\n        return template;\n    }\n}\n//# sourceMappingURL=template-result.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nimport { isDirective } from './directive.js';\nimport { removeNodes } from './dom.js';\nimport { noChange, nothing } from './part.js';\nimport { TemplateInstance } from './template-instance.js';\nimport { TemplateResult } from './template-result.js';\nimport { createMarker } from './template.js';\nexport const isPrimitive = (value) => {\n    return (value === null ||\n        !(typeof value === 'object' || typeof value === 'function'));\n};\nexport const isIterable = (value) => {\n    return Array.isArray(value) ||\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        !!(value && value[Symbol.iterator]);\n};\n/**\n * Writes attribute values to the DOM for a group of AttributeParts bound to a\n * single attribute. The value is only set once even if there are multiple parts\n * for an attribute.\n */\nexport class AttributeCommitter {\n    constructor(element, name, strings) {\n        this.dirty = true;\n        this.element = element;\n        this.name = name;\n        this.strings = strings;\n        this.parts = [];\n        for (let i = 0; i < strings.length - 1; i++) {\n            this.parts[i] = this._createPart();\n        }\n    }\n    /**\n     * Creates a single part. Override this to create a differnt type of part.\n     */\n    _createPart() {\n        return new AttributePart(this);\n    }\n    _getValue() {\n        const strings = this.strings;\n        const l = strings.length - 1;\n        const parts = this.parts;\n        // If we're assigning an attribute via syntax like:\n        //    attr=\"${foo}\"  or  attr=${foo}\n        // but not\n        //    attr=\"${foo} ${bar}\" or attr=\"${foo} baz\"\n        // then we don't want to coerce the attribute value into one long\n        // string. Instead we want to just return the value itself directly,\n        // so that sanitizeDOMValue can get the actual value rather than\n        // String(value)\n        // The exception is if v is an array, in which case we do want to smash\n        // it together into a string without calling String() on the array.\n        //\n        // This also allows trusted values (when using TrustedTypes) being\n        // assigned to DOM sinks without being stringified in the process.\n        if (l === 1 && strings[0] === '' && strings[1] === '') {\n            const v = parts[0].value;\n            if (typeof v === 'symbol') {\n                return String(v);\n            }\n            if (typeof v === 'string' || !isIterable(v)) {\n                return v;\n            }\n        }\n        let text = '';\n        for (let i = 0; i < l; i++) {\n            text += strings[i];\n            const part = parts[i];\n            if (part !== undefined) {\n                const v = part.value;\n                if (isPrimitive(v) || !isIterable(v)) {\n                    text += typeof v === 'string' ? v : String(v);\n                }\n                else {\n                    for (const t of v) {\n                        text += typeof t === 'string' ? t : String(t);\n                    }\n                }\n            }\n        }\n        text += strings[l];\n        return text;\n    }\n    commit() {\n        if (this.dirty) {\n            this.dirty = false;\n            this.element.setAttribute(this.name, this._getValue());\n        }\n    }\n}\n/**\n * A Part that controls all or part of an attribute value.\n */\nexport class AttributePart {\n    constructor(committer) {\n        this.value = undefined;\n        this.committer = committer;\n    }\n    setValue(value) {\n        if (value !== noChange && (!isPrimitive(value) || value !== this.value)) {\n            this.value = value;\n            // If the value is a not a directive, dirty the committer so that it'll\n            // call setAttribute. If the value is a directive, it'll dirty the\n            // committer if it calls setValue().\n            if (!isDirective(value)) {\n                this.committer.dirty = true;\n            }\n        }\n    }\n    commit() {\n        while (isDirective(this.value)) {\n            const directive = this.value;\n            this.value = noChange;\n            directive(this);\n        }\n        if (this.value === noChange) {\n            return;\n        }\n        this.committer.commit();\n    }\n}\n/**\n * A Part that controls a location within a Node tree. Like a Range, NodePart\n * has start and end locations and can set and update the Nodes between those\n * locations.\n *\n * NodeParts support several value types: primitives, Nodes, TemplateResults,\n * as well as arrays and iterables of those types.\n */\nexport class NodePart {\n    constructor(options) {\n        this.value = undefined;\n        this.__pendingValue = undefined;\n        this.options = options;\n    }\n    /**\n     * Appends this part into a container.\n     *\n     * This part must be empty, as its contents are not automatically moved.\n     */\n    appendInto(container) {\n        this.startNode = container.appendChild(createMarker());\n        this.endNode = container.appendChild(createMarker());\n    }\n    /**\n     * Inserts this part after the `ref` node (between `ref` and `ref`'s next\n     * sibling). Both `ref` and its next sibling must be static, unchanging nodes\n     * such as those that appear in a literal section of a template.\n     *\n     * This part must be empty, as its contents are not automatically moved.\n     */\n    insertAfterNode(ref) {\n        this.startNode = ref;\n        this.endNode = ref.nextSibling;\n    }\n    /**\n     * Appends this part into a parent part.\n     *\n     * This part must be empty, as its contents are not automatically moved.\n     */\n    appendIntoPart(part) {\n        part.__insert(this.startNode = createMarker());\n        part.__insert(this.endNode = createMarker());\n    }\n    /**\n     * Inserts this part after the `ref` part.\n     *\n     * This part must be empty, as its contents are not automatically moved.\n     */\n    insertAfterPart(ref) {\n        ref.__insert(this.startNode = createMarker());\n        this.endNode = ref.endNode;\n        ref.endNode = this.startNode;\n    }\n    setValue(value) {\n        this.__pendingValue = value;\n    }\n    commit() {\n        if (this.startNode.parentNode === null) {\n            return;\n        }\n        while (isDirective(this.__pendingValue)) {\n            const directive = this.__pendingValue;\n            this.__pendingValue = noChange;\n            directive(this);\n        }\n        const value = this.__pendingValue;\n        if (value === noChange) {\n            return;\n        }\n        if (isPrimitive(value)) {\n            if (value !== this.value) {\n                this.__commitText(value);\n            }\n        }\n        else if (value instanceof TemplateResult) {\n            this.__commitTemplateResult(value);\n        }\n        else if (value instanceof Node) {\n            this.__commitNode(value);\n        }\n        else if (isIterable(value)) {\n            this.__commitIterable(value);\n        }\n        else if (value === nothing) {\n            this.value = nothing;\n            this.clear();\n        }\n        else {\n            // Fallback, will render the string representation\n            this.__commitText(value);\n        }\n    }\n    __insert(node) {\n        this.endNode.parentNode.insertBefore(node, this.endNode);\n    }\n    __commitNode(value) {\n        if (this.value === value) {\n            return;\n        }\n        this.clear();\n        this.__insert(value);\n        this.value = value;\n    }\n    __commitText(value) {\n        const node = this.startNode.nextSibling;\n        value = value == null ? '' : value;\n        // If `value` isn't already a string, we explicitly convert it here in case\n        // it can't be implicitly converted - i.e. it's a symbol.\n        const valueAsString = typeof value === 'string' ? value : String(value);\n        if (node === this.endNode.previousSibling &&\n            node.nodeType === 3 /* Node.TEXT_NODE */) {\n            // If we only have a single text node between the markers, we can just\n            // set its value, rather than replacing it.\n            // TODO(justinfagnani): Can we just check if this.value is primitive?\n            node.data = valueAsString;\n        }\n        else {\n            this.__commitNode(document.createTextNode(valueAsString));\n        }\n        this.value = value;\n    }\n    __commitTemplateResult(value) {\n        const template = this.options.templateFactory(value);\n        if (this.value instanceof TemplateInstance &&\n            this.value.template === template) {\n            this.value.update(value.values);\n        }\n        else {\n            // Make sure we propagate the template processor from the TemplateResult\n            // so that we use its syntax extension, etc. The template factory comes\n            // from the render function options so that it can control template\n            // caching and preprocessing.\n            const instance = new TemplateInstance(template, value.processor, this.options);\n            const fragment = instance._clone();\n            instance.update(value.values);\n            this.__commitNode(fragment);\n            this.value = instance;\n        }\n    }\n    __commitIterable(value) {\n        // For an Iterable, we create a new InstancePart per item, then set its\n        // value to the item. This is a little bit of overhead for every item in\n        // an Iterable, but it lets us recurse easily and efficiently update Arrays\n        // of TemplateResults that will be commonly returned from expressions like:\n        // array.map((i) => html`${i}`), by reusing existing TemplateInstances.\n        // If _value is an array, then the previous render was of an\n        // iterable and _value will contain the NodeParts from the previous\n        // render. If _value is not an array, clear this part and make a new\n        // array for NodeParts.\n        if (!Array.isArray(this.value)) {\n            this.value = [];\n            this.clear();\n        }\n        // Lets us keep track of how many items we stamped so we can clear leftover\n        // items from a previous render\n        const itemParts = this.value;\n        let partIndex = 0;\n        let itemPart;\n        for (const item of value) {\n            // Try to reuse an existing part\n            itemPart = itemParts[partIndex];\n            // If no existing part, create a new one\n            if (itemPart === undefined) {\n                itemPart = new NodePart(this.options);\n                itemParts.push(itemPart);\n                if (partIndex === 0) {\n                    itemPart.appendIntoPart(this);\n                }\n                else {\n                    itemPart.insertAfterPart(itemParts[partIndex - 1]);\n                }\n            }\n            itemPart.setValue(item);\n            itemPart.commit();\n            partIndex++;\n        }\n        if (partIndex < itemParts.length) {\n            // Truncate the parts array so _value reflects the current state\n            itemParts.length = partIndex;\n            this.clear(itemPart && itemPart.endNode);\n        }\n    }\n    clear(startNode = this.startNode) {\n        removeNodes(this.startNode.parentNode, startNode.nextSibling, this.endNode);\n    }\n}\n/**\n * Implements a boolean attribute, roughly as defined in the HTML\n * specification.\n *\n * If the value is truthy, then the attribute is present with a value of\n * ''. If the value is falsey, the attribute is removed.\n */\nexport class BooleanAttributePart {\n    constructor(element, name, strings) {\n        this.value = undefined;\n        this.__pendingValue = undefined;\n        if (strings.length !== 2 || strings[0] !== '' || strings[1] !== '') {\n            throw new Error('Boolean attributes can only contain a single expression');\n        }\n        this.element = element;\n        this.name = name;\n        this.strings = strings;\n    }\n    setValue(value) {\n        this.__pendingValue = value;\n    }\n    commit() {\n        while (isDirective(this.__pendingValue)) {\n            const directive = this.__pendingValue;\n            this.__pendingValue = noChange;\n            directive(this);\n        }\n        if (this.__pendingValue === noChange) {\n            return;\n        }\n        const value = !!this.__pendingValue;\n        if (this.value !== value) {\n            if (value) {\n                this.element.setAttribute(this.name, '');\n            }\n            else {\n                this.element.removeAttribute(this.name);\n            }\n            this.value = value;\n        }\n        this.__pendingValue = noChange;\n    }\n}\n/**\n * Sets attribute values for PropertyParts, so that the value is only set once\n * even if there are multiple parts for a property.\n *\n * If an expression controls the whole property value, then the value is simply\n * assigned to the property under control. If there are string literals or\n * multiple expressions, then the strings are expressions are interpolated into\n * a string first.\n */\nexport class PropertyCommitter extends AttributeCommitter {\n    constructor(element, name, strings) {\n        super(element, name, strings);\n        this.single =\n            (strings.length === 2 && strings[0] === '' && strings[1] === '');\n    }\n    _createPart() {\n        return new PropertyPart(this);\n    }\n    _getValue() {\n        if (this.single) {\n            return this.parts[0].value;\n        }\n        return super._getValue();\n    }\n    commit() {\n        if (this.dirty) {\n            this.dirty = false;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.element[this.name] = this._getValue();\n        }\n    }\n}\nexport class PropertyPart extends AttributePart {\n}\n// Detect event listener options support. If the `capture` property is read\n// from the options object, then options are supported. If not, then the third\n// argument to add/removeEventListener is interpreted as the boolean capture\n// value so we should only pass the `capture` property.\nlet eventOptionsSupported = false;\n// Wrap into an IIFE because MS Edge <= v41 does not support having try/catch\n// blocks right into the body of a module\n(() => {\n    try {\n        const options = {\n            get capture() {\n                eventOptionsSupported = true;\n                return false;\n            }\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        window.addEventListener('test', options, options);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        window.removeEventListener('test', options, options);\n    }\n    catch (_e) {\n        // event options not supported\n    }\n})();\nexport class EventPart {\n    constructor(element, eventName, eventContext) {\n        this.value = undefined;\n        this.__pendingValue = undefined;\n        this.element = element;\n        this.eventName = eventName;\n        this.eventContext = eventContext;\n        this.__boundHandleEvent = (e) => this.handleEvent(e);\n    }\n    setValue(value) {\n        this.__pendingValue = value;\n    }\n    commit() {\n        while (isDirective(this.__pendingValue)) {\n            const directive = this.__pendingValue;\n            this.__pendingValue = noChange;\n            directive(this);\n        }\n        if (this.__pendingValue === noChange) {\n            return;\n        }\n        const newListener = this.__pendingValue;\n        const oldListener = this.value;\n        const shouldRemoveListener = newListener == null ||\n            oldListener != null &&\n                (newListener.capture !== oldListener.capture ||\n                    newListener.once !== oldListener.once ||\n                    newListener.passive !== oldListener.passive);\n        const shouldAddListener = newListener != null && (oldListener == null || shouldRemoveListener);\n        if (shouldRemoveListener) {\n            this.element.removeEventListener(this.eventName, this.__boundHandleEvent, this.__options);\n        }\n        if (shouldAddListener) {\n            this.__options = getOptions(newListener);\n            this.element.addEventListener(this.eventName, this.__boundHandleEvent, this.__options);\n        }\n        this.value = newListener;\n        this.__pendingValue = noChange;\n    }\n    handleEvent(event) {\n        if (typeof this.value === 'function') {\n            this.value.call(this.eventContext || this.element, event);\n        }\n        else {\n            this.value.handleEvent(event);\n        }\n    }\n}\n// We copy options because of the inconsistent behavior of browsers when reading\n// the third argument of add/removeEventListener. IE11 doesn't support options\n// at all. Chrome 41 only reads `capture` if the argument is an object.\nconst getOptions = (o) => o &&\n    (eventOptionsSupported ?\n        { capture: o.capture, passive: o.passive, once: o.once } :\n        o.capture);\n//# sourceMappingURL=parts.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nimport { marker, Template } from './template.js';\n/**\n * The default TemplateFactory which caches Templates keyed on\n * result.type and result.strings.\n */\nexport function templateFactory(result) {\n    let templateCache = templateCaches.get(result.type);\n    if (templateCache === undefined) {\n        templateCache = {\n            stringsArray: new WeakMap(),\n            keyString: new Map()\n        };\n        templateCaches.set(result.type, templateCache);\n    }\n    let template = templateCache.stringsArray.get(result.strings);\n    if (template !== undefined) {\n        return template;\n    }\n    // If the TemplateStringsArray is new, generate a key from the strings\n    // This key is shared between all templates with identical content\n    const key = result.strings.join(marker);\n    // Check if we already have a Template for this key\n    template = templateCache.keyString.get(key);\n    if (template === undefined) {\n        // If we have not seen this key before, create a new Template\n        template = new Template(result, result.getTemplateElement());\n        // Cache the Template for this key\n        templateCache.keyString.set(key, template);\n    }\n    // Cache all future queries for this TemplateStringsArray\n    templateCache.stringsArray.set(result.strings, template);\n    return template;\n}\nexport const templateCaches = new Map();\n//# sourceMappingURL=template-factory.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nimport { removeNodes } from './dom.js';\nimport { NodePart } from './parts.js';\nimport { templateFactory } from './template-factory.js';\nexport const parts = new WeakMap();\n/**\n * Renders a template result or other value to a container.\n *\n * To update a container with new values, reevaluate the template literal and\n * call `render` with the new result.\n *\n * @param result Any value renderable by NodePart - typically a TemplateResult\n *     created by evaluating a template tag like `html` or `svg`.\n * @param container A DOM parent to render to. The entire contents are either\n *     replaced, or efficiently updated if the same result type was previous\n *     rendered there.\n * @param options RenderOptions for the entire render tree rendered to this\n *     container. Render options must *not* change between renders to the same\n *     container, as those changes will not effect previously rendered DOM.\n */\nexport const render = (result, container, options) => {\n    let part = parts.get(container);\n    if (part === undefined) {\n        removeNodes(container, container.firstChild);\n        parts.set(container, part = new NodePart(Object.assign({ templateFactory }, options)));\n        part.appendInto(container);\n    }\n    part.setValue(result);\n    part.commit();\n};\n//# sourceMappingURL=render.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nimport { AttributeCommitter, BooleanAttributePart, EventPart, NodePart, PropertyCommitter } from './parts.js';\n/**\n * Creates Parts when a template is instantiated.\n */\nexport class DefaultTemplateProcessor {\n    /**\n     * Create parts for an attribute-position binding, given the event, attribute\n     * name, and string literals.\n     *\n     * @param element The element containing the binding\n     * @param name  The attribute name\n     * @param strings The string literals. There are always at least two strings,\n     *   event for fully-controlled bindings with a single expression.\n     */\n    handleAttributeExpressions(element, name, strings, options) {\n        const prefix = name[0];\n        if (prefix === '.') {\n            const committer = new PropertyCommitter(element, name.slice(1), strings);\n            return committer.parts;\n        }\n        if (prefix === '@') {\n            return [new EventPart(element, name.slice(1), options.eventContext)];\n        }\n        if (prefix === '?') {\n            return [new BooleanAttributePart(element, name.slice(1), strings)];\n        }\n        const committer = new AttributeCommitter(element, name, strings);\n        return committer.parts;\n    }\n    /**\n     * Create parts for a text-position binding.\n     * @param templateFactory\n     */\n    handleTextExpression(options) {\n        return new NodePart(options);\n    }\n}\nexport const defaultTemplateProcessor = new DefaultTemplateProcessor();\n//# sourceMappingURL=default-template-processor.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n *\n * Main lit-html module.\n *\n * Main exports:\n *\n * -  [[html]]\n * -  [[svg]]\n * -  [[render]]\n *\n * @packageDocumentation\n */\n/**\n * Do not remove this comment; it keeps typedoc from misplacing the module\n * docs.\n */\nimport { defaultTemplateProcessor } from './lib/default-template-processor.js';\nimport { SVGTemplateResult, TemplateResult } from './lib/template-result.js';\nexport { DefaultTemplateProcessor, defaultTemplateProcessor } from './lib/default-template-processor.js';\nexport { directive, isDirective } from './lib/directive.js';\n// TODO(justinfagnani): remove line when we get NodePart moving methods\nexport { removeNodes, reparentNodes } from './lib/dom.js';\nexport { noChange, nothing } from './lib/part.js';\nexport { AttributeCommitter, AttributePart, BooleanAttributePart, EventPart, isIterable, isPrimitive, NodePart, PropertyCommitter, PropertyPart } from './lib/parts.js';\nexport { parts, render } from './lib/render.js';\nexport { templateCaches, templateFactory } from './lib/template-factory.js';\nexport { TemplateInstance } from './lib/template-instance.js';\nexport { SVGTemplateResult, TemplateResult } from './lib/template-result.js';\nexport { createMarker, isTemplatePartActive, Template } from './lib/template.js';\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for lit-html usage.\n// TODO(justinfagnani): inject version number at build time\nif (typeof window !== 'undefined') {\n    (window['litHtmlVersions'] || (window['litHtmlVersions'] = [])).push('1.3.0');\n}\n/**\n * Interprets a template literal as an HTML template that can efficiently\n * render to and update a container.\n */\nexport const html = (strings, ...values) => new TemplateResult(strings, values, 'html', defaultTemplateProcessor);\n/**\n * Interprets a template literal as an SVG template that can efficiently\n * render to and update a container.\n */\nexport const svg = (strings, ...values) => new SVGTemplateResult(strings, values, 'svg', defaultTemplateProcessor);\n//# sourceMappingURL=lit-html.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * Module to add shady DOM/shady CSS polyfill support to lit-html template\n * rendering. See the [[render]] method for details.\n *\n * @packageDocumentation\n */\n/**\n * Do not remove this comment; it keeps typedoc from misplacing the module\n * docs.\n */\nimport { removeNodes } from './dom.js';\nimport { insertNodeIntoTemplate, removeNodesFromTemplate } from './modify-template.js';\nimport { parts, render as litRender } from './render.js';\nimport { templateCaches } from './template-factory.js';\nimport { TemplateInstance } from './template-instance.js';\nimport { marker, Template } from './template.js';\nexport { html, svg, TemplateResult } from '../lit-html.js';\n// Get a key to lookup in `templateCaches`.\nconst getTemplateCacheKey = (type, scopeName) => `${type}--${scopeName}`;\nlet compatibleShadyCSSVersion = true;\nif (typeof window.ShadyCSS === 'undefined') {\n    compatibleShadyCSSVersion = false;\n}\nelse if (typeof window.ShadyCSS.prepareTemplateDom === 'undefined') {\n    console.warn(`Incompatible ShadyCSS version detected. ` +\n        `Please update to at least @webcomponents/webcomponentsjs@2.0.2 and ` +\n        `@webcomponents/shadycss@1.3.1.`);\n    compatibleShadyCSSVersion = false;\n}\n/**\n * Template factory which scopes template DOM using ShadyCSS.\n * @param scopeName {string}\n */\nexport const shadyTemplateFactory = (scopeName) => (result) => {\n    const cacheKey = getTemplateCacheKey(result.type, scopeName);\n    let templateCache = templateCaches.get(cacheKey);\n    if (templateCache === undefined) {\n        templateCache = {\n            stringsArray: new WeakMap(),\n            keyString: new Map()\n        };\n        templateCaches.set(cacheKey, templateCache);\n    }\n    let template = templateCache.stringsArray.get(result.strings);\n    if (template !== undefined) {\n        return template;\n    }\n    const key = result.strings.join(marker);\n    template = templateCache.keyString.get(key);\n    if (template === undefined) {\n        const element = result.getTemplateElement();\n        if (compatibleShadyCSSVersion) {\n            window.ShadyCSS.prepareTemplateDom(element, scopeName);\n        }\n        template = new Template(result, element);\n        templateCache.keyString.set(key, template);\n    }\n    templateCache.stringsArray.set(result.strings, template);\n    return template;\n};\nconst TEMPLATE_TYPES = ['html', 'svg'];\n/**\n * Removes all style elements from Templates for the given scopeName.\n */\nconst removeStylesFromLitTemplates = (scopeName) => {\n    TEMPLATE_TYPES.forEach((type) => {\n        const templates = templateCaches.get(getTemplateCacheKey(type, scopeName));\n        if (templates !== undefined) {\n            templates.keyString.forEach((template) => {\n                const { element: { content } } = template;\n                // IE 11 doesn't support the iterable param Set constructor\n                const styles = new Set();\n                Array.from(content.querySelectorAll('style')).forEach((s) => {\n                    styles.add(s);\n                });\n                removeNodesFromTemplate(template, styles);\n            });\n        }\n    });\n};\nconst shadyRenderSet = new Set();\n/**\n * For the given scope name, ensures that ShadyCSS style scoping is performed.\n * This is done just once per scope name so the fragment and template cannot\n * be modified.\n * (1) extracts styles from the rendered fragment and hands them to ShadyCSS\n * to be scoped and appended to the document\n * (2) removes style elements from all lit-html Templates for this scope name.\n *\n * Note, <style> elements can only be placed into templates for the\n * initial rendering of the scope. If <style> elements are included in templates\n * dynamically rendered to the scope (after the first scope render), they will\n * not be scoped and the <style> will be left in the template and rendered\n * output.\n */\nconst prepareTemplateStyles = (scopeName, renderedDOM, template) => {\n    shadyRenderSet.add(scopeName);\n    // If `renderedDOM` is stamped from a Template, then we need to edit that\n    // Template's underlying template element. Otherwise, we create one here\n    // to give to ShadyCSS, which still requires one while scoping.\n    const templateElement = !!template ? template.element : document.createElement('template');\n    // Move styles out of rendered DOM and store.\n    const styles = renderedDOM.querySelectorAll('style');\n    const { length } = styles;\n    // If there are no styles, skip unnecessary work\n    if (length === 0) {\n        // Ensure prepareTemplateStyles is called to support adding\n        // styles via `prepareAdoptedCssText` since that requires that\n        // `prepareTemplateStyles` is called.\n        //\n        // ShadyCSS will only update styles containing @apply in the template\n        // given to `prepareTemplateStyles`. If no lit Template was given,\n        // ShadyCSS will not be able to update uses of @apply in any relevant\n        // template. However, this is not a problem because we only create the\n        // template for the purpose of supporting `prepareAdoptedCssText`,\n        // which doesn't support @apply at all.\n        window.ShadyCSS.prepareTemplateStyles(templateElement, scopeName);\n        return;\n    }\n    const condensedStyle = document.createElement('style');\n    // Collect styles into a single style. This helps us make sure ShadyCSS\n    // manipulations will not prevent us from being able to fix up template\n    // part indices.\n    // NOTE: collecting styles is inefficient for browsers but ShadyCSS\n    // currently does this anyway. When it does not, this should be changed.\n    for (let i = 0; i < length; i++) {\n        const style = styles[i];\n        style.parentNode.removeChild(style);\n        condensedStyle.textContent += style.textContent;\n    }\n    // Remove styles from nested templates in this scope.\n    removeStylesFromLitTemplates(scopeName);\n    // And then put the condensed style into the \"root\" template passed in as\n    // `template`.\n    const content = templateElement.content;\n    if (!!template) {\n        insertNodeIntoTemplate(template, condensedStyle, content.firstChild);\n    }\n    else {\n        content.insertBefore(condensedStyle, content.firstChild);\n    }\n    // Note, it's important that ShadyCSS gets the template that `lit-html`\n    // will actually render so that it can update the style inside when\n    // needed (e.g. @apply native Shadow DOM case).\n    window.ShadyCSS.prepareTemplateStyles(templateElement, scopeName);\n    const style = content.querySelector('style');\n    if (window.ShadyCSS.nativeShadow && style !== null) {\n        // When in native Shadow DOM, ensure the style created by ShadyCSS is\n        // included in initially rendered output (`renderedDOM`).\n        renderedDOM.insertBefore(style.cloneNode(true), renderedDOM.firstChild);\n    }\n    else if (!!template) {\n        // When no style is left in the template, parts will be broken as a\n        // result. To fix this, we put back the style node ShadyCSS removed\n        // and then tell lit to remove that node from the template.\n        // There can be no style in the template in 2 cases (1) when Shady DOM\n        // is in use, ShadyCSS removes all styles, (2) when native Shadow DOM\n        // is in use ShadyCSS removes the style if it contains no content.\n        // NOTE, ShadyCSS creates its own style so we can safely add/remove\n        // `condensedStyle` here.\n        content.insertBefore(condensedStyle, content.firstChild);\n        const removes = new Set();\n        removes.add(condensedStyle);\n        removeNodesFromTemplate(template, removes);\n    }\n};\n/**\n * Extension to the standard `render` method which supports rendering\n * to ShadowRoots when the ShadyDOM (https://github.com/webcomponents/shadydom)\n * and ShadyCSS (https://github.com/webcomponents/shadycss) polyfills are used\n * or when the webcomponentsjs\n * (https://github.com/webcomponents/webcomponentsjs) polyfill is used.\n *\n * Adds a `scopeName` option which is used to scope element DOM and stylesheets\n * when native ShadowDOM is unavailable. The `scopeName` will be added to\n * the class attribute of all rendered DOM. In addition, any style elements will\n * be automatically re-written with this `scopeName` selector and moved out\n * of the rendered DOM and into the document `<head>`.\n *\n * It is common to use this render method in conjunction with a custom element\n * which renders a shadowRoot. When this is done, typically the element's\n * `localName` should be used as the `scopeName`.\n *\n * In addition to DOM scoping, ShadyCSS also supports a basic shim for css\n * custom properties (needed only on older browsers like IE11) and a shim for\n * a deprecated feature called `@apply` that supports applying a set of css\n * custom properties to a given location.\n *\n * Usage considerations:\n *\n * * Part values in `<style>` elements are only applied the first time a given\n * `scopeName` renders. Subsequent changes to parts in style elements will have\n * no effect. Because of this, parts in style elements should only be used for\n * values that will never change, for example parts that set scope-wide theme\n * values or parts which render shared style elements.\n *\n * * Note, due to a limitation of the ShadyDOM polyfill, rendering in a\n * custom element's `constructor` is not supported. Instead rendering should\n * either done asynchronously, for example at microtask timing (for example\n * `Promise.resolve()`), or be deferred until the first time the element's\n * `connectedCallback` runs.\n *\n * Usage considerations when using shimmed custom properties or `@apply`:\n *\n * * Whenever any dynamic changes are made which affect\n * css custom properties, `ShadyCSS.styleElement(element)` must be called\n * to update the element. There are two cases when this is needed:\n * (1) the element is connected to a new parent, (2) a class is added to the\n * element that causes it to match different custom properties.\n * To address the first case when rendering a custom element, `styleElement`\n * should be called in the element's `connectedCallback`.\n *\n * * Shimmed custom properties may only be defined either for an entire\n * shadowRoot (for example, in a `:host` rule) or via a rule that directly\n * matches an element with a shadowRoot. In other words, instead of flowing from\n * parent to child as do native css custom properties, shimmed custom properties\n * flow only from shadowRoots to nested shadowRoots.\n *\n * * When using `@apply` mixing css shorthand property names with\n * non-shorthand names (for example `border` and `border-width`) is not\n * supported.\n */\nexport const render = (result, container, options) => {\n    if (!options || typeof options !== 'object' || !options.scopeName) {\n        throw new Error('The `scopeName` option is required.');\n    }\n    const scopeName = options.scopeName;\n    const hasRendered = parts.has(container);\n    const needsScoping = compatibleShadyCSSVersion &&\n        container.nodeType === 11 /* Node.DOCUMENT_FRAGMENT_NODE */ &&\n        !!container.host;\n    // Handle first render to a scope specially...\n    const firstScopeRender = needsScoping && !shadyRenderSet.has(scopeName);\n    // On first scope render, render into a fragment; this cannot be a single\n    // fragment that is reused since nested renders can occur synchronously.\n    const renderContainer = firstScopeRender ? document.createDocumentFragment() : container;\n    litRender(result, renderContainer, Object.assign({ templateFactory: shadyTemplateFactory(scopeName) }, options));\n    // When performing first scope render,\n    // (1) We've rendered into a fragment so that there's a chance to\n    // `prepareTemplateStyles` before sub-elements hit the DOM\n    // (which might cause them to render based on a common pattern of\n    // rendering in a custom element's `connectedCallback`);\n    // (2) Scope the template with ShadyCSS one time only for this scope.\n    // (3) Render the fragment into the container and make sure the\n    // container knows its `part` is the one we just rendered. This ensures\n    // DOM will be re-used on subsequent renders.\n    if (firstScopeRender) {\n        const part = parts.get(renderContainer);\n        parts.delete(renderContainer);\n        // ShadyCSS might have style sheets (e.g. from `prepareAdoptedCssText`)\n        // that should apply to `renderContainer` even if the rendered value is\n        // not a TemplateInstance. However, it will only insert scoped styles\n        // into the document if `prepareTemplateStyles` has already been called\n        // for the given scope name.\n        const template = part.value instanceof TemplateInstance ?\n            part.value.template :\n            undefined;\n        prepareTemplateStyles(scopeName, renderContainer, template);\n        removeNodes(container, container.firstChild);\n        container.appendChild(renderContainer);\n        parts.set(container, part);\n    }\n    // After elements have hit the DOM, update styling if this is the\n    // initial render to this container.\n    // This is needed whenever dynamic changes are made so it would be\n    // safest to do every render; however, this would regress performance\n    // so we leave it up to the user to call `ShadyCSS.styleElement`\n    // for dynamic changes.\n    if (!hasRendered && needsScoping) {\n        window.ShadyCSS.styleElement(container.host);\n    }\n};\n//# sourceMappingURL=shady-render.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nvar _a;\n/**\n * Use this module if you want to create your own base class extending\n * [[UpdatingElement]].\n * @packageDocumentation\n */\n/*\n * When using Closure Compiler, JSCompiler_renameProperty(property, object) is\n * replaced at compile time by the munged name for object[property]. We cannot\n * alias this function, so we have to use a small shim that has the same\n * behavior when not compiling.\n */\nwindow.JSCompiler_renameProperty =\n    (prop, _obj) => prop;\nexport const defaultConverter = {\n    toAttribute(value, type) {\n        switch (type) {\n            case Boolean:\n                return value ? '' : null;\n            case Object:\n            case Array:\n                // if the value is `null` or `undefined` pass this through\n                // to allow removing/no change behavior.\n                return value == null ? value : JSON.stringify(value);\n        }\n        return value;\n    },\n    fromAttribute(value, type) {\n        switch (type) {\n            case Boolean:\n                return value !== null;\n            case Number:\n                return value === null ? null : Number(value);\n            case Object:\n            case Array:\n                return JSON.parse(value);\n        }\n        return value;\n    }\n};\n/**\n * Change function that returns true if `value` is different from `oldValue`.\n * This method is used as the default for a property's `hasChanged` function.\n */\nexport const notEqual = (value, old) => {\n    // This ensures (old==NaN, value==NaN) always returns false\n    return old !== value && (old === old || value === value);\n};\nconst defaultPropertyDeclaration = {\n    attribute: true,\n    type: String,\n    converter: defaultConverter,\n    reflect: false,\n    hasChanged: notEqual\n};\nconst STATE_HAS_UPDATED = 1;\nconst STATE_UPDATE_REQUESTED = 1 << 2;\nconst STATE_IS_REFLECTING_TO_ATTRIBUTE = 1 << 3;\nconst STATE_IS_REFLECTING_TO_PROPERTY = 1 << 4;\n/**\n * The Closure JS Compiler doesn't currently have good support for static\n * property semantics where \"this\" is dynamic (e.g.\n * https://github.com/google/closure-compiler/issues/3177 and others) so we use\n * this hack to bypass any rewriting by the compiler.\n */\nconst finalized = 'finalized';\n/**\n * Base element class which manages element properties and attributes. When\n * properties change, the `update` method is asynchronously called. This method\n * should be supplied by subclassers to render updates as desired.\n * @noInheritDoc\n */\nexport class UpdatingElement extends HTMLElement {\n    constructor() {\n        super();\n        this.initialize();\n    }\n    /**\n     * Returns a list of attributes corresponding to the registered properties.\n     * @nocollapse\n     */\n    static get observedAttributes() {\n        // note: piggy backing on this to ensure we're finalized.\n        this.finalize();\n        const attributes = [];\n        // Use forEach so this works even if for/of loops are compiled to for loops\n        // expecting arrays\n        this._classProperties.forEach((v, p) => {\n            const attr = this._attributeNameForProperty(p, v);\n            if (attr !== undefined) {\n                this._attributeToPropertyMap.set(attr, p);\n                attributes.push(attr);\n            }\n        });\n        return attributes;\n    }\n    /**\n     * Ensures the private `_classProperties` property metadata is created.\n     * In addition to `finalize` this is also called in `createProperty` to\n     * ensure the `@property` decorator can add property metadata.\n     */\n    /** @nocollapse */\n    static _ensureClassProperties() {\n        // ensure private storage for property declarations.\n        if (!this.hasOwnProperty(JSCompiler_renameProperty('_classProperties', this))) {\n            this._classProperties = new Map();\n            // NOTE: Workaround IE11 not supporting Map constructor argument.\n            const superProperties = Object.getPrototypeOf(this)._classProperties;\n            if (superProperties !== undefined) {\n                superProperties.forEach((v, k) => this._classProperties.set(k, v));\n            }\n        }\n    }\n    /**\n     * Creates a property accessor on the element prototype if one does not exist\n     * and stores a PropertyDeclaration for the property with the given options.\n     * The property setter calls the property's `hasChanged` property option\n     * or uses a strict identity check to determine whether or not to request\n     * an update.\n     *\n     * This method may be overridden to customize properties; however,\n     * when doing so, it's important to call `super.createProperty` to ensure\n     * the property is setup correctly. This method calls\n     * `getPropertyDescriptor` internally to get a descriptor to install.\n     * To customize what properties do when they are get or set, override\n     * `getPropertyDescriptor`. To customize the options for a property,\n     * implement `createProperty` like this:\n     *\n     * static createProperty(name, options) {\n     *   options = Object.assign(options, {myOption: true});\n     *   super.createProperty(name, options);\n     * }\n     *\n     * @nocollapse\n     */\n    static createProperty(name, options = defaultPropertyDeclaration) {\n        // Note, since this can be called by the `@property` decorator which\n        // is called before `finalize`, we ensure storage exists for property\n        // metadata.\n        this._ensureClassProperties();\n        this._classProperties.set(name, options);\n        // Do not generate an accessor if the prototype already has one, since\n        // it would be lost otherwise and that would never be the user's intention;\n        // Instead, we expect users to call `requestUpdate` themselves from\n        // user-defined accessors. Note that if the super has an accessor we will\n        // still overwrite it\n        if (options.noAccessor || this.prototype.hasOwnProperty(name)) {\n            return;\n        }\n        const key = typeof name === 'symbol' ? Symbol() : `__${name}`;\n        const descriptor = this.getPropertyDescriptor(name, key, options);\n        if (descriptor !== undefined) {\n            Object.defineProperty(this.prototype, name, descriptor);\n        }\n    }\n    /**\n     * Returns a property descriptor to be defined on the given named property.\n     * If no descriptor is returned, the property will not become an accessor.\n     * For example,\n     *\n     *   class MyElement extends LitElement {\n     *     static getPropertyDescriptor(name, key, options) {\n     *       const defaultDescriptor =\n     *           super.getPropertyDescriptor(name, key, options);\n     *       const setter = defaultDescriptor.set;\n     *       return {\n     *         get: defaultDescriptor.get,\n     *         set(value) {\n     *           setter.call(this, value);\n     *           // custom action.\n     *         },\n     *         configurable: true,\n     *         enumerable: true\n     *       }\n     *     }\n     *   }\n     *\n     * @nocollapse\n     */\n    static getPropertyDescriptor(name, key, options) {\n        return {\n            // tslint:disable-next-line:no-any no symbol in index\n            get() {\n                return this[key];\n            },\n            set(value) {\n                const oldValue = this[name];\n                this[key] = value;\n                this\n                    .requestUpdateInternal(name, oldValue, options);\n            },\n            configurable: true,\n            enumerable: true\n        };\n    }\n    /**\n     * Returns the property options associated with the given property.\n     * These options are defined with a PropertyDeclaration via the `properties`\n     * object or the `@property` decorator and are registered in\n     * `createProperty(...)`.\n     *\n     * Note, this method should be considered \"final\" and not overridden. To\n     * customize the options for a given property, override `createProperty`.\n     *\n     * @nocollapse\n     * @final\n     */\n    static getPropertyOptions(name) {\n        return this._classProperties && this._classProperties.get(name) ||\n            defaultPropertyDeclaration;\n    }\n    /**\n     * Creates property accessors for registered properties and ensures\n     * any superclasses are also finalized.\n     * @nocollapse\n     */\n    static finalize() {\n        // finalize any superclasses\n        const superCtor = Object.getPrototypeOf(this);\n        if (!superCtor.hasOwnProperty(finalized)) {\n            superCtor.finalize();\n        }\n        this[finalized] = true;\n        this._ensureClassProperties();\n        // initialize Map populated in observedAttributes\n        this._attributeToPropertyMap = new Map();\n        // make any properties\n        // Note, only process \"own\" properties since this element will inherit\n        // any properties defined on the superClass, and finalization ensures\n        // the entire prototype chain is finalized.\n        if (this.hasOwnProperty(JSCompiler_renameProperty('properties', this))) {\n            const props = this.properties;\n            // support symbols in properties (IE11 does not support this)\n            const propKeys = [\n                ...Object.getOwnPropertyNames(props),\n                ...(typeof Object.getOwnPropertySymbols === 'function') ?\n                    Object.getOwnPropertySymbols(props) :\n                    []\n            ];\n            // This for/of is ok because propKeys is an array\n            for (const p of propKeys) {\n                // note, use of `any` is due to TypeSript lack of support for symbol in\n                // index types\n                // tslint:disable-next-line:no-any no symbol in index\n                this.createProperty(p, props[p]);\n            }\n        }\n    }\n    /**\n     * Returns the property name for the given attribute `name`.\n     * @nocollapse\n     */\n    static _attributeNameForProperty(name, options) {\n        const attribute = options.attribute;\n        return attribute === false ?\n            undefined :\n            (typeof attribute === 'string' ?\n                attribute :\n                (typeof name === 'string' ? name.toLowerCase() : undefined));\n    }\n    /**\n     * Returns true if a property should request an update.\n     * Called when a property value is set and uses the `hasChanged`\n     * option for the property if present or a strict identity check.\n     * @nocollapse\n     */\n    static _valueHasChanged(value, old, hasChanged = notEqual) {\n        return hasChanged(value, old);\n    }\n    /**\n     * Returns the property value for the given attribute value.\n     * Called via the `attributeChangedCallback` and uses the property's\n     * `converter` or `converter.fromAttribute` property option.\n     * @nocollapse\n     */\n    static _propertyValueFromAttribute(value, options) {\n        const type = options.type;\n        const converter = options.converter || defaultConverter;\n        const fromAttribute = (typeof converter === 'function' ? converter : converter.fromAttribute);\n        return fromAttribute ? fromAttribute(value, type) : value;\n    }\n    /**\n     * Returns the attribute value for the given property value. If this\n     * returns undefined, the property will *not* be reflected to an attribute.\n     * If this returns null, the attribute will be removed, otherwise the\n     * attribute will be set to the value.\n     * This uses the property's `reflect` and `type.toAttribute` property options.\n     * @nocollapse\n     */\n    static _propertyValueToAttribute(value, options) {\n        if (options.reflect === undefined) {\n            return;\n        }\n        const type = options.type;\n        const converter = options.converter;\n        const toAttribute = converter && converter.toAttribute ||\n            defaultConverter.toAttribute;\n        return toAttribute(value, type);\n    }\n    /**\n     * Performs element initialization. By default captures any pre-set values for\n     * registered properties.\n     */\n    initialize() {\n        this._updateState = 0;\n        this._updatePromise =\n            new Promise((res) => this._enableUpdatingResolver = res);\n        this._changedProperties = new Map();\n        this._saveInstanceProperties();\n        // ensures first update will be caught by an early access of\n        // `updateComplete`\n        this.requestUpdateInternal();\n    }\n    /**\n     * Fixes any properties set on the instance before upgrade time.\n     * Otherwise these would shadow the accessor and break these properties.\n     * The properties are stored in a Map which is played back after the\n     * constructor runs. Note, on very old versions of Safari (<=9) or Chrome\n     * (<=41), properties created for native platform properties like (`id` or\n     * `name`) may not have default values set in the element constructor. On\n     * these browsers native properties appear on instances and therefore their\n     * default value will overwrite any element default (e.g. if the element sets\n     * this.id = 'id' in the constructor, the 'id' will become '' since this is\n     * the native platform default).\n     */\n    _saveInstanceProperties() {\n        // Use forEach so this works even if for/of loops are compiled to for loops\n        // expecting arrays\n        this.constructor\n            ._classProperties.forEach((_v, p) => {\n            if (this.hasOwnProperty(p)) {\n                const value = this[p];\n                delete this[p];\n                if (!this._instanceProperties) {\n                    this._instanceProperties = new Map();\n                }\n                this._instanceProperties.set(p, value);\n            }\n        });\n    }\n    /**\n     * Applies previously saved instance properties.\n     */\n    _applyInstanceProperties() {\n        // Use forEach so this works even if for/of loops are compiled to for loops\n        // expecting arrays\n        // tslint:disable-next-line:no-any\n        this._instanceProperties.forEach((v, p) => this[p] = v);\n        this._instanceProperties = undefined;\n    }\n    connectedCallback() {\n        // Ensure first connection completes an update. Updates cannot complete\n        // before connection.\n        this.enableUpdating();\n    }\n    enableUpdating() {\n        if (this._enableUpdatingResolver !== undefined) {\n            this._enableUpdatingResolver();\n            this._enableUpdatingResolver = undefined;\n        }\n    }\n    /**\n     * Allows for `super.disconnectedCallback()` in extensions while\n     * reserving the possibility of making non-breaking feature additions\n     * when disconnecting at some point in the future.\n     */\n    disconnectedCallback() {\n    }\n    /**\n     * Synchronizes property values when attributes change.\n     */\n    attributeChangedCallback(name, old, value) {\n        if (old !== value) {\n            this._attributeToProperty(name, value);\n        }\n    }\n    _propertyToAttribute(name, value, options = defaultPropertyDeclaration) {\n        const ctor = this.constructor;\n        const attr = ctor._attributeNameForProperty(name, options);\n        if (attr !== undefined) {\n            const attrValue = ctor._propertyValueToAttribute(value, options);\n            // an undefined value does not change the attribute.\n            if (attrValue === undefined) {\n                return;\n            }\n            // Track if the property is being reflected to avoid\n            // setting the property again via `attributeChangedCallback`. Note:\n            // 1. this takes advantage of the fact that the callback is synchronous.\n            // 2. will behave incorrectly if multiple attributes are in the reaction\n            // stack at time of calling. However, since we process attributes\n            // in `update` this should not be possible (or an extreme corner case\n            // that we'd like to discover).\n            // mark state reflecting\n            this._updateState = this._updateState | STATE_IS_REFLECTING_TO_ATTRIBUTE;\n            if (attrValue == null) {\n                this.removeAttribute(attr);\n            }\n            else {\n                this.setAttribute(attr, attrValue);\n            }\n            // mark state not reflecting\n            this._updateState = this._updateState & ~STATE_IS_REFLECTING_TO_ATTRIBUTE;\n        }\n    }\n    _attributeToProperty(name, value) {\n        // Use tracking info to avoid deserializing attribute value if it was\n        // just set from a property setter.\n        if (this._updateState & STATE_IS_REFLECTING_TO_ATTRIBUTE) {\n            return;\n        }\n        const ctor = this.constructor;\n        // Note, hint this as an `AttributeMap` so closure clearly understands\n        // the type; it has issues with tracking types through statics\n        // tslint:disable-next-line:no-unnecessary-type-assertion\n        const propName = ctor._attributeToPropertyMap.get(name);\n        if (propName !== undefined) {\n            const options = ctor.getPropertyOptions(propName);\n            // mark state reflecting\n            this._updateState = this._updateState | STATE_IS_REFLECTING_TO_PROPERTY;\n            this[propName] =\n                // tslint:disable-next-line:no-any\n                ctor._propertyValueFromAttribute(value, options);\n            // mark state not reflecting\n            this._updateState = this._updateState & ~STATE_IS_REFLECTING_TO_PROPERTY;\n        }\n    }\n    /**\n     * This protected version of `requestUpdate` does not access or return the\n     * `updateComplete` promise. This promise can be overridden and is therefore\n     * not free to access.\n     */\n    requestUpdateInternal(name, oldValue, options) {\n        let shouldRequestUpdate = true;\n        // If we have a property key, perform property update steps.\n        if (name !== undefined) {\n            const ctor = this.constructor;\n            options = options || ctor.getPropertyOptions(name);\n            if (ctor._valueHasChanged(this[name], oldValue, options.hasChanged)) {\n                if (!this._changedProperties.has(name)) {\n                    this._changedProperties.set(name, oldValue);\n                }\n                // Add to reflecting properties set.\n                // Note, it's important that every change has a chance to add the\n                // property to `_reflectingProperties`. This ensures setting\n                // attribute + property reflects correctly.\n                if (options.reflect === true &&\n                    !(this._updateState & STATE_IS_REFLECTING_TO_PROPERTY)) {\n                    if (this._reflectingProperties === undefined) {\n                        this._reflectingProperties = new Map();\n                    }\n                    this._reflectingProperties.set(name, options);\n                }\n            }\n            else {\n                // Abort the request if the property should not be considered changed.\n                shouldRequestUpdate = false;\n            }\n        }\n        if (!this._hasRequestedUpdate && shouldRequestUpdate) {\n            this._updatePromise = this._enqueueUpdate();\n        }\n    }\n    /**\n     * Requests an update which is processed asynchronously. This should\n     * be called when an element should update based on some state not triggered\n     * by setting a property. In this case, pass no arguments. It should also be\n     * called when manually implementing a property setter. In this case, pass the\n     * property `name` and `oldValue` to ensure that any configured property\n     * options are honored. Returns the `updateComplete` Promise which is resolved\n     * when the update completes.\n     *\n     * @param name {PropertyKey} (optional) name of requesting property\n     * @param oldValue {any} (optional) old value of requesting property\n     * @returns {Promise} A Promise that is resolved when the update completes.\n     */\n    requestUpdate(name, oldValue) {\n        this.requestUpdateInternal(name, oldValue);\n        return this.updateComplete;\n    }\n    /**\n     * Sets up the element to asynchronously update.\n     */\n    async _enqueueUpdate() {\n        this._updateState = this._updateState | STATE_UPDATE_REQUESTED;\n        try {\n            // Ensure any previous update has resolved before updating.\n            // This `await` also ensures that property changes are batched.\n            await this._updatePromise;\n        }\n        catch (e) {\n            // Ignore any previous errors. We only care that the previous cycle is\n            // done. Any error should have been handled in the previous update.\n        }\n        const result = this.performUpdate();\n        // If `performUpdate` returns a Promise, we await it. This is done to\n        // enable coordinating updates with a scheduler. Note, the result is\n        // checked to avoid delaying an additional microtask unless we need to.\n        if (result != null) {\n            await result;\n        }\n        return !this._hasRequestedUpdate;\n    }\n    get _hasRequestedUpdate() {\n        return (this._updateState & STATE_UPDATE_REQUESTED);\n    }\n    get hasUpdated() {\n        return (this._updateState & STATE_HAS_UPDATED);\n    }\n    /**\n     * Performs an element update. Note, if an exception is thrown during the\n     * update, `firstUpdated` and `updated` will not be called.\n     *\n     * You can override this method to change the timing of updates. If this\n     * method is overridden, `super.performUpdate()` must be called.\n     *\n     * For instance, to schedule updates to occur just before the next frame:\n     *\n     * ```\n     * protected async performUpdate(): Promise<unknown> {\n     *   await new Promise((resolve) => requestAnimationFrame(() => resolve()));\n     *   super.performUpdate();\n     * }\n     * ```\n     */\n    performUpdate() {\n        // Abort any update if one is not pending when this is called.\n        // This can happen if `performUpdate` is called early to \"flush\"\n        // the update.\n        if (!this._hasRequestedUpdate) {\n            return;\n        }\n        // Mixin instance properties once, if they exist.\n        if (this._instanceProperties) {\n            this._applyInstanceProperties();\n        }\n        let shouldUpdate = false;\n        const changedProperties = this._changedProperties;\n        try {\n            shouldUpdate = this.shouldUpdate(changedProperties);\n            if (shouldUpdate) {\n                this.update(changedProperties);\n            }\n            else {\n                this._markUpdated();\n            }\n        }\n        catch (e) {\n            // Prevent `firstUpdated` and `updated` from running when there's an\n            // update exception.\n            shouldUpdate = false;\n            // Ensure element can accept additional updates after an exception.\n            this._markUpdated();\n            throw e;\n        }\n        if (shouldUpdate) {\n            if (!(this._updateState & STATE_HAS_UPDATED)) {\n                this._updateState = this._updateState | STATE_HAS_UPDATED;\n                this.firstUpdated(changedProperties);\n            }\n            this.updated(changedProperties);\n        }\n    }\n    _markUpdated() {\n        this._changedProperties = new Map();\n        this._updateState = this._updateState & ~STATE_UPDATE_REQUESTED;\n    }\n    /**\n     * Returns a Promise that resolves when the element has completed updating.\n     * The Promise value is a boolean that is `true` if the element completed the\n     * update without triggering another update. The Promise result is `false` if\n     * a property was set inside `updated()`. If the Promise is rejected, an\n     * exception was thrown during the update.\n     *\n     * To await additional asynchronous work, override the `_getUpdateComplete`\n     * method. For example, it is sometimes useful to await a rendered element\n     * before fulfilling this Promise. To do this, first await\n     * `super._getUpdateComplete()`, then any subsequent state.\n     *\n     * @returns {Promise} The Promise returns a boolean that indicates if the\n     * update resolved without triggering another update.\n     */\n    get updateComplete() {\n        return this._getUpdateComplete();\n    }\n    /**\n     * Override point for the `updateComplete` promise.\n     *\n     * It is not safe to override the `updateComplete` getter directly due to a\n     * limitation in TypeScript which means it is not possible to call a\n     * superclass getter (e.g. `super.updateComplete.then(...)`) when the target\n     * language is ES5 (https://github.com/microsoft/TypeScript/issues/338).\n     * This method should be overridden instead. For example:\n     *\n     *   class MyElement extends LitElement {\n     *     async _getUpdateComplete() {\n     *       await super._getUpdateComplete();\n     *       await this._myChild.updateComplete;\n     *     }\n     *   }\n     */\n    _getUpdateComplete() {\n        return this._updatePromise;\n    }\n    /**\n     * Controls whether or not `update` should be called when the element requests\n     * an update. By default, this method always returns `true`, but this can be\n     * customized to control when to update.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n    shouldUpdate(_changedProperties) {\n        return true;\n    }\n    /**\n     * Updates the element. This method reflects property values to attributes.\n     * It can be overridden to render and keep updated element DOM.\n     * Setting properties inside this method will *not* trigger\n     * another update.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n    update(_changedProperties) {\n        if (this._reflectingProperties !== undefined &&\n            this._reflectingProperties.size > 0) {\n            // Use forEach so this works even if for/of loops are compiled to for\n            // loops expecting arrays\n            this._reflectingProperties.forEach((v, k) => this._propertyToAttribute(k, this[k], v));\n            this._reflectingProperties = undefined;\n        }\n        this._markUpdated();\n    }\n    /**\n     * Invoked whenever the element is updated. Implement to perform\n     * post-updating tasks via DOM APIs, for example, focusing an element.\n     *\n     * Setting properties inside this method will trigger the element to update\n     * again after this update cycle completes.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n    updated(_changedProperties) {\n    }\n    /**\n     * Invoked when the element is first updated. Implement to perform one time\n     * work on the element after update.\n     *\n     * Setting properties inside this method will trigger the element to update\n     * again after this update cycle completes.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n    firstUpdated(_changedProperties) {\n    }\n}\n_a = finalized;\n/**\n * Marks class as having finished creating properties.\n */\nUpdatingElement[_a] = true;\n//# sourceMappingURL=updating-element.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nconst legacyCustomElement = (tagName, clazz) => {\n    window.customElements.define(tagName, clazz);\n    // Cast as any because TS doesn't recognize the return type as being a\n    // subtype of the decorated class when clazz is typed as\n    // `Constructor<HTMLElement>` for some reason.\n    // `Constructor<HTMLElement>` is helpful to make sure the decorator is\n    // applied to elements however.\n    // tslint:disable-next-line:no-any\n    return clazz;\n};\nconst standardCustomElement = (tagName, descriptor) => {\n    const { kind, elements } = descriptor;\n    return {\n        kind,\n        elements,\n        // This callback is called once the class is otherwise fully defined\n        finisher(clazz) {\n            window.customElements.define(tagName, clazz);\n        }\n    };\n};\n/**\n * Class decorator factory that defines the decorated class as a custom element.\n *\n * ```\n * @customElement('my-element')\n * class MyElement {\n *   render() {\n *     return html``;\n *   }\n * }\n * ```\n * @category Decorator\n * @param tagName The name of the custom element to define.\n */\nexport const customElement = (tagName) => (classOrDescriptor) => (typeof classOrDescriptor === 'function') ?\n    legacyCustomElement(tagName, classOrDescriptor) :\n    standardCustomElement(tagName, classOrDescriptor);\nconst standardProperty = (options, element) => {\n    // When decorating an accessor, pass it through and add property metadata.\n    // Note, the `hasOwnProperty` check in `createProperty` ensures we don't\n    // stomp over the user's accessor.\n    if (element.kind === 'method' && element.descriptor &&\n        !('value' in element.descriptor)) {\n        return Object.assign(Object.assign({}, element), { finisher(clazz) {\n                clazz.createProperty(element.key, options);\n            } });\n    }\n    else {\n        // createProperty() takes care of defining the property, but we still\n        // must return some kind of descriptor, so return a descriptor for an\n        // unused prototype field. The finisher calls createProperty().\n        return {\n            kind: 'field',\n            key: Symbol(),\n            placement: 'own',\n            descriptor: {},\n            // When @babel/plugin-proposal-decorators implements initializers,\n            // do this instead of the initializer below. See:\n            // https://github.com/babel/babel/issues/9260 extras: [\n            //   {\n            //     kind: 'initializer',\n            //     placement: 'own',\n            //     initializer: descriptor.initializer,\n            //   }\n            // ],\n            initializer() {\n                if (typeof element.initializer === 'function') {\n                    this[element.key] = element.initializer.call(this);\n                }\n            },\n            finisher(clazz) {\n                clazz.createProperty(element.key, options);\n            }\n        };\n    }\n};\nconst legacyProperty = (options, proto, name) => {\n    proto.constructor\n        .createProperty(name, options);\n};\n/**\n * A property decorator which creates a LitElement property which reflects a\n * corresponding attribute value. A [[`PropertyDeclaration`]] may optionally be\n * supplied to configure property features.\n *\n * This decorator should only be used for public fields. Private or protected\n * fields should use the [[`internalProperty`]] decorator.\n *\n * @example\n * ```ts\n * class MyElement {\n *   @property({ type: Boolean })\n *   clicked = false;\n * }\n * ```\n * @category Decorator\n * @ExportDecoratedItems\n */\nexport function property(options) {\n    // tslint:disable-next-line:no-any decorator\n    return (protoOrDescriptor, name) => (name !== undefined) ?\n        legacyProperty(options, protoOrDescriptor, name) :\n        standardProperty(options, protoOrDescriptor);\n}\n/**\n * Declares a private or protected property that still triggers updates to the\n * element when it changes.\n *\n * Properties declared this way must not be used from HTML or HTML templating\n * systems, they're solely for properties internal to the element. These\n * properties may be renamed by optimization tools like closure compiler.\n * @category Decorator\n */\nexport function internalProperty(options) {\n    return property({ attribute: false, hasChanged: options === null || options === void 0 ? void 0 : options.hasChanged });\n}\n/**\n * A property decorator that converts a class property into a getter that\n * executes a querySelector on the element's renderRoot.\n *\n * @param selector A DOMString containing one or more selectors to match.\n * @param cache An optional boolean which when true performs the DOM query only\n * once and caches the result.\n *\n * See: https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector\n *\n * @example\n *\n * ```ts\n * class MyElement {\n *   @query('#first')\n *   first;\n *\n *   render() {\n *     return html`\n *       <div id=\"first\"></div>\n *       <div id=\"second\"></div>\n *     `;\n *   }\n * }\n * ```\n * @category Decorator\n */\nexport function query(selector, cache) {\n    return (protoOrDescriptor, \n    // tslint:disable-next-line:no-any decorator\n    name) => {\n        const descriptor = {\n            get() {\n                return this.renderRoot.querySelector(selector);\n            },\n            enumerable: true,\n            configurable: true,\n        };\n        if (cache) {\n            const key = typeof name === 'symbol' ? Symbol() : `__${name}`;\n            descriptor.get = function () {\n                if (this[key] === undefined) {\n                    (this[key] =\n                        this.renderRoot.querySelector(selector));\n                }\n                return this[key];\n            };\n        }\n        return (name !== undefined) ?\n            legacyQuery(descriptor, protoOrDescriptor, name) :\n            standardQuery(descriptor, protoOrDescriptor);\n    };\n}\n// Note, in the future, we may extend this decorator to support the use case\n// where the queried element may need to do work to become ready to interact\n// with (e.g. load some implementation code). If so, we might elect to\n// add a second argument defining a function that can be run to make the\n// queried element loaded/updated/ready.\n/**\n * A property decorator that converts a class property into a getter that\n * returns a promise that resolves to the result of a querySelector on the\n * element's renderRoot done after the element's `updateComplete` promise\n * resolves. When the queried property may change with element state, this\n * decorator can be used instead of requiring users to await the\n * `updateComplete` before accessing the property.\n *\n * @param selector A DOMString containing one or more selectors to match.\n *\n * See: https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector\n *\n * @example\n * ```ts\n * class MyElement {\n *   @queryAsync('#first')\n *   first;\n *\n *   render() {\n *     return html`\n *       <div id=\"first\"></div>\n *       <div id=\"second\"></div>\n *     `;\n *   }\n * }\n *\n * // external usage\n * async doSomethingWithFirst() {\n *  (await aMyElement.first).doSomething();\n * }\n * ```\n * @category Decorator\n */\nexport function queryAsync(selector) {\n    return (protoOrDescriptor, \n    // tslint:disable-next-line:no-any decorator\n    name) => {\n        const descriptor = {\n            async get() {\n                await this.updateComplete;\n                return this.renderRoot.querySelector(selector);\n            },\n            enumerable: true,\n            configurable: true,\n        };\n        return (name !== undefined) ?\n            legacyQuery(descriptor, protoOrDescriptor, name) :\n            standardQuery(descriptor, protoOrDescriptor);\n    };\n}\n/**\n * A property decorator that converts a class property into a getter\n * that executes a querySelectorAll on the element's renderRoot.\n *\n * @param selector A DOMString containing one or more selectors to match.\n *\n * See:\n * https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll\n *\n * @example\n * ```ts\n * class MyElement {\n *   @queryAll('div')\n *   divs;\n *\n *   render() {\n *     return html`\n *       <div id=\"first\"></div>\n *       <div id=\"second\"></div>\n *     `;\n *   }\n * }\n * ```\n * @category Decorator\n */\nexport function queryAll(selector) {\n    return (protoOrDescriptor, \n    // tslint:disable-next-line:no-any decorator\n    name) => {\n        const descriptor = {\n            get() {\n                return this.renderRoot.querySelectorAll(selector);\n            },\n            enumerable: true,\n            configurable: true,\n        };\n        return (name !== undefined) ?\n            legacyQuery(descriptor, protoOrDescriptor, name) :\n            standardQuery(descriptor, protoOrDescriptor);\n    };\n}\nconst legacyQuery = (descriptor, proto, name) => {\n    Object.defineProperty(proto, name, descriptor);\n};\nconst standardQuery = (descriptor, element) => ({\n    kind: 'method',\n    placement: 'prototype',\n    key: element.key,\n    descriptor,\n});\nconst standardEventOptions = (options, element) => {\n    return Object.assign(Object.assign({}, element), { finisher(clazz) {\n            Object.assign(clazz.prototype[element.key], options);\n        } });\n};\nconst legacyEventOptions = \n// tslint:disable-next-line:no-any legacy decorator\n(options, proto, name) => {\n    Object.assign(proto[name], options);\n};\n/**\n * Adds event listener options to a method used as an event listener in a\n * lit-html template.\n *\n * @param options An object that specifies event listener options as accepted by\n * `EventTarget#addEventListener` and `EventTarget#removeEventListener`.\n *\n * Current browsers support the `capture`, `passive`, and `once` options. See:\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Parameters\n *\n * @example\n * ```ts\n * class MyElement {\n *   clicked = false;\n *\n *   render() {\n *     return html`\n *       <div @click=${this._onClick}`>\n *         <button></button>\n *       </div>\n *     `;\n *   }\n *\n *   @eventOptions({capture: true})\n *   _onClick(e) {\n *     this.clicked = true;\n *   }\n * }\n * ```\n * @category Decorator\n */\nexport function eventOptions(options) {\n    // Return value typed as any to prevent TypeScript from complaining that\n    // standard decorator function signature does not match TypeScript decorator\n    // signature\n    // TODO(kschaaf): unclear why it was only failing on this decorator and not\n    // the others\n    return ((protoOrDescriptor, name) => (name !== undefined) ?\n        legacyEventOptions(options, protoOrDescriptor, name) :\n        standardEventOptions(options, protoOrDescriptor));\n}\n// x-browser support for matches\n// tslint:disable-next-line:no-any\nconst ElementProto = Element.prototype;\nconst legacyMatches = ElementProto.msMatchesSelector || ElementProto.webkitMatchesSelector;\n/**\n * A property decorator that converts a class property into a getter that\n * returns the `assignedNodes` of the given named `slot`. Note, the type of\n * this property should be annotated as `NodeListOf<HTMLElement>`.\n *\n * @param slotName A string name of the slot.\n * @param flatten A boolean which when true flattens the assigned nodes,\n * meaning any assigned nodes that are slot elements are replaced with their\n * assigned nodes.\n * @param selector A string which filters the results to elements that match\n * the given css selector.\n *\n * * @example\n * ```ts\n * class MyElement {\n *   @queryAssignedNodes('list', true, '.item')\n *   listItems;\n *\n *   render() {\n *     return html`\n *       <slot name=\"list\"></slot>\n *     `;\n *   }\n * }\n * ```\n * @category Decorator\n */\nexport function queryAssignedNodes(slotName = '', flatten = false, selector = '') {\n    return (protoOrDescriptor, \n    // tslint:disable-next-line:no-any decorator\n    name) => {\n        const descriptor = {\n            get() {\n                const slotSelector = `slot${slotName ? `[name=${slotName}]` : ':not([name])'}`;\n                const slot = this.renderRoot.querySelector(slotSelector);\n                let nodes = slot && slot.assignedNodes({ flatten });\n                if (nodes && selector) {\n                    nodes = nodes.filter((node) => node.nodeType === Node.ELEMENT_NODE &&\n                        node.matches ?\n                        node.matches(selector) :\n                        legacyMatches.call(node, selector));\n                }\n                return nodes;\n            },\n            enumerable: true,\n            configurable: true,\n        };\n        return (name !== undefined) ?\n            legacyQuery(descriptor, protoOrDescriptor, name) :\n            standardQuery(descriptor, protoOrDescriptor);\n    };\n}\n//# sourceMappingURL=decorators.js.map","/**\n@license\nCopyright (c) 2019 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\n/**\n * Whether the current browser supports `adoptedStyleSheets`.\n */\nexport const supportsAdoptingStyleSheets = (window.ShadowRoot) &&\n    (window.ShadyCSS === undefined || window.ShadyCSS.nativeShadow) &&\n    ('adoptedStyleSheets' in Document.prototype) &&\n    ('replace' in CSSStyleSheet.prototype);\nconst constructionToken = Symbol();\nexport class CSSResult {\n    constructor(cssText, safeToken) {\n        if (safeToken !== constructionToken) {\n            throw new Error('CSSResult is not constructable. Use `unsafeCSS` or `css` instead.');\n        }\n        this.cssText = cssText;\n    }\n    // Note, this is a getter so that it's lazy. In practice, this means\n    // stylesheets are not created until the first element instance is made.\n    get styleSheet() {\n        if (this._styleSheet === undefined) {\n            // Note, if `supportsAdoptingStyleSheets` is true then we assume\n            // CSSStyleSheet is constructable.\n            if (supportsAdoptingStyleSheets) {\n                this._styleSheet = new CSSStyleSheet();\n                this._styleSheet.replaceSync(this.cssText);\n            }\n            else {\n                this._styleSheet = null;\n            }\n        }\n        return this._styleSheet;\n    }\n    toString() {\n        return this.cssText;\n    }\n}\n/**\n * Wrap a value for interpolation in a [[`css`]] tagged template literal.\n *\n * This is unsafe because untrusted CSS text can be used to phone home\n * or exfiltrate data to an attacker controlled site. Take care to only use\n * this with trusted input.\n */\nexport const unsafeCSS = (value) => {\n    return new CSSResult(String(value), constructionToken);\n};\nconst textFromCSSResult = (value) => {\n    if (value instanceof CSSResult) {\n        return value.cssText;\n    }\n    else if (typeof value === 'number') {\n        return value;\n    }\n    else {\n        throw new Error(`Value passed to 'css' function must be a 'css' function result: ${value}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`);\n    }\n};\n/**\n * Template tag which which can be used with LitElement's [[LitElement.styles |\n * `styles`]] property to set element styles. For security reasons, only literal\n * string values may be used. To incorporate non-literal values [[`unsafeCSS`]]\n * may be used inside a template string part.\n */\nexport const css = (strings, ...values) => {\n    const cssText = values.reduce((acc, v, idx) => acc + textFromCSSResult(v) + strings[idx + 1], strings[0]);\n    return new CSSResult(cssText, constructionToken);\n};\n//# sourceMappingURL=css-tag.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * The main LitElement module, which defines the [[`LitElement`]] base class and\n * related APIs.\n *\n *  LitElement components can define a template and a set of observed\n * properties. Changing an observed property triggers a re-render of the\n * element.\n *\n *  Import [[`LitElement`]] and [[`html`]] from this module to create a\n * component:\n *\n *  ```js\n * import {LitElement, html} from 'lit-element';\n *\n * class MyElement extends LitElement {\n *\n *   // Declare observed properties\n *   static get properties() {\n *     return {\n *       adjective: {}\n *     }\n *   }\n *\n *   constructor() {\n *     this.adjective = 'awesome';\n *   }\n *\n *   // Define the element's template\n *   render() {\n *     return html`<p>your ${adjective} template here</p>`;\n *   }\n * }\n *\n * customElements.define('my-element', MyElement);\n * ```\n *\n * `LitElement` extends [[`UpdatingElement`]] and adds lit-html templating.\n * The `UpdatingElement` class is provided for users that want to build\n * their own custom element base classes that don't use lit-html.\n *\n * @packageDocumentation\n */\nimport { render } from 'lit-html/lib/shady-render.js';\nimport { UpdatingElement } from './lib/updating-element.js';\nexport * from './lib/updating-element.js';\nexport * from './lib/decorators.js';\nexport { html, svg, TemplateResult, SVGTemplateResult } from 'lit-html/lit-html.js';\nimport { supportsAdoptingStyleSheets, unsafeCSS } from './lib/css-tag.js';\nexport * from './lib/css-tag.js';\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for LitElement usage.\n// TODO(justinfagnani): inject version number at build time\n(window['litElementVersions'] || (window['litElementVersions'] = []))\n    .push('2.4.0');\n/**\n * Sentinal value used to avoid calling lit-html's render function when\n * subclasses do not implement `render`\n */\nconst renderNotImplemented = {};\n/**\n * Base element class that manages element properties and attributes, and\n * renders a lit-html template.\n *\n * To define a component, subclass `LitElement` and implement a\n * `render` method to provide the component's template. Define properties\n * using the [[`properties`]] property or the [[`property`]] decorator.\n */\nexport class LitElement extends UpdatingElement {\n    /**\n     * Return the array of styles to apply to the element.\n     * Override this method to integrate into a style management system.\n     *\n     * @nocollapse\n     */\n    static getStyles() {\n        return this.styles;\n    }\n    /** @nocollapse */\n    static _getUniqueStyles() {\n        // Only gather styles once per class\n        if (this.hasOwnProperty(JSCompiler_renameProperty('_styles', this))) {\n            return;\n        }\n        // Take care not to call `this.getStyles()` multiple times since this\n        // generates new CSSResults each time.\n        // TODO(sorvell): Since we do not cache CSSResults by input, any\n        // shared styles will generate new stylesheet objects, which is wasteful.\n        // This should be addressed when a browser ships constructable\n        // stylesheets.\n        const userStyles = this.getStyles();\n        if (Array.isArray(userStyles)) {\n            // De-duplicate styles preserving the _last_ instance in the set.\n            // This is a performance optimization to avoid duplicated styles that can\n            // occur especially when composing via subclassing.\n            // The last item is kept to try to preserve the cascade order with the\n            // assumption that it's most important that last added styles override\n            // previous styles.\n            const addStyles = (styles, set) => styles.reduceRight((set, s) => \n            // Note: On IE set.add() does not return the set\n            Array.isArray(s) ? addStyles(s, set) : (set.add(s), set), set);\n            // Array.from does not work on Set in IE, otherwise return\n            // Array.from(addStyles(userStyles, new Set<CSSResult>())).reverse()\n            const set = addStyles(userStyles, new Set());\n            const styles = [];\n            set.forEach((v) => styles.unshift(v));\n            this._styles = styles;\n        }\n        else {\n            this._styles = userStyles === undefined ? [] : [userStyles];\n        }\n        // Ensure that there are no invalid CSSStyleSheet instances here. They are\n        // invalid in two conditions.\n        // (1) the sheet is non-constructible (`sheet` of a HTMLStyleElement), but\n        //     this is impossible to check except via .replaceSync or use\n        // (2) the ShadyCSS polyfill is enabled (:. supportsAdoptingStyleSheets is\n        //     false)\n        this._styles = this._styles.map((s) => {\n            if (s instanceof CSSStyleSheet && !supportsAdoptingStyleSheets) {\n                // Flatten the cssText from the passed constructible stylesheet (or\n                // undetectable non-constructible stylesheet). The user might have\n                // expected to update their stylesheets over time, but the alternative\n                // is a crash.\n                const cssText = Array.prototype.slice.call(s.cssRules)\n                    .reduce((css, rule) => css + rule.cssText, '');\n                return unsafeCSS(cssText);\n            }\n            return s;\n        });\n    }\n    /**\n     * Performs element initialization. By default this calls\n     * [[`createRenderRoot`]] to create the element [[`renderRoot`]] node and\n     * captures any pre-set values for registered properties.\n     */\n    initialize() {\n        super.initialize();\n        this.constructor._getUniqueStyles();\n        this.renderRoot = this.createRenderRoot();\n        // Note, if renderRoot is not a shadowRoot, styles would/could apply to the\n        // element's getRootNode(). While this could be done, we're choosing not to\n        // support this now since it would require different logic around de-duping.\n        if (window.ShadowRoot && this.renderRoot instanceof window.ShadowRoot) {\n            this.adoptStyles();\n        }\n    }\n    /**\n     * Returns the node into which the element should render and by default\n     * creates and returns an open shadowRoot. Implement to customize where the\n     * element's DOM is rendered. For example, to render into the element's\n     * childNodes, return `this`.\n     * @returns {Element|DocumentFragment} Returns a node into which to render.\n     */\n    createRenderRoot() {\n        return this.attachShadow({ mode: 'open' });\n    }\n    /**\n     * Applies styling to the element shadowRoot using the [[`styles`]]\n     * property. Styling will apply using `shadowRoot.adoptedStyleSheets` where\n     * available and will fallback otherwise. When Shadow DOM is polyfilled,\n     * ShadyCSS scopes styles and adds them to the document. When Shadow DOM\n     * is available but `adoptedStyleSheets` is not, styles are appended to the\n     * end of the `shadowRoot` to [mimic spec\n     * behavior](https://wicg.github.io/construct-stylesheets/#using-constructed-stylesheets).\n     */\n    adoptStyles() {\n        const styles = this.constructor._styles;\n        if (styles.length === 0) {\n            return;\n        }\n        // There are three separate cases here based on Shadow DOM support.\n        // (1) shadowRoot polyfilled: use ShadyCSS\n        // (2) shadowRoot.adoptedStyleSheets available: use it\n        // (3) shadowRoot.adoptedStyleSheets polyfilled: append styles after\n        // rendering\n        if (window.ShadyCSS !== undefined && !window.ShadyCSS.nativeShadow) {\n            window.ShadyCSS.ScopingShim.prepareAdoptedCssText(styles.map((s) => s.cssText), this.localName);\n        }\n        else if (supportsAdoptingStyleSheets) {\n            this.renderRoot.adoptedStyleSheets =\n                styles.map((s) => s instanceof CSSStyleSheet ? s : s.styleSheet);\n        }\n        else {\n            // This must be done after rendering so the actual style insertion is done\n            // in `update`.\n            this._needsShimAdoptedStyleSheets = true;\n        }\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        // Note, first update/render handles styleElement so we only call this if\n        // connected after first update.\n        if (this.hasUpdated && window.ShadyCSS !== undefined) {\n            window.ShadyCSS.styleElement(this);\n        }\n    }\n    /**\n     * Updates the element. This method reflects property values to attributes\n     * and calls `render` to render DOM via lit-html. Setting properties inside\n     * this method will *not* trigger another update.\n     * @param _changedProperties Map of changed properties with old values\n     */\n    update(changedProperties) {\n        // Setting properties in `render` should not trigger an update. Since\n        // updates are allowed after super.update, it's important to call `render`\n        // before that.\n        const templateResult = this.render();\n        super.update(changedProperties);\n        // If render is not implemented by the component, don't call lit-html render\n        if (templateResult !== renderNotImplemented) {\n            this.constructor\n                .render(templateResult, this.renderRoot, { scopeName: this.localName, eventContext: this });\n        }\n        // When native Shadow DOM is used but adoptedStyles are not supported,\n        // insert styling after rendering to ensure adoptedStyles have highest\n        // priority.\n        if (this._needsShimAdoptedStyleSheets) {\n            this._needsShimAdoptedStyleSheets = false;\n            this.constructor._styles.forEach((s) => {\n                const style = document.createElement('style');\n                style.textContent = s.cssText;\n                this.renderRoot.appendChild(style);\n            });\n        }\n    }\n    /**\n     * Invoked on each update to perform rendering tasks. This method may return\n     * any value renderable by lit-html's `NodePart` - typically a\n     * `TemplateResult`. Setting properties inside this method will *not* trigger\n     * the element to update.\n     */\n    render() {\n        return renderNotImplemented;\n    }\n}\n/**\n * Ensure this class is marked as `finalized` as an optimization ensuring\n * it will not needlessly try to `finalize`.\n *\n * Note this property name is a string to prevent breaking Closure JS Compiler\n * optimizations. See updating-element.ts for more information.\n */\nLitElement['finalized'] = true;\n/**\n * Reference to the underlying library method used to render the element's\n * DOM. By default, points to the `render` method from lit-html's shady-render\n * module.\n *\n * **Most users will never need to touch this property.**\n *\n * This  property should not be confused with the `render` instance method,\n * which should be overridden to define a template for the element.\n *\n * Advanced users creating a new base class based on LitElement can override\n * this property to point to a custom render method with a signature that\n * matches [shady-render's `render`\n * method](https://lit-html.polymer-project.org/api/modules/shady_render.html#render).\n *\n * @nocollapse\n */\nLitElement.render = render;\n//# sourceMappingURL=lit-element.js.map","/**\n@license\nCopyright (c) 2018 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/**\n  This is a JavaScript mixin that you can use to connect a Custom Element base\n  class to a Redux store. The `stateChanged(state)` method will be called when\n  the state is updated.\n\n  Example:\n\n      import { connect } from 'pwa-helpers/connect-mixin.js';\n\n      class MyElement extends connect(store)(HTMLElement) {\n        stateChanged(state) {\n          this.textContent = state.data.count.toString();\n        }\n      }\n*/\nexport const connect = (store) => (baseElement) => class extends baseElement {\n    connectedCallback() {\n        if (super.connectedCallback) {\n            super.connectedCallback();\n        }\n        this._storeUnsubscribe = store.subscribe(() => this.stateChanged(store.getState()));\n        this.stateChanged(store.getState());\n    }\n    disconnectedCallback() {\n        this._storeUnsubscribe();\n        if (super.disconnectedCallback) {\n            super.disconnectedCallback();\n        }\n    }\n    /**\n     * The `stateChanged(state)` method will be called when the state is updated.\n     */\n    stateChanged(_state) { }\n};\n//# sourceMappingURL=connect-mixin.js.map","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","import $$observable from 'symbol-observable';\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error('It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error('You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    if (isDispatching) {\n      throw new Error('You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error('You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing what changed. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionDescription = actionType && \"action \\\"\" + String(actionType) + \"\\\"\" || 'an action';\n  return \"Given \" + actionDescription + \", reducer \\\"\" + key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\";\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle \" + ActionTypes.INIT + \" or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(\"bindActionCreators expected an object or a function, instead received \" + (actionCreators === null ? 'null' : typeof actionCreators) + \". \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    keys.push.apply(keys, Object.getOwnPropertySymbols(object));\n  }\n\n  if (enumerableOnly) keys = keys.filter(function (sym) {\n    return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n  });\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error('Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread2({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore };\n","export const appReducer = (state = {}, action: any): any => {\n  switch (action.type) {\n    default:\n      return state;\n  }\n};\n","import { Tipo } from '../../dispositivo/tipo';\n\nexport const TipoDispositivo: Record<string, Tipo> = {\n  agrupadorGenerico: {\n    tipo: 'DispositivoAgrupadorGenerico',\n    name: undefined,\n    tagId: 'dg',\n    descricao: undefined,\n    descricaoPlural: undefined,\n    tiposPermitidosPai: ['Articulacao', 'Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao'],\n    tiposPermitidosFilhos: ['Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: [''],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  alinea: {\n    tipo: 'Alinea',\n    name: 'Alinea',\n    tagId: 'ali',\n    descricao: 'Alnea',\n    descricaoPlural: 'Alneas',\n    tiposPermitidosPai: ['Inciso'],\n    tiposPermitidosFilhos: ['Item'],\n    tipoProvavelFilho: 'Item',\n    INDICADOR_SEQUENCIA: [';', '; e', '; ou'],\n    INDICADOR_FIM_SEQUENCIA: ['.'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  articulacao: {\n    tipo: 'Articulacao',\n    name: 'Articulacao',\n    tagId: '',\n    descricao: 'Articulao',\n    descricaoPlural: 'Articulaes',\n    tiposPermitidosPai: [],\n    tiposPermitidosFilhos: ['Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['.'],\n    INDICADOR_FIM_SEQUENCIA: ['NA'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  artigo: {\n    tipo: 'Artigo',\n    name: 'Artigo',\n    tagId: 'art',\n    descricao: 'Artigo',\n    descricaoPlural: 'Artigos',\n    tiposPermitidosPai: ['Articulacao', 'Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Subsecao'],\n    tiposPermitidosFilhos: ['Paragrafo', 'Inciso'],\n    tipoProvavelFilho: 'Inciso',\n    INDICADOR_SEQUENCIA: ['.'],\n    INDICADOR_FIM_SEQUENCIA: ['NA'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  capitulo: {\n    tipo: 'Capitulo',\n    name: 'Capitulo',\n    tagId: 'cap',\n    descricao: 'Captulo',\n    descricaoPlural: 'Captulos',\n    tiposPermitidosPai: ['Articulacao', 'Parte', 'Livro', 'Titulo'],\n    tiposPermitidosFilhos: ['Secao', 'Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: [''],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  caput: {\n    tipo: 'Caput',\n    name: 'Caput',\n    tagId: 'cpt',\n    descricao: 'Caput',\n    descricaoPlural: 'Capita',\n    tiposPermitidosPai: ['Artigo'],\n    tiposPermitidosFilhos: ['Inciso'],\n    tipoProvavelFilho: 'Inciso',\n    INDICADOR_SEQUENCIA: ['.'],\n    INDICADOR_FIM_SEQUENCIA: ['NA'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  generico: {\n    tipo: 'DispositivoGenerico',\n    name: undefined,\n    tagId: 'gen',\n    descricao: 'Dispositivo genrico',\n    descricaoPlural: 'Dispositivos genricos',\n    tiposPermitidosPai: ['Articulacao', 'Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Subsecao'],\n    tiposPermitidosFilhos: ['Paragrafo', 'Inciso', 'Alinea', 'Item'],\n    tipoProvavelFilho: 'DispositivoGenerico',\n    INDICADOR_SEQUENCIA: [';', '; e', '; ou'],\n    INDICADOR_FIM_SEQUENCIA: ['.'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  inciso: {\n    tipo: 'Inciso',\n    name: 'Inciso',\n    tagId: 'inc',\n    descricao: 'Inciso',\n    descricaoPlural: 'Incisos',\n    tiposPermitidosPai: ['Artigo', 'Caput', 'Paragrafo'],\n    tiposPermitidosFilhos: ['Alinea'],\n    tipoProvavelFilho: 'Alinea',\n    INDICADOR_SEQUENCIA: [';', '; e', '; ou'],\n    INDICADOR_FIM_SEQUENCIA: ['.'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  item: {\n    tipo: 'Item',\n    name: 'Item',\n    tagId: 'ite',\n    descricao: 'Item',\n    descricaoPlural: 'Itens',\n    tiposPermitidosPai: ['Alinea'],\n    tiposPermitidosFilhos: [],\n    tipoProvavelFilho: 'DispositivoGenerico',\n    INDICADOR_SEQUENCIA: [';', '; e', '; ou'],\n    INDICADOR_FIM_SEQUENCIA: ['.'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  livro: {\n    tipo: 'Livro',\n    name: 'Livro',\n    tagId: 'liv',\n    descricao: 'Livro',\n    descricaoPlural: 'Livros',\n    tiposPermitidosPai: ['Articulacao', 'Parte'],\n    tiposPermitidosFilhos: ['Titulo', 'Capitulo', 'Secao', 'Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: [''],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  omissis: {\n    tipo: 'Omissis',\n    name: 'Omissis',\n    tagId: 'omi',\n    descricao: 'Omissis',\n    descricaoPlural: 'Linhas pontilhadas (omissis)',\n    tiposPermitidosPai: ['Articulacao', 'Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Subsecao', 'Artigo', 'Caput', 'Paragrafo', 'Alinea', 'Inciso'],\n    tiposPermitidosFilhos: ['Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Subsecao', 'Artigo', 'Paragrafo', 'Alinea', 'Inciso', 'Item'],\n    tipoProvavelFilho: undefined,\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: ['NA'],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  paragrafo: {\n    tipo: 'Paragrafo',\n    name: 'Paragrafo',\n    tagId: 'par',\n    descricao: 'Pargrafo',\n    descricaoPlural: 'Pargrafos',\n    tiposPermitidosPai: ['Artigo'],\n    tiposPermitidosFilhos: ['Inciso'],\n    tipoProvavelFilho: 'Inciso',\n    INDICADOR_SEQUENCIA: ['.'],\n    INDICADOR_FIM_SEQUENCIA: ['NA'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  parte: {\n    tipo: 'Parte',\n    name: 'Parte',\n    tagId: 'prt',\n    descricao: 'Parte',\n    descricaoPlural: 'Partes',\n    tiposPermitidosPai: ['Articulacao'],\n    tiposPermitidosFilhos: ['Livro', 'Titulo', 'Capitulo', 'Secao', 'Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: [''],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  secao: {\n    tipo: 'Secao',\n    name: 'Secao',\n    tagId: 'sec',\n    descricao: 'Seo',\n    descricaoPlural: 'Sees',\n    tiposPermitidosPai: ['Articulacao', 'Parte', 'Livro', 'Titulo', 'Capitulo'],\n    tiposPermitidosFilhos: ['Subsecao', 'Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: [''],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  subsecao: {\n    tipo: 'Subsecao',\n    name: 'Subsecao',\n    tagId: 'sub',\n    descricao: 'Subseo',\n    descricaoPlural: 'Subsees',\n    tiposPermitidosPai: ['Secao'],\n    tiposPermitidosFilhos: ['Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: [''],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  titulo: {\n    tipo: 'Titulo',\n    name: 'Titulo',\n    tagId: 'tit',\n    descricao: 'Ttulo',\n    descricaoPlural: 'Ttulos',\n    tiposPermitidosPai: ['Articulacao', 'Parte', 'Livro'],\n    tiposPermitidosFilhos: ['Capitulo', 'Secao', 'Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: [''],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n};\n","import { ElementoAction } from '.';\nimport { Tipo } from '../../dispositivo/tipo';\nimport { Referencia } from '../../elemento';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\n\nexport const ADICIONAR_ELEMENTO = 'ADICIONAR_ELEMENTO';\n\nexport class AdicionarElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n  isDispositivoAlteracao = false;\n  constructor(tipo?: Tipo) {\n    this.descricao = `Adicionar ${tipo?.descricao ?? ''}`;\n    this.tipo = tipo?.tipo;\n  }\n  execute(atual: Referencia, conteudo?: string, tipo?: Referencia, hasDesmembramento = false): any {\n    return {\n      type: ADICIONAR_ELEMENTO,\n      atual,\n      novo: {\n        tipo,\n        isDispositivoAlteracao: this.isDispositivoAlteracao,\n        conteudo: {\n          texto: conteudo,\n        },\n      },\n      hasDesmembramento,\n    };\n  }\n}\n\nexport const adicionarElementoAction = new AdicionarElemento();\nexport const adicionarArtigo = new AdicionarElemento(TipoDispositivo.artigo);\nexport const adicionarAlinea = new AdicionarElemento(TipoDispositivo.alinea);\nexport const adicionarInciso = new AdicionarElemento(TipoDispositivo.inciso);\nexport const adicionarItem = new AdicionarElemento(TipoDispositivo.item);\nexport const omissis = new AdicionarElemento(TipoDispositivo.omissis);\nexport const adicionarParagrafo = new AdicionarElemento(TipoDispositivo.paragrafo);\n","import { ElementoAction } from '.';\nimport { Tipo } from '../../dispositivo/tipo';\nimport { Referencia } from '../../elemento';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\n\nexport const AGRUPAR_ELEMENTO = 'AGRUPAR_ELEMENTO';\n\nexport class AgruparElemento implements ElementoAction {\n  descricao: string;\n  tipo: string;\n\n  constructor(tipo: Tipo) {\n    this.descricao = 'Adicionar ' + tipo.descricao;\n    this.tipo = tipo.tipo;\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: AGRUPAR_ELEMENTO,\n      atual,\n      novo: {\n        tipo: this.tipo,\n      },\n    };\n  }\n}\nexport const adicionarParte = new AgruparElemento(TipoDispositivo.parte);\nexport const adicionarLivro = new AgruparElemento(TipoDispositivo.livro);\nexport const adicionarTitulo = new AgruparElemento(TipoDispositivo.titulo);\nexport const adicionarCapitulo = new AgruparElemento(TipoDispositivo.capitulo);\nexport const adicionarSecao = new AgruparElemento(TipoDispositivo.secao);\nexport const adicionarSubsecao = new AgruparElemento(TipoDispositivo.subsecao);\n","import { AlteracoesEmenda } from '../../emenda/alteracoesEmenda';\n\nexport const APLICAR_ALTERACOES_EMENDA = 'APLICAR_ALTERACOES_EMENDA';\n\nexport class AplicarAlteracoesEmenda {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Atualizar dispositivo';\n  }\n\n  execute(alteracoesEmenda: AlteracoesEmenda): any {\n    return {\n      type: APLICAR_ALTERACOES_EMENDA,\n      alteracoesEmenda,\n    };\n  }\n}\n\nexport const aplicarAlteracoesEmendaAction = new AplicarAlteracoesEmenda();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const ATUALIZAR_ELEMENTO = 'ATUALIZAR_ELEMENTO';\n\nexport class AtualizarElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Atualizar dispositivo';\n  }\n\n  execute(atual: Referencia): any {\n    this.tipo = atual.tipo;\n    return {\n      type: ATUALIZAR_ELEMENTO,\n      atual,\n    };\n  }\n}\n\nexport const atualizarElementoAction = new AtualizarElemento();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const ATUALIZAR_REFERENCIA_ELEMENTO = 'ATUALIZAR_REFERENCIA_ELEMENTO';\n\nexport class AtualizarReferenciaElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Atualizar Norma Referenciada';\n  }\n\n  execute(atual: Referencia): any {\n    this.tipo = atual.tipo;\n    return {\n      type: ATUALIZAR_REFERENCIA_ELEMENTO,\n      atual,\n    };\n  }\n}\n\nexport const atualizarReferenciaElementoAction = new AtualizarReferenciaElemento();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const ATUALIZAR_TEXTO_ELEMENTO = 'ATUALIZAR_TEXTO_ELEMENTO';\n\nexport class AtualizarTextoElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Atualizar dispositivo';\n  }\n\n  execute(atual: Referencia): any {\n    this.tipo = atual.tipo;\n    return {\n      type: ATUALIZAR_TEXTO_ELEMENTO,\n      atual,\n    };\n  }\n}\n\nexport const atualizarTextoElementoAction = new AtualizarTextoElemento();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const ELEMENTO_SELECIONADO = 'ELEMENTO_SELECIONADO';\n\nclass ElementoSelecionado implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Elemento selecionado';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: ELEMENTO_SELECIONADO,\n      atual,\n    };\n  }\n}\nexport const elementoSelecionadoAction = new ElementoSelecionado();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\nexport const INFORMAR_NORMA = 'INFORMAR_NORMA';\n\nclass InformarNorma implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Informar norma alterada';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: INFORMAR_NORMA,\n      atual,\n    };\n  }\n}\nexport const informarNormaAction = new InformarNorma();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const MOVER_ELEMENTO_ABAIXO = 'Mover para baixo';\n\nexport class MoverElementoAbaixo implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Mover para baixo';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: MOVER_ELEMENTO_ABAIXO,\n      atual,\n    };\n  }\n}\nexport const moverElementoAbaixoAction = new MoverElementoAbaixo();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const MOVER_ELEMENTO_ACIMA = 'Mover para cima';\n\nexport class MoverElementoAcima implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Mover para cima';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: MOVER_ELEMENTO_ACIMA,\n      atual,\n    };\n  }\n}\nexport const moverElementoAcimaAction = new MoverElementoAcima();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const REMOVER_ELEMENTO = 'REMOVER_ELEMENTO';\n\nexport class RemoverElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Remover dispositivo';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: REMOVER_ELEMENTO,\n      atual,\n    };\n  }\n}\nexport const removerElementoAction = new RemoverElemento();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const RENUMERAR_ELEMENTO = 'RENUMERAR_ELEMENTO';\n\nexport class RenumerarElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Numerar e criar rtulo para o dispositivo ';\n  }\n\n  execute(atual: Referencia, numero: string): any {\n    this.tipo = atual.tipo;\n    return {\n      type: RENUMERAR_ELEMENTO,\n      atual,\n      novo: {\n        numero,\n      },\n    };\n  }\n}\nexport const renumerarElementoAction = new RenumerarElemento();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const RESTAURAR_ELEMENTO = 'RESTAURAR_ELEMENTO';\n\nclass RestaurarElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Abandonar modificaes do dispositivo';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: RESTAURAR_ELEMENTO,\n      atual,\n    };\n  }\n}\nexport const restaurarElementoAction = new RestaurarElemento();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const SUPRIMIR_ELEMENTO = 'SUPRIMIR_ELEMENTO';\n\nclass SuprimirElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Suprimir dispositivo';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: SUPRIMIR_ELEMENTO,\n      atual,\n    };\n  }\n}\nexport const suprimirElementoAction = new SuprimirElemento();\n","import { ElementoAction } from '.';\nimport { Tipo } from '../../dispositivo/tipo';\nimport { Referencia } from '../../elemento';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\n\nexport const TRANSFORMAR_TIPO_ELEMENTO = 'TRANSFORMAR_TIPO_ELEMENTO';\n\nexport class TransformarElemento implements ElementoAction {\n  descricao: string;\n  tipo: string;\n  nomeAcao?: string;\n\n  constructor(tipo: Tipo, descricao: string, nomeAcao: string) {\n    this.descricao = descricao;\n    this.tipo = tipo.tipo;\n    this.nomeAcao = nomeAcao;\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: TRANSFORMAR_TIPO_ELEMENTO,\n      subType: this.nomeAcao,\n      atual,\n      novo: {\n        tipo: this.tipo,\n      },\n    };\n  }\n}\nexport const transformarEmOmissisAlinea = new TransformarElemento(TipoDispositivo.omissis, 'Transformar em Omissis de Alnea', 'transformarAlineaEmOmissisAlinea');\nexport const transformarEmOmissisIncisoCaput = new TransformarElemento(\n  TipoDispositivo.omissis,\n  'Transformar em Omissis de Inciso de Caput',\n  'transformarIncisoCaputEmOmissisIncisoCaput'\n);\nexport const transformarEmOmissisItem = new TransformarElemento(TipoDispositivo.omissis, 'Transformar em Omissis de Item', 'transformarItemEmOmissisItem');\nexport const transformarEmOmissisParagrafo = new TransformarElemento(TipoDispositivo.omissis, 'Transformar em Omissis de Pargrafo', 'transformarParagrafoEmOmissisParagrafo');\nexport const transformarEmOmissisIncisoParagrafo = new TransformarElemento(\n  TipoDispositivo.omissis,\n  'Transformar em Omissis de Inciso de Pargrafo',\n  'transformarIncisoParagrafoEmOmissisIncisoParagrafo'\n);\n\nexport const transformarAlineaEmIncisoCaput = new TransformarElemento(TipoDispositivo.inciso, 'Transformar Alnea em Inciso', 'transformarAlineaEmIncisoCaput');\nexport const transformarAlineaEmIncisoParagrafo = new TransformarElemento(TipoDispositivo.inciso, 'Transformar Alnea em Inciso', 'transformarAlineaEmIncisoParagrafo');\nexport const transformaAlineaEmItem = new TransformarElemento(TipoDispositivo.item, 'Transformar Alnea em Item', 'transformarAlineaEmItem');\nexport const transformarArtigoEmParagrafo = new TransformarElemento(TipoDispositivo.paragrafo, 'Transformar Artigo em Pargrafo', 'transformarArtigoEmParagrafo');\nexport const transformarGenericoEmInciso = new TransformarElemento(TipoDispositivo.inciso, 'Transformar em Inciso', 'transformarDispositivoGenericoEmInciso');\nexport const transformarGenericoEmAlinea = new TransformarElemento(TipoDispositivo.alinea, 'Transformar em Alnea', 'transformarDispositivoGenericoEmAlinea');\nexport const transformarGenericoEmItem = new TransformarElemento(TipoDispositivo.item, 'Transformar em Item', 'transformarDispositivoGenericoEmItem');\nexport const transformarIncisoParagrafoEmParagrafo = new TransformarElemento(TipoDispositivo.paragrafo, 'Transformar Inciso em Pargrafo', 'transformarIncisoParagrafoEmParagrafo');\nexport const transformarIncisoCaputEmParagrafo = new TransformarElemento(TipoDispositivo.paragrafo, 'Transformar Inciso Caput em Pargrafo', 'transformarIncisoCaputEmParagrafo');\nexport const transformarIncisoCaputEmAlinea = new TransformarElemento(TipoDispositivo.alinea, 'Transformar Inciso de Caput em Alnea', 'transformarIncisoCaputEmAlinea');\nexport const transformarIncisoParagrafoEmAlinea = new TransformarElemento(TipoDispositivo.alinea, 'Transformar Inciso de Caput em Alnea', 'transformarIncisoParagrafoEmAlinea');\n\nexport const transformarOmissisEmAlinea = new TransformarElemento(TipoDispositivo.alinea, 'Transformar Omissis em Alnea', 'transformarOmissisEmAlinea');\nexport const transformarOmissisEmArtigo = new TransformarElemento(TipoDispositivo.artigo, 'Transformar Omissis em Artigo', 'transformarOmissisEmArtigo');\nexport const transformarOmissisEmIncisoCaput = new TransformarElemento(TipoDispositivo.inciso, 'Transformar Omissis em Inciso de Caput', 'transformarOmissisEmIncisoCaput');\nexport const transformarOmissisEmIncisoParagrafo = new TransformarElemento(\n  TipoDispositivo.inciso,\n  'Transformar Omissis em Inciso de Pargrafo',\n  'transformarOmissisEmIncisoParagrafo'\n);\nexport const transformarOmissisEmItem = new TransformarElemento(TipoDispositivo.item, 'Transformar Omissis em Item', 'transformarOmissisEmItem');\nexport const transformarOmissisEmParagrafo = new TransformarElemento(TipoDispositivo.paragrafo, 'Transformar Omissis em Pargrafo', 'transformarOmissisEmParagrafo');\n\nexport const transformarItemEmAlinea = new TransformarElemento(TipoDispositivo.alinea, 'Transformar Item em Alnea', 'transformarItemEmAlinea');\nexport const transformarParagrafoEmArtigo = new TransformarElemento(TipoDispositivo.artigo, 'Transformar Pargrafo em Artigo', 'transformarParagrafoEmArtigo');\nexport const transformarParagrafoEmIncisoParagrafo = new TransformarElemento(\n  TipoDispositivo.inciso,\n  'Transformar Pargrafo em Inciso de Pargrafo',\n  'transformarParagrafoEmIncisoParagrafo'\n);\nexport const transformarParagrafoEmIncisoCaput = new TransformarElemento(TipoDispositivo.inciso, 'Transformar Pargrafo em Inciso de Caput', 'transformarParagrafoEmIncisoCaput');\n","import { ElementoAction } from '.';\n\nexport const VALIDAR_ARTICULACAO = 'VALIDAR_ARTICULACAO';\n\nclass ValidarArticulacao implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Articulao validada';\n  }\n\n  execute(): any {\n    return {\n      type: VALIDAR_ARTICULACAO,\n    };\n  }\n}\nexport const validarArticulacaAction = new ValidarArticulacao();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const VALIDAR_ELEMENTO = 'VALIDAR_ELEMENTO';\n\nclass ValidarElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Elemento validado';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: VALIDAR_ELEMENTO,\n      atual,\n    };\n  }\n}\nexport const validarElementoAction = new ValidarElemento();\n","import { TipoDispositivo } from '../lexml/tipo/tipoDispositivo';\nimport { Dispositivo } from './dispositivo';\n\nexport interface Tipo {\n  tipo: string;\n  name?: string;\n  tagId?: string;\n  descricao?: string;\n  descricaoPlural?: string;\n\n  tiposPermitidosPai?: string[];\n  tiposPermitidosFilhos?: string[];\n\n  tipoProvavelFilho?: string;\n\n  INDICADOR_SEQUENCIA?: string[];\n  INDICADOR_FIM_SEQUENCIA?: string[];\n  INDICADOR_DESDOBRAMENTO?: string[];\n}\n\nexport const isArticulacao = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.articulacao.tipo;\n};\n\nexport const isDispositivoGenerico = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.generico.tipo;\n};\n\nexport const isArtigo = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.artigo.tipo;\n};\n\nexport const isCaput = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.caput.tipo;\n};\n\nexport const isParagrafo = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.paragrafo.tipo;\n};\n\nexport const isInciso = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.inciso.tipo;\n};\n\nexport const isIncisoCaput = (dispositivo: Dispositivo): boolean => {\n  return isInciso(dispositivo) && isCaput(dispositivo.pai!);\n};\n\nexport const isIncisoParagrafo = (dispositivo: Dispositivo): boolean => {\n  return isInciso(dispositivo) && isParagrafo(dispositivo.pai!);\n};\n\nexport const isAlinea = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.alinea.tipo;\n};\n\nexport const isItem = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.item.tipo;\n};\n\nexport const isOmissis = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.omissis.tipo;\n};\n\nexport const isAgrupador = (dispositivo: Dispositivo): boolean => {\n  return [\n    TipoDispositivo.articulacao.tipo,\n    TipoDispositivo.agrupadorGenerico.tipo,\n    TipoDispositivo.capitulo.tipo,\n    TipoDispositivo.livro.tipo,\n    TipoDispositivo.parte.tipo,\n    TipoDispositivo.secao.tipo,\n    TipoDispositivo.subsecao.tipo,\n    TipoDispositivo.titulo.tipo,\n  ].includes(dispositivo.tipo);\n};\n\nexport const isAgrupadorGenerico = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.agrupadorGenerico.tipo;\n};\n\nexport const isDispositivoDeArtigo = (dispositivo: Dispositivo): boolean => {\n  return [TipoDispositivo.paragrafo.tipo, TipoDispositivo.inciso.tipo, TipoDispositivo.alinea.tipo, TipoDispositivo.item.tipo].includes(dispositivo.tipo);\n};\n","export function containsTags(text: string): boolean {\n  return /<.+>/g.test(text?.trim());\n}\n\nexport function endsWithPunctuation(texto: string): boolean {\n  return /[.,:]\\s*$/.test(texto);\n}\n\nexport function isValidHTML(html: string): boolean {\n  const doc = document.createElement('div');\n  doc.innerHTML = html;\n  return doc.innerHTML === html;\n}\n\nexport function isHTMLParagraph(html: string): boolean {\n  return html.trim() !== '' && html.trim().startsWith('<p>') && html.trim().endsWith('</p>');\n}\n\nexport function isValidHtmlParagraph(html: string): boolean {\n  return isHTMLParagraph(html) && isValidHTML(html);\n}\n\nexport function getLastCharacter(texto: string): string {\n  const soTexto = texto.replace(/(<([^>]+)>)/gi, '').trim();\n  return soTexto.length > 0 ? soTexto.charAt(soTexto.length - 1) : '';\n}\n\nexport function endsWithWord(texto: string, indicadores: string[]): boolean {\n  return indicadores.map(word => new RegExp(addSpaceRegex(escapeRegex(word)) + '\\\\s*$').test(texto)).filter(r => r)[0] === true;\n}\n\nexport function converteIndicadorParaTexto(indicadores: string[]): string {\n  switch (indicadores[0].trim()) {\n    case '.':\n      return 'ponto';\n    case ':':\n      return 'dois pontos';\n    case ';':\n      return 'ponto e vrgula';\n    case ',':\n      return 'vrgula';\n    default:\n      return indicadores[0].trim();\n  }\n}\n\nexport function escapeRegex(str: string): string {\n  // return str.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n\n  return str.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n}\n\nexport function addSpaceRegex(str: string): string {\n  return str.replace(/\\s+/g, '\\\\s+');\n}\n\nexport function join(list: string[]): string {\n  let str = '';\n  list.forEach(s => {\n    str += s;\n  });\n  return str;\n}\n\nexport function removeEspacosDuplicados(str: string): string {\n  return str.replace(/\\s{2,}/g, ' ');\n}\n\nexport class StringBuilder {\n  private strs = new Array<string>();\n\n  constructor(str?: string) {\n    if (str) {\n      this.append(str);\n    }\n  }\n\n  append(str: string | undefined): void {\n    if (str) {\n      this.strs.push(str);\n    }\n  }\n\n  toString(): string {\n    return join(this.strs);\n  }\n}\n","import { Elemento } from '../elemento';\nimport { TipoDispositivo } from '../lexml/tipo/tipoDispositivo';\nimport { Dispositivo } from './dispositivo';\n\nexport interface Situacao {\n  situacao: TipoSituacao;\n  getAcoesPermitidas(dispositivo: Dispositivo, acoes: any[]): any[];\n}\n\nexport interface TipoSituacao {\n  descricaoSituacao: string;\n  dispositivoOriginal?: Partial<Elemento>;\n}\n\nexport enum DescricaoSituacao {\n  DISPOSITIVO_ADICIONADO = 'Dispositivo Adicionado',\n  DISPOSITIVO_NOVO = 'Dispositivo Novo',\n  DISPOSITIVO_MODIFICADO = 'Dispositivo Modificado',\n  DISPOSITIVO_ORIGINAL = 'Dispositivo Original',\n  DISPOSITIVO_SUPRIMIDO = 'Dispositivo Suprimido',\n}\n\nexport const isSituacaoExclusivaDispositivoEmenda = (dispositivo: Dispositivo): boolean => {\n  return [DescricaoSituacao.DISPOSITIVO_ADICIONADO.toString(), DescricaoSituacao.DISPOSITIVO_MODIFICADO.toString(), DescricaoSituacao.DISPOSITIVO_SUPRIMIDO.toString()].includes(\n    dispositivo.situacao.descricaoSituacao\n  );\n};\n\nexport const isDispositivoEmenda = (dispositivo: Dispositivo): boolean => {\n  if (isSituacaoExclusivaDispositivoEmenda(dispositivo)) {\n    return true;\n  }\n\n  if (dispositivo.pai === undefined) {\n    return false;\n  }\n\n  return isDispositivoEmenda(dispositivo.pai!);\n};\n\nexport const isAlteracaoIntegral = (dispositivo: Dispositivo): boolean => {\n  if (dispositivo.tipo !== TipoDispositivo.artigo.tipo && dispositivo.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_MODIFICADO) {\n    return false;\n  }\n  if (dispositivo.filhos.length) {\n    for (const filho of dispositivo.filhos) {\n      if (!isAlteracaoIntegral(filho)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  if (dispositivo.tipo === TipoDispositivo.caput.tipo && dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO) {\n    return true;\n  }\n  return false;\n};\n","import { Articulacao, Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isAgrupador, isArticulacao, isArtigo, isDispositivoGenerico, isParagrafo, Tipo } from '../../dispositivo/tipo';\nimport { omissis } from '../acao/adicionarElementoAction';\nimport { TipoDispositivo } from './../tipo/tipoDispositivo';\n\nexport function getArticulacao(dispositivo: Dispositivo): Articulacao {\n  if (!dispositivo) {\n    return dispositivo as Articulacao;\n  }\n  if (isArticulacao(dispositivo)) {\n    return dispositivo as Articulacao;\n  }\n  if (dispositivo.pai === undefined) {\n    throw new Error('No foi encontrada a articulao');\n  }\n  return getArticulacao(dispositivo.pai);\n}\n\nexport function getDispositivo(uuid: number, dispositivo: Dispositivo | Articulacao): Dispositivo | Articulacao | null {\n  if (dispositivo.uuid === uuid) {\n    return dispositivo;\n  } else if (dispositivo.filhos !== null) {\n    let result: any = null;\n\n    const filhos = dispositivo.hasAlteracao() ? dispositivo.alteracoes!.filhos : dispositivo.filhos;\n\n    for (let i = 0; result === null && i < filhos.length; i++) {\n      result = getDispositivo(uuid, filhos[i]);\n    }\n    return result;\n  }\n  return null;\n}\n\nexport const findDispositivoByUuid = (dispositivo: Dispositivo, uuid: number): Dispositivo | null => {\n  if (uuid === undefined) {\n    throw new Error('uuid no foi informado');\n  }\n  return getDispositivo(uuid, dispositivo);\n};\n\nexport const getUltimoFilho = (dispositivo: Dispositivo): Dispositivo => {\n  if (hasFilhos(dispositivo)) {\n    return getUltimoFilho(dispositivo.filhos[dispositivo.filhos.length - 1]);\n  } else if (dispositivo?.hasAlteracao() && dispositivo.alteracoes?.filhos.length) {\n    return getUltimoFilho(dispositivo.alteracoes.filhos[dispositivo.alteracoes.filhos.length - 1]);\n  } else {\n    return dispositivo;\n  }\n};\n\nexport const irmaosMesmoTipo = (dispositivo: Dispositivo): Dispositivo[] => {\n  return isArtigo(dispositivo)\n    ? getArticulacao(dispositivo).artigos.filter(f => f.tipo === dispositivo.tipo)\n    : dispositivo.pai\n    ? dispositivo.pai!.filhos.filter(f => f.tipo === dispositivo.tipo)\n    : [dispositivo];\n};\n\nexport const getAgrupadoresPosterioresTipoAcima = (dispositivo: Dispositivo, tipo: Tipo): Dispositivo[] => {\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n  return dispositivo.pai!.filhos.filter((d, i) => i > pos && isAgrupador(d) && dispositivo.tiposPermitidosPai!.indexOf(tipo.tipo) > 0);\n};\n\nexport const getAgrupadoresAcima = (pai: Dispositivo, referencia: Dispositivo, agrupadores: Dispositivo[]): Dispositivo[] => {\n  if (pai?.filhos) {\n    for (let i = pai?.indexOf(referencia); i >= 0; i--) {\n      const d = pai?.filhos[i];\n      if (isAgrupador(d)) {\n        agrupadores.push(d);\n      }\n    }\n    if (pai?.pai) {\n      return getAgrupadoresAcima(pai.pai, referencia.pai!, agrupadores);\n    }\n  }\n  return agrupadores;\n};\n\nexport const hasAgrupador = (pai: Dispositivo): boolean => {\n  return pai.filhos.filter(a => isAgrupador(a)).length > 0;\n};\n\nexport const hasAgrupadoresAcima = (dispositivo: Dispositivo): boolean => {\n  const agrupadores: Dispositivo[] = [];\n  if (dispositivo.pai?.pai === undefined) {\n    return false;\n  }\n\n  return getAgrupadoresAcima(dispositivo.pai!.pai!, dispositivo.pai, agrupadores).length > 0;\n};\n\nexport const getAgrupadorAcimaByTipo = (referencia: Dispositivo, tipo: string): Dispositivo | undefined => {\n  return [...new Set(getAgrupadoresAcima(referencia.pai!, referencia, []))].filter(a => a.tipo === tipo).reverse()[0];\n};\n\nexport const hasAgrupadoresAnterioresByTipo = (dispositivo: Dispositivo, tipo: string): boolean => {\n  return getAgrupadoresAcima(dispositivo.pai!.pai!, dispositivo.pai!, []).filter(d => d.tipo === tipo).length > 0;\n};\n\nexport const getAgrupadoresAcimaByTipo = (dispositivo: Dispositivo, tipo: string): Dispositivo | undefined => {\n  if (!dispositivo || !dispositivo.pai) {\n    return undefined;\n  }\n  if (dispositivo.pai && dispositivo.pai.tipo === tipo) {\n    return dispositivo.pai;\n  }\n  return getAgrupadoresAcimaByTipo(dispositivo.pai!, tipo);\n};\n\nexport const hasAgrupadoresAcimaByTipo = (dispositivo: Dispositivo, tipo: string): boolean => {\n  return getAgrupadoresAcimaByTipo(dispositivo, tipo) !== undefined;\n};\n\nexport const getArtigo = (dispositivo: Dispositivo): Dispositivo => {\n  if (isArtigo(dispositivo.pai!)) {\n    return dispositivo.pai!;\n  }\n  return getArtigo(dispositivo.pai!);\n};\n\nexport const getArtigosPosterioresIndependenteAgrupador = (dispositivo: Dispositivo): Dispositivo[] => {\n  const pos = getArticulacao(dispositivo).indexOfArtigo(dispositivo);\n\n  if (pos === -1 || getArticulacao(dispositivo).artigos.length === pos + 1) {\n    return [];\n  }\n  return getArticulacao(dispositivo).artigos.filter((artigo, index) => index > pos);\n};\n\nexport const getProximoArtigoAnterior = (pai: Dispositivo, referencia: Dispositivo): Dispositivo | undefined => {\n  if (pai?.filhos) {\n    for (let i = pai?.indexOf(referencia) - 1; i >= 0; i--) {\n      const d = pai?.filhos[i];\n      if (isArtigo(d)) {\n        return d;\n      }\n      if (isAgrupador(d)) {\n        return buscaArtigoAnteriorAbaixo(d);\n      }\n    }\n    if (pai?.pai) {\n      return getProximoArtigoAnterior(pai.pai, referencia.pai!);\n    }\n  }\n  return undefined;\n};\n\nconst buscaArtigoAnteriorAbaixo = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  if (dispositivo === undefined) {\n    return undefined;\n  }\n\n  if (dispositivo.filhos) {\n    for (let i = dispositivo.filhos.length - 1; i >= 0; i--) {\n      const d = dispositivo.filhos[i];\n      if (isArtigo(d)) {\n        return d;\n      }\n      if (isAgrupador(d)) {\n        return buscaArtigoAnteriorAbaixo(d);\n      }\n    }\n  }\n  return undefined;\n};\n\nexport const getAgrupadorPosterior = (dispositivo: Dispositivo): Dispositivo => {\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n  return dispositivo.pai!.filhos.filter((d, i) => i > pos && isAgrupador(d))[0];\n};\n\nexport const hasAgrupadoresPosteriores = (dispositivo: Dispositivo): boolean => {\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n  return dispositivo.pai!.filhos.filter((d, i) => i > pos && isAgrupador(d)).length > 0;\n};\n\nexport const hasFilhoGenerico = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.filhos?.filter(d => isDispositivoGenerico(d)).length > 0;\n};\n\nexport const isUnicoMesmoTipo = (dispositivo: Dispositivo): boolean => {\n  const f = irmaosMesmoTipo(dispositivo);\n  return f.length === 1;\n};\n\nexport const isUltimoMesmoTipo = (dispositivo: Dispositivo): boolean => {\n  const f = irmaosMesmoTipo(dispositivo);\n  return f[f.length - 1] === dispositivo;\n};\n\nexport const isPenultimoMesmoTipo = (dispositivo: Dispositivo): boolean => {\n  const f = irmaosMesmoTipo(dispositivo);\n  return f.length > 1 && f[f.length - 2] === dispositivo;\n};\n\nexport const isPrimeiroMesmoTipo = (dispositivo: Dispositivo): boolean => {\n  const f = irmaosMesmoTipo(dispositivo);\n  return f[0] === dispositivo;\n};\n\nexport const hasFilhos = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.filhos && dispositivo.filhos.length > 0;\n};\n\nexport const getDispositivoAnterior = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n  return pos > 0 ? dispositivo.pai!.filhos[pos - 1] : undefined;\n};\n\nexport const getDispositivoAnteriorMesmoTipo = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const irmaos = irmaosMesmoTipo(dispositivo);\n  const pos = irmaos.indexOf(dispositivo);\n  return pos > 0 ? irmaos[pos - 1] : undefined;\n};\n\nexport const getDispositivoAnteriorMesmoTipoInclusiveOmissis = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n\n  if (pos === 0) {\n    return undefined;\n  }\n\n  const irmaos = dispositivo.pai!.filhos.filter((f, index) => index < pos && (f.tipo === dispositivo.tipo || f.tipo === omissis.tipo));\n  return irmaos.pop();\n};\n\nexport const getDispositivoPosterior = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n  return pos < dispositivo.pai!.filhos.length - 1 ? dispositivo.pai!.filhos[pos + 1] : undefined;\n};\n\nexport const getDispositivoPosteriorMesmoTipo = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const irmaos = irmaosMesmoTipo(dispositivo);\n  const pos = irmaos.indexOf(dispositivo);\n  return pos < irmaos.length - 1 ? irmaos[pos + 1] : undefined;\n};\n\nexport const getDispositivosAnterioresMesmoTipo = (dispositivo: Dispositivo): Dispositivo[] => {\n  const pos = dispositivo.pai?.indexOf(dispositivo);\n  return dispositivo.pai?.filhos.filter((f, index) => index < pos! && f.tipo === dispositivo.tipo && f.pai === dispositivo.pai) ?? [];\n};\n\nexport const getDispositivosPosterioresMesmoTipo = (dispositivo: Dispositivo): Dispositivo[] => {\n  const pos = dispositivo.pai?.indexOf(dispositivo);\n  return dispositivo.pai?.filhos.filter((f, index) => index > pos! && f.tipo === dispositivo.tipo) ?? [];\n};\n\nexport const getDispositivoPosteriorMesmoTipoInclusiveOmissis = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n\n  if (pos === dispositivo.pai!.filhos.length - 1) {\n    return undefined;\n  }\n\n  const irmaos = dispositivo.pai!.filhos.filter((f, index) => index > pos && (f.tipo === dispositivo.tipo || f.tipo === omissis.tipo));\n  return irmaos[0];\n};\n\nexport const getDispositivosPosteriores = (dispositivo: Dispositivo, isExclusao = false): Dispositivo[] => {\n  if (isArtigo(dispositivo)) {\n    const articulacao = getArticulacao(dispositivo);\n    const pos = getArticulacao(dispositivo).indexOfArtigo(dispositivo as Artigo);\n    return articulacao.artigos.filter((artigo, index) => index > pos);\n  }\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n  return dispositivo.pai!.filhos.filter((disp, index) => (isExclusao ? index > pos : index >= pos)).filter(d => dispositivo.tipo === d.tipo);\n};\n\nexport const isArtigoUnico = (dispositivo: Dispositivo): boolean => {\n  return isArtigo(dispositivo) && isUnicoMesmoTipo(dispositivo);\n};\n\nexport const isParagrafoUnico = (dispositivo: Dispositivo): boolean => {\n  return isParagrafo(dispositivo) && isUnicoMesmoTipo(dispositivo);\n};\n\nexport const getDispositivoCabecaAlteracao = (dispositivo: Dispositivo): Dispositivo => {\n  return dispositivo.cabecaAlteracao || isDispositivoCabecaAlteracao(dispositivo) ? dispositivo : getDispositivoCabecaAlteracao(dispositivo.pai!);\n};\n\nexport const isDispositivoCabecaAlteracao = (dispositivo: Dispositivo): boolean => {\n  return isDispositivoAlteracao(dispositivo) && isArticulacao(dispositivo.pai!) && dispositivo.pai!.pai !== undefined;\n};\n\nexport const isUltimaAlteracao = (dispositivo: Dispositivo): boolean => {\n  const atual = getDispositivoCabecaAlteracao(dispositivo);\n  const lista = getDispositivoAndFilhosAsLista(atual);\n\n  return lista.length > 0 && lista[lista.length - 1] === dispositivo;\n};\n\nexport const hasDispositivosPosterioresAlteracao = (dispositivo: Dispositivo): boolean => {\n  const atual = getArticulacao(dispositivo).pai;\n\n  if (!atual) {\n    return false;\n  }\n\n  const articulacao = getArticulacao(atual!);\n\n  return isUnicoMesmoTipo(atual) || articulacao.indexOfArtigo(atual) < articulacao.artigos.length - 1;\n};\n\nexport const isArticulacaoAlteracao = (articulacao: Dispositivo): boolean => {\n  return isArticulacao(articulacao) && articulacao.pai !== undefined;\n};\n\nexport const isDispositivoAlteracao = (dispositivo: Dispositivo): boolean => {\n  const r = !!dispositivo.isDispositivoAlteracao;\n\n  if (r) {\n    return true;\n  }\n\n  try {\n    return getArticulacao(dispositivo).pai !== undefined;\n  } catch (error) {\n    return false;\n  }\n};\n\nexport const podemSerRenumerados = (dispositivos: Dispositivo[]): boolean => {\n  return (\n    dispositivos?.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_NOVO).length === dispositivos.length ||\n    dispositivos?.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO).length === dispositivos.length\n  );\n};\n\nexport const getDispositivosAdicionados = (dispositivos: Dispositivo[]): Dispositivo[] => {\n  return dispositivos?.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO);\n};\n\nexport const hasDispositivosBySituacao = (dispositivos: Dispositivo[], descricaoSituacao: string): boolean => {\n  return dispositivos?.filter(d => d.situacao.descricaoSituacao === descricaoSituacao).length > 0;\n};\n\nexport const isOriginal = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL;\n};\n\nexport const isOriginalAlteradoModificadoOuSuprimido = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO || dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO;\n};\n\n/* export const getFilhosDispositivoAsLista = (dispositivos: Dispositivo[], filhos: Dispositivo[]): void => {\n  filhos?.forEach(f => {\n    dispositivos.push(f);\n    if (hasFilhos(f)) {\n      getFilhosDispositivoAsLista(dispositivos, f.filhos);\n    }\n    if (f.hasAlteracao()) {\n      f.alteracoes?.filhos.forEach(a => getFilhosDispositivoAsLista(dispositivos, a.filhos));\n    }\n  });\n}; */\n\nexport const getDispositivoAndFilhosAsLista = (dispositivo: Dispositivo): Dispositivo[] => {\n  return buildListaDispositivos(dispositivo, []);\n};\n\nexport const buildListaDispositivos = (dispositivo: Dispositivo, dispositivos: Dispositivo[]): Dispositivo[] => {\n  dispositivos.push(dispositivo);\n  const filhos = dispositivo.hasAlteracao() ? dispositivo.alteracoes!.filhos : dispositivo.filhos;\n  filhos.length ? filhos.forEach(d => buildListaDispositivos(d, dispositivos)) : undefined;\n  return dispositivos;\n};\n\nexport const percorreHierarquiaDispositivos = (d: Dispositivo, visit: (d: Dispositivo) => void): void => {\n  if (!d) return;\n  visit(d);\n  if (d.tipo === TipoDispositivo.artigo.tipo) {\n    const artigo = d as Artigo;\n    if (artigo.caput) {\n      percorreHierarquiaDispositivos(artigo.caput, visit);\n      if (d.alteracoes) {\n        percorreHierarquiaDispositivos(d.alteracoes, visit);\n      }\n      d.filhos\n        .filter(f => isParagrafo(f))\n        .forEach(f => {\n          percorreHierarquiaDispositivos(f, visit);\n        });\n    }\n  } else {\n    if (d.alteracoes) {\n      percorreHierarquiaDispositivos(d.alteracoes, visit);\n    }\n    d.filhos.forEach(f => {\n      percorreHierarquiaDispositivos(f, visit);\n    });\n  }\n};\n\nexport const buscaNaHierarquiaDispositivos = (d: Dispositivo, visit: (d: Dispositivo) => any): any => {\n  if (!d) return undefined;\n  let ret = visit(d);\n  if (ret) return ret;\n  if (d.tipo === TipoDispositivo.artigo.tipo) {\n    const artigo = d as Artigo;\n    if (artigo.caput) {\n      ret = buscaNaHierarquiaDispositivos(artigo.caput, visit);\n      if (ret) return ret;\n      if (d.alteracoes) {\n        ret = buscaNaHierarquiaDispositivos(d.alteracoes, visit);\n        if (ret) return ret;\n      }\n      for (const f of d.filhos.filter(f => isParagrafo(f))) {\n        ret = buscaNaHierarquiaDispositivos(f, visit);\n        if (ret) return ret;\n      }\n    }\n  } else {\n    if (d.alteracoes) {\n      ret = buscaNaHierarquiaDispositivos(d.alteracoes, visit);\n      if (ret) return ret;\n    }\n    for (const f of d.filhos) {\n      ret = buscaNaHierarquiaDispositivos(f, visit);\n      if (ret) return ret;\n    }\n  }\n};\n\nexport const isDispositivoRaiz = (d: Dispositivo): boolean => {\n  return d && !d.pai && d.tipo === TipoDispositivo.articulacao.tipo;\n};\n\nexport const buscaDispositivoById = (articulacao: Articulacao, id: string): Dispositivo | undefined => {\n  const idArtigo = extraiIdArtigo(id);\n  let raiz: Dispositivo = articulacao;\n  if (idArtigo) {\n    const artigo = articulacao.artigos.find(a => idArtigo === a.id);\n    if (artigo) {\n      if (id === idArtigo || id === idArtigo + '_cpt') {\n        return artigo;\n      } else {\n        raiz = artigo;\n      }\n    }\n  }\n  return buscaNaHierarquiaDispositivos(raiz, d => {\n    return id === d.id ? d : undefined;\n  });\n};\n\nexport const extraiIdArtigo = (id: string): string | undefined => {\n  const l = /^art\\d+(-\\d+)*/.exec(id);\n  return l?.length ? l[0] : undefined;\n};\n","export enum TipoMensagem {\n  INFO,\n  WARNING,\n  ERROR,\n}\n\nexport interface Mensagem {\n  tipo: TipoMensagem;\n  descricao?: string;\n  detalhe?: any;\n}\n\nexport interface MensagemErro extends Mensagem {\n  tipo: TipoMensagem.ERROR;\n}\n","export const TEXTO_OMISSIS = '...........................................................................................';\n","import { addSpaceRegex, endsWithWord, escapeRegex } from '../../../util/string-util';\nimport { Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { isArtigo } from '../../dispositivo/tipo';\nimport { TEXTO_OMISSIS } from './textoOmissis';\n\nexport const hasIndicativoDesdobramento = (dispositivo: Dispositivo): boolean => {\n  const d = isArtigo(dispositivo) ? (dispositivo as Artigo).caput! : dispositivo;\n\n  return endsWithWord(d.texto, d.INDICADOR_DESDOBRAMENTO ?? []);\n};\n\nexport const hasIndicativoFinalSequencia = (dispositivo: Dispositivo): boolean => {\n  const d = isArtigo(dispositivo) ? (dispositivo as Artigo).caput! : dispositivo;\n\n  return endsWithWord(d.texto, d.INDICADOR_FIM_SEQUENCIA ?? []);\n};\n\nexport const hasIndicativoContinuacaoSequencia = (dispositivo: Dispositivo): boolean => {\n  const d = isArtigo(dispositivo) ? (dispositivo as Artigo).caput! : dispositivo;\n\n  return endsWithWord(d.texto, d.INDICADOR_SEQUENCIA ?? []);\n};\n\nexport const TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO = TEXTO_OMISSIS + '. (NR)';\n\nexport const hasIndicativoInicioAlteracao = (texto: string): boolean => {\n  return (\n    new RegExp(addSpaceRegex(escapeRegex('o seguinte acrscimo:')) + '\\\\s*$').test(texto) ||\n    new RegExp(addSpaceRegex(escapeRegex('os seguintes acrscimos:')) + '\\\\s*$').test(texto) ||\n    new RegExp(addSpaceRegex(escapeRegex('passa a vigorar com a seguinte alterao:')) + '\\\\s*$').test(texto) ||\n    new RegExp(addSpaceRegex(escapeRegex('passa a vigorar com as seguintes alteraes:')) + '\\\\s*$').test(texto)\n  );\n};\n\nexport const normalizaSeForOmissis = (texto: string): string => {\n  if (/^[.]*(?:\\s*)[\"]?(\\s*)?\\(NR\\)\\s*$/.test(texto)) {\n    return TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO;\n  }\n\n  if (/[\"]?(\\s*)?\\(NR\\)?\\s*$/.test(texto)) {\n    return texto.replace(/[\"](?!.*[\"])/, '');\n  }\n\n  if (texto === TEXTO_OMISSIS || texto === TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO || !new RegExp('^[.]+$').test(texto)) {\n    return texto;\n  }\n\n  return TEXTO_OMISSIS;\n};\n\nexport const hasIndicativoFimAlteracao = (texto: string): boolean => {\n  return /\\.[\"](?:\\s*\\(NR\\))\\s*$/.test(texto);\n};\n","import { containsTags, converteIndicadorParaTexto, endsWithPunctuation, getLastCharacter, isValidHTML } from '../../../util/string-util';\nimport { Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { isAgrupador, isArticulacao, isArtigo, isDispositivoDeArtigo, isOmissis, isParagrafo } from '../../dispositivo/tipo';\nimport {\n  getDispositivoCabecaAlteracao,\n  hasFilhoGenerico,\n  hasFilhos,\n  isDispositivoAlteracao,\n  isPenultimoMesmoTipo,\n  isUltimaAlteracao,\n  isUltimoMesmoTipo,\n  isUnicoMesmoTipo,\n} from '../hierarquia/hierarquiaUtil';\nimport { Mensagem, TipoMensagem } from '../util/mensagem';\nimport {\n  hasIndicativoContinuacaoSequencia,\n  hasIndicativoDesdobramento,\n  hasIndicativoFimAlteracao,\n  hasIndicativoFinalSequencia,\n  hasIndicativoInicioAlteracao,\n  TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO,\n} from './conteudoUtil';\nimport { TEXTO_OMISSIS } from './textoOmissis';\n\nconst hasCitacaoAoFinalFrase = (texto: string): boolean => {\n  return texto !== undefined && /.*:[\\s]{1,2}[\"].*[.][\"]$/.test(texto);\n};\n\nexport const validaTextoAgrupador = (dispositivo: Dispositivo): Mensagem[] => {\n  const mensagens: Mensagem[] = [];\n  if (!isArticulacao(dispositivo) && (!dispositivo.texto || dispositivo.texto.trim().length === 0)) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `No foi informado um texto para ${dispositivo.artigoDefinido} ${dispositivo.descricao}`,\n    });\n  }\n  if (!isArticulacao(dispositivo) && dispositivo.texto && endsWithPunctuation(dispositivo.texto)) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `No pode haver sinal de pontuao ao final do texto d${dispositivo.artigoDefinido} ${dispositivo.descricao}`,\n    });\n  }\n  if (!isArticulacao(dispositivo) && containsTags(dispositivo.texto)) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `Texto d${dispositivo.artigoDefinido} ${dispositivo.descricao} no pode possuir formatao`,\n    });\n  }\n  return mensagens;\n};\n\nexport const validaTextoDispositivo = (dispositivo: Dispositivo): Mensagem[] => {\n  const mensagens: Mensagem[] = [];\n\n  //\n  // validaes comuns a dispositivos de texto\n  //\n  if ((!isArticulacao(dispositivo) && !dispositivo.texto) || dispositivo.texto.trim().length === 0) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `No foi informado um texto para ${dispositivo.artigoDefinido + ' ' + dispositivo.descricao!}`,\n    });\n  }\n  if (!isArticulacao(dispositivo) && dispositivo.texto && !isValidHTML(dispositivo.texto)) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O contedo do dispositivo no  um HTML vlido',\n    });\n  }\n  if (!isArticulacao(dispositivo) && dispositivo.texto && dispositivo.texto.trim().length > 300) {\n    mensagens.push({\n      tipo: TipoMensagem.WARNING,\n      descricao: `Pelo princpio da conciso, o texto dos dispositivos no deve ser extenso, devendo ser utilizadas frases curtas e concisas`,\n    });\n  }\n\n  //\n  // validaes comuns a dispositivos de artigo\n  //\n  if (isDispositivoDeArtigo(dispositivo) && !isParagrafo(dispositivo) && dispositivo.texto && /^[A-Z-]/.test(dispositivo.texto)) {\n    mensagens.push({\n      tipo: TipoMensagem.WARNING,\n      descricao: `${dispositivo.descricao} deveria iniciar com letra minscula, a no ser que se trate de uma situao especial, como nome prprio`,\n    });\n  }\n\n  if (\n    isDispositivoDeArtigo(dispositivo) &&\n    !isParagrafo(dispositivo) &&\n    !isOmissis(dispositivo) &&\n    dispositivo.texto &&\n    !isUnicoMesmoTipo(dispositivo) &&\n    !isUltimoMesmoTipo(dispositivo) &&\n    !isPenultimoMesmoTipo(dispositivo) &&\n    !hasFilhos(dispositivo) &&\n    dispositivo.INDICADOR_SEQUENCIA !== undefined &&\n    getLastCharacter(dispositivo.texto) !== dispositivo.INDICADOR_SEQUENCIA[0]\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `${dispositivo.descricao} deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_SEQUENCIA!)}. ${\n        hasIndicativoContinuacaoSequencia(dispositivo) ? 'A variao informada s  permitida para o penltimo elemento' : ''\n      }`,\n    });\n  }\n\n  //\n  // validaes comuns a Artigo e Pargrafo\n  //\n  if ((isArtigo(dispositivo) || isParagrafo(dispositivo)) && dispositivo.texto && !/^[...]{3,}/.test(dispositivo.texto) && !/^[A-Z-]/.test(dispositivo.texto)) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `${dispositivo.descricao} deveria iniciar com letra maiscula`,\n    });\n  }\n\n  //\n  // validaes de dispositivos que no sejam de alterao\n  //\n\n  if (\n    !isDispositivoAlteracao(dispositivo) &&\n    !isAgrupador(dispositivo) &&\n    !isOmissis(dispositivo) &&\n    dispositivo.texto &&\n    ((!isArtigo(dispositivo) && hasFilhos(dispositivo)) || (isArtigo(dispositivo) && hasFilhos((dispositivo as Artigo).caput!))) &&\n    !hasIndicativoDesdobramento(dispositivo)\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `${dispositivo.descricao} deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_DESDOBRAMENTO!)}`,\n    });\n  }\n\n  // dispositivos de artigo\n  if (\n    !isDispositivoAlteracao(dispositivo) &&\n    isDispositivoDeArtigo(dispositivo) &&\n    !isParagrafo(dispositivo) &&\n    dispositivo.texto &&\n    (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo)) &&\n    !hasFilhoGenerico(dispositivo.pai!) &&\n    !hasFilhos(dispositivo) &&\n    !hasIndicativoFinalSequencia(dispositivo)\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `ltimo dispositivo de uma sequncia deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_FIM_SEQUENCIA!)}`,\n    });\n  }\n  if (\n    !isDispositivoAlteracao(dispositivo) &&\n    isDispositivoDeArtigo(dispositivo) &&\n    !isParagrafo(dispositivo) &&\n    dispositivo.texto &&\n    !isUnicoMesmoTipo(dispositivo) &&\n    isPenultimoMesmoTipo(dispositivo) &&\n    !hasFilhos(dispositivo) &&\n    !hasIndicativoContinuacaoSequencia(dispositivo)\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `${dispositivo.descricao} deveria terminar com uma das seguintes possibilidades: ${dispositivo.INDICADOR_SEQUENCIA!.join('     ')}`,\n    });\n  }\n\n  // Artigo e Pargrafo\n  if (\n    !isDispositivoAlteracao(dispositivo) &&\n    (isArtigo(dispositivo) || isParagrafo(dispositivo)) &&\n    dispositivo.texto &&\n    !hasFilhos(dispositivo) &&\n    !dispositivo.hasAlteracao() &&\n    !isUnicoMesmoTipo(dispositivo) &&\n    !hasIndicativoContinuacaoSequencia(dispositivo) &&\n    !hasCitacaoAoFinalFrase(dispositivo.texto)\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `${dispositivo.descricao} deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_SEQUENCIA!)}`,\n    });\n  }\n\n  // Artigo\n  if (\n    !isDispositivoAlteracao(dispositivo) &&\n    isArtigo(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo.hasAlteracao() &&\n    !hasIndicativoDesdobramento(dispositivo) &&\n    !hasIndicativoInicioAlteracao(dispositivo.texto)\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `${dispositivo.descricao} deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_DESDOBRAMENTO!)}`,\n    });\n  }\n  if (\n    !isDispositivoAlteracao(dispositivo) &&\n    isArtigo(dispositivo) &&\n    dispositivo.texto &&\n    !dispositivo.hasAlteracao() &&\n    (!hasFilhos(dispositivo) || !hasFilhos((dispositivo as Artigo).caput!)) &&\n    hasIndicativoDesdobramento(dispositivo)\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `${dispositivo.descricao} deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_SEQUENCIA!)}`,\n    });\n  }\n\n  if (!isDispositivoAlteracao(dispositivo) && isArtigo(dispositivo) && dispositivo.hasAlteracao() && !dispositivo.alteracoes?.base) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: ` necessrio informar a norma a ser alterada`,\n    });\n  }\n\n  //\n  // Validaes de dispositivos de alterao\n  //\n  if (\n    isDispositivoAlteracao(dispositivo) &&\n    !isAgrupador(dispositivo) &&\n    dispositivo.texto !== TEXTO_OMISSIS &&\n    dispositivo.texto &&\n    ((!isArtigo(dispositivo) && hasFilhos(dispositivo)) || (isArtigo(dispositivo) && hasFilhos((dispositivo as Artigo).caput!))) &&\n    !hasIndicativoDesdobramento(dispositivo)\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `${dispositivo.descricao} deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_DESDOBRAMENTO!)}`,\n    });\n  }\n\n  if (\n    isDispositivoAlteracao(dispositivo) &&\n    isParagrafo(dispositivo) &&\n    dispositivo.texto &&\n    !hasFilhos(dispositivo) &&\n    !isUnicoMesmoTipo(dispositivo) &&\n    !isUltimoMesmoTipo(dispositivo) &&\n    !hasIndicativoContinuacaoSequencia(dispositivo)\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `${dispositivo.descricao} deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_SEQUENCIA!)}`,\n    });\n  }\n\n  if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo) && (!dispositivo.texto || !hasIndicativoFimAlteracao(dispositivo.texto))) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `O ltimo dispositivo do bloco de alterao deve terminar com: <b>.&#8221; (NR)</b>`,\n    });\n  }\n  if (\n    isDispositivoAlteracao(dispositivo) &&\n    dispositivo.texto &&\n    !isUltimaAlteracao(dispositivo) &&\n    /.*[\"]$/.test(dispositivo.texto) &&\n    !hasCitacaoAoFinalFrase(dispositivo.texto) &&\n    !/.*(NR)/.test(dispositivo.texto)\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `Somente o ltimo dispositivo do bloco de alterao poderia ser finalizado com aspas`,\n    });\n  }\n  if (isDispositivoAlteracao(dispositivo) && dispositivo.texto && !isUltimaAlteracao(dispositivo) && /.*(NR)/.test(dispositivo.texto)) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `Somente o ltimo dispositivo do bloco de alterao poderia terminar com &#8221; (NR)`,\n    });\n  }\n  if (\n    isDispositivoAlteracao(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo === getDispositivoCabecaAlteracao(dispositivo) &&\n    dispositivo.filhos.length === 0 &&\n    (dispositivo.texto === TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO || dispositivo.texto === TEXTO_OMISSIS)\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `No foi informada nenhuma alterao`,\n    });\n  }\n  if (\n    isDispositivoAlteracao(dispositivo) &&\n    dispositivo.texto &&\n    isDispositivoDeArtigo(dispositivo) &&\n    !isParagrafo(dispositivo) &&\n    !isOmissis(dispositivo) &&\n    dispositivo.pai!.filhos.filter(d => isOmissis(d)).length === 0 &&\n    isUnicoMesmoTipo(dispositivo) &&\n    !hasFilhoGenerico(dispositivo.pai!) &&\n    !hasFilhos(dispositivo) &&\n    !hasIndicativoFinalSequencia(dispositivo) &&\n    !isUltimaAlteracao(dispositivo)\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `ltimo dispositivo de uma sequncia deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_FIM_SEQUENCIA!)}`,\n    });\n  }\n\n  return mensagens;\n};\n\nexport const validaTexto = (dispositivo: Dispositivo): Mensagem[] => {\n  return isAgrupador(dispositivo) ? validaTextoAgrupador(dispositivo) : validaTextoDispositivo(dispositivo);\n};\n","export enum TipoGenero {\n  MASCULINO = 'masculino',\n  FEMININO = 'feminino',\n  INDEFINIDO = 'indefinido',\n}\n\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\nexport interface Genero {\n  tipoGenero: string;\n  artigoDefinido: string;\n  pronomePossessivoSingular: string;\n  pronomePossessivoPlural: string;\n  artigoDefinidoSingular: string;\n  artigoDefinidoPlural: string;\n  artigoIndefinidoSingular: string;\n  artigoDefinidoPrecedidoPreposicaoASingular: string;\n  artigoDefinidoPrecedidoPreposicaoAPlural: string;\n  contracaoEmArtigoDefinidoSingular: string;\n}\n\nexport function GeneroFeminino<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Genero {\n    tipoGenero = 'feminino';\n    artigoDefinido = 'a';\n    pronomePossessivoSingular = ' da ';\n    pronomePossessivoPlural = ' das ';\n    artigoDefinidoSingular = ' a ';\n    artigoDefinidoPlural = ' as ';\n    artigoIndefinidoSingular = ' uma ';\n    artigoDefinidoPrecedidoPreposicaoASingular = '  ';\n    artigoDefinidoPrecedidoPreposicaoAPlural = ' s ';\n    contracaoEmArtigoDefinidoSingular = ' na ';\n  };\n}\n\nexport function GeneroIndefinido<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Genero {\n    tipoGenero = 'indefinido';\n    artigoDefinido = '';\n    pronomePossessivoSingular = '';\n    pronomePossessivoPlural = '';\n    artigoDefinidoSingular = '';\n    artigoDefinidoPlural = '';\n    artigoIndefinidoSingular = '';\n    artigoDefinidoPrecedidoPreposicaoASingular = '';\n    artigoDefinidoPrecedidoPreposicaoAPlural = '';\n    contracaoEmArtigoDefinidoSingular = '';\n  };\n}\n\nexport function GeneroMasculino<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Genero {\n    tipoGenero = 'masculino';\n    artigoDefinido = 'o';\n    pronomePossessivoSingular = ' do ';\n    pronomePossessivoPlural = ' dos ';\n    artigoDefinidoSingular = ' o ';\n    artigoDefinidoPlural = ' os ';\n    artigoIndefinidoSingular = ' um ';\n    artigoDefinidoPrecedidoPreposicaoASingular = ' ao ';\n    artigoDefinidoPrecedidoPreposicaoAPlural = ' aos ';\n    contracaoEmArtigoDefinidoSingular = ' no ';\n  };\n}\n\nexport const generoFeminino = new (GeneroFeminino(Object))();\nexport const generoMasculino = new (GeneroMasculino(Object))();\nexport const generoIndefinido = new (GeneroIndefinido(Object))();\n\nexport const generoFromLetra = (letraGenero: string): Genero => {\n  return letraGenero === 'F' ? generoFeminino : letraGenero === 'M' ? generoMasculino : generoIndefinido;\n};\n\nexport class NomeComGenero {\n  genero: Genero;\n\n  constructor(public nome: string, genero: string | Genero) {\n    this.genero = typeof genero === 'string' ? generoFromLetra(genero as string) : (genero as Genero);\n  }\n}\n","export const VOCABULARIO = {\n  autoridades: [\n    {\n      urn: 'federal',\n      descricao: 'Federal',\n    },\n    {\n      urn: 'senado.federal',\n      descricao: 'Senado Federal',\n    },\n    {\n      urn: 'congresso.nacional',\n      descricao: 'Congresso Nacional',\n    },\n  ],\n  tiposDocumento: [\n    {\n      urn: 'lei',\n      descricao: 'Lei',\n      genero: 'F',\n    },\n    {\n      urn: 'lei.complementar',\n      descricao: 'Lei Complementar',\n      genero: 'F',\n    },\n    {\n      urn: 'lei.delegada',\n      descricao: 'Lei Delegada',\n      genero: 'F',\n    },\n    {\n      urn: 'decreto.legislativo',\n      descricao: 'Decreto Legislativo',\n      genero: 'M',\n    },\n    {\n      urn: 'decreto.lei',\n      descricao: 'Decreto-Lei',\n      genero: 'M',\n    },\n    {\n      urn: 'decreto',\n      descricao: 'Decreto',\n      genero: 'M',\n    },\n    {\n      urn: 'consolidacao.leis.trabalho',\n      descricao: 'Consolidao das Leis do Trabalho',\n      genero: 'F',\n    },\n    {\n      urn: 'resolucao',\n      descricao: 'Resoluo',\n      genero: 'F',\n    },\n    {\n      urn: 'regimento.interno',\n      descricao: 'Regimento Interno',\n      genero: 'M',\n    },\n    {\n      urn: 'constituicao',\n      descricao: 'Constituio',\n      genero: 'F',\n    },\n    {\n      urn: 'ato.disposicoes.constitucionais.transitorias',\n      descricao: 'Ato das Disposies Constitucionais Transitrias',\n      genero: 'M',\n    },\n    {\n      urn: 'medida.provisoria',\n      descricao: 'Medida Provisria',\n      genero: 'F',\n    },\n    {\n      urn: 'medida.provisoria;mpv',\n      descricao: 'Medida Provisria',\n      genero: 'F',\n    },\n    {\n      urn: 'emenda.constitucional',\n      descricao: 'Emenda Constitucional',\n      genero: 'F',\n    },\n    {\n      urn: 'emenda.constitucional.revisao',\n      descricao: 'Emenda Constitucional de Reviso',\n      genero: 'F',\n    },\n    {\n      urn: 'proposta.emenda.constitucional;pec',\n      descricao: 'Proposta de Emenda Constitucional',\n      genero: 'F',\n    },\n    {\n      urn: 'projeto.lei;pl',\n      descricao: 'Projeto de Lei',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.lei;pls',\n      descricao: 'Projeto de Lei do Senado',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.lei.complementar;plp',\n      descricao: 'Projeto de Lei Complementar',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.lei.complementar;pls',\n      descricao: 'Projeto de Lei Complementar do Senado',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.lei;plc',\n      descricao: 'Projeto de Lei da Cmara',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.lei.complementar;plc',\n      descricao: 'Projeto de Lei Complementar da Cmara',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.lei.conversao;plv',\n      descricao: 'Projeto de Lei de Converso',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.resolucao;prs',\n      descricao: 'Projeto de Resoluo do Senado',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.decreto.legislativo;pds',\n      descricao: 'Projeto de Decreto Legislativo',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.decreto.legislativo;pdl',\n      descricao: 'Projeto de Decreto Legislativo',\n      genero: 'M',\n    },\n    {\n      urn: 'substitutivo.projeto.lei.senado;scd',\n      descricao: 'Substitutivo da Cmara dos Deputados',\n      genero: 'M',\n    },\n    {\n      urn: 'emenda.projeto.lei.senado;ecd',\n      descricao: 'Emenda(s) da Cmara dos Deputados',\n      genero: 'F',\n    },\n  ],\n  fakeUrns: [\n    {\n      sigla: 'PEC',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'proposta.emenda.constitucional;pec',\n    },\n    {\n      sigla: 'PL',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.lei;pl',\n    },\n    {\n      sigla: 'PLS',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.lei;pls',\n    },\n    {\n      sigla: 'PLP',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.lei.complementar;plp',\n    },\n    {\n      sigla: 'PLC',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.lei;plc',\n    },\n    {\n      sigla: 'PLV',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.lei.conversao;plv',\n    },\n    {\n      sigla: 'PRS',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.resolucao;prs',\n    },\n    {\n      sigla: 'PDS',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.decreto.legislativo;pds',\n    },\n    {\n      sigla: 'PDL',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.decreto.legislativo;pdl',\n    },\n    {\n      sigla: 'SCD',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'substitutivo.projeto.lei.senado;scd',\n    },\n    {\n      sigla: 'ECD',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'emenda.projeto.lei.senado;ecd',\n    },\n    {\n      sigla: 'MPV',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'medida.provisoria;mpv',\n    },\n  ],\n  siglas: [\n    {\n      urnAutoridade: 'federal',\n      urnTipoDocumento: 'medida.provisoria',\n      sigla: 'MPV',\n    },\n    {\n      urnAutoridade: 'congresso.nacional',\n      urnTipoDocumento: 'projeto.lei',\n      sigla: 'PLN',\n    },\n    {\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.lei',\n      sigla: 'PLS',\n    },\n    {\n      urnAutoridade: 'congresso.nacional',\n      urnTipoDocumento: 'medida.provisoria',\n      sigla: 'MPV',\n    },\n    {\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.lei.senado.federal',\n      sigla: 'PLS',\n    },\n    {\n      urnAutoridade: 'camara.deputados',\n      urnTipoDocumento: 'projeto.lei',\n      sigla: 'PLC',\n    },\n  ],\n  atalhosUrn: [\n    {\n      urnTipoDocumento: 'constituicao',\n      urnAutoridade: 'federal',\n      urn: 'urn:lex:br:federal:constituicao:1988-10-05;1988',\n      nome: 'Constituio Federal',\n    },\n    {\n      urnTipoDocumento: 'ato.disposicoes.constitucionais.transitorias',\n      urnAutoridade: 'federal',\n      urn: 'urn:lex:br:federal:ato.disposicoes.constitucionais.transitorias:1988-10-05;1988',\n      nome: 'Ato das Disposies Constitucionais Transitrias - ADCT',\n    },\n    {\n      urnTipoDocumento: 'consolidacao.leis.trabalho',\n      urnAutoridade: 'federal',\n      urn: 'urn:lex:br:federal:decreto.lei:1943-05-01;5452',\n      nome: 'Consolidao das Leis do Trabalho - CLT, aprovada pelo Decreto-Lei n 5.452, de 1 de maio de 1943',\n      genero: 'F',\n    },\n    {\n      urnTipoDocumento: 'regimento.interno',\n      urnAutoridade: 'senado.federal',\n      urn: 'urn:lex:br:senado.federal:resolucao:1970-11-27;93',\n      nome: 'Regimento Interno do Senado Federal',\n      genero: 'M',\n    },\n    {\n      urnTipoDocumento: 'regimento.interno',\n      urnAutoridade: 'congresso.nacional',\n      urn: 'urn:lex:br:congresso.nacional:resolucao:1970-08-11;1',\n      nome: 'Regimento Comum do Congresso Nacional',\n      genero: 'M',\n    },\n  ],\n  eventos: [\n    {\n      urn: 'leitura',\n      tipoTextoProcessoLegislativo: 'Texto inicial',\n      genero: 'M',\n    },\n    {\n      urn: 'aprovacao.substitutivo.decisao.terminativa',\n      tipoTextoProcessoLegislativo: 'Redao do vencido em turno suplementar na Comisso',\n      substitutivo: 's',\n      genero: 'F',\n    },\n    {\n      urn: 'aprovacao.substitutivo',\n      tipoTextoProcessoLegislativo: 'Redao do vencido em turno suplementar no Plenrio',\n      substitutivo: 's',\n      genero: 'F',\n    },\n    {\n      urn: 'apresentacao.substitutivo',\n      tipoTextoProcessoLegislativo: 'Texto do substitutivo',\n      substitutivo: 's',\n      genero: 'M',\n    },\n  ],\n};\n","import { generoFeminino, generoMasculino, NomeComGenero } from './../../dispositivo/genero';\nimport { generoFromLetra } from '../../dispositivo/genero';\nimport { Autoridade } from '../../documento/autoridade';\nimport { VOCABULARIO } from './vocabulario';\n\nexport const getAutoridade = (urn: string): Autoridade | undefined => {\n  const partes = urn.replace('urn:lex:br:', '')?.split(':');\n  return VOCABULARIO.autoridades.filter(t => t.urn === partes[0])[0];\n};\n\nexport const getTipo = (urn: string): any => {\n  const tipo = urn.replace('urn:lex:br:', '')?.split(':');\n  return VOCABULARIO.tiposDocumento.filter(t => t.urn === tipo[1])[0];\n};\n\nexport const getNumero = (urn: string): string => {\n  const partes = urn.replace('urn:lex:br:', '')?.split(':');\n  return partes[2]?.indexOf(';') > -1 ? partes[2]?.substring(partes[2].indexOf(';') + 1) : '';\n};\n\nexport const getData = (urn: string): string => {\n  const partes = urn.replace('urn:lex:br:', '')?.split(':');\n\n  const dataInformada = partes[2]?.substring(0, partes[2].indexOf(';'));\n\n  if (/\\d{4}$/.test(dataInformada)) {\n    return dataInformada;\n  }\n  const d = partes[2]?.substring(0, partes[2].indexOf(';'))?.split('-')?.reverse();\n  return d ? d.join('/') : '';\n};\n\nconst retiraFragmento = (urn: string): string => {\n  const i = urn.indexOf('!');\n\n  if (i !== -1) {\n    return urn.substring(0, i);\n  }\n  return urn;\n};\n\nexport const converteDataFormatoBrasileiroParaUrn = (data: string): string => {\n  const dataRegex = data.match(/^(0[1-9]|[12][0-9]|3[01])[-/](0[1-9]|1[012])[-/](\\d{4})$/);\n  return dataRegex ? `${dataRegex[3]}-${dataRegex[2]}-${dataRegex[1]}` : '';\n};\n\nexport const buildUrn = (autoridade: string, tipo: string, numero: string, data: string): string => {\n  const dataPadrao = converteDataFormatoBrasileiroParaUrn(data) ?? data;\n  return `urn:lex:br:${autoridade}:${tipo}:${dataPadrao};${numero}`;\n};\n\nexport const validaUrn = (urn: string): boolean => {\n  const autoridade = getAutoridade(urn)?.urn;\n  const tipo = getTipo(urn)?.urn;\n  const numero = /^\\d{1,5}$/.test(getNumero(urn));\n  const data = !/\\d{4}$/.test(getData(urn)) ? converteDataFormatoBrasileiroParaUrn(getData(urn)) : getData(urn);\n\n  return urn?.startsWith('urn:lex:br:') && autoridade && tipo && numero && data;\n};\n\nexport const getNomeExtenso = (urn: string): string => {\n  const u = retiraFragmento(urn);\n  const numero = getNumero(u);\n  const tipo = getTipo(u)?.descricao;\n  const data = getData(u);\n  return (tipo ? tipo : '') + (numero ? ' n ' + numero : '') + (data.length > 7 ? ' de ' + data : '');\n};\n\nexport const getNomeExtensoComDataExtenso = (urn: string): string => {\n  const u = retiraFragmento(urn);\n  const numero = getNumero(u);\n  const tipo = getTipo(u)?.descricao;\n  const dataString = getData(u);\n  const [dia, mes, ano] = dataString.split('/').map(p => parseInt(p));\n  const dataExtenso = dataString.length > 7 ? getDataExtenso(new Date(ano, mes - 1, dia)) : undefined;\n  return (tipo ? tipo : '') + (numero ? ' n ' + parseInt(numero).toLocaleString('pt-BR') : '') + (dataExtenso ? ', de ' + dataExtenso : '');\n};\n\nexport const buildHtmlLink = (urn: string): string => {\n  const nomeExtenso = getNomeExtensoComDataExtenso(urn);\n  return `<a href=\"${urn}\"> ${nomeExtenso} </a>`;\n};\n\nconst getDataExtenso = (data: Date) => {\n  return data ? data.getDate() + ' de ' + data.toLocaleDateString('pt-BR', { month: 'long' }) + ' de ' + data.getFullYear() : undefined;\n};\n\nexport const getRefGenericaProjeto = (urn: string): NomeComGenero => {\n  const tipo = getTipo(urn);\n  let genero = generoFromLetra(tipo.genero);\n  // TODO - Implementar UrnService.isSubstitutivo\n  const substitutivo = false;\n\n  let nome = 'Projeto';\n  if (genero === generoFeminino) {\n    if (tipo.urn.startsWith('medida.provisoria')) {\n      nome = 'Medida Provisria';\n    } else {\n      nome = 'Proposta';\n    }\n  }\n\n  if (substitutivo) {\n    if (genero === generoFeminino) {\n      nome = 'Substitutivo  ' + nome;\n    } else {\n      nome = 'Substitutivo ao ' + nome;\n    }\n    genero = generoMasculino;\n  }\n\n  return new NomeComGenero(nome, genero);\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao, isDispositivoEmenda } from '../../dispositivo/situacao';\nimport { isArtigo } from '../../dispositivo/tipo';\nimport { Elemento } from '../../elemento';\nimport {\n  getArtigosPosterioresIndependenteAgrupador,\n  getDispositivoAnterior,\n  getDispositivosPosterioresMesmoTipo,\n  getProximoArtigoAnterior,\n  isOriginal,\n  isOriginalAlteradoModificadoOuSuprimido,\n} from '../hierarquia/hierarquiaUtil';\n\nconst I = 1,\n  V = 5,\n  X = 10,\n  L = 50,\n  C = 100,\n  D = 500,\n  M = 1000;\n\nconst ALGARISMOS_ROMANOS: { [key: string]: number } = {\n  M: 1000,\n  CM: 900,\n  D: 500,\n  CD: 400,\n  C: 100,\n  XC: 90,\n  L: 50,\n  XV: 40,\n  X: 10,\n  IX: 9,\n  V: 5,\n  IV: 4,\n  I: 1,\n};\n\nexport const isNumero = (numero: string): boolean => {\n  return /^\\d+$/.test(numero);\n};\n\nexport const isNumeracaoValida = (numero: string): boolean => {\n  return /^\\d{1,}([-]?[a-zA-Z]+)?$/.test(numero);\n};\n\nconst isLetra = (letra: string): boolean => {\n  return /[a-zA-Z]+/.test(letra);\n};\n\nexport const isRomano = (numero: string): boolean => {\n  return /^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$/i.test(numero);\n};\n\nexport const converteLetraParaNumeroArabico = (s: string): string => {\n  if (!isLetra(s)) {\n    throw new Error(`O valor ${s} no  uma sequncia de letras vlida.`);\n  }\n\n  s = s.toLowerCase();\n\n  let acumulador = 0;\n\n  [...s].forEach(atual => (acumulador = atual.toLowerCase().charCodeAt(0) - 97 + 1 + acumulador * 26));\n\n  return acumulador.toString();\n};\n\nexport const converteNumeroArabicoParaLetra = (strNumero: string): string => {\n  const number = parseInt(strNumero);\n  return number ? intToAlpha(number) : strNumero;\n};\n\nexport const intToAlpha = (numero: number): string => {\n  let str = '';\n\n  let d = 0;\n  while (numero > 0) {\n    d = (numero - 1) % 26;\n    numero = (numero - d - 1) / 26;\n    str = str.replace(/^/, String.fromCharCode(97 + d));\n  }\n  return str;\n};\n\nexport const converteNumeroRomanoParaArabico = (numeroRomano: string): string => {\n  if (!isRomano(numeroRomano)) {\n    throw new Error(\"O valor '\" + numeroRomano + \"' no  um nmero em algarismo romano vlido.\");\n  }\n\n  numeroRomano = numeroRomano.toLowerCase();\n\n  let tot = 0;\n  let mode = I;\n  for (let i = numeroRomano.length - 1; i >= 0; i--) {\n    const value = numberCharToInt(numeroRomano.charAt(i));\n\n    if (value > mode) {\n      mode = value;\n    }\n    if (value < mode) {\n      tot -= value;\n    } else {\n      tot += value;\n    }\n  }\n\n  return tot.toString();\n};\n\nconst numberCharToInt = (numeroRomano: string): number => {\n  switch (numeroRomano.toLowerCase()) {\n    case 'i':\n      return I;\n    case 'v':\n      return V;\n    case 'x':\n      return X;\n    case 'l':\n      return L;\n    case 'c':\n      return C;\n    case 'd':\n      return D;\n    case 'm':\n      return M;\n    default:\n      return 0;\n  }\n};\n\nexport const converteNumeroArabicoParaRomano = (numero: string): string => {\n  let resultado = '';\n  let temp;\n  let num = numero.search(/[a-zA-Z-]/) === -1 ? parseInt(numero) : parseInt(numero.substring(0, numero.search(/[a-zA-Z-]/)));\n  const resto = numero.search(/[a-zA-Z-]/) === -1 ? '' : numero.substring(numero.search(/[a-zA-Z-]/));\n\n  for (const key in ALGARISMOS_ROMANOS) {\n    temp = Math.floor(num / ALGARISMOS_ROMANOS[key]);\n    if (temp >= 0) {\n      for (let i = 0; i < temp; i++) {\n        resultado += key;\n      }\n    }\n    num = num % ALGARISMOS_ROMANOS[key];\n  }\n  return resultado + resto;\n};\n\nexport const trataComplemento = (numero: string, func?: any): string => {\n  const num = numero.search(/-[a-zA-Z-]/) === -1 ? numero : numero.substring(0, numero.search(/-[a-zA-Z-]/));\n  const resto = numero.search(/-[a-zA-Z-]/) === -1 ? '' : numero.substring(numero.search(/-[a-zA-Z-]/));\n\n  const converted = func ? func(num) : num;\n\n  return converted + resto?.toUpperCase();\n};\n\nexport const converteLetraComplementoParaNumero = (numero: string): string => {\n  const partes = numero?.split('-');\n  const [num, ...remaining] = partes!;\n\n  const novo = remaining.map(r => converteLetraParaNumeroArabico(r));\n\n  return novo?.length > 0 ? num + '-' + novo?.join('-').toUpperCase() : num;\n};\n\nexport const comparaNumeracao = (a?: string, b?: string): number => {\n  if (!a || (b && a < b)) {\n    return 1;\n  }\n\n  if (!b || (a && a > b)) {\n    return -1;\n  }\n\n  return 0;\n};\n\nexport const rotuloParaEdicao = (texto: string): string => {\n  return texto\n    .replace(/\\./g, '')\n    .replace(/[\"]/g, '')\n    .replace(/^Parte$/i, '')\n    .replace(/^Livro$/i, '')\n    .replace(/^Titulo$/i, '')\n    .replace(/^Capitulo$/i, '')\n    .replace(/^Secao$/i, '')\n    .replace(/^Subsecao$/i, '')\n    .replace(/^Artigo$/i, '')\n    .replace(/^Paragrafo$/i, '')\n    .replace(/^Inciso$/i, '')\n    .replace(/^Alinea$/i, '')\n    .replace(/^Item$/i, '')\n    .replace(/Art/i, '')\n    .replace(//i, '')\n    .replace(//i, '')\n    .replace(/[]/i, '')\n    .replace(/[-][/s]*$/, '')\n    .replace(/[)][/s]*$/, '')\n    .trim();\n};\n\nexport const podeRenumerar = (elemento: Elemento): boolean => {\n  return elemento.hierarquia?.pai?.uuidAlteracao !== undefined && elemento.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL;\n};\n\nexport const calculaSeqOrdem = (d: Dispositivo): SeqOrdem => {\n  const seqOriginal = contaIrmaosOriginaisAte(d);\n\n  if (isOriginal(d)) {\n    return new SeqOrdem(seqOriginal);\n  }\n\n  const seqDispEmenda = contaIrmaosNaoOriginaisConsecutivosAte(d);\n\n  const temOriginalAntes = seqOriginal > 0;\n  const temOriginalDepois = hasIrmaoOriginalDepois(d);\n\n  if (!temOriginalAntes && !temOriginalDepois) {\n    return new SeqOrdem(seqDispEmenda);\n  }\n\n  if (!temOriginalAntes && temOriginalDepois) {\n    const seqOrdem = new SeqOrdem(0);\n    seqOrdem.addNovoSeqOrdem(seqDispEmenda);\n\n    return seqOrdem;\n  }\n\n  if (temOriginalAntes && temOriginalDepois) {\n    const seqOrdem = new SeqOrdem(seqOriginal);\n    seqOrdem.addNovoSeqOrdem(seqDispEmenda);\n\n    return seqOrdem;\n  }\n\n  // if(temOriginalAntes && !temOriginalDepois) {\n  return new SeqOrdem(seqOriginal + seqDispEmenda);\n  // }\n};\n\nexport const hasIrmaoOriginalDepois = (d: Dispositivo): boolean => {\n  const lista = isArtigo(d) ? getArtigosPosterioresIndependenteAgrupador(d) ?? [] : getDispositivosPosterioresMesmoTipo(d);\n  return lista.filter((dispositivo: Dispositivo) => isOriginal(dispositivo)).length > 0;\n};\n\nexport const contaIrmaosOriginaisAte = (d: Dispositivo): number => {\n  let i = 0;\n  const tipo = d.tipo;\n\n  do {\n    if ((isOriginal(d) || isOriginalAlteradoModificadoOuSuprimido(d)) && d.tipo === tipo) {\n      i++;\n    }\n    d = isArtigo(d) ? getProximoArtigoAnterior(d.pai!, d)! : getDispositivoAnterior(d)!;\n  } while (d !== undefined);\n  return i;\n};\n\nexport const contaIrmaosNaoOriginaisConsecutivosAte = (d: Dispositivo): number => {\n  let i = 0;\n  const tipo = d.tipo;\n\n  while (d !== undefined && !isOriginal(d) && !isOriginalAlteradoModificadoOuSuprimido(d) && d.tipo === tipo) {\n    i++;\n    d = isArtigo(d) ? getProximoArtigoAnterior(d.pai!, d)! : getDispositivoAnterior(d)!;\n  }\n  return i;\n};\n\nexport const calculaNumeracao = (d: Dispositivo): string => {\n  return calculaSeqOrdem(d).getNumeracao(isDispositivoEmenda(d));\n};\nclass SeqOrdem {\n  seq: number;\n  letras?: string;\n\n  constructor(seq: number) {\n    this.seq = seq;\n  }\n\n  addNovoSeqOrdem(seq2: number): void {\n    if (this.seq > 0) {\n      this.letras = intToAlpha(seq2).toUpperCase();\n    } else if (seq2 > 1) {\n      this.letras = intToAlpha(seq2 - 1).toUpperCase();\n    }\n  }\n  getNumeracao(isDispositivoEmenda: boolean): string {\n    return '' + this.seq + (isDispositivoEmenda && this.letras ? '-' : '') + (this.letras ?? '');\n  }\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isDispositivoGenerico, isOmissis, isParagrafo } from '../../dispositivo/tipo';\nimport {\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipo,\n  getDispositivoPosterior,\n  getDispositivoPosteriorMesmoTipo,\n  getDispositivosAnterioresMesmoTipo,\n  getDispositivosPosteriores,\n  irmaosMesmoTipo,\n  isDispositivoAlteracao,\n  isDispositivoCabecaAlteracao,\n  isUnicoMesmoTipo,\n} from '../hierarquia/hierarquiaUtil';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { Mensagem, TipoMensagem } from '../util/mensagem';\nimport { comparaNumeracao, isNumero } from './numeracaoUtil';\n\nexport const getDispositivoAnteriorIgnorandoOmissis = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const d = getDispositivoAnteriorMesmoTipo(dispositivo);\n\n  if (!d) {\n    return d;\n  }\n  return getDispositivoAnteriorIgnorandoOmissis(d);\n};\n\nexport const getDispositivoPosteriorIgnorandoOmissis = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const d = getDispositivoPosteriorMesmoTipo(dispositivo);\n\n  if (!d) {\n    return d;\n  }\n  return getDispositivoPosteriorIgnorandoOmissis(d);\n};\n\nexport const validaNumeracaoDispositivo = (dispositivo: Dispositivo): Mensagem[] => {\n  const mensagens: Mensagem[] = [];\n  if (dispositivo === null) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo no foi informado',\n    });\n  }\n  if (dispositivo !== null && dispositivo.numero && dispositivo.numero.trim().length === 0) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo no contm numerao',\n    });\n  }\n  if (dispositivo !== null && dispositivo.rotulo && dispositivo.rotulo.trim().length === 0) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo no contm rtulo',\n    });\n  }\n  return mensagens;\n};\n\nexport const validaNumeracaoDispositivoAlteracao = (dispositivo: Dispositivo): Mensagem[] => {\n  const mensagens: Mensagem[] = [];\n  if (dispositivo === null) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo no foi informado',\n    });\n  }\n  if (dispositivo !== null && dispositivo.numero !== undefined && dispositivo.numero.trim().length === 0) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo no contm numerao',\n    });\n  }\n  if (dispositivo !== null && dispositivo.rotulo?.trim().length === 0) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo no contm rtulo',\n    });\n  }\n  if (dispositivo !== null && !isDispositivoGenerico(dispositivo) && dispositivo.rotulo?.endsWith(dispositivo.tipo)) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O rtulo informado no  vlido. Numere o dispositivo',\n    });\n  }\n  if (dispositivo !== null && isDispositivoAlteracao(dispositivo) && isParagrafo(dispositivo) && !isUnicoMesmoTipo(dispositivo) && dispositivo.rotulo?.endsWith('nico.')) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `Quando houver mais de um ${dispositivo.descricao}, no pode se tratar de '${dispositivo.descricao} nico'`,\n    });\n  }\n\n  if (\n    dispositivo !== null &&\n    !isDispositivoCabecaAlteracao(dispositivo) &&\n    dispositivo.numero !== undefined &&\n    dispositivo.pai?.indexOf(dispositivo) === 0 &&\n    dispositivo.numero !== '1'\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: ' necessrio um omissis antes deste dispositivo',\n    });\n  }\n  if (\n    dispositivo !== null &&\n    isOmissis(dispositivo) &&\n    (getDispositivoAnterior(dispositivo)?.tipo === TipoDispositivo.omissis.name || getDispositivoPosterior(dispositivo)?.tipo === TipoDispositivo.omissis.name)\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'No pode haver mais de um omissis sequencialmente',\n    });\n  }\n  if (\n    dispositivo !== null &&\n    dispositivo.numero !== undefined &&\n    dispositivo.pai!.indexOf(dispositivo) > 0 &&\n    getDispositivosAnterioresMesmoTipo(dispositivo)\n      .filter(d => d.numero !== undefined)\n      .filter(d => comparaNumeracao(d.numero, dispositivo.numero) === -1).length > 0\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo tem nmero menor do que algum dispositivo anterior',\n    });\n  }\n  if (\n    dispositivo !== null &&\n    dispositivo.numero !== undefined &&\n    !dispositivo.pai!.isLastFilho(dispositivo) &&\n    getDispositivosPosteriores(dispositivo)\n      .filter(d => dispositivo.pai === d.pai && d.numero !== undefined)\n      .filter(d => comparaNumeracao(d.numero, dispositivo.numero) === 1).length > 0\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo tem nmero maior do que algum dispositivo posterior',\n    });\n  }\n  if (\n    dispositivo !== null &&\n    !isDispositivoCabecaAlteracao(dispositivo) &&\n    dispositivo.numero !== undefined &&\n    irmaosMesmoTipo(dispositivo).filter(d => d.numero && d.numero === dispositivo.numero).length > 1\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo tem nmero igual a de outro dispositivo',\n    });\n  }\n  if (\n    dispositivo !== null &&\n    !isDispositivoCabecaAlteracao(dispositivo) &&\n    dispositivo.numero !== undefined &&\n    isNumero(dispositivo.numero) &&\n    parseInt(dispositivo.numero) > 2 &&\n    dispositivo.pai!.indexOf(dispositivo) > 0 &&\n    getDispositivoAnteriorMesmoTipo(dispositivo) &&\n    dispositivo.tipo !== getDispositivoAnteriorMesmoTipo(dispositivo)?.rotulo &&\n    irmaosMesmoTipo(dispositivo).filter(d => d.numero && d.numero === dispositivo.numero).length === 0 &&\n    parseInt(dispositivo.numero) !== parseInt(getDispositivoAnteriorMesmoTipo(dispositivo)!.numero!) + 1\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: ' necessrio um omissis antes deste dispositivo',\n    });\n  }\n  return mensagens;\n};\n\nexport const validaNumeracao = (dispositivo: Dispositivo): Mensagem[] => {\n  return isDispositivoAlteracao(dispositivo) ? validaNumeracaoDispositivoAlteracao(dispositivo) : validaNumeracaoDispositivo(dispositivo);\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { validaTexto } from '../conteudo/conteudoValidator';\nimport { validaUrn } from '../documento/urnUtil';\nimport { isOriginal } from '../hierarquia/hierarquiaUtil';\nimport { validaHierarquia } from '../hierarquia/hierarquiaValidator';\nimport { validaNumeracao } from '../numeracao/numeracaoValidator';\nimport { Mensagem, TipoMensagem } from '../util/mensagem';\n\nconst validaReferencia = (dispositivo: Dispositivo): Mensagem[] => {\n  const mensagens: Mensagem[] = [];\n\n  if (!dispositivo.alteracoes || !dispositivo.alteracoes.base) {\n    return [];\n  }\n\n  if (!validaUrn(dispositivo.alteracoes.base)) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `No foi informada uma norma alterada vlida`,\n    });\n  }\n\n  return mensagens;\n};\n\nexport const validaDispositivo = (dispositivo: Dispositivo): Mensagem[] => {\n  if (isOriginal(dispositivo)) {\n    return [];\n  }\n  return validaHierarquia(dispositivo).concat(validaTexto(dispositivo), validaNumeracao(dispositivo), validaReferencia(dispositivo));\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isAgrupadorGenerico, isDispositivoGenerico } from '../../dispositivo/tipo';\nimport { Mensagem, TipoMensagem } from '../util/mensagem';\n\nexport const validaHierarquia = (dispositivo: Dispositivo): Mensagem[] => {\n  const mensagens: Mensagem[] = [];\n  if (dispositivo === null) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo no foi informado',\n    });\n  }\n  if (dispositivo !== null && dispositivo.filhos.length > 0 && dispositivo.tiposPermitidosFilhos!.length === 0) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `Segundo a Legislao vigente, ${dispositivo.descricao} no poderia possuir filhos`,\n    });\n  }\n  if (dispositivo !== null && (isDispositivoGenerico(dispositivo) || isAgrupadorGenerico(dispositivo))) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `No foi possvel validar a natureza deste dispositivo com base na legislao vigente`,\n    });\n  }\n  if (\n    dispositivo !== null &&\n    dispositivo.pai &&\n    !isAgrupadorGenerico(dispositivo.pai) &&\n    !isDispositivoGenerico(dispositivo) &&\n    !dispositivo.tiposPermitidosPai!.includes(dispositivo.pai.tipo)\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `Segundo a Legislao vigente, ${dispositivo.descricao} somente poderia pertencer a ${dispositivo.tiposPermitidosPai!.join(', ')}`,\n    });\n  }\n  if (\n    dispositivo !== null &&\n    !isDispositivoGenerico &&\n    dispositivo.filhos.length > 0 &&\n    (dispositivo.tiposPermitidosFilhos!.length === 0 || dispositivo.filhos.filter(filho => !dispositivo.tiposPermitidosFilhos!.includes(filho.tipo)).length > 0)\n  ) {\n    const relacaoFilhos =\n      dispositivo.tiposPermitidosFilhos!.length === 0 ? 'no poderia possuir filhos' : `somente poderia possuir ${dispositivo.tiposPermitidosFilhos!.join(', ')}`;\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `Segundo a Legislao vigente, ${dispositivo.descricao} ${relacaoFilhos}`,\n    });\n  }\n  return mensagens;\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao, TipoSituacao } from '../../dispositivo/situacao';\nimport { isIncisoCaput } from '../../dispositivo/tipo';\nimport { Elemento } from '../../elemento';\nimport { ElementoAction } from '../acao';\nimport { restaurarElementoAction } from '../acao/restaurarElemento';\n\nexport class DispositivoSuprimido implements TipoSituacao {\n  descricaoSituacao = DescricaoSituacao.DISPOSITIVO_SUPRIMIDO;\n  dispositivoOriginal: Elemento;\n\n  constructor(dispositivoOriginal: Elemento) {\n    this.dispositivoOriginal = dispositivoOriginal;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  getAcoesPermitidas(dispositivo: Dispositivo, acoes: any[]): any[] {\n    const a: ElementoAction[] = [];\n\n    if ((isIncisoCaput(dispositivo) ? dispositivo.pai!.pai! : dispositivo.pai!).situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n      a.push(restaurarElementoAction);\n    }\n\n    return a;\n  }\n}\n","import { getArticulacao, isDispositivoAlteracao } from './../hierarquia/hierarquiaUtil';\nimport { isArtigo, isParagrafo } from './../../dispositivo/tipo';\nimport { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isArticulacao, isCaput, isOmissis } from '../../dispositivo/tipo';\nimport { getDispositivosAnterioresMesmoTipo, isUnicoMesmoTipo } from '../hierarquia/hierarquiaUtil';\nimport { converteLetraComplementoParaNumero } from './../numeracao/numeracaoUtil';\n\nexport const buildHref = (dispositivo: Dispositivo): string | undefined => {\n  if (isArticulacao(dispositivo)) {\n    return 'cpt_alt1';\n  }\n\n  if (dispositivo.tagId) {\n    return (\n      dispositivo.tagId +\n      (isCaput(dispositivo)\n        ? ''\n        : isOmissis(dispositivo)\n        ? getDispositivosAnterioresMesmoTipo(dispositivo).length + 1\n        : dispositivo.numero\n        ? (isArtigo(dispositivo) || isParagrafo(dispositivo)) && dispositivo.numero === '1' && isUnicoMesmoTipo(dispositivo)\n          ? '1u'\n          : converteLetraComplementoParaNumero(dispositivo.numero!)\n        : `[urn:${dispositivo.uuid}]`)\n    );\n  }\n\n  return undefined;\n};\n\nconst buildHierarquia = (dispositivo: Dispositivo, idArray: string[] = []): void => {\n  if (isArticulacao(dispositivo) && dispositivo.pai === undefined) {\n    return;\n  }\n\n  const href = buildHref(dispositivo);\n\n  if (href) {\n    idArray.unshift(href);\n  }\n\n  // ID de artigo e de dispositivos de artigo no incluem ids de agrupadores de artigo.\n  if (isArtigo(dispositivo)) {\n    if (isDispositivoAlteracao(dispositivo)) {\n      // Pula agrupadores de artigo dentro do bloco de alterao\n      const alteracao = getArticulacao(dispositivo);\n      buildHierarquia(alteracao, idArray);\n    }\n    return;\n  }\n\n  buildHierarquia(dispositivo.pai!, idArray);\n};\n\nexport const buildId = (dispositivo: Dispositivo): string => {\n  const idArray = [];\n\n  buildHierarquia(dispositivo, idArray);\n\n  return idArray.join('_');\n};\n\nexport const buildIdAlteracao = (dispositivo: Dispositivo): string => {\n  const idArray = [];\n\n  buildHierarquia(dispositivo, idArray);\n\n  return idArray.join('_') + '_alt1';\n};\n\n/* export const gHref = (dispositivo: Dispositivo): string => {\n  if (!dispositivo.numero && dispositivo.rotulo) {\n    dispositivo.createNumeroFromRotulo(dispositivo.rotulo);\n  }\n  return dispositivo.numero ?? '';\n}; */\n","import { Articulacao, Artigo, Dispositivo } from '../dispositivo/dispositivo';\nimport { isAgrupador, isArticulacao, isArtigo, isCaput, isDispositivoDeArtigo, isDispositivoGenerico, isIncisoCaput, isParagrafo } from '../dispositivo/tipo';\nimport { validaDispositivo } from '../lexml/dispositivo/dispositivoValidator';\nimport {\n  buildListaDispositivos,\n  findDispositivoByUuid,\n  getArticulacao,\n  getDispositivosPosteriores,\n  hasFilhos,\n  irmaosMesmoTipo,\n  isArticulacaoAlteracao,\n  isDispositivoAlteracao,\n  isDispositivoCabecaAlteracao,\n  isOriginal,\n} from '../lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoSuprimido } from '../lexml/situacao/dispositivoSuprimido';\nimport { TipoDispositivo } from '../lexml/tipo/tipoDispositivo';\nimport { buildHref } from '../lexml/util/idUtil';\nimport { Elemento, Referencia } from './elemento';\n\nexport const isValid = (elemento?: Referencia): void => {\n  if (elemento === undefined || elemento.uuid === undefined) {\n    throw new Error('No foi informado um elemento vlido');\n  }\n};\n\nexport const isElementoDispositivoAlteracao = (elemento: Partial<Elemento>): boolean => {\n  return elemento.hierarquia?.pai?.uuidAlteracao !== undefined || elemento.uuidAlteracao !== undefined;\n};\n\nconst getNivel = (dispositivo: Dispositivo, atual = 0): number => {\n  if (dispositivo?.pai === undefined || isAgrupador(dispositivo)) {\n    return atual;\n  }\n\n  if (isArtigo(dispositivo)) {\n    return isDispositivoAlteracao(dispositivo) ? ++atual : atual;\n  }\n\n  atual = isDispositivoCabecaAlteracao(dispositivo?.pai) ? atual + 2 : ++atual;\n  return isArtigo(dispositivo?.pai) ? atual : getNivel(dispositivo.pai, atual);\n};\n\nconst buildElementoPai = (dispositivo: Dispositivo): Referencia | undefined => {\n  const pai = dispositivo.pai ? (isCaput(dispositivo.pai) ? dispositivo.pai.pai : dispositivo.pai) : undefined;\n  return {\n    tipo: pai?.tipo,\n    uuid: pai?.uuid,\n    uuidAlteracao: pai && isDispositivoAlteracao(dispositivo) ? getArticulacao(dispositivo).pai?.uuid : undefined,\n  };\n};\n\nexport const createElemento = (dispositivo: Dispositivo, acoes = true): Elemento => {\n  const pai = dispositivo.pai!;\n  return {\n    tipo: dispositivo.tipo,\n    nivel: getNivel(dispositivo),\n    agrupador: isAgrupador(dispositivo),\n    hierarquia: {\n      pai: pai ? buildElementoPai(dispositivo) : undefined,\n      posicao: pai ? pai.indexOf(dispositivo) : undefined,\n      numero: dispositivo.numero,\n    },\n    editavel: isArticulacao(dispositivo) || dispositivo.situacao instanceof DispositivoSuprimido ? false : true,\n    sendoEditado: false,\n    uuid: dispositivo.uuid,\n    lexmlId: dispositivo.id && dispositivo.numero && buildHref(dispositivo),\n    numero: dispositivo.numero,\n    rotulo: dispositivo.rotulo ?? '',\n    conteudo: {\n      texto: dispositivo.texto,\n    },\n    norma: dispositivo.alteracoes?.base,\n    index: 0,\n    acoesPossiveis: acoes ? dispositivo.getAcoesPossiveis(dispositivo) : [],\n    descricaoSituacao: dispositivo.situacao?.descricaoSituacao,\n    mensagens: isOriginal(dispositivo) ? [] : dispositivo.mensagens,\n  };\n};\n\nexport const createElementos = (elementos: Elemento[], dispositivo: Dispositivo): void => {\n  if (dispositivo.filhos === undefined) {\n    return;\n  }\n  dispositivo.filhos.forEach(d => {\n    const el = createElemento(d);\n\n    if (isArtigo(d)) {\n      el.conteudo!.texto = (d as Artigo).caput!.texto;\n    }\n    elementos.push(el);\n\n    if (isArtigo(d) && (d as Artigo).hasAlteracao()) {\n      (d as Artigo).alteracoes?.filhos.forEach(f => {\n        elementos.push(createElemento(f));\n        createElementos(elementos, f);\n      });\n    }\n    createElementos(elementos, d);\n  });\n};\n\nexport const getElementos = (dispositivo: Dispositivo): Elemento[] => {\n  const elementos: Elemento[] = [];\n  elementos.push(createElemento(dispositivo, true));\n\n  if (isArtigo(dispositivo) && (dispositivo as Artigo).hasAlteracao()) {\n    if (isArtigo(dispositivo) && (dispositivo as Artigo).hasAlteracao()) {\n      (dispositivo as Artigo).alteracoes?.filhos.forEach(f => {\n        elementos.push(createElemento(f));\n        createElementos(elementos, f);\n      });\n    }\n  }\n\n  createElementos(elementos, dispositivo);\n\n  return elementos;\n};\n\nexport const getArticulacaoFromElemento = (articulacao: Articulacao, elemento: Elemento | Referencia): Articulacao => {\n  if (!isElementoDispositivoAlteracao(elemento) || isArticulacaoAlteracao(articulacao)) {\n    return articulacao;\n  }\n\n  return (\n    getDispositivoFromElemento(articulacao!, {\n      uuid: (elemento as Elemento).hierarquia ? (elemento as Elemento).hierarquia!.pai!.uuidAlteracao : elemento.uuidAlteracao,\n    })?.alteracoes ?? articulacao\n  );\n};\n\nexport const getDispositivoFromElemento = (art: Articulacao, referencia: Partial<Elemento>, ignorarElementoAlteracao = false): Dispositivo | undefined => {\n  const articulacao = getArticulacaoFromElemento(art, referencia);\n\n  if (!ignorarElementoAlteracao && isElementoDispositivoAlteracao(referencia)) {\n    const ref = getDispositivoFromElemento(articulacao, {\n      uuid: referencia.hierarquia ? referencia.hierarquia!.pai!.uuidAlteracao : referencia.uuidAlteracao,\n    });\n\n    if (!ref?.alteracoes) {\n      return undefined;\n    }\n\n    return ref.alteracoes?.filhos\n      .flatMap(f => {\n        const lista: Dispositivo[] = [];\n        buildListaDispositivos(f, lista);\n        return lista;\n      })\n      .filter((el: Referencia) => el.uuid === referencia.uuid)[0];\n  }\n\n  if (referencia?.tipo === TipoDispositivo.artigo.tipo) {\n    const artigo = articulacao.filhos!.find(a => a.uuid === referencia.uuid);\n    if (artigo) {\n      return artigo;\n    }\n  }\n\n  const dispositivo = referencia?.tipo === TipoDispositivo.articulacao.tipo || referencia?.uuid === undefined ? articulacao : findDispositivoByUuid(articulacao, referencia.uuid!);\n\n  if (dispositivo === null) {\n    return undefined;\n  }\n  return dispositivo;\n};\n\nconst criaElementoValidadoSeNecessario = (validados: Elemento[], dispositivo: Dispositivo, incluiAcoes?: boolean): void => {\n  const mensagens = validaDispositivo(dispositivo);\n\n  if (mensagens.length > 0 || (dispositivo.mensagens && dispositivo.mensagens?.length > 0)) {\n    dispositivo.mensagens = mensagens;\n    const elemento = createElemento(dispositivo, incluiAcoes);\n    elemento.mensagens = validaDispositivo(dispositivo);\n    validados.push(elemento);\n  }\n};\n\nexport const criaListaElementosAfinsValidados = (dispositivo: Dispositivo | undefined, incluiDispositivo = true): Elemento[] => {\n  const validados: Elemento[] = [];\n\n  if (!dispositivo) {\n    return [];\n  }\n  if (isDispositivoAlteracao(dispositivo) && hasFilhos(dispositivo) && dispositivo.filhos.filter(d => d.tipo === TipoDispositivo.omissis.tipo).length > 0) {\n    criaElementoValidadoSeNecessario(validados, dispositivo);\n    dispositivo.filhos.filter(d => d.tipo === TipoDispositivo.omissis.tipo).forEach(o => criaElementoValidadoSeNecessario(validados, o));\n  }\n\n  if (isDispositivoDeArtigo(dispositivo) || isDispositivoGenerico(dispositivo)) {\n    const parent = isIncisoCaput(dispositivo) ? dispositivo.pai!.pai! : dispositivo.pai!;\n    criaElementoValidadoSeNecessario(validados, parent);\n    if (isAgrupador(parent)) {\n      criaElementoValidadoSeNecessario(validados, isIncisoCaput(dispositivo) ? dispositivo.pai!.pai! : dispositivo.pai!);\n    }\n    irmaosMesmoTipo(dispositivo).forEach(filho => {\n      !incluiDispositivo && filho === dispositivo ? undefined : criaElementoValidadoSeNecessario(validados, filho, true);\n    });\n  } else if (incluiDispositivo && !isArticulacao(dispositivo) && !isAgrupador(dispositivo)) {\n    criaElementoValidadoSeNecessario(validados, dispositivo, true);\n  }\n\n  return validados;\n};\n\nexport const listaDispositivosRenumerados = (dispositivo: Dispositivo): Dispositivo[] => {\n  return (isArtigo(dispositivo) || isParagrafo(dispositivo)) && irmaosMesmoTipo(dispositivo).length === 2\n    ? irmaosMesmoTipo(dispositivo).filter(d => dispositivo.uuid !== d.uuid)\n    : getDispositivosPosteriores(dispositivo, true).filter(d => d.tipo === dispositivo.tipo);\n};\n\nexport const buildListaElementosRenumerados = (dispositivo: Dispositivo): Elemento[] => {\n  return listaDispositivosRenumerados(dispositivo).map(d => {\n    d.mensagens = validaDispositivo(d);\n    const el = createElemento(d);\n    return el;\n  });\n};\n\nexport const validaFilhos = (validados: Elemento[], filhos: Dispositivo[]): void => {\n  filhos.forEach(filho => {\n    criaElementoValidadoSeNecessario(validados, filho);\n    filhos ? validaFilhos(validados, filho.filhos) : undefined;\n  });\n};\n","import { Articulacao } from '../model/dispositivo/dispositivo';\nimport { Elemento } from '../model/elemento';\nimport { Mensagem } from '../model/lexml/util/mensagem';\n\nexport enum StateType {\n  ArticulacaoAtualizada = 'ArticulacaoAtualizada',\n  ComandoEmendaGerado = 'ComandoEmendaGerado',\n  DocumentoCarregado = 'DocumentoCarregado',\n  InformarNorma = 'InformarNorma',\n  ElementoModificado = 'ElementoModificado',\n  ElementoIncluido = 'ElementoIncluido',\n  ElementoRemovido = 'ElementoRemovido',\n  ElementoRenumerado = 'ElementoRenumerado',\n  ElementoRestaurado = 'ElementoRestaurado',\n  ElementoSuprimido = 'ElementoSuprimido',\n  ElementoValidado = 'ElementoValidado',\n  ElementoSelecionado = 'ElementoSelecionado',\n  ElementoMarcado = 'ElementoMarcado',\n  SituacaoElementoModificada = 'SituacaoElementoModificada',\n}\nexport interface StateEvent {\n  stateType: StateType;\n  referencia?: Elemento;\n  pai?: Elemento;\n  posicao?: number;\n  elementos?: Elemento[];\n}\n\nexport interface State {\n  articulacao?: Articulacao;\n  modo: string | undefined;\n  past?: StateEvent[];\n  present: StateEvent[];\n  future?: StateEvent[];\n  ui?: {\n    events: StateEvent[];\n    message?: Mensagem;\n  };\n}\n\nexport const createState = (state: any, events: StateEvent[], past: StateEvent[], present: StateEvent[], future: StateEvent[]): State => {\n  return {\n    articulacao: state.articulacao,\n    modo: undefined,\n    past: past,\n    present: present,\n    future: future,\n    ui: {\n      events,\n    },\n  };\n};\n\nexport class DefaultState implements State {\n  articulacao?: Articulacao;\n  modo: string | undefined;\n  past?: StateEvent[];\n  present: StateEvent[] = [];\n  future?: StateEvent[];\n  ui?: {\n    events: StateEvent[];\n    message?: Mensagem;\n  };\n}\n","import { Articulacao } from '../../../model/dispositivo/dispositivo';\nimport { getElementos } from '../../../model/elemento/elementoUtil';\nimport { State, StateType } from '../../state';\n\nexport const load = (articulacao: Articulacao, modo?: string): State => {\n  const elementos = getElementos(articulacao);\n  return {\n    articulacao,\n    modo,\n    past: [],\n    present: [],\n    future: [],\n    ui: {\n      events: [\n        {\n          stateType: StateType.DocumentoCarregado,\n          elementos: elementos,\n        },\n      ],\n    },\n  };\n};\n","import { State } from '../../state';\nimport { load } from './loadArticulacao';\n\nexport const abreArticulacao = (state: any, action: any): State => {\n  return load(action.articulacao!, action.classificacao);\n};\n","export interface Counter {\n  next(): number;\n}\n\nexport function generateId(init = 0): Counter {\n  return {\n    next: (): number => ++init,\n  };\n}\n\nexport const Counter = generateId();\n","/* eslint-disable @typescript-eslint/explicit-function-return-type */\nimport { Mensagem } from '../lexml/util/mensagem';\n\nexport interface Validacao {\n  mensagens?: Mensagem[];\n}\n\nexport function ValidacaoDispositivo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Validacao {\n    mensagens: Mensagem[] = [];\n  };\n}\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\nimport { ADICIONAR_ELEMENTO } from './adicionarElementoAction';\n\nexport const INICIAR_BLOCO = 'INICIAR_BLOCO';\nexport const FINALIZAR_BLOCO = 'FINALIZAR_BLOCO';\n\nclass BlocoAlteracao implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  isDispositivoAlteracao = true;\n  constructor(private tipoAcao: string) {\n    this.descricao = tipoAcao === INICIAR_BLOCO ? `Inserir bloco de alterao` : `Finalizar bloco de alterao`;\n  }\n\n  execute(atual: Referencia, conteudo?: string, tipo?: Referencia, hasDesmembramento = false): any {\n    return {\n      type: ADICIONAR_ELEMENTO,\n      subType: this.tipoAcao,\n      atual,\n      novo: {\n        tipo,\n        isDispositivoAlteracao: this.isDispositivoAlteracao,\n        conteudo: {\n          texto: conteudo,\n        },\n      },\n      hasDesmembramento,\n    };\n  }\n}\nexport const iniciarBlocoAlteracao = new BlocoAlteracao(INICIAR_BLOCO);\nexport const finalizarBlocoAlteracao = new BlocoAlteracao(FINALIZAR_BLOCO);\n","import { Alteracoes, BlocoAlteracao } from '../../dispositivo/blocoAlteracao';\n\nexport function BlocoAlteracaoNaoPermitido<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements BlocoAlteracao {\n    get alteracoes(): Alteracoes | undefined {\n      return undefined;\n    }\n    hasAlteracao(): boolean {\n      return false;\n    }\n  };\n}\n","export enum TipoConteudo {\n  ConteudoTexto = 'Contedo de Texto',\n}\n","export enum ClassificacaoDocumento {\n  EMENDA = 'emenda',\n  EMENDA_ARTIGO_ONDE_COUBER = 'emendaArtigoOndeCouber',\n  NORMA = 'norma',\n  PROJETO = 'projeto',\n}\n","import { Conteudo } from '../../dispositivo/conteudo';\nimport { TipoConteudo } from './tipoConteudo';\n\nexport function ConteudoDispositivo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Conteudo {\n    readonly tipoConteudo = TipoConteudo.ConteudoTexto;\n    texto = '';\n  };\n}\n","import { Articulacao, Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { Hierarquia } from '../../dispositivo/hierarquia';\nimport { isArtigo } from '../../dispositivo/tipo';\nimport { calculaNumeracao } from '../numeracao/numeracaoUtil';\nimport { buildId } from '../util/idUtil';\nimport { getArticulacao, getDispositivoAnterior, getProximoArtigoAnterior } from './hierarquiaUtil';\n\nexport function HierarquiaAgrupador<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Hierarquia {\n    pai?: Dispositivo;\n    private _filhos?: Dispositivo[];\n\n    addFilho(filho: Dispositivo, referencia?: Dispositivo): void {\n      if (referencia && this.filhos.indexOf(referencia) >= 0) {\n        const posicao = this.filhos.indexOf(referencia) + 1;\n        this.isLastFilho(referencia) ? this.filhos.push(filho) : this.filhos.splice(posicao, 0, filho);\n      } else {\n        this.filhos.push(filho);\n      }\n      isArtigo(filho) ? getArticulacao(filho).addArtigo(filho, referencia) : null;\n    }\n\n    addFilhoOnPosition(filho: Dispositivo, posicao: number): void {\n      this.filhos.splice(posicao, 0, filho);\n      if (isArtigo(filho)) {\n        const anterior = getDispositivoAnterior(filho) ?? getProximoArtigoAnterior(filho.pai!.pai!, filho.pai!);\n        const articulacao = getArticulacao(filho);\n        const pos = anterior ? articulacao.indexOfArtigo(anterior as Artigo) + 1 : 0;\n        articulacao.addArtigoOnPosition(filho, pos);\n      }\n    }\n\n    hasArtigos(): boolean {\n      return this.filhos.filter(f => isArtigo(f)).length > 0;\n    }\n\n    isLastFilho(filho: Dispositivo): boolean {\n      return this.filhos.indexOf(filho) === this.filhos.length - 1;\n    }\n\n    get filhos(): Dispositivo[] {\n      this._filhos = this._filhos ?? [];\n      return this._filhos;\n    }\n\n    indexOf(filho: Dispositivo): number {\n      return this.filhos.indexOf(filho);\n    }\n\n    removeFilho(filho: Dispositivo): void {\n      this._filhos = this.filhos.filter(f => f.uuid !== filho.uuid);\n      isArtigo(filho) ? (getArticulacao(filho) as Articulacao).removeArtigo(filho as Artigo) : null;\n    }\n\n    renumeraFilhos(): void {\n      this.filhos\n        .filter(filho => !isArtigo(filho))\n        .forEach(f => {\n          f.numero = calculaNumeracao(f);\n          f.createRotulo(f);\n          f.id = buildId(f);\n        });\n      (getArticulacao(this.filhos[0]) as Articulacao)?.renumeraArtigos();\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Hierarquia } from '../../dispositivo/hierarquia';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isArtigo } from '../../dispositivo/tipo';\nimport { calculaNumeracao } from '../numeracao/numeracaoUtil';\nimport { buildId } from '../util/idUtil';\nimport { isDispositivoAlteracao } from './hierarquiaUtil';\n\nexport function HierarquiaDispositivo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Hierarquia {\n    pai?: Dispositivo;\n    private _filhos?: Dispositivo[];\n\n    addFilho(filho: Dispositivo, referencia?: Dispositivo): void {\n      if (referencia) {\n        const posicao = this.filhos.indexOf(referencia) + 1;\n        this.isLastFilho(referencia) ? this.filhos.push(filho) : this.filhos.splice(posicao, 0, filho);\n      } else {\n        this.filhos.push(filho);\n      }\n    }\n\n    addFilhoOnPosition(filho: Dispositivo, posicao: number): void {\n      this.filhos.splice(posicao, 0, filho);\n    }\n\n    hasArtigos(): boolean {\n      return this.filhos.filter(f => isArtigo(f)).length > 0;\n    }\n\n    isLastFilho(filho: Dispositivo): boolean {\n      return this.filhos.indexOf(filho) === this.filhos.length - 1;\n    }\n\n    get filhos(): Dispositivo[] {\n      this._filhos = this._filhos ?? [];\n      return this._filhos;\n    }\n\n    indexOf(filho: Dispositivo): number {\n      return this.filhos.indexOf(filho);\n    }\n\n    removeFilho(filho: Dispositivo): void {\n      this._filhos = this.filhos.filter(f => f.uuid !== filho.uuid);\n    }\n\n    renumeraFilhos(): void {\n      this.filhos\n        .filter(\n          f =>\n            !isDispositivoAlteracao(f) &&\n            (f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_NOVO || f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO)\n        )\n        .forEach(filho => {\n          filho.numero = calculaNumeracao(filho);\n          filho.createRotulo(filho);\n          filho.id = buildId(filho);\n        });\n    }\n  };\n}\n","import { StringBuilder } from '../../../util/string-util';\nimport { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Numeracao } from '../../dispositivo/numeracao';\nimport { irmaosMesmoTipo, isDispositivoCabecaAlteracao } from '../hierarquia/hierarquiaUtil';\nimport { isDispositivoRaiz } from './../hierarquia/hierarquiaUtil';\nimport { converteNumeroArabicoParaRomano, converteNumeroRomanoParaArabico, isNumeracaoValida, isRomano, trataComplemento } from './numeracaoUtil';\n\nexport function NumeracaoAgrupador<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoAgrupadorLcp95';\n    numero?: string;\n    rotulo?: string;\n    informouAgrupadorUnico = false;\n    private getNomeAgrupadorUnico(dispositivo: Dispositivo): string {\n      return `${dispositivo.descricao} nic${dispositivo.artigoDefinido}`.toLocaleUpperCase();\n    }\n\n    private normalizaNumeracao(rotulo: string): string {\n      const partes = rotulo.trim().split(/\\s+/);\n      if (partes.length !== 2) {\n        return '';\n      }\n      const numeroRotulo = partes[1];\n      const partesRotulo = numeroRotulo.split('-');\n      if (!isRomano(partesRotulo[0])) {\n        return '';\n      }\n      partesRotulo[0] = converteNumeroRomanoParaArabico(partesRotulo[0]);\n      return partesRotulo.join('-');\n    }\n\n    createNumeroFromRotulo(rotulo: string): void {\n      this.informouAgrupadorUnico = /.*[u]nic[ao]/i.test(rotulo);\n      if (this.informouAgrupadorUnico) {\n        this.numero = '1';\n      } else {\n        const temp = this.normalizaNumeracao(rotulo!);\n        this.numero = this.informouAgrupadorUnico ? '1' : isNumeracaoValida(temp) ? temp : undefined;\n      }\n    }\n\n    createRotulo(dispositivo: Dispositivo): void {\n      const prefixo = dispositivo.descricao === undefined ? dispositivo.name ?? '' : dispositivo.descricao.toLocaleUpperCase();\n\n      if (this.numero === undefined) {\n        this.rotulo = isDispositivoCabecaAlteracao(dispositivo) ? '\\u201C' + dispositivo.tipo : dispositivo.tipo;\n      } else if (this.numero !== undefined && !isNumeracaoValida(this.numero)) {\n        this.rotulo = prefixo + ' ' + this.numero;\n      } else if (dispositivo.isDispositivoAlteracao && isDispositivoCabecaAlteracao(dispositivo)) {\n        this.rotulo =\n          '\\u201C' + (this.informouAgrupadorUnico ? this.getNomeAgrupadorUnico(dispositivo) : prefixo + ' ' + trataComplemento(this.numero, converteNumeroArabicoParaRomano));\n      } else {\n        irmaosMesmoTipo(dispositivo).length === 1\n          ? (this.rotulo = this.getNomeAgrupadorUnico(dispositivo))\n          : (this.rotulo = prefixo + ' ' + trataComplemento(this.numero, converteNumeroArabicoParaRomano));\n      }\n    }\n\n    getNumeracaoParaComandoEmenda(): string {\n      const sb = new StringBuilder();\n\n      const numero = this.numero ? trataComplemento(this.numero!, converteNumeroArabicoParaRomano) : '???';\n      sb.append(this.descricao + ' ' + numero);\n\n      const pai = this.pai as Dispositivo;\n      if (!!pai && !isDispositivoRaiz(pai)) {\n        sb.append(pai.pronomePossessivoSingular);\n        sb.append(' ');\n        sb.append(pai.getNumeracaoParaComandoEmenda());\n      }\n\n      return sb.toString();\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(): string {\n      return this.getNumeracaoParaComandoEmenda();\n    }\n  };\n}\n","import { Referencia } from '../../elemento';\nimport { adicionarAlinea, adicionarArtigo, adicionarElementoAction, adicionarInciso, adicionarItem, adicionarParagrafo } from './adicionarElementoAction';\nimport { adicionarCapitulo, adicionarLivro, adicionarParte, adicionarSecao, adicionarSubsecao, adicionarTitulo, AgruparElemento } from './agruparElementoAction';\nimport { finalizarBlocoAlteracao, iniciarBlocoAlteracao } from './blocoAlteracaoAction';\nimport { informarNormaAction } from './informarNormaAction';\nimport { moverElementoAbaixoAction } from './moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from './moverElementoAcimaAction';\nimport { removerElementoAction } from './removerElementoAction';\nimport { renumerarElementoAction } from './renumerarElementoAction';\nimport { restaurarElementoAction } from './restaurarElemento';\nimport { suprimirElementoAction } from './suprimirElemento';\nimport {\n  transformaAlineaEmItem,\n  transformarAlineaEmIncisoCaput,\n  transformarAlineaEmIncisoParagrafo,\n  transformarArtigoEmParagrafo,\n  transformarEmOmissisAlinea,\n  transformarEmOmissisIncisoCaput,\n  transformarEmOmissisIncisoParagrafo,\n  transformarEmOmissisItem,\n  transformarEmOmissisParagrafo,\n  transformarGenericoEmAlinea,\n  transformarGenericoEmInciso,\n  transformarGenericoEmItem,\n  transformarIncisoCaputEmParagrafo,\n  transformarIncisoParagrafoEmParagrafo,\n  transformarItemEmAlinea,\n  transformarOmissisEmAlinea,\n  transformarOmissisEmArtigo,\n  transformarOmissisEmIncisoCaput,\n  transformarOmissisEmIncisoParagrafo,\n  transformarOmissisEmItem,\n  transformarOmissisEmParagrafo,\n  transformarParagrafoEmArtigo,\n  transformarParagrafoEmIncisoCaput,\n  transformarParagrafoEmIncisoParagrafo,\n} from './transformarElementoAction';\nimport { validarArticulacaAction } from './validarArticulacaoAction';\nimport { validarElementoAction } from './validarElementoAction';\n\nexport interface ElementoAction {\n  descricao?: string;\n  tipo?: string;\n  execute(atual: Referencia, conteudo?: string, novo?: Referencia): any;\n}\n\nexport const acoesMenu: ElementoAction[] = [];\n\nacoesMenu.push(informarNormaAction);\nacoesMenu.push(moverElementoAbaixoAction);\nacoesMenu.push(moverElementoAcimaAction);\nacoesMenu.push(renumerarElementoAction);\nacoesMenu.push(iniciarBlocoAlteracao);\nacoesMenu.push(finalizarBlocoAlteracao);\nacoesMenu.push(transformarEmOmissisAlinea);\nacoesMenu.push(transformarEmOmissisIncisoCaput);\nacoesMenu.push(transformarEmOmissisItem);\nacoesMenu.push(transformarEmOmissisParagrafo);\nacoesMenu.push(transformarEmOmissisIncisoParagrafo);\n\nacoesMenu.push(transformarAlineaEmIncisoCaput);\nacoesMenu.push(transformarAlineaEmIncisoParagrafo);\nacoesMenu.push(transformaAlineaEmItem);\nacoesMenu.push(transformarArtigoEmParagrafo);\nacoesMenu.push(transformarGenericoEmInciso);\nacoesMenu.push(transformarGenericoEmAlinea);\nacoesMenu.push(transformarGenericoEmItem);\nacoesMenu.push(transformarIncisoParagrafoEmParagrafo);\nacoesMenu.push(transformarItemEmAlinea);\nacoesMenu.push(transformarIncisoCaputEmParagrafo);\nacoesMenu.push(transformarOmissisEmAlinea);\nacoesMenu.push(transformarOmissisEmArtigo);\nacoesMenu.push(transformarOmissisEmIncisoCaput);\nacoesMenu.push(transformarOmissisEmIncisoParagrafo);\nacoesMenu.push(transformarOmissisEmItem);\nacoesMenu.push(transformarOmissisEmParagrafo);\nacoesMenu.push(transformarParagrafoEmArtigo);\nacoesMenu.push(transformarParagrafoEmIncisoParagrafo);\nacoesMenu.push(transformarParagrafoEmIncisoCaput);\nacoesMenu.push(removerElementoAction);\nacoesMenu.push(restaurarElementoAction);\nacoesMenu.push(suprimirElementoAction);\nacoesMenu.push(validarElementoAction);\nacoesMenu.push(adicionarParte);\nacoesMenu.push(adicionarLivro);\nacoesMenu.push(adicionarTitulo);\nacoesMenu.push(adicionarCapitulo);\nacoesMenu.push(adicionarSecao);\nacoesMenu.push(adicionarSubsecao);\n\nexport const acoesExclusivasEdicao: ElementoAction[] = [];\nacoesExclusivasEdicao.push(adicionarElementoAction);\nacoesExclusivasEdicao.push(adicionarArtigo);\nacoesExclusivasEdicao.push(adicionarAlinea);\nacoesExclusivasEdicao.push(adicionarInciso);\nacoesExclusivasEdicao.push(adicionarItem);\nacoesExclusivasEdicao.push(adicionarParagrafo);\n\nexport const isAcaoMenu = (acao: ElementoAction): boolean => {\n  return acoesMenu.includes(acao);\n};\n\nexport const acoesDisponiveis = [...acoesMenu, ...acoesExclusivasEdicao, validarArticulacaAction];\n\nexport const getAcao = (descricao: string): ElementoAction => {\n  return acoesDisponiveis.filter(acao => acao.descricao === descricao.trim())[0];\n};\n\nexport const getAcaoAgrupamento = (tipo: string): ElementoAction => {\n  return acoesDisponiveis.filter(acao => acao instanceof AgruparElemento && acao.tipo === tipo)[0];\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isAgrupador, isArticulacao } from '../../dispositivo/tipo';\nimport { ElementoAction, getAcaoAgrupamento } from '../acao';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { renumerarElementoAction } from '../acao/renumerarElementoAction';\nimport {\n  getDispositivoAnteriorMesmoTipo,\n  getDispositivosAnterioresMesmoTipo,\n  getDispositivosPosterioresMesmoTipo,\n  hasAgrupador,\n  isDispositivoAlteracao,\n} from '../hierarquia/hierarquiaUtil';\nimport { Regras } from './regras';\n\nexport function RegrasAgrupadores<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isAgrupador(dispositivo)) {\n        return [];\n      }\n\n      if (getDispositivosAnterioresMesmoTipo(dispositivo).length === 0 && getDispositivosPosterioresMesmoTipo(dispositivo).length > 0 && hasAgrupador(dispositivo)) {\n        //\n      } else {\n        acoes.push(removerElementoAction);\n      }\n\n      if (dispositivo.pai && isArticulacao(dispositivo.pai) && isAgrupador(dispositivo.pai) && getDispositivoAnteriorMesmoTipo(dispositivo) === undefined) {\n        const pos = dispositivo.tiposPermitidosPai?.indexOf(dispositivo.pai!.tipo);\n        dispositivo.tiposPermitidosPai?.filter((tipo, index) => index > pos!).forEach(t => acoes.push(getAcaoAgrupamento(t)));\n      }\n\n      if (dispositivo.pai && !isArticulacao(dispositivo.pai) && isAgrupador(dispositivo.pai) && dispositivo.pai!.indexOf(dispositivo) === 0) {\n        const pos = dispositivo.tiposPermitidosPai?.indexOf(dispositivo.pai!.tipo);\n        dispositivo.tiposPermitidosPai?.filter((tipo, index) => index > pos!).forEach(t => acoes.push(getAcaoAgrupamento(t)));\n      }\n\n      if (dispositivo.pai && dispositivo.pai!.indexOf(dispositivo) > 0 && isAgrupador(dispositivo.pai!) && !isArticulacao(dispositivo.pai)) {\n        acoes.push(getAcaoAgrupamento(dispositivo.pai!.tipo));\n      }\n\n      if (isDispositivoAlteracao(dispositivo)) {\n        acoes.push(renumerarElementoAction);\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { ElementoAction } from '../acao';\nimport { getDispositivoAnterior, getDispositivoPosterior, isDispositivoAlteracao } from '../hierarquia/hierarquiaUtil';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\n\nexport const podeConverterEmOmissis = (dispositivo: Dispositivo): boolean => {\n  return (\n    isDispositivoAlteracao(dispositivo.pai!) &&\n    dispositivo.filhos.length === 0 &&\n    dispositivo.tipo !== TipoDispositivo.omissis.name &&\n    getDispositivoAnterior(dispositivo)?.tipo !== TipoDispositivo.omissis.name &&\n    getDispositivoPosterior(dispositivo)?.tipo !== TipoDispositivo.omissis.name\n  );\n};\n\nexport const removeAcaoExclusaoDispositivo = (acoes: any[]): void => {\n  const i: number = acoes.findIndex((acao: ElementoAction) => acao.descricao === 'Remover dispositivo');\n  if (i > -1) {\n    acoes = acoes.slice(i, 1);\n  }\n};\n\nexport const hasApenasDispositivosIrmaosNovos = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.pai!.filhos?.filter(f => f.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO).length === 0;\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao, TipoSituacao } from '../../dispositivo/situacao';\nimport { ElementoAction } from '../acao';\n\nexport class DispositivoNovo implements TipoSituacao {\n  descricaoSituacao = DescricaoSituacao.DISPOSITIVO_NOVO;\n\n  getAcoesPermitidas(dispositivo: Dispositivo, acoes: any[]): any[] {\n    const acoesSemDuplicidade = [...new Set(acoes)];\n\n    return acoesSemDuplicidade\n      .filter(a => a !== undefined)\n      .filter((acao: ElementoAction): boolean => acao.descricao !== 'Adicionar' && acao.descricao !== 'Atualizar dispositivo')\n      .sort((a, b) => a.descricao!.localeCompare(b.descricao!));\n  }\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Situacao } from '../../dispositivo/situacao';\nimport { DispositivoNovo } from './dispositivoNovo';\n\nexport function SituacaoDispositivo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Situacao {\n    situacao = new DispositivoNovo();\n\n    getAcoesPermitidas(dispositivo: Dispositivo, acoes: any[]): any[] {\n      return this.situacao?.getAcoesPermitidas(dispositivo, acoes);\n    }\n  };\n}\n","import { Genero } from '../../dispositivo/genero';\nimport { Tipo } from '../../dispositivo/tipo';\nimport { TipoDispositivo } from './tipoDispositivo';\n\nexport class TipoLexml implements Tipo {\n  tipo: string;\n  name?: string;\n  descricao?: string;\n  descricaoPlural?: string;\n  genero?: Genero;\n\n  tagId?: string;\n\n  tiposPermitidosPai?: string[];\n  tiposPermitidosFilhos?: string[];\n\n  tipoProvavelFilho?: string;\n\n  INDICADOR_SEQUENCIA?: string[];\n  INDICADOR_FIM_SEQUENCIA?: string[];\n  INDICADOR_DESDOBRAMENTO?: string[];\n\n  constructor(tipo: string) {\n    this.tipo = TipoDispositivo[tipo].tipo;\n    this.tagId = TipoDispositivo[tipo].tagId;\n    this.name = TipoDispositivo[tipo].name;\n    this.descricao = TipoDispositivo[tipo].descricao;\n    this.descricaoPlural = TipoDispositivo[tipo].descricaoPlural;\n\n    this.tiposPermitidosPai = TipoDispositivo[tipo].tiposPermitidosPai;\n    this.tiposPermitidosFilhos = TipoDispositivo[tipo].tiposPermitidosFilhos;\n\n    this.tipoProvavelFilho = TipoDispositivo[tipo].tipoProvavelFilho;\n\n    this.INDICADOR_SEQUENCIA = TipoDispositivo[tipo].INDICADOR_SEQUENCIA;\n    this.INDICADOR_FIM_SEQUENCIA = TipoDispositivo[tipo].INDICADOR_FIM_SEQUENCIA;\n    this.INDICADOR_DESDOBRAMENTO = TipoDispositivo[tipo].INDICADOR_DESDOBRAMENTO;\n  }\n}\n","/* eslint-disable indent */\nimport { Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { isArtigo, isCaput, isParagrafo } from '../../dispositivo/tipo';\nimport { hasIndicativoFimAlteracao, normalizaSeForOmissis } from '../conteudo/conteudoUtil';\nimport {\n  getArtigo,\n  getDispositivoAnterior,\n  isDispositivoAlteracao,\n  isPrimeiroMesmoTipo,\n  isUltimaAlteracao,\n  isUltimoMesmoTipo,\n  isUnicoMesmoTipo,\n} from '../hierarquia/hierarquiaUtil';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { criaDispositivo } from './dispositivoLexmlFactory';\nimport { validaDispositivo } from './dispositivoValidator';\n\nconst converteFilhos = (atual: Dispositivo, destino: Dispositivo): void => {\n  if (destino.tipoProvavelFilho! === undefined) {\n    return;\n  }\n  atual.filhos.forEach((filho, index) => {\n    const novo = criaDispositivo(\n      isArtigo(destino) && TipoDispositivo.inciso.name === destino.tipoProvavelFilho! ? (destino as Artigo).caput! : destino,\n      destino.tipoProvavelFilho!\n    );\n    novo.texto = filho.texto ?? '';\n    novo.situacao = filho.situacao;\n    novo.mensagens = validaDispositivo(filho);\n    filho.filhos ? converteFilhos(filho, novo) : undefined;\n    index === atual.filhos.length - 1 ? destino.renumeraFilhos() : undefined;\n  });\n};\n\nexport const converteDispositivo = (atual: Dispositivo, action: any): Dispositivo => {\n  const paiAtual = atual.pai;\n  let novo: Dispositivo;\n  let paiNovo: Dispositivo;\n\n  switch (action.subType) {\n    case 'transformarAlineaEmItem':\n    case 'transformarIncisoCaputEmAlinea':\n    case 'transformarIncisoParagrafoEmAlinea':\n    case 'transformarParagrafoEmIncisoParagrafo':\n      paiNovo = getDispositivoAnterior(atual)!;\n      novo = criaDispositivo(paiNovo, action.novo.tipo);\n      break;\n    case 'transformarDispositivoGenericoEmInciso':\n    case 'transformarDispositivoGenericoEmAlinea':\n    case 'transformarDispositivoGenericoEmItem':\n    case 'transformarOmissisEmAlinea':\n    case 'transformarOmissisEmArtigo':\n    case 'transformarOmissisEmIncisoCaput':\n    case 'transformarOmissisEmIncisoParagrafo':\n    case 'transformarOmissisEmItem':\n    case 'transformarOmissisEmParagrafo':\n    case 'transformarAlineaEmOmissisAlinea':\n    case 'transformarItemEmOmissisItem':\n    case 'transformarParagrafoEmOmissisParagrafo':\n    case 'transformarIncisoCaputEmOmissisIncisoCaput':\n    case 'transformarIncisoParagrafoEmOmissisIncisoParagrafo':\n      paiNovo = paiAtual!;\n      novo = criaDispositivo(paiAtual!, action.novo.tipo, undefined, paiAtual?.indexOf(atual));\n      break;\n    case 'transformarParagrafoEmInciso':\n      if (isParagrafo(atual) && (isPrimeiroMesmoTipo(atual) || isUnicoMesmoTipo(atual))) {\n        paiNovo = paiAtual!;\n        novo = criaDispositivo((paiNovo as Artigo).caput!, action.novo.tipo);\n        break;\n      }\n      paiNovo = getDispositivoAnterior(atual)!;\n      novo = criaDispositivo(paiNovo, action.novo.tipo);\n      break;\n    case 'transformarParagrafoEmIncisoCaput':\n      paiNovo = paiAtual!;\n      novo = criaDispositivo((paiNovo as Artigo).caput!, action.novo.tipo);\n      break;\n    case 'transformarArtigoEmParagrafo':\n      paiNovo = getDispositivoAnterior(atual)!;\n      novo = criaDispositivo(paiNovo, action.novo.tipo);\n      break;\n    default:\n      paiNovo = atual.pai!.pai!;\n      novo = criaDispositivo(paiNovo, action.novo.tipo, atual.pai!);\n      break;\n  }\n  novo!.texto = action.atual.conteudo?.texto ?? atual.texto;\n  novo.createRotulo(novo);\n  novo.situacao = atual.situacao;\n  novo.mensagens = validaDispositivo(novo);\n  paiAtual?.removeFilho(atual);\n  paiAtual?.renumeraFilhos();\n  paiNovo?.renumeraFilhos();\n  converteFilhos(atual, novo!);\n\n  return novo!;\n};\n\nexport const copiaFilhos = (atual: Dispositivo, destino: Dispositivo): void => {\n  if (atual.tipo !== destino.tipo) {\n    return;\n  }\n  atual.filhos.forEach(filho => {\n    const novo = criaDispositivo(isArtigo(destino) && isCaput(filho.pai!) ? (destino as Artigo).caput! : destino, filho.tipo);\n    filho.rotulo ? (novo.rotulo = filho.rotulo) : novo.createRotulo(novo);\n    novo.texto = filho.texto ?? '';\n    novo.situacao = filho.situacao;\n    atual.removeFilho(filho);\n    novo.mensagens = validaDispositivo(filho);\n\n    filho.filhos ? (atual.tipo === destino.tipo ? copiaFilhos(filho, novo) : converteFilhos(filho, novo)) : undefined;\n\n    atual.filhos.length === 0 ? destino.renumeraFilhos() : undefined;\n  });\n};\n\nexport const podeSerUltimaalteracao = (dispositivo: Dispositivo, action: any): boolean => {\n  if (!isDispositivoAlteracao(dispositivo)) {\n    return false;\n  }\n  const artigo = getArtigo(dispositivo);\n  return isUltimoMesmoTipo(artigo) && hasIndicativoFimAlteracao(normalizaSeForOmissis(action.atual?.conteudo?.texto ?? '')) && isUltimaAlteracao(dispositivo);\n};\n","import { Counter } from '../../../util/counter';\nimport { Alteracoes } from '../../dispositivo/blocoAlteracao';\nimport { Articulacao, Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { GeneroFeminino, GeneroIndefinido, GeneroMasculino } from '../../dispositivo/genero';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isAgrupador, isArtigo, isIncisoCaput, isParagrafo } from '../../dispositivo/tipo';\nimport { ValidacaoDispositivo } from '../../dispositivo/validacao';\nimport { FINALIZAR_BLOCO, INICIAR_BLOCO } from '../acao/blocoAlteracaoAction';\nimport { BlocoAlteracaoNaoPermitido } from '../alteracao/blocoAlteracaoNaoPermitido';\nimport { BlocoAlteracaoPermitido } from '../alteracao/BlocoAlteracaoPermitido';\nimport { ConteudoDispositivo } from '../conteudo/conteudoDispositivo';\nimport { ConteudoOmissis } from '../conteudo/conteudoOmissis';\nimport { hasIndicativoDesdobramento, hasIndicativoFinalSequencia, hasIndicativoInicioAlteracao, normalizaSeForOmissis } from '../conteudo/conteudoUtil';\nimport { HierarquiaAgrupador } from '../hierarquia/hierarquiaAgrupador';\nimport { HierarquiaArtigo } from '../hierarquia/hierarquiaArtigo';\nimport { HierarquiaDispositivo } from '../hierarquia/hierarquiaDispositivo';\nimport { getArticulacao, hasFilhos, isDispositivoAlteracao } from '../hierarquia/hierarquiaUtil';\nimport { NumeracaoAgrupador } from '../numeracao/numeracaoAgrupador';\nimport { NumeracaoAlinea } from '../numeracao/numeracaoAlinea';\nimport { NumeracaoArtigo } from '../numeracao/numeracaoArtigo';\nimport { NumeracaoCaput } from '../numeracao/numeracaoCaput';\nimport { NumeracaoGenerico } from '../numeracao/numeracaoGenerico';\nimport { NumeracaoInciso } from '../numeracao/numeracaoInciso';\nimport { NumeracaoIndisponivel } from '../numeracao/numeracaoIndisponivel';\nimport { NumeracaoItem } from '../numeracao/numeracaoItem';\nimport { NumeracaoParagrafo } from '../numeracao/numeracaoParagrafo';\nimport { RegrasAgrupadores } from '../regras/regrasAgrupadores';\nimport { RegrasAlinea } from '../regras/regrasAlinea';\nimport { RegrasArtigo } from '../regras/regrasArtigo';\nimport { RegrasCaput } from '../regras/regrasCaput';\nimport { RegrasDispositivoGenerico } from '../regras/regrasDispositivoGenerico';\nimport { RegrasInciso } from '../regras/regrasInciso';\nimport { RegrasItem } from '../regras/regrasItem';\nimport { RegrasOmissis } from '../regras/regrasOmissis';\nimport { RegrasParagrafo } from '../regras/regrasParagrafo';\nimport { SituacaoDispositivo } from '../situacao/situacaoDispositivo';\nimport { TipoArticulacao } from '../tipo/tipoArticulacao';\nimport { TipoArtigo } from '../tipo/tipoArtigo';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { TipoLexml } from '../tipo/tipoLexml';\nimport { TipoMensagem } from '../util/mensagem';\nimport { podeSerUltimaalteracao } from './dispositivoLexmlUtil';\n\nconst AlineaLexml = SituacaoDispositivo(\n  RegrasAlinea(ValidacaoDispositivo(GeneroFeminino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAlinea(HierarquiaDispositivo(TipoLexml)))))))\n);\nconst ArtigoLexml = SituacaoDispositivo(RegrasArtigo(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoPermitido(NumeracaoArtigo(HierarquiaArtigo(TipoArtigo)))))));\nconst CaputLexml = SituacaoDispositivo(\n  RegrasCaput(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoCaput(HierarquiaDispositivo(TipoLexml)))))))\n);\nconst DispositivoGenericoLexml = SituacaoDispositivo(\n  RegrasDispositivoGenerico(ValidacaoDispositivo(GeneroIndefinido(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoGenerico(HierarquiaDispositivo(TipoLexml)))))))\n);\nconst IncisoLexml = SituacaoDispositivo(\n  RegrasInciso(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoInciso(HierarquiaDispositivo(TipoLexml)))))))\n);\nconst ItemLexml = SituacaoDispositivo(\n  RegrasItem(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoItem(HierarquiaDispositivo(TipoLexml)))))))\n);\nconst ParagrafoLexml = SituacaoDispositivo(\n  RegrasParagrafo(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoParagrafo(HierarquiaDispositivo(TipoLexml)))))))\n);\nconst ArticulacaoLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroIndefinido(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoArticulacao)))))))\n);\nconst CapituloLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoLexml)))))))\n);\nconst DispositivoAgrupadorGenericoLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroIndefinido(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoLexml)))))))\n);\nconst LivroLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoLexml)))))))\n);\nconst ParteLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroFeminino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoLexml)))))))\n);\nconst SubsecaoLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroFeminino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoLexml)))))))\n);\nconst SecaoLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroFeminino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoLexml)))))))\n);\nconst TituloLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoLexml)))))))\n);\n\nconst OmissisLexml = SituacaoDispositivo(RegrasOmissis(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoOmissis(NumeracaoIndisponivel(HierarquiaDispositivo(TipoLexml)))))));\n\nconst desativaRotuloAutomaticoSeDispositivoAlteracao = (dispositivo: Dispositivo): void => {\n  dispositivo.isDispositivoAlteracao = isDispositivoAlteracao(dispositivo);\n\n  if (isDispositivoAlteracao(dispositivo)) {\n    dispositivo.renumeraFilhos = (): void => undefined;\n    if (isArtigo(dispositivo)) {\n      (dispositivo as Artigo).caput!.renumeraFilhos = (): void => undefined;\n    }\n    getArticulacao(dispositivo).renumeraFilhos = (): void => undefined;\n    getArticulacao(dispositivo).renumeraArtigos = (): void => undefined;\n  }\n};\n\nexport const criaDispositivo = (parent: Dispositivo, tipo: string, referencia?: Dispositivo, posicao?: number): Dispositivo => {\n  const dispositivo = create(tipo, parent);\n  posicao !== undefined && posicao >= 0 ? parent!.addFilhoOnPosition(dispositivo, posicao) : referencia ? parent!.addFilho(dispositivo, referencia) : parent!.addFilho(dispositivo);\n\n  return dispositivo;\n};\n\nconst create = (name: string, parent: Dispositivo): Dispositivo => {\n  let dispositivo: Dispositivo;\n\n  switch (name.toLowerCase()) {\n    case 'alinea':\n      dispositivo = new AlineaLexml(name.toLowerCase());\n      break;\n    case 'artigo':\n      dispositivo = new ArtigoLexml();\n      (dispositivo as Artigo).caput = create(TipoDispositivo.caput.tipo, dispositivo);\n      break;\n    case 'capitulo':\n      dispositivo = new CapituloLexml(name.toLowerCase());\n      break;\n    case 'caput':\n      dispositivo = new CaputLexml(name.toLowerCase());\n      break;\n    case 'inciso':\n      dispositivo = new IncisoLexml(name.toLowerCase());\n      break;\n    case 'item':\n      dispositivo = new ItemLexml(name.toLowerCase());\n      break;\n    case 'livro':\n      dispositivo = new LivroLexml(name.toLowerCase());\n      break;\n    case 'omissis':\n      dispositivo = new OmissisLexml(name.toLowerCase());\n      break;\n    case 'paragrafo':\n      dispositivo = new ParagrafoLexml(name.toLowerCase());\n      break;\n    case 'parte':\n      dispositivo = new ParteLexml(name.toLowerCase());\n      break;\n    case 'secao':\n      dispositivo = new SecaoLexml(name.toLowerCase());\n      break;\n    case 'subsecao':\n      dispositivo = new SubsecaoLexml(name.toLowerCase());\n      break;\n    case 'titulo':\n      dispositivo = new TituloLexml(name.toLowerCase());\n      break;\n    default: {\n      dispositivo = parent && isAgrupador(parent) ? new DispositivoAgrupadorGenericoLexml('agrupadorGenerico') : new DispositivoGenericoLexml('generico');\n      dispositivo.mensagens = [];\n      dispositivo.mensagens.push({ tipo: TipoMensagem.WARNING, descricao: 'No foi possvel validar a natureza deste dispositivo com base na legislao vigente' });\n    }\n  }\n\n  dispositivo.uuid = Counter.next();\n  dispositivo.name = name;\n  dispositivo.pai = parent;\n\n  desativaRotuloAutomaticoSeDispositivoAlteracao(dispositivo);\n\n  return dispositivo;\n};\n\nexport const createArticulacao = (): Articulacao => {\n  const articulacao = new ArticulacaoLexml();\n  articulacao.uuid = Counter.next();\n  return articulacao;\n};\n\nexport const createAlteracao = (atual: Artigo): void => {\n  atual.alteracoes = createArticulacao();\n  atual.alteracoes.pai = atual;\n};\n\nexport const createByInferencia = (referencia: Dispositivo, action: any): Dispositivo => {\n  let novo;\n\n  if (isDispositivoAlteracao(referencia)) {\n    if (action.subType === INICIAR_BLOCO) {\n      novo = criaDispositivoCabecaAlteracao(TipoDispositivo.artigo.tipo, getArticulacao(referencia));\n      novo.texto = action.novo?.conteudo?.texto?.length > 0 ? action.novo?.conteudo?.texto : '';\n    } else if (action.subType === FINALIZAR_BLOCO) {\n      const ref = getArticulacao(referencia);\n      novo = createFromReferencia(ref.pai!);\n      novo!.texto = normalizaSeForOmissis(action.novo?.conteudo?.texto ?? '');\n    } else if (podeSerUltimaalteracao(referencia, action)) {\n      const ref = getArticulacao(referencia);\n      novo = action.subType === INICIAR_BLOCO ? criaDispositivoCabecaAlteracao(TipoDispositivo.artigo.tipo, ref!) : createFromReferencia(ref.pai!);\n      novo!.texto = action.subType === INICIAR_BLOCO ? '' : normalizaSeForOmissis(action.novo?.conteudo?.texto ?? '');\n    } else {\n      novo = createFromReferencia(referencia);\n      novo.createRotulo();\n      novo!.texto = action.novo?.conteudo?.texto?.length > 0 ? normalizaSeForOmissis(action.novo?.conteudo?.texto ?? '') : '';\n    }\n  } else {\n    if (referencia.alteracoes || hasIndicativoInicioAlteracao(action.atual?.conteudo?.texto) || action.novo?.isDispositivoAlteracao) {\n      if (!referencia.hasAlteracao()) {\n        createAlteracao(referencia);\n      }\n      novo = criaDispositivoCabecaAlteracao(referencia.tipo, referencia.alteracoes!);\n      novo.texto = action.novo?.conteudo?.texto?.length > 0 ? action.novo?.conteudo?.texto : '';\n    } else {\n      novo = createFromReferencia(referencia);\n      novo!.texto = action.novo?.conteudo?.texto ?? '';\n    }\n  }\n  return novo;\n};\n\nexport const createFromReferencia = (referencia: Dispositivo): Dispositivo => {\n  if (referencia.hasAlteracao()) {\n    return createWhenReferenciaBlocoAlteracao(referencia);\n  }\n\n  if (isArtigo(referencia)) {\n    if (!isDispositivoAlteracao(referencia)) {\n      return createWhenReferenciaIsArtigo(referencia);\n    }\n    return criaDispositivo((referencia as Artigo).caput!, TipoDispositivo.inciso.tipo, undefined, 0);\n  }\n\n  if (isAgrupador(referencia)) {\n    return createWhenReferenciaIsAgrupador(referencia);\n  }\n\n  if (isDispositivoAlteracao(referencia)) {\n    return hasFilhos(referencia) || hasIndicativoDesdobramento(referencia)\n      ? criaDispositivo(referencia, referencia.tipoProvavelFilho!, referencia)\n      : criaDispositivo(referencia.pai!, referencia.tipo === TipoDispositivo.omissis.tipo ? referencia.pai!.tipoProvavelFilho! : referencia.tipo, referencia);\n  }\n\n  return createFromReferenciaDefault(referencia);\n};\n\nconst createWhenReferenciaBlocoAlteracao = (referencia: Dispositivo): Dispositivo => {\n  if (referencia.pai!.isLastFilho(referencia) && referencia?.pai?.pai) {\n    return criaDispositivo(referencia.pai.pai, referencia.pai.tipo, referencia.pai);\n  }\n  return criaDispositivo(referencia.pai!, referencia.tipo, referencia);\n};\n\nconst createFromReferenciaDefault = (referencia: Dispositivo): Dispositivo => {\n  if (hasIndicativoDesdobramento(referencia)) {\n    const type = referencia.tipoProvavelFilho!;\n    return referencia.pai!.filhos!.length > 0 ? criaDispositivo(referencia, type, undefined, 0) : criaDispositivo(referencia, type);\n  }\n  if (referencia.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL && hasIndicativoFinalSequencia(referencia) && referencia.pai!.isLastFilho(referencia)) {\n    if (isIncisoCaput(referencia)) {\n      const artigo: Artigo = referencia.pai!.pai! as Artigo;\n      return artigo!.filhos!.filter(filho => isParagrafo(filho)).length > 0\n        ? criaDispositivo(artigo, TipoDispositivo.paragrafo.tipo, undefined, 0)\n        : criaDispositivo(artigo, TipoDispositivo.paragrafo.tipo);\n    } else {\n      return criaDispositivo(referencia!.pai!.pai!, referencia.pai!.tipo, referencia!.pai!);\n    }\n  }\n  return criaDispositivo(referencia.pai!, referencia.tipo, referencia);\n};\n\nconst createWhenReferenciaIsArtigo = (referencia: Dispositivo): Dispositivo => {\n  if (hasIndicativoDesdobramento(referencia)) {\n    const type = referencia.tipoProvavelFilho!;\n\n    if (type === TipoDispositivo.inciso.tipo) {\n      const parent = (referencia as Artigo).caput;\n      return parent!.filhos!.length > 0 ? criaDispositivo(parent!, type, undefined, 0) : criaDispositivo(parent!, type);\n    }\n    return referencia.pai!.filhos!.length > 0 ? criaDispositivo(referencia, type, undefined, 0) : criaDispositivo(referencia, type);\n  }\n\n  if (hasIndicativoFinalSequencia(referencia) && referencia.pai!.isLastFilho(referencia)) {\n    return criaDispositivo(referencia!.pai!.pai!, referencia.pai!.tipo, referencia!.pai!);\n  }\n  return criaDispositivo(referencia.pai!, referencia.tipo, referencia);\n};\n\nconst createWhenReferenciaIsAgrupador = (referencia: Dispositivo): Dispositivo => {\n  return criaDispositivo(referencia, TipoDispositivo.artigo.tipo, undefined, 0);\n};\n\nexport const criaDispositivoCabecaAlteracao = (tipo: string, alteracoes: Alteracoes): Dispositivo => {\n  const dispositivo = criaDispositivo(alteracoes!, tipo);\n  dispositivo.createRotulo(dispositivo);\n\n  return dispositivo;\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isAlinea, isOmissis, isParagrafo } from '../../dispositivo/tipo';\nimport { ElementoAction } from '../acao';\nimport { adicionarAlinea, adicionarItem } from '../acao/adicionarElementoAction';\nimport { finalizarBlocoAlteracao, iniciarBlocoAlteracao } from '../acao/blocoAlteracaoAction';\nimport { moverElementoAbaixoAction } from '../acao/moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from '../acao/moverElementoAcimaAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { renumerarElementoAction } from '../acao/renumerarElementoAction';\nimport {\n  transformaAlineaEmItem,\n  transformarAlineaEmIncisoCaput,\n  transformarAlineaEmIncisoParagrafo,\n  TransformarElemento,\n  transformarEmOmissisAlinea,\n} from '../acao/transformarElementoAction';\nimport { hasIndicativoContinuacaoSequencia, hasIndicativoDesdobramento } from '../conteudo/conteudoUtil';\nimport {\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipoInclusiveOmissis,\n  getDispositivoPosteriorMesmoTipoInclusiveOmissis,\n  hasDispositivosPosterioresAlteracao,\n  isDispositivoAlteracao,\n  isPrimeiroMesmoTipo,\n  isUltimaAlteracao,\n  isUltimoMesmoTipo,\n  isUnicoMesmoTipo,\n} from '../hierarquia/hierarquiaUtil';\nimport { Regras } from './regras';\nimport { podeConverterEmOmissis } from './regrasUtil';\n\nexport function RegrasAlinea<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isAlinea(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(removerElementoAction);\n\n      if (getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAbaixoAction);\n      }\n      if (getDispositivoAnteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAcimaAction);\n      }\n\n      if (isDispositivoAlteracao(dispositivo)) {\n        acoes.push(renumerarElementoAction);\n      }\n      if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo)) {\n        acoes.push(iniciarBlocoAlteracao);\n        if (hasDispositivosPosterioresAlteracao(dispositivo)) {\n          acoes.push(finalizarBlocoAlteracao);\n        }\n      }\n\n      if (dispositivo.texto.length === 0 || hasIndicativoContinuacaoSequencia(dispositivo)) {\n        acoes.push(adicionarAlinea);\n      }\n      if (dispositivo.texto.length === 0 || hasIndicativoDesdobramento(dispositivo)) {\n        acoes.push(adicionarItem);\n      }\n      if (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo)) {\n        acoes.push(isParagrafo(dispositivo.pai!.pai!) ? transformarAlineaEmIncisoParagrafo : transformarAlineaEmIncisoCaput);\n      }\n      if (!isPrimeiroMesmoTipo(dispositivo) || (getDispositivoAnterior(dispositivo) !== undefined && isOmissis(getDispositivoAnterior(dispositivo)!))) {\n        acoes.push(transformaAlineaEmItem);\n      }\n      if (podeConverterEmOmissis(dispositivo)) {\n        acoes.push(transformarEmOmissisAlinea);\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      if (!isAlinea(dispositivo)) {\n        return undefined;\n      }\n\n      return dispositivo.tiposPermitidosFilhos?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      if (!isAlinea(dispositivo)) {\n        return undefined;\n      }\n\n      if (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo)) {\n        return isParagrafo(dispositivo.pai!.pai!) ? transformarAlineaEmIncisoParagrafo : transformarAlineaEmIncisoCaput;\n      }\n\n      return dispositivo.tiposPermitidosPai?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n  };\n}\n","import { addSpaceRegex } from '../../../util/string-util';\nimport { Numeracao } from '../../dispositivo/numeracao';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { converteLetraParaNumeroArabico, converteNumeroArabicoParaLetra, trataComplemento } from './numeracaoUtil';\n\nexport function NumeracaoAlinea<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoAlineaLcp95';\n    private SUFIXO = ')';\n    numero?: string;\n    rotulo?: string;\n\n    private normalizaNumeracao(numero: string): string {\n      const num = /[a-z]+(-[a-zA-Z]+)*/.exec(numero.trim());\n      return num ? num[0] : addSpaceRegex(numero).trim().replace(/\\)$/, '').trim();\n    }\n\n    createNumeroFromRotulo(rotulo: string): void {\n      this.numero = trataComplemento(this.normalizaNumeracao(rotulo!), converteLetraParaNumeroArabico);\n    }\n\n    createRotulo(): void {\n      this.rotulo = this.numero === undefined ? TipoDispositivo.alinea.name : trataComplemento(this.numero, converteNumeroArabicoParaLetra) + this.SUFIXO;\n    }\n\n    getNumeracaoParaComandoEmenda(): string {\n      if (this.numero === undefined) {\n        return TipoDispositivo.alinea.descricao?.toLocaleLowerCase() + '';\n      }\n      return '' + trataComplemento(this.numero, converteNumeroArabicoParaLetra) + '';\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(): string {\n      if (this.numero === undefined) {\n        return TipoDispositivo.alinea.descricao?.toLocaleLowerCase() + '';\n      }\n      return TipoDispositivo.alinea.descricao?.toLocaleLowerCase() + ' ' + this.getNumeracaoParaComandoEmenda();\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isAgrupador, isAlinea, isArticulacao, isArtigo, isDispositivoGenerico, isIncisoCaput, isIncisoParagrafo, isParagrafo } from '../../dispositivo/tipo';\nimport { ElementoAction, getAcaoAgrupamento } from '../acao';\nimport { adicionarArtigo, adicionarElementoAction, adicionarInciso } from '../acao/adicionarElementoAction';\nimport { adicionarCapitulo } from '../acao/agruparElementoAction';\nimport { finalizarBlocoAlteracao, iniciarBlocoAlteracao } from '../acao/blocoAlteracaoAction';\nimport { informarNormaAction } from '../acao/informarNormaAction';\nimport { moverElementoAbaixoAction } from '../acao/moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from '../acao/moverElementoAcimaAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { renumerarElementoAction } from '../acao/renumerarElementoAction';\nimport {\n  transformarAlineaEmIncisoCaput,\n  transformarAlineaEmIncisoParagrafo,\n  transformarArtigoEmParagrafo,\n  TransformarElemento,\n  transformarIncisoCaputEmParagrafo,\n  transformarIncisoParagrafoEmParagrafo,\n} from '../acao/transformarElementoAction';\nimport { hasIndicativoDesdobramento } from '../conteudo/conteudoUtil';\nimport {\n  getAgrupadoresAcima,\n  getAgrupadorPosterior,\n  getDispositivoAnteriorMesmoTipoInclusiveOmissis,\n  getDispositivoPosteriorMesmoTipoInclusiveOmissis,\n  hasAgrupadoresAcima,\n  hasAgrupadoresPosteriores,\n  hasDispositivosPosterioresAlteracao,\n  hasFilhos,\n  isDispositivoAlteracao,\n  isUltimaAlteracao,\n  isUltimoMesmoTipo,\n  isUnicoMesmoTipo,\n} from '../hierarquia/hierarquiaUtil';\nimport { Regras } from './regras';\n\nexport function RegrasArtigo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isArtigo(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(adicionarElementoAction);\n      acoes.push(removerElementoAction);\n\n      if (getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAbaixoAction);\n      }\n      if (getDispositivoAnteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAcimaAction);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && !isDispositivoGenerico(dispositivo)) {\n        acoes.push(renumerarElementoAction);\n      }\n      if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo)) {\n        acoes.push(iniciarBlocoAlteracao);\n        if (hasDispositivosPosterioresAlteracao(dispositivo)) {\n          acoes.push(finalizarBlocoAlteracao);\n        }\n      }\n      if (dispositivo.alteracoes) {\n        acoes.push(informarNormaAction);\n      }\n      if (!dispositivo.hasAlteracao() && !isDispositivoAlteracao(dispositivo) && (dispositivo.texto.length === 0 || !hasIndicativoDesdobramento(dispositivo))) {\n        acoes.push(adicionarArtigo);\n      }\n      if (!dispositivo.hasAlteracao() && !isDispositivoAlteracao(dispositivo) && (dispositivo.texto.length === 0 || hasIndicativoDesdobramento(dispositivo))) {\n        acoes.push(adicionarInciso);\n      }\n      if (!dispositivo.hasAlteracao() && !isDispositivoAlteracao(dispositivo) && !hasFilhos(dispositivo)) {\n        acoes.push(iniciarBlocoAlteracao);\n      }\n      if (dispositivo.pai!.indexOf(dispositivo) > 0) {\n        acoes.push(transformarArtigoEmParagrafo);\n      }\n      if (dispositivo.pai && !isDispositivoAlteracao(dispositivo) && isArticulacao(dispositivo.pai) && dispositivo.pai!.filhos.filter(d => isAgrupador(d)).length === 0) {\n        acoes.push(adicionarCapitulo);\n      }\n      /*       if (dispositivo.pai && isDispositivoAlteracao(dispositivo) && isArticulacao(dispositivo.pai)) {\n        acoes.push(adicionarCapitulo);\n      } */\n      if (!isDispositivoAlteracao(dispositivo) && dispositivo.pai && hasAgrupadoresPosteriores(dispositivo)) {\n        acoes.push(getAcaoAgrupamento(getAgrupadorPosterior(dispositivo).tipo));\n      }\n      if (!isDispositivoAlteracao(dispositivo) && isAgrupador(dispositivo.pai!)) {\n        const pos = dispositivo.tiposPermitidosPai?.indexOf(dispositivo.pai!.tipo) ?? 0;\n        dispositivo.tiposPermitidosPai\n          ?.filter(() => pos > 0)\n          .filter((tipo, index) => (dispositivo.pai!.indexOf(dispositivo) > 0 ? index >= pos! : index > pos!))\n          .forEach(t => acoes.push(getAcaoAgrupamento(t)));\n      }\n\n      if (\n        !isDispositivoAlteracao(dispositivo) &&\n        isAgrupador(dispositivo.pai!) &&\n        !isArticulacao(dispositivo.pai!) &&\n        dispositivo.pai!.indexOf(dispositivo) > 0 &&\n        hasAgrupadoresAcima(dispositivo)\n      ) {\n        const pos = dispositivo.tiposPermitidosPai?.indexOf(dispositivo.pai!.tipo) ?? 0;\n\n        const tiposExistentes = getAgrupadoresAcima(dispositivo.pai!.pai!, dispositivo.pai!, []).reduce(\n          (lista: string[], dispositivo: Dispositivo) =>\n            lista.includes(dispositivo.tipo) && getAgrupadorPosterior(dispositivo) !== undefined ? lista : lista.concat(dispositivo.tipo),\n          []\n        );\n        dispositivo.tiposPermitidosPai\n          ?.filter(() => pos > 0)\n          .filter(t => tiposExistentes.includes(t))\n          .forEach(t => acoes.push(getAcaoAgrupamento(t)));\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      if (!isArtigo(dispositivo)) {\n        return undefined;\n      }\n\n      return dispositivo.tiposPermitidosFilhos?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      if (!dispositivo.tiposPermitidosFilhos) {\n        return undefined;\n      }\n\n      if (isIncisoCaput(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return transformarIncisoCaputEmParagrafo;\n      }\n\n      if (isIncisoParagrafo(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return transformarIncisoParagrafoEmParagrafo;\n      }\n\n      if (isAlinea(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return isParagrafo(dispositivo.pai!.pai!) ? transformarAlineaEmIncisoParagrafo : transformarAlineaEmIncisoCaput;\n      }\n\n      return dispositivo.tiposPermitidosPai?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n  };\n}\n","import { Alteracoes, BlocoAlteracao } from '../../dispositivo/blocoAlteracao';\n\nexport function BlocoAlteracaoPermitido<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements BlocoAlteracao {\n    alteracoes?: Alteracoes;\n\n    hasAlteracao(): boolean {\n      return this.alteracoes ? this.alteracoes.filhos?.length > 0 : false;\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Numeracao } from '../../dispositivo/numeracao';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { ClassificacaoDocumento } from '../../documento/classificacao';\nimport { getArticulacao, isDispositivoCabecaAlteracao } from '../hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { converteNumeroArabicoParaLetra, isNumeracaoValida } from './numeracaoUtil';\n\nexport function NumeracaoArtigo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoArtigoLcp95';\n    PREFIXO = 'Art. ';\n    SUFIXO = '';\n    private ARTIGO_UNICO = 'Artigo nico.';\n    numero?: string;\n    rotulo?: string;\n    informouArtigoUnico = false;\n\n    private normalizaNumeracao(numero: string): string {\n      return numero\n        .replace(/[\"]/g, '')\n        .replace(/\\./g, '')\n        .replace(/artigo [u]nico/i, '1')\n        .replace(/(art[.]{0,1})/i, '')\n        .replace(/[]/i, '')\n        .trim();\n    }\n\n    createNumeroFromRotulo(rotulo: string): void {\n      const temp = this.normalizaNumeracao(rotulo!);\n      this.informouArtigoUnico = /.[u]nico/i.test(rotulo);\n      this.numero = this.informouArtigoUnico ? '1' : isNumeracaoValida(temp) ? temp : undefined;\n    }\n\n    createRotulo(dispositivo: Dispositivo): void {\n      if (dispositivo === undefined) {\n        this.rotulo = TipoDispositivo.artigo.descricao;\n      } else if (\n        dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n        (dispositivo.situacao as DispositivoAdicionado).tipoEmenda === ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER\n      ) {\n        this.rotulo = 'Art.';\n      } else if (this.numero === undefined) {\n        this.rotulo = isDispositivoCabecaAlteracao(dispositivo) ? '\\u201C' + dispositivo.tipo : dispositivo.tipo;\n      } else if (this.numero !== undefined && !isNumeracaoValida(this.numero)) {\n        this.rotulo = this.PREFIXO + this.numero + this.SUFIXO;\n      } else if (isDispositivoCabecaAlteracao(dispositivo)) {\n        this.rotulo = '\\u201C' + (this.informouArtigoUnico ? this.ARTIGO_UNICO : this.PREFIXO + this.getNumeroAndSufixoNumeracao());\n      } else {\n        getArticulacao(dispositivo).artigos.length === 1\n          ? (this.rotulo = this.ARTIGO_UNICO)\n          : (this.rotulo = this.PREFIXO + this.numero === undefined ? undefined : this.PREFIXO + this.getNumeroAndSufixoNumeracao());\n      }\n    }\n\n    private getNumeroAndSufixoNumeracao(paraComandoEmenda = false): string {\n      const partes = this.numero?.split('-');\n      const [num, ...remaining] = partes!;\n\n      return (\n        (parseInt(num ?? '1', 10) < 10 ? num + this.SUFIXO : num) +\n        (remaining.length > 0 ? '-' + remaining?.map(converteNumeroArabicoParaLetra).join('-').toUpperCase() : '') +\n        (!paraComandoEmenda && parseInt(num ?? '1', 10) > 9 ? '.' : '')\n      );\n    }\n\n    getNumeracaoParaComandoEmenda(): string {\n      if (this.numero === undefined) {\n        return TipoDispositivo.artigo.descricao?.toLowerCase() + '';\n      }\n      if (this.informouArtigoUnico) {\n        return 'artigo nico';\n      }\n      return this.getNumeroAndSufixoNumeracao(true);\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(): string {\n      if (this.numero === undefined) {\n        return TipoDispositivo.artigo.descricao?.toLowerCase() + '';\n      }\n      if (this.informouArtigoUnico) {\n        return 'artigo nico';\n      }\n      return 'art. ' + this.getNumeroAndSufixoNumeracao();\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Hierarquia } from '../../dispositivo/hierarquia';\nimport { isCaput, isInciso } from '../../dispositivo/tipo';\nimport { calculaNumeracao } from '../numeracao/numeracaoUtil';\nimport { buildId } from '../util/idUtil';\nimport { isDispositivoAlteracao, isOriginal } from './hierarquiaUtil';\n\nexport function HierarquiaArtigo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Hierarquia {\n    pai?: Dispositivo;\n    private _paragrafos?: Dispositivo[];\n\n    caput?: Dispositivo;\n\n    get filhos(): Dispositivo[] {\n      const incisos = this.getIncisosCaput();\n      const paragrafos = this.paragrafos;\n\n      return incisos.concat(paragrafos);\n    }\n\n    private getIncisosCaput(): Dispositivo[] {\n      return this.caput?.filhos ?? [];\n    }\n\n    get paragrafos(): Dispositivo[] {\n      this._paragrafos = this._paragrafos ?? [];\n      return this._paragrafos;\n    }\n\n    addFilhoOnPosition(filho: Dispositivo, posicao: number): void {\n      // isInciso(filho) ? this.caput!.addFilhoOnPosition(filho, posicao) : this.paragrafos.splice(posicao, 0, filho);\n      if (isInciso(filho)) {\n        this.caput!.addFilhoOnPosition(filho, posicao);\n      } else {\n        this.paragrafos.splice(posicao - this.getIncisosCaput().length, 0, filho);\n      }\n    }\n\n    addFilho(filho: Dispositivo, referencia?: Dispositivo): void {\n      isCaput(filho) ? (this.caput = filho) : isInciso(filho) ? this.addIncisoCaput(filho, referencia) : this.addParagrafo(filho, referencia);\n    }\n\n    removeFilho(filho: Dispositivo): void {\n      isInciso(filho) ? this.caput?.removeFilho(filho) : this.removeParagrafo(filho);\n    }\n\n    private addIncisoCaput(filho: Dispositivo, referencia?: Dispositivo): void {\n      this.caput!.addFilho(filho, referencia);\n    }\n\n    private addParagrafo(filho: Dispositivo, referencia?: Dispositivo): void {\n      if (referencia) {\n        const posicao = this.paragrafos.indexOf(referencia) + 1;\n        this.isLastFilho(referencia) ? this.paragrafos.push(filho) : this.paragrafos.splice(posicao, 0, filho);\n      } else {\n        this.paragrafos.push(filho);\n      }\n    }\n\n    private removeParagrafo(filho: Dispositivo): void {\n      this._paragrafos = this._paragrafos?.filter(f => (f.uuid !== filho.uuid ? f : (f.pai = undefined)));\n    }\n\n    isLastFilho(filho: Dispositivo): boolean {\n      return this.paragrafos.indexOf(filho) === this.paragrafos.length - 1;\n    }\n\n    indexOf(filho: Dispositivo): number {\n      return isInciso(filho) ? this.caput!.indexOf(filho) : this.filhos.indexOf(filho);\n    }\n\n    private renumeraIncisos(): void {\n      this.caput?.renumeraFilhos();\n    }\n\n    private renumeraParagrafos(): void {\n      this.paragrafos\n        .filter(f => !isDispositivoAlteracao(f) && !isOriginal(f))\n        .forEach(filho => {\n          filho.numero = calculaNumeracao(filho);\n          filho.createRotulo(filho);\n          filho.id = buildId(filho);\n        });\n    }\n\n    isParagrafoUnico(): boolean {\n      return this.paragrafos.length === 1;\n    }\n\n    renumeraFilhos(): void {\n      this.renumeraIncisos();\n      this.renumeraParagrafos();\n    }\n  };\n}\n","import { Articulacao, Dispositivo } from '../../dispositivo/dispositivo';\nimport { TipoLexml } from './tipoLexml';\n\nexport class TipoArtigo extends TipoLexml {\n  _blocoAlteracao?: Articulacao;\n\n  constructor() {\n    super('artigo');\n  }\n\n  caput?: Dispositivo;\n\n  get texto(): string {\n    return this.caput?.texto ?? '';\n  }\n\n  set texto(texto: string) {\n    this.caput!.texto = texto;\n  }\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { ElementoAction } from '../acao';\nimport { Regras } from './regras';\n\nexport function RegrasCaput<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      return [];\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n  };\n}\n","import { Numeracao } from '../../dispositivo/numeracao';\n\nexport function NumeracaoCaput<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoIndisponivel';\n\n    numero?: string;\n    rotulo?: string;\n\n    createRotulo(): void {\n      this.rotulo = undefined;\n    }\n\n    createNumeroFromRotulo(): void {\n      //\n    }\n\n    getNumeracaoParaComandoEmenda(): string {\n      return '';\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(): string {\n      return 'caput';\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isAlinea, isCaput, isDispositivoGenerico, isInciso, isParagrafo } from '../../dispositivo/tipo';\nimport { acoesDisponiveis, ElementoAction } from '../acao';\nimport { finalizarBlocoAlteracao, iniciarBlocoAlteracao } from '../acao/blocoAlteracaoAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { TransformarElemento } from '../acao/transformarElementoAction';\nimport { hasDispositivosPosterioresAlteracao, isDispositivoAlteracao, isUltimaAlteracao } from '../hierarquia/hierarquiaUtil';\nimport { Regras } from './regras';\n\nexport function RegrasDispositivoGenerico<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isDispositivoGenerico(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(removerElementoAction);\n\n      if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo)) {\n        acoes.push(iniciarBlocoAlteracao);\n        if (hasDispositivosPosterioresAlteracao(dispositivo)) {\n          acoes.push(finalizarBlocoAlteracao);\n        }\n      }\n\n      if (\n        (isParagrafo(dispositivo.pai!) || isCaput(dispositivo.pai!) || isInciso(dispositivo.pai!) || isAlinea(dispositivo.pai!)) &&\n        dispositivo.pai!.tipoProvavelFilho!.length > 0\n      ) {\n        acoes.push(acoesDisponiveis.filter(a => a instanceof TransformarElemento && a.nomeAcao === 'transformarDispositivoGenericoEm' + dispositivo.pai!.tipoProvavelFilho)[0]);\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n  };\n}\n","import { Numeracao } from '../../dispositivo/numeracao';\n\nexport function NumeracaoGenerico<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoDispositivoGenericoLcp95';\n    private SUFIXO = ' -';\n\n    numero?: string;\n    rotulo?: string;\n\n    createNumeroFromRotulo(): void {\n      //\n    }\n\n    createRotulo(): void {\n      this.rotulo = this.numero === undefined ? 'dg' : this.numero + this.SUFIXO;\n    }\n\n    getNumeracaoParaComandoEmenda(): string {\n      return this.numero === undefined ? 'dg' : this.numero;\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(): string {\n      return this.getNumeracaoParaComandoEmenda();\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isDispositivoGenerico, isInciso, isIncisoCaput, isIncisoParagrafo, isOmissis, isParagrafo } from '../../dispositivo/tipo';\nimport { ElementoAction } from '../acao';\nimport { adicionarAlinea, adicionarInciso, adicionarParagrafo } from '../acao/adicionarElementoAction';\nimport { finalizarBlocoAlteracao, iniciarBlocoAlteracao } from '../acao/blocoAlteracaoAction';\nimport { moverElementoAbaixoAction } from '../acao/moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from '../acao/moverElementoAcimaAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { renumerarElementoAction } from '../acao/renumerarElementoAction';\nimport {\n  TransformarElemento,\n  transformarEmOmissisIncisoCaput,\n  transformarEmOmissisIncisoParagrafo,\n  transformarIncisoCaputEmAlinea,\n  transformarIncisoCaputEmParagrafo,\n  transformarIncisoParagrafoEmAlinea,\n  transformarIncisoParagrafoEmParagrafo,\n} from '../acao/transformarElementoAction';\nimport { hasIndicativoContinuacaoSequencia, hasIndicativoDesdobramento, hasIndicativoFinalSequencia } from '../conteudo/conteudoUtil';\nimport {\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipoInclusiveOmissis,\n  getDispositivoPosteriorMesmoTipoInclusiveOmissis,\n  hasDispositivosPosterioresAlteracao,\n  isDispositivoAlteracao,\n  isPrimeiroMesmoTipo,\n  isUltimaAlteracao,\n  isUltimoMesmoTipo,\n  isUnicoMesmoTipo,\n} from '../hierarquia/hierarquiaUtil';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { Regras } from './regras';\nimport { podeConverterEmOmissis } from './regrasUtil';\n\nexport function RegrasInciso<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isInciso(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(removerElementoAction);\n\n      if (getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAbaixoAction);\n      }\n      if (getDispositivoAnteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAcimaAction);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && !isDispositivoGenerico(dispositivo)) {\n        acoes.push(renumerarElementoAction);\n      }\n      if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo)) {\n        acoes.push(iniciarBlocoAlteracao);\n        if (hasDispositivosPosterioresAlteracao(dispositivo)) {\n          acoes.push(finalizarBlocoAlteracao);\n        }\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && !isDispositivoGenerico(dispositivo)) {\n        acoes.push(renumerarElementoAction);\n      }\n\n      if (hasIndicativoDesdobramento(dispositivo)) {\n        acoes.push(adicionarAlinea);\n      }\n      if (hasIndicativoContinuacaoSequencia(dispositivo)) {\n        acoes.push(adicionarInciso);\n      }\n      if (hasIndicativoFinalSequencia(dispositivo) && isUltimoMesmoTipo(dispositivo)) {\n        acoes.push(adicionarParagrafo);\n      }\n\n      if (\n        isIncisoCaput(dispositivo) &&\n        (!isPrimeiroMesmoTipo(dispositivo) || (getDispositivoAnterior(dispositivo) !== undefined && isOmissis(getDispositivoAnterior(dispositivo)!)))\n      ) {\n        acoes.push(transformarIncisoCaputEmAlinea);\n      }\n      if (isIncisoCaput(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        acoes.push(transformarIncisoCaputEmParagrafo);\n      }\n      if (isIncisoCaput(dispositivo) && podeConverterEmOmissis(dispositivo)) {\n        acoes.push(transformarEmOmissisIncisoCaput);\n      }\n      if (isIncisoParagrafo(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isPrimeiroMesmoTipo(dispositivo))) {\n        acoes.push(transformarEmOmissisIncisoParagrafo);\n      }\n      if (\n        isIncisoParagrafo(dispositivo) &&\n        (!isPrimeiroMesmoTipo(dispositivo) || (getDispositivoAnterior(dispositivo) !== undefined && isOmissis(getDispositivoAnterior(dispositivo)!)))\n      ) {\n        acoes.push(transformarIncisoParagrafoEmAlinea);\n      }\n      if (isIncisoParagrafo(dispositivo) && podeConverterEmOmissis(dispositivo)) {\n        acoes.push(transformarEmOmissisIncisoParagrafo);\n      }\n      if (isIncisoParagrafo(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        acoes.push(transformarIncisoParagrafoEmParagrafo);\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      if (!isInciso(dispositivo)) {\n        return undefined;\n      }\n\n      if (isIncisoCaput(dispositivo) && (!isUnicoMesmoTipo(dispositivo) || !isPrimeiroMesmoTipo(dispositivo))) {\n        return transformarIncisoCaputEmAlinea;\n      }\n\n      if (isIncisoParagrafo(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return transformarIncisoParagrafoEmAlinea;\n      }\n\n      return dispositivo.tiposPermitidosFilhos?.map(tipo => {\n        const complemento = isInciso(dispositivo) ? dispositivo.pai!.tipo : '';\n\n        const destino = tipo.endsWith(TipoDispositivo.inciso.name!)\n          ? isParagrafo(dispositivo) && (!isUnicoMesmoTipo(dispositivo) || !isPrimeiroMesmoTipo(dispositivo))\n            ? 'IncisoParagrafo'\n            : 'IncisoCaput'\n          : tipo;\n\n        const acao = 'transformar' + dispositivo.tipo + complemento + 'Em' + destino;\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      if (!isInciso(dispositivo)) {\n        return undefined;\n      }\n\n      if (isIncisoCaput(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return transformarIncisoCaputEmParagrafo;\n      }\n\n      if (isIncisoParagrafo(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return transformarIncisoParagrafoEmParagrafo;\n      }\n\n      return dispositivo.tiposPermitidosPai?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n  };\n}\n","import { addSpaceRegex } from '../../../util/string-util';\nimport { Numeracao } from '../../dispositivo/numeracao';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { converteNumeroArabicoParaRomano, converteNumeroRomanoParaArabico, isNumeracaoValida, trataComplemento, converteLetraComplementoParaNumero } from './numeracaoUtil';\n\nexport function NumeracaoInciso<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoIncisoLcp95';\n    private SUFIXO = ' ';\n    numero?: string;\n    rotulo?: string;\n\n    private normalizaNumeracao(numero: string): string {\n      const num = /[CDILMVX]+(-[a-zA-Z]+)*/.exec(numero);\n      return num ? num[0] : addSpaceRegex(numero).trim().replace(/-$/, '').trim();\n    }\n\n    createNumeroFromRotulo(rotulo: string): void {\n      const temp = trataComplemento(this.normalizaNumeracao(rotulo!), converteNumeroRomanoParaArabico);\n      this.numero = isNumeracaoValida(temp) ? temp : undefined;\n    }\n\n    createRotulo(): void {\n      this.rotulo = this.numero === undefined ? TipoDispositivo.inciso.name : trataComplemento(this.numero, converteNumeroArabicoParaRomano) + this.SUFIXO;\n    }\n\n    getNumeracaoParaComandoEmenda(): string {\n      if (this.numero === undefined) {\n        return TipoDispositivo.inciso.descricao?.toLocaleLowerCase() + '';\n      }\n      return trataComplemento(this.numero, converteNumeroArabicoParaRomano);\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(): string {\n      if (this.numero === undefined) {\n        return TipoDispositivo.inciso.descricao?.toLocaleLowerCase() + '';\n      }\n      return TipoDispositivo.inciso.descricao?.toLocaleLowerCase() + ' ' + this.getNumeracaoParaComandoEmenda();\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isDispositivoGenerico, isItem } from '../../dispositivo/tipo';\nimport { ElementoAction } from '../acao';\nimport { finalizarBlocoAlteracao, iniciarBlocoAlteracao } from '../acao/blocoAlteracaoAction';\nimport { moverElementoAbaixoAction } from '../acao/moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from '../acao/moverElementoAcimaAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { renumerarElementoAction } from '../acao/renumerarElementoAction';\nimport { TransformarElemento, transformarEmOmissisItem, transformarItemEmAlinea } from '../acao/transformarElementoAction';\nimport {\n  getDispositivoAnteriorMesmoTipoInclusiveOmissis,\n  getDispositivoPosteriorMesmoTipoInclusiveOmissis,\n  hasDispositivosPosterioresAlteracao,\n  isDispositivoAlteracao,\n  isUltimaAlteracao,\n  isUltimoMesmoTipo,\n  isUnicoMesmoTipo,\n} from '../hierarquia/hierarquiaUtil';\nimport { Regras } from './regras';\nimport { podeConverterEmOmissis } from './regrasUtil';\n\nexport function RegrasItem<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isItem(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(removerElementoAction);\n\n      if (getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAbaixoAction);\n      }\n      if (getDispositivoAnteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAcimaAction);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && !isDispositivoGenerico(dispositivo)) {\n        acoes.push(renumerarElementoAction);\n      }\n      if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo)) {\n        acoes.push(iniciarBlocoAlteracao);\n        if (hasDispositivosPosterioresAlteracao(dispositivo)) {\n          acoes.push(finalizarBlocoAlteracao);\n        }\n      }\n\n      if (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo)) {\n        acoes.push(transformarItemEmAlinea);\n      }\n      if (podeConverterEmOmissis(dispositivo)) {\n        acoes.push(transformarEmOmissisItem);\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      if (!isItem) {\n        return undefined;\n      }\n\n      return dispositivo.tiposPermitidosFilhos?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      if (!dispositivo.tiposPermitidosFilhos) {\n        return undefined;\n      }\n\n      return dispositivo.tiposPermitidosPai?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n  };\n}\n","import { addSpaceRegex } from '../../../util/string-util';\nimport { Numeracao } from '../../dispositivo/numeracao';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { isNumeracaoValida, trataComplemento } from './numeracaoUtil';\n\nexport function NumeracaoItem<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoItemLcp95';\n    private SUFIXO = '.';\n    numero?: string;\n    rotulo?: string;\n\n    private normalizaNumeracao(numero: string): string {\n      const num = /\\d+(-[a-zA-Z]+)*/.exec(numero.trim());\n      return num ? num[0] : addSpaceRegex(numero).trim().replace(/\\.$/, '').trim();\n    }\n\n    createNumeroFromRotulo(rotulo: string): void {\n      const temp = this.normalizaNumeracao(rotulo!);\n      this.numero = isNumeracaoValida(temp) ? temp : undefined;\n    }\n\n    createRotulo(): void {\n      this.rotulo = this.numero === undefined ? TipoDispositivo.item.name : trataComplemento(this.numero) + this.SUFIXO;\n    }\n\n    getNumeracaoParaComandoEmenda(): string {\n      if (this.numero === undefined) {\n        return TipoDispositivo.item.descricao?.toLowerCase() + '';\n      }\n      return trataComplemento(this.numero);\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(): string {\n      if (this.numero === undefined) {\n        return TipoDispositivo.item.descricao?.toLocaleLowerCase() + '';\n      }\n      return TipoDispositivo.item.descricao?.toLocaleLowerCase() + ' ' + this.getNumeracaoParaComandoEmenda();\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isAlinea, isIncisoCaput, isIncisoParagrafo, isParagrafo } from '../../dispositivo/tipo';\nimport { ElementoAction } from '../acao';\nimport { adicionarInciso } from '../acao/adicionarElementoAction';\nimport { finalizarBlocoAlteracao, iniciarBlocoAlteracao } from '../acao/blocoAlteracaoAction';\nimport { moverElementoAbaixoAction } from '../acao/moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from '../acao/moverElementoAcimaAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { renumerarElementoAction } from '../acao/renumerarElementoAction';\nimport {\n  transformarAlineaEmIncisoCaput,\n  transformarAlineaEmIncisoParagrafo,\n  TransformarElemento,\n  transformarEmOmissisParagrafo,\n  transformarIncisoCaputEmParagrafo,\n  transformarIncisoParagrafoEmParagrafo,\n  transformarParagrafoEmArtigo,\n  transformarParagrafoEmIncisoCaput,\n  transformarParagrafoEmIncisoParagrafo,\n} from '../acao/transformarElementoAction';\nimport { hasIndicativoDesdobramento } from '../conteudo/conteudoUtil';\nimport {\n  getDispositivoAnteriorMesmoTipoInclusiveOmissis,\n  getDispositivoPosteriorMesmoTipoInclusiveOmissis,\n  hasDispositivosPosterioresAlteracao,\n  isDispositivoAlteracao,\n  isPrimeiroMesmoTipo,\n  isUltimaAlteracao,\n  isUltimoMesmoTipo,\n  isUnicoMesmoTipo,\n} from '../hierarquia/hierarquiaUtil';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { Regras } from './regras';\nimport { podeConverterEmOmissis } from './regrasUtil';\n\nexport function RegrasParagrafo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isParagrafo(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(removerElementoAction);\n\n      if (getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAbaixoAction);\n      }\n      if (getDispositivoAnteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAcimaAction);\n      }\n      if (isDispositivoAlteracao(dispositivo)) {\n        acoes.push(renumerarElementoAction);\n      }\n      if (dispositivo.texto && hasIndicativoDesdobramento(dispositivo)) {\n        acoes.push(adicionarInciso);\n      }\n      if (isPrimeiroMesmoTipo(dispositivo) || isUnicoMesmoTipo(dispositivo)) {\n        acoes.push(transformarParagrafoEmIncisoCaput);\n      }\n      if (!isUnicoMesmoTipo(dispositivo)) {\n        acoes.push(transformarParagrafoEmIncisoParagrafo);\n      }\n      if (isUltimoMesmoTipo(dispositivo) || isUnicoMesmoTipo(dispositivo)) {\n        acoes.push(transformarParagrafoEmArtigo);\n      }\n      if (podeConverterEmOmissis(dispositivo)) {\n        acoes.push(transformarEmOmissisParagrafo);\n      }\n      if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo)) {\n        acoes.push(iniciarBlocoAlteracao);\n        if (hasDispositivosPosterioresAlteracao(dispositivo)) {\n          acoes.push(finalizarBlocoAlteracao);\n        }\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      if (!isParagrafo(dispositivo)) {\n        return undefined;\n      }\n      return dispositivo.tiposPermitidosFilhos?.map(tipo => {\n        const destino = tipo.endsWith(TipoDispositivo.inciso.name!)\n          ? isParagrafo(dispositivo) && (!isUnicoMesmoTipo(dispositivo) || !isPrimeiroMesmoTipo(dispositivo))\n            ? 'IncisoParagrafo'\n            : 'IncisoCaput'\n          : tipo;\n\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + destino;\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      if (!dispositivo.tiposPermitidosFilhos) {\n        return undefined;\n      }\n\n      if (isIncisoCaput(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return transformarIncisoCaputEmParagrafo;\n      }\n\n      if (isIncisoParagrafo(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return transformarIncisoParagrafoEmParagrafo;\n      }\n\n      if (isAlinea(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return isParagrafo(dispositivo.pai!.pai!) ? transformarAlineaEmIncisoParagrafo : transformarAlineaEmIncisoCaput;\n      }\n\n      return dispositivo.tiposPermitidosPai?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Numeracao } from '../../dispositivo/numeracao';\nimport { isParagrafo } from '../../dispositivo/tipo';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { isNumeracaoValida } from './numeracaoUtil';\n\nexport function NumeracaoParagrafo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoParagrafoLcp95';\n    private PREFIXO = ' ';\n    private SUFIXO = '';\n    private PARAGRAFO_UNICO = 'Pargrafo nico.';\n    numero?: string;\n    rotulo?: string;\n    informouParagrafoUnico = false;\n\n    private normalizaNumeracao(numero: string): string {\n      return numero\n        .trim()\n        .replace(/\\./g, '')\n        .replace(//i, '')\n        .replace(/par[a]grafo [u]nico/i, '1')\n        .replace(/[]/i, '')\n        .trim();\n    }\n\n    createNumeroFromRotulo(rotulo: string): void {\n      const temp = this.normalizaNumeracao(rotulo!);\n      this.informouParagrafoUnico = /.[u]nico/i.test(rotulo);\n      this.numero = this.informouParagrafoUnico ? '1' : isNumeracaoValida(temp) ? temp : undefined;\n    }\n\n    createRotulo(dispositivo: Dispositivo): void {\n      if (this.numero === undefined || !dispositivo) {\n        this.rotulo = TipoDispositivo.paragrafo.name;\n      } else if (!isNumeracaoValida(this.numero)) {\n        this.rotulo = this.getNumeroAndSufixoNumeracao();\n      } else if (dispositivo.isDispositivoAlteracao) {\n        this.rotulo = this.informouParagrafoUnico ? this.PARAGRAFO_UNICO : this.PREFIXO + this.getNumeroAndSufixoNumeracao();\n      } else {\n        dispositivo.pai?.filhos.filter(f => isParagrafo(f)).length === 1\n          ? (this.rotulo = this.PARAGRAFO_UNICO)\n          : (this.rotulo = this.PREFIXO + this.numero === undefined ? undefined : this.PREFIXO + this.getNumeroAndSufixoNumeracao());\n      }\n    }\n\n    private getNumeroAndSufixoNumeracao(): string {\n      if (!this.numero) {\n        return '';\n      }\n\n      const num = this.numero.search(/[a-zA-Z-]/) === -1 ? parseInt(this.numero) : parseInt(this.numero.substring(0, this.numero.search(/[a-zA-Z-]/)));\n      const resto = this.numero.search(/[a-zA-Z-]/) === -1 ? '' : this.numero.substring(this.numero.search(/[a-zA-Z-]/));\n\n      return (num < 10 ? num + this.SUFIXO : num) + (resto?.length > 0 ? resto : '') + (num > 9 ? '.' : '');\n    }\n\n    getNumeracaoParaComandoEmenda(): string {\n      if (this.numero === undefined) {\n        return TipoDispositivo.paragrafo.descricao?.toLocaleLowerCase() + '';\n      }\n      return this.isParagrafoUnico() ? 'pargrafo nico' : this.getNumeroAndSufixoNumeracao();\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(): string {\n      if (this.numero === undefined) {\n        return TipoDispositivo.paragrafo.descricao?.toLocaleLowerCase() + '';\n      }\n      return this.isParagrafoUnico() ? 'pargrafo nico' : ' ' + this.getNumeroAndSufixoNumeracao();\n    }\n\n    private isParagrafoUnico(): boolean {\n      return (this.isDispositivoAlteracao && this.informouParagrafoUnico) || this.pai?.filhos.filter(f => isParagrafo(f)).length === 1;\n    }\n  };\n}\n","import { Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { calculaNumeracao } from '../numeracao/numeracaoUtil';\nimport { buildId } from '../util/idUtil';\nimport { TipoLexml } from './tipoLexml';\n\nexport class TipoArticulacao extends TipoLexml {\n  _artigos?: Artigo[];\n\n  constructor() {\n    super('articulacao');\n  }\n\n  get artigos(): Artigo[] {\n    return this._artigos ?? [];\n  }\n\n  addArtigo(artigo: Artigo, referencia?: Dispositivo): void {\n    this._artigos = this._artigos ?? [];\n    referencia !== undefined ? this._artigos.splice(this._artigos.indexOf(referencia as Artigo) + 1, 0, artigo) : this._artigos.push(artigo);\n  }\n\n  addArtigoOnPosition(filho: Dispositivo, posicao: number): void {\n    this._artigos = this._artigos ?? [];\n    this._artigos.splice(posicao, 0, filho as Artigo);\n  }\n\n  removeArtigo(artigo: Artigo): void {\n    this._artigos = this._artigos ?? [];\n    this._artigos = this._artigos.filter(f => f.uuid !== artigo.uuid);\n  }\n\n  renumeraArtigos(): void {\n    this.artigos\n      .filter(f => f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_NOVO || f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO)\n      .forEach(filho => {\n        filho.numero = calculaNumeracao(filho);\n        filho.createRotulo(filho);\n        filho.id = buildId(filho);\n        const caput = (filho as Artigo).caput;\n        if (caput) {\n          caput.id = buildId(caput);\n        }\n      });\n  }\n\n  indexOfArtigo(artigo: Artigo): number {\n    return this.artigos.indexOf(artigo);\n  }\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isAlinea, isArticulacao, isArtigo, isCaput, isDispositivoGenerico, isInciso, isOmissis, isParagrafo } from '../../dispositivo/tipo';\nimport { ElementoAction } from '../acao';\nimport { finalizarBlocoAlteracao, iniciarBlocoAlteracao } from '../acao/blocoAlteracaoAction';\nimport { moverElementoAbaixoAction } from '../acao/moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from '../acao/moverElementoAcimaAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { renumerarElementoAction } from '../acao/renumerarElementoAction';\nimport {\n  transformarOmissisEmAlinea,\n  transformarOmissisEmArtigo,\n  transformarOmissisEmIncisoCaput,\n  transformarOmissisEmIncisoParagrafo,\n  transformarOmissisEmItem,\n  transformarOmissisEmParagrafo,\n} from '../acao/transformarElementoAction';\nimport {\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipoInclusiveOmissis,\n  getDispositivoPosteriorMesmoTipoInclusiveOmissis,\n  hasDispositivosPosterioresAlteracao,\n  isDispositivoAlteracao,\n  isUltimaAlteracao,\n} from '../hierarquia/hierarquiaUtil';\nimport { Regras } from './regras';\n\nexport function RegrasOmissis<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isOmissis(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(removerElementoAction);\n\n      if (getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAbaixoAction);\n      }\n      if (getDispositivoAnteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAcimaAction);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && !isDispositivoGenerico(dispositivo)) {\n        acoes.push(renumerarElementoAction);\n      }\n      if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo)) {\n        acoes.push(iniciarBlocoAlteracao);\n        if (hasDispositivosPosterioresAlteracao(dispositivo)) {\n          acoes.push(finalizarBlocoAlteracao);\n        }\n      }\n\n      if (isArticulacao(dispositivo.pai!) && getDispositivoAnterior(dispositivo) !== undefined) {\n        acoes.push(transformarOmissisEmArtigo);\n      }\n      if (isCaput(dispositivo.pai!)) {\n        acoes.push(transformarOmissisEmIncisoCaput);\n      }\n      if (isArtigo(dispositivo.pai!)) {\n        acoes.push(transformarOmissisEmParagrafo);\n      }\n      if (isParagrafo(dispositivo.pai!)) {\n        acoes.push(transformarOmissisEmIncisoParagrafo);\n      }\n      if (isInciso(dispositivo.pai!)) {\n        acoes.push(transformarOmissisEmAlinea);\n      }\n      if (isAlinea(dispositivo.pai!)) {\n        acoes.push(transformarOmissisEmItem);\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n  };\n}\n","import { Conteudo } from '../../dispositivo/conteudo';\nimport { normalizaSeForOmissis, TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO } from './conteudoUtil';\nimport { TEXTO_OMISSIS } from './textoOmissis';\nimport { TipoConteudo } from './tipoConteudo';\n\nexport function ConteudoOmissis<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Conteudo {\n    readonly tipoConteudo = TipoConteudo.ConteudoTexto;\n    _texto = TEXTO_OMISSIS;\n\n    get texto(): string {\n      return this._texto;\n    }\n\n    set texto(texto: string) {\n      const t = normalizaSeForOmissis(texto);\n      this._texto = t === TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO ? TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO : TEXTO_OMISSIS;\n    }\n  };\n}\n","import { Numeracao } from '../../dispositivo/numeracao';\n\nexport function NumeracaoIndisponivel<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoIndisponivel';\n\n    numero?: string;\n    rotulo?: string;\n\n    createRotulo(): void {\n      this.rotulo = undefined;\n    }\n\n    createNumeroFromRotulo(): void {\n      //\n    }\n\n    getNumeracaoParaComandoEmenda(): string {\n      return '';\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(): string {\n      return '';\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { ClassificacaoDocumento } from '../../documento/classificacao';\nimport { ElementoAction } from '../acao';\nimport { AgruparElemento } from '../acao/agruparElementoAction';\nimport { hasApenasDispositivosIrmaosNovos as hasApenasDispositivosIrmaosAdicionados } from '../regras/regrasUtil';\nimport { DispositivoNovo } from './dispositivoNovo';\n\nexport class DispositivoAdicionado extends DispositivoNovo {\n  descricaoSituacao = DescricaoSituacao.DISPOSITIVO_ADICIONADO;\n  tipoEmenda = ClassificacaoDocumento.EMENDA;\n\n  getAcoesPermitidas(dispositivo: Dispositivo, acoes: any[]): any[] {\n    const acoesSemDuplicidade = [...new Set(acoes)];\n\n    return acoesSemDuplicidade\n      .filter(a => a !== undefined)\n      .filter((acao: ElementoAction): boolean => acao.descricao !== 'Adicionar' && acao.descricao !== 'Atualizar dispositivo')\n      .filter((acao: ElementoAction): boolean => !(acao instanceof AgruparElemento))\n      .filter((a: ElementoAction) => !a.descricao?.startsWith('Mover') || hasApenasDispositivosIrmaosAdicionados(dispositivo))\n      .sort((a, b) => a.descricao!.localeCompare(b.descricao!));\n  }\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao, isSituacaoExclusivaDispositivoEmenda, TipoSituacao } from '../../dispositivo/situacao';\nimport { ElementoAction } from '../acao';\nimport { AgruparElemento } from '../acao/agruparElementoAction';\nimport { RemoverElemento } from '../acao/removerElementoAction';\nimport { RenumerarElemento } from '../acao/renumerarElementoAction';\nimport { restaurarElementoAction } from '../acao/restaurarElemento';\nimport { suprimirElementoAction } from '../acao/suprimirElemento';\nimport { TransformarElemento } from '../acao/transformarElementoAction';\nimport { getDispositivoAndFilhosAsLista } from '../hierarquia/hierarquiaUtil';\n\nexport class DispositivoOriginal implements TipoSituacao {\n  descricaoSituacao = DescricaoSituacao.DISPOSITIVO_ORIGINAL;\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  getAcoesPermitidas(dispositivo: Dispositivo, acoes: any[]): any[] {\n    const acoesFiltradas = acoes\n      .filter((a: ElementoAction) => !(a instanceof AgruparElemento))\n      .filter((a: ElementoAction) => !(a instanceof RemoverElemento))\n      .filter((a: ElementoAction) => !a.descricao?.startsWith('Mover'))\n      .filter((a: ElementoAction) => !(a instanceof TransformarElemento))\n      .filter((a: ElementoAction) => !(a instanceof RenumerarElemento));\n\n    if (getDispositivoAndFilhosAsLista(dispositivo).filter(f => isSituacaoExclusivaDispositivoEmenda(f)).length > 0) {\n      acoesFiltradas.push(restaurarElementoAction);\n    } else {\n      acoesFiltradas.push(suprimirElementoAction);\n    }\n    return acoesFiltradas;\n  }\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { TransformarElemento } from './transformarElementoAction';\n\nexport const normalizaNomeAcaoTransformacao = (dispositivo: Dispositivo, tipo: string): any => {\n  let t: string;\n\n  if (tipo.endsWith('EmOmissis')) {\n    const tipoDispositivo = tipo.replace('transformar', '').replace('EmOmissis', '');\n    t = 'transformar' + tipoDispositivo + 'EmOmissis' + tipoDispositivo;\n  } else {\n    t = tipo;\n  }\n\n  const acoes: any = dispositivo\n    .getAcoesPossiveis(dispositivo)\n    .filter(a => a instanceof TransformarElemento)\n    .filter((a: any) => a.nomeAcao === tipo || a.nomeAcao.replaceAll('IncisoCaput', 'Inciso').replaceAll('IncisoParagrafo', 'Inciso') === t);\n\n  return acoes[0]?.nomeAcao;\n};\n\nexport const isAcaoPermitida = (dispositivo: Dispositivo, tipo: any): boolean => {\n  return dispositivo.getAcoesPossiveis(dispositivo).filter(a => a instanceof tipo).length > 0;\n};\n\nexport const isAcaoTransformacaoPermitida = (dispositivo: Dispositivo, action: any): boolean => {\n  const nomeAcao = normalizaNomeAcaoTransformacao(dispositivo, action.subType);\n  return dispositivo.getAcoesPossiveis(dispositivo).filter(a => a instanceof TransformarElemento && a.nomeAcao && a.nomeAcao === nomeAcao).length > 0;\n};\n","import { Artigo, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { isAgrupador, isArticulacao, isArtigo, isDispositivoGenerico } from '../../../model/dispositivo/tipo';\nimport { Elemento } from '../../../model/elemento';\nimport { createElemento } from '../../../model/elemento/elementoUtil';\nimport { isAcaoPermitida } from '../../../model/lexml/acao/acaoUtil';\nimport { AdicionarElemento } from '../../../model/lexml/acao/adicionarElementoAction';\nimport { hasIndicativoDesdobramento } from '../../../model/lexml/conteudo/conteudoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport {\n  getArticulacao,\n  getDispositivoAndFilhosAsLista,\n  getDispositivoAnteriorMesmoTipo,\n  getProximoArtigoAnterior,\n  getUltimoFilho,\n  hasFilhos,\n} from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { Counter } from '../../../util/counter';\nimport { StateType } from '../../state';\nimport { getEvento } from '../evento/eventosUtil';\n\nexport const textoFoiModificado = (atual: Dispositivo, action: any, state?: any): boolean => {\n  if (state && state.ui?.events) {\n    const ev = getEvento(state.ui.events, StateType.ElementoModificado);\n    if (ev && ev.elementos && ev.elementos[0]?.conteudo?.texto === atual.texto) {\n      return true;\n    }\n  }\n  return (atual.texto !== '' && action.atual?.conteudo?.texto === '') || (action.atual?.conteudo?.texto && atual.texto.localeCompare(action.atual?.conteudo?.texto) !== 0);\n};\n\nexport const createElementoValidado = (dispositivo: Dispositivo): Elemento => {\n  const el = createElemento(dispositivo);\n  el.mensagens = validaDispositivo(dispositivo);\n\n  return el;\n};\n\nexport const resetUuidTodaArvore = (dispositivo: Dispositivo): void => {\n  dispositivo.uuid = Counter.next();\n  dispositivo.filhos?.forEach(f => resetUuidTodaArvore(f));\n};\n\nexport const copiaDispositivosParaOutroPai = (pai: Dispositivo, dispositivos: Dispositivo[]): Dispositivo[] => {\n  return dispositivos.map(d => {\n    const paiAtual = d.pai;\n\n    resetUuidTodaArvore(d);\n    const anterior = isArtigo(d) ? getDispositivoAnteriorMesmoTipo(d) : undefined;\n    paiAtual?.removeFilho(d);\n    d.pai = pai;\n    pai.addFilho(d, anterior);\n    return d;\n  });\n};\n\nconst isPrimeiroArtigo = (dispositivo: Dispositivo): boolean => {\n  return isArtigo(dispositivo) && getArticulacao(dispositivo).indexOfArtigo(dispositivo as Artigo) === 0;\n};\n\nexport const isDesdobramentoAgrupadorAtual = (dispositivo: Dispositivo, tipo: string): boolean => {\n  return dispositivo.pai!.tipo === tipo;\n};\n\nexport const ajustaReferencia = (referencia: Dispositivo, dispositivo: Dispositivo): Dispositivo => {\n  return isArticulacao(referencia) || isPrimeiroArtigo(dispositivo) || dispositivo.pai!.indexOf(dispositivo) === 0 ? referencia : getUltimoFilho(referencia);\n};\n\nexport const naoPodeCriarFilho = (dispositivo: Dispositivo, action: any): boolean => {\n  if (\n    isAgrupador(dispositivo) &&\n    dispositivo.pai &&\n    dispositivo.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_NOVO &&\n    !getProximoArtigoAnterior(dispositivo.pai!, dispositivo)\n  ) {\n    return true;\n  }\n  if (dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL && hasIndicativoDesdobramento(dispositivo) && hasFilhos(dispositivo)) {\n    return true;\n  }\n  return (\n    isDispositivoGenerico(dispositivo) ||\n    (hasIndicativoDesdobramento(dispositivo) && !isAcaoPermitida(dispositivo, AdicionarElemento)) ||\n    (dispositivo.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL && isNovoDispositivoDesmembrandoAtual(action.novo?.conteudo?.texto))\n  );\n};\n\nexport const isNovoDispositivoDesmembrandoAtual = (texto: string): boolean => {\n  return texto !== undefined && texto !== '';\n};\n\nexport const getElementosDoDispositivo = (dispositivo: Dispositivo, valida = false): Elemento[] => {\n  const lista: Elemento[] = [];\n\n  getDispositivoAndFilhosAsLista(dispositivo).forEach(d => {\n    if (valida) {\n      const mensagens = validaDispositivo(d);\n      if (mensagens) {\n        d.mensagens = mensagens;\n        lista.push(createElemento(d));\n      }\n    } else {\n      lista.push(createElemento(d));\n    }\n  });\n  return lista;\n};\n","import { Elemento } from '../../../model/elemento';\nimport { StateEvent, StateType } from '../../state';\nimport { createEventos, eventoContem } from './eventosUtil';\n\nexport class Eventos {\n  eventos: StateEvent[] = [];\n\n  constructor() {\n    this.eventos = createEventos();\n  }\n\n  add(stateType: StateType, elementos: Elemento[]): void {\n    const evento = this.get(stateType);\n    elementos.forEach(el => (!eventoContem(evento, el) ? evento.elementos?.push(el) : undefined));\n  }\n\n  build(): StateEvent[] {\n    return this.eventos.filter(ev => ev.elementos && ev.elementos.length > 0);\n  }\n\n  get(stateType: StateType): StateEvent {\n    return this.eventos.filter(ev => ev.stateType === stateType)[0];\n  }\n\n  setReferencia(referencia: Elemento): void {\n    this.get(StateType.ElementoIncluido).referencia = referencia;\n  }\n}\n","import { Articulacao, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { isAgrupador, isArticulacao, isCaput } from '../../../model/dispositivo/tipo';\nimport { Elemento } from '../../../model/elemento';\nimport { buildListaElementosRenumerados, createElemento, criaListaElementosAfinsValidados, getElementos, listaDispositivosRenumerados } from '../../../model/elemento/elementoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport {\n  getDispositivoAndFilhosAsLista,\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipo,\n  getUltimoFilho,\n  irmaosMesmoTipo,\n  isArticulacaoAlteracao,\n  isArtigoUnico,\n  isDispositivoAlteracao,\n  isDispositivoCabecaAlteracao,\n  isParagrafoUnico,\n} from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoOriginal } from '../../../model/lexml/situacao/dispositivoOriginal';\nimport { DispositivoSuprimido } from '../../../model/lexml/situacao/dispositivoSuprimido';\nimport { StateEvent, StateType } from '../../state';\nimport { ajustaReferencia, getElementosDoDispositivo, resetUuidTodaArvore } from '../util/reducerUtil';\nimport { Eventos } from './eventos';\n\nexport const buildEventoAdicionarElemento = (atual: Dispositivo, novo: Dispositivo): Eventos => {\n  const eventos = new Eventos();\n  eventos.setReferencia(createElemento(ajustaReferencia(atual, novo)));\n  eventos.add(StateType.ElementoIncluido, getElementosDoDispositivo(novo));\n  eventos.add(StateType.ElementoRenumerado, buildListaElementosRenumerados(novo));\n  eventos.add(StateType.ElementoValidado, criaListaElementosAfinsValidados(novo, false));\n\n  return eventos;\n};\n\nexport const buildEventoAtualizacaoElemento = (dispositivo: Dispositivo): Eventos => {\n  const eventos = new Eventos();\n\n  const elemento = createElemento(dispositivo);\n  elemento.mensagens = validaDispositivo(dispositivo);\n\n  eventos.add(StateType.ElementoModificado, [elemento]);\n  eventos.add(StateType.ElementoValidado, criaListaElementosAfinsValidados(dispositivo));\n\n  return eventos;\n};\n\nexport const buildUpdateEvent = (dispositivo: Dispositivo, original?: Elemento): StateEvent[] => {\n  dispositivo.mensagens = validaDispositivo(dispositivo);\n  const elemento = createElemento(dispositivo);\n\n  const elementos = original ? [original] : [];\n  elementos.push(elemento);\n\n  return [\n    {\n      stateType: StateType.ElementoModificado,\n      elementos: elementos,\n    },\n    {\n      stateType: StateType.ElementoValidado,\n      elementos: criaListaElementosAfinsValidados(dispositivo, true),\n    },\n  ];\n};\n\nexport const buildEventoExclusaoElemento = (elementosRemovidos: Elemento[], dispositivosRenumerados: Dispositivo[], elementosValidados: Elemento[]): Eventos => {\n  const eventos = new Eventos();\n\n  eventos.add(StateType.ElementoRemovido, elementosRemovidos);\n  eventos.add(\n    StateType.ElementoRenumerado,\n    dispositivosRenumerados.map(d => createElemento(d))\n  );\n  eventos.add(StateType.ElementoValidado, elementosValidados);\n\n  return eventos;\n};\n\nexport const buildEventoTransformacaooElemento = (\n  atual: Dispositivo,\n  novo: Dispositivo,\n  elementosRemovidos: Elemento[],\n  elementosRenumerados: Elemento[],\n  elementosValidados: Elemento[]\n): Eventos => {\n  const eventos = new Eventos();\n\n  eventos.setReferencia(createElemento(ajustaReferencia(atual, novo)));\n  eventos.add(StateType.ElementoIncluido, getElementos(novo));\n  eventos.add(StateType.ElementoRemovido, elementosRemovidos);\n  eventos.add(StateType.ElementoRenumerado, elementosRenumerados);\n  eventos.add(\n    StateType.ElementoValidado,\n    elementosValidados.filter(e => e.mensagens!.length > 0)\n  );\n\n  return eventos;\n};\n\nexport const removeAndBuildEvents = (articulacao: Articulacao, dispositivo: Dispositivo): StateEvent[] => {\n  const removidos = getElementos(dispositivo);\n  const dispositivosRenumerados = listaDispositivosRenumerados(dispositivo);\n  const dispositivoAnterior = getDispositivoAnterior(dispositivo);\n\n  const pai = dispositivo.pai!;\n  pai.removeFilho(dispositivo);\n  pai.renumeraFilhos();\n\n  if (isArticulacaoAlteracao(pai) && pai.filhos.length === 0) {\n    pai.pai!.alteracoes = undefined;\n  }\n\n  const dispositivoValidado =\n    dispositivoAnterior && (isArtigoUnico(dispositivoAnterior) || isParagrafoUnico(dispositivoAnterior)) ? dispositivoAnterior : isCaput(pai!) ? pai!.pai! : pai!;\n\n  if (articulacao.artigos.length === 1) {\n    dispositivosRenumerados.push(articulacao.artigos[0]);\n  }\n\n  const eventos = buildEventoExclusaoElemento(removidos, dispositivosRenumerados, criaListaElementosAfinsValidados(dispositivoValidado, false));\n  return eventos.build();\n};\n\nexport const removeAgrupadorAndBuildEvents = (articulacao: Articulacao, atual: Dispositivo): StateEvent[] => {\n  let pos = atual.pai!.indexOf(atual);\n  const agrupadoresAnteriorMesmoTipo = atual.pai!.filhos.filter((d, i) => i < pos && isAgrupador(d));\n  const paiOriginal = atual.pai;\n  const removidos = [...getElementos(atual)];\n  const irmaoAnterior = getDispositivoAnteriorMesmoTipo(atual);\n\n  const pai = agrupadoresAnteriorMesmoTipo?.length > 0 && !isDispositivoAlteracao(atual) ? agrupadoresAnteriorMesmoTipo.reverse()[0] : atual.pai!;\n  const dispositivoAnterior =\n    agrupadoresAnteriorMesmoTipo?.length > 0 && !isDispositivoAlteracao(atual) ? agrupadoresAnteriorMesmoTipo.reverse()[0] : pos > 0 ? getUltimoFilho(pai.filhos[pos - 1]) : pai;\n  const referencia = isArticulacao(dispositivoAnterior) ? pai : getUltimoFilho(dispositivoAnterior);\n\n  const dispositivos = atual.filhos.map(d => {\n    d.pai = pai;\n    paiOriginal!.removeFilho(d);\n\n    resetUuidTodaArvore(d);\n    if (agrupadoresAnteriorMesmoTipo?.length > 0) {\n      pai!.addFilho(d);\n    } else {\n      pai!.addFilhoOnPosition(d, pos++);\n    }\n    return d;\n  });\n\n  atual.pai!.removeFilho(atual);\n  pai?.renumeraFilhos();\n  paiOriginal!.renumeraFilhos();\n\n  const incluidos = dispositivos.map(d => getElementos(d)).flat();\n\n  const renumerados = pai!.filhos\n    .filter((f, index) => index >= pos && (isAgrupador(f) || isDispositivoCabecaAlteracao(f)))\n    .map(d => createElemento(d))\n    .flat();\n\n  if (irmaoAnterior && irmaosMesmoTipo(irmaoAnterior).length === 1) {\n    renumerados.unshift(createElemento(irmaoAnterior));\n  }\n\n  const eventos = new Eventos();\n  eventos.setReferencia(isArticulacao(referencia) && isArticulacaoAlteracao(referencia as Articulacao) ? createElemento(referencia.pai!) : createElemento(referencia));\n  eventos.add(StateType.ElementoIncluido, incluidos);\n  eventos.add(StateType.ElementoRemovido, removidos);\n\n  eventos.add(StateType.ElementoRenumerado, renumerados);\n  return eventos.build();\n};\n\nexport const restauraAndBuildEvents = (articulacao: Articulacao, dispositivo: Dispositivo): StateEvent[] => {\n  const aRestaurar = getDispositivoAndFilhosAsLista(dispositivo).filter(f => f.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL);\n\n  aRestaurar.forEach(d => {\n    d.numero = d.situacao.dispositivoOriginal?.numero ?? '';\n    d.rotulo = d.situacao.dispositivoOriginal?.rotulo ?? '';\n    d.id = d.situacao.dispositivoOriginal?.lexmlId ?? '';\n    d.texto = d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO ? d.situacao.dispositivoOriginal?.conteudo?.texto ?? '' : d.texto;\n    d.situacao = new DispositivoOriginal();\n  });\n\n  const eventos = new Eventos();\n\n  eventos.add(\n    StateType.ElementoRestaurado,\n    aRestaurar.map(a => createElemento(a))\n  );\n\n  return eventos.build();\n};\n\nexport const suprimeAndBuildEvents = (articulacao: Articulacao, dispositivo: Dispositivo): StateEvent[] => {\n  getDispositivoAndFilhosAsLista(dispositivo).forEach(d => (d.situacao = new DispositivoSuprimido(createElemento(d))));\n\n  if (dispositivo.alteracoes && dispositivo.alteracoes.filhos.length > 0) {\n    dispositivo.alteracoes.filhos.forEach(f => getDispositivoAndFilhosAsLista(f).forEach(d => (d.situacao = new DispositivoSuprimido(createElemento(d)))));\n  }\n  const eventos = new Eventos();\n\n  eventos.add(StateType.ElementoSuprimido, getElementos(dispositivo));\n\n  return eventos.build();\n};\n\nexport const getEvento = (eventos: StateEvent[], stateType: StateType): StateEvent => {\n  return eventos?.filter(ev => ev.stateType === stateType)[0];\n};\n\nexport const getEventosQuePossuemElementos = (eventos: StateEvent[]): StateEvent[] => {\n  return eventos?.filter(ev => ev?.elementos && ev.elementos?.length > 0);\n};\n\nexport const addElementosAoEvento = (evento: StateEvent, elementos: Elemento[]): void => {\n  elementos.forEach(elemento => (evento.elementos?.filter(atual => atual.uuid === elemento.uuid).length === 0 ? evento.elementos.push(elemento) : undefined));\n};\n\nexport const eventoContem = (stateEvents: StateEvent, elemento: Elemento): boolean => {\n  return (\n    stateEvents?.elementos!.map(ev => ev.uuid === elemento!.uuid && ev.rotulo === elemento!.rotulo && ev.conteudo?.texto === elemento.conteudo?.texto).filter(value => value)\n      .length > 0\n  );\n};\n\nexport const createEventos = (): StateEvent[] => {\n  return [\n    {\n      stateType: StateType.ElementoIncluido,\n      referencia: undefined,\n      pai: undefined,\n      posicao: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoRemovido,\n      referencia: undefined,\n      pai: undefined,\n      posicao: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoModificado,\n      referencia: undefined,\n      pai: undefined,\n      posicao: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoRenumerado,\n      referencia: undefined,\n      pai: undefined,\n      posicao: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoRestaurado,\n      referencia: undefined,\n      pai: undefined,\n      posicao: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoSuprimido,\n      referencia: undefined,\n      pai: undefined,\n      posicao: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoValidado,\n      referencia: undefined,\n      pai: undefined,\n      posicao: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoSelecionado,\n      referencia: undefined,\n      pai: undefined,\n      posicao: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoMarcado,\n      referencia: undefined,\n      pai: undefined,\n      posicao: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.SituacaoElementoModificada,\n      referencia: undefined,\n      pai: undefined,\n      posicao: undefined,\n      elementos: [],\n    },\n  ];\n};\n","import { Mensagem } from '../../../model/lexml/util/mensagem';\nimport { State, StateEvent } from '../../state';\n\nconst count = 0;\n\nexport const buildPast = (state: any, events: any): StateEvent[] => {\n  const past = state.past ? state.past : [];\n  past.push(JSON.parse(JSON.stringify(events)));\n\n  return count > 50 ? past.shift() : past;\n};\n\nexport const buildFuture = (state: any, events: any): StateEvent[] => {\n  const future = state.future ? state.future : [];\n  future.push(JSON.parse(JSON.stringify(events)));\n\n  return count > 50 ? future.shift() : future;\n};\n\nexport const retornaEstadoAtualComMensagem = (state: any, mensagem: Mensagem): State => {\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events: state.ui?.events,\n      message: mensagem,\n    },\n  };\n};\n","import { isArticulacaoAlteracao } from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { isAgrupador, isOmissis } from '../../../model/dispositivo/tipo';\nimport { Elemento } from '../../../model/elemento';\nimport { createElemento, createElementos, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { normalizaSeForOmissis } from '../../../model/lexml/conteudo/conteudoUtil';\nimport { createByInferencia } from '../../../model/lexml/dispositivo/dispositivoLexmlFactory';\nimport { copiaFilhos } from '../../../model/lexml/dispositivo/dispositivoLexmlUtil';\nimport { hasFilhos, irmaosMesmoTipo, isArtigoUnico, isDispositivoAlteracao, isParagrafoUnico } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../../../model/lexml/situacao/dispositivoAdicionado';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State, StateType } from '../../state';\nimport { buildEventoAdicionarElemento } from '../evento/eventosUtil';\nimport { createElementoValidado, isNovoDispositivoDesmembrandoAtual, naoPodeCriarFilho, textoFoiModificado } from '../util/reducerUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\n\nexport const adicionaElemento = (state: any, action: any): State => {\n  let textoModificado = false;\n\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    return state;\n  }\n\n  if (atual.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL && isNovoDispositivoDesmembrandoAtual(action.novo?.conteudo?.texto)) {\n    action.atual.conteudo.texto = atual.texto;\n    action.novo.conteudo.texto = undefined;\n  }\n\n  const originalmenteUnico = isArtigoUnico(atual) || isParagrafoUnico(atual);\n\n  const elementoAtualOriginal = createElementoValidado(atual);\n\n  const elementosRemovidos: Elemento[] = [];\n\n  createElementos(elementosRemovidos, atual);\n\n  if (textoFoiModificado(atual, action, state)) {\n    atual.texto = !isDispositivoAlteracao(atual) ? action.atual.conteudo?.texto : normalizaSeForOmissis(action.atual.conteudo?.texto ?? '');\n    textoModificado = true;\n  }\n\n  if (naoPodeCriarFilho(atual, action)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.INFO, descricao: 'No  possvel criar dispositivos nessa situao' });\n  }\n\n  const novo = createByInferencia(atual, action);\n\n  if (\n    atual.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL ||\n    atual.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO ||\n    atual.situacao instanceof DispositivoAdicionado\n  ) {\n    novo.situacao = new DispositivoAdicionado();\n    (novo.situacao as DispositivoAdicionado).tipoEmenda = state.modo;\n    const pai = novo.pai!;\n    if (isArticulacaoAlteracao(pai) && pai.filhos.length === 1) {\n      pai.situacao = new DispositivoAdicionado();\n    }\n  }\n\n  if (isNovoDispositivoDesmembrandoAtual(action.novo?.conteudo?.texto) && atual.tipo === novo.tipo && hasFilhos(atual)) {\n    copiaFilhos(atual, novo);\n  }\n\n  if (isDispositivoAlteracao(novo)) {\n    novo.mensagens?.push({ tipo: TipoMensagem.WARNING, descricao: ` necessrio informar o rtulo do dispositivo` });\n  }\n\n  novo.pai!.renumeraFilhos();\n\n  const eventos = buildEventoAdicionarElemento(atual, novo);\n\n  const elementoAtualAtualizado = createElementoValidado(atual);\n\n  if (isNovoDispositivoDesmembrandoAtual(action.novo?.conteudo?.texto) && atual.tipo === novo.tipo && elementosRemovidos && elementosRemovidos.length > 0) {\n    eventos.add(StateType.ElementoRemovido, elementosRemovidos);\n  }\n\n  if (isAgrupador(novo) && irmaosMesmoTipo(novo).length === 2) {\n    const irmao = irmaosMesmoTipo(novo).filter(a => a !== novo);\n    eventos.add(StateType.ElementoModificado, [createElemento(irmao[0]!)]);\n  }\n\n  if (textoModificado || isNovoDispositivoDesmembrandoAtual(action.novo?.conteudo?.texto)) {\n    eventos.add(StateType.ElementoModificado, [elementoAtualOriginal, elementoAtualAtualizado]);\n  }\n\n  if (textoModificado || isNovoDispositivoDesmembrandoAtual(action.novo?.conteudo?.texto) || isOmissis(atual)) {\n    eventos.add(StateType.ElementoValidado, [elementoAtualAtualizado]);\n  }\n\n  if (isArtigoUnico(atual) || originalmenteUnico) {\n    eventos.add(StateType.ElementoValidado, [elementoAtualAtualizado]);\n    eventos.add(StateType.ElementoRenumerado, [elementoAtualAtualizado]);\n  }\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos.build()),\n    present: eventos.build(),\n    future: [],\n\n    ui: {\n      events: eventos.build(),\n    },\n  };\n};\n","import { Articulacao, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { isArticulacao } from '../../../model/dispositivo/tipo';\nimport { buildListaElementosRenumerados, createElemento, getDispositivoFromElemento, getElementos } from '../../../model/elemento/elementoUtil';\nimport { normalizaSeForOmissis } from '../../../model/lexml/conteudo/conteudoUtil';\nimport { criaDispositivo } from '../../../model/lexml/dispositivo/dispositivoLexmlFactory';\nimport {\n  getAgrupadorAcimaByTipo,\n  getAgrupadoresAcimaByTipo,\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipo,\n  hasAgrupadoresAcimaByTipo,\n  hasAgrupadoresAnterioresByTipo,\n  irmaosMesmoTipo,\n  isArticulacaoAlteracao,\n  isDispositivoAlteracao,\n} from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { ajustaReferencia, copiaDispositivosParaOutroPai, isDesdobramentoAgrupadorAtual, textoFoiModificado } from '../util/reducerUtil';\nimport { buildPast } from '../util/stateReducerUtil';\n\nexport const agrupaElemento = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    return state;\n  }\n\n  const dispositivoAnterior = getDispositivoAnterior(atual);\n  const pos = atual.pai!.indexOf(atual);\n  const removidos = atual\n    .pai!.filhos.filter((f: Dispositivo, index: number) => index >= pos && f.tipo !== action.novo.tipo)\n    .map(d => getElementos(d))\n    .flat();\n\n  if (textoFoiModificado(atual, action)) {\n    atual.texto = !isDispositivoAlteracao(atual) ? action.atual.conteudo?.texto : normalizaSeForOmissis(action.atual.conteudo?.texto ?? '');\n  }\n\n  let novo;\n  let ref: any = undefined;\n\n  if (isDesdobramentoAgrupadorAtual(atual, action.novo.tipo)) {\n    novo = criaDispositivo(atual.pai!.pai!, action.novo.tipo, undefined, atual.pai!.pai!.indexOf(atual.pai!) + 1);\n    ref = getDispositivoAnteriorMesmoTipo(novo);\n  } else if ((!isDispositivoAlteracao(atual) && hasAgrupadoresAcimaByTipo(atual, action.novo.tipo)) || hasAgrupadoresAnterioresByTipo(atual, action.novo.tipo)) {\n    ref = getAgrupadoresAcimaByTipo(atual, action.novo.tipo) ?? getAgrupadorAcimaByTipo(atual, action.novo.tipo);\n    novo = criaDispositivo(ref!.pai!, action.novo.tipo, ref);\n  } else {\n    novo = criaDispositivo(atual.pai!, action.novo.tipo, undefined, atual.pai!.indexOf(atual));\n    ref = dispositivoAnterior ?? atual.pai!;\n  }\n  novo.texto = action.novo.conteudo?.texto;\n  const dispositivos = atual.pai!.filhos.filter((f: Dispositivo, index: number) => index >= pos && f.tipo !== action.novo.tipo);\n  copiaDispositivosParaOutroPai(novo, dispositivos);\n  novo.renumeraFilhos();\n  novo.pai!.renumeraFilhos();\n\n  const renumerados = [...buildListaElementosRenumerados(novo)].concat(\n    novo.filhos\n      .filter((f: Dispositivo, index: number) => index >= pos && f.tipo !== atual.tipo)\n      .map((d: Dispositivo) => getElementos(d))\n      .flat()\n  );\n\n  const irmaoAnterior = getDispositivoAnteriorMesmoTipo(novo);\n\n  if (irmaoAnterior && irmaosMesmoTipo(novo).length === 2) {\n    renumerados.unshift(createElemento(irmaoAnterior));\n  }\n\n  const eventos = new Eventos();\n  eventos.setReferencia(createElemento(ajustaReferencia(ref!.pai && isArticulacao(ref!) && isArticulacaoAlteracao(ref as Articulacao) ? ref!.pai : ref!, novo)));\n  eventos.add(StateType.ElementoIncluido, getElementos(novo));\n  eventos.add(StateType.ElementoRemovido, removidos);\n\n  eventos.add(StateType.ElementoRenumerado, renumerados);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos.build()),\n    present: eventos.build(),\n    future: [],\n    ui: {\n      events: eventos.build(),\n    },\n  };\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao, TipoSituacao } from '../../dispositivo/situacao';\nimport { Elemento } from '../../elemento';\nimport { ElementoAction } from '../acao';\nimport { AgruparElemento } from '../acao/agruparElementoAction';\nimport { RemoverElemento } from '../acao/removerElementoAction';\nimport { RenumerarElemento } from '../acao/renumerarElementoAction';\nimport { restaurarElementoAction } from '../acao/restaurarElemento';\nimport { TransformarElemento } from '../acao/transformarElementoAction';\n\nexport class DispositivoModificado implements TipoSituacao {\n  descricaoSituacao = DescricaoSituacao.DISPOSITIVO_MODIFICADO;\n  dispositivoOriginal: Elemento;\n\n  constructor(dispositivoOriginal: Elemento) {\n    this.dispositivoOriginal = dispositivoOriginal;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  getAcoesPermitidas(dispositivo: Dispositivo, acoes: any[]): any[] {\n    const acoesFiltradas = acoes\n      .filter((a: ElementoAction) => !(a instanceof AgruparElemento))\n      .filter((a: ElementoAction) => !(a instanceof RemoverElemento))\n      .filter((a: ElementoAction) => !(a instanceof RenumerarElemento))\n      .filter((a: ElementoAction) => !a.descricao?.startsWith('Mover'))\n      .filter((acao: ElementoAction): boolean => acao.descricao !== 'Adicionar' && acao.descricao !== 'Atualizar dispositivo')\n      .filter((a: ElementoAction) => !(a instanceof TransformarElemento));\n\n    acoesFiltradas.push(restaurarElementoAction);\n\n    return acoesFiltradas.filter(a => a !== undefined).sort((a, b) => a.descricao!.localeCompare(b.descricao!));\n  }\n}\n","import { createElemento } from '../../../model/elemento/elementoUtil';\nimport { AlteracoesEmenda, DispositivoAdicionadoPelaEmenda } from '../../../model/emenda/alteracoesEmenda';\nimport { criaDispositivo } from '../../../model/lexml/dispositivo/dispositivoLexmlFactory';\nimport { buscaDispositivoById } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../../../model/lexml/situacao/dispositivoAdicionado';\nimport { DispositivoModificado } from '../../../model/lexml/situacao/dispositivoModificado';\nimport { DispositivoSuprimido } from '../../../model/lexml/situacao/dispositivoSuprimido';\nimport { buildId } from '../../../model/lexml/util/idUtil';\nimport { State, StateEvent, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\n\nexport const aplicaAlteracoesEmenda = (state: any, action: any): State => {\n  const retorno: State = {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: [],\n    present: [],\n    future: [],\n    ui: {\n      events: [],\n    },\n  };\n\n  const eventos = new Eventos();\n\n  if (action.alteracoesEmenda.dispositivosSuprimidos) {\n    eventos.add(StateType.ElementoSuprimido, []);\n\n    action.alteracoesEmenda.dispositivosSuprimidos.forEach(dispositivo => {\n      const d = buscaDispositivoById(state.articulacao, dispositivo.id);\n\n      if (d) {\n        d.situacao = new DispositivoSuprimido(createElemento(d));\n        eventos.get(StateType.ElementoSuprimido).elementos?.push(createElemento(d));\n      }\n    });\n  }\n\n  if (action.alteracoesEmenda.dispositivosModificados) {\n    eventos.add(StateType.ElementoModificado, []);\n\n    action.alteracoesEmenda.dispositivosModificados.forEach(dispositivo => {\n      const d = buscaDispositivoById(state.articulacao, dispositivo.id);\n\n      if (d) {\n        d.situacao = new DispositivoModificado(createElemento(d));\n        d.texto = dispositivo.texto;\n        eventos.get(StateType.ElementoModificado).elementos?.push(createElemento(d));\n      }\n    });\n  }\n\n  if (action.alteracoesEmenda.dispositivosAdicionados) {\n    processaDispositivosAdicionados(state, action.alteracoesEmenda).forEach(e => eventos.eventos.push(e));\n  }\n\n  retorno.ui!.events = eventos.build();\n\n  return retorno;\n};\n\nconst processaDispositivosAdicionados = (state: any, alteracoesEmenda: AlteracoesEmenda): StateEvent[] => {\n  const eventos: StateEvent[] = [];\n\n  const mapa = criaMapaElementosIncluidos(alteracoesEmenda);\n\n  for (const value of mapa.values()) {\n    eventos.push(criaEventoElementosIncluidos(state, value));\n  }\n\n  return eventos;\n};\n\nconst criaEventoElementosIncluidos = (state: any, dispositivosAdicionados: DispositivoAdicionadoPelaEmenda[]): StateEvent => {\n  const evento: StateEvent = {\n    stateType: StateType.ElementoIncluido,\n    referencia: undefined,\n    pai: undefined,\n    posicao: undefined,\n    elementos: [],\n  };\n\n  dispositivosAdicionados.forEach(dispositivo => {\n    let novo;\n\n    if (dispositivo.idIrmaoAnterior) {\n      const d = buscaDispositivoById(state.articulacao, dispositivo.idIrmaoAnterior);\n\n      if (d) {\n        novo = criaDispositivo(d.pai!, d.tipo, d);\n        evento.referencia = createElemento(d);\n      }\n    }\n    if (dispositivo.idPai) {\n      const d = buscaDispositivoById(state.articulacao, dispositivo.idPai);\n\n      if (d) {\n        novo = criaDispositivo(d!, dispositivo.tipo!, undefined, 0);\n        evento.referencia = createElemento(novo.pai);\n      }\n    }\n\n    if (novo) {\n      novo.situacao = new DispositivoAdicionado();\n      novo.rotulo = dispositivo.rotulo;\n      novo.texto = dispositivo.texto;\n      novo.lexmlId = buildId(novo);\n      evento.elementos?.push(createElemento(novo));\n    }\n  });\n\n  return evento;\n};\n\nconst IsFilhoUltimoProcessado = (idAtual: string, idAnterior: string): boolean => {\n  return idAnterior === idAtual.substring(0, idAtual.lastIndexOf('_'));\n};\n\nconst IsIrmaoUltimoProcessado = (idAtual: string, idAnterior: string): boolean => {\n  return idAnterior.substring(0, idAnterior.lastIndexOf('_')) === idAtual.substring(0, idAtual.lastIndexOf('_'));\n};\n\nconst criaNovaEntradaNoMapa = (mapa: Map<string, DispositivoAdicionadoPelaEmenda[]>, dispositivo: DispositivoAdicionadoPelaEmenda): void => {\n  mapa.set(dispositivo.id, [dispositivo]);\n};\n\nconst criaMapaElementosIncluidos = (alteracoesEmenda: AlteracoesEmenda): Map<string, []> => {\n  const mapaElementosIncluidos = new Map();\n\n  alteracoesEmenda.dispositivosAdicionados?.forEach((d, index) => {\n    if (index === 0) {\n      criaNovaEntradaNoMapa(mapaElementosIncluidos, d);\n    } else {\n      const ultimoProcessado = alteracoesEmenda.dispositivosAdicionados![index - 1];\n\n      if (IsFilhoUltimoProcessado(d.id, ultimoProcessado.id) || IsIrmaoUltimoProcessado(d.id, ultimoProcessado.id)) {\n        mapaElementosIncluidos.get(ultimoProcessado).push(d);\n      } else {\n        criaNovaEntradaNoMapa(mapaElementosIncluidos, d);\n      }\n    }\n  });\n\n  return mapaElementosIncluidos;\n};\n","import { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { buildHtmlLink, getNomeExtensoComDataExtenso } from '../../../model/lexml/documento/urnUtil';\nimport { DispositivoModificado } from '../../../model/lexml/situacao/dispositivoModificado';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { buildEventoAtualizacaoElemento, buildUpdateEvent } from '../evento/eventosUtil';\nimport { buildPast } from '../util/stateReducerUtil';\n\nexport const atualizaReferenciaElemento = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  const urnNova = action.atual.norma;\n  const urnAnterior = dispositivo?.alteracoes!.base || '';\n  const regex = new RegExp(`<a.+href=.${urnAnterior}.*?>.*?</a>`, 'ig');\n  const normaExtenso = getNomeExtensoComDataExtenso(urnNova);\n\n  if (dispositivo === undefined || !dispositivo.alteracoes || (urnAnterior === urnNova && dispositivo.texto.match(regex))) {\n    state.ui = [];\n    return state;\n  }\n\n  const normaLink = buildHtmlLink(urnNova);\n  const textoDispositivo = dispositivo.texto;\n\n  if (dispositivo.texto.match(regex)) {\n    dispositivo.texto = textoDispositivo.replace(regex, normaLink);\n  } else if (dispositivo.texto.includes(normaExtenso)) {\n    dispositivo.texto = textoDispositivo.replace(normaExtenso, normaLink);\n  } else {\n    const index = parseInt(localStorage.indexCursor);\n    dispositivo.texto = [textoDispositivo.slice(0, index), normaLink, textoDispositivo.slice(index)].join(' ');\n    localStorage.removeItem('indexCursor');\n  }\n\n  const original = createElemento(dispositivo);\n\n  dispositivo.alteracoes!.base = urnNova;\n\n  if (dispositivo.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n    dispositivo.situacao = new DispositivoModificado(original);\n  }\n\n  const eventosUi = new Eventos();\n\n  const elemento = createElemento(dispositivo, true);\n  elemento.mensagens = validaDispositivo(dispositivo);\n\n  eventosUi.add(StateType.ElementoValidado, [elemento]);\n  eventosUi.add(StateType.ElementoModificado, [elemento]);\n  eventosUi.add(StateType.SituacaoElementoModificada, [elemento]);\n\n  const eventos = buildEventoAtualizacaoElemento(dispositivo);\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, buildUpdateEvent(dispositivo, original)),\n    present: eventos.build(),\n    future: state.future,\n    ui: {\n      events: eventosUi.build(),\n    },\n  };\n};\n","import { isCaput, isIncisoCaput } from '../../../model/dispositivo/tipo';\nimport { createElemento, getDispositivoFromElemento, getElementos, listaDispositivosRenumerados } from '../../../model/elemento/elementoUtil';\nimport { isAcaoTransformacaoPermitida, normalizaNomeAcaoTransformacao } from '../../../model/lexml/acao/acaoUtil';\nimport { converteDispositivo } from '../../../model/lexml/dispositivo/dispositivoLexmlUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { getDispositivoAnterior } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { State } from '../../state';\nimport { buildEventoTransformacaooElemento } from '../evento/eventosUtil';\nimport { getElementosDoDispositivo } from '../util/reducerUtil';\nimport { buildPast } from '../util/stateReducerUtil';\n\nexport const transformaTipoElemento = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    state.ui = [];\n    return state;\n  }\n\n  if (!isAcaoTransformacaoPermitida(atual, action)) {\n    return state;\n  }\n\n  action.subType = normalizaNomeAcaoTransformacao(atual, action.subType);\n\n  const removidos = [...getElementos(atual)];\n\n  const atualRenumerados = listaDispositivosRenumerados(atual);\n\n  const novo = converteDispositivo(atual, action);\n\n  const novoRenumerados = listaDispositivosRenumerados(novo);\n\n  const renumerados = novoRenumerados.concat(atualRenumerados);\n\n  const validados = getElementosDoDispositivo(novo, true);\n\n  const paiNovo = isIncisoCaput(novo) ? novo.pai!.pai! : novo.pai!;\n\n  const dispositivoAnterior = getDispositivoAnterior(novo);\n\n  if (dispositivoAnterior) {\n    const mensagens = validaDispositivo(dispositivoAnterior);\n    if (dispositivoAnterior.mensagens !== mensagens) {\n      validados.unshift(createElemento(dispositivoAnterior));\n    }\n  }\n\n  const parent = validados.filter(v => v.uuid === paiNovo.uuid).length > 0 ? atual.pai : paiNovo;\n\n  parent!.mensagens = validaDispositivo(parent!);\n\n  validados.unshift(createElemento(parent!));\n\n  const referencia = dispositivoAnterior ?? novo.pai!;\n  const eventos = buildEventoTransformacaooElemento(\n    isCaput(referencia) ? referencia.pai! : referencia,\n    novo,\n    removidos,\n    renumerados.map(d => {\n      d.mensagens = validaDispositivo(d);\n      const el = createElemento(d);\n      return el;\n    }),\n    validados\n  );\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos.build()),\n    present: eventos.build(),\n    future: [],\n    ui: {\n      events: eventos.build(),\n    },\n  };\n};\n","import { Articulacao, Artigo, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { DescricaoSituacao, TipoSituacao } from '../../../model/dispositivo/situacao';\nimport { isArticulacao, isArtigo } from '../../../model/dispositivo/tipo';\nimport { Elemento } from '../../../model/elemento';\nimport { createElemento, getDispositivoFromElemento, isElementoDispositivoAlteracao } from '../../../model/elemento/elementoUtil';\nimport { createArticulacao, criaDispositivo } from '../../../model/lexml/dispositivo/dispositivoLexmlFactory';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { findDispositivoByUuid, getDispositivoAnterior, getUltimoFilho, isArticulacaoAlteracao } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../../../model/lexml/situacao/dispositivoAdicionado';\nimport { DispositivoModificado } from '../../../model/lexml/situacao/dispositivoModificado';\nimport { DispositivoNovo } from '../../../model/lexml/situacao/dispositivoNovo';\nimport { DispositivoOriginal } from '../../../model/lexml/situacao/dispositivoOriginal';\nimport { TipoDispositivo } from '../../../model/lexml/tipo/tipoDispositivo';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State, StateEvent, StateType } from '../../state';\nimport { getEvento } from '../evento/eventosUtil';\nimport { retornaEstadoAtualComMensagem } from './stateReducerUtil';\n\nconst getTipoSituacaoByDescricao = (descricao: string): TipoSituacao => {\n  switch (descricao) {\n    case DescricaoSituacao.DISPOSITIVO_ADICIONADO:\n      return new DispositivoAdicionado();\n    case DescricaoSituacao.DISPOSITIVO_NOVO:\n      return new DispositivoNovo();\n    default:\n      return new DispositivoOriginal();\n  }\n};\n\nconst getDispositivoPaiFromElemento = (articulacao: Articulacao, elemento: Partial<Elemento>): Dispositivo | null => {\n  if (isElementoDispositivoAlteracao(elemento)) {\n    const artigo = isArticulacaoAlteracao(articulacao) ? articulacao.pai! : findDispositivoByUuid(articulacao, elemento.hierarquia!.pai!.uuidAlteracao!);\n\n    if (artigo) {\n      if (!artigo.alteracoes) {\n        artigo!.alteracoes = createArticulacao();\n        artigo.alteracoes.pai = artigo;\n      }\n      if (elemento.hierarquia!.pai!.tipo! === TipoDispositivo.articulacao.tipo) {\n        return artigo.alteracoes;\n      }\n      return findDispositivoByUuid(artigo.alteracoes, elemento.hierarquia!.pai!.uuid!);\n    }\n  }\n  return findDispositivoByUuid(articulacao, elemento.hierarquia!.pai!.uuid!);\n};\n\nconst isOmissisCaput = (elemento: Elemento): boolean => {\n  const partesLexmlId = elemento.lexmlId?.split('_') ?? [];\n  return elemento.tipo === TipoDispositivo.omissis.tipo && partesLexmlId.length > 1 && partesLexmlId[partesLexmlId.length - 2] === 'cpt';\n};\n\nconst redodDispositivoExcluido = (elemento: Elemento, pai: Dispositivo): Dispositivo => {\n  const novo = criaDispositivo(\n    isArtigo(pai) && (elemento.tipo === TipoDispositivo.inciso.name || isOmissisCaput(elemento)) ? (pai as Artigo).caput! : pai,\n    elemento.tipo!,\n    undefined,\n    elemento.hierarquia!.posicao\n  );\n  novo.uuid = elemento.uuid;\n  novo.id = elemento.lexmlId;\n  novo!.texto = elemento?.conteudo?.texto ?? '';\n  novo!.numero = elemento?.hierarquia?.numero;\n  novo.rotulo = elemento?.rotulo;\n  novo.mensagens = elemento?.mensagens;\n  novo.situacao = getTipoSituacaoByDescricao(elemento!.descricaoSituacao!);\n  return novo;\n};\n\nconst redoDispositivosExcluidos = (articulacao: any, elementos: Elemento[]): Dispositivo[] => {\n  const primeiroElemento = elementos.shift();\n\n  const pai = getDispositivoPaiFromElemento(articulacao, primeiroElemento!);\n  const primeiro = redodDispositivoExcluido(primeiroElemento!, pai!);\n\n  const novos: Dispositivo[] = [primeiro];\n  elementos?.forEach(filho => {\n    const parent = filho.hierarquia?.pai === primeiroElemento?.hierarquia?.pai ? primeiro.pai! : getDispositivoPaiFromElemento(articulacao, filho);\n    const novo = redodDispositivoExcluido(filho, parent!);\n    novos.push(novo);\n  });\n\n  return novos;\n};\n\nexport const incluir = (state: State, evento: StateEvent, novosEvento: StateEvent): Elemento[] => {\n  if (evento !== undefined && evento.elementos !== undefined && evento.elementos[0] !== undefined) {\n    const elemento = evento.elementos[0];\n\n    const pai = getDispositivoPaiFromElemento(state.articulacao!, elemento!);\n\n    const novos = redoDispositivosExcluidos(state.articulacao, evento.elementos);\n    pai?.renumeraFilhos();\n\n    if (novosEvento) {\n      const posicao = elemento!.hierarquia!.posicao;\n\n      const referencia = posicao === 0 ? (isArticulacao(pai!) && isArticulacaoAlteracao(pai as Articulacao) ? pai!.pai! : pai) : getUltimoFilho(getDispositivoAnterior(novos[0])!);\n\n      if (referencia) {\n        const dispositivo = getDispositivoFromElemento(state.articulacao!, referencia);\n        dispositivo ? (novosEvento.referencia = createElemento(dispositivo!)) : retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'Erro inesperado' });\n      }\n    }\n\n    if (evento.stateType === StateType.ElementoIncluido) {\n      novosEvento.referencia = evento.referencia;\n    }\n\n    return novos.map(n => createElemento(n));\n  }\n  return [];\n};\n\nexport const remover = (state: State, evento: StateEvent): Elemento[] => {\n  if (evento !== undefined && evento.elementos !== undefined && evento.elementos[0] !== undefined) {\n    evento.elementos.forEach(el => {\n      const dispositivo = getDispositivoFromElemento(state.articulacao!, el, true);\n      if (dispositivo) {\n        const pai = dispositivo.pai!;\n        pai.removeFilho(dispositivo);\n        pai.renumeraFilhos();\n      }\n    });\n    return evento.elementos;\n  }\n  return [];\n};\n\nexport const restaurarSituacao = (state: State, evento: StateEvent, eventoRestaurados: StateEvent, Situacao: any): Elemento[] => {\n  if (evento !== undefined && evento.elementos !== undefined && evento.elementos[0] !== undefined) {\n    evento.elementos.forEach(el => {\n      const d = getDispositivoFromElemento(state.articulacao!, el, true);\n\n      if (Situacao instanceof DispositivoOriginal) {\n        d!.numero = d!.situacao.dispositivoOriginal?.numero ?? '';\n        d!.rotulo = d!.situacao.dispositivoOriginal?.rotulo ?? '';\n        d!.texto = d!.situacao.dispositivoOriginal?.conteudo?.texto ?? '';\n        d!.situacao = new DispositivoOriginal();\n      } else {\n        d!.situacao = new Situacao(createElemento(d!));\n      }\n      eventoRestaurados.elementos!.push(createElemento(d!));\n    });\n    return eventoRestaurados.elementos!;\n  }\n  return [];\n};\n\nexport const processarModificados = (state: State, evento: StateEvent, isRedo = false): Elemento[] => {\n  if (evento !== undefined && evento.elementos !== undefined && evento.elementos[0] !== undefined) {\n    const novosElementos: Elemento[] = [];\n\n    let anterior = 0;\n    evento.elementos.forEach(e => {\n      const dispositivo = getDispositivoFromElemento(state.articulacao!, e, true);\n      if (dispositivo) {\n        if ((isRedo && anterior === dispositivo.uuid) || anterior !== dispositivo.uuid) {\n          if (dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO) {\n            dispositivo.texto = dispositivo.situacao.dispositivoOriginal!.conteudo?.texto ?? '';\n            dispositivo.situacao = new DispositivoOriginal();\n          } else {\n            if (e.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO) {\n              dispositivo.situacao = new DispositivoModificado(createElemento(dispositivo));\n            }\n            dispositivo.texto = e.conteudo?.texto ?? '';\n          }\n          if (dispositivo.alteracoes) {\n            dispositivo.alteracoes.base = e.norma;\n          }\n          dispositivo.mensagens = validaDispositivo(dispositivo);\n          novosElementos.push(createElemento(dispositivo));\n          anterior = dispositivo.uuid!;\n        }\n      }\n    });\n\n    return novosElementos;\n  }\n  return [];\n};\n\nexport const processaRenumerados = (state: State, evento: StateEvent): Elemento[] => {\n  if (evento !== undefined && evento.elementos !== undefined && evento.elementos[0] !== undefined) {\n    const novosElementos: Elemento[] = [];\n\n    evento.elementos.forEach(e => {\n      const dispositivo = getDispositivoFromElemento(state.articulacao!, e, true);\n      if (dispositivo) {\n        novosElementos.push(createElemento(dispositivo!));\n      }\n    });\n\n    return novosElementos;\n  }\n  return [];\n};\n\nexport const processaValidados = (state: State, eventos: StateEvent[]): Elemento[] => {\n  const evento = getEvento(eventos, StateType.ElementoValidado);\n  if (evento !== undefined && evento.elementos !== undefined && evento.elementos[0] !== undefined) {\n    const validados: Elemento[] = [];\n\n    evento.elementos.forEach(e => {\n      const dispositivo = getDispositivoFromElemento(state.articulacao!, e, true);\n      if (dispositivo) {\n        dispositivo.mensagens = validaDispositivo(dispositivo);\n        if (dispositivo.mensagens.length > 0) {\n          validados.push(createElemento(dispositivo));\n        }\n      }\n    });\n    return validados;\n  }\n  return [];\n};\n","import { isAgrupador } from '../../../model/dispositivo/tipo';\nimport { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { isAcaoPermitida } from '../../../model/lexml/acao/acaoUtil';\nimport { RemoverElemento } from '../../../model/lexml/acao/removerElementoAction';\nimport { hasFilhos, isArtigoUnico, isDispositivoAlteracao } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State } from '../../state';\nimport { removeAgrupadorAndBuildEvents, removeAndBuildEvents } from '../evento/eventosUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\n\nexport const removeElemento = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined) {\n    state.ui = [];\n    return state;\n  }\n\n  if (!isAcaoPermitida(dispositivo, RemoverElemento)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'No  possvel excluir um dispositivo original mas apenas suprimi-lo.' });\n  }\n\n  if (\n    !isDispositivoAlteracao(dispositivo) &&\n    (isArtigoUnico(dispositivo) || (state.articulacao.filhos.length === 1 && state.articulacao.filhos[0] === dispositivo && !hasFilhos(dispositivo)))\n  ) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'No  possvel excluir o nico dispositivo disponvel.' });\n  }\n\n  const events = isAgrupador(dispositivo) ? removeAgrupadorAndBuildEvents(state.articulacao, dispositivo) : removeAndBuildEvents(state.articulacao, dispositivo);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, events),\n    present: events,\n    future: [],\n    ui: {\n      events,\n    },\n  };\n};\n","import { DescricaoSituacao, isSituacaoExclusivaDispositivoEmenda } from '../../../model/dispositivo/situacao';\nimport { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { getDispositivoAndFilhosAsLista } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { State } from '../../state';\nimport { restauraAndBuildEvents } from '../evento/eventosUtil';\nimport { buildPast } from '../util/stateReducerUtil';\n\nexport const restauraElemento = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined) {\n    state.ui = [];\n    return state;\n  }\n\n  const possuiFilhosModificados = getDispositivoAndFilhosAsLista(dispositivo).filter(f => isSituacaoExclusivaDispositivoEmenda(f)).length > 0;\n\n  if (\n    !possuiFilhosModificados &&\n    dispositivo.situacao?.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_MODIFICADO &&\n    dispositivo.situacao?.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_SUPRIMIDO\n  ) {\n    return state;\n  }\n\n  const events = restauraAndBuildEvents(state.articulacao, dispositivo);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, events),\n    present: events,\n    future: [],\n    ui: {\n      events,\n    },\n  };\n};\n","import { Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State } from '../../state';\nimport { suprimeAndBuildEvents } from '../evento/eventosUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\n\nconst getSituacoesFilhos = (dispositivos: Dispositivo[], situacoes: Set<string>): void => {\n  if (dispositivos.length === 0) {\n    return;\n  }\n  dispositivos?.forEach(d => {\n    situacoes.add(d.situacao.descricaoSituacao);\n    getSituacoesFilhos(d.filhos, situacoes);\n  });\n};\n\nexport const podeSuprimir = (dispositivo: Dispositivo): boolean => {\n  const situacoes = new Set<string>();\n  situacoes.add(dispositivo.situacao.descricaoSituacao);\n  getSituacoesFilhos(dispositivo.filhos, situacoes);\n\n  if (dispositivo.alteracoes) {\n    getSituacoesFilhos(dispositivo.alteracoes?.filhos, situacoes);\n  }\n  return situacoes.size === 1 && [...situacoes][0] === DescricaoSituacao.DISPOSITIVO_ORIGINAL;\n};\n\nexport const suprimeElemento = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined || dispositivo.situacao?.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n    state.ui = [];\n    return state;\n  }\n\n  if (!podeSuprimir(dispositivo)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'S  possvel suprimir dispositivos que no tenham sofrido modificao.' });\n  }\n\n  const events = suprimeAndBuildEvents(state.articulacao, dispositivo);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, events),\n    present: events,\n    future: [],\n    ui: {\n      events,\n    },\n  };\n};\n","import { combineReducers, createStore } from 'redux';\nimport { appReducer } from './app/appReducer';\nimport { elementoReducer } from './elemento/reducer/elementoReducer';\n\nconst combinedReducer = combineReducers({\n  appReducer: appReducer,\n  elementoReducer: elementoReducer,\n});\n\nexport const rootStore = createStore(combinedReducer, (window as any).__REDUX_DEVTOOLS_EXTENSION__ && (window as any).__REDUX_DEVTOOLS_EXTENSION__());\n","import { ADICIONAR_ELEMENTO } from '../../../model/lexml/acao/adicionarElementoAction';\nimport { AGRUPAR_ELEMENTO } from '../../../model/lexml/acao/agruparElementoAction';\nimport { APLICAR_ALTERACOES_EMENDA } from '../../../model/lexml/acao/aplicarAlteracoesEmenda';\nimport { ATUALIZAR_ELEMENTO } from '../../../model/lexml/acao/atualizarElementoAction';\nimport { ATUALIZAR_REFERENCIA_ELEMENTO } from '../../../model/lexml/acao/atualizarReferenciaElementoAction';\nimport { ATUALIZAR_TEXTO_ELEMENTO } from '../../../model/lexml/acao/atualizarTextoElementoAction';\nimport { ELEMENTO_SELECIONADO } from '../../../model/lexml/acao/elementoSelecionadoAction';\nimport { INFORMAR_NORMA } from '../../../model/lexml/acao/informarNormaAction';\nimport { MOVER_ELEMENTO_ABAIXO } from '../../../model/lexml/acao/moverElementoAbaixoAction';\nimport { MOVER_ELEMENTO_ACIMA } from '../../../model/lexml/acao/moverElementoAcimaAction';\nimport { ABRIR_ARTICULACAO } from '../../../model/lexml/acao/openArticulacaoAction';\nimport { REDO } from '../../../model/lexml/acao/redoAction';\nimport { REMOVER_ELEMENTO } from '../../../model/lexml/acao/removerElementoAction';\nimport { RENUMERAR_ELEMENTO } from '../../../model/lexml/acao/renumerarElementoAction';\nimport { RESTAURAR_ELEMENTO } from '../../../model/lexml/acao/restaurarElemento';\nimport { SHIFT_TAB } from '../../../model/lexml/acao/shiftTabAction';\nimport { SUPRIMIR_ELEMENTO } from '../../../model/lexml/acao/suprimirElemento';\nimport { TAB } from '../../../model/lexml/acao/tabAction';\nimport { TRANSFORMAR_TIPO_ELEMENTO } from '../../../model/lexml/acao/transformarElementoAction';\nimport { UNDO } from '../../../model/lexml/acao/undoAction';\nimport { VALIDAR_ARTICULACAO } from '../../../model/lexml/acao/validarArticulacaoAction';\nimport { VALIDAR_ELEMENTO } from '../../../model/lexml/acao/validarElementoAction';\nimport { abreArticulacao } from './abreArticulacao';\nimport { adicionaElemento } from './adicionaElemento';\nimport { agrupaElemento } from './agrupaElemento';\nimport { aplicaAlteracoesEmenda } from './aplicaAlteracoesEmenda';\nimport { atualizaElemento } from './atualizaElemento';\nimport { atualizaReferenciaElemento } from './atualizaReferenciaElemento';\nimport { atualizaTextoElemento } from './atualizaTextoElemento';\nimport { modificaTipoElementoWithTab } from './modificaTipoElementoWithTab';\nimport { moveElementoAbaixo } from './moveElementoAbaixo';\nimport { moveElementoAcima } from './moveElementoAcima';\nimport { redo } from './redo';\nimport { removeElemento } from './removeElemento';\nimport { renumeraElemento } from './renumeraElemento';\nimport { restauraElemento } from './restauraElemento';\nimport { selecionaElemento } from './selecionaElemento';\nimport { solicitaNorma } from './solicitaNorma';\nimport { suprimeElemento } from './suprimeElemento';\nimport { transformaTipoElemento } from './transformaTipoElemento';\nimport { undo } from './undo';\nimport { validaArticulacao } from './validaArticulacao';\nimport { validaElemento } from './validaElemento';\n\nexport const elementoReducer = (state = {}, action: any): any => {\n  switch (action.type) {\n    case APLICAR_ALTERACOES_EMENDA:\n      return aplicaAlteracoesEmenda(state, action);\n    case ATUALIZAR_ELEMENTO:\n      return atualizaElemento(state, action);\n    case ATUALIZAR_REFERENCIA_ELEMENTO:\n      return atualizaReferenciaElemento(state, action);\n    case ATUALIZAR_TEXTO_ELEMENTO:\n      return atualizaTextoElemento(state, action);\n    case ADICIONAR_ELEMENTO:\n      return adicionaElemento(state, action);\n    case AGRUPAR_ELEMENTO:\n      return agrupaElemento(state, action);\n    case TRANSFORMAR_TIPO_ELEMENTO:\n      return transformaTipoElemento(state, action);\n    case ELEMENTO_SELECIONADO:\n      return selecionaElemento(state, action);\n    case INFORMAR_NORMA:\n      return solicitaNorma(state, action);\n    case MOVER_ELEMENTO_ABAIXO:\n      return moveElementoAbaixo(state, action);\n    case MOVER_ELEMENTO_ACIMA:\n      return moveElementoAcima(state, action);\n    case RENUMERAR_ELEMENTO:\n      return renumeraElemento(state, action);\n    case RESTAURAR_ELEMENTO:\n      return restauraElemento(state, action);\n    case SUPRIMIR_ELEMENTO:\n      return suprimeElemento(state, action);\n    case ABRIR_ARTICULACAO:\n      return abreArticulacao(state, action);\n    case REDO:\n      return redo(state);\n    case REMOVER_ELEMENTO:\n      return removeElemento(state, action);\n    case SHIFT_TAB:\n    case TAB:\n      return modificaTipoElementoWithTab(state, action);\n    case UNDO:\n      return undo(state);\n    case VALIDAR_ELEMENTO:\n      return validaElemento(state, action);\n    case VALIDAR_ARTICULACAO:\n      return validaArticulacao(state);\n    default:\n      return state;\n  }\n};\n","import { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { normalizaSeForOmissis } from '../../../model/lexml/conteudo/conteudoUtil';\nimport { isDispositivoAlteracao } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoModificado } from '../../../model/lexml/situacao/dispositivoModificado';\nimport { State } from '../../state';\nimport { buildEventoAtualizacaoElemento, buildUpdateEvent } from '../evento/eventosUtil';\nimport { buildPast } from '../util/stateReducerUtil';\n\nexport const atualizaElemento = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined || dispositivo.texto === action.atual.conteudo.texto) {\n    state.ui = [];\n    return state;\n  }\n\n  const original = createElemento(dispositivo);\n\n  dispositivo.texto = !isDispositivoAlteracao(dispositivo) ? action.atual.conteudo?.texto : normalizaSeForOmissis(action.atual.conteudo?.texto ?? '');\n\n  if (dispositivo.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n    dispositivo.situacao = new DispositivoModificado(original);\n  }\n\n  const eventos = buildEventoAtualizacaoElemento(dispositivo);\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, buildUpdateEvent(dispositivo, original)),\n    present: eventos.build(),\n    future: state.future,\n    ui: {\n      events: eventos.build(),\n    },\n  };\n};\n","import { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { createElemento, criaListaElementosAfinsValidados, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { normalizaSeForOmissis } from '../../../model/lexml/conteudo/conteudoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { isDispositivoAlteracao } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoModificado } from '../../../model/lexml/situacao/dispositivoModificado';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { buildEventoAtualizacaoElemento, buildUpdateEvent } from '../evento/eventosUtil';\nimport { buildPast } from '../util/stateReducerUtil';\n\nconst houveAlteracaoNoTextoAposAcao = (texto: string, action: any): boolean => {\n  return action.atual?.conteudo?.texto !== texto;\n};\n\nexport const atualizaTextoElemento = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined || dispositivo.texto === action.atual.conteudo.texto) {\n    state.ui = [];\n    return state;\n  }\n\n  const original = createElemento(dispositivo);\n\n  dispositivo.texto = !isDispositivoAlteracao(dispositivo) ? action.atual.conteudo?.texto : normalizaSeForOmissis(action.atual.conteudo?.texto ?? '');\n\n  if (dispositivo.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n    dispositivo.situacao = new DispositivoModificado(original);\n  }\n\n  const eventosUi = new Eventos();\n\n  const elemento = createElemento(dispositivo, true);\n  elemento.mensagens = validaDispositivo(dispositivo);\n\n  if (houveAlteracaoNoTextoAposAcao(dispositivo.texto, action)) {\n    eventosUi.add(StateType.ElementoModificado, [elemento]);\n  }\n  eventosUi.add(StateType.SituacaoElementoModificada, [elemento]);\n  eventosUi.add(StateType.ElementoValidado, criaListaElementosAfinsValidados(dispositivo));\n\n  const eventos = buildEventoAtualizacaoElemento(dispositivo);\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, buildUpdateEvent(dispositivo, original)),\n    present: eventos.build(),\n    future: [],\n    ui: {\n      events: eventosUi.build(),\n    },\n  };\n};\n","import { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { State, StateType } from '../../state';\n\nexport const selecionaElemento = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n  atual.mensagens = validaDispositivo(atual);\n  const elemento = createElemento(atual, true);\n\n  const events = [\n    {\n      stateType: StateType.ElementoSelecionado,\n      elementos: [elemento],\n    },\n  ];\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events,\n    },\n  };\n};\n","import { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { State, StateType } from '../../state';\n\nexport const solicitaNorma = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n  atual.mensagens = validaDispositivo(atual);\n  const elemento = createElemento(atual, true);\n\n  const events = [\n    {\n      stateType: StateType.InformarNorma,\n      elementos: [elemento],\n    },\n  ];\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: [],\n    ui: {\n      events,\n    },\n  };\n};\n","import { isIncisoCaput } from '../../../model/dispositivo/tipo';\nimport { createElemento, getDispositivoFromElemento, getElementos, listaDispositivosRenumerados } from '../../../model/elemento/elementoUtil';\nimport { isAcaoPermitida } from '../../../model/lexml/acao/acaoUtil';\nimport { MoverElementoAbaixo } from '../../../model/lexml/acao/moverElementoAbaixoAction';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport {\n  buildListaDispositivos,\n  getDispositivoAnterior,\n  getDispositivoPosteriorMesmoTipoInclusiveOmissis,\n  isDispositivoAlteracao,\n} from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { ajustaReferencia, resetUuidTodaArvore } from '../util/reducerUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\n\nexport const moveElementoAbaixo = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    state.ui = [];\n    return state;\n  }\n\n  if (!isAcaoPermitida(atual, MoverElementoAbaixo)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'No  possvel excluir um dispositivo original mas apenas suprimi-lo.' });\n  }\n\n  const proximo = getDispositivoPosteriorMesmoTipoInclusiveOmissis(atual);\n\n  if (proximo === undefined) {\n    return state;\n  }\n\n  const removidos = [...getElementos(atual), ...getElementos(proximo)];\n  const renumerados = listaDispositivosRenumerados(atual);\n\n  const pai = atual.pai!;\n  const pos = pai.indexOf(atual);\n\n  resetUuidTodaArvore(atual);\n  resetUuidTodaArvore(proximo);\n\n  pai.removeFilho(atual);\n  pai.removeFilho(proximo);\n\n  pai.addFilhoOnPosition(proximo, pos);\n  pai.addFilhoOnPosition(atual, pos + 1);\n\n  atual.pai = pai;\n  proximo.pai = pai;\n\n  pai.renumeraFilhos();\n\n  const referencia = pos === 0 ? (isIncisoCaput(proximo) || (isDispositivoAlteracao(atual) && atual.tipo === 'Artigo') ? pai.pai! : pai) : getDispositivoAnterior(proximo);\n\n  const eventos = new Eventos();\n  eventos.setReferencia(createElemento(ajustaReferencia(referencia!, proximo)));\n  eventos.add(\n    StateType.ElementoIncluido,\n    buildListaDispositivos(proximo, [])\n      .concat(buildListaDispositivos(atual, []))\n      .map(v => {\n        v.mensagens = validaDispositivo(v);\n        return createElemento(v);\n      })\n  );\n  eventos.add(StateType.ElementoRemovido, removidos);\n  eventos.add(\n    StateType.ElementoRenumerado,\n    renumerados.map(r => createElemento(r))\n  );\n\n  // Elementos em StateType.ElementoMarcado:\n  // Primeiro elemento ser usado para marcar o elemento no editor\n  // Segundo elemento ser usado para marcar o elemento em caso de \"undo\"\n  eventos.add(StateType.ElementoMarcado, [createElemento(atual), action.atual]);\n  eventos.add(StateType.ElementoSelecionado, [createElemento(atual)]);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos.build()),\n    present: eventos.build(),\n    future: [],\n    ui: {\n      events: eventos.build(),\n    },\n  };\n};\n","import { createElemento, getDispositivoFromElemento, getElementos, listaDispositivosRenumerados } from '../../../model/elemento/elementoUtil';\nimport { isAcaoPermitida } from '../../../model/lexml/acao/acaoUtil';\nimport { MoverElementoAcima } from '../../../model/lexml/acao/moverElementoAcimaAction';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport {\n  buildListaDispositivos,\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipoInclusiveOmissis,\n  isDispositivoAlteracao,\n} from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { TipoDispositivo } from '../../../model/lexml/tipo/tipoDispositivo';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { ajustaReferencia, resetUuidTodaArvore } from '../util/reducerUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\n\nexport const moveElementoAcima = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    state.ui = [];\n    return state;\n  }\n\n  if (!isAcaoPermitida(atual, MoverElementoAcima)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'No  possvel excluir um dispositivo original mas apenas suprimi-lo.' });\n  }\n\n  const anterior = getDispositivoAnteriorMesmoTipoInclusiveOmissis(atual);\n\n  if (anterior === undefined) {\n    return state;\n  }\n\n  const removidos = [...getElementos(anterior), ...getElementos(atual)];\n  const renumerados = listaDispositivosRenumerados(atual);\n\n  const pai = atual.pai!;\n  const pos = pai.indexOf(anterior);\n\n  resetUuidTodaArvore(anterior);\n  resetUuidTodaArvore(atual);\n\n  pai.removeFilho(anterior);\n  pai.removeFilho(atual);\n\n  pai.addFilhoOnPosition(atual, pos);\n  pai.addFilhoOnPosition(anterior, pos + 1);\n\n  atual.pai = pai;\n  anterior.pai = pai;\n\n  pai.renumeraFilhos();\n\n  const referencia =\n    pos === 0 ? (atual.pai?.tipo === TipoDispositivo.caput.tipo || (isDispositivoAlteracao(atual) && atual.tipo === 'Artigo') ? pai.pai! : pai) : getDispositivoAnterior(atual);\n\n  const eventos = new Eventos();\n  eventos.setReferencia(createElemento(ajustaReferencia(referencia!, atual)));\n  eventos.add(\n    StateType.ElementoIncluido,\n    buildListaDispositivos(atual, [])\n      .concat(buildListaDispositivos(anterior, []))\n      .map(v => {\n        v.mensagens = validaDispositivo(v);\n        return createElemento(v);\n      })\n  );\n  eventos.add(StateType.ElementoRemovido, removidos);\n  eventos.add(\n    StateType.ElementoRenumerado,\n    renumerados.map(r => createElemento(r))\n  );\n\n  // Elementos em StateType.ElementoMarcado:\n  // Primeiro elemento ser usado para marcar o elemento no editor\n  // Segundo elemento ser usado para marcar o elemento em caso de \"undo\"\n  eventos.add(StateType.ElementoMarcado, [createElemento(atual), action.atual]);\n  eventos.add(StateType.ElementoSelecionado, [createElemento(atual)]);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos.build()),\n    present: eventos.build(),\n    future: [],\n    ui: {\n      events: eventos.build(),\n    },\n  };\n};\n","import { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { isAcaoPermitida } from '../../../model/lexml/acao/acaoUtil';\nimport { RenumerarElemento } from '../../../model/lexml/acao/renumerarElementoAction';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State } from '../../state';\nimport { buildEventoAtualizacaoElemento, buildUpdateEvent } from '../evento/eventosUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\n\nexport const renumeraElemento = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined) {\n    state.ui = [];\n    return state;\n  }\n\n  if (!isAcaoPermitida(dispositivo, RenumerarElemento)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.INFO, descricao: 'Nessa situao, no  possvel renumerar o dispositivo' });\n  }\n\n  const past = buildPast(state, buildUpdateEvent(dispositivo));\n\n  try {\n    dispositivo.createNumeroFromRotulo(action.novo?.numero);\n  } catch (error) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'O rtulo informado  invlido', detalhe: error });\n  }\n\n  dispositivo.createRotulo(dispositivo);\n\n  const eventos = buildEventoAtualizacaoElemento(dispositivo);\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past,\n    present: eventos.build(),\n    future: state.future,\n    ui: {\n      events: eventos.build(),\n    },\n  };\n};\n","export const ABRIR_ARTICULACAO = 'ABRIR_ARTICULACAO';\n\nexport const openArticulacaoAction = (articulacao: any, classificacao?: string): any => {\n  return {\n    type: ABRIR_ARTICULACAO,\n    classificacao,\n    articulacao,\n  };\n};\n","export const REDO = 'REDO';\n\nexport const redoAction = (): any => {\n  return {\n    type: REDO,\n  };\n};\n","import { DispositivoSuprimido } from '../../../model/lexml/situacao/dispositivoSuprimido';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { getEvento } from '../evento/eventosUtil';\nimport { buildPast } from '../util/stateReducerUtil';\nimport { incluir, processaRenumerados, processarModificados, processaValidados, remover, restaurarSituacao } from '../util/undoRedoReducerUtil';\n\nexport const redo = (state: any): State => {\n  if (state.future === undefined || state.future.length === 0) {\n    state.ui = [];\n    return state;\n  }\n\n  const eventos = state.future.pop();\n\n  const retorno: State = {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos),\n    present: [],\n    future: state.future,\n    ui: {\n      events: [],\n    },\n  };\n\n  const events = new Eventos();\n\n  events.add(StateType.ElementoRemovido, remover(state, getEvento(eventos, StateType.ElementoRemovido)));\n  events.add(StateType.ElementoIncluido, incluir(state, getEvento(eventos, StateType.ElementoIncluido), getEvento(events.eventos, StateType.ElementoIncluido)));\n  events.add(StateType.ElementoModificado, processarModificados(state, getEvento(eventos, StateType.ElementoModificado), true));\n  events.add(\n    StateType.ElementoSuprimido,\n    restaurarSituacao(state, getEvento(eventos, StateType.ElementoSuprimido), getEvento(events.eventos, StateType.ElementoSuprimido), DispositivoSuprimido)\n  );\n  events.add(StateType.ElementoRenumerado, processaRenumerados(state, getEvento(eventos, StateType.ElementoRenumerado)));\n  events.add(StateType.ElementoValidado, processaValidados(state, eventos));\n\n  const elementosParaMarcar = getEvento(eventos, StateType.ElementoMarcado)?.elementos;\n  if (elementosParaMarcar) {\n    events.add(StateType.ElementoMarcado, elementosParaMarcar);\n    events.add(StateType.ElementoSelecionado, [elementosParaMarcar[0]]);\n  }\n\n  retorno.ui!.events = events.build();\n  retorno.present = events.build();\n\n  return retorno;\n};\n","import { Referencia } from '../../elemento';\nexport const SHIFT_TAB = 'SHIFT_TAB';\n\nexport const shiftTabAction = (atual: Referencia): any => {\n  return {\n    type: SHIFT_TAB,\n    atual,\n  };\n};\n","import { Referencia } from '../../elemento';\nexport const TAB = 'TAB';\n\nexport const tabAction = (atual: Referencia): any => {\n  return {\n    type: TAB,\n    atual,\n  };\n};\n","import { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { TAB } from '../../../model/lexml/acao/tabAction';\nimport { TransformarElemento, TRANSFORMAR_TIPO_ELEMENTO } from '../../../model/lexml/acao/transformarElementoAction';\nimport { State } from '../../state';\nimport { transformaTipoElemento } from './transformaTipoElemento';\n\nexport const modificaTipoElementoWithTab = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    state.ui = [];\n    return state;\n  }\n  const acao = action.type === TAB ? atual.getAcaoPossivelTab(atual) : atual.getAcaoPossivelShiftTab(atual);\n\n  if (!acao) {\n    state.ui = [];\n    return state;\n  }\n\n  const newAction = {\n    type: TRANSFORMAR_TIPO_ELEMENTO,\n    subType: (acao as TransformarElemento).nomeAcao,\n    atual: action.atual,\n    novo: {\n      tipo: acao.tipo,\n    },\n  };\n\n  return transformaTipoElemento(state, newAction);\n};\n","export const UNDO = 'UNDO';\n\nexport const UndoAction = (): any => {\n  return {\n    type: UNDO,\n  };\n};\n","import { DispositivoOriginal } from '../../../model/lexml/situacao/dispositivoOriginal';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { getEvento } from '../evento/eventosUtil';\nimport { buildFuture } from '../util/stateReducerUtil';\nimport { incluir, processaRenumerados, processarModificados, processaValidados, remover, restaurarSituacao } from '../util/undoRedoReducerUtil';\n\nexport const undo = (state: any): State => {\n  if (state.past === undefined || state.past.length === 0) {\n    state.ui = [];\n    return state;\n  }\n\n  const eventos = state.past.pop();\n\n  const retorno: State = {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: [],\n    future: buildFuture(state, eventos),\n    ui: {\n      events: [],\n    },\n  };\n\n  const events = new Eventos();\n\n  events.add(StateType.ElementoRemovido, remover(state, getEvento(eventos, StateType.ElementoIncluido)));\n  events.add(StateType.ElementoIncluido, incluir(state, getEvento(eventos, StateType.ElementoRemovido), getEvento(events.eventos, StateType.ElementoIncluido)));\n  events.add(\n    StateType.ElementoRestaurado,\n    restaurarSituacao(state, getEvento(eventos, StateType.ElementoSuprimido), getEvento(events.eventos, StateType.ElementoRestaurado), DispositivoOriginal)\n  );\n  events.add(StateType.ElementoModificado, processarModificados(state, getEvento(eventos, StateType.ElementoModificado)));\n  events.add(StateType.ElementoRenumerado, processaRenumerados(state, getEvento(eventos, StateType.ElementoRenumerado)));\n  events.add(StateType.ElementoValidado, processaValidados(state, eventos));\n\n  const elementosParaMarcar = getEvento(eventos, StateType.ElementoMarcado)?.elementos;\n  if (elementosParaMarcar) {\n    events.add(StateType.ElementoMarcado, [elementosParaMarcar[1], elementosParaMarcar[0]]);\n    events.add(StateType.ElementoSelecionado, [elementosParaMarcar[1]]);\n  }\n\n  retorno.ui!.events = events.build();\n  retorno.present = events.build();\n\n  return retorno;\n};\n","import { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { State, StateType } from '../../state';\n\nexport const validaElemento = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    state.ui = [];\n    return state;\n  }\n\n  atual.mensagens = validaDispositivo(atual);\n  const elemento = createElemento(atual, true);\n\n  const events = [\n    {\n      stateType: StateType.ElementoValidado,\n      elementos: [elemento],\n    },\n  ];\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events,\n    },\n  };\n};\n","import { Elemento } from '../../../model/elemento';\nimport { createElemento } from '../../../model/elemento/elementoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { buildListaDispositivos } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { State, StateType } from '../../state';\n\nexport const validaArticulacao = (state: any): State => {\n  const elementos: Elemento[] = [];\n  buildListaDispositivos(state.articulacao, []).forEach(d => {\n    const mensagens = validaDispositivo(d);\n\n    if (mensagens?.length > 0) {\n      d.mensagens = mensagens;\n      elementos.push(createElemento(d));\n    }\n  });\n\n  const events = [\n    {\n      stateType: StateType.ElementoValidado,\n      elementos: elementos,\n    },\n  ];\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events,\n    },\n  };\n};\n","import { customElement, html, LitElement, property, TemplateResult } from 'lit-element';\nimport { connect } from 'pwa-helpers';\n\nimport { Elemento } from '../model/elemento';\nimport { rootStore } from '../redux/store';\n\n@customElement('lexml-eta-articulacao')\nexport class ArticulacaoComponent extends connect(rootStore)(LitElement) {\n  @property({ type: Array }) elementos: Elemento[] = [];\n\n  constructor() {\n    super();\n    this.tabIndex = -1;\n  }\n\n  createRenderRoot(): LitElement {\n    return this;\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        lexml-eta-editor {\n          display: block;\n          height: 100%;\n        }\n\n        lexml-eta-editor:focus {\n          outline: 0;\n          border: 0px solid #f1f1f1;\n          -webkit-box-shadow: 0px;\n          box-shadow: none;\n        }\n      </style>\n      <lexml-eta-editor></lexml-eta-editor>\n    `;\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nimport { isPrimitive } from '../lib/parts.js';\nimport { directive, NodePart } from '../lit-html.js';\n// For each part, remember the value that was last rendered to the part by the\n// unsafeHTML directive, and the DocumentFragment that was last set as a value.\n// The DocumentFragment is used as a unique key to check if the last value\n// rendered to the part was with unsafeHTML. If not, we'll always re-render the\n// value passed to unsafeHTML.\nconst previousValues = new WeakMap();\n/**\n * Renders the result as HTML, rather than text.\n *\n * Note, this is unsafe to use with any user-provided input that hasn't been\n * sanitized or escaped, as it may lead to cross-site-scripting\n * vulnerabilities.\n */\nexport const unsafeHTML = directive((value) => (part) => {\n    if (!(part instanceof NodePart)) {\n        throw new Error('unsafeHTML can only be used in text bindings');\n    }\n    const previousValue = previousValues.get(part);\n    if (previousValue !== undefined && isPrimitive(value) &&\n        value === previousValue.value && part.value === previousValue.fragment) {\n        return;\n    }\n    const template = document.createElement('template');\n    template.innerHTML = value; // innerHTML casts to string internally\n    const fragment = document.importNode(template.content, true);\n    part.setValue(fragment);\n    previousValues.set(part, { value, fragment });\n});\n//# sourceMappingURL=unsafe-html.js.map","import { customElement, LitElement, property, PropertyValues } from 'lit-element';\nimport { html, TemplateResult } from 'lit-html';\nimport { unsafeHTML } from 'lit-html/directives/unsafe-html';\n\n@customElement('lexml-emenda-comando')\nexport class ComandoEmendaComponent extends LitElement {\n  @property({ type: Object }) emenda;\n\n  update(changedProperties: PropertyValues): void {\n    super.update(changedProperties);\n  }\n\n  buildTemplateComando(comandos: any[]): TemplateResult {\n    const res = comandos?.reduce((acumulador, comando) => acumulador + `<p> ${comando.cabecalho} </p>`, '');\n    return html`${res}`;\n  }\n\n  buildTemplateCitacao(citacao: any): string {\n    // eslint-disable-next-line prettier/prettier\n    const corpo = citacao\n      .replaceAll('<Rotulo>', '<b>')\n      .replaceAll('</Rotulo>', '</b> ')\n      .replaceAll('<Omissis/>', ' ..........................................................');\n\n    return corpo;\n  }\n\n  render(): TemplateResult {\n    const comandos = this.emenda?.comandos;\n    return html`\n      <style>\n        .lexml-emenda-comando {\n          display: block;\n          border: 1px solid #ccc;\n          height: 100%;\n          padding: 0 10px;\n          margin: 0px 5px;\n          font-size: 14px;\n        }\n\n        .lexml-emenda-comando:focus {\n          outline: 0;\n          border: 0px solid #f1f1f1;\n          -webkit-box-shadow: 0px;\n          box-shadow: none;\n        }\n\n        .lexml-emenda-tituloComando {\n          margin: 3px 10px;\n          text-align: center;\n          font-weight: bold;\n        }\n\n        .lexml-emenda-cabecalhoComando {\n          display: block;\n          margin-top: 1em;\n          text-align: justify;\n          text-indent: 3em;\n        }\n\n        .lexml-emenda-citacaoComando {\n          display: block;\n          margin-top: 1em;\n        }\n\n        .lexml-emenda-citacaoComando p {\n          text-align: justify;\n          text-indent: 3em;\n          margin: 0;\n        }\n      </style>\n\n      <div class=\"lexml-emenda-comando\">\n        <p class=\"lexml-emenda-tituloComando\">Comando de emenda</p>\n        <p>${(this.emenda as any)?.comandoEmenda?.cabecalhoComum}</p>\n\n        ${comandos?.map(comando => {\n          return html`\n            ${unsafeHTML(\n              '<div class=\"lexml-emenda-cabecalhoComando\">' +\n                comando.cabecalho +\n                '</div>' +\n                '<div class=\"lexml-emenda-citacaoComando\">' +\n                this.buildTemplateCitacao(comando.citacao) +\n                '</div>'\n            )}\n          `;\n        })}\n      </div>\n    `;\n  }\n}\n","import { Conteudo } from '../dispositivo/conteudo';\nimport { ElementoAction } from '../lexml/acao';\nimport { Mensagem } from '../lexml/util/mensagem';\n\nexport class Referencia {\n  tipo?: string;\n  uuid?: number;\n  lexmlId?: string;\n  conteudo?: Partial<Conteudo>;\n  descricaoSituacao?: string;\n  uuidAlteracao?: number;\n}\nexport class Elemento extends Referencia {\n  nivel = 0;\n  numero?: string;\n  rotulo = '';\n  agrupador = false;\n  editavel = true;\n  mensagens?: Mensagem[];\n  hierarquia?: {\n    pai?: Referencia;\n    posicao?: number;\n    numero?: string;\n  };\n  sendoEditado = false;\n  index = 0;\n  acoesPossiveis?: ElementoAction[];\n  norma?: string;\n}\n","import { Elemento } from '../../elemento';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { TransformarElemento } from './transformarElementoAction';\n\nexport const transformarAction = (elemento: Elemento, novoTipo: string): any => {\n  const action = new TransformarElemento(\n    TipoDispositivo[novoTipo.toLowerCase()],\n    'Transformar ' + elemento.tipo + 'em ' + TipoDispositivo[novoTipo.toLowerCase()].name,\n    'transformar' + elemento.tipo + 'Em' + TipoDispositivo[novoTipo.toLowerCase()].name\n  );\n\n  return action.execute(elemento);\n};\n","import { EtaContainerTable } from './eta-container-table';\n\nconst Block = Quill.import('blots/block');\n\nexport class EtaBlot extends Block {\n  [key: string]: any;\n\n  get linha(): EtaContainerTable {\n    return this.parent.parent.parent;\n  }\n\n  get tamanho(): number {\n    return this.length() - 1;\n  }\n\n  get tagName(): string {\n    return this.domNode.tagName;\n  }\n\n  get html(): string {\n    return this.domNode.innerHTML !== '<br>' ? this.domNode.innerHTML.replace('&nbsp;', '') : '';\n  }\n\n  set html(html: string) {\n    this.domNode.innerHTML = html;\n  }\n\n  constructor(domNode: HTMLElement) {\n    super(domNode);\n  }\n}\n","import { EtaBlot } from './eta-blot';\n\nexport enum AlinhamentoMenu {\n  Esquerda,\n  Direita,\n}\n\nexport class EtaBlotMenu extends EtaBlot {\n  // Site https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_dropdown_right\n  static blotName = 'blotMenu';\n  static tagName = 'DIV';\n  static className = 'lx-eta-dropdown';\n\n  static create(): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotMenu.className);\n    return node;\n  }\n\n  constructor() {\n    super(EtaBlotMenu.create());\n  }\n}\n","import { EtaBlot } from './eta-blot';\n\nexport class EtaBlotMenuBotao extends EtaBlot {\n  static blotName = 'blotMenuBotao';\n  static tagName = 'DIV';\n  static className = 'lx-eta-dropbtn';\n\n  static create(): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotMenuBotao.className);\n    node.innerHTML = '&vellip;';\n    return node;\n  }\n\n  constructor() {\n    super(EtaBlotMenuBotao.create());\n  }\n}\n","import { AlinhamentoMenu } from './eta-blot-menu';\nimport { EtaBlot } from './eta-blot';\n\nexport class EtaBlotMenuConteudo extends EtaBlot {\n  static blotName = 'blotMenuConteudo';\n  static tagName = 'DIV';\n  static className = 'lx-eta-dropdown-content';\n\n  static create(alinhamentoMenu: AlinhamentoMenu): any {\n    const node: HTMLElement = super.create();\n\n    const classeAdicional = alinhamentoMenu === AlinhamentoMenu.Esquerda ? '' : ' lx-eta-dropdown-content-right';\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotMenuConteudo.className + classeAdicional);\n    return node;\n  }\n\n  constructor(alinhamentoMenu: AlinhamentoMenu) {\n    super(EtaBlotMenuConteudo.create(alinhamentoMenu));\n  }\n}\n","import { ElementoAction } from '../../model/lexml/acao';\nimport { EtaBlot } from './eta-blot';\nimport { informarNormaAction } from '../../model/lexml/acao/informarNormaAction';\n\nexport class EtaBlotMenuItem extends EtaBlot {\n  static blotName = 'blotMenuItem';\n  static tagName = 'DIV';\n  static className = 'lx-eta-dropdown-content-item';\n\n  static create(acao: ElementoAction, callback: any): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotMenuItem.className);\n    node.innerHTML = acao.descricao ?? '';\n    \n    node.addEventListener('mousedown', () => {\n      if (acao.descricao == informarNormaAction.descricao) {\n        const index = document.getSelection()?.focusOffset\n        localStorage.setItem(\"indexCursor\", JSON.stringify(index));\n      }\n\n      callback(acao.descricao);\n    });\n    return node;\n  }\n\n  constructor(acao: ElementoAction, callback: any) {\n    super(EtaBlotMenuItem.create(acao, callback));\n  }\n}\n","import { Elemento } from '../../model/elemento';\nimport { EtaBlot } from './eta-blot';\n\nexport class EtaBlotRotulo extends EtaBlot {\n  static blotName = 'rotulo';\n  static tagName = 'LABEL';\n\n  static formatoStyle = 'STYLE';\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotRotulo.getClasseCSS(elemento.agrupador));\n    node.setAttribute('data-rotulo', elemento.rotulo);\n    node.innerHTML = '';\n    return node;\n  }\n\n  get rotulo(): string {\n    return this.domNode.getAttribute('data-rotulo');\n  }\n\n  constructor(elemento: Elemento) {\n    super(EtaBlotRotulo.create(elemento));\n  }\n\n  format(name: string, value: any): void {\n    if (name === EtaBlotRotulo.blotName) {\n      this.domNode.setAttribute('data-rotulo', value);\n    } else if (name === EtaBlotRotulo.formatoStyle) {\n      this.domNode.setAttribute('style', EtaBlotRotulo.criarAtributoStyle(value));\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  private static criarAtributoStyle(elemento: Elemento): string {\n    let style = elemento.tipo === 'Articulacao' ? 'color: #373634; font-weight: 600; line-height: 0.42;' : 'color: #373634; font-weight: 600; line-height: 1.42;';\n\n    if (elemento.agrupador) {\n      style = `${style} display: block; font-size: 1rem; text-align: center;`;\n    } else {\n      style = `${style} float: left; margin-right: 10px;`;\n    }\n    return style;\n  }\n\n  public static getClasseCSS(agrupador: boolean): string {\n    return 'texto__rotulo' + (agrupador ? ' texto__rotulo--agrupador' : ' texto__rotulo--padrao');\n  }\n}\n","import { EtaBlot } from './eta-blot';\n\nexport class EtaBlotEspaco extends EtaBlot {\n  static blotName = 'espaco';\n  static tagName = 'ESPACO';\n  static className = 'espaco';\n\n  static create(): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.innerHTML = '&nbsp;';\n    return node;\n  }\n\n  constructor() {\n    super(EtaBlotEspaco.create());\n  }\n}\n","import { DescricaoSituacao } from '../../model/dispositivo/situacao';\nimport { Elemento } from '../../model/elemento';\nimport { EtaBlotConteudo } from './eta-blot-conteudo';\nimport { EtaBlotEspaco } from './eta-blot-espaco';\nimport { EtaBlotRotulo } from './eta-blot-rotulo';\nimport { EtaContainerTdDireito } from './eta-container-td-direito';\n\nconst Container = Quill.import('blots/container');\n\nexport class EtaContainerTable extends Container {\n  static blotName = 'containerTable';\n  static tagName = 'DIV';\n  static className = 'container__elemento';\n\n  static criarId(uuid?: number): string {\n    return `lxEtaId${uuid ?? 0}`;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', elemento?.editavel ? 'true' : 'false');\n    node.setAttribute('class', EtaContainerTable.className + ' ' + EtaContainerTable.getClasseCSS(elemento));\n    node.setAttribute('id', EtaContainerTable.criarId(elemento.uuid));\n    node.setAttribute('cellpadding', '0');\n    node.setAttribute('cellspacing', '0');\n    node.setAttribute('border', '0');\n    return node;\n  }\n\n  [key: string]: any;\n\n  get blotRotulo(): EtaBlotRotulo {\n    return this.children.head?.children?.head.children.head;\n  }\n\n  get blotConteudo(): EtaBlotConteudo {\n    return this.blotRotulo?.next;\n  }\n\n  get containerDireito(): EtaContainerTdDireito {\n    return this.children.head.children.tail;\n  }\n\n  get blotContainerDireito(): EtaContainerTdDireito {\n    return this.containerDireito.children.head;\n  }\n\n  get tamanho(): number {\n    return this.length() - 1;\n  }\n\n  get id(): string {\n    return this.domNode.getAttribute('id') ?? '';\n  }\n\n  private _agrupador: boolean;\n  set agrupador(agrupador: boolean) {\n    this._agrupador = agrupador;\n  }\n\n  get agrupador(): boolean {\n    return this._agrupador;\n  }\n\n  private _editavel: boolean;\n  set editavel(editavel: boolean) {\n    this._editavel = editavel;\n    this.blotConteudo.domNode.contentEditable = this._editavel;\n  }\n\n  get editavel(): boolean {\n    return this._editavel;\n  }\n\n  private _hierarquia: any;\n  set hierarquia(hierarquia: any) {\n    this._hierarquia = hierarquia;\n  }\n\n  get hierarquia(): any {\n    return this._hierarquia;\n  }\n\n  private _nivel: number;\n  set nivel(nivel: number) {\n    this._nivel = nivel;\n  }\n\n  get nivel(): number {\n    return this._nivel;\n  }\n\n  private _numero: string;\n  set numero(numero: string) {\n    this._numero = numero;\n  }\n\n  get numero(): string {\n    return this._numero;\n  }\n\n  private _tipo: string;\n  set tipo(tipo: string) {\n    this._tipo = tipo;\n  }\n\n  get tipo(): string {\n    return this._tipo;\n  }\n\n  private _descricaoSituacao: any;\n  set descricaoSituacao(situacao: any) {\n    this._descricaoSituacao = situacao;\n  }\n\n  get descricaoSituacao(): any {\n    return this._descricaoSituacao;\n  }\n\n  get uuid(): number {\n    return parseInt(this.id.substr(7), 0);\n  }\n\n  private _lexmlId: string;\n  set lexmlId(lexmlId: string) {\n    this._lexmlId = lexmlId;\n  }\n\n  get lexmlId(): string {\n    return this._lexmlId ?? '';\n  }\n\n  get html(): string {\n    return this.domNode.innerHTML !== '<br>' ? this.domNode.innerHTML : '';\n  }\n\n  set html(html: string) {\n    this.domNode.innerHTML = html;\n  }\n\n  // TODO Rever a forma atual de se atribuir estilos\n  setEstilo(valor: string): void {\n    let classeCSS = '';\n    let classeCSSAdicional = 'texto__dispositivo';\n\n    switch (valor) {\n      case DescricaoSituacao.DISPOSITIVO_ADICIONADO:\n        classeCSS = 'dispositivo--adicionado';\n        break;\n      case DescricaoSituacao.DISPOSITIVO_MODIFICADO:\n        classeCSS = 'dispositivo--modificado';\n        break;\n      case DescricaoSituacao.DISPOSITIVO_SUPRIMIDO:\n        classeCSS = 'dispositivo--suprimido';\n        classeCSSAdicional = 'texto--suprimido';\n        break;\n    }\n    this.blotRotulo.domNode.setAttribute('class', `${EtaBlotRotulo.getClasseCSS(this._agrupador)} ${classeCSS}`);\n    this.blotConteudo.domNode.setAttribute('class', `${classeCSS} ${classeCSSAdicional}`);\n  }\n\n  constructor(elemento: Elemento) {\n    super(EtaContainerTable.create(elemento));\n    this._lexmlId = elemento.lexmlId ?? '';\n    this._editavel = elemento.editavel;\n    this._nivel = elemento.nivel;\n    this._numero = elemento.numero ?? '';\n    this._tipo = elemento.tipo ?? '';\n    this._agrupador = elemento.agrupador;\n    this._hierarquia = elemento.hierarquia?.pai?.uuidAlteracao ? elemento.hierarquia : undefined;\n    this._descricaoSituacao = elemento.descricaoSituacao ? elemento.descricaoSituacao : undefined;\n  }\n\n  format(name: string, value: any): void {\n    if (name === EtaContainerTable.blotName) {\n      this.domNode.setAttribute('style', EtaContainerTable.criarAtributoStyle(value));\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  ativarBorda(): void {\n    this.domNode.classList.add('container__elemento--ativo');\n  }\n\n  desativarBorda(): void {\n    this.domNode.classList.remove('container__elemento--ativo');\n    this.limparContainerDireito();\n  }\n\n  limparContainerDireito(): void {\n    if (this.blotContainerDireito.tagName !== EtaBlotEspaco.tagName) {\n      this.blotContainerDireito.remove();\n      new EtaBlotEspaco().insertInto(this.containerDireito);\n    }\n  }\n\n  private static criarAtributoStyle(elemento: Elemento): string {\n    let style =\n      elemento.tipo === 'Articulacao'\n        ? `width: 100%; min-height: 1px; line-height: 0.42; margin: 1px`\n        : `width: 100%; min-height: 26px; border: 1px solid #ffffff; line-height: 1.42; margin: 0px 2px 0px 5px !important;`;\n\n    if (elemento.agrupador) {\n      style = `${style} text-align: center;`;\n    }\n\n    return style;\n  }\n  private static getClasseCSS(elemento: Elemento): string {\n    let classe = elemento.tipo === 'Articulacao' ? 'container__elemento--articulacao' : 'container__elemento--padrao';\n    if (elemento.agrupador) {\n      classe = `${classe} agrupador`;\n    }\n\n    return classe;\n  }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n// Baseado no tutorial \"Using Event Decorators with lit-element and Web Components\"\n//   https://coryrylan.com/blog/using-event-decorators-with-lit-element-and-web-components\n\nexport interface EventOptions {\n  bubbles?: boolean;\n  cancelable?: boolean;\n  composed?: boolean;\n}\n\nexport class EventEmitter<T> {\n  constructor(private target: HTMLElement, private eventName: string) {}\n\n  emit(value: T, options?: EventOptions): void {\n    this.target.dispatchEvent(\n      new CustomEvent<T>(this.eventName, { detail: value, ...options })\n    );\n  }\n}\n\nexport function event() {\n  return (protoOrDescriptor: any, name: string): any => {\n    const descriptor = {\n      get(this: HTMLElement): EventEmitter<unknown> {\n        return new EventEmitter(this, name !== undefined ? name : protoOrDescriptor.key);\n      },\n      enumerable: true,\n      configurable: true,\n    };\n\n    return name !== undefined ? Object.defineProperty(protoOrDescriptor, name, descriptor) : { kind: 'method', placement: 'prototype', key: protoOrDescriptor.key, descriptor };\n  };\n}\n\nexport function cancelarPropagacaoDoEvento(ev: MouseEvent | KeyboardEvent | ClipboardEvent): void {\n  ev.stopPropagation();\n  ev.preventDefault();\n}\n","export class Subscription {\n  private canceled?: boolean;\n\n  constructor(public callback: any, canceled?: boolean) {\n    this.canceled = canceled;\n  }\n\n  isCanceled(): boolean {\n    return this.canceled ?? false;\n  }\n\n  cancel(): void {\n    this.canceled = true;\n  }\n}\n\nexport class Observable<T = void> {\n  private subscriptions: Subscription[];\n\n  constructor() {\n    this.subscriptions = [];\n  }\n\n  subscribe(callback: any): Subscription {\n    const inscricao: Subscription = new Subscription(callback);\n    this.subscriptions.push(inscricao);\n    return inscricao;\n  }\n\n  notify(data: T): void {\n    this.subscriptions.forEach((subscription: Subscription) => {\n      if (!subscription.isCanceled()) {\n        setTimeout(() => {\n          subscription.callback(data);\n        }, 1);\n      }\n    });\n  }\n\n  clean(): void {\n    this.subscriptions = [];\n  }\n}\n","import { cancelarPropagacaoDoEvento } from '../event-util';\nimport { Observable } from '../observable';\nimport { EtaContainerTable } from './eta-container-table';\nimport { EtaQuill, TextoSelecionado } from './eta-quill';\n\nexport const CaracteresValidos = /([a-zA-Z0-9 '!@#$%&*()_\\-+=`'{[^~}\\]<,>.:;?/|\\\\])/i;\nexport const CaracteresNaoValidos = /([^a-zA-Z0-9 '!@#$%&*()_\\-+=`'{[^~}\\]<,>.:;?/|\\\\])/gi;\n\nexport const Keyboard = Quill.import('modules/keyboard');\n\nexport class EtaKeyboard extends Keyboard {\n  operacaoTecladoInvalida: Observable<void> = new Observable<void>();\n  adicionaElementoTeclaEnter: Observable<RangeStatic> = new Observable<RangeStatic>();\n  removeElemento: Observable<void> = new Observable<void>();\n  renumeraElemento: Observable<KeyboardEvent> = new Observable<KeyboardEvent>();\n  transformaElemento: Observable<KeyboardEvent> = new Observable<KeyboardEvent>();\n  moveElemento: Observable<KeyboardEvent> = new Observable<KeyboardEvent>();\n  onChange: Observable<string> = new Observable<string>();\n\n  private altGraphPressionado = false;\n\n  constructor(quill: EtaQuill, options: any) {\n    super(quill, options);\n  }\n\n  listen(): void {\n    this.quill.root.addEventListener('keyup', (ev: KeyboardEvent): void => {\n      if (ev.key === 'AltGraph') {\n        this.altGraphPressionado = false;\n      }\n\n      // Trata atalhos de formatao (negrito, itlico, ...)\n      if (ev.ctrlKey && !ev.altKey && !ev.shiftKey && 'biBI'.includes(ev.key)) {\n        this.onHotKeyToolbar();\n        return;\n      }\n\n      if (!(this.quill.cursorDeTextoEstaSobreLink() || (ev.key === 'Backspace' && this.quill.cursorDeTextoEstaSobreLink(-1))) && this.isTeclaQueAlteraTexto(ev)) {\n        this.onChange.notify('keyboard');\n      }\n    });\n\n    this.quill.root.addEventListener('keypress', (ev: KeyboardEvent): void => {\n      if (this.quill.cursorDeTextoEstaSobreLink() && ev.key.length === 1) {\n        cancelarPropagacaoDoEvento(ev);\n      }\n    });\n\n    this.quill.root.addEventListener('keydown', (ev: KeyboardEvent): void => {\n      if (ev.key === 'AltGraph') {\n        this.altGraphPressionado = true;\n      }\n\n      if (this.quill.cursorDeTextoEstaSobreLink() || (ev.key === 'Backspace' && this.quill.cursorDeTextoEstaSobreLink(-1))) {\n        if (\n          ['Delete', 'Backspace'].includes(ev.key) ||\n          (!ev.ctrlKey && ev.key.length === 1) ||\n          (ev.ctrlKey && 'xvXV'.includes(ev.key)) ||\n          (ev.altKey && '0123456789'.includes(ev.key))\n        ) {\n          cancelarPropagacaoDoEvento(ev);\n          return;\n        }\n      } else if (ev.ctrlKey) {\n        if (!ev.altKey && !ev.metaKey) {\n          if (ev.key === 'Home') {\n            this.onTeclaHome(ev);\n          } else if (ev.key === 'End') {\n            this.onTeclaEnd(ev);\n          } else if (ev.key === 'ArrowUp' || ev.key === 'ArrowDown') {\n            this.onHotKeyMover(ev);\n          } else if (ev.key.toLowerCase() === 'a' && !ev.shiftKey) {\n            this.onTeclaCtrlA(ev);\n          } else if (ev.key.toLowerCase() === 'd') {\n            this.onTeclaCtrlD(ev);\n          } else if (ev.key.toLowerCase() === 'z') {\n            this.onTeclaCtrlZ(ev);\n          } else if (ev.key.toLowerCase() === 'y') {\n            this.onTeclaCtrlY(ev);\n          } else if (ev.ctrlKey && ev.shiftKey && ev.key.toLowerCase() === 'a') {\n            this.onTeclaCtrlShiftA(ev);\n          } else if (ev.key === 'b' || ev.key === 'i' || ev.key === 'x' || ev.key === 'v') {\n            this.onValidarTecla(ev);\n          }\n        }\n        if (ev.altKey || ev.metaKey) {\n          if (['a', 'l', 'n', 'o', 'p', 't'].includes(ev.key.toLowerCase())) {\n            this.onHotKeyTransformacaoTipo(ev);\n          } else if (ev.key.toLowerCase() === 'r') {\n            this.onHotKeyRenumeraDispositivo(ev);\n          }\n        }\n      } else if (ev.key === 'ArrowRight') {\n        this.onTeclaArrowRight(ev);\n      } else if (ev.key === 'ArrowLeft') {\n        this.onTeclaArrowLeft(ev);\n      } else if (ev.key === 'ArrowDown' || ev.key === 'ArrowUp') {\n        this.onTeclaArrowDownOuUp(ev);\n      } else if (ev.key === 'Enter') {\n        this.onTeclaEnter(ev);\n      } else if (ev.key === 'Escape') {\n        this.onTeclaEscape(ev);\n      } else if (ev.key === 'Delete') {\n        this.onTeclaDelete(ev);\n      } else if (ev.key === 'Backspace') {\n        this.onTeclaBackspace(ev);\n      } else if (ev.key === 'Tab') {\n        this.onTeclaTab(ev);\n      } else if (ev.key.length === 1 && CaracteresValidos.test(ev.key)) {\n        this.onValidarTecla(ev);\n      }\n    });\n    super.listen();\n  }\n\n  private isTeclaComCaracterGrafico(ev: KeyboardEvent): boolean {\n    const teclasComCaracterGrafico = '123456=[]/';\n    const DOM_KEY_LOCATION_NUMPAD = 3; //\n    return ev.location !== DOM_KEY_LOCATION_NUMPAD && teclasComCaracterGrafico.includes(ev.key);\n  }\n\n  private isTeclaQueAlteraTexto(ev: KeyboardEvent): boolean {\n    // Se teclas Ctrl, Alt ou Meta(?) estiverem pressionadas no faz nada\n    // Atalhos para recortar e colar sero tratados em outro lugar\n    if (ev.ctrlKey || ev.altKey || ev.metaKey) {\n      return false;\n    }\n\n    if (this.altGraphPressionado && !this.isTeclaComCaracterGrafico(ev)) {\n      return false;\n    }\n\n    // Verifica se  um caracter que altera texto\n    // OBS: 'Enter' no ser tratado porque essa tecla cria um novo elemento e esta ao ir disparar\n    //      um evento onchange por conta prpria.\n    if (['Delete', 'Backspace'].includes(ev.key) || ev.key.length === 1) {\n      return true;\n    }\n\n    return false;\n  }\n\n  verificarOperacaoTecladoPermitida(): boolean {\n    const textoSelec: TextoSelecionado = this.quill.textoSelecionado;\n    if (textoSelec.conteudo) {\n      if (textoSelec.quantidadeCR > 0) {\n        if (textoSelec.quantidadeCR === 1 && /\\n$/gi.test(textoSelec.conteudo)) {\n          const range: RangeStatic = this.quill.getSelection(true);\n          this.quill.setSelection(range.index, range.length - 1, Quill.sources.API);\n          return true;\n        } else {\n          this.operacaoTecladoInvalida.notify();\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  private onTeclaArrowRight(ev: KeyboardEvent): void {\n    const range: RangeStatic = this.quill.getSelection(true);\n    const [blotCursor, offset] = this.quill.getLine(range.index);\n\n    if (offset === blotCursor.tamanho) {\n      if (blotCursor.linha.next) {\n        this.quill.setIndex(this.quill.getIndex(blotCursor.linha.next.blotConteudo), Quill.sources.USER);\n      }\n      cancelarPropagacaoDoEvento(ev);\n    }\n  }\n\n  private onTeclaArrowLeft(ev: KeyboardEvent): void {\n    const range: RangeStatic = this.quill.getSelection(true);\n    const [blotCursor, offset] = this.quill.getLine(range.index);\n\n    if (offset === 0) {\n      if (blotCursor.linha.prev) {\n        const linhaAnt: EtaContainerTable = blotCursor.linha.prev;\n        const index: number = this.quill.getIndex(linhaAnt.blotConteudo) + linhaAnt.blotConteudo.tamanho;\n        this.quill.setIndex(index, Quill.sources.USER);\n      }\n      cancelarPropagacaoDoEvento(ev);\n    }\n  }\n\n  private onTeclaArrowDownOuUp(ev: KeyboardEvent): void {\n    if (this.quill.isProcessandoMudancaLinha) {\n      cancelarPropagacaoDoEvento(ev);\n    }\n  }\n\n  private onTeclaEnter(ev: KeyboardEvent): void {\n    if (this.verificarOperacaoTecladoPermitida()) {\n      const range: RangeStatic = this.quill.getSelection(true);\n      this.quill.setSelection(range.index, 0, Quill.sources.SILENT);\n      this.adicionaElementoTeclaEnter.notify(range);\n    }\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaEscape(ev: KeyboardEvent): void {\n    const range: RangeStatic = this.quill.getSelection(true);\n    this.quill.setIndex(range.index, Quill.sources.SILENT);\n    this.quill.setSelection(this.quill.inicioConteudoAtual, 0, Quill.sources.SILENT);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaDelete(ev: KeyboardEvent): void {\n    const range: RangeStatic = this.quill.getSelection(true);\n    if (!this.verificarOperacaoTecladoPermitida() || range.index === this.quill.fimConteudoAtual) {\n      cancelarPropagacaoDoEvento(ev);\n    }\n  }\n\n  private onTeclaBackspace(ev: KeyboardEvent): void {\n    const range: RangeStatic = this.quill.getSelection(true);\n    if (!this.verificarOperacaoTecladoPermitida() || (range.index === this.quill.inicioConteudoAtual && range.length === 0)) {\n      cancelarPropagacaoDoEvento(ev);\n    }\n  }\n\n  private onValidarTecla(ev: KeyboardEvent): void {\n    if (!this.verificarOperacaoTecladoPermitida()) {\n      cancelarPropagacaoDoEvento(ev);\n    }\n  }\n\n  private onTeclaHome(ev: KeyboardEvent): void {\n    const index: number = this.quill.getIndex(this.quill.getPrimeiraLinha().blotConteudo);\n    this.quill.setIndex(index, Quill.sources.USER);\n    this.quill.scroll.domNode.scrollTo(0, 0);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaEnd(ev: KeyboardEvent): void {\n    const index: number = this.quill.getIndex(this.quill.getUltimaLinha().blotConteudo) + this.quill.getUltimaLinha().blotConteudo?.tamanho ?? 0;\n    this.quill.setIndex(index, Quill.sources.USER);\n    this.quill.scroll.domNode.scrollTo(0, this.quill.scroll.domNode.scrollHeight);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaCtrlD(ev: KeyboardEvent): void {\n    this.removeElemento.notify();\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaTab(ev: KeyboardEvent): void {\n    this.transformaElemento.notify(ev);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaCtrlZ(ev: KeyboardEvent): void {\n    this.quill.undo();\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaCtrlY(ev: KeyboardEvent): void {\n    this.quill.redo();\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaCtrlA(ev: KeyboardEvent): void {\n    const index: number = this.quill.getIndex(this.quill.scroll.children.head.blotConteudo);\n    this.quill.setSelection(index, this.quill.getLength(), Quill.sources.SILENT);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaCtrlShiftA(ev: KeyboardEvent): void {\n    this.quill.setSelection(this.quill.inicioConteudoAtual, this.quill.linhaAtual.blotConteudo.tamanho, Quill.sources.SILENT);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onHotKeyRenumeraDispositivo(ev: KeyboardEvent): void {\n    this.renumeraElemento.notify(ev);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onHotKeyMover(ev: KeyboardEvent): void {\n    this.moveElemento.notify(ev);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onHotKeyTransformacaoTipo(ev: KeyboardEvent): void {\n    this.transformaElemento.notify(ev);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onHotKeyToolbar(): void {\n    const texto = document.getSelection()?.toString();\n    if (texto) {\n      this.onChange.notify('toolbar(hotkey)');\n    }\n  }\n}\n","import { Elemento } from '../../model/elemento';\nimport { EtaBlot } from './eta-blot';\n\nexport class EtaBlotConteudo extends EtaBlot {\n  static blotName = 'texto';\n  static tagName = 'P';\n  static className = 'texto__dispositivo';\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n    const conteudo: string = (elemento.conteudo?.texto ?? '').trim();\n\n    node.setAttribute('contenteditable', elemento?.editavel ? 'true' : 'false');\n    node.innerHTML = conteudo !== '' ? conteudo : '<br>';\n    return node;\n  }\n\n  private _htmlAnt: string;\n  set htmlAnt(htmlAnt: string) {\n    this._htmlAnt = htmlAnt;\n  }\n\n  get htmlAnt(): string {\n    return this._htmlAnt;\n  }\n\n  get alterado(): boolean {\n    return this._htmlAnt !== this.html;\n  }\n\n  constructor(elemento: Elemento) {\n    super(EtaBlotConteudo.create(elemento));\n    this._htmlAnt = '';\n  }\n}\n","import { Mensagem, TipoMensagem } from '../../model/lexml/util/mensagem';\nimport { EtaBlot } from './eta-blot';\n\nexport class EtaBlotMensagem extends EtaBlot {\n  static blotName = 'mensagem';\n  static tagName = 'div';\n  static className = 'mensagem';\n\n  static create(mensagem: Mensagem): any {\n    const node: HTMLElement = super.create();\n    let classe = '';\n\n    if (mensagem.tipo === TipoMensagem.INFO) {\n      classe = 'mensagem--info';\n    } else if (mensagem.tipo === TipoMensagem.WARNING) {\n      classe = 'mensagem--warning';\n    } else {\n      classe = 'mensagem--danger';\n    }\n\n    node.setAttribute('contenteditable', 'false');\n    node.classList.add(classe);\n    node.innerHTML = mensagem.descricao ? '- ' + mensagem.descricao : '';\n    return node;\n  }\n\n  constructor(mensagem: Mensagem) {\n    super(EtaBlotMensagem.create(mensagem));\n  }\n}\n","import { EtaBlot } from './eta-blot';\n\nexport class EtaBlotMensagens extends EtaBlot {\n  static blotName = 'mensagens';\n  static tagName = 'MENSAGENS';\n\n  static create(): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('style', 'font-size: 0.8em;');\n    return node;\n  }\n\n  constructor() {\n    super(EtaBlotMensagens.create());\n  }\n}\n","import { CaracteresNaoValidos } from './eta-keyboard';\nimport { EtaQuill } from './eta-quill';\nimport { Observable } from '../observable';\nimport { cancelarPropagacaoDoEvento } from '../event-util';\n\nconst Clipboard = Quill.import('modules/clipboard');\n\nexport class EtaClipboard extends Clipboard {\n  onChange: Observable<string> = new Observable<string>();\n\n  constructor(quill: EtaQuill, options: any) {\n    super(quill, options);\n\n    this.quill.root.addEventListener('cut', (ev: ClipboardEvent) => {\n      if (this.quill.cursorDeTextoEstaSobreLink()) {\n        cancelarPropagacaoDoEvento(ev);\n        return;\n      }\n      const text = document.getSelection()?.toString();\n      if (text) {\n        this.onChange.notify('clipboard');\n      }\n    });\n\n    this.quill.root.addEventListener('paste', (ev: ClipboardEvent) => {\n      if (this.quill.cursorDeTextoEstaSobreLink()) {\n        cancelarPropagacaoDoEvento(ev);\n        return;\n      }\n      const text = ev.clipboardData?.getData('text/plain');\n      if (text) {\n        this.onChange.notify('clipboard');\n      }\n    });\n  }\n\n  convert(html?: any): DeltaStatic {\n    if (typeof html === 'string') {\n      this.container.innerHTML = html;\n      return super.convert();\n    }\n\n    this.container.innerHTML = this.container.innerHTML.replace(CaracteresNaoValidos, '');\n    this.container.innerHTML = this.container.innerHTML.replace(/(<p\\s*)/gi, ' <p');\n    this.container.innerHTML = this.container.innerHTML.replace(/(<br\\s*\\/>)/gi, ' ');\n    this.container.innerHTML = this.container.innerHTML.replace(/<(?!strong)(?!\\/strong)(?!em)(?!\\/em)(?!sub)(?!\\/sub)(?!sup)(?!\\/sup)(.*?)>/gi, '');\n    this.container.innerHTML = this.container.innerHTML.replace(/<([a-z]+) .*?=\".*?( *\\/?>)/gi, '<$1$2');\n\n    const delta: DeltaStatic = super.convert();\n    this.container.innerHTML = '';\n    return delta;\n  }\n}\n","import { AlinhamentoMenu } from './eta-blot-menu';\n\nconst Container = Quill.import('blots/container');\n\nexport class EtaContainerTdDireito extends Container {\n  static blotName = 'containerTdDireito';\n  static tagName = 'DIV';\n  static className = 'container__menu';\n\n  alinhamentoMenu: AlinhamentoMenu;\n\n  static create(): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaContainerTdDireito.className);\n    return node;\n  }\n\n  [key: string]: any;\n\n  constructor(alinhamentoMenu: AlinhamentoMenu) {\n    super(EtaContainerTdDireito.create());\n    this.alinhamentoMenu = alinhamentoMenu;\n  }\n}\n","import { Elemento } from '../../model/elemento';\n\nconst Container = Quill.import('blots/container');\n\nexport class EtaContainerTdEsquerdo extends Container {\n  static blotName = 'containerTdEsquerdo';\n  static tagName = 'DIV';\n  static className = 'container__texto';\n  static classLevel = 'level';\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', elemento.editavel ? 'true' : 'false');\n    node.setAttribute('class', EtaContainerTdEsquerdo.className + ' container__texto--nivel' + elemento.nivel);\n\n    const fator = Number(getComputedStyle(document.documentElement).getPropertyValue('--elemento-padding-factor'));\n    if (fator) {\n      const padding: number = (elemento.agrupador ? 0 : elemento.nivel) * fator + 5;\n      node.setAttribute('style', `padding-left: ${padding}px;`);\n    }\n\n    return node;\n  }\n\n  [key: string]: any;\n\n  constructor(elemento: Elemento) {\n    super(EtaContainerTdEsquerdo.create(elemento));\n  }\n}\n","import { AlinhamentoMenu } from './eta-blot-menu';\nconst Container = Quill.import('blots/container');\n\nexport class EtaContainerTr extends Container {\n  static blotName = 'containerTr';\n  static tagName = 'DIV';\n  static className = 'container__linha';\n\n  static create(editavel: boolean, alinhamentoMenu: AlinhamentoMenu): any {\n    const node: HTMLElement = super.create();\n\n    const classeAdicional = alinhamentoMenu === AlinhamentoMenu.Esquerda ? ' container__linha--reverse' : '';\n\n    node.setAttribute('contenteditable', editavel ? 'true' : 'false');\n    node.setAttribute('class', EtaContainerTr.className + classeAdicional);\n    return node;\n  }\n\n  [key: string]: any;\n\n  constructor(editavel: boolean, alinhamentoMenu: AlinhamentoMenu) {\n    super(EtaContainerTr.create(editavel, alinhamentoMenu));\n  }\n}\n","export class EtaQuillBuffer extends Quill {\n  constructor(editorHtml: HTMLElement, op: QuillOptionsStatic) {\n    super(editorHtml, op);\n  }\n\n  getConteudoHtml(html: string, offset: number, tamanho: number): string {\n    const blotBuffer: any = this.scroll.children.head;\n\n    this.setConteudo(this.converterHtmlParaDelta(html), Quill.sources.SILENT);\n    this.deleteText(offset + tamanho, blotBuffer.length() - tamanho - 1, Quill.sources.SILENT);\n\n    if (offset > 0) {\n      this.deleteText(0, offset, Quill.sources.SILENT);\n    }\n    return blotBuffer.domNode.innerHTML;\n  }\n\n  converterHtmlParaDelta(html: string): DeltaStatic {\n    return this.clipboard!.convert(html ?? '');\n  }\n\n  converterDeltaParaHtml(delta: DeltaStatic): string {\n    this.setConteudo(delta, Quill.sources.SILENT);\n    return this.scroll.children.head.domNode.innerHTML;\n  }\n\n  private setConteudo(delta: DeltaStatic, source?: Sources): void {\n    const blotBuffer: any = this.scroll.children.head;\n    let index = 0;\n\n    if (blotBuffer.length() > 1) {\n      this.deleteText(index, blotBuffer.length() - 1, source ?? Quill.sources.SILENT);\n    }\n    this.insertText(index, ' ', Quill.sources.SILENT);\n\n    delta.ops?.forEach((op: DeltaOperation): void => {\n      if (op.attributes) {\n        this.insertText(index, op.insert, op.attributes, source ?? Quill.sources.SILENT);\n      } else {\n        this.insertText(index, op.insert, source ?? Quill.sources.SILENT);\n      }\n      index += op.insert.length;\n    });\n    this.deleteText(index, 1, Quill.sources.SILENT);\n  }\n}\n","import { Observable } from '../observable';\nimport { EtaBlot } from './eta-blot';\nimport { EtaBlotConteudo } from './eta-blot-conteudo';\nimport { EtaBlotEspaco } from './eta-blot-espaco';\nimport { EtaBlotMensagem } from './eta-blot-mensagem';\nimport { EtaBlotMensagens } from './eta-blot-mensagens';\nimport { EtaBlotMenu } from './eta-blot-menu';\nimport { EtaBlotMenuBotao } from './eta-blot-menu-botao';\nimport { EtaBlotMenuConteudo } from './eta-blot-menu-conteudo';\nimport { EtaBlotMenuItem } from './eta-blot-menu-item';\nimport { EtaBlotRotulo } from './eta-blot-rotulo';\nimport { EtaClipboard } from './eta-clipboard';\nimport { EtaContainerTable } from './eta-container-table';\nimport { EtaContainerTdDireito } from './eta-container-td-direito';\nimport { EtaContainerTdEsquerdo } from './eta-container-td-esquerdo';\nimport { EtaContainerTr } from './eta-container-tr';\nimport { EtaKeyboard } from './eta-keyboard';\nimport { EtaQuillBuffer } from './eta-quill-buffer';\n\nexport interface TextoSelecionado {\n  conteudo: string;\n  quantidadeCR: number;\n}\n\nexport class EtaQuill extends Quill {\n  static readonly UNDO: string = 'undo';\n  static readonly REDO: string = 'redo';\n\n  private _mudouDeLinha?: boolean;\n  get mudouDeLinha(): boolean {\n    return this._mudouDeLinha ?? false;\n  }\n\n  private _linhaAnterior?: EtaContainerTable;\n  get linhaAnterior(): EtaContainerTable {\n    return this._linhaAnterior as EtaContainerTable;\n  }\n\n  private _linhaAtual?: EtaContainerTable;\n  get linhaAtual(): EtaContainerTable {\n    return this._linhaAtual as EtaContainerTable;\n  }\n\n  get inicioConteudoAtual(): number {\n    return this.getIndex(this.linhaAtual.blotConteudo);\n  }\n\n  get fimConteudoAtual(): number {\n    return this.inicioConteudoAtual + this.linhaAtual.blotConteudo.tamanho;\n  }\n\n  get textoSelecionado(): TextoSelecionado {\n    const range: RangeStatic = this.getSelection(true) ?? { index: 0, length: 0 };\n    const texto: string = this.getText().substr(range.index, range.length);\n    return {\n      conteudo: texto,\n      quantidadeCR: texto.match(/(\\n)/gi)?.length ?? 0,\n    };\n  }\n\n  private _undoEstruturaVazio = true;\n  get isUndoEstruturaVazio(): boolean {\n    return this._undoEstruturaVazio;\n  }\n\n  set undoEstruturaVazio(undoVazio: boolean) {\n    this._undoEstruturaVazio = undoVazio;\n  }\n\n  private _redoEstruturaVazio = true;\n  get isRedoEstruturaVazio(): boolean {\n    return this._redoEstruturaVazio;\n  }\n\n  set redoEstruturaVazio(redoVazio: boolean) {\n    this._redoEstruturaVazio = redoVazio;\n  }\n\n  // Utilizado no modulo keyboard para anular eventos subrepostos durante o\n  // processamento da mudana de elemento atual. Isso acontece quando o usurio\n  // aperta as teclas que provocam a mudana de elemento muito rpido\n  // (ArrowDown e ArrowUp).\n  private _processandoMudancaLinha = false;\n  get isProcessandoMudancaLinha(): boolean {\n    return this._processandoMudancaLinha;\n  }\n\n  set processandoMudancaLinha(processando: boolean) {\n    this._processandoMudancaLinha = processando;\n  }\n\n  undoRedoEstrutura: Observable<string> = new Observable<string>();\n  elementoSelecionado: Observable<number> = new Observable<number>();\n\n  private buffer: EtaQuillBuffer;\n  private aspasAberta = false;\n\n  static configurar(): void {\n    const Parchment: any = EtaQuill.import('parchment');\n    const id = new Parchment.Attributor.Attribute('id', 'id', { scope: Parchment.Scope.BLOCK });\n    const paddingLeft = new Parchment.Attributor.Style('paddingLeft', 'padding-left', { scope: Parchment.Scope.BLOCK });\n    const border = new Parchment.Attributor.Style('border', 'border', { scope: Parchment.Scope.BLOCK });\n    const borderColor = new Parchment.Attributor.Style('borderColor', 'border-color', { scope: Parchment.Scope.BLOCK });\n    const display = new Parchment.Attributor.Style('display', 'display', { scope: Parchment.Scope.BLOCK });\n    const ariaLabel = new Parchment.Attributor.Style('aria-label', 'aria-label', { scope: Parchment.Scope.BLOCK });\n    const DataRotulo = new Parchment.Attributor.Attribute('dataRotulo', 'data-rotulo', { scope: Parchment.Scope.BLOCK });\n\n    EtaQuill.register('modules/clipboard', EtaClipboard, true);\n    EtaQuill.register('modules/keyboard', EtaKeyboard, true);\n    EtaQuill.register(EtaBlotConteudo, true);\n    EtaQuill.register(EtaBlotEspaco, true);\n    EtaQuill.register(EtaBlotMensagem, true);\n    EtaQuill.register(EtaBlotMensagens, true);\n    EtaQuill.register(EtaBlotMenuBotao, true);\n    EtaQuill.register(EtaBlotMenuConteudo, true);\n    EtaQuill.register(EtaBlotMenuItem, true);\n    EtaQuill.register(EtaBlotMenu, true);\n    EtaQuill.register(EtaBlotRotulo, true);\n    EtaQuill.register(EtaContainerTable, true);\n    EtaQuill.register(EtaContainerTdEsquerdo, true);\n    EtaQuill.register(EtaContainerTdDireito, true);\n    EtaQuill.register(EtaContainerTr, true);\n    EtaQuill.register(id, true);\n    EtaQuill.register(paddingLeft, true);\n    EtaQuill.register(border, true);\n    EtaQuill.register(borderColor, true);\n    EtaQuill.register(display, true);\n    EtaQuill.register(ariaLabel, true);\n    EtaQuill.register(DataRotulo, true);\n  }\n\n  constructor(editorHtml: HTMLElement, bufferHtml: HTMLElement, op: QuillOptionsStatic) {\n    super(editorHtml, op);\n    this.on('text-change', this.onTextChange);\n    this.on('selection-change', this.onSelectionChange);\n    this.buffer = new EtaQuillBuffer(bufferHtml, {});\n    this.root.addEventListener('dragstart', (e: Event) => {\n      e.preventDefault();\n    });\n    this.root.addEventListener('drop', (e: Event) => {\n      e.preventDefault();\n    });\n  }\n\n  destroi(): void {\n    this.off('text-change', this.onTextChange);\n    this.off('selection-change', this.onSelectionChange);\n    this.keyboard?.operacaoTecladoInvalida.clean();\n    this.keyboard?.adicionaElementoTeclaEnter.clean();\n  }\n\n  getConteudoHtmlParteLinha(blotConteudo: EtaBlotConteudo, offset: number, tamanho: number): string {\n    return this.buffer.getConteudoHtml(blotConteudo.html, offset, tamanho);\n  }\n\n  getPrimeiraLinha(): EtaContainerTable {\n    return this.scroll.children.head;\n  }\n\n  getUltimaLinha(): EtaContainerTable {\n    return this.scroll.children.tail;\n  }\n\n  getLinha(uuid: number, linha: EtaContainerTable = this.getPrimeiraLinha()): EtaContainerTable | undefined {\n    if (linha.uuid === uuid) {\n      return linha;\n    }\n    if (linha.next) {\n      return this.getLinha(uuid, linha.next);\n    } else {\n      return undefined;\n    }\n  }\n\n  getLinhaPorId(uuid: number): EtaContainerTable {\n    return Quill.find(this.getHtmlElement(EtaContainerTable.criarId(uuid)), false);\n  }\n\n  setIndex(index: number, source: Sources = Quill.sources.USER): void {\n    const range: RangeStatic = this.getSelection(true) ?? { index: 0, length: 0 };\n    if (index !== range.index || range.length !== 0) {\n      this.setSelection(index, 0, source);\n    }\n  }\n\n  setConteudoLinha(blotConteudo: EtaBlotConteudo, delta: DeltaStatic, source?: Sources): void {\n    let index = this.getIndex(blotConteudo);\n\n    if (blotConteudo.length() > 1) {\n      this.deleteText(index, blotConteudo.length() - 1, source ?? Quill.sources.SILENT);\n    }\n    this.insertText(index, ' ', Quill.sources.SILENT);\n\n    delta.ops?.forEach((op: DeltaOperation): void => {\n      if (op.attributes) {\n        this.insertText(index, op.insert, op.attributes, source ?? Quill.sources.SILENT);\n      } else {\n        this.insertText(index, op.insert, source ?? Quill.sources.SILENT);\n      }\n      index += op.insert.length;\n    });\n    this.deleteText(index, 1, Quill.sources.SILENT);\n  }\n\n  converterHtmlParaDelta(html: string): DeltaStatic {\n    return this.buffer.converterHtmlParaDelta(html);\n  }\n\n  converterDeltaParaHtml(delta: DeltaStatic): string {\n    return this.buffer.converterDeltaParaHtml(delta);\n  }\n\n  irProximaLinha(): void {\n    const index: number = this.getIndex(this._linhaAtual?.next.blotConteudo);\n    this.setSelection(index, 0);\n  }\n\n  desmarcarLinhaAtual(linhaCursorAnt: EtaContainerTable): void {\n    this._linhaAnterior = linhaCursorAnt;\n    linhaCursorAnt?.desativarBorda();\n  }\n\n  marcarLinhaAtual(linhaCursor: EtaContainerTable): void {\n    if (linhaCursor.tipo !== 'Articulacao') {\n      this.atualizarLinhaCorrente(linhaCursor);\n      this.elementoSelecionado.notify(linhaCursor.uuid);\n    }\n  }\n\n  undo(): void {\n    if (this.history.stack.undo.length === 0) {\n      if (!this.isUndoEstruturaVazio) {\n        this.undoRedoEstrutura.notify(EtaQuill.UNDO);\n      }\n    } else {\n      this.history.undo();\n      this.focus();\n    }\n  }\n\n  redo(): void {\n    if (this.history.stack.redo.length === 0) {\n      if (!this.isRedoEstruturaVazio) {\n        this.undoRedoEstrutura.notify(EtaQuill.REDO);\n      }\n    } else {\n      this.history.redo();\n      this.focus();\n    }\n  }\n\n  limparHistory(): void {\n    setTimeout(() => {\n      this.history.clear();\n    }, 0);\n  }\n\n  private verificarMudouLinha(range: RangeStatic, oldRange?: RangeStatic): boolean {\n    // correo bug: cursor se perde ao teclar  na primeira linha\n    if (oldRange && range?.index === 0 && range?.length === 0) {\n      this.setSelection(oldRange.index, 0);\n      return false;\n    }\n\n    if (range) {\n      const blotCursor: EtaBlot = this.getLine(range.index)[0];\n      const linhaCursor: EtaContainerTable = blotCursor.linha;\n\n      if (\n        blotCursor.tagName === EtaBlotRotulo.tagName ||\n        blotCursor.tagName === EtaBlotEspaco.tagName ||\n        blotCursor.tagName === EtaBlotMenu.tagName ||\n        blotCursor.tagName === EtaBlotMensagens.tagName\n      ) {\n        this.setSelection(this.getIndex(blotCursor.linha.blotConteudo), 0, Quill.sources.SILENT);\n      }\n\n      if (oldRange) {\n        const blotCursorAnt: EtaBlot = this.getLine(oldRange.index)[0];\n\n        if (blotCursorAnt) {\n          const linhaCursorAnt: EtaContainerTable = blotCursorAnt.linha;\n\n          if (linhaCursor === linhaCursorAnt) {\n            return false;\n          }\n          this.desmarcarLinhaAtual(linhaCursorAnt);\n        }\n      }\n      this.marcarLinhaAtual(linhaCursor);\n      return true;\n    }\n    return false;\n  }\n\n  observableSelectionChange = new Observable<EtaContainerTable>();\n  private onSelectionChange: SelectionChangeHandler = (range: RangeStatic, oldRange: RangeStatic): void => {\n    // Guarda a linhaAtual corrente\n    // OBS: o valor de \"this.linhaAtual\" ser alterado dentro de \"this.verificarMudouLinha\" de acordo com alguns critrios.\n    const linhaAtualAux = this.linhaAtual;\n\n    this._mudouDeLinha = this.verificarMudouLinha(range, oldRange);\n\n    if (this._mudouDeLinha) {\n      this.observableSelectionChange.notify(linhaAtualAux);\n      this.aspasAberta = false;\n      this.limparHistory();\n    }\n  };\n\n  private onTextChange: TextChangeHandler = (): void => {\n    if (this._linhaAtual) {\n      setTimeout(() => {\n        this.acertarAspas();\n      }, 0);\n    }\n  };\n\n  private getHtmlElement(id: string): HTMLElement {\n    return this.root.querySelector(`#${id}`) as HTMLElement;\n  }\n\n  private acertarAspas(): void {\n    if (this._linhaAtual) {\n      const index: number = this.inicioConteudoAtual;\n      const texto: string = this.getText(index, this.linhaAtual?.blotConteudo.tamanho) ?? '';\n      let posicaoTexto = index;\n\n      if (texto.indexOf('\"') > -1) {\n        for (let i = 0; i < texto.length; i++) {\n          if (texto[i] === '\"') {\n            posicaoTexto += i;\n            this.deleteText(posicaoTexto, 1, Quill.sources.SILENT);\n            this.insertText(posicaoTexto, this.aspasAberta ? '' : '', Quill.sources.SILENT);\n            this.aspasAberta = !this.aspasAberta;\n            posicaoTexto = index;\n          }\n        }\n      }\n    }\n  }\n\n  atualizarLinhaCorrente(linha: EtaContainerTable): void {\n    this.processandoMudancaLinha = true;\n    this._linhaAtual = linha;\n    this._linhaAtual.blotConteudo.htmlAnt = this._linhaAtual.blotConteudo.html;\n    linha.ativarBorda();\n    this.scrollToElemento(linha.uuid);\n  }\n\n  private scrollToElemento(uuid: number): void {\n    const el = this.getHtmlElement(EtaContainerTable.criarId(uuid));\n    setTimeout(() => {\n      if (!this.isInEtaBoxViewport(el)) {\n        this.scrollIntoEtaBox(el);\n        // el.scrollIntoView({behavior: 'smooth', block: 'center'});\n      }\n    }, 0);\n  }\n\n  private scrollIntoEtaBox(el: HTMLElement): void {\n    const offsetTopElement = el.offsetTop;\n    el.closest('.ql-editor')?.scrollTo(0, offsetTopElement);\n  }\n\n  private isInEtaBoxViewport(el: HTMLElement): boolean {\n    const rect = el.getBoundingClientRect();\n\n    const lxEtaBox = el.closest('#lx-eta-box');\n    const etaBoxHeight = lxEtaBox!.getBoundingClientRect().bottom;\n\n    return rect.top >= 0 && rect.bottom <= etaBoxHeight;\n  }\n\n  cursorDeTextoEstaSobreLink(deslocamento = 0): boolean {\n    const range: RangeStatic = this.getSelection(true);\n    const ops = this.getContents(range.index + deslocamento, 1).ops;\n    return !ops ? false : ops[0].attributes?.link;\n    // return !!this.getContents(range.index + deslocamento, 1).ops[0].attributes?.link;\n  }\n}\n","import { Elemento } from '../../model/elemento';\nimport { Mensagem } from '../../model/lexml/util/mensagem';\nimport { EtaBlotConteudo } from './eta-blot-conteudo';\nimport { EtaBlotEspaco } from './eta-blot-espaco';\nimport { EtaBlotMensagem } from './eta-blot-mensagem';\nimport { EtaBlotRotulo } from './eta-blot-rotulo';\nimport { EtaContainerTable } from './eta-container-table';\nimport { EtaContainerTdDireito } from './eta-container-td-direito';\nimport { EtaContainerTdEsquerdo } from './eta-container-td-esquerdo';\nimport { EtaContainerTr } from './eta-container-tr';\nimport { AlinhamentoMenu } from './eta-blot-menu';\n\nexport class EtaQuillUtil {\n  static alinhamentoMenu = AlinhamentoMenu.Esquerda;\n\n  static criarContainerLinha(elemento: Elemento): EtaContainerTable {\n    const etaTable: EtaContainerTable = new EtaContainerTable(elemento);\n    const etaTrContainer: EtaContainerTr = new EtaContainerTr(elemento.editavel, this.alinhamentoMenu);\n    const etaTdTexto: EtaContainerTdEsquerdo = new EtaContainerTdEsquerdo(elemento);\n    const etaTdEspaco: EtaContainerTdDireito = new EtaContainerTdDireito(this.alinhamentoMenu);\n\n    new EtaBlotRotulo(elemento).insertInto(etaTdTexto);\n    new EtaBlotConteudo(elemento).insertInto(etaTdTexto);\n    new EtaBlotEspaco().insertInto(etaTdEspaco);\n\n    etaTdTexto.insertInto(etaTrContainer);\n    etaTdEspaco.insertInto(etaTrContainer);\n\n    etaTrContainer.insertInto(etaTable);\n\n    return etaTable;\n  }\n\n  static criarContainerMensagens(elemento: Elemento): EtaContainerTr {\n    const etaTrContainer: EtaContainerTr = new EtaContainerTr(false, this.alinhamentoMenu);\n    const etaTdMensagens: EtaContainerTdEsquerdo = new EtaContainerTdEsquerdo(elemento);\n    const etaTdEspaco: EtaContainerTdDireito = new EtaContainerTdDireito(this.alinhamentoMenu);\n\n    if (elemento.mensagens && elemento.mensagens.length > 0) {\n      elemento.mensagens.forEach((mensagem: Mensagem): void => {\n        new EtaBlotMensagem(mensagem).insertInto(etaTdMensagens);\n      });\n    }\n    new EtaBlotEspaco().insertInto(etaTdEspaco);\n\n    etaTdMensagens.insertInto(etaTrContainer);\n    etaTdEspaco.insertInto(etaTrContainer);\n\n    return etaTrContainer;\n  }\n}\n","import { Elemento } from '../../model/elemento';\nimport { buildUrn, getData, getNumero, getTipo, validaUrn } from '../../model/lexml/documento/urnUtil';\n\nexport async function informarNormaDialog(elemento: Elemento, quill: any, store: any, action: any): Promise<any> {\n  const dialogElem = document.createElement('elix-dialog');\n\n  const content = document.createRange().createContextualFragment(`\n    <style>\n    h1.normaDiv {\n      font-size: 1em;\n      padding: 0.5em;\n      font-weight: bold;\n    }\n    .normaDiv {\n      display: grid;\n      grid-template-columns: [labels] auto [controls] 1fr;\n      grid-auto-flow: row;\n      grid-gap: .8em;\n      padding: 0.5em;\n    }\n    .normaDiv > label  {\n      grid-column: labels;\n      grid-row: auto;\n    }\n    .normaDiv > input,\n    .normaDiv > select {\n      grid-column: controls;\n      grid-row: auto;\n      padding: 0.5em;\n    }\n  </style>\n  <h1 class=\"normaDiv\">Dados da norma vigente</h1>\n  <div name=\"normaDiv\" class=\"normaDiv\">\n    <label for=\"tipoNorma\">Tipo </label>\n      <select name=\"tipos\" name=\"tipoNorma\" id=\"tipoNorma\">      \n      <option value=\"decreto\">Decreto</option>\n      <option value=\"decreto-lei\">Decreto-Lei</option>\n      <option value=\"lei\" selected>Lei</option>\n      <option value=\"lei.complementar\">Lei Complementar</option>\n      <option value=\"lei.delegada\">Lei Delegada</option>\n      <option value=\"medida.provisoria\">Medida Provisria</option>\n    </select>    \n    <label for=\"numeroNorma\">Nmero </label>\n    <input type=\"text\" name=\"numeroNorma\" id=\"numeroNorma\" placeholder=\"8666 (nmero sem ponto)\">\n    <label for=\"dataNorma\">Data</label>\n    <input type=\"text\" name=\"dataNorma\" id=\"dataNorma\" placeholder=\"21/06/1993\">\n\n    <div style=\"margin-top: 10px;\">\n      <button>Ok</button>\n      <button>Cancelar</button>\n    </div>\n    <div class=\"erro\" style=\"margin-top: 10px; color: red; display: none;\"></div>\n\n  </div>\n\n\n  `);\n\n  const t = elemento.norma ? getTipo(elemento.norma)?.urn : undefined;\n  const n = elemento.norma ? getNumero(elemento.norma) : undefined;\n  const d = elemento.norma ? getData(elemento.norma) : undefined;\n\n  const tipoNorma = content.querySelector('#tipoNorma');\n  const numero = content.querySelector('#numeroNorma');\n  const data = content.querySelector('#dataNorma');\n\n  if (t) {\n    (tipoNorma! as HTMLSelectElement).value = t;\n  }\n\n  if (n) {\n    (numero! as HTMLInputElement).value = n;\n  }\n\n  if (d) {\n    (data! as HTMLInputElement).value = d;\n  }\n\n  const botoes = content.querySelectorAll('button');\n  const ok = botoes[0];\n  const cancelar = botoes[1];\n  const erro = <HTMLDivElement>content.querySelector('.erro');\n\n  ok.onclick = (): void => {\n    const urn = buildUrn('federal', (tipoNorma! as HTMLSelectElement).value, (numero as HTMLInputElement)?.value, (data as HTMLInputElement)?.value);\n\n    if (validaUrn(urn)) {\n      quill.focus();\n      (<any>dialogElem).close();\n\n      erro.style.display = 'none';\n      elemento.norma = urn;\n      store.dispatch(action.execute(elemento));\n    } else {\n      erro.innerText = 'Dados invlidos';\n      erro.style.display = 'block';\n    }\n  };\n\n  cancelar.onclick = (): void => {\n    quill.focus();\n    (<any>dialogElem).close();\n  };\n\n  dialogElem.appendChild(content);\n\n  await (<any>dialogElem).open();\n}\n","import { css } from 'lit-element';\nexport const quillSnowCss = css`\n  /*!\n * Quill Editor v1.3.7\n * https://quilljs.com/\n * Copyright (c) 2014, Jason Chen\n * Copyright (c) 2013, salesforce.com\n */\n  .ql-container {\n    box-sizing: border-box;\n    font-family: Helvetica, Arial, sans-serif;\n    font-size: 13px;\n    height: 100%;\n    margin: 0px;\n    position: relative;\n  }\n  .ql-container.ql-disabled .ql-tooltip {\n    visibility: hidden;\n  }\n  .ql-container.ql-disabled .ql-editor ul[data-checked] > li::before {\n    pointer-events: none;\n  }\n  .ql-clipboard {\n    left: -100000px;\n    height: 1px;\n    overflow-y: hidden;\n    position: absolute;\n    top: 50%;\n  }\n  .ql-clipboard p {\n    margin: 0;\n    padding: 0;\n  }\n  .ql-editor {\n    box-sizing: border-box;\n    line-height: 1.42;\n    height: 100%;\n    outline: none;\n    overflow-y: auto;\n    padding: 12px 15px;\n    tab-size: 4;\n    -moz-tab-size: 4;\n    text-align: left;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n  }\n  .ql-editor > * {\n    cursor: text;\n  }\n  .ql-editor p,\n  .ql-editor ol,\n  .ql-editor ul,\n  .ql-editor pre,\n  .ql-editor blockquote,\n  .ql-editor h1,\n  .ql-editor h2,\n  .ql-editor h3,\n  .ql-editor h4,\n  .ql-editor h5,\n  .ql-editor h6 {\n    margin: 0;\n    padding: 0;\n    counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n  }\n  .ql-editor ol,\n  .ql-editor ul {\n    padding-left: 1.5em;\n  }\n  .ql-editor ol > li,\n  .ql-editor ul > li {\n    list-style-type: none;\n  }\n  .ql-editor ul > li::before {\n    content: '\\\\2022';\n  }\n  .ql-editor ul[data-checked='true'],\n  .ql-editor ul[data-checked='false'] {\n    pointer-events: none;\n  }\n  .ql-editor ul[data-checked='true'] > li *,\n  .ql-editor ul[data-checked='false'] > li * {\n    pointer-events: all;\n  }\n  .ql-editor ul[data-checked='true'] > li::before,\n  .ql-editor ul[data-checked='false'] > li::before {\n    color: #777;\n    cursor: pointer;\n    pointer-events: all;\n  }\n  .ql-editor ul[data-checked='true'] > li::before {\n    content: '\\\\2611';\n  }\n  .ql-editor ul[data-checked='false'] > li::before {\n    content: '\\\\2610';\n  }\n  .ql-editor li::before {\n    display: inline-block;\n    white-space: nowrap;\n    width: 1.2em;\n  }\n  .ql-editor li:not(.ql-direction-rtl)::before {\n    margin-left: -1.5em;\n    margin-right: 0.3em;\n    text-align: right;\n  }\n  .ql-editor li.ql-direction-rtl::before {\n    margin-left: 0.3em;\n    margin-right: -1.5em;\n  }\n  .ql-editor ol li:not(.ql-direction-rtl),\n  .ql-editor ul li:not(.ql-direction-rtl) {\n    padding-left: 1.5em;\n  }\n  .ql-editor ol li.ql-direction-rtl,\n  .ql-editor ul li.ql-direction-rtl {\n    padding-right: 1.5em;\n  }\n  .ql-editor ol li {\n    counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n    counter-increment: list-0;\n  }\n  .ql-editor ol li:before {\n    content: counter(list-0, decimal) '. ';\n  }\n  .ql-editor ol li.ql-indent-1 {\n    counter-increment: list-1;\n  }\n  .ql-editor ol li.ql-indent-1:before {\n    content: counter(list-1, lower-alpha) '. ';\n  }\n  .ql-editor ol li.ql-indent-1 {\n    counter-reset: list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n  }\n  .ql-editor ol li.ql-indent-2 {\n    counter-increment: list-2;\n  }\n  .ql-editor ol li.ql-indent-2:before {\n    content: counter(list-2, lower-roman) '. ';\n  }\n  .ql-editor ol li.ql-indent-2 {\n    counter-reset: list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n  }\n  .ql-editor ol li.ql-indent-3 {\n    counter-increment: list-3;\n  }\n  .ql-editor ol li.ql-indent-3:before {\n    content: counter(list-3, decimal) '. ';\n  }\n  .ql-editor ol li.ql-indent-3 {\n    counter-reset: list-4 list-5 list-6 list-7 list-8 list-9;\n  }\n  .ql-editor ol li.ql-indent-4 {\n    counter-increment: list-4;\n  }\n  .ql-editor ol li.ql-indent-4:before {\n    content: counter(list-4, lower-alpha) '. ';\n  }\n  .ql-editor ol li.ql-indent-4 {\n    counter-reset: list-5 list-6 list-7 list-8 list-9;\n  }\n  .ql-editor ol li.ql-indent-5 {\n    counter-increment: list-5;\n  }\n  .ql-editor ol li.ql-indent-5:before {\n    content: counter(list-5, lower-roman) '. ';\n  }\n  .ql-editor ol li.ql-indent-5 {\n    counter-reset: list-6 list-7 list-8 list-9;\n  }\n  .ql-editor ol li.ql-indent-6 {\n    counter-increment: list-6;\n  }\n  .ql-editor ol li.ql-indent-6:before {\n    content: counter(list-6, decimal) '. ';\n  }\n  .ql-editor ol li.ql-indent-6 {\n    counter-reset: list-7 list-8 list-9;\n  }\n  .ql-editor ol li.ql-indent-7 {\n    counter-increment: list-7;\n  }\n  .ql-editor ol li.ql-indent-7:before {\n    content: counter(list-7, lower-alpha) '. ';\n  }\n  .ql-editor ol li.ql-indent-7 {\n    counter-reset: list-8 list-9;\n  }\n  .ql-editor ol li.ql-indent-8 {\n    counter-increment: list-8;\n  }\n  .ql-editor ol li.ql-indent-8:before {\n    content: counter(list-8, lower-roman) '. ';\n  }\n  .ql-editor ol li.ql-indent-8 {\n    counter-reset: list-9;\n  }\n  .ql-editor ol li.ql-indent-9 {\n    counter-increment: list-9;\n  }\n  .ql-editor ol li.ql-indent-9:before {\n    content: counter(list-9, decimal) '. ';\n  }\n  .ql-editor .ql-indent-1:not(.ql-direction-rtl) {\n    padding-left: 3em;\n  }\n  .ql-editor li.ql-indent-1:not(.ql-direction-rtl) {\n    padding-left: 4.5em;\n  }\n  .ql-editor .ql-indent-1.ql-direction-rtl.ql-align-right {\n    padding-right: 3em;\n  }\n  .ql-editor li.ql-indent-1.ql-direction-rtl.ql-align-right {\n    padding-right: 4.5em;\n  }\n  .ql-editor .ql-indent-2:not(.ql-direction-rtl) {\n    padding-left: 6em;\n  }\n  .ql-editor li.ql-indent-2:not(.ql-direction-rtl) {\n    padding-left: 7.5em;\n  }\n  .ql-editor .ql-indent-2.ql-direction-rtl.ql-align-right {\n    padding-right: 6em;\n  }\n  .ql-editor li.ql-indent-2.ql-direction-rtl.ql-align-right {\n    padding-right: 7.5em;\n  }\n  .ql-editor .ql-indent-3:not(.ql-direction-rtl) {\n    padding-left: 9em;\n  }\n  .ql-editor li.ql-indent-3:not(.ql-direction-rtl) {\n    padding-left: 10.5em;\n  }\n  .ql-editor .ql-indent-3.ql-direction-rtl.ql-align-right {\n    padding-right: 9em;\n  }\n  .ql-editor li.ql-indent-3.ql-direction-rtl.ql-align-right {\n    padding-right: 10.5em;\n  }\n  .ql-editor .ql-indent-4:not(.ql-direction-rtl) {\n    padding-left: 12em;\n  }\n  .ql-editor li.ql-indent-4:not(.ql-direction-rtl) {\n    padding-left: 13.5em;\n  }\n  .ql-editor .ql-indent-4.ql-direction-rtl.ql-align-right {\n    padding-right: 12em;\n  }\n  .ql-editor li.ql-indent-4.ql-direction-rtl.ql-align-right {\n    padding-right: 13.5em;\n  }\n  .ql-editor .ql-indent-5:not(.ql-direction-rtl) {\n    padding-left: 15em;\n  }\n  .ql-editor li.ql-indent-5:not(.ql-direction-rtl) {\n    padding-left: 16.5em;\n  }\n  .ql-editor .ql-indent-5.ql-direction-rtl.ql-align-right {\n    padding-right: 15em;\n  }\n  .ql-editor li.ql-indent-5.ql-direction-rtl.ql-align-right {\n    padding-right: 16.5em;\n  }\n  .ql-editor .ql-indent-6:not(.ql-direction-rtl) {\n    padding-left: 18em;\n  }\n  .ql-editor li.ql-indent-6:not(.ql-direction-rtl) {\n    padding-left: 19.5em;\n  }\n  .ql-editor .ql-indent-6.ql-direction-rtl.ql-align-right {\n    padding-right: 18em;\n  }\n  .ql-editor li.ql-indent-6.ql-direction-rtl.ql-align-right {\n    padding-right: 19.5em;\n  }\n  .ql-editor .ql-indent-7:not(.ql-direction-rtl) {\n    padding-left: 21em;\n  }\n  .ql-editor li.ql-indent-7:not(.ql-direction-rtl) {\n    padding-left: 22.5em;\n  }\n  .ql-editor .ql-indent-7.ql-direction-rtl.ql-align-right {\n    padding-right: 21em;\n  }\n  .ql-editor li.ql-indent-7.ql-direction-rtl.ql-align-right {\n    padding-right: 22.5em;\n  }\n  .ql-editor .ql-indent-8:not(.ql-direction-rtl) {\n    padding-left: 24em;\n  }\n  .ql-editor li.ql-indent-8:not(.ql-direction-rtl) {\n    padding-left: 25.5em;\n  }\n  .ql-editor .ql-indent-8.ql-direction-rtl.ql-align-right {\n    padding-right: 24em;\n  }\n  .ql-editor li.ql-indent-8.ql-direction-rtl.ql-align-right {\n    padding-right: 25.5em;\n  }\n  .ql-editor .ql-indent-9:not(.ql-direction-rtl) {\n    padding-left: 27em;\n  }\n  .ql-editor li.ql-indent-9:not(.ql-direction-rtl) {\n    padding-left: 28.5em;\n  }\n  .ql-editor .ql-indent-9.ql-direction-rtl.ql-align-right {\n    padding-right: 27em;\n  }\n  .ql-editor li.ql-indent-9.ql-direction-rtl.ql-align-right {\n    padding-right: 28.5em;\n  }\n  .ql-editor .ql-video {\n    display: block;\n    max-width: 100%;\n  }\n  .ql-editor .ql-video.ql-align-center {\n    margin: 0 auto;\n  }\n  .ql-editor .ql-video.ql-align-right {\n    margin: 0 0 0 auto;\n  }\n  .ql-editor .ql-bg-black {\n    background-color: #000;\n  }\n  .ql-editor .ql-bg-red {\n    background-color: #e60000;\n  }\n  .ql-editor .ql-bg-orange {\n    background-color: #f90;\n  }\n  .ql-editor .ql-bg-yellow {\n    background-color: #ff0;\n  }\n  .ql-editor .ql-bg-green {\n    background-color: #008a00;\n  }\n  .ql-editor .ql-bg-blue {\n    background-color: #06c;\n  }\n  .ql-editor .ql-bg-purple {\n    background-color: #93f;\n  }\n  .ql-editor .ql-color-white {\n    color: #fff;\n  }\n  .ql-editor .ql-color-red {\n    color: #e60000;\n  }\n  .ql-editor .ql-color-orange {\n    color: #f90;\n  }\n  .ql-editor .ql-color-yellow {\n    color: #ff0;\n  }\n  .ql-editor .ql-color-green {\n    color: #008a00;\n  }\n  .ql-editor .ql-color-blue {\n    color: #06c;\n  }\n  .ql-editor .ql-color-purple {\n    color: #93f;\n  }\n  .ql-editor .ql-font-serif {\n    font-family: Georgia, Times New Roman, serif;\n  }\n  .ql-editor .ql-font-monospace {\n    font-family: Monaco, Courier New, monospace;\n  }\n  .ql-editor .ql-size-small {\n    font-size: 0.75em;\n  }\n  .ql-editor .ql-size-large {\n    font-size: 1.5em;\n  }\n  .ql-editor .ql-size-huge {\n    font-size: 2.5em;\n  }\n  .ql-editor .ql-direction-rtl {\n    direction: rtl;\n    text-align: inherit;\n  }\n  .ql-editor .ql-align-center {\n    text-align: center;\n  }\n  .ql-editor .ql-align-justify {\n    text-align: justify;\n  }\n  .ql-editor .ql-align-right {\n    text-align: right;\n  }\n  .ql-editor.ql-blank::before {\n    color: rgba(0, 0, 0, 0.6);\n    content: attr(data-placeholder);\n    font-style: italic;\n    left: 15px;\n    pointer-events: none;\n    position: absolute;\n    right: 15px;\n  }\n  .ql-snow.ql-toolbar:after,\n  .ql-snow .ql-toolbar:after {\n    clear: both;\n    content: '';\n    display: table;\n  }\n  .ql-snow.ql-toolbar button,\n  .ql-snow .ql-toolbar button {\n    background: none;\n    border: none;\n    cursor: pointer;\n    display: inline-block;\n    float: left;\n    height: 24px;\n    padding: 3px 5px;\n    width: 28px;\n  }\n  .ql-snow.ql-toolbar button svg,\n  .ql-snow .ql-toolbar button svg {\n    float: left;\n    height: 100%;\n  }\n  .ql-snow.ql-toolbar button:active:hover,\n  .ql-snow .ql-toolbar button:active:hover {\n    outline: none;\n  }\n  .ql-snow.ql-toolbar input.ql-image[type='file'],\n  .ql-snow .ql-toolbar input.ql-image[type='file'] {\n    display: none;\n  }\n  .ql-snow.ql-toolbar button:hover,\n  .ql-snow .ql-toolbar button:hover,\n  .ql-snow.ql-toolbar button:focus,\n  .ql-snow .ql-toolbar button:focus,\n  .ql-snow.ql-toolbar button.ql-active,\n  .ql-snow .ql-toolbar button.ql-active,\n  .ql-snow.ql-toolbar .ql-picker-label:hover,\n  .ql-snow .ql-toolbar .ql-picker-label:hover,\n  .ql-snow.ql-toolbar .ql-picker-label.ql-active,\n  .ql-snow .ql-toolbar .ql-picker-label.ql-active,\n  .ql-snow.ql-toolbar .ql-picker-item:hover,\n  .ql-snow .ql-toolbar .ql-picker-item:hover,\n  .ql-snow.ql-toolbar .ql-picker-item.ql-selected,\n  .ql-snow .ql-toolbar .ql-picker-item.ql-selected {\n    color: #06c;\n  }\n  .ql-snow.ql-toolbar button:hover .ql-fill,\n  .ql-snow .ql-toolbar button:hover .ql-fill,\n  .ql-snow.ql-toolbar button:focus .ql-fill,\n  .ql-snow .ql-toolbar button:focus .ql-fill,\n  .ql-snow.ql-toolbar button.ql-active .ql-fill,\n  .ql-snow .ql-toolbar button.ql-active .ql-fill,\n  .ql-snow.ql-toolbar .ql-picker-label:hover .ql-fill,\n  .ql-snow .ql-toolbar .ql-picker-label:hover .ql-fill,\n  .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-fill,\n  .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-fill,\n  .ql-snow.ql-toolbar .ql-picker-item:hover .ql-fill,\n  .ql-snow .ql-toolbar .ql-picker-item:hover .ql-fill,\n  .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-fill,\n  .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-fill,\n  .ql-snow.ql-toolbar button:hover .ql-stroke.ql-fill,\n  .ql-snow .ql-toolbar button:hover .ql-stroke.ql-fill,\n  .ql-snow.ql-toolbar button:focus .ql-stroke.ql-fill,\n  .ql-snow .ql-toolbar button:focus .ql-stroke.ql-fill,\n  .ql-snow.ql-toolbar button.ql-active .ql-stroke.ql-fill,\n  .ql-snow .ql-toolbar button.ql-active .ql-stroke.ql-fill,\n  .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,\n  .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,\n  .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,\n  .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,\n  .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,\n  .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,\n  .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,\n  .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill {\n    fill: #06c;\n  }\n  .ql-snow.ql-toolbar button:hover .ql-stroke,\n  .ql-snow .ql-toolbar button:hover .ql-stroke,\n  .ql-snow.ql-toolbar button:focus .ql-stroke,\n  .ql-snow .ql-toolbar button:focus .ql-stroke,\n  .ql-snow.ql-toolbar button.ql-active .ql-stroke,\n  .ql-snow .ql-toolbar button.ql-active .ql-stroke,\n  .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke,\n  .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke,\n  .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke,\n  .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke,\n  .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke,\n  .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke,\n  .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,\n  .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,\n  .ql-snow.ql-toolbar button:hover .ql-stroke-miter,\n  .ql-snow .ql-toolbar button:hover .ql-stroke-miter,\n  .ql-snow.ql-toolbar button:focus .ql-stroke-miter,\n  .ql-snow .ql-toolbar button:focus .ql-stroke-miter,\n  .ql-snow.ql-toolbar button.ql-active .ql-stroke-miter,\n  .ql-snow .ql-toolbar button.ql-active .ql-stroke-miter,\n  .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,\n  .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,\n  .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,\n  .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,\n  .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,\n  .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,\n  .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,\n  .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter {\n    stroke: #06c;\n  }\n  @media (pointer: coarse) {\n    .ql-snow.ql-toolbar button:hover:not(.ql-active),\n    .ql-snow .ql-toolbar button:hover:not(.ql-active) {\n      color: #444;\n    }\n    .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-fill,\n    .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-fill,\n    .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill,\n    .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill {\n      fill: #444;\n    }\n    .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke,\n    .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke,\n    .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter,\n    .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter {\n      stroke: #444;\n    }\n  }\n  .ql-snow {\n    box-sizing: border-box;\n  }\n  .ql-snow * {\n    box-sizing: border-box;\n  }\n  .ql-snow .ql-hidden {\n    display: none;\n  }\n  .ql-snow .ql-out-bottom,\n  .ql-snow .ql-out-top {\n    visibility: hidden;\n  }\n  .ql-snow .ql-tooltip {\n    position: absolute;\n    transform: translateY(10px);\n  }\n  .ql-snow .ql-tooltip a {\n    cursor: pointer;\n    text-decoration: none;\n  }\n  .ql-snow .ql-tooltip.ql-flip {\n    transform: translateY(-10px);\n  }\n  .ql-snow .ql-formats {\n    display: inline-block;\n    vertical-align: middle;\n  }\n  .ql-snow .ql-formats:after {\n    clear: both;\n    content: '';\n    display: table;\n  }\n  .ql-snow .ql-stroke {\n    fill: none;\n    stroke: #444;\n    stroke-linecap: round;\n    stroke-linejoin: round;\n    stroke-width: 2;\n  }\n  .ql-snow .ql-stroke-miter {\n    fill: none;\n    stroke: #444;\n    stroke-miterlimit: 10;\n    stroke-width: 2;\n  }\n  .ql-snow .ql-fill,\n  .ql-snow .ql-stroke.ql-fill {\n    fill: #444;\n  }\n  .ql-snow .ql-empty {\n    fill: none;\n  }\n  .ql-snow .ql-even {\n    fill-rule: evenodd;\n  }\n  .ql-snow .ql-thin,\n  .ql-snow .ql-stroke.ql-thin {\n    stroke-width: 1;\n  }\n  .ql-snow .ql-transparent {\n    opacity: 0.4;\n  }\n  .ql-snow .ql-direction svg:last-child {\n    display: none;\n  }\n  .ql-snow .ql-direction.ql-active svg:last-child {\n    display: inline;\n  }\n  .ql-snow .ql-direction.ql-active svg:first-child {\n    display: none;\n  }\n  .ql-snow .ql-editor h1 {\n    font-size: 2em;\n  }\n  .ql-snow .ql-editor h2 {\n    font-size: 1.5em;\n  }\n  .ql-snow .ql-editor h3 {\n    font-size: 1.17em;\n  }\n  .ql-snow .ql-editor h4 {\n    font-size: 1em;\n  }\n  .ql-snow .ql-editor h5 {\n    font-size: 0.83em;\n  }\n  .ql-snow .ql-editor h6 {\n    font-size: 0.67em;\n  }\n  .ql-snow .ql-editor a {\n    text-decoration: underline;\n  }\n  .ql-snow .ql-editor blockquote {\n    border-left: 4px solid #ccc;\n    margin-bottom: 5px;\n    margin-top: 5px;\n    padding-left: 16px;\n  }\n  .ql-snow .ql-editor code,\n  .ql-snow .ql-editor pre {\n    background-color: #f0f0f0;\n    border-radius: 3px;\n  }\n  .ql-snow .ql-editor pre {\n    white-space: pre-wrap;\n    margin-bottom: 5px;\n    margin-top: 5px;\n    padding: 5px 10px;\n  }\n  .ql-snow .ql-editor code {\n    font-size: 85%;\n    padding: 2px 4px;\n  }\n  .ql-snow .ql-editor pre.ql-syntax {\n    background-color: #23241f;\n    color: #f8f8f2;\n    overflow: visible;\n  }\n  .ql-snow .ql-editor img {\n    max-width: 100%;\n  }\n  .ql-snow .ql-picker {\n    color: #444;\n    display: inline-block;\n    float: left;\n    font-size: 14px;\n    font-weight: 500;\n    height: 24px;\n    position: relative;\n    vertical-align: middle;\n  }\n  .ql-snow .ql-picker-label {\n    cursor: pointer;\n    display: inline-block;\n    height: 100%;\n    padding-left: 8px;\n    padding-right: 2px;\n    position: relative;\n    width: 100%;\n  }\n  .ql-snow .ql-picker-label::before {\n    display: inline-block;\n    line-height: 22px;\n  }\n  .ql-snow .ql-picker-options {\n    background-color: #fff;\n    display: none;\n    min-width: 100%;\n    padding: 4px 8px;\n    position: absolute;\n    white-space: nowrap;\n  }\n  .ql-snow .ql-picker-options .ql-picker-item {\n    cursor: pointer;\n    display: block;\n    padding-bottom: 5px;\n    padding-top: 5px;\n  }\n  .ql-snow .ql-picker.ql-expanded .ql-picker-label {\n    color: #ccc;\n    z-index: 2;\n  }\n  .ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-fill {\n    fill: #ccc;\n  }\n  .ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-stroke {\n    stroke: #ccc;\n  }\n  .ql-snow .ql-picker.ql-expanded .ql-picker-options {\n    display: block;\n    margin-top: -1px;\n    top: 100%;\n    z-index: 1;\n  }\n  .ql-snow .ql-color-picker,\n  .ql-snow .ql-icon-picker {\n    width: 28px;\n  }\n  .ql-snow .ql-color-picker .ql-picker-label,\n  .ql-snow .ql-icon-picker .ql-picker-label {\n    padding: 2px 4px;\n  }\n  .ql-snow .ql-color-picker .ql-picker-label svg,\n  .ql-snow .ql-icon-picker .ql-picker-label svg {\n    right: 4px;\n  }\n  .ql-snow .ql-icon-picker .ql-picker-options {\n    padding: 4px 0px;\n  }\n  .ql-snow .ql-icon-picker .ql-picker-item {\n    height: 24px;\n    width: 24px;\n    padding: 2px 4px;\n  }\n  .ql-snow .ql-color-picker .ql-picker-options {\n    padding: 3px 5px;\n    width: 152px;\n  }\n  .ql-snow .ql-color-picker .ql-picker-item {\n    border: 1px solid transparent;\n    float: left;\n    height: 16px;\n    margin: 2px;\n    padding: 0px;\n    width: 16px;\n  }\n  .ql-snow .ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg {\n    position: absolute;\n    margin-top: -9px;\n    right: 0;\n    top: 50%;\n    width: 18px;\n  }\n  .ql-snow .ql-picker.ql-header .ql-picker-label[data-label]:not([data-label=''])::before,\n  .ql-snow .ql-picker.ql-font .ql-picker-label[data-label]:not([data-label=''])::before,\n  .ql-snow .ql-picker.ql-size .ql-picker-label[data-label]:not([data-label=''])::before,\n  .ql-snow .ql-picker.ql-header .ql-picker-item[data-label]:not([data-label=''])::before,\n  .ql-snow .ql-picker.ql-font .ql-picker-item[data-label]:not([data-label=''])::before,\n  .ql-snow .ql-picker.ql-size .ql-picker-item[data-label]:not([data-label=''])::before {\n    content: attr(data-label);\n  }\n  .ql-snow .ql-picker.ql-header {\n    width: 98px;\n  }\n  .ql-snow .ql-picker.ql-header .ql-picker-label::before,\n  .ql-snow .ql-picker.ql-header .ql-picker-item::before {\n    content: 'Normal';\n  }\n  .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='1']::before,\n  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='1']::before {\n    content: 'Heading 1';\n  }\n  .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='2']::before,\n  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='2']::before {\n    content: 'Heading 2';\n  }\n  .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='3']::before,\n  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='3']::before {\n    content: 'Heading 3';\n  }\n  .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='4']::before,\n  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='4']::before {\n    content: 'Heading 4';\n  }\n  .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='5']::before,\n  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='5']::before {\n    content: 'Heading 5';\n  }\n  .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='6']::before,\n  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='6']::before {\n    content: 'Heading 6';\n  }\n  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='1']::before {\n    font-size: 2em;\n  }\n  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='2']::before {\n    font-size: 1.5em;\n  }\n  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='3']::before {\n    font-size: 1.17em;\n  }\n  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='4']::before {\n    font-size: 1em;\n  }\n  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='5']::before {\n    font-size: 0.83em;\n  }\n  .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='6']::before {\n    font-size: 0.67em;\n  }\n  .ql-snow .ql-picker.ql-font {\n    width: 108px;\n  }\n  .ql-snow .ql-picker.ql-font .ql-picker-label::before,\n  .ql-snow .ql-picker.ql-font .ql-picker-item::before {\n    content: 'Sans Serif';\n  }\n  .ql-snow .ql-picker.ql-font .ql-picker-label[data-value='serif']::before,\n  .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='serif']::before {\n    content: 'Serif';\n  }\n  .ql-snow .ql-picker.ql-font .ql-picker-label[data-value='monospace']::before,\n  .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='monospace']::before {\n    content: 'Monospace';\n  }\n  .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='serif']::before {\n    font-family: Georgia, Times New Roman, serif;\n  }\n  .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='monospace']::before {\n    font-family: Monaco, Courier New, monospace;\n  }\n  .ql-snow .ql-picker.ql-size {\n    width: 98px;\n  }\n  .ql-snow .ql-picker.ql-size .ql-picker-label::before,\n  .ql-snow .ql-picker.ql-size .ql-picker-item::before {\n    content: 'Normal';\n  }\n  .ql-snow .ql-picker.ql-size .ql-picker-label[data-value='small']::before,\n  .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='small']::before {\n    content: 'Small';\n  }\n  .ql-snow .ql-picker.ql-size .ql-picker-label[data-value='large']::before,\n  .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='large']::before {\n    content: 'Large';\n  }\n  .ql-snow .ql-picker.ql-size .ql-picker-label[data-value='huge']::before,\n  .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='huge']::before {\n    content: 'Huge';\n  }\n  .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='small']::before {\n    font-size: 10px;\n  }\n  .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='large']::before {\n    font-size: 18px;\n  }\n  .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='huge']::before {\n    font-size: 32px;\n  }\n  .ql-snow .ql-color-picker.ql-background .ql-picker-item {\n    background-color: #fff;\n  }\n  .ql-snow .ql-color-picker.ql-color .ql-picker-item {\n    background-color: #000;\n  }\n  .ql-toolbar.ql-snow {\n    border: 1px solid #ccc;\n    box-sizing: border-box;\n    font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;\n    padding: 8px;\n  }\n  .ql-toolbar.ql-snow .ql-formats {\n    margin-right: 15px;\n  }\n  .ql-toolbar.ql-snow .ql-picker-label {\n    border: 1px solid transparent;\n  }\n  .ql-toolbar.ql-snow .ql-picker-options {\n    border: 1px solid transparent;\n    box-shadow: rgba(0, 0, 0, 0.2) 0 2px 8px;\n  }\n  .ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-label {\n    border-color: #ccc;\n  }\n  .ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options {\n    border-color: #ccc;\n  }\n  .ql-toolbar.ql-snow .ql-color-picker .ql-picker-item.ql-selected,\n  .ql-toolbar.ql-snow .ql-color-picker .ql-picker-item:hover {\n    border-color: #000;\n  }\n  .ql-toolbar.ql-snow + .ql-container.ql-snow {\n    border-top: 0px;\n  }\n  .ql-snow .ql-tooltip {\n    background-color: #fff;\n    border: 1px solid #ccc;\n    box-shadow: 0px 0px 5px #ddd;\n    color: #444;\n    padding: 5px 12px;\n    white-space: nowrap;\n  }\n  .ql-snow .ql-tooltip::before {\n    content: 'Visit URL:';\n    line-height: 26px;\n    margin-right: 8px;\n  }\n  .ql-snow .ql-tooltip input[type='text'] {\n    display: none;\n    border: 1px solid #ccc;\n    font-size: 13px;\n    height: 26px;\n    margin: 0px;\n    padding: 3px 5px;\n    width: 170px;\n  }\n  .ql-snow .ql-tooltip a.ql-preview {\n    display: inline-block;\n    max-width: 200px;\n    overflow-x: hidden;\n    text-overflow: ellipsis;\n    vertical-align: top;\n  }\n  .ql-snow .ql-tooltip a.ql-action::after {\n    border-right: 1px solid #ccc;\n    content: 'Edit';\n    margin-left: 16px;\n    padding-right: 8px;\n  }\n  .ql-snow .ql-tooltip a.ql-remove::before {\n    content: 'Remove';\n    margin-left: 8px;\n  }\n  .ql-snow .ql-tooltip a {\n    line-height: 26px;\n  }\n  .ql-snow .ql-tooltip.ql-editing a.ql-preview,\n  .ql-snow .ql-tooltip.ql-editing a.ql-remove {\n    display: none;\n  }\n  .ql-snow .ql-tooltip.ql-editing input[type='text'] {\n    display: inline-block;\n  }\n  .ql-snow .ql-tooltip.ql-editing a.ql-action::after {\n    border-right: 0px;\n    content: 'Save';\n    padding-right: 0px;\n  }\n  .ql-snow .ql-tooltip[data-mode='link']::before {\n    content: 'Enter link:';\n  }\n  .ql-snow .ql-tooltip[data-mode='formula']::before {\n    content: 'Enter formula:';\n  }\n  .ql-snow .ql-tooltip[data-mode='video']::before {\n    content: 'Enter video:';\n  }\n  .ql-snow a {\n    color: #06c;\n  }\n  .ql-container.ql-snow {\n    border: 1px solid #ccc;\n  }\n`;\n","import { css } from 'lit-element';\nexport const editorCss = css`\n  :root {\n    --elemento-padding-factor: 20;\n  }\n\n  #lx-eta-box {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: 30px calc(100% - 30px);\n    height: 100%;\n  }\n\n  #lx-eta-box .ql-toolbar.ql-snow {\n    border: 1px solid #ccc;\n    box-sizing: border-box;\n    padding: 3px 10px 3px 10px;\n  }\n\n  #lx-eta-box .ql-snow.ql-toolbar button,\n  .ql-snow .ql-toolbar button {\n    height: 20px !important;\n    padding: 0px !important;\n    width: 24px !important;\n    margin: 0px !important;\n  }\n\n  #lx-eta-barra-ferramenta button:focus {\n    outline: 0;\n    border: 0px solid #f1f1f1;\n    -webkit-box-shadow: 0px;\n    box-shadow: none;\n  }\n\n  #lx-eta-barra-ferramenta .lx-eta-ql-button {\n    font-size: 1.1em;\n    color: #444444;\n  }\n\n  .lx-eta-rebate-180-graus {\n    -moz-transform: scaleX(-1);\n    -o-transform: scaleX(-1);\n    -webkit-transform: scaleX(-1);\n    transform: scaleX(-1);\n  }\n\n  #lx-eta-editor {\n    overflow-y: auto;\n  }\n\n  #lx-eta-editor .ql-editor {\n    font-family: sans-serif, 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n      'Noto Color Emoji';\n    font-size: 1rem;\n    line-height: 1.42;\n    color: #646260;\n    text-transform: none !important;\n    padding: 5px;\n  }\n\n  #lx-eta-editor .ql-editor *:focus {\n    outline: 0;\n    border: 0px solid #f1f1f1;\n    -webkit-box-shadow: 0px;\n    box-shadow: none;\n  }\n\n  #lx-eta-editor .ql-editor label:before {\n    content: attr(data-rotulo) ' ';\n  }\n\n  #toast-msg {\n    padding: 1em;\n    font-size: 1.1em;\n  }\n\n  .lx-eta-dropbtn {\n    background-color: #ffffff;\n    color: #444444;\n    width: 26px;\n    font-weight: bold;\n    vertical-align: middle;\n    border: none;\n    cursor: pointer;\n    text-align: center;\n  }\n\n  .lx-eta-dropdown {\n    position: relative;\n    display: inline-block;\n  }\n\n  .lx-eta-dropdown-content {\n    display: none;\n    position: absolute;\n    background-color: #f9f9f9;\n    min-width: 160px;\n    box-shadow: 0px 4px 4px 4px rgba(0, 0, 0, 0.25);\n    z-index: 1;\n  }\n\n  .lx-eta-dropdown-content div {\n    color: black;\n    padding: 5px 16px;\n    text-decoration: none;\n    display: block;\n    white-space: nowrap;\n    font-weight: normal !important;\n    text-align: left;\n    cursor: pointer;\n  }\n\n  .lx-eta-dropdown-content div:hover {\n    background-color: #e5e5e5;\n  }\n\n  .lx-eta-dropdown:hover .lx-eta-dropdown-content {\n    display: block;\n  }\n\n  .lx-eta-dropdown:hover .lx-eta-dropbtn {\n    background-color: #e1e1e1;\n  }\n\n  .lx-eta-btn-disp-atual {\n    margin-left: 10px !important;\n    text-decoration: underline;\n  }\n\n  .lx-eta-btn-desfazer {\n    margin-left: 10px !important;\n  }\n\n  .icon-undo-redo {\n    width: 19px;\n    height: 16px !important;\n  }\n\n  .icon-undo-redo:hover {\n    fill: #0066cc;\n  }\n\n  .lx-eta-dropdown-content-right {\n    right: 0;\n  }\n\n  .ql-snow .ql-hidden {\n    display: none;\n  }\n\n  .ql-snow .ql-tooltip::before {\n    content: 'Acesse a norma:';\n  }\n\n  .ql-snow .ql-tooltip a.ql-action::after {\n    display: none;\n  }\n\n  .ql-snow .ql-tooltip a.ql-remove::before {\n    display: none;\n  }\n\n  .ql-snow .ql-tooltip a.ql-preview {\n    max-width: 300px;\n  }\n\n  .btn--artigoOndeCouber {\n  }\n\n  .container__linha {\n    display: flex;\n    width: 100%;\n  }\n\n  .container__linha--reverse {\n    flex-direction: row-reverse;\n  }\n\n  .container__texto {\n    flex: 1;\n  }\n\n  .container__menu {\n    width: 30px;\n    vertical-align: top;\n    text-align: center;\n  }\n\n  .container__elemento--padrao {\n    width: 100%;\n    min-height: 26px;\n    border: 1px solid #ffffff;\n    line-height: 1.42;\n    margin: 0px 2px 0px 5px !important;\n  }\n\n  .container__elemento--articulacao {\n    width: 100%;\n    min-height: 1px;\n    line-height: 0.42;\n    margin: 1px;\n  }\n\n  .agrupador {\n    text-align: center;\n  }\n\n  .texto__rotulo {\n    color: black;\n    font-weight: 600;\n    font-size: 1rem;\n  }\n\n  .texto__rotulo--agrupador {\n    display: block;\n  }\n\n  .texto__rotulo--padrao {\n    float: left;\n    margin-right: 10px;\n  }\n\n  .dispositivo--adicionado {\n    color: green;\n  }\n\n  .dispositivo--modificado {\n    color: blue;\n  }\n\n  .dispositivo--suprimido {\n    color: red;\n  }\n\n  .texto--suprimido {\n    text-decoration: line-through;\n  }\n\n  .container__elemento--ativo {\n    border-color: #24d421;\n  }\n\n  .mensagem {\n    font-size: 0.8em;\n    font-weight: 600;\n  }\n\n  .mensagem--info {\n    color: green;\n  }\n\n  .mensagem--warning {\n    color: #ff5733;\n  }\n\n  .mensagem--danger {\n    color: red;\n  }\n\n  lexml-eta-help {\n    float: right;\n  }\n\n  #lx-eta-buffer {\n    display: none;\n    height: 0px;\n  }\n`;\n","import { customElement, LitElement } from 'lit-element';\nimport { html, TemplateResult } from 'lit-html';\nimport { connect } from 'pwa-helpers';\nimport { DescricaoSituacao } from '../../model/dispositivo/situacao';\nimport { Elemento } from '../../model/elemento';\nimport { ElementoAction, getAcao, isAcaoMenu } from '../../model/lexml/acao';\nimport { adicionarElementoAction } from '../../model/lexml/acao/adicionarElementoAction';\nimport { atualizarElementoAction } from '../../model/lexml/acao/atualizarElementoAction';\nimport { atualizarReferenciaElementoAction } from '../../model/lexml/acao/atualizarReferenciaElementoAction';\nimport { atualizarTextoElementoAction } from '../../model/lexml/acao/atualizarTextoElementoAction';\nimport { elementoSelecionadoAction } from '../../model/lexml/acao/elementoSelecionadoAction';\nimport { moverElementoAbaixoAction } from '../../model/lexml/acao/moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from '../../model/lexml/acao/moverElementoAcimaAction';\nimport { redoAction } from '../../model/lexml/acao/redoAction';\nimport { removerElementoAction } from '../../model/lexml/acao/removerElementoAction';\nimport { renumerarElementoAction } from '../../model/lexml/acao/renumerarElementoAction';\nimport { shiftTabAction } from '../../model/lexml/acao/shiftTabAction';\nimport { tabAction } from '../../model/lexml/acao/tabAction';\nimport { transformarAction } from '../../model/lexml/acao/transformarAction';\nimport { UndoAction } from '../../model/lexml/acao/undoAction';\nimport { validarArticulacaAction } from '../../model/lexml/acao/validarArticulacaoAction';\nimport { validarElementoAction } from '../../model/lexml/acao/validarElementoAction';\nimport { getNomeExtenso } from '../../model/lexml/documento/urnUtil';\nimport { podeRenumerar, rotuloParaEdicao } from '../../model/lexml/numeracao/numeracaoUtil';\nimport { TipoDispositivo } from '../../model/lexml/tipo/tipoDispositivo';\nimport { StateEvent, StateType } from '../../redux/state';\nimport { rootStore } from '../../redux/store';\nimport { EtaBlotConteudo } from '../../util/eta-quill/eta-blot-conteudo';\nimport { EtaBlotMenu } from '../../util/eta-quill/eta-blot-menu';\nimport { EtaBlotMenuBotao } from '../../util/eta-quill/eta-blot-menu-botao';\nimport { EtaBlotMenuConteudo } from '../../util/eta-quill/eta-blot-menu-conteudo';\nimport { EtaBlotMenuItem } from '../../util/eta-quill/eta-blot-menu-item';\nimport { EtaBlotRotulo } from '../../util/eta-quill/eta-blot-rotulo';\nimport { EtaContainerTable } from '../../util/eta-quill/eta-container-table';\nimport { Keyboard } from '../../util/eta-quill/eta-keyboard';\nimport { EtaQuill } from '../../util/eta-quill/eta-quill';\nimport { EtaQuillUtil } from '../../util/eta-quill/eta-quill-util';\nimport { Subscription } from '../../util/observable';\nimport { informarNormaDialog } from './informarNormaDialog';\n\nimport { unsafeHTML } from 'lit-html/directives/unsafe-html';\nimport { quillSnowCss } from '../../assets/css/quill.snow.css';\nimport { editorCss } from '../../assets/css/editor.css';\n\n@customElement('lexml-eta-editor')\nexport class EditorComponent extends connect(rootStore)(LitElement) {\n  private _quill?: EtaQuill;\n  private get quill(): EtaQuill {\n    return this._quill as EtaQuill;\n  }\n\n  private inscricoes: Subscription[] = [];\n  private timerOnChange?: any;\n\n  constructor() {\n    super();\n    this.tabIndex = -1;\n  }\n\n  createRenderRoot(): LitElement {\n    return this;\n  }\n\n  async firstUpdated(): Promise<void> {\n    this.inicializar(this.configEditor());\n  }\n\n  stateChanged(state: any): void {\n    if (!this.quill) {\n      this.quillNaoInicializado(state);\n      return;\n    }\n    this.quill!.undoEstruturaVazio = (state.elementoReducer.past ?? []).length === 0;\n    this.quill!.redoEstruturaVazio = (state.elementoReducer.future ?? []).length === 0;\n\n    if (state.elementoReducer.ui) {\n      if (state.elementoReducer.ui.message) {\n        this.alertar(state.elementoReducer.ui.message.descricao);\n      } else {\n        this.processarStateEvents(state.elementoReducer.ui.events);\n      }\n    }\n  }\n\n  disconnectedCallback(): void {\n    this.inscricoes.forEach((i: Subscription) => i.cancel());\n    this.removeEventListener('ontextchange', (event: any) => console.log(event));\n    this.destroiQuill();\n    super.disconnectedCallback();\n  }\n\n  private buildCss(): string {\n    return `\n      <style>\n        ${quillSnowCss.cssText}\n      </style>\n      <style>\n        ${editorCss.cssText}\n      </style>\n    `;\n  }\n\n  render(): TemplateResult {\n    return html`\n      ${unsafeHTML(this.buildCss())}\n      <div id=\"lx-eta-box\">\n        <div id=\"lx-eta-barra-ferramenta\">\n          <button class=\"ql-bold\" title=\"Negrito (Ctrl+b)\"></button>\n          <button class=\"ql-italic\" title=\"Itlico (Ctrl+i)\"></button>\n          <button class=\"ql-script\" value=\"sub\" title=\"Subscrito\"></button>\n          <button class=\"ql-script\" value=\"super\" title=\"Sobrescrito\"></button>\n\n          <button @click=${this.onClickUndo} class=\"lx-eta-ql-button lx-eta-btn-desfazer\" title=\"Desfazer (Ctrl+Z)\">\n            <svg class=\"icon-undo-redo\" id=\"undo\" viewBox=\"0 0 512 512\">\n              <path\n                d=\"M488,256c0,123.4-100.5,223.9-223.9,223.9c-48.8,0-95.2-15.6-134.2-44.9c-14.1-10.6-17-30.7-6.4-44.8 c10.6-14.1,30.6-16.9,44.8-6.4c27.8,20.9,61,31.9,95.9,31.9c88.1,0,159.8-71.7,159.8-159.8S352.3,96.2,264.2,96.2 c-37.5,0-73.1,13.5-101.3,36.6L208,178c17,17,5,46.1-19.1,46.1H43.2c-10.6,0-19.2-8.6-19.2-19.2V59C24,35,53.1,23,70.1,40l47.6,47.6 c40.2-34.9,91.8-55.5,146.4-55.5C387.5,32.1,488,132.6,488,256z\"\n              />\n            </svg>\n          </button>\n          <button @click=${this.onClickRedo} class=\"lx-eta-ql-button\" title=\"Refazer (Ctrl+y)\">\n            <svg class=\"icon-undo-redo lx-eta-rebate-180-graus\" id=\"redo\" viewBox=\"0 0 512 512\">\n              <path\n                d=\"M488,256c0,123.4-100.5,223.9-223.9,223.9c-48.8,0-95.2-15.6-134.2-44.9c-14.1-10.6-17-30.7-6.4-44.8 c10.6-14.1,30.6-16.9,44.8-6.4c27.8,20.9,61,31.9,95.9,31.9c88.1,0,159.8-71.7,159.8-159.8S352.3,96.2,264.2,96.2 c-37.5,0-73.1,13.5-101.3,36.6L208,178c17,17,5,46.1-19.1,46.1H43.2c-10.6,0-19.2-8.6-19.2-19.2V59C24,35,53.1,23,70.1,40l47.6,47.6 c40.2-34.9,91.8-55.5,146.4-55.5C387.5,32.1,488,132.6,488,256z\"\n              />\n            </svg>\n          </button>\n\n          <button @click=${this.onClickDispositivoAtual} class=\"lx-eta-ql-button lx-eta-btn-disp-atual\" title=\"Localizar dispositivo atual\">D</button>\n          <input type=\"button\" @click=${this.artigoOndeCouber} class=\"${'ql-hidden'} btn--artigoOndeCouber\" value=\"Propor artigo onde couber\" title=\"Artigo onde couber\"></input>\n          <lexml-eta-help></lexml-eta-help>\n        </div>\n        <div id=\"lx-eta-editor\"></div>\n      </div>\n      <elix-toast id=\"toast-alerta\" duration=\"3000\">\n        <div id=\"toast-msg\"></div>\n      </elix-toast>\n      <div id=\"lx-eta-buffer\"><p></p></div>\n    `;\n  }\n\n  private formatacaoAlterada(): void {\n    const texto = document.getSelection()?.toString();\n    if (texto) {\n      this.agendarEmissaoEventoOnChange('toolbar');\n    }\n  }\n\n  private onClickUndo(): void {\n    this.quill.undo();\n  }\n\n  private onClickRedo(): void {\n    this.quill.redo();\n  }\n\n  private onClickDispositivoAtual(): void {\n    this.quill.setSelection(this.quill.getIndex(this.quill.linhaAtual.blotConteudo), 0, Quill.sources.SILENT);\n    this.quill.focus();\n  }\n\n  private artigoOndeCouber(): void {\n    //rootStore.dispatch(validarArticulacaAction.execute());\n  }\n\n  private onSelectionChange: SelectionChangeHandler = (range: RangeStatic, oldRange: RangeStatic, source: Sources): void => {\n    if (range?.length === 0 && source === Quill.sources.USER) {\n      this.ajustarLinkParaNorma();\n    }\n  };\n\n  private ajustarLinkParaNorma(): void {\n    const linkTooltip = document.querySelector('a.ql-preview');\n    const href = linkTooltip?.getAttribute('href');\n    if (href?.startsWith('urn')) {\n      const url = 'https://normas.leg.br/?urn=' + href;\n      linkTooltip!.setAttribute('href', url);\n      linkTooltip!.innerHTML = getNomeExtenso(href);\n    }\n  }\n\n  private onBold(value: any): void {\n    if (this.quill.keyboard.verificarOperacaoTecladoPermitida()) {\n      this.quill.format('bold', value);\n      this.formatacaoAlterada();\n    }\n  }\n\n  private onItalic(value: any): void {\n    if (this.quill.keyboard.verificarOperacaoTecladoPermitida()) {\n      this.quill.format('italic', value);\n      this.formatacaoAlterada();\n    }\n  }\n\n  private onScript(value: any): void {\n    if (this.quill.keyboard.verificarOperacaoTecladoPermitida()) {\n      this.quill.format('script', value);\n      this.formatacaoAlterada();\n    }\n  }\n\n  private onOperacaoInvalida(): void {\n    this.alertar('Operao no permitida.');\n  }\n\n  private isDesmembramento(textoAnterior: string, textoLinhaAtual: string, textoNovaLinha: string): boolean {\n    return (textoLinhaAtual + textoNovaLinha).localeCompare(textoAnterior) !== 0;\n  }\n\n  private adicionarElemento(range: RangeStatic): void {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    const blotConteudo: EtaBlotConteudo = linha.blotConteudo;\n\n    const indexInicio: number = this.quill.inicioConteudoAtual ?? 0;\n    const indexFim: number = indexInicio + blotConteudo!.tamanho ?? 0;\n    let textoLinha = '';\n    let textoNovaLinha = '';\n\n    if (range.index === indexInicio) {\n      textoLinha = '';\n      textoNovaLinha = blotConteudo.html;\n    } else if (range.index === indexFim) {\n      textoLinha = blotConteudo.html;\n      textoNovaLinha = '';\n    } else {\n      const tamanhoNovaLinha: number = indexFim - range.index;\n      textoLinha = this.quill.getConteudoHtmlParteLinha(blotConteudo, 0, blotConteudo.tamanho - tamanhoNovaLinha);\n      textoNovaLinha = this.quill.getConteudoHtmlParteLinha(blotConteudo, range.index - indexInicio, tamanhoNovaLinha);\n    }\n    const elemento: Elemento = this.criarElemento(linha.uuid, linha.lexmlId, linha.tipo, textoLinha, linha.numero, linha.hierarquia);\n\n    if (this.isDesmembramento(blotConteudo.htmlAnt, textoLinha, textoNovaLinha)) {\n      const elemento: Elemento = this.criarElemento(linha.uuid, linha.lexmlId, linha.tipo, textoLinha + textoNovaLinha, linha.numero, linha.hierarquia);\n      rootStore.dispatch(atualizarTextoElementoAction.execute(elemento));\n    }\n    rootStore.dispatch(adicionarElementoAction.execute(elemento, textoNovaLinha));\n  }\n\n  private async renumerarElemento(): Promise<any> {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    const atual = linha.blotConteudo.html;\n    const elemento: Elemento = this.criarElemento(linha!.uuid ?? 0, linha.lexmlId, linha!.tipo ?? '', '', linha.numero, linha.hierarquia, linha.descricaoSituacao);\n\n    if (!podeRenumerar(elemento)) {\n      return;\n    }\n\n    const dialogElem = document.createElement('elix-dialog');\n\n    const content = document.createRange().createContextualFragment(`\n      <div style=\"padding: 15px; text-align: center\">\n        <div>\n          Numerao do dispositivo:\n          <input type=\"text\" style=\"width: 60px\">\n        </div>\n        <div class=\"erro\" style=\"margin-top: 10px; color: red; display: none;\"></div>\n        <div style=\"margin-top: 10px;\">\n          <button>Ok</button>\n          <button>Cancelar</button>\n        </div>\n      </div>\n    `);\n\n    const input = <HTMLInputElement>content.querySelector('input');\n    input.value = `${rotuloParaEdicao(linha.blotRotulo.rotulo)}`;\n\n    const botoes = content.querySelectorAll('button');\n    const ok = botoes[0];\n    const cancelar = botoes[1];\n\n    const erro = <HTMLDivElement>content.querySelector('.erro');\n\n    ok.onclick = (): void => {\n      this.quill.focus();\n      (<any>dialogElem).close();\n      if (elemento.conteudo?.texto !== atual) {\n        elemento.conteudo!.texto = atual;\n        rootStore.dispatch(atualizarElementoAction.execute(elemento));\n      }\n\n      rootStore.dispatch(renumerarElementoAction.execute(elemento, input.value.trim()));\n    };\n\n    cancelar.onclick = (): void => {\n      this.quill.focus();\n      (<any>dialogElem).close();\n    };\n\n    const validar = (): string => {\n      const numeracao = input.value;\n      if (/^\\s*$/.test(numeracao)) {\n        return 'A numerao no pode ser vazia.';\n      }\n      return '';\n    };\n\n    input.onkeyup = (evt: KeyboardEvent): void => {\n      const msgErro = validar();\n      erro.innerText = msgErro;\n      erro.style.display = msgErro ? 'block' : 'none';\n      ok.disabled = Boolean(msgErro);\n      if (!ok.disabled) {\n        if (evt.key === 'Enter') {\n          ok.click();\n        }\n      }\n    };\n\n    dialogElem.appendChild(content);\n\n    ok.disabled = Boolean(validar());\n\n    await (<any>dialogElem).open();\n  }\n\n  private removerElemento(): void {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    const mensagem = `Voc realmente deseja remover o dispositivo ${linha.blotRotulo.rotulo}`;\n\n    this.confirmar(mensagem, ['Sim', 'No'], (event: CustomEvent) => {\n      const closeResult: any = event.detail.closeResult;\n      const choice: string = closeResult && closeResult.choice;\n      if (choice === 'Sim') {\n        const elemento: Elemento = this.criarElemento(linha!.uuid ?? 0, linha.lexmlId, linha!.tipo ?? '', '', linha.numero, linha.hierarquia);\n        rootStore.dispatch(removerElementoAction.execute(elemento));\n      }\n      this.quill.focus();\n    });\n  }\n\n  private moverElemento(ev: KeyboardEvent): void {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    const blotConteudo: EtaBlotConteudo = linha.blotConteudo;\n    const textoLinha = blotConteudo.html;\n\n    const elemento: Elemento = this.criarElemento(linha.uuid, linha.lexmlId, linha.tipo, textoLinha, linha.numero, linha.hierarquia);\n\n    if (ev.key === 'ArrowUp') {\n      rootStore.dispatch(moverElementoAcimaAction.execute(elemento));\n    } else if (ev.key === 'ArrowDown') {\n      rootStore.dispatch(moverElementoAbaixoAction.execute(elemento));\n    }\n  }\n\n  private transformarElemento(ev: KeyboardEvent): void {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    const blotConteudo: EtaBlotConteudo = linha.blotConteudo;\n    const textoLinha = blotConteudo.html;\n\n    const elemento: Elemento = this.criarElemento(linha.uuid, linha.lexmlId, linha.tipo, textoLinha, linha.numero, linha.hierarquia);\n\n    if (ev.key.toLowerCase() === 'a') {\n      rootStore.dispatch(transformarAction(elemento, TipoDispositivo.artigo.name!));\n    } else if (ev.key.toLowerCase() === 'l') {\n      rootStore.dispatch(transformarAction(elemento, TipoDispositivo.alinea.name!));\n    } else if (ev.key.toLowerCase() === 'n') {\n      rootStore.dispatch(transformarAction(elemento, TipoDispositivo.inciso.name!));\n    } else if (ev.key.toLowerCase() === 'o') {\n      rootStore.dispatch(transformarAction(elemento, TipoDispositivo.omissis.name!));\n    } else if (ev.key.toLowerCase() === 'p') {\n      rootStore.dispatch(transformarAction(elemento, TipoDispositivo.paragrafo.name!));\n    } else if (ev.key.toLowerCase() === 't') {\n      rootStore.dispatch(transformarAction(elemento, TipoDispositivo.item.name!));\n    } else if (Keyboard.keys.TAB) {\n      rootStore.dispatch(ev.shiftKey ? shiftTabAction(elemento) : tabAction(elemento));\n    }\n  }\n\n  private elementoSelecionado(uuid: number): void {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    const elemento: Elemento = this.criarElemento(uuid, linha.lexmlId, linha.tipo ?? '', '', linha.numero, linha.hierarquia);\n    rootStore.dispatch(elementoSelecionadoAction.execute(elemento));\n    this.quill.processandoMudancaLinha = false;\n  }\n\n  private undoRedoEstrutura(tipo: string): void {\n    //\n    // TODO: Chamar action para undo ou redo - estrutura.\n    //\n    if (tipo === 'undo') {\n      rootStore.dispatch(UndoAction());\n    } else {\n      rootStore.dispatch(redoAction());\n    }\n  }\n\n  private processarStateEvents(events: StateEvent[]): void {\n    events?.forEach((event: StateEvent): void => {\n      switch (event.stateType) {\n        case StateType.DocumentoCarregado:\n          this.destroiQuill();\n          this.inicializar(this.configEditor());\n          this.carregarArticulacao(event.elementos ?? []);\n          break;\n\n        case StateType.InformarNorma:\n          informarNormaDialog(event.elementos![0], this.quill, rootStore, atualizarReferenciaElementoAction);\n          break;\n\n        case StateType.ElementoIncluido:\n          this.inserirNovoElementoNoQuill(event.elementos![0], event.referencia as Elemento, true);\n          this.inserirNovosElementosNoQuill(event);\n          break;\n\n        case StateType.ElementoModificado:\n        case StateType.ElementoRestaurado:\n          this.atualizarQuill(event);\n          this.montarMenuContexto(event);\n          break;\n\n        case StateType.ElementoSuprimido:\n          this.atualizarSituacao(event);\n          this.montarMenuContexto(event);\n          break;\n\n        case StateType.ElementoRemovido:\n          this.removerLinhaQuill(event);\n          break;\n\n        case StateType.ElementoRenumerado:\n          this.renumerarQuill(event);\n          break;\n\n        case StateType.ElementoValidado:\n          this.atualizarMensagemQuill(event);\n          break;\n\n        case StateType.ElementoSelecionado:\n          this.montarMenuContexto(event);\n          this.atualizarMensagemQuill(event);\n          break;\n\n        case StateType.ElementoMarcado:\n          this.marcarLinha(event);\n          break;\n\n        case StateType.SituacaoElementoModificada:\n          this.atualizarSituacao(event);\n          this.montarMenuContexto(event);\n          break;\n      }\n      this.quill.limparHistory();\n    });\n\n    // Os eventos que esto no array abaixo devem emitir um custom event \"ontextchange\"\n    const eventosQueDevemEmitirTextChange = [\n      StateType.ElementoModificado,\n      StateType.ElementoSuprimido,\n      StateType.ElementoRestaurado,\n      StateType.ElementoIncluido,\n      StateType.ElementoRemovido,\n      StateType.ElementoRenumerado,\n    ];\n\n    const eventosFiltrados = events?.filter(ev => eventosQueDevemEmitirTextChange.includes(ev.stateType)).map(ev => ev.stateType);\n\n    if (eventosFiltrados?.length) {\n      this.agendarEmissaoEventoOnChange('stateEvents');\n    }\n  }\n\n  private marcarLinha(event: StateEvent): void {\n    this.quill.desmarcarLinhaAtual(this.quill.linhaAtual);\n    const elemento = event.elementos![0];\n    const linha = this.quill.getLinha(elemento.uuid!)!;\n    const index = this.quill.getIndex(linha.blotConteudo);\n    this.quill.setIndex(index, Quill.sources.SILENT);\n    this.quill.atualizarLinhaCorrente(linha);\n    this.elementoSelecionado(linha.uuid);\n  }\n\n  private processarEscolhaMenu(itemMenu: string): void {\n    if (itemMenu === 'Remover dispositivo') {\n      this.removerElemento();\n    } else if (itemMenu === renumerarElementoAction.descricao) {\n      this.renumerarElemento();\n    } else {\n      const linha: EtaContainerTable = this.quill.linhaAtual;\n      const elemento: Elemento = this.criarElemento(linha!.uuid ?? 0, linha.lexmlId, linha!.tipo ?? '', '', linha.numero, linha.hierarquia);\n      elemento.conteudo!.texto = linha.blotConteudo.html ?? '';\n      rootStore.dispatch(getAcao(itemMenu).execute(elemento));\n    }\n  }\n\n  private inserirNovoElementoNoQuill(elemento: Elemento, referencia: Elemento, selecionarLinha?: boolean): void {\n    const linhaRef: EtaContainerTable | undefined = this.quill.getLinha(referencia.uuid!);\n\n    if (linhaRef) {\n      const novaLinha: EtaContainerTable = EtaQuillUtil.criarContainerLinha(elemento);\n\n      if (linhaRef.next) {\n        novaLinha.insertInto(this.quill.scroll, linhaRef.next);\n      } else {\n        novaLinha.insertInto(this.quill.scroll);\n      }\n\n      if (this.quill.linhaAtual.blotConteudo.html !== '' || novaLinha.blotConteudo.html === '') {\n        if (selecionarLinha) {\n          this.quill.desmarcarLinhaAtual(this.quill.linhaAtual);\n          this.quill.marcarLinhaAtual(novaLinha);\n          try {\n            this.quill.setIndex(this.quill.getIndex(novaLinha.blotConteudo), Quill.sources.SILENT);\n          } catch (e) {\n            console.log(e);\n          }\n        }\n      } else {\n        this.quill.linhaAtual.blotConteudo.htmlAnt = this.quill.linhaAtual.blotConteudo.html;\n      }\n      this.quill.linhaAtual.descricaoSituacao = elemento.descricaoSituacao;\n      this.quill.linhaAtual.setEstilo(elemento.descricaoSituacao!);\n    }\n  }\n\n  private inserirNovosElementosNoQuill(event: StateEvent, selecionarLinha?: boolean): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n\n    for (let i = 1; i < elementos.length; i++) {\n      this.inserirNovoElementoNoQuill(elementos[i], elementos[i - 1], selecionarLinha);\n    }\n  }\n\n  private atualizarSituacao(event: StateEvent): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n    let linha: EtaContainerTable | undefined;\n\n    elementos.map((elemento: Elemento) => {\n      linha = this.quill.getLinha(elemento.uuid ?? 0, linha);\n      if (linha) {\n        if (elemento.descricaoSituacao !== linha.descricaoSituacao) {\n          linha.descricaoSituacao = elemento.descricaoSituacao;\n          linha.setEstilo(elemento.descricaoSituacao!);\n        }\n      }\n    });\n  }\n\n  private atualizarQuill(event: StateEvent): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n    let linha: EtaContainerTable | undefined;\n\n    elementos.map((elemento: Elemento) => {\n      linha = this.quill.getLinha(elemento.uuid ?? 0, linha);\n      if (linha) {\n        let nivelAlerado = false;\n\n        if (elemento.editavel !== linha.editavel) {\n          linha.editavel = elemento.editavel;\n        }\n\n        if (elemento.rotulo !== linha.blotRotulo.html) {\n          linha.numero = elemento.numero ?? '';\n          linha.blotRotulo.format(EtaBlotRotulo.blotName, elemento.rotulo);\n        }\n\n        if (elemento.nivel !== linha.nivel) {\n          linha.nivel = elemento.nivel;\n          linha.format(EtaContainerTable.blotName, elemento);\n          nivelAlerado = true;\n        }\n\n        if (elemento.agrupador !== linha.agrupador) {\n          linha.agrupador = elemento.agrupador;\n          linha.blotRotulo.format(EtaBlotRotulo.formatoStyle, elemento);\n          if (!nivelAlerado) {\n            linha.format(EtaContainerTable.blotName, elemento);\n          }\n        }\n\n        if (elemento.conteudo?.texto !== linha.blotConteudo.html) {\n          linha.blotConteudo.html = elemento.conteudo?.texto ?? '';\n        }\n\n        if (elemento.descricaoSituacao !== linha.descricaoSituacao) {\n          linha.descricaoSituacao = elemento.descricaoSituacao;\n          linha.setEstilo(elemento.descricaoSituacao!);\n        }\n\n        if (linha.children.length === 2) {\n          linha.children.tail.remove();\n        }\n\n        if (elemento.mensagens && elemento.mensagens.length > 0) {\n          EtaQuillUtil.criarContainerMensagens(elemento).insertInto(linha);\n        }\n      }\n    });\n  }\n\n  private removerLinhaQuill(event: StateEvent): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n    let linha: EtaContainerTable | undefined;\n\n    elementos.forEach((elemento: Elemento) => {\n      linha = this.quill.getLinha(elemento.uuid ?? 0, linha);\n      if (linha) {\n        linha.remove();\n      }\n    });\n    const linhaCursor: EtaContainerTable = this.quill.getLine(this.quill.getSelection(true).index)[0].linha;\n    const index: number = this.quill.getIndex(linhaCursor.blotConteudo);\n\n    this.quill.setSelection(index, 0, Quill.sources.SILENT);\n    this.quill.marcarLinhaAtual(linhaCursor);\n  }\n\n  private renumerarQuill(event: StateEvent): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n    let linha: EtaContainerTable | undefined;\n\n    elementos.map((elemento: Elemento) => {\n      linha = this.quill.getLinha(elemento.uuid ?? 0, linha);\n      if (linha) {\n        linha.blotRotulo.format(EtaBlotRotulo.blotName, elemento.rotulo);\n      }\n    });\n  }\n\n  private atualizarMensagemQuill(event: StateEvent): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n    let linha: EtaContainerTable | undefined;\n\n    elementos.map((elemento: Elemento) => {\n      linha = this.quill.getLinha(elemento.uuid ?? 0, linha);\n\n      if (linha) {\n        if (linha?.children.length === 2) {\n          linha.children.tail.remove();\n        }\n\n        if (elemento.mensagens && elemento.mensagens.length > 0) {\n          EtaQuillUtil.criarContainerMensagens(elemento).insertInto(linha);\n        }\n      }\n    });\n  }\n\n  private montarMenuContexto(event: StateEvent): void {\n    const elemento: Elemento = event.elementos ? event.elementos[0] : new Elemento();\n    const acoesMenu: ElementoAction[] = (elemento?.acoesPossiveis ?? []).filter((acao: ElementoAction) => isAcaoMenu(acao));\n\n    if (acoesMenu.length > 0) {\n      if (!this.quill.linhaAtual) {\n        this.marcarLinha(event);\n      }\n      const blotMenu: EtaBlotMenu = new EtaBlotMenu();\n      const blotMenuConteudo: EtaBlotMenuConteudo = new EtaBlotMenuConteudo(this.quill.linhaAtual.containerDireito.alinhamentoMenu);\n      const callback: any = (itemMenu: string) => {\n        this.processarEscolhaMenu(itemMenu);\n        this.quill.focus();\n      };\n\n      new EtaBlotMenuBotao().insertInto(blotMenu);\n\n      acoesMenu.forEach((acao: ElementoAction) => {\n        new EtaBlotMenuItem(acao, callback).insertInto(blotMenuConteudo);\n      });\n      blotMenuConteudo.insertInto(blotMenu);\n\n      this.quill.linhaAtual.blotContainerDireito.remove();\n      blotMenu.insertInto(this.quill.linhaAtual.containerDireito);\n    }\n  }\n\n  private criarElemento(uuid: number, lexmlId: string, tipo: string, html: string, numero: string, hierarquia: any, descricaoSituacao?: string): Elemento {\n    const elemento: Elemento = new Elemento();\n    elemento.uuid = uuid;\n    elemento.lexmlId = lexmlId;\n    elemento.tipo = tipo;\n    elemento.numero = numero;\n    elemento.conteudo = { texto: html };\n    elemento.hierarquia = hierarquia;\n    elemento.descricaoSituacao = descricaoSituacao;\n    return elemento;\n  }\n\n  private inicializar(op: QuillOptionsStatic): void {\n    const editorHtml: HTMLElement = this.getHtmlElement('lx-eta-editor');\n    const bufferHtml: HTMLElement = this.getHtmlElement('lx-eta-buffer');\n\n    EtaQuill.configurar();\n    this._quill = new EtaQuill(editorHtml, bufferHtml, op);\n    this.quill.on('selection-change', this.onSelectionChange);\n    this.inscricoes.push(this.quill.keyboard.operacaoTecladoInvalida.subscribe(this.onOperacaoInvalida.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.adicionaElementoTeclaEnter.subscribe(this.adicionarElemento.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.moveElemento.subscribe(this.moverElemento.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.removeElemento.subscribe(this.removerElemento.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.renumeraElemento.subscribe(this.renumerarElemento.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.transformaElemento.subscribe(this.transformarElemento.bind(this)));\n    this.inscricoes.push(this.quill.undoRedoEstrutura.subscribe(this.undoRedoEstrutura.bind(this)));\n    this.inscricoes.push(this.quill.elementoSelecionado.subscribe(this.elementoSelecionado.bind(this)));\n\n    this.inscricoes.push(this.quill.observableSelectionChange.subscribe(this.atualizarTextoElemento.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.onChange.subscribe(this.agendarEmissaoEventoOnChange.bind(this)));\n    this.inscricoes.push(this.quill.clipboard.onChange.subscribe(this.agendarEmissaoEventoOnChange.bind(this)));\n  }\n\n  private agendarEmissaoEventoOnChange(origemEvento: string): void {\n    clearTimeout(this.timerOnChange);\n    this.timerOnChange = setTimeout(() => this.emitirEventoOnChange(origemEvento), 1000);\n  }\n\n  private atualizarTextoElemento(linhaAtual: EtaContainerTable): void {\n    if (linhaAtual?.blotConteudo?.alterado) {\n      const elemento: Elemento = this.criarElemento(\n        linhaAtual.uuid,\n        linhaAtual.lexmlId,\n        linhaAtual.tipo,\n        linhaAtual.blotConteudo?.html ?? '',\n        linhaAtual.numero,\n        linhaAtual.hierarquia\n      );\n      rootStore.dispatch(atualizarTextoElementoAction.execute(elemento));\n    }\n  }\n\n  private emitirEventoOnChange(origemEvento: string): void {\n    this.atualizarTextoElemento(this.quill.linhaAtual);\n\n    this.dispatchEvent(\n      new CustomEvent('onchange', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          origemEvento,\n        },\n      })\n    );\n  }\n\n  private carregarArticulacao(elementos: Elemento[]): void {\n    setTimeout(() => {\n      this.quill.getLine(0)[0].remove();\n      elementos.map((elemento: Elemento) => {\n        const etaContainerTable = EtaQuillUtil.criarContainerLinha(elemento);\n        etaContainerTable.insertInto(this.quill.scroll);\n        elemento.tipo === TipoDispositivo.generico.tipo && rootStore.dispatch(validarElementoAction.execute(elemento));\n        elemento.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO && etaContainerTable.setEstilo(DescricaoSituacao.DISPOSITIVO_ADICIONADO);\n      });\n      this.quill.limparHistory();\n      setTimeout(() => {\n        const el = this.quill.getLinha(elementos![1].uuid!);\n        this.quill.setSelection(this.quill.getIndex(el?.blotConteudo), 0, Quill.sources.USER);\n      }, 0);\n      rootStore.dispatch(validarArticulacaAction.execute());\n    }, 0);\n  }\n\n  private configEditor(): QuillOptionsStatic {\n    return {\n      modules: {\n        toolbar: {\n          container: '#lx-eta-barra-ferramenta',\n          handlers: {\n            bold: this.onBold.bind(this),\n            italic: this.onItalic.bind(this),\n            script: this.onScript.bind(this),\n          },\n        },\n        history: {\n          delay: 0,\n          maxStack: 500,\n          userOnly: true,\n        },\n      },\n      theme: 'snow',\n    };\n  }\n\n  private async confirmar(mensagem: string, botoes: string[], callback: any): Promise<void> {\n    const dialog: any = document.createElement('elix-alert-dialog');\n\n    dialog.textContent = mensagem;\n    dialog.choices = botoes;\n    dialog.addEventListener('close', callback);\n    await dialog.open();\n  }\n\n  private alertar(mensagem: string): void {\n    const toast: any = this.querySelector('#toast-alerta');\n    const elmHtml: HTMLElement = this.querySelector('#toast-msg') as HTMLElement;\n\n    elmHtml.innerHTML = mensagem;\n    toast.fromEdge = 'top';\n    toast.open();\n  }\n\n  private quillNaoInicializado(state: any): void {\n    let elementos: Elemento[] = [];\n    const verificarQuillInicializado: any = (elementos: Elemento[]): void => {\n      setTimeout(() => {\n        if (!this.quill) {\n          verificarQuillInicializado(elementos);\n        } else if (elementos.length > 0) {\n          this.carregarArticulacao(elementos);\n        }\n      }, 70);\n    };\n\n    if (state.elementoReducer.ui) {\n      const event: StateEvent | undefined = state.elementoReducer.ui.events.find((event: StateEvent): boolean => event.stateType === StateType.DocumentoCarregado);\n      elementos = event!.elementos ?? [];\n    }\n    verificarQuillInicializado(elementos);\n  }\n\n  private getHtmlElement(id: string): HTMLElement {\n    return this.querySelector(`#${id}`) as HTMLElement;\n  }\n\n  private destroiQuill(): void {\n    this.getHtmlElement('lx-eta-editor')!.innerHTML = '';\n    this.getHtmlElement('lx-eta-buffer')!.innerHTML = '';\n    if (this.quill) {\n      this.quill.off('selection-change', this.onSelectionChange);\n      this.quill.destroi();\n    }\n    this._quill = undefined;\n  }\n}\n","import { css, customElement, html, LitElement, property, TemplateResult } from 'lit-element';\nimport { unsafeHTML } from 'lit-html/directives/unsafe-html';\nimport { Elemento } from '../../model/elemento';\n\n@customElement('lexml-eta-elemento')\nexport class ElementoComponent extends LitElement {\n  @property({ type: Object }) elemento!: Elemento;\n\n  static styles = css`\n    :host {\n      display: block;\n      padding: 0px;\n      margin: 0px;\n      font-family: sans-serif, 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n        'Noto Color Emoji';\n      font-size: 1.1em;\n      line-height: 1.2;\n      color: #646260;\n      text-transform: none !important;\n    }\n\n    p.rotulo {\n      margin: 5px !important;\n      color: #373634;\n      font-weight: 600;\n      text-align: center;\n    }\n\n    p.texto {\n      margin: 5px !important;\n    }\n\n    p.texto-agrupador {\n      margin: 5px !important;\n      text-align: center;\n    }\n\n    span.rotulo {\n      color: #373634;\n      font-weight: 600;\n    }\n  `;\n\n  render(): TemplateResult {\n    return html`\n      <div class=\"box\">\n        <div class=\"conteudo\">${this.elemento.agrupador ? this.htmlAgrupador() : this.htmlDispositivo()}</div>\n      </div>\n    `;\n  }\n\n  private htmlAgrupador = (): TemplateResult =>\n    html`<p class=\"rotulo\">${this.elemento.rotulo}</p>\n      <p class=\"texto-agrupador\">${unsafeHTML(this.elemento?.conteudo?.texto ?? '')}</p>`;\n\n  private htmlDispositivo = (): TemplateResult =>\n    html`\n      <p class=\"texto\" style=\"${`padding-left: ${this.elemento.nivel * 20}px;`}\">\n        <span class=\"rotulo\">${this.elemento.rotulo}</span>\n        ${unsafeHTML(this.elemento?.conteudo?.texto ?? '')}\n      </p>\n    `;\n}\n","import { css, customElement, html, LitElement, TemplateResult } from 'lit-element';\n\n@customElement('lexml-eta-help')\nexport class HelpComponent extends LitElement {\n  static styles = css`\n    :host {\n      position: relative;\n      display: inline-block;\n    }\n\n    .lx-eta-helpbtn {\n      background-color: #ffffff;\n      color: black;\n      width: 26px;\n      height: 22px;\n      font-size: 1.1em;\n      font-weight: bold;\n      vertical-align: middle;\n      border: none;\n      cursor: pointer;\n      text-align: center;\n    }\n\n    .lx-eta-help-content {\n      display: none;\n      position: absolute;\n      right: 0;\n      background-color: #f9f9f9;\n      box-shadow: 0px 4px 4px 4px rgba(0, 0, 0, 0.25);\n      z-index: 1;\n      width: calc(100vw - 30px);\n      max-width: 400px;\n    }\n\n    .lx-eta-help-content div {\n      color: black;\n      padding: 2px 5px;\n      text-decoration: none;\n      display: block;\n      white-space: wrap;\n      font-size: 0.8em;\n      font-weight: normal !important;\n      text-align: left;\n    }\n\n    .lx-eta-help:hover .lx-eta-help-content {\n      display: block;\n    }\n  `;\n\n  render(): TemplateResult {\n    return html`\n      <div class=\"lx-eta-help\">\n        <button class=\"lx-eta-helpbtn\">&quest;</button>\n        <div class=\"lx-eta-help-content\">\n          <div><b>ctrl-shift-a</b>&nbsp;-&nbsp;Seleciona o texto do dispositivo atual</div>\n          <div><b>ctrl-a</b>&nbsp;-&nbsp;Seleciona todos os dispositivos da articulao</div>\n          <div><b>ctrl-home</b>&nbsp;-&nbsp;Vai para o primeiro dispositivo</div>\n          <div><b>ctrl-end</b>&nbsp;-&nbsp;Vai para o ltimo dispositivo</div>\n          <div><b>ctrl-&uarr;</b>&nbsp;-&nbsp;Move o dispositivo acima</div>\n          <div><b>ctrl-&darr;</b>&nbsp;-&nbsp;Move o dispositivo abaixo</div>\n          <hr></hr>\n          <div><b>enter</b>&nbsp;-&nbsp;Finaliza a edio do dispositivo atual e cria um novo</div>\n          <div><b>ctrl-d</b>&nbsp;-&nbsp;Remove dispositivo atual</div>\n          <div><b>ctrl-z</b>&nbsp;-&nbsp;Desfaz ultima alterao</div>\n          <div><b>ctrl-y</b>&nbsp;-&nbsp;Refaz alterao</div>\n          <hr></hr>\n          <div><b>ctrl-alt-A</b>&nbsp;-&nbsp;Transforma o dispositivo em artigo</div>\n          <div><b>ctrl-alt-L</b>&nbsp;-&nbsp;Transforma o dispositivo em alnea</div>\n          <div><b>ctrl-alt-N</b>&nbsp;-&nbsp;Transforma o dispositivo em inciso</div>\n          <div><b>ctrl-alt-O</b>&nbsp;-&nbsp;Transforma o dispositivo em omissis</div>\n          <div><b>ctrl-alt-P</b>&nbsp;-&nbsp;Transforma o dispositivo em pargrafo</div>\n          <div><b>ctrl-alt-T</b>&nbsp;-&nbsp;Transforma o dispositivo em item</div>\n          <div><b>tab</b>&nbsp;-&nbsp;Indenta para a direita o dispositivo, transformando-o no tipo mais provvel</div>\n          <div><b>shift-tab</b>&nbsp;-&nbsp;Recua o dispositivo para a esquerda, transformando-o no tipo mais provvel</div>\n          <hr></hr>\n          <div><b>ctrl-alt-R</b>&nbsp;-&nbsp;Renumera o dispositivo</div>\n        </div>\n      </div>\n    `;\n  }\n}\n","import { Articulacao, Artigo, Dispositivo } from '../model/dispositivo/dispositivo';\nimport { TEXTO_OMISSIS } from '../model/lexml/conteudo/textoOmissis';\nimport { getDispositivoPosterior, percorreHierarquiaDispositivos } from '../model/lexml/hierarquia/hierarquiaUtil';\nimport { DescricaoSituacao } from './../model/dispositivo/situacao';\nimport { isAgrupador, isArtigo, isCaput, isOmissis, isParagrafo } from './../model/dispositivo/tipo';\nimport { isArticulacaoAlteracao, isDispositivoAlteracao } from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { SequenciaRangeDispositivos } from './sequencia-range-dispositivos';\n\nexport class CmdEmdUtil {\n  static getDispositivosNaoOriginais(articulacao: Articulacao): Dispositivo[] {\n    const ret: Dispositivo[] = [];\n    percorreHierarquiaDispositivos(articulacao, d => {\n      if (d.pai && d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n        ret.push(d);\n      }\n    });\n    return ret;\n  }\n\n  static getDispositivosComando(dispositivosEmenda: Dispositivo[]): Dispositivo[] {\n    const dispositivos = new Array<Dispositivo>();\n\n    for (const d of dispositivosEmenda) {\n      if (d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL || isDispositivoAlteracao(d) || isArticulacaoAlteracao(d)) {\n        continue;\n      }\n      const dispositivoAfetado = CmdEmdUtil.getDispositivoAfetado(d);\n      if (dispositivoAfetado && !dispositivos.includes(dispositivoAfetado)) {\n        dispositivos.push(dispositivoAfetado);\n      }\n    }\n\n    return dispositivos;\n  }\n\n  private static getDispositivoAfetado(d: Dispositivo): Dispositivo {\n    if (isAgrupador(d) || isArtigo(d)) {\n      return d;\n    }\n\n    const pai = d.pai!;\n\n    // Verifica alterao integral de caput\n    if (isCaput(pai) && pai.pai!.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n      if (pai.filhos.find(f => f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL)) {\n        return d;\n      }\n      return pai.pai!;\n    }\n\n    // Se o pai for uma alterao integral\n    if (CmdEmdUtil.isAlteracaoIntegral(pai)) {\n      // Chama recursivamente para o pai\n      return CmdEmdUtil.getDispositivoAfetado(pai);\n    }\n\n    return d;\n  }\n\n  // private static Dispositivo getDispositivoAfetadoEmAlteracao(final Dispositivo d) {\n\n  //     if (d.isTipo(Omissis.class)) {\n  //         if (CmdEmdUtil.isOmissisAdjacenteADispositivoDeEmenda(d)) {\n  //             return null;\n  //         }\n  //     }\n  //     else if (d.isSituacao(DispositivoNovo.class) && CmdEmdUtil.isTextoOmitido(d)) {\n  //         return null;\n  //     }\n\n  //     Dispositivo pai = d.getPai();\n  //     // Se o pai for uma alterao integral\n  //     if (CmdEmdUtil.isAlteracaoIntegralEmAlteracao(pai)) {\n  //         // Chama recursivamente para o pai\n  //         return CmdEmdUtil.getDispositivoAfetado(pai);\n  //     }\n\n  //     return d;\n  // }\n\n  // Considero texto omitido do Artigo se o seu caput tiver o texto omitido.\n  static isTextoOmitido(d: Dispositivo): boolean {\n    return isOmissis(d) || d.texto.startsWith(TEXTO_OMISSIS) || (isAgrupador(d) && !!(d as Artigo).caput?.texto.startsWith(TEXTO_OMISSIS));\n  }\n\n  static isAlteracaoIntegral(d: Dispositivo): boolean {\n    if (d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n      return false;\n    }\n\n    if (d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO || d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n      return true;\n    }\n\n    if (!d.filhos.length) {\n      if (isArtigo(d)) {\n        return d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL;\n      }\n      return true;\n    }\n\n    for (const filho of d.filhos) {\n      if (!CmdEmdUtil.isAlteracaoIntegral(filho)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  // private static boolean isAlteracaoIntegralEmAlteracao(final Dispositivo d) {\n\n  //     if (d.isTipo(Alteracao.class)) {\n  //         return false;\n  //     }\n\n  //     return d.isSituacao(DispositivoNovo.class) && !CmdEmdUtil.isTextoOmitido(d);\n  // }\n\n  // public static Map<Dispositivo , Map> getArvoreDispositivos(final List<Dispositivo> dispositivos) {\n\n  //     Map<Dispositivo , Map> mapa = new HashMap<Dispositivo , Map>();\n\n  //     if (dispositivos == null || dispositivos.isEmpty()) {\n  //         return mapa;\n  //     }\n\n  //     for (Dispositivo dispositivo : dispositivos) {\n  //         EmendaUtil.atualizaMapa(dispositivo, mapa);\n  //     }\n\n  //     return mapa;\n  // }\n\n  // public static Map<Dispositivo , Map> getArvoreDispositivosDeAlteracaoDeNorma(final List<Dispositivo> dispositivos) {\n\n  //     Map<Dispositivo , Map> mapa = new HashMap<Dispositivo , Map>();\n\n  //     if (dispositivos == null || dispositivos.isEmpty()) {\n  //         return mapa;\n  //     }\n\n  //     for (Dispositivo dispositivo : dispositivos) {\n  //         EmendaUtil.atualizaMapaDeAlteracaoDeNorma(dispositivo, mapa);\n  //     }\n\n  //     return mapa;\n  // }\n\n  // public static List<Dispositivo> filtraDispositivosModificados(final List<Dispositivo> dispositivos) {\n\n  //     List<Dispositivo> ret = new ArrayList<Dispositivo>();\n\n  //     // No caso de dispositivo modificado pode ocorrer o caso de alterao integral de artigo,\n  //     // onde o prprio artigo no est marcado como modificado.\n  //     for (Dispositivo d : dispositivos) {\n  //         if (d.isSituacao(DispositivoModificado.class) || d.isSituacao(DispositivoOriginal.class)\n  //             && CmdEmdUtil.isAlteracaoIntegral(d)) {\n  //             ret.add(d);\n  //         }\n  //     }\n\n  //     return ret;\n  // }\n\n  static isSequenciasPlural(sequencias: SequenciaRangeDispositivos[]): boolean {\n    const qtdSequencias = sequencias.length;\n    if (qtdSequencias === 0) {\n      return false;\n    }\n    return qtdSequencias > 1 || CmdEmdUtil.isSequenciaPlural(sequencias[0]);\n  }\n\n  static isSequenciaPlural(sequencia: SequenciaRangeDispositivos): boolean {\n    const qtdRanges = sequencia.getQuantidadeRanges();\n    if (qtdRanges === 0) {\n      return false;\n    }\n    return qtdRanges > 1 || sequencia.getPrimeiroRange().getQuantidadeDispositivos() > 1;\n  }\n\n  static getProximoAgrupador(disp: Dispositivo): Dispositivo | undefined {\n    let ret: Dispositivo | undefined = disp;\n    do {\n      ret = getDispositivoPosterior(ret as Dispositivo);\n    } while (ret && !isAgrupador(ret));\n    return ret;\n  }\n\n  static getDispositivoIrmaoPosterior(dispositivo: Dispositivo): Dispositivo | undefined {\n    if (isArtigo(dispositivo) || isAgrupador(dispositivo)) {\n      return this.getArtigoPosterior(dispositivo);\n    }\n    if (!this.isUltimoDispositivoDoMesmoTipo(dispositivo)) {\n      const pai = dispositivo.pai as Dispositivo;\n      const index = pai.filhos.indexOf(dispositivo) + 1;\n      return pai.filhos[index];\n    }\n    return undefined;\n  }\n\n  private static getArtigoPosterior(dispositivo: Dispositivo): Dispositivo | undefined {\n    const pai = dispositivo.pai as Dispositivo;\n    if (pai.filhos.length) {\n      const iFilho = pai.filhos.indexOf(dispositivo);\n      for (let i = iFilho + 1; i < pai.filhos.length; i++) {\n        const d = pai.filhos[i];\n        if (isArtigo(d)) {\n          return d;\n        } else if (isAgrupador(d)) {\n          const atual = this.buscaProximoArtigo(d);\n          if (atual) {\n            return atual;\n          }\n        }\n      }\n      if (pai.pai) {\n        return this.getArtigoPosterior(pai);\n      }\n    }\n\n    return undefined;\n  }\n\n  private static buscaProximoArtigo(dispositivo: Dispositivo): Dispositivo | undefined {\n    const filhos = dispositivo.filhos;\n    for (const d of filhos) {\n      if (isArtigo(d)) {\n        return d;\n      }\n      if (isAgrupador(d)) {\n        return this.buscaProximoArtigo(d);\n      }\n    }\n    return undefined;\n  }\n\n  public static isUltimoDispositivoDoMesmoTipo(dispositivo: Dispositivo): boolean {\n    if (!dispositivo.pai) {\n      return true;\n    }\n    const pai = dispositivo.pai as Dispositivo;\n    const index = pai.filhos.indexOf(dispositivo);\n    if (pai.filhos.length === index + 1) {\n      return true;\n    }\n    if (pai.filhos[index + 1].tipo === dispositivo.tipo) {\n      return false;\n    }\n    return true;\n  }\n\n  static getFilhosEstiloLexML(d: Dispositivo): Dispositivo[] {\n    if (isArtigo(d)) {\n      const artigo = d as Artigo;\n      return [artigo.caput as Dispositivo, ...artigo.filhos.filter(f => isParagrafo(f))];\n    }\n    return d.filhos;\n  }\n\n  static getDispositivoAnteriorDireto(d: Dispositivo): Dispositivo {\n    const pai = d.pai as Dispositivo;\n    const irmaos = this.getFilhosEstiloLexML(pai);\n    const i = irmaos.indexOf(d);\n    if (i > 0) {\n      d = irmaos[i - 1];\n    } else {\n      return pai;\n    }\n    while (d.filhos.length) {\n      d = d.filhos[d.filhos.length - 1];\n    }\n    return d;\n  }\n\n  static getDispositivoPosteriorDireto(d: Dispositivo): Dispositivo | undefined {\n    // primeiro o primeiro filho ou o primeiro irmo do pai (recursivamente)\n    const filhos = this.getFilhosEstiloLexML(d);\n    if (filhos.length) {\n      return filhos[0];\n    } else {\n      return this.getProximoIrmaoRecursivo(d);\n    }\n  }\n\n  private static getProximoIrmaoRecursivo(d: Dispositivo | undefined): Dispositivo | undefined {\n    if (!d) return;\n\n    const irmao = getDispositivoPosterior(d);\n\n    if (irmao) {\n      return irmao;\n    } else {\n      const pai = d.pai;\n      return pai ? undefined : this.getProximoIrmaoRecursivo(pai);\n    }\n  }\n\n  // /**\n  //  * Retorna rtulo do dispositivo gerado pelo numerador. No confia no rtulo informado pelo\n  //  * dispositivo original.\n  //  */\n  // public static String getRotulo(final Dispositivo d) {\n  //     return d.getNumeradorDispositivo().getRotulo(d);\n  // }\n\n  // public static String getRotuloPais(Dispositivo disp) {\n  //     StringBuilder sb = new StringBuilder();\n\n  //     Dispositivo pai;\n  //     while (disp != null && !disp.isTipo(Artigo.class)) {\n  //         pai = disp.getPai();\n\n  //         sb.append(pai.getGenero().getPronomePossessivoSingular());\n  //         sb.append(pai.getNumeracaoComRotuloParaComandoEmenda());\n\n  //         disp = pai;\n  //     }\n\n  //     return sb.toString();\n  // }\n\n  // public static List<Dispositivo> getDispositivosNaAlteracaoParaComando(final Dispositivo alteracao) {\n\n  //     List<Dispositivo> dispositivosAlterados = DispositivoUtil.filtraFilhos(alteracao, new DispositivoFilter() {\n\n  //         @Override\n  //         public boolean accept(final Dispositivo d) {\n  //             return !d.isSituacao(DispositivoOriginal.class);\n  //         }\n\n  //     });\n\n  //     List<Dispositivo> dispositivos = new ArrayList<Dispositivo>(dispositivosAlterados.size());\n\n  //     for (Dispositivo d : dispositivosAlterados) {\n  //         Dispositivo dispositivoAfetado = CmdEmdUtil.getDispositivoAfetadoEmAlteracao(d);\n  //         if (dispositivoAfetado != null && !dispositivos.contains(dispositivoAfetado)) {\n  //             dispositivos.add(dispositivoAfetado);\n  //         }\n  //     }\n\n  //     Collections.sort(dispositivos);\n\n  //     return dispositivos;\n  // }\n\n  // public static boolean isOmissisAdjacenteADispositivoDeEmenda(final Dispositivo d) {\n  //     if (!d.isTipo(Omissis.class)) {\n  //         return false;\n  //     }\n  //     Dispositivo anterior = d.getDispositivoAnteriorDireto();\n  //     if (anterior != null && !anterior.isSituacao(DispositivoOriginal.class)) {\n  //         return true;\n  //     }\n  //     Dispositivo posterior = d.getDispositivoPosteriorDireto();\n  //     if (posterior != null && !posterior.isSituacao(DispositivoOriginal.class)) {\n  //         return true;\n  //     }\n  //     return false;\n  // }\n\n  static isMesmoTipoParaComandoEmenda(d1: Dispositivo, d2: Dispositivo): boolean {\n    if (d1.tipo !== d2.tipo) {\n      return false;\n    }\n    if (isArtigo(d1) && CmdEmdUtil.isAlteracaoIntegral(d1) !== CmdEmdUtil.isAlteracaoIntegral(d2)) {\n      return false;\n    }\n    return true;\n  }\n\n  static getTextoParaCitacao(d: Dispositivo): string {\n    return d.texto.replace(/^\\s*<p>\\s*/i, '').replace(/\\s*<\\/p>\\s*$/i, '');\n  }\n}\n","export class ObjetoUtil {\n  static arrayIgual(valor1: unknown, valor2: unknown): boolean {\n    if (!Array.isArray(valor1) || !Array.isArray(valor2)) {\n      return false;\n    }\n    const v1: unknown[] = valor1 as unknown[];\n    const v2: unknown[] = valor2 as unknown[];\n\n    if (v1.length !== v2.length) {\n      return false;\n    }\n\n    for (let i = 0; i < v1.length; i++) {\n      if (!ObjetoUtil.igual(v1[i], v2[1])) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  static igual(valor1: unknown, valor2: unknown): boolean {\n    if (typeof valor1 !== typeof valor2) {\n      return false;\n    }\n\n    if (Array.isArray(valor1) || Array.isArray(valor2)) {\n      return ObjetoUtil.arrayIgual(valor1, valor2);\n    }\n\n    if (typeof valor1 !== 'object') {\n      return valor1 === valor2;\n    }\n\n    if (valor1 === valor2) {\n      return true;\n    }\n    const chaves1: string[] = Object.keys(valor1 as any);\n    const chaves2: string[] = Object.keys(valor2 as any);\n\n    if (chaves1.length !== chaves2.length) {\n      return false;\n    }\n\n    for (let i = 0; i < chaves1.length; i++) {\n      if (!ObjetoUtil.igual(chaves1[i], chaves2[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n\nexport const removeFromArray = (array: any[], element: any): void => {\n  array.splice(array.indexOf(element), 1);\n};\n","import { isArtigo } from '../model/dispositivo/tipo';\nimport { StringBuilder } from '../util/string-util';\nimport { Dispositivo } from './../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from './../model/dispositivo/situacao';\nimport { getDispositivoPosteriorMesmoTipo } from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { TipoDispositivo } from './../model/lexml/tipo/tipoDispositivo';\nimport { CmdEmdUtil } from './comando-emenda-util';\n\nexport class RangeDispositivos {\n  private dispositivos: Dispositivo[] = [];\n\n  constructor(disp?: Dispositivo) {\n    if (disp) {\n      this.add(disp);\n    }\n  }\n\n  isSituacao(descricaoSituacao: string): boolean {\n    return !!this.dispositivos.length && this.dispositivos[0].situacao.descricaoSituacao === descricaoSituacao;\n  }\n\n  isTipo(nomeTipo: string): boolean {\n    return !!this.dispositivos.length && this.dispositivos[0].tipo === nomeTipo;\n  }\n\n  add(dispositivo: Dispositivo): boolean {\n    if (!this.podeAdicionarAoRange(dispositivo)) {\n      return false;\n    }\n    this.dispositivos.push(dispositivo);\n    return true;\n  }\n\n  addInicio(dispositivo: Dispositivo): void {\n    this.dispositivos.splice(0, 0, dispositivo);\n  }\n\n  isUltimo(dispositivo: Dispositivo): boolean {\n    return this.dispositivos.indexOf(dispositivo) === this.dispositivos.length - 1;\n  }\n\n  getPrimeiro(): Dispositivo {\n    return this.dispositivos[0];\n  }\n\n  getUltimo(): Dispositivo {\n    return this.dispositivos[this.dispositivos.length - 1];\n  }\n\n  getQuantidadeDispositivos(): number {\n    return this.dispositivos.length;\n  }\n\n  getAnterior(i: number): Dispositivo | undefined {\n    if (i < 1) {\n      return undefined;\n    }\n    return this.dispositivos[i - 1];\n  }\n\n  getNumeracaoParaComandoEmenda(): string {\n    let numeracao = this.dispositivos[0].getNumeracaoParaComandoEmenda();\n    if (this.dispositivos.length > 1) {\n      numeracao += ' a ' + this.getUltimo().getNumeracaoParaComandoEmenda();\n    }\n    return numeracao;\n  }\n\n  print(comando: StringBuilder, ranges: RangeDispositivos[]): void {\n    if (this.isRotuloNecessario(ranges)) {\n      this.printRotuloInicio(comando, ranges);\n    } else {\n      comando.append(this.dispositivos[0].getNumeracaoParaComandoEmenda());\n    }\n\n    this.printSeparadorProximoDispositivo(comando, ranges);\n\n    this.printRotuloFimSeExistir(comando);\n  }\n\n  private printRotuloFimSeExistir(comando: StringBuilder): void {\n    if (this.dispositivos.length >= 2) {\n      comando.append(this.dispositivos[this.dispositivos.length - 1].getNumeracaoParaComandoEmenda());\n    }\n  }\n\n  private printSeparadorProximoDispositivo(comando: StringBuilder, ranges: RangeDispositivos[]): void {\n    const rangePosterior = this.getRangeDispositivosPosterior(ranges);\n\n    if (this.dispositivos.length >= 3) {\n      comando.append(' a ');\n    } else if (this.dispositivos.length === 2 && !rangePosterior) {\n      comando.append(' e ');\n    } else if (this.dispositivos.length > 1 && this.dispositivos.length < 3 && rangePosterior) {\n      comando.append(', ');\n    }\n  }\n\n  private printRotuloInicio(comando: StringBuilder, range: RangeDispositivos[]): void {\n    const rangePosterior = this.getRangeDispositivosPosterior(range);\n    if ((this.hasApenasUmDispositivo() && !rangePosterior) || (rangePosterior && !this.isMesmoTipoSituacao(rangePosterior))) {\n      comando.append(this.getRotuloCompletoSingular(this.dispositivos[0]));\n    } else {\n      comando.append(this.getRotuloCompletoPlural(this.dispositivos[0]));\n    }\n  }\n\n  private isMesmoTipoSituacao(range: RangeDispositivos): boolean {\n    return range.isTipo(this.dispositivos[0].tipo) && range.isSituacao(this.dispositivos[0].situacao.descricaoSituacao);\n  }\n\n  private hasApenasUmDispositivo(): boolean {\n    return this.dispositivos.length === 1;\n  }\n\n  private isRotuloNecessario(ranges: RangeDispositivos[]): boolean {\n    const anterior = this.getRangeDispositivosAnterior(ranges);\n    if (!anterior || !anterior.isMesmoTipoSituacao(this)) {\n      return true;\n    }\n    if (this.isSituacao(DescricaoSituacao.DISPOSITIVO_ADICIONADO) && !this.isMesmoPai(anterior)) {\n      return true;\n    }\n    return false;\n  }\n\n  private isMesmoPai(range: RangeDispositivos): boolean {\n    return this.getPrimeiro().pai === range.getPrimeiro().pai;\n  }\n\n  private getRotuloCompletoSingular(dispositivo: Dispositivo): string {\n    const sb = new StringBuilder();\n\n    if (dispositivo.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n      sb.append(dispositivo.artigoDefinidoSingular);\n    } else {\n      sb.append(' ');\n    }\n    const rotulo = dispositivo.getNumeracaoComRotuloParaComandoEmenda();\n\n    if (rotulo.endsWith('.')) {\n      sb.append(rotulo.substring(0, rotulo.indexOf('.')));\n    } else {\n      sb.append(rotulo);\n    }\n\n    return sb.toString();\n  }\n\n  private getRotuloCompletoPlural(dispositivo: Dispositivo): string {\n    const sb = new StringBuilder();\n    if (dispositivo.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n      sb.append(dispositivo.artigoDefinidoPlural);\n    } else {\n      sb.append(' ');\n    }\n\n    sb.append(this.getTipoDispositivoPlural(dispositivo));\n    sb.append(' ');\n    sb.append(dispositivo.getNumeracaoParaComandoEmenda());\n\n    return sb.toString();\n  }\n\n  private getRangeDispositivosAnterior(ranges: RangeDispositivos[]): RangeDispositivos | undefined {\n    const pos = ranges.indexOf(this);\n    if (pos > 0) {\n      return ranges[pos - 1];\n    }\n    return undefined;\n  }\n\n  private getRangeDispositivosPosterior(ranges: RangeDispositivos[]): RangeDispositivos | undefined {\n    if (ranges.length === 1) {\n      return undefined;\n    }\n    const pos = ranges.indexOf(this);\n    if (pos >= 0 && pos < ranges.length - 1) {\n      return ranges[pos + 1];\n    }\n    return undefined;\n  }\n\n  private getTipoDispositivoPlural(dispositivo: Dispositivo): string {\n    if (dispositivo.tipo === TipoDispositivo.artigo.tipo) {\n      return 'arts.';\n    } else if (dispositivo.tipo === TipoDispositivo.paragrafo.tipo) {\n      return '';\n    }\n\n    return dispositivo.descricaoPlural?.toLocaleLowerCase() + '';\n  }\n\n  private podeAdicionarAoRange(atual: Dispositivo): boolean {\n    if (this.isVazio()) {\n      return true;\n    }\n\n    const ultimo = this.getUltimo();\n\n    // Mesmo tipo\n    if (ultimo.tipo !== atual.tipo) {\n      return false;\n    }\n\n    // Mesma situao\n    if (ultimo.situacao.descricaoSituacao !== atual.situacao.descricaoSituacao) {\n      return false;\n    }\n\n    // Devem ter o mesmo pai, exceto no caso de artigo\n    if (!isArtigo(atual) && atual.pai !== ultimo.pai) {\n      return false;\n    }\n\n    // Atual segue o ltimo\n    if (getDispositivoPosteriorMesmoTipo(ultimo) !== atual) {\n      return false;\n    }\n\n    // Ambos (ltimo e atual) apresentam alterao integral\n    // ou ambos no apresentam alterao integral\n    if (CmdEmdUtil.isAlteracaoIntegral(ultimo) !== CmdEmdUtil.isAlteracaoIntegral(atual)) {\n      return false;\n    }\n\n    return true;\n  }\n\n  isVazio(): boolean {\n    return this.dispositivos.length === 0;\n  }\n\n  toString(): string {\n    const sb = new StringBuilder();\n    this.dispositivos.forEach(d => {\n      sb.append(' ');\n      sb.append('' + d.rotulo);\n    });\n    return sb.toString();\n  }\n\n  getDispositivos(): Dispositivo[] {\n    return this.dispositivos;\n  }\n\n  getDispositivo(i: number): Dispositivo {\n    return this.dispositivos[i];\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { removeFromArray } from '../util/objeto-util';\nimport { StringBuilder } from '../util/string-util';\nimport { RangeDispositivos } from './range-dispositivos';\n\nexport class SequenciaRangeDispositivos {\n  private ranges = new Array<RangeDispositivos>();\n  localizarArtigoEmAgrupador = false;\n  informarCaputDoDispositivo = false;\n\n  isVazio(): boolean {\n    return this.ranges.length === 0;\n  }\n\n  add(range: RangeDispositivos): void {\n    this.ranges.push(range);\n  }\n\n  addInicio(range: RangeDispositivos): void {\n    this.ranges.unshift(range);\n  }\n\n  getQuantidadeRanges(): number {\n    return this.ranges.length;\n  }\n\n  getPrimeiroRange(): RangeDispositivos {\n    return this.ranges[0];\n  }\n\n  getPrimeiroDispositivo(): Dispositivo {\n    return this.ranges[0].getPrimeiro();\n  }\n\n  getUltimoDispositivo(): Dispositivo {\n    return this.ranges[this.ranges.length - 1].getUltimo();\n  }\n\n  getRanges(): RangeDispositivos[] {\n    return this.ranges;\n  }\n\n  setRanges(ranges: RangeDispositivos[]): void {\n    this.ranges = ranges;\n  }\n\n  getRange(i: number): RangeDispositivos {\n    return this.ranges[i];\n  }\n\n  getTextoListaDeDispositivos(): string {\n    const sb = new StringBuilder();\n    const qtdRanges = this.ranges.length;\n    let posRange = 1;\n    for (const range of this.ranges) {\n      // Conector\n      if (posRange > 1) {\n        if (posRange === qtdRanges) {\n          sb.append(' e ');\n        } else {\n          sb.append(', ');\n        }\n      }\n\n      sb.append(range.getNumeracaoParaComandoEmenda());\n\n      posRange++;\n    }\n    return sb.toString();\n  }\n\n  static debug(sequencias: SequenciaRangeDispositivos[]): void {\n    const sb = new StringBuilder();\n    for (const sequencia of sequencias) {\n      sb.append('seq: ' + sequencia);\n    }\n    console.log(sb);\n  }\n\n  toString(): string {\n    return this.ranges.toString();\n  }\n\n  remove(nr: RangeDispositivos): void {\n    removeFromArray(this.ranges, nr);\n  }\n}\n","import { CmdEmdUtil } from './comando-emenda-util';\nimport { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { getDispositivoPosterior } from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { TipoDispositivo } from './../model/lexml/tipo/tipoDispositivo';\nimport { removeFromArray } from './../util/objeto-util';\nimport { RangeDispositivos } from './range-dispositivos';\nimport { SequenciaRangeDispositivos } from './sequencia-range-dispositivos';\n\nexport class AgrupadorDispositivosCmdEmd {\n  getSequencias(dispositivos: Dispositivo[]): SequenciaRangeDispositivos[] {\n    const ranges = this.getRanges(dispositivos);\n\n    const sequencias = this.agrupaRanges(ranges);\n\n    // SequenciaRangeDispositivos.debug(sequencias);\n\n    return sequencias;\n  }\n\n  private getRanges(dispositivos: Dispositivo[]): RangeDispositivos[] {\n    let ranges = new Array<RangeDispositivos>();\n\n    let range = new RangeDispositivos();\n    for (const dispositivo of dispositivos) {\n      if (!range.add(dispositivo)) {\n        ranges.push(range);\n        range = new RangeDispositivos();\n        range.add(dispositivo);\n      }\n    }\n\n    if (!range.isVazio()) {\n      ranges.push(range);\n    }\n\n    ranges = AgrupadorDispositivosCmdEmd.separaRangesDeDoisDispositivos(ranges);\n\n    return ranges;\n  }\n\n  static separaRangesDeDoisDispositivos(ranges: RangeDispositivos[]): RangeDispositivos[] {\n    const ret = new Array<RangeDispositivos>();\n    for (const range of ranges) {\n      if (range.getQuantidadeDispositivos() === 2) {\n        ret.push(new RangeDispositivos(range.getPrimeiro()));\n        ret.push(new RangeDispositivos(range.getUltimo()));\n      } else {\n        ret.push(range);\n      }\n    }\n    return ret;\n  }\n\n  private separaRangesDeDoisDispositivosEmSequencias(sequencias: SequenciaRangeDispositivos[]): void {\n    for (const s of sequencias) {\n      s.setRanges(AgrupadorDispositivosCmdEmd.separaRangesDeDoisDispositivos(s.getRanges()));\n    }\n  }\n\n  private agrupaRanges(ranges: RangeDispositivos[]): SequenciaRangeDispositivos[] {\n    const sequencias = new Array<SequenciaRangeDispositivos>();\n\n    let sequencia = new SequenciaRangeDispositivos();\n    for (const range of ranges) {\n      if (sequencia.isVazio()) {\n        sequencia.add(range);\n        sequencias.push(sequencia);\n      } else {\n        if (this.isMesmaSequencia(sequencia, range)) {\n          sequencia.add(range);\n        } else {\n          sequencia = new SequenciaRangeDispositivos();\n          sequencia.add(range);\n          sequencias.push(sequencia);\n        }\n      }\n    }\n\n    return sequencias;\n  }\n\n  private isMesmaSequencia(sequencia: SequenciaRangeDispositivos, range: RangeDispositivos): boolean {\n    const dispSequencia = sequencia.getPrimeiroDispositivo();\n    const dispRange = range.getUltimo();\n    return (\n      CmdEmdUtil.isMesmoTipoParaComandoEmenda(dispSequencia, dispRange) &&\n      dispSequencia.situacao.descricaoSituacao === dispRange.situacao.descricaoSituacao &&\n      (dispSequencia.tipo === TipoDispositivo.artigo.tipo || dispSequencia.pai === dispRange.pai) &&\n      dispSequencia.tipo !== TipoDispositivo.omissis.tipo\n    );\n  }\n\n  separaDispositivosSeguidosDeOmissis(sequencias: SequenciaRangeDispositivos[]): SequenciaRangeDispositivos[] {\n    const ret = new Array<SequenciaRangeDispositivos>();\n    for (const s of sequencias) {\n      ret.push(...this.separaDispositivosSeguidosDeOmissis2(s));\n    }\n    return ret;\n  }\n\n  private separaDispositivosSeguidosDeOmissis2(s: SequenciaRangeDispositivos): SequenciaRangeDispositivos[] {\n    const ret = new Array<SequenciaRangeDispositivos>();\n\n    let ns = new SequenciaRangeDispositivos();\n    ret.push(ns);\n\n    let nr = new RangeDispositivos();\n    ns.add(nr);\n\n    for (const r of s.getRanges()) {\n      if (nr.getQuantidadeDispositivos() > 0) {\n        nr = new RangeDispositivos();\n        ns.add(nr);\n      }\n\n      for (const d of r.getDispositivos()) {\n        // Identifica dispositivo seguido de omissis\n        const posterior = getDispositivoPosterior(d);\n        if (posterior && posterior.tipo === TipoDispositivo.omissis.tipo) {\n          // Quebra em sequncia com apenas este dispositivo\n          if (this.adicionaouDispositivos(ns, nr)) {\n            if (nr.getQuantidadeDispositivos() === 0) {\n              ns.remove(nr);\n            }\n            ns = new SequenciaRangeDispositivos();\n            ret.push(ns);\n            nr = new RangeDispositivos();\n            ns.add(nr);\n          }\n          ns.informarCaputDoDispositivo = true;\n          nr.add(d);\n\n          ns = new SequenciaRangeDispositivos();\n          ret.push(ns);\n          nr = new RangeDispositivos();\n          ns.add(nr);\n        } else {\n          nr.add(d);\n        }\n      }\n    }\n\n    if (nr.getQuantidadeDispositivos() === 0) {\n      ns.remove(nr);\n    }\n    if (ns.getQuantidadeRanges() === 0) {\n      removeFromArray(ret, ns);\n    }\n\n    this.separaRangesDeDoisDispositivosEmSequencias(ret);\n\n    return ret;\n  }\n\n  private adicionaouDispositivos(s: SequenciaRangeDispositivos, r: RangeDispositivos): boolean {\n    return s.getQuantidadeRanges() > 1 || r.getQuantidadeDispositivos() > 0;\n  }\n}\n","import { Artigo, Dispositivo } from '../model/dispositivo/dispositivo';\nimport { isArtigo, isCaput, isParagrafo } from './../model/dispositivo/tipo';\nimport { isArticulacaoAlteracao } from './../model/lexml/hierarquia/hierarquiaUtil';\n\nexport class DispositivoComparator {\n  static compare(d1: Dispositivo, d2: Dispositivo): number {\n    if (!d1 || !d2) {\n      throw new Error('Tentativa de comparao de dispositivo nulo.');\n    }\n\n    if (!d1.pai) {\n      return -1;\n    }\n\n    if (!d2.pai) {\n      return 1;\n    }\n\n    const i1 = DispositivoComparator.getIndices(d1);\n    const i2 = DispositivoComparator.getIndices(d2);\n    return DispositivoComparator.comparaIndices(i1, i2);\n  }\n\n  private static getIndices(d: Dispositivo): number[] {\n    const indices: number[] = [];\n\n    // Considera alterao como filha do caput\n    let pai = this.getPaiParaComparacao(d);\n    while (pai) {\n      indices.push(this.getIndexDoFilho(pai, d));\n      d = pai;\n      pai = this.getPaiParaComparacao(d);\n    }\n    indices.reverse();\n\n    return indices;\n  }\n\n  // Considera alterao em artigo como filha do caput\n  private static getPaiParaComparacao(d: Dispositivo): Dispositivo | undefined {\n    if (!d.pai) {\n      return undefined;\n    }\n    if (isArtigo(d.pai!) && isArticulacaoAlteracao(d)) {\n      return (d.pai! as Artigo).caput!;\n    }\n    return d.pai!;\n  }\n\n  private static getIndexDoFilho(pai: Dispositivo, d: Dispositivo): number {\n    if (isCaput(d)) {\n      return 0;\n    }\n    if (isParagrafo(d)) {\n      // Aps o caput\n      return pai.filhos.indexOf(d) + 1;\n    }\n    if (isArticulacaoAlteracao(d)) {\n      // Antes dos filhos\n      return -1;\n    }\n    return pai.filhos.indexOf(d);\n  }\n\n  private static comparaIndices(indices1: number[], indices2: number[]): number {\n    let ret = 0;\n    const size1 = indices1.length;\n    const size2 = indices2.length;\n    for (let i = 0; i < size1 && i < size2 && ret === 0; i++) {\n      ret = indices1[i] - indices2[i];\n    }\n    if (ret === 0) {\n      ret = size1 - size2;\n    }\n    return ret;\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { NomeComGenero } from '../model/dispositivo/genero';\nimport { DispositivoComparator } from './dispositivo-comparator';\n\n/**\n * Representa um comando de emenda que pode ser combinado com outros.\n */\nexport abstract class CmdEmdCombinavel {\n  constructor(protected dispositivos: Dispositivo[]) {}\n\n  abstract getTexto(refGenericaProjeto: NomeComGenero, isPrimeiro: boolean, isUltimo: boolean): string;\n\n  static compare(c1: CmdEmdCombinavel, c2: CmdEmdCombinavel): number {\n    if (!c1.dispositivos?.length) {\n      return 1;\n    }\n    if (!c2.dispositivos?.length) {\n      return -1;\n    }\n    return DispositivoComparator.compare(c1.dispositivos[0], c2.dispositivos[0]);\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { Genero } from '../model/dispositivo/genero';\nimport { isAgrupador, isArtigo, isOmissis, isParagrafo } from '../model/dispositivo/tipo';\nimport { isDispositivoAlteracao, isDispositivoRaiz } from '../model/lexml/hierarquia/hierarquiaUtil';\nimport { TipoDispositivo } from '../model/lexml/tipo/tipoDispositivo';\nimport { StringBuilder } from '../util/string-util';\nimport { generoMasculino } from './../model/dispositivo/genero';\nimport { DescricaoSituacao } from './../model/dispositivo/situacao';\nimport { isArticulacao } from './../model/dispositivo/tipo';\nimport { isArticulacaoAlteracao } from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { SequenciaRangeDispositivos } from './sequencia-range-dispositivos';\n\nexport enum ArtigoAntesDispositivo {\n  NENHUM,\n  DEFINIDO,\n  DEFINIDO_COM_PREPOSICAO_A,\n}\n\nexport class DispositivosWriterCmdEmd {\n  private artigoAntesDispositivo = ArtigoAntesDispositivo.NENHUM;\n\n  getTexto(sequencias: SequenciaRangeDispositivos[]): string {\n    const sb = new StringBuilder();\n\n    const qtdSequencias = sequencias.length;\n    let posSequencia = 1;\n    for (const sequencia of sequencias) {\n      // Conector (, ou e)\n      if (posSequencia > 1) {\n        if (posSequencia === qtdSequencias) {\n          sb.append(' e ');\n        } else {\n          sb.append(', ');\n        }\n      }\n\n      if (sequencia.informarCaputDoDispositivo) {\n        sb.append(this.getReferenciaCaputDoDispositivo(sequencia));\n      } else {\n        // Artigo antes do dispositivo\n        sb.append(this.getTextoArtigoAntesSequencia(sequencia));\n      }\n\n      // Rtulo do tipo do dispositivo\n      sb.append(this.getRotuloTipoDispositivo(sequencia));\n\n      sb.append(' ');\n\n      // Dispositivos\n      sb.append(sequencia.getTextoListaDeDispositivos());\n\n      // Pai dos dispositivos\n      sb.append(this.getRotuloPaisSequencia(sequencia));\n\n      posSequencia++;\n    }\n\n    return sb.toString();\n  }\n\n  private getReferenciaCaputDoDispositivo(sequencia: SequenciaRangeDispositivos): string {\n    const sb = new StringBuilder();\n\n    const disp = sequencia.getPrimeiroDispositivo();\n\n    if (disp.tipo === TipoDispositivo.caput.tipo) {\n      return this.getTextoArtigoAntesSequencia(sequencia);\n    }\n\n    const plural = CmdEmdUtil.isSequenciaPlural(sequencia);\n\n    sb.append(this.getTextoArtigoAntesDispositivo(this.artigoAntesDispositivo, generoMasculino, plural));\n\n    sb.append(' caput ');\n\n    if (sequencia.getRange(0).getQuantidadeDispositivos() === 1) {\n      sb.append(disp.pronomePossessivoSingular);\n    } else {\n      sb.append(disp.pronomePossessivoPlural);\n    }\n\n    return sb.toString();\n  }\n\n  private getTextoArtigoAntesSequencia(sequencia: SequenciaRangeDispositivos): string {\n    const disp = sequencia.getPrimeiroDispositivo();\n    const plural = CmdEmdUtil.isSequenciaPlural(sequencia);\n\n    return this.getTextoArtigoAntesDispositivo(this.artigoAntesDispositivo, disp, plural);\n  }\n\n  private getTextoArtigoAntesDispositivo(tipo: ArtigoAntesDispositivo, genero: Genero, plural: boolean): string {\n    switch (tipo) {\n      case ArtigoAntesDispositivo.DEFINIDO:\n        if (plural) {\n          return genero.artigoDefinidoPlural;\n        }\n        return genero.artigoDefinidoSingular;\n      case ArtigoAntesDispositivo.DEFINIDO_COM_PREPOSICAO_A:\n        if (plural) {\n          return genero.artigoDefinidoPrecedidoPreposicaoAPlural;\n        }\n        return genero.artigoDefinidoPrecedidoPreposicaoASingular;\n      default:\n        return '';\n    }\n  }\n\n  private getRotuloTipoDispositivo(sequencia: SequenciaRangeDispositivos): string {\n    const disp = sequencia.getPrimeiroDispositivo();\n\n    return DispositivosWriterCmdEmd.getRotuloTipoDispositivo(disp, CmdEmdUtil.isSequenciaPlural(sequencia));\n  }\n\n  static getRotuloTipoDispositivo(disp: Dispositivo, plural: boolean): string {\n    // TODO Verificar melhor forma de identificar que no deve ser impresso o rtulo\n    // do tipo do dispositivo antes do pargrafo nico e do artigo nico.\n    if (disp.getNumeracaoParaComandoEmenda().indexOf('nico') >= 0) {\n      return '';\n    }\n\n    if (plural) {\n      // Plural\n      if (isArtigo(disp)) {\n        return 'arts.';\n      } else if (isParagrafo(disp)) {\n        return '';\n      }\n\n      return String(disp.descricaoPlural).toLocaleLowerCase();\n    }\n\n    // Singular\n    if (isArtigo(disp)) {\n      if (disp.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO && !CmdEmdUtil.isAlteracaoIntegral(disp)) {\n        return 'caput do art.';\n      }\n      return 'art.';\n    } else if (isParagrafo(disp)) {\n      return '';\n    }\n\n    return String(disp.descricao).toLowerCase();\n  }\n\n  private getRotuloPaisSequencia(sequencia: SequenciaRangeDispositivos): string {\n    const disp = sequencia.getPrimeiroDispositivo();\n    const localizarArtigoEmAgrupador = sequencia.localizarArtigoEmAgrupador;\n\n    return this.getRotuloPais(disp, localizarArtigoEmAgrupador);\n  }\n\n  private getRotuloPais(disp: Dispositivo, localizarArtigoEmAgrupador: boolean): string {\n    const sb = new StringBuilder();\n\n    let pai: Dispositivo | undefined;\n\n    while (!isDispositivoRaiz(disp)) {\n      pai = disp.pai;\n\n      if (pai && isArticulacaoAlteracao(pai)) {\n        if (disp.tipo === TipoDispositivo.omissis.tipo) {\n          const anterior = CmdEmdUtil.getDispositivoAnteriorDireto(disp);\n          if (anterior.tipo !== TipoDispositivo.alteracao.tipo) {\n            sb.append('aps ');\n            sb.append(anterior.artigoDefinidoSingular);\n            sb.append(anterior.getNumeracaoComRotuloParaComandoEmenda());\n            sb.append(this.getRotuloPais(anterior, localizarArtigoEmAgrupador));\n            return sb.toString();\n          }\n        }\n        break;\n      }\n\n      if (pai && !isDispositivoRaiz(pai as Dispositivo) && (!isAgrupador(pai) || (isArtigo(disp) && localizarArtigoEmAgrupador))) {\n        const dispAlteracao = isDispositivoAlteracao(disp);\n        const dispositivoNovoForaDeAlteracao = !dispAlteracao && disp.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO;\n        const dispositivoNovoEmAlteracao = dispAlteracao && !CmdEmdUtil.isTextoOmitido(disp) && disp.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO;\n        // TODO Tratar diferentes situaes na norma vigente\n        // && StringUtils\n        //         .defaultString(disp.getSituacaoNaNormaVigente())\n        //         .equals(Dispositivo.ACRESCIMO);\n        if (dispositivoNovoForaDeAlteracao || dispositivoNovoEmAlteracao) {\n          sb.append(pai.artigoDefinidoPrecedidoPreposicaoASingular);\n        } else if (isOmissis(disp)) {\n          const anterior = CmdEmdUtil.getDispositivoAnteriorDireto(disp);\n          const posterior = CmdEmdUtil.getDispositivoPosteriorDireto(disp);\n\n          if (anterior === pai && posterior && posterior.pai === pai) {\n            // Entre pai e irmo\n            const refIrmao = posterior.pronomePossessivoSingular + ' ' + posterior.descricao?.toLowerCase() + ' ' + posterior.getNumeracaoParaComandoEmenda();\n            sb.append('antes ' + refIrmao);\n            sb.append(pai.pronomePossessivoSingular);\n          } else if (!(isArticulacao(anterior) && anterior.pai)) {\n            sb.append('aps ');\n            sb.append(anterior.artigoDefinidoSingular);\n            sb.append(anterior.getNumeracaoComRotuloParaComandoEmenda());\n            sb.append(this.getRotuloPais(anterior, localizarArtigoEmAgrupador));\n            return sb.toString();\n          }\n        } else {\n          sb.append(pai.pronomePossessivoSingular);\n        }\n        sb.append(pai.getNumeracaoComRotuloParaComandoEmenda());\n      } else if (isArtigo(disp) && isDispositivoRaiz(pai as Dispositivo) && localizarArtigoEmAgrupador) {\n        const agrupador = CmdEmdUtil.getProximoAgrupador(disp);\n        if (agrupador) {\n          sb.append(' antes ');\n          sb.append(agrupador.pronomePossessivoSingular);\n          sb.append(agrupador.getNumeracaoComRotuloParaComandoEmenda());\n        }\n      }\n\n      if (!pai) break;\n      disp = pai;\n    }\n\n    return sb.toString();\n  }\n\n  setArtigoAntesDispositivo(artigoAntesDispositivo: ArtigoAntesDispositivo): void {\n    this.artigoAntesDispositivo = artigoAntesDispositivo;\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { NomeComGenero } from '../model/dispositivo/genero';\nimport { removeEspacosDuplicados, StringBuilder } from '../util/string-util';\nimport { AgrupadorDispositivosCmdEmd } from './agrupador-dispositivos-cmd-emd';\nimport { CmdEmdCombinavel } from './cmd-emd-combinavel';\nimport { DispositivosWriterCmdEmd, ArtigoAntesDispositivo } from './dispositivos-writer-cmd-emd';\n\nexport class CmdEmdModificacao extends CmdEmdCombinavel {\n  constructor(protected dispositivos: Dispositivo[]) {\n    super(dispositivos);\n  }\n\n  getTexto(refGenericaProjeto: NomeComGenero, isPrimeiro: boolean, isUltimo: boolean): string {\n    // D-se ao art. 7-A do Captulo II do Projeto a seguinte redao:\n\n    const sb = new StringBuilder();\n\n    const agrupador = new AgrupadorDispositivosCmdEmd();\n    const sequencias = agrupador.getSequencias(this.dispositivos);\n\n    // Prefixo\n    if (isPrimeiro) {\n      sb.append('D-se ');\n      if (!isUltimo) {\n        sb.append('nova redao ');\n      }\n    } else {\n      sb.append(isUltimo ? '; e ' : '; ');\n      sb.append('d-se nova redao ');\n    }\n\n    // Dispositivos\n    const dispositivosWriter = new DispositivosWriterCmdEmd();\n    dispositivosWriter.setArtigoAntesDispositivo(ArtigoAntesDispositivo.DEFINIDO_COM_PREPOSICAO_A);\n    sb.append(dispositivosWriter.getTexto(sequencias));\n\n    // Sufixo\n    if (isUltimo) {\n      sb.append(' ' + refGenericaProjeto.genero.pronomePossessivoSingular + ' ' + refGenericaProjeto.nome);\n      sb.append(isPrimeiro ? ' a seguinte redao:' : ', nos termos a seguir:');\n    }\n\n    return removeEspacosDuplicados(sb.toString());\n  }\n}\n","import { isAgrupador } from './../model/dispositivo/tipo';\nimport { removeEspacosDuplicados, StringBuilder } from './../util/string-util';\nimport { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { AgrupadorDispositivosCmdEmd } from './agrupador-dispositivos-cmd-emd';\nimport { DispositivosWriterCmdEmd } from './dispositivos-writer-cmd-emd';\nimport { SequenciaRangeDispositivos } from './sequencia-range-dispositivos';\nimport { isArtigo } from '../model/dispositivo/tipo';\nimport { RangeDispositivos } from './range-dispositivos';\nimport { CmdEmdCombinavel } from './cmd-emd-combinavel';\nimport { NomeComGenero } from '../model/dispositivo/genero';\nimport { isDispositivoRaiz } from '../model/lexml/hierarquia/hierarquiaUtil';\n\nexport class CmdEmdAdicao extends CmdEmdCombinavel {\n  constructor(protected dispositivos: Dispositivo[]) {\n    super(dispositivos);\n  }\n\n  getTexto(refGenericaProjeto: NomeComGenero, isPrimeiro: boolean, isUltimo: boolean): string {\n    // Acrescente-se art. 7-A ao Captulo II do Projeto, com a seguinte redao:\n    // Acrescentem-se arts. 7-A e 7-B ao Captulo II do Projeto, com a seguinte redao:\n    // Acrescente-se art. 2-A antes do Captulo I do Projeto, com a seguinte redao:\n    // Acrescentem-se art. 2-A antes do Captulo I e art. 2-B ao Captulo I do Projeto, com a\n    // seguinte redao:\n    // Acrescentem-se pargrafo nico ao art. 1 e pargrafo nico ao art. 2 do Projeto, com a\n    // seguinte redao:\n    // Acrescentem-se  1 e 2 ao art. 1 e  1 e 2 ao art. 2 do Projeto, com a seguinte\n    // redao:\n    // Acrescentem-se  0 ao art. 9, alnea a inciso I do  4 do art. 9 e  8 ao art. 9\n    // do Projeto, com a seguinte redao:\n\n    const sb = new StringBuilder();\n\n    const agrupador = new AgrupadorDispositivosCmdEmd();\n    let sequencias = agrupador.getSequencias(this.dispositivos);\n    sequencias = this.trataLocalizacaoArtigoEmAgrupador(sequencias);\n\n    // Prefixo\n    const plural = CmdEmdUtil.isSequenciasPlural(sequencias);\n    if (isPrimeiro) {\n      sb.append(plural ? 'Acrescentem-se ' : 'Acrescente-se ');\n    } else {\n      sb.append(isUltimo ? '; e ' : '; ');\n      sb.append(plural ? 'acrescentem-se ' : 'acrescente-se ');\n    }\n\n    // Dispositivos\n    const dispositivosWriter = new DispositivosWriterCmdEmd();\n    sb.append(dispositivosWriter.getTexto(sequencias));\n\n    // Sufixo\n    if (isUltimo) {\n      const ultimaSequencia = sequencias[sequencias.length - 1];\n      if (!isArtigo(ultimaSequencia.getPrimeiroDispositivo()) || ultimaSequencia.localizarArtigoEmAgrupador) {\n        sb.append(refGenericaProjeto.genero.pronomePossessivoSingular);\n      } else {\n        sb.append(refGenericaProjeto.genero.artigoDefinidoPrecedidoPreposicaoASingular);\n      }\n      sb.append(refGenericaProjeto.nome);\n      sb.append(isPrimeiro ? ', com a seguinte redao:' : ', nos termos a seguir:');\n    }\n\n    return removeEspacosDuplicados(sb.toString());\n  }\n\n  private trataLocalizacaoArtigoEmAgrupador(sequencias: SequenciaRangeDispositivos[]): SequenciaRangeDispositivos[] {\n    const ret = new Array<SequenciaRangeDispositivos>();\n\n    for (const sequencia of sequencias) {\n      if (isArtigo(sequencia.getPrimeiroDispositivo())) {\n        ret.push(...this.trataLocalizacaoArtigoAgrupadorSequencia(sequencia));\n      } else {\n        ret.push(sequencia);\n      }\n    }\n\n    return ret;\n  }\n\n  private trataLocalizacaoArtigoAgrupadorSequencia(sequencia: SequenciaRangeDispositivos): SequenciaRangeDispositivos[] {\n    const sequencias = new Array<SequenciaRangeDispositivos>();\n\n    // Junta todos os artigos dos ranges da sequencia em uma nica lista\n    const artigos = new Array<Dispositivo>();\n    for (const range of sequencia.getRanges()) {\n      artigos.push(...range.getDispositivos());\n    }\n\n    // Verifica a necessidade de reagrupar\n    let reagrupar = false;\n    for (const art of artigos) {\n      if (this.isInclusaoArtigoProximoAgrupador(art)) {\n        reagrupar = true;\n        break;\n      }\n    }\n\n    // Se no for necessrio repassa a sequncia como veio\n    if (!reagrupar) {\n      sequencias.push(sequencia);\n      return sequencias;\n    }\n\n    // Vamos reagrup-los em ranges dentro do mesmo pai\n    let s = new SequenciaRangeDispositivos(); // Nova sequncia\n    s.localizarArtigoEmAgrupador = true;\n    sequencias.push(s);\n\n    let r = new RangeDispositivos(); // Novo range\n    s.add(r);\n\n    let artAnterior: Dispositivo | undefined = undefined;\n    for (const art of artigos) {\n      if (!r.isVazio()) {\n        if (art.pai !== (artAnterior as Dispositivo).pai) {\n          s = new SequenciaRangeDispositivos();\n          s.localizarArtigoEmAgrupador = true;\n          sequencias.push(s);\n\n          r = new RangeDispositivos();\n          s.add(r);\n        } else if (CmdEmdUtil.getDispositivoIrmaoPosterior(artAnterior as Dispositivo) !== art) {\n          r = new RangeDispositivos();\n          s.add(r);\n        }\n      }\n\n      r.add(art);\n\n      artAnterior = art;\n    }\n\n    // Quebra ranges com 2 dispositivos em duas\n    for (const s2 of sequencias) {\n      s2.setRanges(AgrupadorDispositivosCmdEmd.separaRangesDeDoisDispositivos(s2.getRanges()));\n    }\n\n    return sequencias;\n  }\n\n  private isInclusaoArtigoProximoAgrupador(artigo: Dispositivo): boolean {\n    return this.isInclusaoArtigoInicioAgrupador(artigo) || this.isInclusaoArtigoAntesAgrupador(artigo);\n  }\n\n  private isInclusaoArtigoInicioAgrupador(artigo: Dispositivo): boolean {\n    // Dentro de agrupador de artigo\n    const pai = artigo.pai as Dispositivo;\n    if (isDispositivoRaiz(pai) || !isAgrupador(pai)) {\n      return false;\n    }\n\n    // Verifica se ele  o primeiro artigo do pai\n    return pai.filhos.indexOf(artigo) === 0;\n  }\n\n  private isInclusaoArtigoAntesAgrupador(disp: Dispositivo): boolean {\n    // TODO Testar tambm ltimo artigo do projeto seguido de agrupador\n\n    // Verifica se o prximo artigo est no mesmo agrupador\n    const pai = disp.pai;\n    const irmao = CmdEmdUtil.getDispositivoIrmaoPosterior(disp);\n\n    // Se existe prximo artigo com outro pai,  porque existe um agrupador entre eles\n    return !!irmao && pai !== irmao.pai;\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { NomeComGenero } from '../model/dispositivo/genero';\nimport { removeEspacosDuplicados, StringBuilder } from '../util/string-util';\nimport { AgrupadorDispositivosCmdEmd } from './agrupador-dispositivos-cmd-emd';\nimport { CmdEmdCombinavel } from './cmd-emd-combinavel';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { ArtigoAntesDispositivo, DispositivosWriterCmdEmd } from './dispositivos-writer-cmd-emd';\n\nexport class CmdEmdSupressao extends CmdEmdCombinavel {\n  constructor(protected dispositivos: Dispositivo[]) {\n    super(dispositivos);\n  }\n\n  getTexto(refGenericaProjeto: NomeComGenero, isPrimeiro: boolean, isUltimo: boolean): string {\n    // Suprima-se o  1 do art. 9 do Projeto.\n    // Suprima-se o inciso I do  6 do art. 9 do Projeto.\n    // Suprimam-se os  1 e 2 do art. 9 do Projeto.\n    // Suprimam-se os  1, 3 e 5 do art. 9 do Projeto.\n    // Suprimam-se os  1 a 3 do art. 9 do Projeto.\n    // Suprimam-se os  3, 4 e 7 do art. 9 do Projeto.\n    // Suprimam-se os  1, 3 a 5 e 7 do art. 9 do Projeto.\n    // Suprima-se o pargrafo nico do art. 8 do Projeto.\n    // Suprimam-se os  1, 3 a 5 e o inciso I do  6 do art. 9 do Projeto.\n    // Suprimam-se o inciso IX do caput do art. 2, o art. 3, o pargrafo nico do art. 8 e o\n    // art. 9 do Projeto.\n\n    const sb = new StringBuilder();\n\n    const agrupador = new AgrupadorDispositivosCmdEmd();\n    const sequencias = agrupador.getSequencias(this.dispositivos);\n\n    // Prefixo\n    const plural = CmdEmdUtil.isSequenciasPlural(sequencias);\n    if (isPrimeiro) {\n      sb.append(plural ? 'Suprimam-se ' : 'Suprima-se ');\n    } else {\n      sb.append(isUltimo ? '; e ' : '; ');\n      sb.append(plural ? 'suprimam-se ' : 'suprima-se ');\n    }\n\n    // Dispositivos\n    const dispositivosWriter = new DispositivosWriterCmdEmd();\n    dispositivosWriter.setArtigoAntesDispositivo(ArtigoAntesDispositivo.DEFINIDO);\n    sb.append(dispositivosWriter.getTexto(sequencias));\n\n    // Sufixo\n    if (isUltimo) {\n      sb.append(' ' + refGenericaProjeto.genero.pronomePossessivoSingular + ' ' + refGenericaProjeto.nome);\n      sb.append(isPrimeiro ? '.' : ', nos termos a seguir:');\n    }\n\n    return removeEspacosDuplicados(sb.toString());\n  }\n}\n","import { Classificacao } from '../../documento';\nimport { ClassificacaoDocumento } from '../../documento/classificacao';\n\nexport class Emenda implements Classificacao {\n  classificacao: ClassificacaoDocumento.EMENDA | ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER = ClassificacaoDocumento.EMENDA;\n  proposicao = new RefProposicaoEmendada();\n  dispositivosSuprimidos: DispositivoEmendaSuprimido[] = [];\n  dispositivosModificados: DispositivoEmendaModificado[] = [];\n  dispositivosAdicionados: DispositivoEmendaAdicionado[] = [];\n  comandoEmenda = new ComandoEmenda();\n  justificativa = '';\n}\n\nclass RefProposicaoEmendada {\n  urn = '';\n  identificacao = ''; // sigla nmero/ano\n}\n\nexport class DispositivoEmenda {\n  id = ''; // ID LexML\n  rotulo?: string;\n}\n\nexport class DispositivoEmendaSuprimido extends DispositivoEmenda {}\n\nexport class DispositivoEmendaModificado extends DispositivoEmenda {\n  texto = '';\n}\n\nexport class DispositivoEmendaAdicionado extends DispositivoEmenda {\n  idPai?: string;\n  idIrmaoAnterior?: string;\n  texto?: string;\n  urnNormaAlterada?: string;\n  textoOmitido?: boolean;\n  abreAspas?: boolean;\n  fechaAspas?: boolean;\n}\n\nexport class ComandoEmenda {\n  cabecalhoComum?: string;\n  comandos: ItemComandoEmenda[] = [];\n}\n\nexport class ItemComandoEmenda {\n  constructor(public cabecalho: string, public citacao?: string) {}\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { NomeComGenero } from '../model/dispositivo/genero';\nimport { removeEspacosDuplicados } from '../util/string-util';\n\nexport class CmdEmdAdicaoArtigoOndeCouber {\n  constructor(private dispositivos: Dispositivo[]) {}\n\n  getTexto(refGenericaProjeto: NomeComGenero): string {\n    // \"Acrescente-se, onde couber, no Projeto o seguinte artigo:\"\n    // \"Acrescentem-se, onde couber, no Projeto os seguintes artigos:\"\n\n    if (!this.dispositivos.length) {\n      return '';\n    }\n\n    let texto;\n\n    const strRefProjeto = refGenericaProjeto.genero.contracaoEmArtigoDefinidoSingular + ' ' + refGenericaProjeto.nome;\n\n    if (this.dispositivos.length > 1) {\n      texto = 'Acrescentem-se, onde couber, ' + strRefProjeto + ' os seguintes artigos:';\n    } else {\n      texto = 'Acrescente-se, onde couber, ' + strRefProjeto + ' o seguinte artigo:';\n    }\n\n    return removeEspacosDuplicados(texto);\n  }\n}\n","import { StringBuilder } from './string-util';\n/**\n * Utilitrio para montar uma tag usando o pattern composite. Essa classe foi retirada do livro\n * Refactoring to Patterns\n */\nexport class TagNode {\n  private valores = new Array<any>();\n\n  private atributos = new StringBuilder();\n\n  public constructor(private nome: string) {}\n\n  toString(): string {\n    if (!this.valores.length) {\n      return '<' + this.nome + this.atributos + '/>';\n    }\n    const resultado = new StringBuilder('<' + this.nome + this.atributos + '>');\n    this.valores.forEach(valor => {\n      resultado.append(valor);\n    });\n    resultado.append('</' + this.nome + '>');\n    return resultado.toString();\n  }\n\n  addValor(valor?: string): TagNode {\n    if (valor) {\n      this.valores.push(valor);\n    }\n    return this;\n  }\n\n  addAtributo(atributo: string, valor?: string): TagNode {\n    this.atributos.append(' ');\n    this.atributos.append(atributo);\n    if (valor) {\n      this.atributos.append(\"='\");\n      this.atributos.append(valor);\n      this.atributos.append(\"'\");\n    }\n    return this;\n  }\n\n  add(child: TagNode): TagNode {\n    if (child) {\n      this.valores.push(child);\n    }\n    return this;\n  }\n}\n","import { DescricaoSituacao } from './../model/dispositivo/situacao';\nimport { isDispositivoAlteracao } from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { StringBuilder } from './../util/string-util';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { isCaput } from './../model/dispositivo/tipo';\nimport { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { TagNode } from '../util/tag-node';\n\nexport class CitacaoComandoSimples {\n  public getTexto(d: Dispositivo): string {\n    const sb = new StringBuilder();\n\n    const rotulo = isCaput(d) ? d.pai!.rotulo : d.rotulo;\n    const tagRotulo = new TagNode('Rotulo').addValor(rotulo?.trim());\n    const tagDispositivo = new TagNode('p').addValor('').add(tagRotulo).addValor(CmdEmdUtil.getTextoParaCitacao(d));\n\n    if (this.necessitaOmissis(d)) {\n      const tagOmissis = new TagNode('p').add(new TagNode('Omissis')).addValor('');\n      sb.append(tagDispositivo.toString());\n      sb.append(tagOmissis.toString());\n    } else {\n      tagDispositivo.addValor('');\n      sb.append(tagDispositivo.toString());\n    }\n\n    return sb.toString();\n  }\n\n  private necessitaOmissis(d: Dispositivo): boolean {\n    return this.temFilhoNaoSuprimido(d) && !isDispositivoAlteracao(d);\n  }\n\n  private temFilhoNaoSuprimido(d: Dispositivo): boolean {\n    for (const f of d.filhos) {\n      if (f.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n","import { isDispositivoAlteracao, isArticulacaoAlteracao } from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoComparator } from './dispositivo-comparator';\nimport { Articulacao } from './../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from './../model/dispositivo/situacao';\nimport { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { isArtigo } from '../model/dispositivo/tipo';\nimport { StringBuilder } from '../util/string-util';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { CitacaoComandoSimples } from './citacao-cmd-simples';\n\nexport class CitacaoComandoDispPrj {\n  constructor(private articulacao: Articulacao) {}\n\n  getTexto(): string {\n    const sb = new StringBuilder();\n\n    const dispositivos = this.getDispositivosParaCitacao();\n\n    const qtdDispositivos = dispositivos.length;\n    const qtdSuprimidos = dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO).length;\n\n    if (qtdDispositivos - qtdSuprimidos > 0) {\n      const disp = dispositivos[0];\n      if (dispositivos.length === 1 && !isArtigo(disp)) {\n        sb.append(new CitacaoComandoSimples().getTexto(disp));\n      } else {\n        sb.append('<p>Citao mltipla no implementada.</p>');\n        // this.getCitacoesMultiplas(sb, dispositivos);\n      }\n    }\n\n    return sb.toString();\n  }\n\n  private getDispositivosParaCitacao(): Dispositivo[] {\n    const dispositivosEmenda = CmdEmdUtil.getDispositivosNaoOriginais(this.articulacao);\n    dispositivosEmenda.sort(DispositivoComparator.compare);\n\n    const ret = new Array<Dispositivo>();\n\n    dispositivosEmenda.forEach(d => {\n      if (isArticulacaoAlteracao(d)) {\n        // Entram alteraes de norma vigente em dispositivos novos,\n        if (d.pai!.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n          ret.push(d);\n        }\n      } else if (isDispositivoAlteracao(d)) {\n        // dispositivos de alterao de norma vigente em dispositivos novos, e\n        if (ret.indexOf(d.pai!) >= 0) {\n          ret.push(d);\n        }\n      } else {\n        // dispositivos que no so de alterao de norma vigente\n        ret.push(d);\n      }\n    });\n\n    return ret;\n  }\n\n  // private void getCitacoesMultiplas(final StringBuilder sb, final List<Dispositivo> dispositivos) {\n  //     List<Dispositivo> dispArtigo = new ArrayList<Dispositivo>();\n  //     Dispositivo artigo, artigoAtual = null;\n\n  //     sb.append(\"<Citacao>\");\n\n  //     for (Dispositivo d : dispositivos) {\n\n  //         artigo = DispositivoUtil.getArtigoDoProjeto(d);\n\n  //         if (artigo != artigoAtual) {\n\n  //             if (!dispArtigo.isEmpty()) {\n  //                 getCitacaoMultipla(sb, dispArtigo);\n  //             }\n\n  //             dispArtigo.clear();\n  //             dispArtigo.add(artigo);\n\n  //             artigoAtual = artigo;\n  //         }\n\n  //         if (!dispArtigo.contains(d)) {\n  //             dispArtigo.add(d);\n  //         }\n  //     }\n\n  //     if (!dispArtigo.isEmpty()) {\n  //         getCitacaoMultipla(sb, dispArtigo);\n  //     }\n\n  //     sb.append(\"</Citacao>\");\n  // }\n\n  // private void getCitacaoMultipla(final StringBuilder sb, final List<Dispositivo> dispositivos) {\n  //     CitacaoComandoMultipla cit = new CitacaoComandoMultipla(emenda);\n  //     sb.append(cit.getTexto(dispositivos));\n  // }\n}\n","import { DispositivoAdicionado } from './../model/lexml/situacao/dispositivoAdicionado';\nimport { CmdEmdModificacao } from './cmd-emd-modificacao';\nimport { getRefGenericaProjeto } from './../model/lexml/documento/urnUtil';\nimport { isArticulacao } from './../model/dispositivo/tipo';\nimport { Articulacao, Dispositivo } from '../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../model/dispositivo/situacao';\nimport { getArticulacao } from '../model/lexml/hierarquia/hierarquiaUtil';\nimport { CmdEmdAdicao } from './cmd-emd-adicao';\nimport { CmdEmdCombinavel } from './cmd-emd-combinavel';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { DispositivoComparator } from './dispositivo-comparator';\nimport { NomeComGenero } from '../model/dispositivo/genero';\nimport { CmdEmdSupressao } from './cmd-emd-supressao';\nimport { ComandoEmenda, ItemComandoEmenda } from '../model/lexml/documento/emenda';\nimport { ClassificacaoDocumento } from '../model/documento/classificacao';\nimport { CmdEmdAdicaoArtigoOndeCouber } from './cmd-emd-adicao-artigo-onde-couber';\nimport { CitacaoComandoDispPrj } from './citacao-cmd-disp-prj';\n\nexport class ComandoEmendaBuilder {\n  constructor(private urn: string, private articulacao: Articulacao) {}\n\n  getComandoEmenda(): ComandoEmenda {\n    const ret = new ComandoEmenda();\n\n    const dispositivosEmenda = CmdEmdUtil.getDispositivosNaoOriginais(this.articulacao);\n\n    const list = this.getDispositivosRepresentativosDeCadaComando(dispositivosEmenda);\n    list.sort(DispositivoComparator.compare);\n\n    if (!list.length) {\n      return ret;\n    }\n\n    const refGenericaProjeto = getRefGenericaProjeto(this.urn);\n\n    list.forEach(d => {\n      let cabecalho: string;\n      let citacao: string;\n\n      if (isArticulacao(d)) {\n        //     CmdEmdAlteracaoNormaVigente cmd = new CmdEmdAlteracaoNormaVigente(d);\n        //     cabecalho = cmd.getTexto(refGenericaProjeto);\n        cabecalho = 'no implementado';\n\n        //     CitacaoComandoAlteracaoNormaVigente cit = new CitacaoComandoAlteracaoNormaVigente(emenda, d);\n        //     citacao = cit.getTexto();\n        citacao = '';\n      } else {\n        const cmd = new CmdEmdDispPrj(dispositivosEmenda);\n        cabecalho = cmd.getTexto(refGenericaProjeto);\n\n        const cit = new CitacaoComandoDispPrj(this.articulacao);\n        citacao = cit.getTexto();\n      }\n\n      ret.comandos.push(new ItemComandoEmenda(cabecalho, citacao));\n    });\n\n    return ret;\n  }\n\n  private getDispositivosRepresentativosDeCadaComando(dispositivosEmenda: Dispositivo[]): Dispositivo[] {\n    const ret: Dispositivo[] = [];\n\n    let temDispositivoDeProjeto = false;\n\n    dispositivosEmenda.forEach(d => {\n      const articulacao = getArticulacao(d);\n      // Separa alteraes\n      if (articulacao && articulacao.pai && articulacao.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n        if (ret.indexOf(articulacao) === -1 && articulacao.pai.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n          ret.push(articulacao);\n        }\n      } else if (!temDispositivoDeProjeto) {\n        temDispositivoDeProjeto = true;\n        ret.push(d);\n      }\n    });\n\n    return ret;\n  }\n}\n\n/**\n * Comando de emenda que trata supresso, modificao e adio de dispositivos do projeto.\n */\nclass CmdEmdDispPrj {\n  constructor(private dispositivosEmenda: Dispositivo[]) {}\n\n  getTexto(refGenericaProjeto: NomeComGenero): string {\n    let texto = '';\n\n    const dispositivos = CmdEmdUtil.getDispositivosComando(this.dispositivosEmenda);\n\n    const artigosOndeCouber = dispositivos.filter(d => {\n      return d.situacao instanceof DispositivoAdicionado && (d.situacao as DispositivoAdicionado).tipoEmenda === ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER;\n    });\n    // Se for caso de artigos onde couber, no pode ter outro tipo de alterao\n    if (artigosOndeCouber.length) {\n      if (artigosOndeCouber.length < dispositivos.length) {\n        throw new Error('Adio de artigos onde couber e outras alteraes na mesma emenda.');\n      }\n\n      const cmd = new CmdEmdAdicaoArtigoOndeCouber(artigosOndeCouber);\n      return cmd.getTexto(refGenericaProjeto);\n    }\n\n    // Combinar comandos\n    const comandos: CmdEmdCombinavel[] = [];\n\n    const dispositivosSuprimidos = dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO);\n    if (dispositivosSuprimidos.length) {\n      comandos.push(new CmdEmdSupressao(dispositivosSuprimidos));\n    }\n\n    const dispositivosModificados = dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO);\n    if (dispositivosModificados.length) {\n      comandos.push(new CmdEmdModificacao(dispositivosModificados));\n    }\n\n    const dispositivosAdicionados = dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO);\n    if (dispositivosAdicionados.length) {\n      comandos.push(new CmdEmdAdicao(dispositivosAdicionados));\n    }\n\n    comandos.sort(CmdEmdCombinavel.compare);\n\n    let i = 0;\n    const iUltimo = comandos.length - 1;\n    comandos.forEach(cmd => {\n      texto += cmd.getTexto(refGenericaProjeto, i === 0, i === iUltimo);\n      i++;\n    });\n\n    return texto;\n  }\n}\n","import { Alteracoes } from './../model/dispositivo/blocoAlteracao';\nimport { buildId } from './../model/lexml/util/idUtil';\nimport { Articulacao, Artigo, Dispositivo } from '../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../model/dispositivo/situacao';\nimport { Emenda } from '../model/lexml/documento/emenda';\nimport { isArtigo, isCaput, isOmissis } from './../model/dispositivo/tipo';\nimport { ClassificacaoDocumento } from './../model/documento/classificacao';\nimport { TEXTO_OMISSIS } from './../model/lexml/conteudo/textoOmissis';\nimport { DispositivoEmendaAdicionado, DispositivoEmendaModificado, DispositivoEmendaSuprimido } from './../model/lexml/documento/emenda';\nimport { isArticulacaoAlteracao, isDispositivoRaiz } from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { ComandoEmendaBuilder } from './comando-emenda-builder';\nimport { CmdEmdUtil } from './comando-emenda-util';\n\nexport class EmendaBuilder {\n  constructor(private classificacao: ClassificacaoDocumento.EMENDA | ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER, private urn: string, private articulacao: Articulacao) {}\n\n  getEmenda(): Emenda {\n    const emd = new Emenda();\n\n    emd.classificacao = this.classificacao;\n\n    this.preencheDispositivos(emd);\n\n    emd.comandoEmenda = new ComandoEmendaBuilder(this.urn, this.articulacao).getComandoEmenda();\n\n    return emd;\n  }\n\n  private preencheDispositivos(emd: Emenda): void {\n    const dispositivos = CmdEmdUtil.getDispositivosNaoOriginais(this.articulacao);\n\n    const dispositivosSuprimidos = dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO);\n    if (dispositivosSuprimidos.length) {\n      for (const d of dispositivosSuprimidos) {\n        const ds = new DispositivoEmendaSuprimido();\n        ds.id = d.id!;\n        ds.rotulo = d.rotulo;\n        emd.dispositivosSuprimidos.push(ds);\n      }\n    }\n\n    const dispositivosModificados = dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO);\n    if (dispositivosModificados.length) {\n      for (const d of dispositivosModificados) {\n        const dm = new DispositivoEmendaModificado();\n        if (isArtigo(d)) {\n          const caput = (d as Artigo).caput!;\n          dm.id = caput.id!;\n          dm.texto = caput.texto;\n        } else {\n          dm.id = d.id!;\n          dm.texto = d.texto;\n        }\n        dm.rotulo = d.rotulo;\n        emd.dispositivosModificados.push(dm);\n      }\n    }\n\n    const dispositivosAdicionados = dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO);\n    if (dispositivosAdicionados.length) {\n      for (const d of dispositivosAdicionados) {\n        const da = this.criaDispositivoEmendaAdicionado(d);\n        emd.dispositivosAdicionados.push(da);\n        if (isArtigo(d)) {\n          const ca = this.criaDispositivoEmendaAdicionado((d as Artigo).caput!);\n          emd.dispositivosAdicionados.push(ca);\n        }\n      }\n    }\n  }\n\n  private criaDispositivoEmendaAdicionado(d: Dispositivo): DispositivoEmendaAdicionado {\n    const da = new DispositivoEmendaAdicionado();\n\n    if (!d.id) {\n      d.id = buildId(d);\n    }\n    da.id = d.id;\n\n    if (!isCaput(d) && !isArticulacaoAlteracao(d) && !isOmissis(d)) {\n      da.rotulo = d.rotulo;\n    }\n    if (!isArtigo(d) && !isArticulacaoAlteracao(d)) {\n      da.texto = d.texto;\n    }\n    if (isCaput(d) || isArticulacaoAlteracao(d)) {\n      da.idPai = d.pai?.id;\n    } else {\n      const irmaos = CmdEmdUtil.getFilhosEstiloLexML(d.pai!);\n      if (d !== irmaos[0]) {\n        da.idIrmaoAnterior = irmaos[irmaos.indexOf(d) - 1].id;\n      } else if (!isDispositivoRaiz(d.pai!)) {\n        da.idPai = d.pai?.id;\n      }\n    }\n    if (isArticulacaoAlteracao(d)) {\n      const base = (d as Alteracoes).base;\n      if (base) {\n        da.urnNormaAlterada = base;\n      }\n    }\n    if (!isOmissis(d) && da.texto && da.texto.indexOf(TEXTO_OMISSIS) >= 0) {\n      da.textoOmitido = true;\n    }\n    if (da.rotulo && da.rotulo.indexOf('') >= 0) {\n      da.abreAspas = true;\n    }\n    if (da.texto && da.texto.indexOf(' (NR)') >= 0) {\n      da.fechaAspas = true;\n    }\n    return da;\n  }\n}\n","import { Articulacao, Artigo, Dispositivo } from '../../../dispositivo/dispositivo';\nimport { isAgrupador, isArtigo, isCaput, isOmissis } from '../../../dispositivo/tipo';\nimport { TEXTO_OMISSIS } from '../../conteudo/textoOmissis';\nimport { buildHref, buildId, buildIdAlteracao } from '../../util/idUtil';\nimport { isNorma, ProjetoNorma } from '../projetoNorma';\n\nexport const buildJsonixFromProjetoNorma = (projetoNorma: ProjetoNorma, urn: string): any => {\n  const resultado = montaCabecalho(urn);\n\n  resultado.value.projetoNorma = montaProjetoNorma(projetoNorma);\n\n  return resultado;\n};\n\nexport const buildJsonixArticulacaoFromProjetoNorma = (articulacaoProjetoNorma: Articulacao): any => {\n  const articulacao = {\n    TYPE_NAME: 'br_gov_lexml__1.Articulacao',\n    lXhier: buildTree(articulacaoProjetoNorma, { articulacao: {} }),\n  };\n\n  return articulacao;\n};\n\nconst montaCabecalho = (urn: string): any => {\n  return {\n    name: {\n      namespaceURI: 'http://www.lexml.gov.br/1.0',\n      localPart: 'LexML',\n      prefix: '',\n      key: '{http://www.lexml.gov.br/1.0}LexML',\n      string: '{http://www.lexml.gov.br/1.0}LexML',\n    },\n    value: {\n      TYPE_NAME: 'br_gov_lexml__1.LexML',\n      metadado: {\n        TYPE_NAME: 'br_gov_lexml__1.Metadado',\n        identificacao: {\n          TYPE_NAME: 'br_gov_lexml__1.Identificacao',\n          urn: urn,\n        },\n      },\n    },\n  };\n};\n\nconst montaProjetoNorma = (projetoNorma: any): any => {\n  const p = {\n    TYPE_NAME: 'br_gov_lexml__1.ProjetoNorma',\n  };\n\n  p[isNorma(projetoNorma) ? 'norma' : 'projeto'] = {\n    TYPE_NAME: 'br_gov_lexml__1.HierarchicalStructure',\n    parteInicial: montaParteInicial(projetoNorma),\n    articulacao: montaArticulacao(projetoNorma),\n  };\n\n  return p;\n};\n\nconst montaParteInicial = (projetoNorma: any): any => {\n  return {\n    TYPE_NAME: 'br_gov_lexml__1.ParteInicial',\n    epigrafe: {\n      TYPE_NAME: 'br_gov_lexml__1.GenInline',\n      id: 'epigrafe',\n      content: projetoNorma.epigrafe,\n    },\n    ementa: {\n      TYPE_NAME: 'br_gov_lexml__1.GenInline',\n      id: 'ementa',\n      content: projetoNorma.ementa,\n    },\n    preambulo: {\n      TYPE_NAME: 'br_gov_lexml__1.TextoType',\n      id: 'preambulo',\n      p: projetoNorma.preambulo,\n    },\n  };\n};\n\nconst montaArticulacao = (projetoNorma: any): any => {\n  const articulacao = {\n    TYPE_NAME: 'br_gov_lexml__1.Articulacao',\n    lXhier: buildTree(projetoNorma.articulacao, projetoNorma.articulacao),\n  };\n\n  return articulacao;\n};\n\nconst buildTree = (dispositivo: Dispositivo, obj: any): any => {\n  let tree;\n  if (isAgrupador(dispositivo)) {\n    tree = obj.lXhier = [];\n  } else {\n    tree = obj.lXcontainersOmissis = [];\n  }\n\n  if (isArtigo(dispositivo)) {\n    const node = buildNode((dispositivo as Artigo).caput!);\n    buildAlteracaoSeNecessario(dispositivo, node.value);\n\n    tree.push(node);\n\n    buildFilhos(\n      dispositivo.filhos?.filter(f => !isCaput(f.pai!)),\n      tree\n    );\n\n    buildTree((dispositivo as Artigo).caput!, node.value);\n  } else {\n    buildFilhos(dispositivo.filhos, tree);\n  }\n\n  return tree;\n};\n\nconst buildAlteracaoSeNecessario = (dispositivo: Dispositivo, node: any): void => {\n  if (dispositivo.hasAlteracao()) {\n    node['alteracao'] = {\n      TYPE_NAME: 'br_gov_lexml__1.Alteracao',\n      base: '',\n      id: '',\n      content: [],\n    };\n\n    node.alteracao.base = dispositivo.alteracoes?.base ?? '';\n    node.alteracao.id = buildIdAlteracao((dispositivo as Artigo).caput!);\n\n    dispositivo.alteracoes!.filhos?.forEach(filho => {\n      const n = buildNode(filho);\n\n      node.alteracao.content.push(n);\n\n      buildTree(filho, n.value);\n    });\n  }\n};\n\nconst buildFilhos = (filhos: Dispositivo[], tree: any): any => {\n  filhos?.forEach(filho => {\n    const node = buildNode(filho);\n    tree.push(node);\n\n    buildTree(filho, node.value);\n  });\n};\n\nconst buildNode = (dispositivo: Dispositivo): any => {\n  const node = {\n    name: {\n      namespaceURI: 'http://www.lexml.gov.br/1.0',\n      localPart: dispositivo.tipo,\n      prefix: '',\n      key: `{http://www.lexml.gov.br/1.0}${dispositivo.tipo}`,\n      string: `{http://www.lexml.gov.br/1.0}${dispositivo.tipo}`,\n    },\n    value: {\n      TYPE_NAME: 'br_gov_lexml__1.DispositivoType',\n    },\n  };\n\n  buildDispositivo(dispositivo, node.value);\n\n  return node;\n};\n\nconst buildDispositivo = (dispositivo: Dispositivo, value: any): void => {\n  value['href'] = isCaput(dispositivo) ? buildHref(dispositivo.pai!) + '_' + buildHref(dispositivo) : buildHref(dispositivo);\n\n  value['id'] = buildId(dispositivo);\n\n  if (dispositivo.rotulo && /^[\"].*/.test(dispositivo.rotulo)) {\n    value['abreAspas'] = 's';\n    value.rotulo = dispositivo.rotulo.substring(1);\n  } else if (!isCaput(dispositivo) && !isOmissis(dispositivo)) {\n    value.rotulo = dispositivo.rotulo;\n  }\n\n  if (isCaput(dispositivo)) {\n    if (/.*(NR)/.test(dispositivo.texto)) {\n      value['fechaAspas'] = 's';\n      value['notaAlteracao'] = 'NR';\n    }\n  }\n\n  if (isAgrupador(dispositivo)) {\n    value.nomeAgrupador = {\n      TYPE_NAME: 'br_gov_lexml__1.GenInline',\n      content: buildContent(dispositivo),\n    };\n  } else if (!isArtigo(dispositivo)) {\n    if (dispositivo.texto === TEXTO_OMISSIS) {\n      value['textoOmitido'] = 's';\n    } else {\n      value['p'] = [{ TYPE_NAME: 'br_gov_lexml__1.GenInline', content: buildContent(dispositivo) }];\n    }\n  }\n};\n\nconst buildContent = (dispositivo: Dispositivo): any[] => {\n  const regex = /<a[^>]+href=\"(.*?)\"[^>]*>(.*?)<\\/a>/gi;\n  const result: any[] = [];\n\n  const ocorrencias = dispositivo.texto.match(regex);\n\n  if (!ocorrencias) {\n    const fim = dispositivo.texto.indexOf(' (NR)');\n    result.push(dispositivo.texto.substring(0, fim === -1 ? undefined : fim));\n  } else if (!dispositivo.texto.startsWith(ocorrencias[0])) {\n    result.push(dispositivo.texto.substring(0, dispositivo.texto.indexOf(ocorrencias![0])));\n  }\n\n  ocorrencias?.forEach((m, i) => {\n    const http = m.match(regex) ? m : '';\n\n    result.push(buildSpan(http ?? ''));\n\n    const from = dispositivo.texto?.indexOf(m) + m.length;\n\n    if (from < dispositivo.texto.length - 1) {\n      const to = ocorrencias[i + 1] ? dispositivo.texto.indexOf(ocorrencias[i + 1]) : dispositivo.texto.length;\n      result.push(\n        dispositivo.texto\n          .substring(from, to)\n          ?.replace(/strong>/gi, 'b>')\n          .replace(/em>/gi, 'i>')\n      );\n    }\n  });\n  return result;\n};\n\nconst buildSpan = (m: string): any => {\n  const resultHref = m.match(/href=\"(.*?)\"*>/i);\n  const href = resultHref && resultHref[1] ? resultHref[1] : '';\n\n  const contentHref = m.match(/<a[^>]+href=\".*?\"[^>]*>(.*?)<\\/a>/);\n  const content = contentHref && contentHref[1] ? [contentHref[1]?.trim()] : [''];\n\n  return {\n    name: {\n      namespaceURI: 'http://www.lexml.gov.br/1.0',\n      localPart: 'span',\n      prefix: '',\n      key: '{http://www.lexml.gov.br/1.0}span',\n      string: '{http://www.lexml.gov.br/1.0}span',\n    },\n    value: {\n      TYPE_NAME: 'br_gov_lexml__1.GenInline',\n      href,\n      content,\n    },\n  };\n};\n","import { Articulacao, Artigo, Dispositivo } from '../../../dispositivo/dispositivo';\nimport { isOmissis } from '../../../dispositivo/tipo';\nimport { Metadado, ParteInicial, TextoArticulado } from '../../../documento';\nimport { ClassificacaoDocumento } from '../../../documento/classificacao';\nimport { TEXTO_OMISSIS } from '../../conteudo/textoOmissis';\nimport { createAlteracao, createArticulacao, criaDispositivo } from '../../dispositivo/dispositivoLexmlFactory';\nimport { DispositivoOriginal } from '../../situacao/dispositivoOriginal';\nimport { ProjetoNorma } from '../projetoNorma';\nimport { getTipo } from '../urnUtil';\nimport { isArtigo } from './../../../dispositivo/tipo';\n\nexport let isEmendamento = false;\n\nexport const buildProjetoNormaFromJsonix = (documentoLexml: any, emendamento = false): ProjetoNorma => {\n  isEmendamento = emendamento;\n\n  if (!documentoLexml?.value?.projetoNorma) {\n    throw new Error('No se trata de um documento lexml vlido');\n  }\n\n  return {\n    classificacao: documentoLexml.value?.projetoNorma.norma ? ClassificacaoDocumento.NORMA : ClassificacaoDocumento.PROJETO,\n    tipo: getTipo(getUrn(documentoLexml)),\n    ...getMetadado(documentoLexml),\n    ...getParteInicial(documentoLexml),\n    ...getTextoArticulado(documentoLexml.value.projetoNorma.norma ? documentoLexml.value.projetoNorma.norma : documentoLexml.value.projetoNorma.projeto),\n  };\n};\n\nconst retiraCaracteresDesnecessarios = (texto: string): any => {\n  return texto?.replace(/[\\n]/g, '').trim();\n};\n\nexport const getUrn = (documento: any): string => {\n  return documento?.value?.metadado?.identificacao?.urn;\n};\n\nconst getMetadado = (documento: any): Metadado => {\n  return {\n    urn: getUrn(documento),\n  };\n};\n\nconst getParteInicial = (documento: any): ParteInicial => {\n  const epigrafe = documento?.value?.projetoNorma?.norma?.parteInicial?.epigrafe?.content[0] ?? '';\n  const ementa = buildContent(documento?.value?.projetoNorma?.norma?.parteInicial?.ementa.content);\n  const preambulo = documento?.value?.projetoNorma?.norma?.parteInicial?.preambulo?.p[0].content[0] ?? '';\n\n  return {\n    epigrafe: retiraCaracteresDesnecessarios(epigrafe),\n    ementa: retiraCaracteresDesnecessarios(ementa),\n    preambulo: retiraCaracteresDesnecessarios(preambulo),\n  };\n};\n\nconst getTextoArticulado = (norma: any): TextoArticulado => {\n  return {\n    articulacao: buildArticulacao(norma.articulacao),\n  };\n};\n\nconst buildArticulacao = (tree: any): Articulacao => {\n  const articulacao = createArticulacao();\n\n  buildTree(articulacao, tree.lXhier);\n\n  return articulacao;\n};\n\nconst buildTree = (pai: Dispositivo, filhos: any): void => {\n  if (!pai || !filhos) {\n    return;\n  }\n\n  filhos?.forEach((el: any) => {\n    let dispositivo;\n    const notaAlteracao = el.value?.notaAlteracao;\n    const complemento = el.value?.fechaAspas !== undefined ? (notaAlteracao ? ` (${notaAlteracao})` : ' (NR)') : '';\n\n    if (el.name?.localPart === 'Caput') {\n      if (el.value?.abreAspas === 's') {\n        dispositivo.rotulo = '\\u201C' + el.value?.rotulo;\n        dispositivo.cabecaAlteracao = true;\n        dispositivo.notaAlteracao = notaAlteracao;\n      } else if (el.value?.rotulo) {\n        dispositivo.rotulo = el.value.rotulo;\n        dispositivo.createNumeroFromRotulo(dispositivo.rotulo);\n      }\n\n      pai.texto = el.value?.textoOmitido ? TEXTO_OMISSIS : retiraCaracteresDesnecessarios(buildContentDispositivo(el)) + complemento;\n\n      (pai as Artigo).caput!.href = el.value?.href;\n      (pai as Artigo).caput!.id = el.value?.id;\n      buildAlteracao(pai, el.value?.alteracao);\n      buildTree((pai as Artigo).caput!, el.value?.lXcontainersOmissis);\n    } else if (el.name?.localPart === 'alteracao') {\n      buildAlteracao(pai, el);\n      buildTree((pai as Artigo).caput!, el.value?.lXcontainersOmissis);\n    } else {\n      dispositivo = buildDispositivo(pai, el);\n      buildTree(dispositivo, el.value?.lXhier ?? el.value?.lXcontainersOmissis);\n    }\n  });\n};\n\nconst buildAlteracao = (pai: Dispositivo, el: any): void => {\n  if (el) {\n    createAlteracao(pai);\n    pai.alteracoes!.id = el.id;\n    pai.alteracoes!.base = el.base;\n    if (isEmendamento) {\n      pai.alteracoes!.situacao = new DispositivoOriginal();\n    }\n    el.content?.forEach((c: any) => {\n      const d = buildDispositivo(pai.alteracoes!, c);\n      d.isDispositivoAlteracao = true;\n      d.rotulo = '\\u201C' + c.value?.rotulo;\n      buildTree(d!, c.value?.lXhier ?? c.value?.lXcontainersOmissis);\n    });\n  }\n};\n\nconst buildDispositivo = (pai: Dispositivo, el: any): Dispositivo => {\n  const dispositivo = criaDispositivo(pai, el.name?.localPart);\n\n  const notaAlteracao = el.value?.notaAlteracao;\n  const complemento = el.value?.fechaAspas !== undefined ? (notaAlteracao ? ` (${notaAlteracao})` : ' (NR)') : '';\n\n  if (!isOmissis(dispositivo)) {\n    if (el.value?.abreAspas === 's') {\n      dispositivo.rotulo = '\\u201C' + el.value?.rotulo;\n      dispositivo.cabecaAlteracao = true;\n      dispositivo.notaAlteracao = notaAlteracao;\n    } else {\n      dispositivo.rotulo = el.value?.rotulo;\n    }\n    dispositivo.createNumeroFromRotulo(dispositivo.rotulo!);\n  }\n\n  dispositivo.href = el.value?.href;\n  dispositivo.id = el.value?.id;\n  if (isEmendamento) {\n    dispositivo.situacao = new DispositivoOriginal();\n    if (isArtigo(dispositivo)) {\n      (dispositivo as Artigo).caput!.situacao = new DispositivoOriginal();\n    }\n  }\n  dispositivo.texto = el.value?.textoOmitido ? TEXTO_OMISSIS : retiraCaracteresDesnecessarios(buildContentDispositivo(el)) + complemento;\n  return dispositivo;\n};\n\nconst montaReferencia = (value: any): string => {\n  return `<a href=\"${value.href}\"> ${value.content[0]} </a>`;\n};\n\nconst buildContentDispositivo = (el: any): string => {\n  let texto = '';\n  if (el.value?.nomeAgrupador) {\n    return el.value.nomeAgrupador.content[0] ?? '';\n  } else {\n    el.value?.p\n      ?.map((p: any) => p)\n      ?.map((a: any) => a.content)\n      .forEach((content: any) => (texto += buildContent(content)));\n  }\n  return texto.replace(/b>/gi, 'strong>').replace(/i>/gi, 'em>');\n};\n\nconst buildContent = (content: any): string => {\n  let texto = '';\n  content?.forEach((element: any) => {\n    if (element.value) {\n      texto += montaReferencia(element.value);\n    } else {\n      texto += element;\n    }\n  });\n\n  return texto;\n};\n","export const DOCUMENTO_PADRAO = {\n  name: {\n    namespaceURI: 'http://www.lexml.gov.br/1.0',\n    localPart: 'LexML',\n    prefix: '',\n    key: '{http://www.lexml.gov.br/1.0}LexML',\n    string: '{http://www.lexml.gov.br/1.0}LexML',\n  },\n  value: {\n    TYPE_NAME: 'br_gov_lexml__1.LexML',\n    metadado: {\n      TYPE_NAME: 'br_gov_lexml__1.Metadado',\n      identificacao: {\n        TYPE_NAME: 'br_gov_lexml__1.Identificacao',\n        urn: '',\n      },\n    },\n    projetoNorma: {\n      TYPE_NAME: 'br_gov_lexml__1.ProjetoNorma',\n      norma: {\n        TYPE_NAME: 'br_gov_lexml__1.HierarchicalStructure',\n        parteInicial: {\n          TYPE_NAME: 'br_gov_lexml__1.ParteInicial',\n          epigrafe: {\n            TYPE_NAME: 'br_gov_lexml__1.GenInline',\n            id: 'epigrafe',\n            content: [''],\n          },\n          ementa: {\n            TYPE_NAME: 'br_gov_lexml__1.GenInline',\n            id: 'ementa',\n            content: [''],\n          },\n          preambulo: {\n            TYPE_NAME: 'br_gov_lexml__1.TextoType',\n            id: 'preambulo',\n            p: [\n              {\n                TYPE_NAME: 'br_gov_lexml__1.GenInline',\n                content: [''],\n              },\n            ],\n          },\n        },\n        articulacao: {\n          TYPE_NAME: 'br_gov_lexml__1.Articulacao',\n          lXhier: [\n            {\n              name: {\n                namespaceURI: 'http://www.lexml.gov.br/1.0',\n                localPart: 'Artigo',\n                prefix: '',\n                key: '{http://www.lexml.gov.br/1.0}Artigo',\n                string: '{http://www.lexml.gov.br/1.0}Artigo',\n              },\n              value: {\n                TYPE_NAME: 'br_gov_lexml__1.DispositivoType',\n                id: 'art1',\n                rotulo: 'Art. 1',\n                lXcontainersOmissis: [\n                  {\n                    name: {\n                      namespaceURI: 'http://www.lexml.gov.br/1.0',\n                      localPart: 'Caput',\n                      prefix: '',\n                      key: '{http://www.lexml.gov.br/1.0}Caput',\n                      string: '{http://www.lexml.gov.br/1.0}Caput',\n                    },\n                    value: {\n                      TYPE_NAME: 'br_gov_lexml__1.DispositivoType',\n                      id: 'art1_cpt',\n                      p: [\n                        {\n                          TYPE_NAME: 'br_gov_lexml__1.GenInline',\n                          content: [''],\n                        },\n                      ],\n                    },\n                  },\n                ],\n              },\n            },\n          ],\n        },\n      },\n    },\n  },\n};\n","import { customElement, html, LitElement, property, PropertyValues, TemplateResult } from 'lit-element';\nimport { connect } from 'pwa-helpers';\nimport { ComandoEmendaBuilder } from '../emenda/comando-emenda-builder';\nimport { EmendaBuilder } from '../emenda/emenda-builder';\nimport { ClassificacaoDocumento } from '../model/documento/classificacao';\nimport { aplicarAlteracoesEmendaAction } from '../model/lexml/acao/aplicarAlteracoesEmenda';\nimport { openArticulacaoAction } from '../model/lexml/acao/openArticulacaoAction';\nimport { buildJsonixArticulacaoFromProjetoNorma } from '../model/lexml/documento/conversor/buildJsonixFromProjetoNorma';\nimport { buildProjetoNormaFromJsonix, getUrn } from '../model/lexml/documento/conversor/buildProjetoNormaFromJsonix';\nimport { DOCUMENTO_PADRAO } from '../model/lexml/documento/modelo/documentoPadrao';\nimport { DispositivoAdicionado } from '../model/lexml/situacao/dispositivoAdicionado';\nimport { rootStore } from '../redux/store';\nimport { ComandoEmenda, Emenda } from './../model/lexml/documento/emenda';\n\n@customElement('lexml-eta')\nexport class LexmlEtaComponent extends connect(rootStore)(LitElement) {\n  @property({ type: String }) modo = '';\n  @property({ type: Object }) projetoNorma = {};\n  @property({ type: Object }) emenda = {};\n\n  createRenderRoot(): LitElement {\n    return this;\n  }\n\n  getEmenda(): Emenda | undefined {\n    const classificacao = this.modo;\n    if (classificacao !== ClassificacaoDocumento.EMENDA && classificacao !== ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER) {\n      return undefined;\n    }\n    const urn = (this.projetoNorma as any).value.metadado.identificacao.urn!;\n    const articulacao = rootStore.getState().elementoReducer.articulacao;\n    return new EmendaBuilder(classificacao, urn, articulacao).getEmenda();\n  }\n\n  getComandoEmenda(): ComandoEmenda {\n    const urn = (this.projetoNorma as any).value.metadado.identificacao.urn!;\n    const articulacao = rootStore.getState().elementoReducer.articulacao;\n    return new ComandoEmendaBuilder(urn, articulacao).getComandoEmenda();\n  }\n\n  getProjetoAtualizado(): any {\n    const out = { ...this.projetoNorma };\n    const articulacaoAtualizada = buildJsonixArticulacaoFromProjetoNorma(rootStore.getState().elementoReducer.articulacao);\n    (out as any).value.projetoNorma[(out as any).value.projetoNorma.norma ? 'norma' : 'projeto'].articulacao.lXhier = articulacaoAtualizada.lXhier;\n    return out;\n  }\n\n  update(changedProperties: PropertyValues): void {\n    if (this.hasChangedProjetoNorma(changedProperties) || this.hasChangedModo(changedProperties)) {\n      this.loadProjetoNorma();\n    }\n    if (this.hasChangedEmenda(changedProperties) && Object.keys(this.emenda).length > /*  */ 0) {\n      this.loadEmenda();\n    }\n    super.update(changedProperties);\n  }\n\n  private hasChangedProjetoNorma(changedProperties: PropertyValues): boolean {\n    return changedProperties.has('projetoNorma') && changedProperties.get('projetoNorma') !== undefined;\n  }\n\n  private hasChangedModo(changedProperties: PropertyValues): boolean {\n    return changedProperties.has('modo') && changedProperties.get('modo') !== undefined;\n  }\n\n  private hasChangedEmenda(changedProperties: PropertyValues): boolean {\n    return changedProperties.has('emenda') && changedProperties.get('emenda') !== undefined;\n  }\n\n  private loadProjetoNorma(): void {\n    let documento;\n\n    if (!this.projetoNorma || !(this.projetoNorma as any).value) {\n      this.projetoNorma = DOCUMENTO_PADRAO;\n    }\n\n    if (this.modo === ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER) {\n      const urn = getUrn(this.projetoNorma) ?? '';\n      documento = buildProjetoNormaFromJsonix(DOCUMENTO_PADRAO, true);\n      documento.urn = urn;\n      const artigo = documento.articulacao!.artigos[0]!;\n      artigo.rotulo = 'Art.';\n      artigo.numero = '1';\n      artigo.id = 'art1';\n      const situacao = new DispositivoAdicionado();\n      situacao.tipoEmenda = ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER;\n      artigo.situacao = situacao;\n    } else {\n      documento = buildProjetoNormaFromJsonix(this.projetoNorma, this.modo === ClassificacaoDocumento.EMENDA);\n    }\n\n    rootStore.dispatch(openArticulacaoAction(documento.articulacao!, this.modo));\n  }\n\n  private loadEmenda(): void {\n    if (this.emenda) {\n      setTimeout(() => {\n        rootStore.dispatch(\n          aplicarAlteracoesEmendaAction.execute({\n            dispositivosModificados: (this.emenda as any).dispositivosModificados,\n            dispositivosSuprimidos: (this.emenda as any).dispositivosSuprimidos,\n            dispositivosAdicionados: (this.emenda as any).dispositivosAdicionados,\n          })\n        );\n      }, 1000);\n    }\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        #gtx-trans {\n          display: none;\n        }\n\n        lexml-eta-articulacao {\n          display: block;\n          height: 100%;\n        }\n\n        lexml-eta-articulacao:focus {\n          outline: 0;\n          border: 0px solid #f1f1f1;\n          -webkit-box-shadow: 0px;\n          box-shadow: none;\n        }\n      </style>\n\n      <lexml-eta-articulacao></lexml-eta-articulacao>\n    `;\n  }\n}\n"],"names":["defaultState","Symbol","delegatesFocus","firstRender","focusTarget","hasDynamicTemplate","ids","nativeInternals","raiseChangeEvents","render","renderChanges","rendered","rendering","setState","shadowRoot","shadowRootMode","state","stateEffects","template","booleanAttributeValue","name","value","toLowerCase","deepContains","container","target","current","parent","assignedSlot","parentNode","host","firstFocusableElement","root","walker","walkComposedTree","node","HTMLElement","matches","tabIndex","next","indexOfItemContainingTarget","items","Array","prototype","findIndex","call","item","ownEvent","event","eventSource","composedPath","selfAndComposedAncestors","ShadowRoot","composedAncestors","setInternalState","element","toggleAttribute","states","toggle","standardBooleanAttributes","checked","defer","disabled","hidden","ismap","multiple","noresize","readonly","selected","filter","children","assignedNodes","HTMLSlotElement","flatten","length","childNodes","i","fragmentFrom","html","strings","substitutions","templateFrom","content","document","createElement","innerHTML","String","raw","mapBaseTagToCount","Map","descriptor","e","classFn","baseTag","classNameRegex","classNameMatch","match","uppercaseRegEx","replace","letter","offset","tag","count","get","customElements","define","set","registerCustomElement","original","replacement","SVGElement","forEach","attributes","attribute","getAttribute","setAttribute","classList","className","add","style","key","append","replaceChild","transmute","constructor","Element","localName","attributeToPropertyNames","tabindex","propertyNamesToAttributes","attributesForClass","baseClass","Object","getPrototypeOf","baseAttributes","observedAttributes","diff","getOwnPropertyNames","propertyName","getOwnPropertyDescriptor","map","setterName","propertyNameToAttribute","indexOf","concat","stateKey","raiseChangeEventsInNextRenderKey","changedSinceLastRenderKey","fieldsChanged","changes","changed","field","value1","value2","Date","getTime","classTemplateMap","shadowIdProxyKey","proxyElementKey","shadowIdProxyHandler","id","getElementById","ReactiveElement","Base","attributeChangedCallback","attributeName","oldValue","newValue","super","this","hyphenRegEx","toUpperCase","attributeToPropertyName","parsed","AttributeMarshallingMixin","Reactive","undefined","connectedCallback","render$3","renderChanges$1","saveRaiseChangeEvents","rendered$1","async","console","warn","assign","effects","changedByEffects","keys","copyStateWithChanges","freeze","willRender","isConnected","Promise","resolve","stateEffects$1","URLSearchParams","location","search","defineProperty","ReactiveMixin","Proxy","t","HTMLTemplateElement","getTemplate","attachShadow","mode","clone","importNode","ShadowTemplateMixin","checkSize","closestAvailableItemIndex","contentSlot","coreInternal.defaultState","defaultTabIndex","coreInternal.delegatesFocus","effectEndTarget","coreInternal.firstRender","coreInternal.focusTarget","getItemText","goDown","goEnd","goFirst","goLast","goLeft","goNext","goPrevious","goRight","goStart","goToItemWithPrefix","goUp","coreInternal.hasDynamicTemplate","coreInternal.ids","inputDelegate","itemsDelegate","keydown","mouseenter","mouseleave","coreInternal.nativeInternals","coreInternal.raiseChangeEvents","coreInternal.render","coreInternal.renderChanges","renderDataToElement","coreInternal.rendered","coreInternal.rendering","scrollTarget","coreInternal.setState","coreInternal.shadowRoot","coreInternal.shadowRootMode","startEffect","coreInternal.state","coreInternal.stateEffects","swipeDown","swipeDownComplete","swipeLeft","swipeLeftTransitionEnd","swipeRight","swipeRightTransitionEnd","swipeUp","swipeUpComplete","swipeStart","swipeTarget","tap","coreInternal.template","toggleSelectedFlag","elix","internal","previousBodyOverflowKey","previousDocumentMarginRightKey","wrap","wrappingFocusKey","FocusCaptureMixin","firstElement","firstElementIsDocumentActive","activeElement","contains","shadowActiveElement","firstElementIsShadowActive","shiftKey","focusCatcher","focus","render$2","addEventListener","focusElement","focusCapture","replaceWith","KeyboardMixin","focusVisible","preventDefault","stopImmediatePropagation","Number","isNaN","role","removeAttribute","s","AriaRoleMixin","Backdrop","ModalBackdrop","window","touches","closePromiseKey","closeResolveKey","OpenCloseMixin","opened","closeResult","close","closed","closeFinished","defaults","effect","effectPhase","openCloseEffects","open","oldEvent","CustomEvent","bubbles","detail","dispatchEvent","openedChangeEvent","oldOpenedEvent","openEvent","oldClosedEvent","closeEvent","closeResolve","whenClosed","OverlayFrame","appendedToDocumentKey","defaultZIndexKey","restoreFocusToElementKey","bringToFront","defaultZIndex","elements","body","querySelectorAll","zIndices","from","getComputedStyle","zIndex","position","parseInt","Math","max","maxZIndexInUse","toString","hasZIndex","computedZIndex","explicitZIndex","isExplicitZIndexNumeric","SlotContentMixin","slot","querySelector","autoFocus","persistent","newFocusedElement","relatedTarget","removeChild","result","OverlayMixin","Overlay","backdrop","backdropPartType","framePartType","frame","renderParts","handled","canceled","documentElement","documentWidth","clientWidth","scrollBarWidth","innerWidth","overflow","marginRight","DialogModalityMixin","Dialog","AlertDialog","choiceButtons","choiceButtonPartType","choices","choice","find","choiceButtonContainer","button","textContent","copy","oldLength","newLength","oldChild","newChild","insertBefore","updateChildNodes","part","defaultSlot","focusTest","nativeDelegatesFocus","getLabelFromElement","selectedText","option","options","innerText","refreshInputLabel","ariaLabel","ariaLabelledby","rootNode","getRootNode","inputLabel","split","elementWithId","join","elementWithFor","labelElement","closest","trim","keyboardActive","focusVisibleChangedListenerKey","FocusVisibleMixin","then","isFocusedElement","containsFocus","removeEventListener","updateKeyboardActive","newKeyboardActive","DelegateFocusMixin","focusOptions","capture","extendsKey","delegatedPropertySettersKey","focusableByDefault","a","area","details","iframe","input","select","textarea","reraiseEvents","address","blockquote","caption","center","dd","dir","div","dl","dt","fieldset","form","h1","h2","h3","h4","h5","h6","img","li","link","menu","object","ol","p","script","tbody","tfoot","thead","mouseEventNames","eventBubbles","abort","change","reset","blockElements","attributesWithoutProperties","WrappedStandardElement","cast","attachInternals","innerAttributes","blur","inner","extends","eventName","Event","applyAttribute","property","display","includes","static","extendsTag","Wrapped","cls","names","delegate","args","configurable","enumerable","writable","createMethodDelegate","getInnerProperty","setInnerProperty","createPropertyDelegate","createDelegate","push","defineDelegates","composeFocus","closestFocusableNode","ComposedFocusMixin","removingAriaAttribute","requestIdleCallback","setTimeout","DelegateInputLabelMixin","Button","clickEvent","MouseEvent","cancelable","PlainButton","PlainButtonMixin","PlainBorderButton","PlainModalBackdrop","PlainOverlayFrame","PlainModalOverlayMixin","PlainAlertDialog","PlainDialog","defaultAriaRole","article","hr","output","progress","table","td","th","ul","defaultScrollTarget","ancestor","isElementScrollable","getScrollableElement","overflowX","overflowY","moveToIndex","index","direction","newIndex","currentIndex","auxiliarycustomTags","getIndexOfItemAtY","y","downward","start","end","step","itemRect","availableItemFlags","getBoundingClientRect","top","bottom","itemStyle","itemPaddingTop","paddingTop","parseFloat","itemPaddingBottom","paddingBottom","contentTop","contentBottom","clientHeight","scrollOnePage","targetRect","indexOfItemAtEdge","currentRect","pageHeight","saveRaiseChangesEvents","typedPrefixKey","prefixTimeoutKey","resetPrefixTimeout","clearTimeout","resetTypedPrefix","setPrefixTimeout","LanguageDirectionMixin","rightToLeft","ContentItemsMixin","isSubstantiveElement","base","itemRole","AriaMenuMixin","currentItemRequired","cursorOperationsWrap","currentItem","CursorAPIMixin","scrollCurrentItemIntoView","scrollTargetRect","bottomDelta","leftDelta","left","rightDelta","right","topDelta","orientation","scrollLeft","ceil","scrollTop","CursorInViewMixin","canGoDown","canGoLeft","canGoRight","canGoUp","canGoNext","canGoPrevious","languageDirection","horizontal","vertical","DirectionCursorMixin","ItemsAPIMixin","desiredCurrentIndex","newDesiredIndex","newItemIndex","min","newItem","ItemsCursorMixin","texts","getText","getTextsFromItems","ItemsTextMixin","altKey","metaKey","KeyboardDirectionMixin","pageDown","pageUp","KeyboardPagedCursorMixin","prefix","searchText","text","substr","previousIndex","handleBackspace","ctrlKey","char","handlePlainCharacter","KeyboardPrefixCursorMixin","SlotItemsMixin","touchAction","mozUserSelect","msUserSelect","webkitUserSelect","userSelect","Node","targetIndex","stopPropagation","TapCursorMixin","Menu","highlightCurrentItem","currentItemFocused","probablyDesktop","matchMedia","flashDuration","slice","isDefaultFocusableItem","documentMouseupListenerKey","handleMouseup","hitTargets","elementsFromPoint","clientX","clientY","overSource","source","popup","overPopup","overPopupFrame","dragSelect","listenIfOpenAndConnected","bind","DisabledMixin","availableSpace","sourceRect","boundsRect","align","sourceOrigin","getSourceOrigin","height","width","x","layoutPopup","popupRect","normalized","logicalAlign","logicalDirection","defaultDirection","physicalDirection","above","below","column","row","crossAxis","defaultAlign","stretch","normalizeOptions","layouts","preferredDirection","preferredAlign","flipDirection","flipAlign","possibilties","prioritizedLayouts","sort","layout1","layout2","space1","space2","fitsWidth1","fitsHeight1","fitsEither1","fitsBoth1","fitsWidth2","fitsHeight2","fitsEither2","fitsBoth2","area1","area2","compareLayouts","layout","rect","boundsLeft","boundsTop","boundsBottom","boundsRight","DOMRect","getPositionedRect","implicitCloseListenerKey","blurHandler","closeHandler","handleEvent","type","closeOnWindowResize","PopupModalityMixin","Popup","mousedownHandler","resizeListenerKey","choosePopupLayout","popupAlign","popupDirection","popupLayout","viewportBounds","popupPartType","sourcePartType","viewport","visualViewport","offsetLeft","offsetTop","innerHeight","disconnectedCallback","PopupDragSelectMixin","ariaHasPopup","horizontalAlign","popupPosition","positionStyling","bounds","styling","getPositiongStylingForLayout","opacity","addEventListeners","removeEventListeners","documentMousemoveListenerKey","handleMousemove","hasHoveredOverItemSinceOpened","hoverIndex","selectCurrentItemAndClose","originalRaiseChangeEvents","cursorDefined","list","popupList","flashCurrentItem","PopupListMixin","popupFocused","measured","popupHeight","MenuButton","menuPartType","UpDownToggle","downIcon","upIcon","popupTogglePartType","popupToggle","PlainMenu","PlainOpenCloseToggle","downIconGlyph","firstElementChild","upIconGlyph","PlainBackdrop","PlainPopup","PlainMenuButton","toggleDirection","PopupToggleMixin","MenuItem","CurrentMixin","SelectableMixin","PlainMenuItem","MenuSeparator","PlainMenuSeparator","timeoutKey","effectTarget","offsetHeight","TransitionEffectMixin","Toast","startTimerIfOpened","clearTimer","duration","fromEdge","hostEdgeStyles","alignItems","justifyContent","oppositeEdge","languageAdjustedEdge","edgeTransforms","openEdgeTransforms","transform","startTimer","PlainToast","__decorate","decorators","desc","d","c","arguments","r","Reflect","decorate","factory","exports","module","amd","self","modules","installedModules","__webpack_require__","moduleId","l","m","getter","o","n","__esModule","hasOwnProperty","container_1","format_1","leaf_1","scroll_1","inline_1","block_1","embed_1","text_1","attributor_1","class_1","style_1","store_1","Registry","Parchment","Scope","create","query","register","Container","default","Format","Leaf","Embed","Scroll","Block","Inline","Text","Attributor","Attribute","Class","Style","Store","extendStatics","__extends","setPrototypeOf","__proto__","b","__","ParchmentError","_super","message","_this","Error","classes","tags","types","scope","ANY","TEXT_NODE","LEVEL","BLOCK","INLINE","tagName","TYPE","DATA_KEY","BlotClass","bubble","blot","Definitions","_i","Definition","blotName","attrName","keyName","isArray","tagNames","equal","extend","op","NULL_CHARACTER","fromCharCode","Delta","ops","insert","newOp","delete","retain","lastOp","unshift","splice","chop","pop","predicate","partition","passed","failed","reduce","initial","changeLength","elem","Infinity","iter","iterator","hasNext","nextOp","compose","other","thisIter","otherIter","firstOther","peek","firstLeft","peekType","peekLength","delta","thisOp","otherOp","rest","diffResult","component","opLength","INSERT","DELETE","EQUAL","eachLine","newline","line","priority","transformPosition","nextType","hasOwn","toStr","gOPD","arr","isPlainObject","obj","hasOwnConstructor","hasIsPrototypeOf","setProperty","getProperty","src","copyIsArray","deep","BlockEmbed","bubbleFormats","_createClass","defineProperties","props","Constructor","protoProps","staticProps","_get","receiver","Function","_extend2","_interopRequireDefault","_quillDelta2","_parchment2","_break2","_inline2","_text2","_classCallCheck","instance","TypeError","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","_Parchment$Embed","apply","domNode","formats","values","BLOCK_ATTRIBUTE","format","def","endsWith","block","insertAt","BLOCK_BLOT","_Parchment$Block","_this2","cache","descendants","leaf","lines","shift","tail","ref","head","remove","context","child","force","statics","defaultChild","allowedChildren","overload","expandConfig","_typeof","_slicedToArray","_arr","_n","_d","_e","_s","done","err","sliceIterator","_editor2","_emitter4","_module2","_selection","_selection2","_logger2","_theme2","_defineProperty","debug","Quill","error","__quill","addContainer","scrollingContainer","emitter","scroll","whitelist","editor","selection","theme","keyboard","addModule","clipboard","history","init","on","events","EDITOR_CHANGE","TEXT_CHANGE","isBlank","SCROLL_UPDATE","mutations","range","lastRange","modify","update","contents","convert","setContents","clear","placeholder","readOnly","disable","limit","level","imports","path","overwrite","startsWith","refNode","setRange","_this3","_overload","_overload2","deleteText","enable","enabled","scrollIntoView","_this4","sources","API","getSelection","formatLine","formatText","setSelection","SILENT","_this5","_overload3","_overload4","_this6","_overload5","_overload6","getBounds","containerBounds","getLength","_overload7","_overload8","getContents","getFormat","MAX_VALUE","getRange","_overload9","_overload10","hasFocus","embed","_this7","insertEmbed","_this8","_overload11","_overload12","insertText","off","once","dangerouslyPasteHTML","_this9","_overload13","_overload14","removeFormat","_this10","deleted","applied","applyDelta","_overload15","_overload16","Range","USER","_this11","userConfig","DEFAULTS","import","themeConfig","config","moduleConfig","moduleClass","toolbar","modifier","strict","isEnabled","oldDelta","shiftRange","_emitter","_emitter2","emit","_map","pos","_map2","_map3","_map4","version","parchment","_Parchment$Inline","compare","BLOT","isolate","moveChildren","selfIndex","order","otherIndex","_parchment","TextBlot","_Parchment$Text","_eventemitter2","_len","_key","_node$__quill$emitter","handleDOM","Emitter","_EventEmitter","listeners","log","_len2","_key2","_ref","handler","SCROLL_BEFORE_UPDATE","SCROLL_OPTIMIZE","SELECTION_CHANGE","Module","quill","levels","method","_console","namespace","ns","logger","newLevel","pSlice","objectKeys","isArguments","deepEqual","actual","expected","opts","isUndefinedOrNull","isBuffer","ka","kb","objEquiv","attributeBit","ATTRIBUTE","canAdd","Code","_block2","_Inline","CodeBlock","_Block","frag","_descendant","descendant","deleteAt","nextNewline","newlineIndex","prevNewline","isolateLength","formatAt","_descendant3","_descendant4","searchIndex","reverse","lastIndexOf","appendChild","prev","optimize","unwrap","TAB","_op2","_code2","_cursor2","_block","_clone2","_deepEqual2","ASCII","Editor","getDelta","consumeNextNewline","scrollLength","batchStart","image","bullet","normalizeDelta","_scroll$line","_scroll$line2","_line$descendant","batchEnd","lengthRemaining","lineLength","codeIndex","codeLength","leaves","formatsArr","blots","combineFormats","_scroll$line3","_scroll$line4","suffixLength","suffix","cursorIndex","data","textBlot","CONTENTS","oldText","newText","diffDelta","combined","merged","_toConsumableArray","arr2","Selection","composing","mouseDown","cursor","savedRange","handleComposition","handleDragging","listenDOM","native","getNativeRange","textNode","setNativeRange","ignored","_context$range","startNode","startOffset","endNode","endOffset","restore","_format","nativeRange","collapsed","after","attach","_scroll$leaf","_scroll$leaf2","_leaf$position","_leaf$position2","createRange","setStart","_scroll$leaf3","_scroll$leaf4","_leaf$position3","_leaf$position4","setEnd","side","rangeCount","getRangeAt","normalizeNative","info","normalizedToRange","positions","indexes","_position","startContainer","endContainer","lastChild","_scroll$leaf5","_scroll$leaf6","_leaf$position5","_leaf$position6","first","last","scrollBounds","removeAllRanges","addRange","rangeToNative","oldRange","_getRange","_getRange2","Break","linked_list_1","shadow_1","ContainerBlot","build","makeBlot","forEachAt","criteria","_a","lengthLeft","detach","childBlot","refBlot","some","insertInto","memo","targetParent","inclusive","addedNodes","removedNodes","mutation","compareDocumentPosition","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_FOLLOWING","nextSibling","FormatBlot","wrapper","move","LeafBlot","INLINE_BLOT","lib","keepNull","Iterator","retOp","_instanceof","nativeMap","nativeSet","nativePromise","_","Set","circular","depth","includeNonEnumerable","allParents","allChildren","useBuffer","Buffer","_clone","proto","reject","__isArray","__isRegExp","RegExp","__getRegExpFlags","lastIndex","__isDate","allocUnsafe","keyChild","valueChild","entryChild","attrs","getOwnPropertySymbols","symbols","symbol","allPropertyNames","__objToStr","re","flags","global","ignoreCase","multiline","clonePrototype","_container2","isLine","_Parchment$Scroll","batch","_line","_line2","_line3","_newlineIndex","getLines","observer","takeRecords","SHORTKEY","_quill2","test","navigator","platform","Keyboard","_Module","bindings","addBinding","ENTER","handleEnter","userAgent","BACKSPACE","handleDelete","handleDeleteRange","listen","evt","binding","normalize","which","keyCode","defaultPrevented","_quill$getLine","getLine","_quill$getLine2","_quill$getLeaf","getLeaf","_quill$getLeaf2","leafStart","offsetStart","_ref2","leafEnd","offsetEnd","prefixText","suffixText","curContext","empty","every","makeEmbedArrowHandler","_ref3","where","LEFT","RIGHT","_quill$getLeaf3","_quill$getLine11","_quill$getLine13","curFormats","prevFormats","nextLength","_quill$getLine15","_quill$getLine17","nextFormats","firstFormats","lastFormats","lineFormats","makeCodeBlockHandler","indent","_quill$scroll$descend","_quill$scroll$descend2","scrollIndex","getIndex","makeFormatHandler","shortKey","charCodeAt","ESCAPE","UP","DOWN","bold","italic","underline","outdent","tab","cutoff","updateContents","_quill$getLine3","_quill$getLine4","_quill$getLine5","_quill$getLine6","header","_quill$getLine7","_quill$getLine8","_quill$getLine9","_quill$getLine10","Cursor","createTextNode","_length","restoreText","_Parchment$Container","ColorStyle","ColorClass","ColorAttributor","_Parchment$Attributor","sanitize","_inline","Link","url","_sanitize","PROTOCOL_WHITELIST","SANITIZED_URL","protocols","anchor","href","protocol","_keyboard2","_dropdown2","optionsCounter","toggleAriaAttribute","Picker","buildPicker","label","togglePicker","escape","hasAttribute","selectItem","buildItem","buildLabel","buildOptions","trigger","selectedIndex","createEvent","initEvent","isActive","_embed2","_scroll2","_clipboard2","_history2","ShadowBlot","cloneNode","parentBlot","refDomNode","AttributorStore","styles","attr","ClassAttributor","camelize","parts","StyleAttributor","Theme","themes","GUARD_TEXT","contentNode","childNode","leftGuard","rightGuard","prevLength","AlignStyle","AlignClass","AlignAttribute","BackgroundStyle","BackgroundClass","_color","DirectionStyle","DirectionClass","DirectionAttribute","FontClass","FontStyle","FontStyleAttributor","SizeStyle","SizeClass","justify","background","clean","code","color","rtl","float","full","formula","ordered","check","sub","strike","video","getLastChangeIndex","History","lastRecorded","ignoreChange","userOnly","record","undo","redo","dest","stack","changeDelta","undoDelta","timestamp","now","delay","maxStack","deleteLength","changeIndex","endsWithNewlineChange","BaseTooltip","_colorPicker2","_iconPicker2","_picker2","_tooltip2","ALIGNS","COLORS","FONTS","HEADERS","SIZES","BaseTheme","_Theme","listener","tooltip","textbox","hide","pickers","picker","extendToolbar","buttons","icons","selects","fillSelect","handlers","edit","fileInput","files","reader","FileReader","onload","readAsDataURL","click","_Tooltip","boundsContainer","save","cancel","preview","linkRange","restoreFocus","extractVideoUrl","defaultValue","LinkedList","nodes","cur","curNode","ret","callback","curIndex","curLength","OBSERVER_CONFIG","characterData","characterDataOldValue","childList","subtree","ScrollBlot","MutationObserver","observe","disconnect","records","mark","markParent","remaining","previousSibling","grandChild","InlineBlot","obj1","obj2","prop","isEqual","BlockBlot","EmbedBlot","splitText","_toggle","DOMTokenList","token","searchString","subjectString","isFinite","floor","thisArg","execCommand","DIFF_DELETE","diff_main","text1","text2","cursor_pos","commonlength","diff_commonPrefix","commonprefix","substring","diff_commonSuffix","commonsuffix","diffs","longtext","shorttext","hm","diff_halfMatchI_","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","seed","j","best_common","prefixLength","text1_a","text1_b","text2_a","text2_b","hm1","hm2","mid_common","diff_halfMatch_","diffs_a","diffs_b","text1_length","text2_length","max_d","v_offset","v_length","v1","v2","front","k1start","k1end","k2start","k2end","k1","k1_offset","y1","x1","charAt","k2_offset","x2","diff_bisectSplit_","k2","y2","diff_bisect_","diff_compute_","diff_cleanupMerge","norm","current_pos","next_pos","split_pos","d_left","d_right","cursor_normalize_diff","ndiffs","cursor_pointer","d_next","merge_tuples","fix_cursor","compact","starts_with_pair_end","str","ends_with_pair_start","fixed_diffs","fix_emoji","text1a","text2a","text1b","text2b","diffsb","pointermin","pointermax","pointermid","pointerstart","pointerend","pointer","count_delete","count_insert","text_delete","text_insert","left_d","right_d","shim","supportsArgumentsClass","supported","unsupported","propertyIsEnumerable","has","Events","EE","fn","EventEmitter","_events","_eventsCount","eventNames","exists","available","ee","a1","a2","a3","a4","a5","len","removeListener","removeAllListeners","addListener","setMaxListeners","prefixed","matchText","matchSpacing","matchNewline","matchBlot","matchAttributor","_extend3","_align","_background","_direction","_font","_size","DOM_KEY","CLIPBOARD_CONFIG","deltaEndsWith","ELEMENT_NODE","fontStyle","computeStyle","fontWeight","applyFormat","textIndent","matchAlias","ATTRIBUTE_ATTRIBUTORS","STYLE_ATTRIBUTORS","Clipboard","onPaste","matchers","selector","matcher","matchVisual","addMatcher","_prepareMatching","prepareMatching","_prepareMatching2","elementMatchers","textMatchers","traverse","paste","pair","_pair","nodeType","endText","childrenDelta","nextElementSibling","nodeHeight","marginTop","marginBottom","whiteSpace","replacer","collapse","Bold","addControls","Toolbar","_ret","controls","addHandler","_this$quill$selection","_quill$selection$getR","prompt","addButton","groups","group","control","addSelect","_picker","ColorPicker","_Picker","backgroundColor","colorLabel","stroke","fill","IconPicker","defaultItem","Tooltip","TEMPLATE","reference","offsetWidth","rootBounds","verticalShift","_base","_base2","_link2","_icons2","TOOLBAR_CONFIG","SnowTheme","_BaseTheme","buildButtons","buildPickers","SnowTooltip","_BaseTooltip","show","_core2","_indent","_blockquote2","_header2","_list","_list2","_bold2","_italic2","_script2","_strike2","_underline2","_image2","_video2","_code","_formula2","_syntax2","_toolbar2","_bubble2","_snow2","IndentClass","ListItem","IdentAttributor","Blockquote","Header","List","_Container","listEventHandler","_bold","Italic","_Bold","Script","Strike","Underline","_link","ATTRIBUTES","Image","Video","_BlockEmbed","FormulaBlot","_Embed","katex","throwOnError","errorColor","Formula","CodeToken","SyntaxCodeBlock","_CodeBlock","_highlight","cachedText","Syntax","highlight","timer","interval","hljs","highlightAuto","BubbleTooltip","BubbleTheme","lastLine","_bounds","arrow","marginLeft","isCEPolyfill","polyfillWrapFlushCallback","removeNodes","marker","random","nodeMarker","markerRegex","Template","nodesToRemove","createTreeWalker","lastPartIndex","partIndex","nextNode","hasAttributes","stringForPart","lastAttributeNameRegex","exec","attributeLookupName","attributeValue","currentNode","createMarker","isTemplatePartActive","createComment","removeNodesFromTemplate","nextActiveIndexInTemplateParts","nodeIndex","removeCount","nodesToRemoveInTemplate","currentRemovingNode","countNodes","startIndex","directives","WeakMap","isDirective","noChange","nothing","TemplateInstance","processor","__parts","setValue","commit","fragment","nodeName","handleTextExpression","insertAfterNode","handleAttributeExpressions","adoptNode","upgrade","policy","trustedTypes","createPolicy","createHTML","commentMarker","TemplateResult","getHTML","isCommentBinding","commentOpen","attributeMatch","getTemplateElement","isPrimitive","isIterable","AttributeCommitter","dirty","_createPart","AttributePart","_getValue","v","committer","directive","NodePart","__pendingValue","appendInto","appendIntoPart","__insert","insertAfterPart","__commitText","__commitTemplateResult","__commitNode","__commitIterable","valueAsString","templateFactory","itemParts","itemPart","BooleanAttributePart","PropertyCommitter","single","PropertyPart","eventOptionsSupported","EventPart","eventContext","__boundHandleEvent","newListener","oldListener","shouldRemoveListener","passive","shouldAddListener","__options","getOptions","templateCache","templateCaches","stringsArray","keyString","defaultTemplateProcessor","getTemplateCacheKey","scopeName","compatibleShadyCSSVersion","ShadyCSS","prepareTemplateDom","shadyTemplateFactory","cacheKey","TEMPLATE_TYPES","shadyRenderSet","prepareTemplateStyles","renderedDOM","templateElement","condensedStyle","templates","removeStylesFromLitTemplates","insertCount","walkerIndex","insertNodeIntoTemplate","firstChild","nativeShadow","removes","JSCompiler_renameProperty","_obj","defaultConverter","toAttribute","Boolean","JSON","stringify","fromAttribute","parse","notEqual","old","defaultPropertyDeclaration","converter","reflect","hasChanged","UpdatingElement","initialize","finalize","_classProperties","_attributeNameForProperty","_attributeToPropertyMap","superProperties","k","_ensureClassProperties","noAccessor","getPropertyDescriptor","requestUpdateInternal","superCtor","properties","propKeys","createProperty","_updateState","_updatePromise","res","_enableUpdatingResolver","_changedProperties","_saveInstanceProperties","_v","_instanceProperties","_applyInstanceProperties","enableUpdating","_attributeToProperty","_propertyToAttribute","ctor","attrValue","_propertyValueToAttribute","propName","getPropertyOptions","_propertyValueFromAttribute","shouldRequestUpdate","_valueHasChanged","_reflectingProperties","_hasRequestedUpdate","_enqueueUpdate","requestUpdate","updateComplete","performUpdate","hasUpdated","shouldUpdate","changedProperties","_markUpdated","firstUpdated","updated","_getUpdateComplete","size","customElement","classOrDescriptor","clazz","legacyCustomElement","kind","finisher","standardCustomElement","standardProperty","placement","initializer","protoOrDescriptor","legacyProperty","supportsAdoptingStyleSheets","Document","CSSStyleSheet","constructionToken","CSSResult","cssText","safeToken","styleSheet","_styleSheet","replaceSync","css","acc","idx","textFromCSSResult","renderNotImplemented","LitElement","userStyles","getStyles","addStyles","reduceRight","_styles","cssRules","rule","_getUniqueStyles","renderRoot","createRenderRoot","adoptStyles","adoptedStyleSheets","_needsShimAdoptedStyleSheets","ScopingShim","prepareAdoptedCssText","styleElement","templateResult","hasRendered","needsScoping","firstScopeRender","renderContainer","createDocumentFragment","litRender","connect","store","baseElement","_storeUnsubscribe","subscribe","stateChanged","getState","_state","observable","ponyfill","randomString","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","warning","getUndefinedStateErrorMessage","action","actionType","isCrushed","process","env","NODE_ENV","TipoDispositivo","agrupadorGenerico","tipo","tagId","descricao","descricaoPlural","tiposPermitidosPai","tiposPermitidosFilhos","tipoProvavelFilho","INDICADOR_SEQUENCIA","INDICADOR_FIM_SEQUENCIA","INDICADOR_DESDOBRAMENTO","alinea","articulacao","artigo","capitulo","caput","generico","inciso","livro","omissis","paragrafo","parte","secao","subsecao","titulo","AdicionarElemento","execute","atual","conteudo","hasDesmembramento","novo","isDispositivoAlteracao","texto","adicionarElementoAction","adicionarArtigo","adicionarAlinea","adicionarInciso","adicionarItem","adicionarParagrafo","AgruparElemento","adicionarParte","adicionarLivro","adicionarTitulo","adicionarCapitulo","adicionarSecao","adicionarSubsecao","aplicarAlteracoesEmendaAction","alteracoesEmenda","atualizarElementoAction","atualizarReferenciaElementoAction","atualizarTextoElementoAction","elementoSelecionadoAction","informarNormaAction","MoverElementoAbaixo","moverElementoAbaixoAction","MoverElementoAcima","moverElementoAcimaAction","RemoverElemento","removerElementoAction","RenumerarElemento","numero","renumerarElementoAction","restaurarElementoAction","suprimirElementoAction","TransformarElemento","nomeAcao","subType","transformarEmOmissisAlinea","transformarEmOmissisIncisoCaput","transformarEmOmissisItem","transformarEmOmissisParagrafo","transformarEmOmissisIncisoParagrafo","transformarAlineaEmIncisoCaput","transformarAlineaEmIncisoParagrafo","transformaAlineaEmItem","transformarArtigoEmParagrafo","transformarGenericoEmInciso","transformarGenericoEmAlinea","transformarGenericoEmItem","transformarIncisoParagrafoEmParagrafo","transformarIncisoCaputEmParagrafo","transformarIncisoCaputEmAlinea","transformarIncisoParagrafoEmAlinea","transformarOmissisEmAlinea","transformarOmissisEmArtigo","transformarOmissisEmIncisoCaput","transformarOmissisEmIncisoParagrafo","transformarOmissisEmItem","transformarOmissisEmParagrafo","transformarItemEmAlinea","transformarParagrafoEmArtigo","transformarParagrafoEmIncisoParagrafo","transformarParagrafoEmIncisoCaput","validarArticulacaAction","validarElementoAction","isArticulacao","dispositivo","isDispositivoGenerico","isArtigo","isCaput","isParagrafo","isInciso","isIncisoCaput","pai","isIncisoParagrafo","isAlinea","isItem","isOmissis","isAgrupador","isAgrupadorGenerico","isDispositivoDeArtigo","endsWithWord","indicadores","word","addSpaceRegex","escapeRegex","converteIndicadorParaTexto","removeEspacosDuplicados","StringBuilder","strs","DescricaoSituacao","isSituacaoExclusivaDispositivoEmenda","DISPOSITIVO_ADICIONADO","DISPOSITIVO_MODIFICADO","DISPOSITIVO_SUPRIMIDO","situacao","descricaoSituacao","isDispositivoEmenda","getArticulacao","getDispositivo","uuid","filhos","hasAlteracao","alteracoes","findDispositivoByUuid","getUltimoFilho","hasFilhos","irmaosMesmoTipo","artigos","f","getAgrupadoresAcima","referencia","agrupadores","getAgrupadoresAcimaByTipo","getArtigo","getProximoArtigoAnterior","buscaArtigoAnteriorAbaixo","getAgrupadorPosterior","hasFilhoGenerico","isUnicoMesmoTipo","isUltimoMesmoTipo","isPenultimoMesmoTipo","isPrimeiroMesmoTipo","getDispositivoAnterior","getDispositivoAnteriorMesmoTipo","irmaos","getDispositivoAnteriorMesmoTipoInclusiveOmissis","getDispositivoPosterior","getDispositivosAnterioresMesmoTipo","getDispositivosPosterioresMesmoTipo","getDispositivoPosteriorMesmoTipoInclusiveOmissis","getDispositivosPosteriores","isExclusao","indexOfArtigo","disp","isArtigoUnico","isParagrafoUnico","getDispositivoCabecaAlteracao","cabecaAlteracao","isDispositivoCabecaAlteracao","isUltimaAlteracao","lista","getDispositivoAndFilhosAsLista","hasDispositivosPosterioresAlteracao","isArticulacaoAlteracao","isOriginal","DISPOSITIVO_ORIGINAL","isOriginalAlteradoModificadoOuSuprimido","buildListaDispositivos","dispositivos","percorreHierarquiaDispositivos","visit","buscaNaHierarquiaDispositivos","isDispositivoRaiz","buscaDispositivoById","idArtigo","extraiIdArtigo","raiz","TipoMensagem","TEXTO_OMISSIS","hasIndicativoDesdobramento","hasIndicativoFinalSequencia","hasIndicativoContinuacaoSequencia","TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO","hasIndicativoInicioAlteracao","normalizaSeForOmissis","hasIndicativoFimAlteracao","hasCitacaoAoFinalFrase","validaTextoDispositivo","mensagens","ERROR","artigoDefinido","doc","isValidHTML","WARNING","soTexto","getLastCharacter","validaTexto","validaTextoAgrupador","TipoGenero","GeneroFeminino","GeneroIndefinido","GeneroMasculino","generoFeminino","generoMasculino","generoIndefinido","generoFromLetra","letraGenero","NomeComGenero","nome","genero","VOCABULARIO","autoridades","urn","tiposDocumento","fakeUrns","sigla","urnAutoridade","urnTipoDocumento","siglas","atalhosUrn","eventos","tipoTextoProcessoLegislativo","substitutivo","getTipo","getNumero","partes","getData","dataInformada","retiraFragmento","converteDataFormatoBrasileiroParaUrn","dataRegex","validaUrn","autoridade","getAutoridade","getNomeExtensoComDataExtenso","u","dataString","dia","mes","ano","dataExtenso","getDataExtenso","toLocaleString","getDate","toLocaleDateString","month","getFullYear","ALGARISMOS_ROMANOS","M","CM","D","CD","C","XC","L","XV","X","IX","V","IV","I","isNumeracaoValida","isRomano","converteLetraParaNumeroArabico","acumulador","converteNumeroArabicoParaLetra","strNumero","number","intToAlpha","converteNumeroRomanoParaArabico","numeroRomano","tot","numberCharToInt","converteNumeroArabicoParaRomano","temp","resultado","num","resto","trataComplemento","func","comparaNumeracao","hasIrmaoOriginalDepois","getArtigosPosterioresIndependenteAgrupador","contaIrmaosOriginaisAte","contaIrmaosNaoOriginaisConsecutivosAte","calculaNumeracao","seqOriginal","SeqOrdem","seqDispEmenda","temOriginalAntes","temOriginalDepois","seqOrdem","addNovoSeqOrdem","calculaSeqOrdem","getNumeracao","seq","seq2","letras","validaNumeracao","rotulo","isLastFilho","validaNumeracaoDispositivoAlteracao","validaNumeracaoDispositivo","validaDispositivo","filho","relacaoFilhos","validaHierarquia","validaReferencia","DispositivoSuprimido","dispositivoOriginal","getAcoesPermitidas","acoes","buildHref","converteLetraComplementoParaNumero","buildHierarquia","idArray","alteracao","buildId","isElementoDispositivoAlteracao","elemento","hierarquia","uuidAlteracao","getNivel","buildElementoPai","createElemento","nivel","agrupador","posicao","editavel","sendoEditado","lexmlId","norma","acoesPossiveis","getAcoesPossiveis","createElementos","elementos","el","getElementos","getDispositivoFromElemento","art","ignorarElementoAlteracao","getArticulacaoFromElemento","flatMap","criaElementoValidadoSeNecessario","validados","incluiAcoes","criaListaElementosAfinsValidados","incluiDispositivo","listaDispositivosRenumerados","buildListaElementosRenumerados","StateType","abreArticulacao","modo","past","present","future","ui","stateType","DocumentoCarregado","load","classificacao","Counter","generateId","ValidacaoDispositivo","BlocoAlteracao","tipoAcao","iniciarBlocoAlteracao","finalizarBlocoAlteracao","BlocoAlteracaoNaoPermitido","TipoConteudo","ClassificacaoDocumento","ConteudoDispositivo","ConteudoTexto","HierarquiaAgrupador","addFilho","addArtigo","addFilhoOnPosition","anterior","addArtigoOnPosition","hasArtigos","_filhos","removeFilho","removeArtigo","renumeraFilhos","createRotulo","renumeraArtigos","HierarquiaDispositivo","DISPOSITIVO_NOVO","NumeracaoAgrupador","getNomeAgrupadorUnico","toLocaleUpperCase","normalizaNumeracao","partesRotulo","createNumeroFromRotulo","informouAgrupadorUnico","prefixo","getNumeracaoParaComandoEmenda","sb","pronomePossessivoSingular","getNumeracaoComRotuloParaComandoEmenda","acoesMenu","acoesExclusivasEdicao","isAcaoMenu","acao","acoesDisponiveis","getAcaoAgrupamento","RegrasAgrupadores","getAcaoPossivelTab","getAcaoPossivelShiftTab","podeConverterEmOmissis","DispositivoNovo","localeCompare","SituacaoDispositivo","TipoLexml","converteFilhos","destino","criaDispositivo","copiaFilhos","AlineaLexml","RegrasAlinea","SUFIXO","toLocaleLowerCase","NumeracaoAlinea","ArtigoLexml","hasAgrupadoresPosteriores","hasAgrupadoresAcima","tiposExistentes","RegrasArtigo","BlocoAlteracaoPermitido","informouArtigoUnico","tipoEmenda","EMENDA_ARTIGO_ONDE_COUBER","ARTIGO_UNICO","PREFIXO","getNumeroAndSufixoNumeracao","paraComandoEmenda","NumeracaoArtigo","incisos","getIncisosCaput","paragrafos","_paragrafos","addIncisoCaput","addParagrafo","removeParagrafo","renumeraIncisos","renumeraParagrafos","HierarquiaArtigo","CaputLexml","RegrasCaput","NumeracaoCaput","DispositivoGenericoLexml","RegrasDispositivoGenerico","NumeracaoGenerico","IncisoLexml","complemento","RegrasInciso","NumeracaoInciso","ItemLexml","RegrasItem","NumeracaoItem","ParagrafoLexml","RegrasParagrafo","informouParagrafoUnico","PARAGRAFO_UNICO","NumeracaoParagrafo","ArticulacaoLexml","_artigos","CapituloLexml","DispositivoAgrupadorGenericoLexml","LivroLexml","ParteLexml","SubsecaoLexml","SecaoLexml","TituloLexml","OmissisLexml","RegrasOmissis","_texto","ConteudoOmissis","NumeracaoIndisponivel","desativaRotuloAutomaticoSeDispositivoAlteracao","createArticulacao","createAlteracao","createByInferencia","criaDispositivoCabecaAlteracao","createFromReferencia","podeSerUltimaalteracao","createWhenReferenciaBlocoAlteracao","createWhenReferenciaIsArtigo","createWhenReferenciaIsAgrupador","createFromReferenciaDefault","DispositivoAdicionado","EMENDA","hasApenasDispositivosIrmaosAdicionados","DispositivoOriginal","acoesFiltradas","normalizaNomeAcaoTransformacao","tipoDispositivo","replaceAll","isAcaoPermitida","textoFoiModificado","ev","getEvento","ElementoModificado","createElementoValidado","resetUuidTodaArvore","ajustaReferencia","isPrimeiroArtigo","isNovoDispositivoDesmembrandoAtual","getElementosDoDispositivo","valida","Eventos","createEventos","evento","eventoContem","setReferencia","ElementoIncluido","buildEventoAtualizacaoElemento","ElementoValidado","buildUpdateEvent","removeAndBuildEvents","removidos","dispositivosRenumerados","dispositivoAnterior","dispositivoValidado","elementosRemovidos","elementosValidados","ElementoRemovido","ElementoRenumerado","buildEventoExclusaoElemento","stateEvents","ElementoRestaurado","ElementoSuprimido","ElementoSelecionado","ElementoMarcado","SituacaoElementoModificada","buildPast","buildFuture","retornaEstadoAtualComMensagem","mensagem","adicionaElemento","textoModificado","originalmenteUnico","elementoAtualOriginal","naoPodeCriarFilho","INFO","buildEventoAdicionarElemento","elementoAtualAtualizado","irmao","agrupaElemento","flat","hasAgrupadoresAcimaByTipo","hasAgrupadoresAnterioresByTipo","getAgrupadorAcimaByTipo","paiAtual","copiaDispositivosParaOutroPai","renumerados","irmaoAnterior","DispositivoModificado","processaDispositivosAdicionados","mapa","criaMapaElementosIncluidos","criaEventoElementosIncluidos","dispositivosAdicionados","idIrmaoAnterior","idPai","criaNovaEntradaNoMapa","mapaElementosIncluidos","ultimoProcessado","idAtual","idAnterior","IsIrmaoUltimoProcessado","atualizaReferenciaElemento","urnNova","urnAnterior","regex","normaExtenso","normaLink","textoDispositivo","localStorage","indexCursor","removeItem","eventosUi","transformaTipoElemento","isAcaoTransformacaoPermitida","atualRenumerados","paiNovo","converteDispositivo","elementosRenumerados","buildEventoTransformacaooElemento","getDispositivoPaiFromElemento","redodDispositivoExcluido","partesLexmlId","isOmissisCaput","getTipoSituacaoByDescricao","incluir","novosEvento","novos","primeiroElemento","primeiro","redoDispositivosExcluidos","remover","restaurarSituacao","eventoRestaurados","Situacao","processarModificados","isRedo","novosElementos","processaRenumerados","processaValidados","removeElemento","agrupadoresAnteriorMesmoTipo","paiOriginal","incluidos","removeAgrupadorAndBuildEvents","restauraElemento","aRestaurar","restauraAndBuildEvents","getSituacoesFilhos","situacoes","suprimeElemento","podeSuprimir","suprimeAndBuildEvents","combinedReducer","reducers","reducerKeys","finalReducers","unexpectedKeyCache","shapeAssertionError","finalReducerKeys","reducer","assertReducerShape","warningMessage","inputState","argumentName","unexpectedKeys","getUnexpectedStateShapeWarningMessage","nextState","previousStateForKey","nextStateForKey","errorMessage","combineReducers","appReducer","elementoReducer","retorno","dispositivosSuprimidos","dispositivosModificados","aplicaAlteracoesEmenda","atualizaElemento","houveAlteracaoNoTextoAposAcao","atualizaTextoElemento","selecionaElemento","InformarNorma","solicitaNorma","proximo","moveElementoAbaixo","moveElementoAcima","detalhe","renumeraElemento","elementosParaMarcar","newAction","modificaTipoElementoWithTab","validaElemento","validaArticulacao","rootStore","createStore","preloadedState","enhancer","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","isSubscribed","dispatch","replaceReducer","nextReducer","outerSubscribe","observeState","unsubscribe","$$observable","__REDUX_DEVTOOLS_EXTENSION__","ArticulacaoComponent","previousValues","unsafeHTML","previousValue","ComandoEmendaComponent","buildTemplateComando","comandos","comando","cabecalho","buildTemplateCitacao","citacao","emenda","comandoEmenda","cabecalhoComum","Elemento","transformarAction","novoTipo","EtaBlot","linha","tamanho","AlinhamentoMenu","EtaBlotMenu","EtaBlotMenuBotao","EtaBlotMenuConteudo","alinhamentoMenu","classeAdicional","Esquerda","EtaBlotMenuItem","focusOffset","setItem","EtaBlotRotulo","getClasseCSS","formatoStyle","criarAtributoStyle","EtaBlotEspaco","EtaContainerTable","_lexmlId","_editavel","_nivel","_numero","_tipo","_agrupador","_hierarquia","_descricaoSituacao","criarId","blotRotulo","blotConteudo","containerDireito","blotContainerDireito","contentEditable","setEstilo","valor","classeCSS","classeCSSAdicional","ativarBorda","desativarBorda","limparContainerDireito","classe","cancelarPropagacaoDoEvento","Subscription","isCanceled","Observable","subscriptions","inscricao","notify","subscription","CaracteresValidos","CaracteresNaoValidos","EtaKeyboard","altGraphPressionado","cursorDeTextoEstaSobreLink","isTeclaQueAlteraTexto","onChange","onHotKeyToolbar","onTeclaHome","onTeclaEnd","onHotKeyMover","onTeclaCtrlD","onTeclaCtrlZ","onTeclaCtrlY","onTeclaCtrlShiftA","onValidarTecla","onTeclaCtrlA","onHotKeyTransformacaoTipo","onHotKeyRenumeraDispositivo","onTeclaArrowRight","onTeclaArrowLeft","onTeclaArrowDownOuUp","onTeclaEnter","onTeclaEscape","onTeclaDelete","onTeclaBackspace","onTeclaTab","isTeclaComCaracterGrafico","verificarOperacaoTecladoPermitida","textoSelec","textoSelecionado","quantidadeCR","operacaoTecladoInvalida","blotCursor","setIndex","linhaAnt","isProcessandoMudancaLinha","adicionaElementoTeclaEnter","inicioConteudoAtual","fimConteudoAtual","getPrimeiraLinha","scrollTo","getUltimaLinha","scrollHeight","transformaElemento","linhaAtual","moveElemento","EtaBlotConteudo","_htmlAnt","htmlAnt","alterado","EtaBlotMensagem","EtaBlotMensagens","EtaClipboard","clipboardData","EtaContainerTdDireito","EtaContainerTdEsquerdo","fator","getPropertyValue","padding","EtaContainerTr","EtaQuillBuffer","editorHtml","getConteudoHtml","blotBuffer","setConteudo","converterHtmlParaDelta","converterDeltaParaHtml","EtaQuill","bufferHtml","linhaAtualAux","_mudouDeLinha","verificarMudouLinha","observableSelectionChange","aspasAberta","limparHistory","_linhaAtual","acertarAspas","onTextChange","onSelectionChange","buffer","mudouDeLinha","linhaAnterior","_linhaAnterior","isUndoEstruturaVazio","_undoEstruturaVazio","undoEstruturaVazio","undoVazio","isRedoEstruturaVazio","_redoEstruturaVazio","redoEstruturaVazio","redoVazio","_processandoMudancaLinha","processandoMudancaLinha","processando","paddingLeft","border","borderColor","DataRotulo","destroi","getConteudoHtmlParteLinha","getLinha","getLinhaPorId","getHtmlElement","setConteudoLinha","irProximaLinha","desmarcarLinhaAtual","linhaCursorAnt","marcarLinhaAtual","linhaCursor","atualizarLinhaCorrente","elementoSelecionado","undoRedoEstrutura","UNDO","REDO","blotCursorAnt","posicaoTexto","scrollToElemento","isInEtaBoxViewport","scrollIntoEtaBox","offsetTopElement","etaBoxHeight","deslocamento","EtaQuillUtil","etaTable","etaTrContainer","etaTdTexto","etaTdEspaco","etaTdMensagens","informarNormaDialog","dialogElem","createContextualFragment","tipoNorma","botoes","ok","cancelar","erro","onclick","buildUrn","quillSnowCss","editorCss","EditorComponent","ajustarLinkParaNorma","_quill","inicializar","configEditor","alertar","processarStateEvents","quillNaoInicializado","inscricoes","destroiQuill","buildCss","onClickUndo","onClickRedo","onClickDispositivoAtual","artigoOndeCouber","formatacaoAlterada","agendarEmissaoEventoOnChange","linkTooltip","getNomeExtenso","onBold","onItalic","onScript","onOperacaoInvalida","isDesmembramento","textoAnterior","textoLinhaAtual","textoNovaLinha","adicionarElemento","indexInicio","indexFim","textoLinha","tamanhoNovaLinha","criarElemento","podeRenumerar","validar","numeracao","onkeyup","msgErro","removerElemento","confirmar","moverElemento","transformarElemento","tabAction","carregarArticulacao","inserirNovoElementoNoQuill","inserirNovosElementosNoQuill","atualizarQuill","montarMenuContexto","atualizarSituacao","removerLinhaQuill","renumerarQuill","atualizarMensagemQuill","marcarLinha","eventosQueDevemEmitirTextChange","eventosFiltrados","processarEscolhaMenu","itemMenu","renumerarElemento","selecionarLinha","linhaRef","novaLinha","criarContainerLinha","nivelAlerado","criarContainerMensagens","blotMenu","blotMenuConteudo","configurar","atualizarTextoElemento","origemEvento","timerOnChange","emitirEventoOnChange","composed","etaContainerTable","dialog","toast","verificarQuillInicializado","ElementoComponent","htmlAgrupador","htmlDispositivo","HelpComponent","CmdEmdUtil","dispositivosEmenda","dispositivoAfetado","getDispositivoAfetado","isAlteracaoIntegral","sequencias","qtdSequencias","isSequenciaPlural","sequencia","qtdRanges","getQuantidadeRanges","getPrimeiroRange","getQuantidadeDispositivos","getArtigoPosterior","isUltimoDispositivoDoMesmoTipo","buscaProximoArtigo","getFilhosEstiloLexML","getProximoIrmaoRecursivo","d1","d2","removeFromArray","array","RangeDispositivos","isSituacao","isTipo","nomeTipo","podeAdicionarAoRange","addInicio","isUltimo","getPrimeiro","getUltimo","getAnterior","print","ranges","isRotuloNecessario","printRotuloInicio","printSeparadorProximoDispositivo","printRotuloFimSeExistir","rangePosterior","getRangeDispositivosPosterior","hasApenasUmDispositivo","isMesmoTipoSituacao","getRotuloCompletoSingular","getRotuloCompletoPlural","getRangeDispositivosAnterior","isMesmoPai","artigoDefinidoSingular","artigoDefinidoPlural","getTipoDispositivoPlural","isVazio","ultimo","getDispositivoPosteriorMesmoTipo","getDispositivos","SequenciaRangeDispositivos","getPrimeiroDispositivo","getUltimoDispositivo","getRanges","setRanges","getTextoListaDeDispositivos","posRange","nr","AgrupadorDispositivosCmdEmd","getSequencias","agrupaRanges","separaRangesDeDoisDispositivos","separaRangesDeDoisDispositivosEmSequencias","isMesmaSequencia","dispSequencia","dispRange","isMesmoTipoParaComandoEmenda","separaDispositivosSeguidosDeOmissis","separaDispositivosSeguidosDeOmissis2","posterior","adicionaouDispositivos","informarCaputDoDispositivo","DispositivoComparator","i1","getIndices","i2","comparaIndices","indices","getPaiParaComparacao","getIndexDoFilho","indices1","indices2","size1","size2","CmdEmdCombinavel","c1","c2","ArtigoAntesDispositivo","DispositivosWriterCmdEmd","NENHUM","getTexto","posSequencia","getReferenciaCaputDoDispositivo","getTextoArtigoAntesSequencia","getRotuloTipoDispositivo","getRotuloPaisSequencia","plural","getTextoArtigoAntesDispositivo","artigoAntesDispositivo","pronomePossessivoPlural","DEFINIDO","DEFINIDO_COM_PREPOSICAO_A","artigoDefinidoPrecedidoPreposicaoAPlural","artigoDefinidoPrecedidoPreposicaoASingular","localizarArtigoEmAgrupador","getRotuloPais","getDispositivoAnteriorDireto","dispAlteracao","dispositivoNovoForaDeAlteracao","dispositivoNovoEmAlteracao","isTextoOmitido","getDispositivoPosteriorDireto","refIrmao","getProximoAgrupador","setArtigoAntesDispositivo","CmdEmdModificacao","refGenericaProjeto","isPrimeiro","dispositivosWriter","CmdEmdAdicao","trataLocalizacaoArtigoEmAgrupador","isSequenciasPlural","ultimaSequencia","trataLocalizacaoArtigoAgrupadorSequencia","reagrupar","isInclusaoArtigoProximoAgrupador","artAnterior","getDispositivoIrmaoPosterior","s2","isInclusaoArtigoInicioAgrupador","isInclusaoArtigoAntesAgrupador","CmdEmdSupressao","Emenda","RefProposicaoEmendada","ComandoEmenda","DispositivoEmenda","DispositivoEmendaSuprimido","DispositivoEmendaModificado","DispositivoEmendaAdicionado","ItemComandoEmenda","CmdEmdAdicaoArtigoOndeCouber","strRefProjeto","contracaoEmArtigoDefinidoSingular","TagNode","valores","atributos","addValor","addAtributo","atributo","CitacaoComandoSimples","tagRotulo","tagDispositivo","getTextoParaCitacao","necessitaOmissis","tagOmissis","temFilhoNaoSuprimido","CitacaoComandoDispPrj","getDispositivosParaCitacao","getDispositivosNaoOriginais","ComandoEmendaBuilder","getComandoEmenda","getDispositivosRepresentativosDeCadaComando","getRefGenericaProjeto","CmdEmdDispPrj","temDispositivoDeProjeto","getDispositivosComando","artigosOndeCouber","iUltimo","cmd","EmendaBuilder","getEmenda","emd","preencheDispositivos","ds","dm","da","criaDispositivoEmendaAdicionado","ca","urnNormaAlterada","textoOmitido","abreAspas","fechaAspas","buildTree","tree","lXhier","lXcontainersOmissis","buildNode","buildAlteracaoSeNecessario","buildFilhos","TYPE_NAME","buildIdAlteracao","namespaceURI","localPart","string","buildDispositivo","nomeAgrupador","buildContent","ocorrencias","fim","http","buildSpan","to","resultHref","contentHref","isEmendamento","buildProjetoNormaFromJsonix","documentoLexml","emendamento","projetoNorma","NORMA","PROJETO","getUrn","getMetadado","getParteInicial","getTextoArticulado","projeto","retiraCaracteresDesnecessarios","documento","metadado","identificacao","epigrafe","parteInicial","ementa","preambulo","buildArticulacao","notaAlteracao","buildContentDispositivo","buildAlteracao","DOCUMENTO_PADRAO","LexmlEtaComponent","getProjetoAtualizado","out","articulacaoAtualizada","articulacaoProjetoNorma","hasChangedProjetoNorma","hasChangedModo","loadProjetoNorma","hasChangedEmenda","loadEmenda"],"mappings":"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"}